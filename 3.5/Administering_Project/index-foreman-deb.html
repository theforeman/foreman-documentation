<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<title>Administering Foreman</title>
<style>
*,::before,::after{box-sizing:border-box}html{font-size:100%;-webkit-text-size-adjust:100%}body{background:#fff;color:rgba(0,0,0,0.8);padding:0;margin:0;font-family:"Noto Serif", "DejaVu Serif", serif;font-size:inherit;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,p,blockquote,th,td{margin:0;padding:0}a{background:none;color:#2156a5;text-decoration:underline;line-height:inherit}a:active,a:hover{cursor:pointer;outline:0}a:focus{outline:thin dotted}a:hover,a:focus{color:#1d4b8f}abbr{font-size:0.9em}abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}b,strong{font-weight:bold;line-height:inherit}strong strong{font-weight:400}code,kbd,pre{font-family:"Droid Sans Mono", "DejaVu Sans Mono", monospace;font-size:1em}code{font-weight:400;color:rgba(0,0,0,0.9)}pre{color:rgba(0,0,0,0.9);line-height:1.45;text-rendering:optimizeSpeed;white-space:pre-wrap}dfn{font-style:italic}em,i{font-style:italic;line-height:inherit}em em{font-style:normal}hr{border:solid #dddddf;border-width:1px 0 0;clear:both;height:0;margin:1.25em 0 1.1875em}mark{background:#ff0;color:#000}p{line-height:1.6;margin-bottom:1.25rem;text-rendering:optimizeLegibility}q{quotes:"\201C" "\201D" "\2018" "\2019"}small{font-size:60%;line-height:inherit}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-0.5em}sub{bottom:-0.25em}img,object[type^="image/"],svg{display:inline-block;height:auto;max-width:100%;vertical-align:middle}img{border:0;-ms-interpolation-mode:bicubic}object{max-width:100%}svg:not(:root){overflow:hidden}figure{margin:0}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}.left{float:left !important}.right{float:right !important}.text-left{text-align:left !important}.text-right{text-align:right !important}.text-center{text-align:center !important}.text-justify{text-align:justify !important}.hide{display:none}.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:0.25em}p aside{font-size:.875em;line-height:1.35;font-style:italic}h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans", "DejaVu Sans", sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.2;word-spacing:-0.05em}h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{color:#e99b8f;line-height:0}h1{font-size:2.125em}h2{font-size:1.6875em}h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}h4,h5{font-size:1.125em}h6{font-size:1em}ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}ul,ol{margin-left:1.5em}ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}ul.square{list-style-type:square}ul.circle{list-style-type:circle}ul.disc{list-style-type:disc}ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}dl dt{margin-bottom:.3125em;font-weight:bold}dl dd{margin-bottom:1.25em;margin-left:1.125em}blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,0.85)}@media screen and (min-width: 768px){h1{font-size:2.75em}h2{font-size:2.3125em}h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}h4{font-size:1.4375em}}table{background:#fff;border:1px solid #dedede;border-collapse:collapse;border-spacing:0;margin-bottom:1.25em;word-wrap:normal}table thead,table tfoot{background:#f7f8f7}table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,0.8);text-align:left}table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,0.8)}table tr.even,table tr.alt{background:#f8f8f7}table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}.center{margin-left:auto;margin-right:auto}.stretch{width:100%}.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:"";display:table}.clearfix::after,.float-group::after{clear:both}:not(pre).nobreak{word-wrap:normal}:not(pre).nowrap{white-space:nowrap}:not(pre).pre-wrap{white-space:pre-wrap}:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal !important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}pre>code{display:block}pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}.keyseq{color:rgba(51,51,51,0.8)}kbd{display:inline-block;color:rgba(0,0,0,0.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,0.2),inset 0 0 0 0.1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}.keyseq kbd:first-child{margin-left:0}.keyseq kbd:last-child{margin-right:0}.menuseq,.menuref{color:#000}.menuseq b:not(.caret),.menuref{font-weight:inherit}.menuseq{word-spacing:-0.02em}.menuseq b.caret{font-size:1.25em;line-height:0.8}.menuseq i.caret{font-weight:bold;text-align:center;width:0.45em}b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}b.button::before{content:"[";padding:0 3px 0 2px}b.button::after{content:"]";padding:0 2px 0 3px}p a>code:hover{color:rgba(0,0,0,0.9)}body>div[id]{margin:0 auto;max-width:62.5em;position:relative;padding-left:.9375em;padding-right:.9375em;width:100%}body>div[id]::before,body>div[id]::after,#content #footnotes::before{content:"";display:table;clear:both}#content{margin-top:1.25em;margin-bottom:0.625em}#content::before{content:none}#header>h1:first-child{color:rgba(0,0,0,0.85);margin-top:2.25rem;margin-bottom:0}#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,0.6);display:flex;flex-flow:row wrap}#header .details span:first-child{margin-left:-0.125em}#header .details span.email a{color:rgba(0,0,0,0.85)}#header .details br{display:none}#header .details br+span::before{content:"\00a0\2013\00a0"}#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,0.85)}#header .details br+span#revremark::before{content:"\00a0|\00a0"}#header #revnumber{text-transform:capitalize}#header #revnumber::after{content:"\00a0"}#content>h1:first-child:not([class]){color:rgba(0,0,0,0.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}#toc{border-bottom:1px solid #e7e7e9;padding-bottom:0.5em}#toc>ul{margin-left:0.125em}#toc ul.sectlevel0>li>a{font-style:italic}#toc ul.sectlevel0 ul.sectlevel1{margin:0.5em 0}#toc ul{font-family:"Open Sans", "DejaVu Sans", sans-serif;list-style-type:none}#toc li{line-height:1.3334;margin-top:0.3334em}#toc a{text-decoration:none}#toc a:active{text-decoration:underline}#toctitle{color:#7a2518;font-size:1.2em}@media screen and (min-width: 768px){#toctitle{font-size:1.375em}body.toc2{padding-left:15em;padding-right:0}#toc.toc2{margin-top:0 !important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0 !important;border-bottom-width:0 !important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}#toc.toc2>ul{font-size:.9em;margin-bottom:0}#toc.toc2 ul ul{margin-left:0;padding-left:1em}#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:0.5em}body.toc2.toc-right{padding-left:0;padding-right:15em}body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}@media screen and (min-width: 1280px){body.toc2{padding-left:20em;padding-right:0}#toc.toc2{width:20em}#toc.toc2 #toctitle{font-size:1.375em}#toc.toc2>ul{font-size:0.95em}#toc.toc2 ul ul{padding-left:1.25em}body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}#content #toc>:first-child{margin-top:0}#content #toc>:last-child{margin-bottom:0}#footer{max-width:none;background:#025d8c;padding:1.25em}#footer-text{color:rgba(255,255,255,0.8);line-height:1.44}.sect1{padding-bottom:0.625em}@media screen and (min-width: 768px){#content{margin-bottom:1.25em}.sect1{padding-bottom:1.25em}}.sect1:last-child{padding-bottom:0}.sect1+.sect1{border-top:1px solid #e7e7e9}#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none !important;visibility:hidden;text-align:center;font-weight:400}#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:0.1em}#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}details{margin-left:1.25rem}details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}details>summary::-webkit-details-marker{display:none}details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif", "DejaVu Serif", serif;font-size:1rem;font-style:italic}table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,0.85)}.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}.admonitionblock>table td.icon{text-align:center;width:80px}.admonitionblock>table td.icon img{max-width:none}.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans", "DejaVu Sans", sans-serif;text-transform:uppercase}.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,0.6);word-wrap:anywhere}.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}.exampleblock>.content{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#fffef7;border-radius:4px;box-shadow:0 1px 4px #e0e0dc}.exampleblock>.content>:first-child{margin-top:0}.exampleblock>.content>:last-child{margin-bottom:0}.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}.sidebarblock>:first-child{margin-top:0}.sidebarblock>:last-child{margin-bottom:0}.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:0.8125em}@media screen and (min-width: 768px){.literalblock pre,.listingblock>.content>pre{font-size:0.90625em}}@media screen and (min-width: 1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,0.9)}.listingblock>.content{position:relative}.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:0.5}.listingblock:hover code[data-lang]::before{display:block}.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:0.5}.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}.listingblock pre.highlightjs{padding:0}.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}.listingblock pre.prettyprint{border-width:0}.prettyprint{background:#f7f7f8}pre.prettyprint .linenums{line-height:1.45;margin-left:2em}pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}pre.prettyprint li code[data-lang]::before{opacity:1}pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}table.linenotable td.code{padding-left:0.75em}table.linenotable td.linenos{width:0.01%}table.linenotable td.linenos,pre.pygments .linenos,pre.rouge .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}pre.pygments span.linenos,pre.rouge span.linenos{display:inline-block;margin-right:0.75em}.quoteblock{margin:0 1em 1.25em 1.5em;display:table}.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:0.75em}.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,0.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}.quoteblock blockquote{margin:0;padding:0;border:0}.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,0.1)}.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}.verseblock{margin:0 1em 1.25em}.verseblock pre{font-family:"Open Sans", "DejaVu Sans", sans-serif;font-size:1.15rem;color:rgba(0,0,0,0.85);font-weight:300;text-rendering:optimizeLegibility}.verseblock pre strong{font-weight:400}.verseblock .attribution{margin-top:1.25rem;margin-left:0.5ex}.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}.quoteblock .attribution br,.verseblock .attribution br{display:none}.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,0.6)}.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}.quoteblock.abstract{margin:0 1em 1.25em;display:block}.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:0.25em solid #dddddf}.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}p.tableblock:last-child{margin-bottom:0}td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}td.tableblock>.content>:last-child{margin-bottom:-1.25em}table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}table.grid-all>*>tr>*{border-width:1px}table.grid-cols>*>tr>*{border-width:0 1px}table.grid-rows>*>tr>*{border-width:1px 0}table.frame-all{border-width:1px}table.frame-ends{border-width:1px 0}table.frame-sides{border-width:0 1px}table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}th.halign-left,td.halign-left{text-align:left}th.halign-right,td.halign-right{text-align:right}th.halign-center,td.halign-center{text-align:center}th.valign-top,td.valign-top{vertical-align:top}th.valign-bottom,td.valign-bottom{vertical-align:bottom}th.valign-middle,td.valign-middle{vertical-align:middle}table thead th,table tfoot th{font-weight:bold}tbody tr th{background:#f7f8f7}tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,0.8);font-weight:bold}p.tableblock>code:only-child{background:none;padding:0}p.tableblock{font-size:1em}ol{margin-left:1.75em}ul li ol{margin-left:1.5em}dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:0.625em}ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:0.625em}ul.unstyled,ol.unstyled{margin-left:0}li>p:empty:only-child::before{content:"";display:inline-block}ul.checklist>li>p:first-child{margin-left:-1em}ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:0.125em}ul.checklist>li>p:first-child>input[type=checkbox]:first-child{font:inherit;margin:0 .25em 0 0;padding:0}ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 0.625em -1.25em}ul.inline>li{margin-left:1.25em}.unstyled dl dt{font-weight:400;font-style:normal}ol.arabic{list-style-type:decimal}ol.decimal{list-style-type:decimal-leading-zero}ol.loweralpha{list-style-type:lower-alpha}ol.upperalpha{list-style-type:upper-alpha}ol.lowerroman{list-style-type:lower-roman}ol.upperroman{list-style-type:upper-roman}ol.lowergreek{list-style-type:lower-greek}.hdlist>table,.colist>table{border:0;background:none}.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}td.hdlist1,td.hdlist2{vertical-align:top;padding:0 0.625em}td.hdlist1{font-weight:bold;padding-bottom:1.25em}td.hdlist2{word-wrap:anywhere}.literalblock+.colist,.listingblock+.colist{margin-top:-0.5em}.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}.colist td:not([class]):first-child img{max-width:none}.colist td:not([class]):last-child{padding:0.25em 0}.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}.imageblock.left{margin:0.25em 0.625em 1.25em 0}.imageblock.right{margin:0.25em 0 1.25em 0.625em}.imageblock>.title{margin-bottom:0}.imageblock.thumb,.imageblock.th{border-width:6px}.imageblock.thumb>.title,.imageblock.th>.title{padding:0 0.125em}.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}.image.left{margin-right:0.625em}.image.right{margin-left:0.625em}a.image{text-decoration:none;display:inline-block}a.image object{pointer-events:none}sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}sup.footnote a,sup.footnoteref a{text-decoration:none}sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:0.625em}#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:0.2em}#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}#footnotes .footnote:last-of-type{margin-bottom:0}#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:0.75em 0}div.page-break{display:none}div.unbreakable{page-break-inside:avoid}.big{font-size:larger}.small{font-size:smaller}.underline{text-decoration:underline}.overline{text-decoration:overline}.line-through{text-decoration:line-through}.aqua{color:#00bfbf}.aqua-background{background:#00fafa}.black{color:#000}.black-background{background:#000}.blue{color:#0000bf}.blue-background{background:#0000fa}.fuchsia{color:#bf00bf}.fuchsia-background{background:#fa00fa}.gray{color:#606060}.gray-background{background:#7d7d7d}.green{color:#006000}.green-background{background:#007d00}.lime{color:#00bf00}.lime-background{background:#00fa00}.maroon{color:#600000}.maroon-background{background:#7d0000}.navy{color:#000060}.navy-background{background:#00007d}.olive{color:#606000}.olive-background{background:#7d7d00}.purple{color:#600060}.purple-background{background:#7d007d}.red{color:#bf0000}.red-background{background:#fa0000}.silver{color:#909090}.silver-background{background:#bcbcbc}.teal{color:#006060}.teal-background{background:#007d7d}.white{color:#bfbfbf}.white-background{background:#fafafa}.yellow{color:#bfbf00}.yellow-background{background:#fafa00}span.icon>.fa{cursor:default}a span.icon>.fa{cursor:inherit}.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,0.5);cursor:default}.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,0.8);color:#111}.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}.conum[data-value]{display:inline-block;color:#fff !important;background:rgba(0,0,0,0.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans", "DejaVu Sans", sans-serif;font-style:normal;font-weight:bold}.conum[data-value] *{color:#fff !important}.conum[data-value]+b{display:none}.conum[data-value]::after{content:attr(data-value)}pre .conum[data-value]{position:relative;top:-0.125em}b.conum *{color:inherit !important}.conum:not([data-value]):empty{display:none}dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}h1,h2,p,td.content,span.alt,summary{letter-spacing:-0.01em}p strong,td.content strong,div.footnote strong{letter-spacing:-0.005em}p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}.print-only{display:none !important}@page{margin:1.25cm 0.75cm}@media print{*{box-shadow:none !important;text-shadow:none !important}html{font-size:80%}a{color:inherit !important;text-decoration:underline !important}a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none !important}a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:0.25em}abbr[title]{border-bottom:1px dotted}abbr[title]::after{content:" (" attr(title) ")"}pre,blockquote,tr,img,object,svg{page-break-inside:avoid}thead{display:table-header-group}p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}body>div[id]{max-width:none}#toc,.sidebarblock,.exampleblock>.content{background:none !important}#toc{border-bottom:1px solid #dddddf !important;padding-bottom:0 !important}body.book #header{text-align:center}body.book #header>h1:first-child{border:0 !important;margin:2.5em 0 1em}body.book #header .details{border:0 !important;display:block;padding:0 !important}body.book #header .details span:first-child{margin-left:0 !important}body.book #header .details br{display:block}body.book #header .details br+span::before{content:none !important}body.book #toc{border:0 !important;text-align:left !important;padding:0 !important;margin:0 !important}body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}.listingblock code[data-lang]::before{display:block}div.page-break{display:block;page-break-after:always}#footer{padding:0 0.9375em}.hide-on-print{display:none !important}.print-only{display:block !important}.hide-for-print{display:none !important}.show-for-print{display:inherit !important}}@media amzn-kf8, print{#header>h1:first-child{margin-top:1.25rem}.sect1{padding:0 !important}.sect1+.sect1{border:0}#footer{background:none}#footer-text{color:rgba(0,0,0,0.6);font-size:0.9em}}@media amzn-kf8{body>div[id]{padding:0}}body{padding:0;margin:0;margin-top:70px !important}.container{position:relative;z-index:1;padding-top:50px;min-height:100%}.container p{font-family:sans-serif;font-size:1.2em}nav{position:fixed;z-index:9999;left:0;right:0;top:0;height:70px;padding:0 1.5em;background-color:#025d8c;font-family:sans-serif;line-height:70px}nav .logo{width:50px;vertical-align:middle}nav .nav-menu{position:absolute;right:0.3em;top:0;padding:0;margin:0;list-style:none}nav .nav-item{display:inline-block}nav .nav-item>a{display:inline-block;padding:0 2.5em;line-height:70px;color:#fff;text-decoration:none}nav .dropdown{position:relative}nav .dropdown a::after{content:"";display:inline-block;margin-left:0.5em;vertical-align:middle;border-top:0.3em solid #fff;border-right:0.3em solid transparent;border-left:0.3em solid transparent}nav .dropdown.show a::after{transform:rotate(180deg)}nav .dropdown-menu{display:none;position:absolute;left:0;right:0;top:100%;padding:0.5em 0;margin-top:-0.5em;border:1px solid rgba(0,0,0,0.3);border-radius:0.5em;background-color:#fff;width:max-content}nav .dropdown-menu-left{left:auto;right:0}nav .dropdown.show .dropdown-menu{display:block}nav .dropdown-div{display:block;padding:0.4em 0;line-height:4em}nav .dropdown-div a::after{content:none;margin-left:0;border-top:0;border-right:0;border-left:0}nav .dropdown-item{display:block;padding:0 1.5em;font-size:0.875em;color:#000;line-height:1.6em;text-decoration:none}nav .btn-hamburger{display:none;position:absolute;right:1.5em;top:50%;background-color:transparent;border:0;cursor:pointer;outline:none;transform:translateY(-50%)}nav .btn-hamburger span{display:block;width:30px;height:4px;background-color:#fff;margin:6px;border-radius:2px;transition:0.3s ease-in-out}nav .btn-hamburger span:nth-child(4),nav .btn-hamburger span:nth-child(5){position:absolute;top:10px;opacity:0.5}nav .btn-hamburger span:nth-child(4){transform:rotate(45deg) scale(0)}nav .btn-hamburger span:nth-child(5){transform:rotate(-45deg) scale(0)}nav.opened .btn-hamburger span:nth-child(4){opacity:1;transform:rotate(45deg) scale(1)}nav.opened .btn-hamburger span:nth-child(5){opacity:1;transform:rotate(-45deg) scale(1)}nav.opened .btn-hamburger span:nth-child(1),nav.opened .btn-hamburger span:nth-child(2),nav.opened .btn-hamburger span:nth-child(3){opacity:0}@media screen and (max-width: 768px){nav .nav-menu{position:fixed;left:0;right:0;top:70px;bottom:100%;display:flex;flex-direction:column;justify-content:start;background-color:#363d4e;transition:bottom 0.5s ease-in-out;overflow:hidden}nav.opened .nav-menu{bottom:0}nav .nav-item>a{display:block}nav .dropdown-menu{position:relative;top:0;margin:0 1.5em}nav .btn-hamburger{display:block}}@media screen{div.narrow{max-width:1080px;margin:0 auto !important;margin-top:70px auto !important;float:none !important}#toc.toc2{margin-top:70px !important}}

</style>
<!-- docinfo -->
</head>
<body class="book toc2 toc-left">
    <div id="wrap">
      <script src="/js/versions.js"></script>
      <script src="/js/nav.js"></script>
      <script>
        document.open();
        document.write(buildNavigation());
        addNavbarListeners();
        document.close();
      </script>
    </div>
<div id="header">
<h1>Administering Foreman</h1>
<div class="details">
<span id="revnumber">version 3.5,</span>
<span id="revdate">published Feb 02 2023</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#Accessing_Server_admin">1. Accessing Foreman</a>
<ul class="sectlevel2">
<li><a href="#Logging_in_admin">1.1. Logging in to Foreman</a></li>
<li><a href="#Navigation_Tabs_in_the_Web_UI_admin">1.2. Navigation Tabs in the Foreman web UI</a></li>
<li><a href="#Changing_the_Password_admin">1.3. Changing the Password</a></li>
<li><a href="#Resetting_the_Administrative_User_Password_admin">1.4. Resetting the Administrative User Password</a></li>
<li><a href="#Setting_a_Custom_Message_on_the_Login_Page_admin">1.5. Setting a Custom Message on the Login Page</a></li>
</ul>
</li>
<li><a href="#Starting_and_Stopping_Server_admin">2. Starting and Stopping Foreman</a></li>
<li><a href="#Managing_Project_with_Ansible_Collections_admin">3. Managing Foreman with Ansible Collections</a>
<ul class="sectlevel2">
<li><a href="#Installing_the_Project_Ansible_Modules_admin">3.1. Installing the Foreman Ansible Modules</a></li>
<li><a href="#Viewing_the_Ansible_Modules_admin">3.2. Viewing the Foreman Ansible Modules</a></li>
</ul>
</li>
<li><a href="#Managing_Users_and_Roles_admin">4. Managing Users and Roles</a>
<ul class="sectlevel2">
<li><a href="#Managing_Users_admin">4.1. Managing Users</a></li>
<li><a href="#Managing_SSH_Keys_admin">4.2. Managing SSH Keys</a></li>
<li><a href="#Creating_and_Managing_User_Groups_admin">4.3. Creating and Managing User Groups</a></li>
<li><a href="#Creating_and_Managing_Roles_admin">4.4. Creating and Managing Roles</a></li>
<li><a href="#Predefined_Roles_admin">4.5. Predefined Roles Available in Foreman</a></li>
<li><a href="#Granular_Permission_Filtering_admin">4.6. Granular Permission Filtering</a></li>
</ul>
</li>
<li><a href="#Configuring_Email_Notifications_admin">5. Configuring Email Notifications</a>
<ul class="sectlevel2">
<li><a href="#Notification_Types_admin">5.1. Notification Types</a></li>
<li><a href="#Configuring_Email_Notification_Preferences_admin">5.2. Configuring Email Notification Preferences</a></li>
<li><a href="#Testing_Email_Delivery_admin">5.3. Testing Email Delivery</a></li>
<li><a href="#Testing_Email_Notifications_admin">5.4. Testing Email Notifications</a></li>
<li><a href="#Changing_Email_Notifications_for_a_Host_admin">5.5. Changing Email Notification Settings for a Host</a></li>
</ul>
</li>
<li><a href="#backing-up-foreman-server-and-smart-proxy_admin">6. Backing Up Foreman&#160;server and Smart&#160;Proxy&#160;server</a>
<ul class="sectlevel2">
<li><a href="#Estimating_the_Size_of_a_Backup_admin">6.1. Estimating the Size of a Backup</a></li>
<li><a href="#Performing_a_Full_Backup_admin">6.2. Performing a Full Backup of Foreman&#160;server or Smart&#160;Proxy&#160;server</a></li>
<li><a href="#Performing_a_Backup_Without_Pulp_Content_admin">6.3. Performing a Backup without Pulp Content</a></li>
<li><a href="#Performing_an_Incremental_Backup_admin">6.4. Performing an Incremental Backup</a></li>
<li><a href="#Example_of_a_Weekly_Full_Backup_Followed_by_Daily_Incremental_Backups_admin">6.5. Example of a Weekly Full Backup Followed by Daily Incremental Backups</a></li>
<li><a href="#Performing_an_Online_Backup_admin">6.6. Performing an Online Backup</a></li>
<li><a href="#Performing_a_Snapshot_Backup_admin">6.7. Performing a Snapshot Backup</a></li>
<li><a href="#White_Listing_and_Skipping_Steps_When_Performing_Backups_admin">6.8. White-listing and Skipping Steps When Performing Backups</a></li>
</ul>
</li>
<li><a href="#restoring-foreman-server-or-smart-proxy-from-a-backup_admin">7. Restoring Foreman&#160;server or Smart&#160;Proxy&#160;server from a Backup</a>
<ul class="sectlevel2">
<li><a href="#Restoring_from_a_Full_Backup_admin">7.1. Restoring from a Full Backup</a></li>
<li><a href="#Restoring_from_Incremental_Backups_admin">7.2. Restoring from Incremental Backups</a></li>
<li><a href="#backup-and-restore-smart-proxy-using-a-virtual-machine-snapshot_admin">7.3. Backup and Restore Smart&#160;Proxy&#160;server Using a Virtual Machine Snapshot</a></li>
</ul>
</li>
<li><a href="#maintaining-foreman-server_admin">8. Maintaining Foreman&#160;server</a>
<ul class="sectlevel2">
<li><a href="#Deleting_Audit_Records_admin">8.1. Deleting Audit Records</a></li>
<li><a href="#Anonymizing_Audit_Records_admin">8.2. Anonymizing Audit Records</a></li>
<li><a href="#Deleting_Report_Records_admin">8.3. Deleting Report Records</a></li>
<li><a href="#Configuring_the_Cleaning_Unused_Tasks_Feature_admin">8.4. Configuring the Cleaning Unused Tasks Feature</a></li>
<li><a href="#Deleting_Task_Records_admin">8.5. Deleting Task Records</a></li>
<li><a href="#Deleting_a_Task_by_ID_admin">8.6. Deleting a Task by ID</a></li>
</ul>
</li>
<li><a href="#Logging_and_Reporting_Problems_admin">9. Logging and Reporting Problems</a>
<ul class="sectlevel2">
<li><a href="#Enabling_Debug_Logging_admin">9.1. Enabling Debug Logging</a></li>
<li><a href="#Increasing_the_Logging_Levels_to_Help_with_Debugging_admin">9.2. Increasing the Logging Levels to Help with Debugging</a></li>
<li><a href="#Retrieving_the_Status_of_Services_admin">9.3. Retrieving the Status of Services</a></li>
<li><a href="#Restarting_Services_admin">9.4. Restarting Services</a></li>
<li><a href="#Enabling_Individual_Loggers_admin">9.5. Enabling Individual Loggers</a></li>
<li><a href="#Configuring_Logging_to_Journal_admin">9.6. Configuring Logging to Journal</a></li>
<li><a href="#Log_File_Directories_admin">9.7. Log File Directories Provided by Foreman</a></li>
<li><a href="#Utilities_for_Collecting_Log_Information_admin">9.8. Utilities for Collecting Log Information</a></li>
</ul>
</li>
<li><a href="#Monitoring_Resources_admin">10. Monitoring Resources</a>
<ul class="sectlevel2">
<li><a href="#Using_the_Project_Content_Dashboard_admin">10.1. Using the Foreman Content Dashboard</a></li>
<li><a href="#Configuring_RSS_Notifications_admin">10.2. Configuring RSS Notifications</a></li>
<li><a href="#monitoring-foreman-server_admin">10.3. Monitoring Foreman&#160;server</a></li>
<li><a href="#monitoring-smart-proxy-server_admin">10.4. Monitoring Smart&#160;Proxy&#160;server</a></li>
</ul>
</li>
<li><a href="#Using_Webhooks_admin">11. Using Webhooks</a>
<ul class="sectlevel2">
<li><a href="#migrating-to-webhooks_admin">11.1. Migrating to Webhooks</a></li>
<li><a href="#installing-webhooks-plugin_admin">11.2. Installing Webhooks</a></li>
<li><a href="#creating-a-webhook-template_admin">11.3. Creating a Webhook Template</a></li>
<li><a href="#creating-a-webhook_admin">11.4. Creating a Webhook</a></li>
<li><a href="#webhooks-available-events_admin">11.5. Available Webhook Events</a></li>
<li><a href="#shellhooks_admin">11.6. Shellhooks</a></li>
<li><a href="#installing-shellhooks-plugin_admin">11.7. Installing the Shellhooks Plugin</a></li>
<li><a href="#using-shellhook_arguments_admin">11.8. Using Shellhook Arguments</a></li>
</ul>
</li>
<li><a href="#Searching_and_Bookmarking_admin">12. Searching and Bookmarking</a>
<ul class="sectlevel2">
<li><a href="#Building_Search_Queries_admin">12.1. Building Search Queries</a></li>
<li><a href="#Using_Free_Text_Search_admin">12.2. Using Free Text Search</a></li>
<li><a href="#Managing_Bookmarks_admin">12.3. Managing Bookmarks</a></li>
</ul>
</li>
<li><a href="#administer_settings_information_admin">Appendix A: Administration Settings</a>
<ul class="sectlevel2">
<li><a href="#general_settings_information_admin">A.1. General Settings</a></li>
<li><a href="#foreman_tasks_admin">A.2. Tasks settings</a></li>
<li><a href="#template_sync_settings_admin">A.3. Template Sync Settings</a></li>
<li><a href="#discovered_settings_admin">A.4. Discovered Settings</a></li>
<li><a href="#boot_disk_settings_admin">A.5. Boot Disk Settings</a></li>
<li><a href="#content_settings_admin">A.6. Content Settings</a></li>
<li><a href="#authentication_settings_admin">A.7. Authentication Settings</a></li>
<li><a href="#email_settings_admin">A.8. Email Settings</a></li>
<li><a href="#notifications_settings_admin">A.9. Notifications Settings</a></li>
<li><a href="#provisioning_settings_admin">A.10. Provisioning Settings</a></li>
<li><a href="#facts_settings_admin">A.11. Facts Settings</a></li>
<li><a href="#config_management_settings_admin">A.12. Configuration Management Settings</a></li>
<li><a href="#remote_execution_settings_admin">A.13. Remote Execution Settings</a></li>
<li><a href="#ansible_settings_admin">A.14. Ansible Settings</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="Accessing_Server_admin"><a class="anchor" href="#Accessing_Server_admin"></a>1. Accessing Foreman</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After Foreman has been installed and configured, use the Foreman web UI interface to log in to Foreman for further configuration.</p>
</div>
<div class="sect2">
<h3 id="Logging_in_admin"><a class="anchor" href="#Logging_in_admin"></a>1.1. Logging in to Foreman</h3>
<div class="paragraph">
<p>Use the web user interface to log in to Foreman for further configuration.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Access Foreman&#160;server using a web browser pointed to the fully qualified domain name:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">https://<em>foreman.example.com</em>/</pre>
</div>
</div>
</li>
<li>
<p>Enter the user name and password created during the configuration process.
If a user was not created during the configuration process, the default user name is <em>admin</em>.
If you have problems logging in, you can reset the password.
For more information, see <a href="#Resetting_the_Administrative_User_Password_admin">Resetting the Administrative User Password</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Navigation_Tabs_in_the_Web_UI_admin"><a class="anchor" href="#Navigation_Tabs_in_the_Web_UI_admin"></a>1.2. Navigation Tabs in the Foreman web UI</h3>
<div class="paragraph">
<p>Use the navigation tabs to browse the Foreman web UI.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 22.2222%;">
<col style="width: 77.7778%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Navigation Tabs</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Any Context</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clicking this tab changes the organization and location.
If no organization or location is selected, the default organization is <em>Any Organization</em> and the default location is <em>Any Location</em>.
Use this tab to change to different values.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Monitor</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides summary dashboards and reports.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Content</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides content management tools.
This includes Content Views, Activation Keys, and Life Cycle Environments.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Hosts</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides host inventory and provisioning configuration tools.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Configure</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides general configuration tools and data including Host Groups and Puppet data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Infrastructure</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides tools on configuring how Foreman interacts with the environment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>User Name</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides user administration where users can edit their personal information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/common/notification-bell.png" alt="notification bell"></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides event notifications to keep administrators informed of important environment changes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Administer</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides advanced configuration for settings such as Users and RBAC, as well as general settings.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="Changing_the_Password_admin"><a class="anchor" href="#Changing_the_Password_admin"></a>1.3. Changing the Password</h3>
<div class="paragraph">
<p>These steps show how to change your password.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Click your user name at the top right corner.</p>
</li>
<li>
<p>Select <strong>My Account</strong> from the menu.</p>
</li>
<li>
<p>In the <strong>Current Password</strong> field, enter the current password.</p>
</li>
<li>
<p>In the <strong>Password</strong> field, enter a new password.</p>
</li>
<li>
<p>In the <strong>Verify</strong> field, enter the new password again.</p>
</li>
<li>
<p>Click the <strong>Submit</strong> button to save your new password.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Resetting_the_Administrative_User_Password_admin"><a class="anchor" href="#Resetting_the_Administrative_User_Password_admin"></a>1.4. Resetting the Administrative User Password</h3>
<div class="paragraph">
<p>Use the following procedures to reset the administrative password to randomly generated characters or to set a new administrative password.</p>
</div>
<div class="olist arabic">
<div class="title">To Reset the Administrative User Password</div>
<ol class="arabic">
<li>
<p>Log in to the base operating system where Foreman&#160;server is installed.</p>
</li>
<li>
<p>Enter the following command to reset the password:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-rake permissions:reset
Reset to user: admin, password: qwJxBptxb7Gfcjj5</pre>
</div>
</div>
</li>
<li>
<p>Use this password to reset the password in the Foreman web UI.</p>
</li>
<li>
<p>Edit the <code>~/.hammer/cli.modules.d/foreman.yml</code> file on Foreman&#160;server to add the new password:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># vi ~/.hammer/cli.modules.d/foreman.yml</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Unless you update the <code>~/.hammer/cli.modules.d/foreman.yml</code> file, you cannot use the new password with Hammer CLI.</p>
</div>
<div class="olist arabic">
<div class="title">To Set a New Administrative User Password</div>
<ol class="arabic">
<li>
<p>Log in to the base operating system where Foreman&#160;server is installed.</p>
</li>
<li>
<p>To set the password, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-rake permissions:reset password=<em>new_password</em></pre>
</div>
</div>
</li>
<li>
<p>Edit the <code>~/.hammer/cli.modules.d/foreman.yml</code> file on Foreman&#160;server to add the new password:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># vi ~/.hammer/cli.modules.d/foreman.yml</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Unless you update the <code>~/.hammer/cli.modules.d/foreman.yml</code> file, you cannot use the new password with Hammer CLI.</p>
</div>
</div>
<div class="sect2">
<h3 id="Setting_a_Custom_Message_on_the_Login_Page_admin"><a class="anchor" href="#Setting_a_Custom_Message_on_the_Login_Page_admin"></a>1.5. Setting a Custom Message on the Login Page</h3>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Settings</strong>, and click the <strong>General</strong> tab.</p>
</li>
<li>
<p>Click the edit button next to <strong>Login page footer text</strong>, and enter the desired text to be displayed on the login page.
For example, this text may be a warning message required by your company.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
<li>
<p>Log out of the Foreman web UI and verify that the custom text is now displayed on the login page below the Foreman version number.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Starting_and_Stopping_Server_admin"><a class="anchor" href="#Starting_and_Stopping_Server_admin"></a>2. Starting and Stopping Foreman</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Foreman provides the <code>foreman-maintain service</code> command to manage Foreman services from the command line.
This is useful when creating a backup of Foreman.
For more information on creating backups, see <a href="#backing-up-foreman-server-and-smart-proxy_admin">Backing Up Foreman&#160;server and Smart&#160;Proxy&#160;server</a>.</p>
</div>
<div class="paragraph">
<p>After installing Foreman with the <code>foreman-installer</code> command, all Foreman services are started and enabled automatically.
View the list of these services by executing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain service list</pre>
</div>
</div>
<div class="paragraph">
<p>To see the status of running services, execute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain service status</pre>
</div>
</div>
<div class="paragraph">
<p>To stop Foreman services, execute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain service stop</pre>
</div>
</div>
<div class="paragraph">
<p>To start Foreman services, execute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain service start</pre>
</div>
</div>
<div class="paragraph">
<p>To restart Foreman services, execute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain service restart</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Managing_Project_with_Ansible_Collections_admin"><a class="anchor" href="#Managing_Project_with_Ansible_Collections_admin"></a>3. Managing Foreman with Ansible Collections</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Foreman Ansible Collections is a set of Ansible modules that interact with the Foreman API.
You can use Foreman Ansible Collections to manage and automate many aspects of Foreman.</p>
</div>
<div class="sect2">
<h3 id="Installing_the_Project_Ansible_Modules_admin"><a class="anchor" href="#Installing_the_Project_Ansible_Modules_admin"></a>3.1. Installing the Foreman Ansible Modules</h3>
<div class="paragraph">
<p>Use this procedure to install the Foreman Ansible modules.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Install the package using the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># apt-get install ansible-collection-theforeman-foreman</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Viewing_the_Ansible_Modules_admin"><a class="anchor" href="#Viewing_the_Ansible_Modules_admin"></a>3.2. Viewing the Foreman Ansible Modules</h3>
<div class="paragraph">
<p>Starting with Ansible 2.10, you can view the installed Foreman Ansible modules by running:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ansible-doc -l theforeman.foreman</pre>
</div>
</div>
<div class="paragraph">
<p>When using Ansible before 2.10, you can view the installed Foreman Ansible modules by listing the content of the following directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ls /usr/share/ansible/collections/ansible_collections/theforeman/foreman/plugins/modules/</pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can also see the complete list of Foreman Ansible modules and other related information at <a href="https://galaxy.ansible.com/theforeman/foreman" class="bare">https://galaxy.ansible.com/theforeman/foreman</a>.</p>
</div>
<div class="paragraph">
<p>All modules are in the <code>theforeman.foreman</code> namespace and can be referred to in the format <code>theforeman.foreman._module_name_</code>.
For example, to display information about the <code>activation_key</code> module, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ ansible-doc theforeman.foreman.activation_key</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Managing_Users_and_Roles_admin"><a class="anchor" href="#Managing_Users_and_Roles_admin"></a>4. Managing Users and Roles</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A User defines a set of details for individuals using the system.
Users can be associated with organizations and environments, so that when they create new entities, the default settings are automatically used.
Users can also have one or more <em>roles</em> attached, which grants them rights to view and manage organizations and environments.
See <a href="#Managing_Users_admin">Managing Users</a> for more information on working with users.</p>
</div>
<div class="paragraph">
<p>You can manage permissions of several users at once by organizing them into user groups.
User groups themselves can be further grouped to create a hierarchy of permissions.
For more information on creating user groups, see <a href="#Creating_and_Managing_User_Groups_admin">Creating and Managing User Groups</a>.</p>
</div>
<div class="paragraph">
<p>Roles define a set of permissions and access levels.
Each role contains one on more <em>permission filters</em> that specify the actions allowed for the role.
Actions are grouped according to the <em>Resource type</em>.
Once a role has been created, users and user groups can be associated with that role.
This way, you can assign the same set of permissions to large groups of users.
Foreman provides a set of predefined roles and also enables creating custom roles and permission filters as described in <a href="#Creating_and_Managing_Roles_admin">Creating and Managing Roles</a>.</p>
</div>
<div class="sect2">
<h3 id="Managing_Users_admin"><a class="anchor" href="#Managing_Users_admin"></a>4.1. Managing Users</h3>
<div class="paragraph">
<p>As an administrator, you can create, modify and remove Foreman users.
You can also configure access permissions for a user or a group of users by assigning them different <em>roles</em>.</p>
</div>
<div class="sect3">
<h4 id="Creating_a_User_admin"><a class="anchor" href="#Creating_a_User_admin"></a>4.1.1. Creating a User</h4>
<div class="paragraph">
<p>Use this procedure to create a user.
To use the CLI instead of the Foreman web UI, see the <a href="#cli-creating-a-user_admin">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Users</strong>.</p>
</li>
<li>
<p>Click <strong>Create User</strong>.</p>
</li>
<li>
<p>In the <strong>Login</strong> field, enter a username for the user.</p>
</li>
<li>
<p>In the <strong>Firstname</strong> and <strong>Lastname</strong> fields, enter the real first name and last name of the user.</p>
</li>
<li>
<p>In the <strong>Mail</strong> field, enter the users email address.</p>
</li>
<li>
<p>In the <strong>Description</strong> field, add a description of the new user.</p>
</li>
<li>
<p>Select a specific language for the user from the <strong>Language</strong> list.</p>
</li>
<li>
<p>Select a timezone for the user from the <strong>Timezone</strong> list.</p>
<div class="paragraph">
<p>By default, Foreman&#160;server uses the language and timezone settings of the users browser.</p>
</div>
</li>
<li>
<p>Set a password for the user:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>From the <strong>Authorized by</strong> list, select the source by which the user is authenticated.</p>
<div class="ulist">
<ul>
<li>
<p><strong>INTERNAL</strong>: to enable the user to be managed inside Foreman&#160;server.</p>
</li>
<li>
<p><strong>EXTERNAL</strong>: to configure external authentication as described in <a href="https://docs.theforeman.org/3.5/Installing_Server/index-foreman-deb.html#Configuring_External_Authentication_foreman">Configuring External Authentication</a> in <em>Installing Foreman 3.5 Server on Debian/Ubuntu</em>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Enter an initial password for the user in the <strong>Password</strong> field and the <strong>Verify</strong> field.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Click <strong>Submit</strong> to create the user.</p>
</li>
</ol>
</div>
<div id="cli-creating-a-user_admin" class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>To create a user, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer user create \
--auth-source-id <em>My_Authentication_Source</em> \
--login <em>My_User_Name</em> \
--mail <em>My_User_Mail</em> \
--organization-ids <em>My_Organization_ID_1</em>,<em>My_Organization_ID_2</em> \
--password <em>My_User_Password</em></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>--auth-source-id 1</code> setting means that the user is authenticated internally, you can specify an external authentication source as an alternative.
Add the <code>--admin</code> option to grant administrator privileges to the user.
Specifying organization IDs is not required, you can modify the user details later using the <code>update</code> subcommand.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information about user related subcommands, enter <code>hammer user --help</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="Assigning_Roles_to_a_User_admin"><a class="anchor" href="#Assigning_Roles_to_a_User_admin"></a>4.1.2. Assigning Roles to a User</h4>
<div class="paragraph">
<p>Use this procedure to assign roles to a user.
To use the CLI instead of the Foreman web UI, see the <a href="#cli-assigning-roles-to-a-user_admin">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Users</strong>.</p>
</li>
<li>
<p>Click the <strong>username</strong> of the user to be assigned one or more roles.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If a user account is not listed, check that you are currently viewing the correct organization.
To list all the users in Foreman, click <strong>Default Organization</strong> and then <strong>Any Organization</strong>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click the <strong>Locations</strong> tab, and select a location if none is assigned.</p>
</li>
<li>
<p>Click the <strong>Organizations</strong> tab, and check that an organization is assigned.</p>
</li>
<li>
<p>Click the <strong>Roles</strong> tab to display the list of available roles.</p>
</li>
<li>
<p>Select the roles to assign from the <strong>Roles</strong> list.</p>
<div class="paragraph">
<p>To grant all the available permissions, select the <strong>Admin</strong> checkbox.</p>
</div>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To view the roles assigned to a user, click the <strong>Roles</strong> tab; the assigned roles are listed under <strong>Selected items</strong>.
To remove an assigned role, click the role name in <strong>Selected items</strong>.</p>
</div>
<div id="cli-assigning-roles-to-a-user_admin" class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>To assign roles to a user, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer user add-role --id <em>user_id</em> --role <em>role_name</em></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Impersonating_a_Different_User_Account_admin"><a class="anchor" href="#Impersonating_a_Different_User_Account_admin"></a>4.1.3. Impersonating a Different User Account</h4>
<div class="paragraph">
<p>Administrators can impersonate other authenticated users for testing and troubleshooting purposes by temporarily logging on to the Foreman web UI as a different user.
When impersonating another user, the administrator has permissions to access exactly what the impersonated user can access in the system, including the same menus.</p>
</div>
<div class="paragraph">
<p>Audits are created to record the actions that the administrator performs while impersonating another user.
However, all actions that an administrator performs while impersonating another user are recorded as having been performed by the impersonated user.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure that you are logged on to the Foreman web UI as a user with administrator privileges for Foreman.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Users</strong>.</p>
</li>
<li>
<p>To the right of the user that you want to impersonate, from the list in the <strong>Actions</strong> column, select <strong>Impersonate</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When you want to stop the impersonation session, in the upper right of the main menu, click the impersonation icon.</p>
</div>
</div>
<div class="sect3">
<h4 id="Creating_an_API_Only_User_admin"><a class="anchor" href="#Creating_an_API_Only_User_admin"></a>4.1.4. Creating an API-Only User</h4>
<div class="paragraph">
<p>You can create users that can interact only with the Foreman API.</p>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>You have created a user and assigned roles to them.
Note that this user must be authorized internally.
For more information, see <a href="#Creating_a_User_admin">Creating a User</a> and <a href="#Assigning_Roles_to_a_User_admin">Assigning Roles to a User</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in to your Foreman as admin.</p>
</li>
<li>
<p>Navigate to <strong>Administer &gt; Users</strong> and select a user.</p>
</li>
<li>
<p>On the <strong>User</strong> tab, set a password.
Do not save or communicate this password with others.
You can create pseudo-random strings on your console:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># openssl rand -hex 32</pre>
</div>
</div>
</li>
<li>
<p>On the <strong>Personal Access Tokens</strong> tab, click <strong>Add Personal Access Token</strong>.</p>
</li>
<li>
<p>Enter a name for the token.</p>
</li>
<li>
<p>Optional: Set an expiration date.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to create the API token.</p>
</li>
<li>
<p>Copy the API token.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Managing_SSH_Keys_admin"><a class="anchor" href="#Managing_SSH_Keys_admin"></a>4.2. Managing SSH Keys</h3>
<div class="paragraph">
<p>Adding SSH keys to a user allows deployment of SSH keys during provisioning.
For information on deploying SSH keys during provisioning, see <a href="https://docs.theforeman.org/3.5/Provisioning_Hosts/index-foreman-deb.html#Deploying_SSH_Keys_During_Provisioning_provisioning">Deploying SSH Keys during Provisioning</a> in <em>Provisioning Hosts</em>.</p>
</div>
<div class="paragraph">
<p>For information on SSH keys and SSH key creation, see <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/configuring_basic_system_settings/index#setting-an-openssh-server-for-key-based-authentication_assembly_using-secure-communications-between-two-systems-with-openssh">Using SSH-based Authentication</a> in <em>Red&#160;Hat Enterprise Linux&#160;8 Configuring basic system settings</em>.</p>
</div>
<div class="sect3">
<h4 id="Managing_SSH_Keys_for_a_User_admin"><a class="anchor" href="#Managing_SSH_Keys_for_a_User_admin"></a>4.2.1. Managing SSH Keys for a User</h4>
<div class="paragraph">
<p>Use this procedure to add or remove SSH keys for a user.
To use the CLI instead of the Foreman web UI, see the <a href="#cli-managing-ssh-keys-for-a-user_admin">CLI procedure</a>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure that you are logged in to the Foreman web UI as an Admin user of Foreman or a user with the <em>create_ssh_key</em> permission enabled for adding SSH key and <em>destroy_ssh_key</em> permission for removing a key.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Users</strong>.</p>
</li>
<li>
<p>From the <strong>Username</strong> column, click on the username of the required user.</p>
</li>
<li>
<p>Click on the <strong>SSH Keys</strong> tab.</p>
<div class="ulist">
<ul>
<li>
<p>To Add SSH key</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Prepare the content of the public SSH key in a clipboard.</p>
</li>
<li>
<p>Click <strong>Add SSH Key</strong>.</p>
</li>
<li>
<p>In the <strong>Key</strong> field, paste the public SSH key content from the clipboard.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for the SSH key.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>To Remove SSH key</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Click <strong>Delete</strong> on the row of the SSH key to be deleted.</p>
</li>
<li>
<p>Click <strong>OK</strong> in the confirmation prompt.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="cli-managing-ssh-keys-for-a-user_admin" class="paragraph">
<div class="title">CLI procedure</div>
<p>To add an SSH key to a user, you must specify either the path to the public SSH key file, or the content of the public SSH key copied to the clipboard.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If you have the public SSH key file, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer user ssh-keys add \
--user-id <em>user_id</em> \
--name <em>key_name</em> \
--key-file <em>~/.ssh/id_rsa.pub</em></pre>
</div>
</div>
</li>
<li>
<p>If you have the content of the public SSH key, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer user ssh-keys add \
--user-id <em>user_id</em> \
--name <em>key_name</em> \
--key <em>ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNtYAAABBBHHS2KmNyIYa27Qaa7EHp+2l99ucGStx4P77e03ZvE3yVRJEFikpoP3MJtYYfIe8k 1/46MTIZo9CPTX4CYUHeN8= host@user</em></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>To delete an SSH key from a user, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer user ssh-keys delete --id <em>key_id</em> --user-id <em>user_id</em></pre>
</div>
</div>
<div class="paragraph">
<p>To view an SSH key attached to a user, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer user ssh-keys info --id <em>key_id</em> --user-id <em>user_id</em></pre>
</div>
</div>
<div class="paragraph">
<p>To list SSH keys attached to a user, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer user ssh-keys list --user-id <em>user_id</em></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Creating_and_Managing_User_Groups_admin"><a class="anchor" href="#Creating_and_Managing_User_Groups_admin"></a>4.3. Creating and Managing User Groups</h3>
<div class="sect3">
<h4 id="User_Groups_admin"><a class="anchor" href="#User_Groups_admin"></a>4.3.1. User Groups</h4>
<div class="paragraph">
<p>With Foreman, you can assign permissions to groups of users.
You can also create user groups as collections of other user groups.
If using an external authentication source, you can map Foreman user groups to external user groups as described in <a href="https://docs.theforeman.org/3.5/Installing_Server/index-foreman-deb.html#Configuring_External_User_Groups_foreman">Configuring External User Groups</a> in <em>Installing Foreman 3.5 Server on Debian/Ubuntu</em>.</p>
</div>
<div class="paragraph">
<p>User groups are defined in an organizational context, meaning that you must select an organization before you can access user groups.</p>
</div>
</div>
<div class="sect3">
<h4 id="Creating_a_User_Group_admin"><a class="anchor" href="#Creating_a_User_Group_admin"></a>4.3.2. Creating a User Group</h4>
<div class="paragraph">
<p>Use this procedure to create a user group.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>User Groups</strong>.</p>
</li>
<li>
<p>Click <strong>Create User group</strong>.</p>
</li>
<li>
<p>On the <strong>User Group</strong> tab, specify the name of the new user group and select group members:</p>
<div class="ulist">
<ul>
<li>
<p>Select the previously created user groups from the <strong>User Groups</strong> list.</p>
</li>
<li>
<p>Select users from the <strong>Users</strong> list.</p>
</li>
</ul>
</div>
</li>
<li>
<p>On the <strong>Roles</strong> tab, select the roles you want to assign to the user group.
Alternatively, select the <strong>Admin</strong> checkbox to assign all available permissions.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>To create a user group, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer user-group create \
--name <em>My_User_Group_Name</em> \
--role-ids <em>My_Role_ID_1</em>,<em>My_Role_ID_2</em> \
--user-ids <em>My_User_ID_1</em>,<em>My_User_ID_2</em></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Removing_a_User_Group_admin"><a class="anchor" href="#Removing_a_User_Group_admin"></a>4.3.3. Removing a User Group</h4>
<div class="paragraph">
<p>Use the Foreman web UI to remove a user group.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>User Groups</strong>.</p>
</li>
<li>
<p>Click <strong>Delete</strong> to the right of the user group you want to delete.</p>
</li>
<li>
<p>In the alert box that appears, click <strong>OK</strong> to delete a user group.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Creating_and_Managing_Roles_admin"><a class="anchor" href="#Creating_and_Managing_Roles_admin"></a>4.4. Creating and Managing Roles</h3>
<div class="paragraph">
<p>Foreman provides a set of predefined roles with permissions sufficient for standard tasks, as listed in <a href="#Predefined_Roles_admin">Predefined Roles Available in Foreman</a>.
It is also possible to configure custom roles, and assign one or more permission filters to them.
Permission filters define the actions allowed for a certain resource type.
Certain Foreman plug-ins create roles automatically.</p>
</div>
<div class="sect3">
<h4 id="Creating_a_Role_admin"><a class="anchor" href="#Creating_a_Role_admin"></a>4.4.1. Creating a Role</h4>
<div class="paragraph">
<p>Use this procedure to create a role.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Roles</strong>.</p>
</li>
<li>
<p>Click <strong>Create Role</strong>.</p>
</li>
<li>
<p>Provide a <strong>Name</strong> for the role.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to save your new role.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>To create a role, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer role create --name <em>My_Role_Name</em></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>To serve its purpose, a role must contain permissions.
After creating a role, proceed to <a href="#Adding_Permissions_to_a_Role_admin">Adding Permissions to a Role</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="Cloning_a_Role_admin"><a class="anchor" href="#Cloning_a_Role_admin"></a>4.4.2. Cloning a Role</h4>
<div class="paragraph">
<p>Use the Foreman web UI to clone a role.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Roles</strong> and select <strong>Clone</strong> from the drop-down menu to the right of the required role.</p>
</li>
<li>
<p>Provide a <strong>Name</strong> for the role.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to clone the role.</p>
</li>
<li>
<p>Click the name of the cloned role and navigate to <strong>Filters</strong>.</p>
</li>
<li>
<p>Edit the permissions as required.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to save your new role.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Adding_Permissions_to_a_Role_admin"><a class="anchor" href="#Adding_Permissions_to_a_Role_admin"></a>4.4.3. Adding Permissions to a Role</h4>
<div class="paragraph">
<p>Use this procedure to add permissions to a role.
To use the CLI instead of the Foreman web UI, see the <a href="#cli-adding-permissions-to-a-role_admin">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Roles</strong>.</p>
</li>
<li>
<p>Select <strong>Add Filter</strong> from the drop-down list to the right of the required role.</p>
</li>
<li>
<p>Select the <strong>Resource type</strong> from the drop-down list.
The <em>(Miscellaneous)</em> group gathers permissions that are not associated with any resource group.</p>
</li>
<li>
<p>Click the permissions you want to select from the <strong>Permission</strong> list.</p>
</li>
<li>
<p>Depending on the <strong>Resource type</strong> selected, you can select or deselect the <strong>Unlimited</strong> and <strong>Override</strong> checkbox.
The <strong>Unlimited</strong> checkbox is selected by default, which means that the permission is applied on all resources of the selected type.
When you disable the <strong>Unlimited</strong> checkbox, the <strong>Search</strong> field activates.
In this field you can specify further filtering with use of the Foreman search syntax.
For more information, see <a href="#Granular_Permission_Filtering_admin">Granular Permission Filtering</a>.
When you enable the <strong>Override</strong> checkbox, you can add additional locations and organizations to allow the role to access the resource type in the additional locations and organizations; you can also remove an already associated location and organization from the resource type to restrict access.</p>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to save changes.</p>
</li>
</ol>
</div>
<div id="cli-adding-permissions-to-a-role_admin" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all available permissions:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer filter available-permissions</pre>
</div>
</div>
</li>
<li>
<p>Add permissions to a role:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer filter create \
--permission-ids <em>My_Permission_ID_1</em>,<em>My_Permission_ID_2</em> \
--role <em>My_Role_Name</em></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>For more information about roles and permissions parameters, enter the <code>hammer role --help</code> and <code>hammer filter --help</code> commands.</p>
</div>
</div>
<div class="sect3">
<h4 id="Viewing_Permissions_of_a_Role_admin"><a class="anchor" href="#Viewing_Permissions_of_a_Role_admin"></a>4.4.4. Viewing Permissions of a Role</h4>
<div class="paragraph">
<p>Use the Foreman web UI to view the permissions of a role.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Roles</strong>.</p>
</li>
<li>
<p>Click <strong>Filters</strong> to the right of the required role to get to the <strong>Filters</strong> page.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The <strong>Filters</strong> page contains a table of permissions assigned to a role grouped by the resource type.
It is also possible to generate a complete table of permissions and actions that you can use on your Foreman system.
For more information, see <a href="#Creating_a_Complete_Permission_Table_admin">Creating a Complete Permission Table</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="Creating_a_Complete_Permission_Table_admin"><a class="anchor" href="#Creating_a_Complete_Permission_Table_admin"></a>4.4.5. Creating a Complete Permission Table</h4>
<div class="paragraph">
<p>Use the Foreman CLI to create a permission table.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Ensure that the required packages are installed.
Execute the following command on Foreman&#160;server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># apt-get install foreman-console</pre>
</div>
</div>
</li>
<li>
<p>Start the Foreman console with the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-rake console</pre>
</div>
</div>
<div class="paragraph">
<p>Insert the following code into the console:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">f = File.open('/tmp/table.html', 'w')

result = Foreman::AccessControl.permissions {|a,b| a.security_block &lt;=&gt; b.security_block}.collect do |p|
      actions = p.actions.collect { |a| "&lt;li&gt;#{a}&lt;/li&gt;" }
      "&lt;tr&gt;&lt;td&gt;#{p.name}&lt;/td&gt;&lt;td&gt;&lt;ul&gt;#{actions.join('')}&lt;/ul&gt;&lt;/td&gt;&lt;td&gt;#{p.resource_type}&lt;/td&gt;&lt;/tr&gt;"
end.join("\n")

f.write(result)</pre>
</div>
</div>
<div class="paragraph">
<p>The above syntax creates a table of permissions and saves it to the <code>/tmp/table.html</code> file.</p>
</div>
</li>
<li>
<p>Press <code><strong>Ctrl</strong></code> + <code><strong>D</strong></code> to exit the Foreman console.
Insert the following text at the first line of <code>/tmp/table.html</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">&lt;table border="1"&gt;&lt;tr&gt;&lt;td&gt;Permission name&lt;/td&gt;&lt;td&gt;Actions&lt;/td&gt;&lt;td&gt;Resource type&lt;/td&gt;&lt;/tr&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Append the following text at the end of <code>/tmp/table.html</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">&lt;/table&gt;</pre>
</div>
</div>
</li>
<li>
<p>Open <code>/tmp/table.html</code> in a web browser to view the table.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Removing_a_Role_admin"><a class="anchor" href="#Removing_a_Role_admin"></a>4.4.6. Removing a Role</h4>
<div class="paragraph">
<p>Use the Foreman web UI to remove a role.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Roles</strong>.</p>
</li>
<li>
<p>Select <strong>Delete</strong> from the drop-down list to the right of the role to be deleted.</p>
</li>
<li>
<p>In an alert box that appears, click <strong>OK</strong> to delete the role.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Predefined_Roles_admin"><a class="anchor" href="#Predefined_Roles_admin"></a>4.5. Predefined Roles Available in Foreman</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 22.2222%;">
<col style="width: 77.7778%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Role</th>
<th class="tableblock halign-left valign-top">Permissions Provided by Role footnote:[The exact set of allowed actions associated with predefined roles can be viewed by the privileged user as described in <a href="#Viewing_Permissions_of_a_Role_admin">]</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access Insights Admin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add and edit Insights rules.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access Insights Viewer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">View Insight reports.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ansible Roles Manager</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Play roles on hosts and host groups.
View, destroy, and import Ansible roles.
View, edit, create, destroy, and import Ansible variables.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ansible Tower Inventory Reader</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">View facts, hosts, and host groups.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bookmarks manager</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create, edit, and delete bookmarks.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boot disk access</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Download the boot disk.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compliance manager</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">View, create, edit, and destroy SCAP content files, compliance policies, and tailoring files.
View compliance reports.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compliance viewer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">View compliance reports.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create ARF report</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create compliance reports.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default role</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The set of permissions that every user is granted, irrespective of any other roles.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Discovery Manager</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">View, provision, edit, and destroy discovered hosts and manage discovery rules.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Discovery Reader</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">View hosts and discovery rules.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Edit hosts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">View, create, edit, destroy, and build hosts.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Edit partition tables</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">View, create, edit and destroy partition tables.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manager</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A role similar to administrator, but does not have permissions to edit global settings.
In the Foreman web UI, global settings can be found under <strong>Administer</strong> &gt; <strong>Settings</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Organization admin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An administrator role defined per organization.
The role has no visibility into resources in other organizations.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Red&#160;Hat Access Logs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">View the log viewer and the logs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remote Execution Manager</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Control which roles have permission to run infrastructure jobs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remote Execution User</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Run remote execution jobs against hosts.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Site manager</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A restrained version of the Manager role.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">System admin</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Edit global settings in <strong>Administer</strong> &gt; <strong>Settings</strong>.</p>
</li>
<li>
<p>View, create, edit and destroy users, user groups, and roles.</p>
</li>
<li>
<p>View, create, edit, destroy, and assign organizations and locations but not view resources within them.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Users with this role can create users and assign all roles to them.
Therefore, ensure to give this role only to trusted users.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tasks manager</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">View and edit Foreman tasks.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tasks reader</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A role that can only view Foreman tasks.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Viewer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A passive role that provides the ability to view the configuration of every element of the Foreman structure, logs, reports, and statistics.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">View hosts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A role that can only view hosts.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Virt-who Manager</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A role with full virt-who permissions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Virt-who Reporter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Upload reports generated by virt-who to Foreman.
It can be used if you configure virt-who manually and require a user role that has limited virt-who permissions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Virt-who Viewer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">View virt-who configurations.
Users with this role can deploy virt-who instances using existing virt-who configurations.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="Granular_Permission_Filtering_admin"><a class="anchor" href="#Granular_Permission_Filtering_admin"></a>4.6. Granular Permission Filtering</h3>
<div class="paragraph">
<p>As mentioned in <a href="#Adding_Permissions_to_a_Role_admin">Adding Permissions to a Role</a>, Foreman provides the ability to limit the configured user permissions to selected instances of a resource type.
These granular filters are queries to the Foreman database and are supported by the majority of resource types.</p>
</div>
<div class="sect3">
<h4 id="Creating_a_Granular_Permission_Filter_admin"><a class="anchor" href="#Creating_a_Granular_Permission_Filter_admin"></a>4.6.1. Creating a Granular Permission Filter</h4>
<div class="paragraph">
<p>Use this procedure to create a granular filter.
To use the CLI instead of the Foreman web UI, see the <a href="#cli-creating-a-granular-permission-filter_admin">CLI procedure</a>.</p>
</div>
<div class="paragraph">
<p>Foreman does not apply search conditions to create actions.
For example, limiting the <em>create_locations</em> action with <em>name = "Default Location"</em> expression in the search field does not prevent the user from assigning a custom name to the newly created location.</p>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>Specify a query in the <strong>Search</strong> field on the <strong>Edit Filter</strong> page.
Deselect the <strong>Unlimited</strong> checkbox for the field to be active.
Queries have the following form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"><em>field_name</em> <em>operator</em> <em>value</em></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><em>field_name</em> marks the field to be queried.
The range of available field names depends on the resource type.
For example, the <em>Partition Table</em> resource type offers <em>family</em>, <em>layout</em>, and <em>name</em> as query parameters.</p>
</li>
<li>
<p><em>operator</em> specifies the type of comparison between <em>field_name</em> and <em>value</em>.
See <a href="#Supported_Operators_for_Granular_Search_admin">Supported Operators for Granular Search</a> for an overview of applicable operators.</p>
</li>
<li>
<p><em>value</em> is the value used for filtering.
This can be for example a name of an organization.
Two types of wildcard characters are supported: underscore (_) provides single character replacement, while percent sign (%) replaces zero or more characters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For most resource types, the <strong>Search</strong> field provides a drop-down list suggesting the available parameters.
This list appears after placing the cursor in the search field.
For many resource types, you can combine queries using logical operators such as <em>and</em>, <em>not</em> and <em>has</em> operators.</p>
</div>
<div id="cli-creating-a-granular-permission-filter_admin" class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>To create a granular filter, enter the <code>hammer filter create</code> command with the <code>--search</code> option to limit permission filters, for example:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer filter create \
--permission-ids 91 \
--search "name ~ ccv*" \
--role qa-user</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command adds to the <strong>qa-user</strong> role a permission to view, create, edit, and destroy Content Views that only applies to Content Views with name starting with <code>ccv</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="Examples_of_Using_Granular_Permission_Filters_admin"><a class="anchor" href="#Examples_of_Using_Granular_Permission_Filters_admin"></a>4.6.2. Examples of Using Granular Permission Filters</h4>
<div class="paragraph">
<p>As an administrator, you can allow selected users to make changes in a certain part of the environment path.
The following filter allows you to work with content while it is in the development stage of the application life cycle, but the content becomes inaccessible once is pushed to production.</p>
</div>
<div class="sect4">
<h5 id="Applying_Permissions_for_the_Host_Resource_Type_admin"><a class="anchor" href="#Applying_Permissions_for_the_Host_Resource_Type_admin"></a>Applying Permissions for the Host Resource Type</h5>
<div class="paragraph">
<p>The following query applies any permissions specified for the Host resource type only to hosts in the group named host-editors.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">hostgroup = host-editors</pre>
</div>
</div>
<div class="paragraph">
<p>The following query returns records where the name matches <em>XXXX</em>, <em>Yyyy</em>, or <em>zzzz</em> example strings:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">name ^ (XXXX, Yyyy, zzzz)</pre>
</div>
</div>
<div class="paragraph">
<p>You can also limit permissions to a selected environment.
To do so, specify the environment name in the <strong>Search</strong> field, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">Dev</pre>
</div>
</div>
<div class="paragraph">
<p>You can limit user permissions to a certain organization or location with the use of the granular permission filter in the <strong>Search</strong> field.
However, some resource types provide a GUI alternative, an <strong>Override</strong> checkbox that provides the <strong>Locations</strong> and <strong>Organizations</strong> tabs.
On these tabs, you can select from the list of available organizations and locations.
For more information, see <a href="#Creating_an_Organization_Specific_Manager_Role_admin">Creating an Organization Specific Manager Role</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="Creating_an_Organization_Specific_Manager_Role_admin"><a class="anchor" href="#Creating_an_Organization_Specific_Manager_Role_admin"></a>Creating an Organization Specific Manager Role</h5>
<div class="paragraph">
<p>Use the Foreman web UI to create an administrative role restricted to a single organization named <em>org-1</em>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Roles</strong>.</p>
</li>
<li>
<p>Clone the existing <strong>Organization admin</strong> role.
Select <strong>Clone</strong> from the drop-down list next to the <strong>Filters</strong> button.
You are then prompted to insert a name for the cloned role, for example <em>org-1 admin</em>.</p>
</li>
<li>
<p>Click the desired locations and organizations to associate them with the role.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to create the role.</p>
</li>
<li>
<p>Click <em>org-1 admin</em>, and click <strong>Filters</strong> to view all associated filters.
The default filters work for most use cases.
However, you can optionally click <strong>Edit</strong> to change the properties for each filter.
For some filters, you can enable the <strong>Override</strong> option if you want the role to be able to access resources in additional locations and organizations.
For example, by selecting the <strong>Domain</strong> resource type, the <strong>Override</strong> option, and then additional locations and organizations using the <strong>Locations</strong> and <strong>Organizations</strong> tabs, you allow this role to access domains in the additional locations and organizations that is not associated with this role.
You can also click <strong>New filter</strong> to associate new filters with this role.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Supported_Operators_for_Granular_Search_admin"><a class="anchor" href="#Supported_Operators_for_Granular_Search_admin"></a>4.6.3. Supported Operators for Granular Search</h4>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Logical Operators</caption>
<colgroup>
<col style="width: 22.2222%;">
<col style="width: 77.7778%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">and</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Combines search criteria.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Negates an expression.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">has</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object must have a specified property.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Symbolic Operators</caption>
<colgroup>
<col style="width: 22.2222%;">
<col style="width: 77.7778%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Is equal to</em>.
An equality comparison that is case-sensitive for text fields.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">!=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Is not equal to</em>.
An inversion of the = operator.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">~</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Like</em>.
A case-insensitive occurrence search for text fields.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">!~</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Not like</em>.
An inversion of the ~operator.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">^</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>In</em>.
An equality comparison that is case-sensitive search for text fields.
This generates a different SQL query to the <em>Is equal to</em> comparison, and is more efficient for multiple value comparison.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">!^</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Not in</em>.
An inversion of the ^operator.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;, &gt;=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Greater than</em>, <em>greater than or equal to</em>.
Supported for numerical fields only.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;, &#8656;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Less than</em>, <em>less than or equal to</em>.
Supported for numerical fields only.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Configuring_Email_Notifications_admin"><a class="anchor" href="#Configuring_Email_Notifications_admin"></a>5. Configuring Email Notifications</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Email notifications are created by Foreman&#160;server periodically or after completion of certain events.
The periodic notifications can be sent daily, weekly or monthly.</p>
</div>
<div class="paragraph">
<p>For the events that trigger a notification and notification types, see <a href="#Notification_Types_admin">Notification Types</a>.</p>
</div>
<div class="paragraph">
<p>Users do not receive any email notifications by default.
An administrator can configure users to receive notifications based on criteria such as the type of notification, and frequency.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>Foreman&#160;server does not enable outgoing emails by default, therefore you must review your email configuration.
For more information, see <a href="https://docs.theforeman.org/3.5/Installing_Server/index-foreman-deb.html#Configuring_Server_for_Outgoing_Emails_foreman">Configuring Foreman&#160;server for Outgoing Emails</a> in <em>Installing Foreman 3.5 Server on Debian/Ubuntu</em>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="Notification_Types_admin"><a class="anchor" href="#Notification_Types_admin"></a>5.1. Notification Types</h3>
<div class="paragraph">
<p>The following are the notifications created by Foreman:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Audit summary</strong>: A summary of all activity audited by Foreman&#160;server.</p>
</li>
<li>
<p><strong>Host built</strong>: A notification sent when a host is built.</p>
</li>
<li>
<p><strong>Host errata advisory</strong>: A summary of applicable and installable errata for hosts managed by the user.</p>
</li>
<li>
<p><strong>OpenSCAP policy summary</strong>: A summary of OpenSCAP policy reports and their results.</p>
</li>
<li>
<p><strong>Promote errata</strong>: A notification sent only after a Content View promotion.
It contains a summary of errata applicable and installable to hosts registered to the promoted Content View.
This allows a user to monitor what updates have been applied to which hosts.</p>
</li>
<li>
<p><strong>Puppet error state</strong>: A notification sent after a host reports an error related to Puppet.</p>
</li>
<li>
<p><strong>Puppet summary</strong>: A summary of Puppet reports.</p>
</li>
<li>
<p><strong>Sync errata</strong>: A notification sent only after synchronizing a repository.
It contains a summary of new errata introduced by the synchronization.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Configuring_Email_Notification_Preferences_admin"><a class="anchor" href="#Configuring_Email_Notification_Preferences_admin"></a>5.2. Configuring Email Notification Preferences</h3>
<div class="paragraph">
<p>You can configure Foreman to send email messages to individual users registered to Foreman.
Foreman sends the email to the email address that has been added to the account, if present.
Users can edit the email address by clicking on their name in the top-right of the Foreman web UI and selecting <strong>My account</strong>.</p>
</div>
<div class="paragraph">
<p>Configure email notifications for a user from the Foreman web UI.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you want to send email notifications to a group email address instead of an individual email address, create a user account with the group email address and minimal Foreman permissions, then subscribe the user account to the desired notification types.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Users</strong>.</p>
</li>
<li>
<p>Click the <strong>Username</strong> of the user you want to edit.</p>
</li>
<li>
<p>On the <strong>User</strong> tab, verify the value of the <strong>Mail</strong> field.
Email notifications will be sent to the address in this field.</p>
</li>
<li>
<p>On the <strong>Email Preferences</strong> tab, select <strong>Mail Enabled</strong>.</p>
</li>
<li>
<p>Select the notifications you want the user to receive using the drop-down menus next to the notification types.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The <strong>Audit Summary</strong> notification can be filtered by entering the required query in the <strong>Mail Query</strong> text box.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
<div class="paragraph">
<p>The user will start receiving the notification emails.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Testing_Email_Delivery_admin"><a class="anchor" href="#Testing_Email_Delivery_admin"></a>5.3. Testing Email Delivery</h3>
<div class="paragraph">
<p>To verify the delivery of emails, send a test email to a user.
If the email gets delivered, the settings are correct.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Users</strong>.</p>
</li>
<li>
<p>Click on the username.</p>
</li>
<li>
<p>On the <strong>Email Preferences</strong> tab, click <strong>Test email</strong>.</p>
<div class="paragraph">
<p>A test email message is sent immediately to the user&#8217;s email address.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>If the email is delivered, the verification is complete.
Otherwise, you must perform the following diagnostic steps:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Verify the user&#8217;s email address.</p>
</li>
<li>
<p>Verify Foreman&#160;server&#8217;s email configuration.</p>
</li>
<li>
<p>Examine firewall and mail server logs.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Testing_Email_Notifications_admin"><a class="anchor" href="#Testing_Email_Notifications_admin"></a>5.4. Testing Email Notifications</h3>
<div class="paragraph">
<p>To verify that users are correctly subscribed to notifications, trigger the notifications manually.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>To trigger the notifications, execute the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-rake reports:_My_Frequency_</pre>
</div>
</div>
<div class="paragraph">
<p>Replace <em>My_Frequency</em> with one of the following:</p>
</div>
</li>
<li>
<p>daily</p>
</li>
<li>
<p>weekly</p>
</li>
<li>
<p>monthly</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This triggers all notifications scheduled for the specified frequency for all the subscribed users.
If every subscribed user receives the notifications, the verification succeeds.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Sending manually triggered notifications to individual users is currently not supported.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="Changing_Email_Notifications_for_a_Host_admin"><a class="anchor" href="#Changing_Email_Notifications_for_a_Host_admin"></a>5.5. Changing Email Notification Settings for a Host</h3>
<div class="paragraph">
<p>Foreman can send event notifications for a host to the host&#8217;s registered owner.
You can configure Foreman to send email notifications either to an individual user or a user group.
When set to a user group, all group members who are subscribed to the email type receive a message.</p>
</div>
<div class="paragraph">
<p>To view the notification status for a host, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong> and click the host you want to view.
In the host details page, click the <strong>Additional Information</strong> tab, you can view the email notification status.</p>
</div>
<div class="paragraph">
<p>Receiving email notifications for a host can be useful, but also overwhelming if you are expecting to receive frequent errors, for example, because of a known issue or error you are working around.
To change the email notification settings for a host, complete the following steps.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>, and select the host with the notification setting you want to change.</p>
</li>
<li>
<p>Select the host&#8217;s checkbox, and from the <strong>Select Action</strong> list, select <strong>Enable Notifications</strong> or <strong>Disable Notifications</strong>, depending on what you want.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="backing-up-foreman-server-and-smart-proxy_admin"><a class="anchor" href="#backing-up-foreman-server-and-smart-proxy_admin"></a>6. Backing Up Foreman&#160;server and Smart&#160;Proxy&#160;server</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can back up your Foreman deployment to ensure the continuity of your Foreman deployment and associated data in the event of a disaster.
If your deployment uses custom configurations, you must consider how to handle these custom configurations when you plan your backup and disaster recovery policy.</p>
</div>
<div class="paragraph">
<p>To create a backup of your Foreman&#160;server or Smart&#160;Proxy&#160;server and all associated data, use the <code>foreman-maintain backup</code> command.
Backing up to a separate storage device on a separate system is highly recommended.</p>
</div>
<div class="paragraph">
<p>Foreman services are unavailable during the backup.
Therefore, you must ensure that no other tasks are scheduled by other administrators.
You can schedule a backup using <code>cron</code>.
For more information, see the <a href="#Example_of_a_Weekly_Full_Backup_Followed_by_Daily_Incremental_Backups_admin">Example of a Weekly Full Backup Followed by Daily Incremental Backups</a>.</p>
</div>
<div class="paragraph">
<p>During offline or snapshot backups, the services are inactive and Foreman is in a maintenance mode.
All the traffic from outside on port 443 is rejected by a firewall to ensure there are no modifications triggered.</p>
</div>
<div class="paragraph">
<p>You must encrypt or move the backup to a secure location to minimize the risk of damage or unauthorized access to the hosts.</p>
</div>
<div class="paragraph">
<div class="title">Conventional Backup Methods</div>
<p>You can also use conventional backup methods.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you plan to use the <code>foreman-maintain backup</code> command to create a backup, do not stop Foreman services.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>When creating a snapshot or conventional backup, you must stop all services as follows:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain service stop</pre>
</div>
</div>
</li>
<li>
<p>Start the services after creating a snapshot or conventional backup:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain service start</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="Estimating_the_Size_of_a_Backup_admin"><a class="anchor" href="#Estimating_the_Size_of_a_Backup_admin"></a>6.1. Estimating the Size of a Backup</h3>
<div class="paragraph">
<p>Note that estimations in this section are for the installations that use the Katello plug-in.</p>
</div>
<div class="paragraph">
<p>The full backup creates uncompressed archives of PostgreSQL and Pulp database files, and Foreman configuration files.
Compression occurs after the archives are created to decrease the time when Foreman services are unavailable.</p>
</div>
<div class="paragraph">
<p>A full backup requires space to store the following data:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Uncompressed Foreman database and configuration files</p>
</li>
<li>
<p>Compressed Foreman database and configuration files</p>
</li>
<li>
<p>An extra 20% of the total estimated space to ensure a reliable backup</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Enter the <code>du</code> command to estimate the size of uncompressed directories containing Foreman database and configuration files:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># du -sh /var/lib/postgresql/13/main /var/lib/pulp
100G    /var/lib/postgresql/13/main
100G	/var/lib/pulp

# du -csh /var/lib/qpidd /var/lib/tftpboot /etc /root/ssl-build \
/var/www/html/pub /opt/puppetlabs
886M  /var/lib/qpidd
16M   /var/lib/tftpboot
37M   /etc
900K  /root/ssl-build
100K  /var/www/html/pub
2M    /opt/puppetlabs
942M  total</pre>
</div>
</div>
</li>
<li>
<p>Calculate how much space is required to store the compressed data.</p>
<div class="paragraph">
<p>The following table describes the compression ratio of all data items included in the backup:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Backup Data Compression Ratio</caption>
<colgroup>
<col style="width: 22.2222%;">
<col style="width: 33.3333%;">
<col style="width: 16.6666%;">
<col style="width: 27.7779%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Data type</th>
<th class="tableblock halign-left valign-top">Directory</th>
<th class="tableblock halign-left valign-top">Ratio</th>
<th class="tableblock halign-left valign-top">Example results</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PostgreSQL database files</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/lib/postgresql/13/main</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80&#8202;&#8211;&#8202;85%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100 GB &#8594; 20 GB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pulp RPM files</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/lib/pulp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(not compressed)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100 GB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configuration files</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>/var/lib/qpidd</code><br>
<code>/var/lib/tftpboot</code><br>
<code>/etc</code><br>
<code>/root/ssl-build</code><br>
<code>/var/www/html/pub</code><br>
<code>/opt/puppetlabs</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">85%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">942 MB &#8594; 141 MB</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In this example, the compressed backup data occupies 120 GB in total.</p>
</div>
</li>
<li>
<p>To calculate the amount of available space you require to store a backup, calculate the sum of the estimated values of compressed and uncompressed backup data, and add an extra 20% to ensure a reliable backup.</p>
<div class="paragraph">
<p>This example requires 201 GB plus 120 GB for the uncompressed and compressed backup data, 321 GB in total.
With 64 GB of extra space, 385 GB must be allocated for the backup location.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Performing_a_Full_Backup_admin"><a class="anchor" href="#Performing_a_Full_Backup_admin"></a>6.2. Performing a Full Backup of Foreman&#160;server or Smart&#160;Proxy&#160;server</h3>
<div class="paragraph">
<p>Foreman uses the <code>foreman-maintain backup</code> command to make backups.</p>
</div>
<div class="paragraph">
<p>There are three main methods of backing up Foreman&#160;server:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Offline backup</p>
</li>
<li>
<p>Online backup</p>
</li>
<li>
<p>Snapshot backups</p>
<div class="paragraph">
<p>For more information about each of these methods, you can view the usage statements for each backup method.</p>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Offline backups</div>
<div class="content">
<pre class="nowrap"># foreman-maintain backup offline --help</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Online backups</div>
<div class="content">
<pre class="nowrap"># foreman-maintain backup online --help</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Snapshots backups</div>
<div class="content">
<pre class="nowrap"># foreman-maintain backup snapshot --help</pre>
</div>
</div>
<div class="paragraph">
<div class="title">Directory creation</div>
<p>The <code>foreman-maintain backup</code> command creates a time-stamped subdirectory in the backup directory that you specify.
The <code>foreman-maintain backup</code> command does not overwrite backups, therefore you must select the correct directory or subdirectory when restoring from a backup or an incremental backup.
The <code>foreman-maintain backup</code> command stops and restarts services as required.</p>
</div>
<div class="paragraph">
<p>When you run the <code>foreman-maintain backup offline</code> command, the following default backup directories are created:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>foreman-backup</code> on Foreman</p>
</li>
<li>
<p><code>foreman-proxy-backup</code> on Smart&#160;Proxy</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you want to set a custom directory name, add the <code>--preserve-directory</code> option and add a directory name.
The backup is then stored in the directory you provide in the command line.
If you use the <code>--preserve-directory</code> option, no data is removed if the backup fails.</p>
</div>
<div class="paragraph">
<p>Note that if you use a local PostgreSQL database, the <code>postgres</code> user requires write access to the backup directory.</p>
</div>
<div class="paragraph">
<div class="title">Remote databases</div>
<p>You can use the <code>foreman-maintain backup</code> command to back up remote databases.</p>
</div>
<div class="paragraph">
<p>You can use both online and offline methods to back up remote databases, but if you use offline methods, such as snapshot, the <code>foreman-maintain backup</code> command performs a database dump.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure that your backup location has sufficient available disk space to store the backup.
For more information, see <a href="#Estimating_the_Size_of_a_Backup_admin">Estimating the Size of a Backup</a>.</p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>Request other users of Foreman&#160;server or Smart&#160;Proxy&#160;server to save any changes and warn them that Foreman services are unavailable for the duration of the backup.
Ensure no other tasks are scheduled for the same time as the backup.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>On Foreman&#160;server, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain backup offline <em>/var/foreman-backup</em></pre>
</div>
</div>
</li>
<li>
<p>On Smart&#160;Proxy&#160;server, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain backup offline <em>/var/foreman-proxy-backup</em></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Performing_a_Backup_Without_Pulp_Content_admin"><a class="anchor" href="#Performing_a_Backup_Without_Pulp_Content_admin"></a>6.3. Performing a Backup without Pulp Content</h3>
<div class="paragraph">
<p>You can perform an offline backup that excludes the contents of the Pulp directory.
The backup without Pulp content is useful for debugging purposes and is only intended to provide access to configuration files without backing up the Pulp database.
You cannot restore from a directory that does not contain Pulp content.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>Request other users of Foreman&#160;server or Smart&#160;Proxy&#160;server to save any changes and warn them that Foreman services are unavailable for the duration of the backup.
Ensure no other tasks are scheduled for the same time as the backup.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure that your backup location has sufficient available disk space to store the backup.
For more information, see <a href="#Estimating_the_Size_of_a_Backup_admin">Estimating the Size of a Backup</a>.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>To perform an offline backup without Pulp content, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain backup offline --skip-pulp-content <em>/var/backup_directory</em></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Performing_an_Incremental_Backup_admin"><a class="anchor" href="#Performing_an_Incremental_Backup_admin"></a>6.4. Performing an Incremental Backup</h3>
<div class="paragraph">
<p>Use this procedure to perform an offline backup of any changes since a previous backup.</p>
</div>
<div class="paragraph">
<p>To perform incremental backups, you must perform a full backup as a reference to create the first incremental backup of a sequence.
Keep the most recent full backup and a complete sequence of incremental backups to restore from.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>Request other users of Foreman&#160;server or Smart&#160;Proxy&#160;server to save any changes and warn them that Foreman services are unavailable for the duration of the backup.
Ensure no other tasks are scheduled for the same time as the backup.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure that your backup location has sufficient available disk space to store the backup.
For more information, see <a href="#Estimating_the_Size_of_a_Backup_admin">Estimating the Size of a Backup</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>To perform a full offline backup, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain backup offline <em>/var/backup_directory</em></pre>
</div>
</div>
</li>
<li>
<p>To create a directory within your backup directory to store the first incremental back up, enter the <code>foreman-maintain backup</code> command with the <code>--incremental</code> option:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain backup offline --incremental <em>/var/backup_directory/full_backup</em> <em>/var/backup_directory</em></pre>
</div>
</div>
</li>
<li>
<p>To create the second incremental backup, enter the <code>foreman-maintain backup</code> command with the <code>--incremental</code> option and include the path to the first incremental backup to indicate the starting point for the next increment.
This creates a directory for the second incremental backup in your backup directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain backup offline --incremental <em>/var/backup_directory/first_incremental_backup</em> <em>/var/backup_directory</em></pre>
</div>
</div>
</li>
<li>
<p>Optional: If you want to point to a different version of the backup, and make a series of increments with that version of the backup as the starting point, you can do this at any time.
For example, if you want to make a new incremental backup from the full backup rather than the first or second incremental backup, point to the full backup directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain backup offline --incremental <em>/var/backup_directory/full_backup</em> <em>/var/backup_directory</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Example_of_a_Weekly_Full_Backup_Followed_by_Daily_Incremental_Backups_admin"><a class="anchor" href="#Example_of_a_Weekly_Full_Backup_Followed_by_Daily_Incremental_Backups_admin"></a>6.5. Example of a Weekly Full Backup Followed by Daily Incremental Backups</h3>
<div class="paragraph">
<p>The following script performs a full backup on a Sunday followed by incremental backups for each of the following days.
A new subdirectory is created for each day that an incremental backup is performed.
The script requires a daily cron job.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">#!/bin/bash -e
PATH=/sbin:/bin:/usr/sbin:/usr/bin
DESTINATION=/var/backup_directory
if [[ $(date +%w) == 0 ]]; then
  foreman-maintain backup offline --assumeyes $DESTINATION
else
  LAST=$(ls -td -- $DESTINATION/*/ | head -n 1)
  foreman-maintain backup offline --assumeyes --incremental "$LAST" $DESTINATION
fi
exit 0</pre>
</div>
</div>
<div class="paragraph">
<p>Note that the <code>foreman-maintain backup</code> command requires <code>/sbin</code> and <code>/usr/sbin</code> directories to be in <code>PATH</code> and the <code>--assumeyes</code> option is used to skip the confirmation prompt.</p>
</div>
</div>
<div class="sect2">
<h3 id="Performing_an_Online_Backup_admin"><a class="anchor" href="#Performing_an_Online_Backup_admin"></a>6.6. Performing an Online Backup</h3>
<div class="paragraph">
<p>Perform an online backup only for debugging purposes.</p>
</div>
<div class="paragraph">
<div class="title">Risks Associated with Online Backups</div>
<p>When performing an online backup, if there are procedures affecting the Pulp database, the Pulp part of the backup procedure repeats until it is no longer being altered.
Because the backup of the Pulp database is the most time consuming part of backing up Foreman, if you make a change that alters the Pulp database during this time, the backup procedure keeps restarting.</p>
</div>
<div class="paragraph">
<p>For production environments, use the snapshot method.
For more information, see <a href="#Performing_a_Snapshot_Backup_admin">Performing a Snapshot Backup</a>.
If you want to use the online backup method in production, proceed with caution and ensure that no modifications occur during the backup.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>Request other users of Foreman&#160;server or Smart&#160;Proxy&#160;server to save any changes and warn them that Foreman services are unavailable for the duration of the backup.
Ensure no other tasks are scheduled for the same time as the backup.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure that your backup location has sufficient available disk space to store the backup.
For more information, see <a href="#Estimating_the_Size_of_a_Backup_admin">Estimating the Size of a Backup</a>.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>To perform an online backup, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain backup online <em>/var/backup_directory</em></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Performing_a_Snapshot_Backup_admin"><a class="anchor" href="#Performing_a_Snapshot_Backup_admin"></a>6.7. Performing a Snapshot Backup</h3>
<div class="paragraph">
<p>You can perform a snapshot backup that uses Logical Volume Manager (LVM) snapshots of the Pulp, and PostgreSQL directories.
Creating a backup from LVM snapshots mitigates the risk of an inconsistent backup.</p>
</div>
<div class="paragraph">
<p>The snapshot backup method is faster than a full offline backup and therefore reduces Foreman downtime.</p>
</div>
<div class="paragraph">
<p>To view the usage statement, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">foreman-maintain backup snapshot -h</pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>Request other Foreman&#160;server or Smart&#160;Proxy&#160;server users to save any changes and warn them that Foreman services are unavailable for the duration of the backup.
Ensure no other tasks are scheduled for the same time as the backup.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The system uses LVM for the directories that you snapshot: <code>/var/lib/pulp/</code>, and <code>/var/lib/postgresql</code>.</p>
</li>
<li>
<p>The free disk space in the relevant volume group (VG) is three times the size of the snapshot.
More precisely, the VG must have enough space unreserved by the member logical volumes (LVs) to accommodate new snapshots.
In addition, one of the LVs must have enough free space for the backup directory.</p>
</li>
<li>
<p>The target backup directory is on a different LV than the directories that you snapshot.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>To perform a snapshot backup, enter the <code>foreman-maintain backup snapshot</code> command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain backup snapshot <em>/var/backup_directory</em></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>foreman-maintain backup snapshot</code> command creates snapshots when the services are active, and stops all services which can impact the backup.
This makes the maintenance window shorter.
After the successful snapshot, all services are restarted and LVM snapshots are removed.</p>
</div>
</div>
<div class="sect2">
<h3 id="White_Listing_and_Skipping_Steps_When_Performing_Backups_admin"><a class="anchor" href="#White_Listing_and_Skipping_Steps_When_Performing_Backups_admin"></a>6.8. White-listing and Skipping Steps When Performing Backups</h3>
<div class="paragraph">
<p>A backup using the <code>foreman-maintain backup</code> command proceeds in a sequence of steps.
To skip part of the backup add the <code>--whitelist</code> option to the command and add the step label that you want to omit.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>To display a list of available step labels, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain advanced procedure run -h</pre>
</div>
</div>
</li>
<li>
<p>To skip a step of the backup, enter the <code>foreman-maintain backup</code> command with the <code>--whitelist</code> option.
For example:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain backup online --whitelist backup-metadata -y <em>/var/backup_directory</em></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="restoring-foreman-server-or-smart-proxy-from-a-backup_admin"><a class="anchor" href="#restoring-foreman-server-or-smart-proxy-from-a-backup_admin"></a>7. Restoring Foreman&#160;server or Smart&#160;Proxy&#160;server from a Backup</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can restore Foreman&#160;server or Smart&#160;Proxy&#160;server from the backup data that you create as part of <a href="#backing-up-foreman-server-and-smart-proxy_admin">Backing Up Foreman&#160;server and Smart&#160;Proxy&#160;server</a>.
This process outlines how to restore the backup on the same server that generated the backup, and all data covered by the backup is deleted on the target system.
If the original system is unavailable, provision a system with the same configuration settings and host name.</p>
</div>
<div class="sect2">
<h3 id="Restoring_from_a_Full_Backup_admin"><a class="anchor" href="#Restoring_from_a_Full_Backup_admin"></a>7.1. Restoring from a Full Backup</h3>
<div class="paragraph">
<p>Use this procedure to restore Foreman or Smart&#160;Proxy&#160;server from a full backup.
When the restore process completes, all processes are online, and all databases and system configuration revert to the state at the time of the backup.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure that you are restoring to the correct instance.
The Foreman instance must have the same host name, configuration, and be the same minor version (X.Y) as the original system.</p>
</li>
<li>
<p>Ensure that you have an existing target directory.
The target directory is read from the configuration files contained within the archive.</p>
</li>
<li>
<p>Ensure that you have enough space to store this data on the base system of Foreman&#160;server or Smart&#160;Proxy&#160;server as well as enough space after the restoration to contain all the data in the <code>/etc/</code> and <code>/var/</code> directories contained within the backup.</p>
<div class="paragraph">
<p>To check the space used by a directory, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># du -sh <em>/var/backup_directory</em></pre>
</div>
</div>
<div class="paragraph">
<p>To check for free space, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># df -h <em>/var/backup_directory</em></pre>
</div>
</div>
<div class="paragraph">
<p>Add the <code>--total</code> option to get a total of the results from more than one directory.</p>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Choose the appropriate method to install Foreman or Smart&#160;Proxy:</p>
<div class="ulist">
<ul>
<li>
<p>To install Foreman&#160;server from a connected network, follow the procedures in <a href="https://docs.theforeman.org/3.5/Installing_Server/index-foreman-deb.html#">Installing Foreman 3.5 Server on Debian/Ubuntu</a>.</p>
</li>
<li>
<p>To install a Smart&#160;Proxy&#160;server, follow the procedures in <a href="https://docs.theforeman.org/3.5/Installing_Proxy/index-foreman-deb.html#">Installing an External Smart Proxy Server on Debian/Ubuntu</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Copy the backup data to Foreman&#160;servers local file system.
Use <code>/var/</code> or <code>/var/tmp/</code>.</p>
</li>
<li>
<p>Run the restoration script.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain restore <em>/var/backup_directory</em></pre>
</div>
</div>
<div class="paragraph">
<p>Where <em>backup_directory</em> is the time-stamped directory or subdirectory containing the backed-up data.</p>
</div>
<div class="paragraph">
<p>The restore process can take a long time to complete, because of the amount of data to copy.</p>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional Resources</div>
<ul>
<li>
<p>For troubleshooting, you can check <code>/var/log/foreman/production.log</code> and <code>/var/log/messages</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Restoring_from_Incremental_Backups_admin"><a class="anchor" href="#Restoring_from_Incremental_Backups_admin"></a>7.2. Restoring from Incremental Backups</h3>
<div class="paragraph">
<p>Use this procedure to restore Foreman or Smart&#160;Proxy&#160;server from incremental backups.
If you have multiple branches of incremental backups, select your full backup and each incremental backup for the <em>branch</em> you want to restore, in chronological order.</p>
</div>
<div class="paragraph">
<p>When the restore process completes, all processes are online, and all databases and system configuration revert to the state at the time of the backup.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Restore the last full backup using the instructions in <a href="#Restoring_from_a_Full_Backup_admin">Restoring from a Full Backup</a>.</p>
</li>
<li>
<p>Remove the full backup data from Foreman&#160;servers local file system, for example, <code>/var/</code> or <code>/var/tmp/</code>.</p>
</li>
<li>
<p>Copy the incremental backup data to Foreman&#160;servers local file system, for example, <code>/var/</code> or <code>/var/tmp/</code>.</p>
</li>
<li>
<p>Restore the incremental backups in the same sequence that they are made:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain restore -i <em>/var/backup_directory</em>/FIRST_INCREMENTAL
# foreman-maintain restore -i <em>/var/backup_directory</em>/SECOND_INCREMENTAL</pre>
</div>
</div>
<div class="paragraph">
<p>If you created the backup using the <code>foreman-maintain backup</code> command, you do not need to use <code>-i</code> option in the command.</p>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional Resources</div>
<ul>
<li>
<p>For troubleshooting, you can check <code>/var/log/foreman/production.log</code> and <code>/var/log/messages</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="backup-and-restore-smart-proxy-using-a-virtual-machine-snapshot_admin"><a class="anchor" href="#backup-and-restore-smart-proxy-using-a-virtual-machine-snapshot_admin"></a>7.3. Backup and Restore Smart&#160;Proxy&#160;server Using a Virtual Machine Snapshot</h3>
<div class="paragraph">
<p>If your Smart&#160;Proxy&#160;server is a virtual machine, you can restore it from a snapshot.
Creating weekly snapshots to restore from is recommended.
In the event of failure, you can install, or configure a new Smart&#160;Proxy&#160;server, and then synchronize the database content from Foreman&#160;server.</p>
</div>
<div class="paragraph">
<p>If required, deploy a new Smart&#160;Proxy&#160;server, ensuring the host name is the same as before, and then install the Smart&#160;Proxy certificates.
You may still have them on Foreman&#160;server, the package name ends in -certs.tar, alternately create new ones.
Follow the procedures in <a href="https://docs.theforeman.org/3.5/Installing_Proxy/index-foreman-deb.html#">Installing Smart&#160;Proxy&#160;server</a> until you can confirm, in the Foreman web UI, that Smart&#160;Proxy&#160;server is connected to Foreman&#160;server.
Then use the procedure <a href="#synchronizing-an-external-smart-proxy_admin">Synchronizing an External Smart&#160;Proxy</a> to synchronize from Foreman.</p>
</div>
<div class="sect3">
<h4 id="synchronizing-an-external-smart-proxy_admin"><a class="anchor" href="#synchronizing-an-external-smart-proxy_admin"></a>7.3.1. Synchronizing an External Smart&#160;Proxy</h4>
<div class="paragraph">
<p>Synchronize an external Smart&#160;Proxy with Foreman.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>To synchronize an external Smart&#160;Proxy, select the relevant organization and location in the Foreman web UI, or choose <strong>Any Organization</strong> and <strong>Any Location</strong>.</p>
</li>
<li>
<p>In the Foreman web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Smart&#160;Proxies</strong> and click the name of the Smart&#160;Proxy to synchronize.</p>
</li>
<li>
<p>On the <strong>Overview</strong> tab, select <strong>Synchronize</strong>.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="maintaining-foreman-server_admin"><a class="anchor" href="#maintaining-foreman-server_admin"></a>8. Maintaining Foreman&#160;server</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter provides information on how to maintain a Foreman&#160;server, including information on how to work with audit records, how to clean unused tasks, and how to recover Pulp from a full disk.</p>
</div>
<div class="sect2">
<h3 id="Deleting_Audit_Records_admin"><a class="anchor" href="#Deleting_Audit_Records_admin"></a>8.1. Deleting Audit Records</h3>
<div class="paragraph">
<p>Audit records are created automatically in Foreman.
You can use the <code>foreman-rake audits:expire</code> command to remove audits at any time.
You can also use a cron job to schedule audit record deletions at the set interval that you want.</p>
</div>
<div class="paragraph">
<p>By default, using the <code>foreman-rake audits:expire</code> command removes audit records that are older than 90 days.
You can specify the number of days to keep the audit records by adding the <strong>days</strong> option and add the number of days.</p>
</div>
<div class="paragraph">
<p>For example, if you want to delete audit records that are older than seven days, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># foreman-rake audits:expire days=7</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Anonymizing_Audit_Records_admin"><a class="anchor" href="#Anonymizing_Audit_Records_admin"></a>8.2. Anonymizing Audit Records</h3>
<div class="paragraph">
<p>You can use the <code>foreman-rake audits:anonymize</code> command to remove any user account or IP information while maintaining the audit records in the database.
You can also use a cron job to schedule anonymizing the audit records at the set interval that you want.</p>
</div>
<div class="paragraph">
<p>By default, using the <code>foreman-rake audits:anonymize</code> command anonymizes audit records that are older than 90 days.
You can specify the number of days to keep the audit records by adding the <strong>days</strong> option and add the number of days.</p>
</div>
<div class="paragraph">
<p>For example, if you want to anonymize audit records that are older than seven days, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># foreman-rake audits:anonymize days=7</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Deleting_Report_Records_admin"><a class="anchor" href="#Deleting_Report_Records_admin"></a>8.3. Deleting Report Records</h3>
<div class="paragraph">
<p>Report records are created automatically in Foreman.
You can use the <code>foreman-rake reports:expire</code> command to remove reports at any time.
You can also use a cron job to schedule report record deletions at the set interval that you want.</p>
</div>
<div class="paragraph">
<p>By default, using the <code>foreman-rake reports:expire</code> command removes report records that are older than 90 days.
You can specify the number of days to keep the report records by adding the <strong>days</strong> option and add the number of days.</p>
</div>
<div class="paragraph">
<p>For example, if you want to delete report records that are older than seven days, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># foreman-rake reports:expire days=7</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Configuring_the_Cleaning_Unused_Tasks_Feature_admin"><a class="anchor" href="#Configuring_the_Cleaning_Unused_Tasks_Feature_admin"></a>8.4. Configuring the Cleaning Unused Tasks Feature</h3>
<div class="paragraph">
<p>Foreman performs regular cleaning to reduce disc space in the database and limit the rate of disk growth.
As a result, Foreman backup completes faster and overall performance is higher.</p>
</div>
<div class="paragraph">
<p>By default, Foreman executes a cron job that cleans tasks every day at 19:45.
Foreman removes the following tasks during the cleaning:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Tasks that have run successfully and are older than thirty days</p>
</li>
<li>
<p>All tasks that are older than a year</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can configure the cleaning unused tasks feature using these options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To configure the time at which Foreman runs the cron job, set the <code>--foreman-plugin-tasks-cron-line</code> parameter to the time you want in cron format.
For example, to schedule the cron job to run every day at 15:00, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --foreman-plugin-tasks-cron-line "00 15 * * *"</pre>
</div>
</div>
</li>
<li>
<p>To configure the period after which Foreman deletes the tasks, edit the <code>:rules:</code> section in the <code>/etc/foreman/plugins/foreman-tasks.yaml</code> file.</p>
</li>
<li>
<p>To disable regular task cleanup on Foreman, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --foreman-plugin-tasks-automatic-cleanup false</pre>
</div>
</div>
</li>
<li>
<p>To reenable regular task cleanup on Foreman, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --foreman-plugin-tasks-automatic-cleanup true</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Deleting_Task_Records_admin"><a class="anchor" href="#Deleting_Task_Records_admin"></a>8.5. Deleting Task Records</h3>
<div class="paragraph">
<p>Task records are created automatically in Foreman.
You can use the <code>foreman-rake foreman_tasks:cleanup</code> command to remove tasks at any time.
You can also use a cron job to schedule Task record deletions at the set interval that you want.</p>
</div>
<div class="paragraph">
<p>For example, if you want to delete task records from successful repository synchronizations, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># foreman-rake foreman_tasks:cleanup TASK_SEARCH='label = Actions::Katello::Repository::Sync' STATES='stopped'</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Deleting_a_Task_by_ID_admin"><a class="anchor" href="#Deleting_a_Task_by_ID_admin"></a>8.6. Deleting a Task by ID</h3>
<div class="paragraph">
<p>You can delete tasks by ID, for example if you have submitted confidential data by mistake.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Connect to your Foreman&#160;server using SSH:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ssh root@foreman.example.com</pre>
</div>
</div>
</li>
<li>
<p>Optional: View the task:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer task info --id <em>My_Task_ID</em></pre>
</div>
</div>
</li>
<li>
<p>Delete the task:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-rake foreman_tasks:cleanup TASK_SEARCH="id=<em>My_Task_ID</em>"</pre>
</div>
</div>
</li>
<li>
<p>Optional: Ensure the task has been removed from Foreman&#160;server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer task info --id <em>My_Task_ID</em></pre>
</div>
</div>
<div class="paragraph">
<p>Note that because the task is deleted, this command returns a non-zero exit code.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Logging_and_Reporting_Problems_admin"><a class="anchor" href="#Logging_and_Reporting_Problems_admin"></a>9. Logging and Reporting Problems</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter provides information on how to log and report problems in Foreman, including information on relevant log files, how to enable debug logging, how to open a support case and attach the relevant log tar files, and how to access support cases within the Foreman web UI.</p>
</div>
<div class="paragraph">
<p>For more information about Foreman logging settings, use <code>foreman-installer</code> with the <code>--full-help</code> option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --full-help | grep logging</pre>
</div>
</div>
<div class="sect2">
<h3 id="Enabling_Debug_Logging_admin"><a class="anchor" href="#Enabling_Debug_Logging_admin"></a>9.1. Enabling Debug Logging</h3>
<div class="paragraph">
<p>Debug logging provides the most detailed log information and can help with troubleshooting issues that can arise with Foreman and its components.
In the Foreman CLI, enable debug logging to log detailed debugging information for Foreman.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>To enable debug logging, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --foreman-logging-level debug</pre>
</div>
</div>
</li>
<li>
<p>After you complete debugging, reset the logging level to the default value:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --reset-foreman-logging-level</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Increasing_the_Logging_Levels_to_Help_with_Debugging_admin"><a class="anchor" href="#Increasing_the_Logging_Levels_to_Help_with_Debugging_admin"></a>9.2. Increasing the Logging Levels to Help with Debugging</h3>
<div class="paragraph">
<p>By default, Foreman comes with <code>:INFO</code> level logging enabled.
You can increase or decrease the log levels on your Foreman.</p>
</div>
<div class="sect3">
<h4 id="_increasing_the_logging_level_for_hammer"><a class="anchor" href="#_increasing_the_logging_level_for_hammer"></a>9.2.1. Increasing the Logging Level For Hammer</h4>
<div class="paragraph">
<p>You can find the log for Hammer in <code>~/.hammer/log/hammer.log</code>.
Edit <code>/etc/hammer/cli_config.yml</code> and set the <code>:log_level:</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">:log_level: 'debug'</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_increasing_the_logging_level_on_smartproxy"><a class="anchor" href="#_increasing_the_logging_level_on_smartproxy"></a>9.2.2. Increasing the Logging Level On Smart&#160;Proxy</h4>
<div class="paragraph">
<p>You can find the log for Smart&#160;Proxy in <code>/var/log/foreman-proxy/proxy.log</code>.
Uncomment the <code>DEBUG</code> line in <code>/etc/foreman-proxy/settings.yml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">:log_level: DEBUG</pre>
</div>
</div>
<div class="paragraph">
<p>Ensure to restart the <code>foreman-proxy</code> service afterwards:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># systemctl restart foreman-proxy</pre>
</div>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">
<div class="paragraph">
<p>Running the installer will revert this change back.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_increasing_the_logging_level_on_foreman"><a class="anchor" href="#_increasing_the_logging_level_on_foreman"></a>9.2.3. Increasing the Logging Level On Foreman</h4>
<div class="paragraph">
<p>You can find the log for Foreman in <code>/var/log/foreman/production.log</code>.</p>
</div>
<div class="paragraph">
<p>Foreman stores logs for Apache in:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>/var/log/httpd/foreman_error.log</code></p>
</li>
<li>
<p><code>/var/log/httpd/foreman_access.log</code></p>
</li>
<li>
<p><code>/var/log/httpd/foreman_ssl_error.log</code></p>
</li>
<li>
<p><code>/var/log/httpd/foreman_ssl_access.log</code></p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Set the logging level in <code>/etc/foreman/settings.yaml</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">:logging:
  :production:
    :type: file
    :layout: pattern
    :level: debug</pre>
</div>
</div>
</li>
<li>
<p>Enable selected loggers in <code>/etc/foreman/settings.yaml</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">:loggers:
  :ldap:
    :enabled: true
  :permissions:
    :enabled: true
  :sql:
    :enabled: true</pre>
</div>
</div>
<div class="paragraph">
<p>Note that to see logging from some area, debug logging has to be set.</p>
</div>
</li>
<li>
<p>Restart Foreman services:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain service restart</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can find the complete list of loggers with their default values in <code>/usr/share/foreman/config/application.rb</code> in the <code>Foreman::Logging.add_loggers</code> command.</p>
</div>
</div>
<div class="sect3">
<h4 id="_increasing_the_logging_level_for_redis"><a class="anchor" href="#_increasing_the_logging_level_for_redis"></a>9.2.4. Increasing the Logging Level For Redis</h4>
<div class="paragraph">
<p>You can find the log for Redis in <code>/var/log/redis/redis.log</code>.
Set the log level in <code>/etc/opt/rh/rh-redis5/redis.conf</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">loglevel debug</pre>
</div>
</div>
<div class="paragraph">
<p>Ensure to restart the Redis service afterwards:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># systemctl restart rh-redis5-redis</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_increasing_the_logging_level_for_postgres"><a class="anchor" href="#_increasing_the_logging_level_for_postgres"></a>9.2.5. Increasing the Logging Level For Postgres</h4>
<div class="paragraph">
<p>You can find the log for Postgres in <code>/var/log/postgresql</code>.
Uncomment the <code>log_statement</code> in <code>/etc/postgresql/13/main/postgresql.conf</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">log_statement = 'all'</pre>
</div>
</div>
<div class="paragraph">
<p>Ensure to restart Foreman services afterwards:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain service restart</pre>
</div>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">
<div class="paragraph">
<p>Based on the size of your Foreman installation, this can cause disk space to fill up very quickly.
Only turn this on if absolutely needed.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For more debug log settings, refer to the <a href="https://www.postgresql.org/docs/current/runtime-config-logging.html">Postgresql documentation</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_increasing_the_logging_level_for_foreman_installer"><a class="anchor" href="#_increasing_the_logging_level_for_foreman_installer"></a>9.2.6. Increasing the Logging Level For Foreman Installer</h4>
<div class="paragraph">
<p>You can find the log files in <code>/var/log/foreman-installer/</code>.
To increase the log level of the Foreman Installer during an install:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --verbose-log-level debug</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_increasing_the_logging_level_for_puppet_agent"><a class="anchor" href="#_increasing_the_logging_level_for_puppet_agent"></a>9.2.7. Increasing the Logging Level For Puppet Agent</h4>
<div class="paragraph">
<p>You can increase the logging level for Puppet agent on your Foreman&#160;server.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Add the following line to the <code>[agent]</code> block in the <code>/etc/puppetlabs/puppet/puppet.conf</code> file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">[agent]
    log_level = debug</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can find the logs in <code>/var/log/puppetlabs/puppet/</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_increasing_the_logging_level_for_puppet_server"><a class="anchor" href="#_increasing_the_logging_level_for_puppet_server"></a>9.2.8. Increasing the Logging Level For Puppet Server</h4>
<div class="paragraph">
<p>You can increase the logging level for Puppet server on your Foreman&#160;server.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Add the following line to the <code>[master]</code> block in <code>/etc/puppetlabs/puppet/puppet.conf</code> file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">[master]
    log_level = debug</pre>
</div>
</div>
</li>
<li>
<p>Restart the Puppet server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain service restart --only puppetserver</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can find the logs in <code>/var/log/puppetlabs/puppetserver/</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Retrieving_the_Status_of_Services_admin"><a class="anchor" href="#Retrieving_the_Status_of_Services_admin"></a>9.3. Retrieving the Status of Services</h3>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer &gt; About</strong>.</p>
</li>
<li>
<p>On the <strong>Smart Proxies</strong> tab, you can view the status of all Smart&#160;Proxies.</p>
</li>
<li>
<p>On the <strong>Compute Resources</strong> tab, you can view the status of attached compute resource providers.</p>
</li>
<li>
<p>In the <strong>Backend System Status</strong> table, you can view the status of all back-end services.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Run <code>hammer ping</code> to get information from the database and Foreman services:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer ping</pre>
</div>
</div>
</li>
<li>
<p>Use <code>foreman-maintain</code> to check the status of the services running in systemd:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain service status</pre>
</div>
</div>
</li>
<li>
<p>Use <code>foreman-maintain</code> to perform a health check:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ foreman-maintain health check</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Restarting_Services_admin"><a class="anchor" href="#Restarting_Services_admin"></a>9.4. Restarting Services</h3>
<div class="paragraph">
<p>Foreman uses a set of back-end services to perform tasks.
You you experience an issue with your Foreman, check the status of Foreman services.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Use <code>foreman-maintain</code> to restart Foreman services:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain service restart</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>Run <code>foreman-maintain --help</code> for more information.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="Enabling_Individual_Loggers_admin"><a class="anchor" href="#Enabling_Individual_Loggers_admin"></a>9.5. Enabling Individual Loggers</h3>
<div class="paragraph">
<p>You can enable individual loggers for selective logging.
Foreman uses the following loggers:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>app</code></dt>
<dd>
<p>Logs web requests and all general application messages.
Default value: true.</p>
</dd>
<dt class="hdlist1"><code>audit</code></dt>
<dd>
<p>Logs additional fact statistics, numbers of added, updated, and removed facts.
Default value: true.</p>
</dd>
<dt class="hdlist1"><code>ldap</code></dt>
<dd>
<p>Logs high level LDAP queries and LDAP operations.
Default value: false.</p>
</dd>
<dt class="hdlist1"><code>permissions</code></dt>
<dd>
<p>Logs queries to user roles, filters, and permissions when loading pages.
Default value: false.</p>
</dd>
<dt class="hdlist1"><code>sql</code></dt>
<dd>
<p>Logs SQL queries made through Rails ActiveRecord.
Default value: false.</p>
</dd>
</dl>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Enable the individual loggers that you want.
For example, to enable <code>sql</code> and <code>ldap</code> loggers, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer \
--foreman-loggers ldap:true \
--foreman-loggers sql:true</pre>
</div>
</div>
</li>
<li>
<p>Optional: To reset loggers to their default values, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --reset-foreman-loggers</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Configuring_Logging_to_Journal_admin"><a class="anchor" href="#Configuring_Logging_to_Journal_admin"></a>9.6. Configuring Logging to Journal</h3>
<div class="paragraph">
<p>You can configure Foreman to manage logging with Journal.
Journal then forwards log messages to <code>rsyslog</code> and <code>rsyslog</code> writes the log messages to <code>/var/log/messages</code>.
Note that after this change the log messages do not appear in <code>/var/log/foreman/production.log</code> or <code>/var/log/foreman-proxy.log</code> any more.</p>
</div>
<div class="paragraph">
<p>For more information about Journal, see <a href="https://github.com/lzap/foreman-elasticsearch" class="bare">https://github.com/lzap/foreman-elasticsearch</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Enter the following <code>foreman-installer</code> command to configure logging to <code>journald</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer \
--foreman-logging-layout pattern \
--foreman-logging-level info \
--foreman-logging-type journald \
--foreman-proxy-log JOURNAL</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Log_File_Directories_admin"><a class="anchor" href="#Log_File_Directories_admin"></a>9.7. Log File Directories Provided by Foreman</h3>
<div class="paragraph">
<p>Foreman provides system information in the form of notifications and log files.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Log File Directories for Reporting and Troubleshooting</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Log File Directories</th>
<th class="tableblock halign-left valign-top">Description of Log File Content</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/log/candlepin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subscription management</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/log/foreman-installer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Installer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/log/foreman-maintain</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman maintain</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/log/foreman-proxy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman proxy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/log/foreman</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/log/httpd</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Apache HTTP server</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/log/messages</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Various other log messages</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/log/puppetlabs/puppet</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configuration management</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/log/rhsm</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subscription management</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/log/tomcat</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Candlepin webservice logs</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>You can also use the <code>foreman-tail</code> command to follow many of the log files related to Foreman.
You can run <code>foreman-tail -l</code> to list the processes and services that it follows.</p>
</div>
</div>
<div class="sect2">
<h3 id="Utilities_for_Collecting_Log_Information_admin"><a class="anchor" href="#Utilities_for_Collecting_Log_Information_admin"></a>9.8. Utilities for Collecting Log Information</h3>
<div class="paragraph">
<p>You can collect information from log files to troubleshoot Foreman.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">foreman-debug</dt>
<dd>
<p>The <code>foreman-debug</code> command collects configuration and log file data for Foreman, its back-end services, and system information.
This information is collected and written to a tar file.
By default, the output tar file is located at <code>/tmp/<em>foreman-debug-xxx.tar.xz</em></code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Additionally, the <code>foreman-debug</code> command exports tasks run during the last 60 days.
By default, the output tar file is located at <code>/tmp/<em>task-export-xxx.tar.xz</em></code>.
If the file is missing, see the file <code>/tmp/task-export.log</code> to learn why task export was unsuccessful.
There is no timeout when running this command.</p>
</div>
<div class="paragraph">
<p>For more information, run <code>foreman-debug -h</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>The collection process removes security information such as passwords, tokens, and keys while collecting information.
However, the tar files can still contain sensitive information about the Foreman&#160;server.
Foreman developers recommends that you send this information directly to the intended recipient and not to a public target.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Monitoring_Resources_admin"><a class="anchor" href="#Monitoring_Resources_admin"></a>10. Monitoring Resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following chapter details how to configure monitoring and reporting for managed systems.
This includes host configuration, Content Views, compliance, subscriptions, registered hosts, promotions, and synchronization.</p>
</div>
<div class="sect2">
<h3 id="Using_the_Project_Content_Dashboard_admin"><a class="anchor" href="#Using_the_Project_Content_Dashboard_admin"></a>10.1. Using the Foreman Content Dashboard</h3>
<div class="paragraph">
<p>The Foreman content dashboard contains various widgets which provide an overview of the host configuration, Content Views, compliance reports, subscriptions and hosts currently registered, promotions and synchronization, and a list of the latest notifications.</p>
</div>
<div class="paragraph">
<p>In the Foreman web UI, navigate to <strong>Monitor</strong> &gt; <strong>Dashboard</strong> to access the content dashboard.
The dashboard can be rearranged by clicking on a widget and dragging it to a different position.
The following widgets are available:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Host Configuration Status</strong></dt>
<dd>
<p>An overview of the configuration states and the number of hosts associated with it during the last reporting interval.
The following table shows the descriptions of the possible configuration states.</p>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Host Configuration States</caption>
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Icon</th>
<th class="tableblock halign-left valign-top">State</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/common/host-state-config-okay.png" alt="host state config okay"></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Hosts that had performed modifications without error</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Host that successfully performed modifications during the last reporting interval.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/common/host-state-config-error.png" alt="host state config error"></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Hosts in error state</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hosts on which an error was detected during the last reporting interval.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/common/host-state-config-report.png" alt="host state config report"></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Good host reports in the last 35 minutes</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hosts without error that did not perform any modifications in the last 35 minutes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/common/host-state-config-pending.png" alt="host state config pending"></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Hosts that had pending changes</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hosts on which some resources would be applied but Puppet was configured to run in the <code>noop</code> mode.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/common/host-state-config-outofsync.png" alt="host state config outofsync"></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Out of sync hosts</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hosts that were not synchronized and the report was not received during the last reporting interval.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/common/host-state-config-noreport.png" alt="host state config noreport"></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Hosts with no reports</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hosts for which no reports were collected during the last reporting interval.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/common/host-state-config-noalert.png" alt="host state config noalert"></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Hosts with alerts disabled</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hosts which are not being monitored.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Click the particular configuration status to view hosts associated with it.</p>
</div>
</dd>
<dt class="hdlist1"><strong>Host Configuration Chart</strong></dt>
<dd>
<p>A pie chart shows the proportion of the configuration status and the percentage of all hosts associated with it.</p>
</dd>
<dt class="hdlist1"><strong>Latest Events</strong></dt>
<dd>
<p>A list of messages produced by hosts including administration information, product and subscription changes, and any errors.</p>
<div class="paragraph">
<p>Monitor this section for global notifications sent to all users and to detect any unusual activity or errors.</p>
</div>
</dd>
<dt class="hdlist1"><strong>Run Distribution (last 30 minutes)</strong></dt>
<dd>
<p>A graph shows the distribution of the running Puppet agents during the last puppet interval which is 30 minutes by default.
In this case, each column represents a number of reports received from clients during 3 minutes.</p>
</dd>
<dt class="hdlist1"><strong>New Hosts</strong></dt>
<dd>
<p>A list of the recently created hosts.
Click the host for more details.</p>
</dd>
<dt class="hdlist1"><strong>Task Status</strong></dt>
<dd>
<p>A summary of all current tasks, grouped by their state and result.
Click the number to see the list of corresponding tasks.</p>
</dd>
<dt class="hdlist1"><strong>Latest Warning/Error Tasks</strong></dt>
<dd>
<p>A list of the latest tasks that have been stopped due to a warning or error.
Click a task to see more details.</p>
</dd>
<dt class="hdlist1"><strong>Discovered Hosts</strong></dt>
<dd>
<p>A list of all bare-metal hosts detected on the provisioning network by the Discovery plug-in.</p>
</dd>
<dt class="hdlist1"><strong>Latest Errata</strong></dt>
<dd>
<p>A list of all errata available for hosts registered to Foreman.</p>
</dd>
<dt class="hdlist1"><strong>Content Views</strong></dt>
<dd>
<p>A list of all Content Views in Foreman and their publish status.</p>
</dd>
<dt class="hdlist1"><strong>Sync Overview</strong></dt>
<dd>
<p>An overview of all products or repositories enabled in Foreman and their synchronization status.
All products that are in the queue for synchronization, are unsynchronized or have been previously synchronized are listed in this section.</p>
</dd>
<dt class="hdlist1"><strong>Host Subscription Status</strong></dt>
<dd>
<p>An overview of the subscriptions currently consumed by the hosts registered to Foreman.
A subscription is a purchased certificate that unlocks access to software, upgrades, and security fixes for hosts.
The following table shows the possible states of subscriptions.</p>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Host Subscription States</caption>
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Icon</th>
<th class="tableblock halign-left valign-top">State</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/common/host-state-sub-invalid.png" alt="host state sub invalid"></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Invalid</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hosts that have products installed, but are not correctly subscribed.
These hosts need attention immediately.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/common/host-state-sub-partial.png" alt="host state sub partial"></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Partial</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hosts that have a subscription and a valid entitlement, but are not using their full entitlements.
These hosts should be monitored to ensure they are configured as expected.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/common/host-state-sub-valid.png" alt="host state sub valid"></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Valid</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hosts that have a valid entitlement and are using their full entitlements.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Click the subscription type to view hosts associated with subscriptions of the selected type.</p>
</div>
</dd>
<dt class="hdlist1"><strong>Subscription Status</strong></dt>
<dd>
<p>An overview of the current subscription totals that shows the number of active subscriptions, the number of subscriptions that expire in the next 120 days, and the number of subscriptions that have recently expired.</p>
</dd>
<dt class="hdlist1"><strong>Host Collections</strong></dt>
<dd>
<p>A list of all host collections in Foreman and their status, including the number of content hosts in each host collection.</p>
</dd>
<dt class="hdlist1"><strong>Virt-who Configuration Status</strong></dt>
<dd>
<p>An overview of the status of reports received from the <code>virt-who</code> daemon running on hosts in the environment.
The following table shows the possible states.</p>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Virt-who Configuration States</caption>
<colgroup>
<col style="width: 22.2222%;">
<col style="width: 77.7778%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">State</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>No Reports</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No report has been received because either an error occurred during the virt-who configuration deployment, or the configuration has not been deployed yet, or virt-who cannot connect to Foreman during the scheduled interval.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>No Change</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No report has been received because hypervisor did not detect any changes on the virtual machines, or virt-who failed to upload the reports during the scheduled interval.
If you added a virtual machine but the configuration is in the <strong>No Change</strong> state, check that virt-who is running.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>OK</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The report has been received without any errors during the scheduled interval.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Total Configurations</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A total number of virt-who configurations.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Click the configuration status to see all configurations in this state.</p>
</div>
<div class="paragraph">
<p>The widget also lists the three latest configurations in the <strong>No Change</strong> state under <strong>Latest Configurations Without Change</strong>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>Latest Compliance Reports</strong></dt>
<dd>
<p>A list of the latest compliance reports.
Each compliance report shows a number of rules passed (P), failed (F), or othered (O).
Click the host for the detailed compliance report.
Click the policy for more details on that policy.</p>
</dd>
<dt class="hdlist1"><strong>Compliance Reports Breakdown</strong></dt>
<dd>
<p>A pie chart shows the distribution of compliance reports according to their status.</p>
</dd>
<dt class="hdlist1"><strong>Red&#160;Hat Insights Actions</strong></dt>
<dd>
<p>Red&#160;Hat Insights is a tool embedded in Foreman that checks the environment and suggests actions you can take.
The actions are divided into 4 categories: Availability, Stability, Performance, and Security.</p>
</dd>
<dt class="hdlist1"><strong>Red&#160;Hat Insights Risk Summary</strong></dt>
<dd>
<p>A table shows the distribution of the actions according to the risk levels.
Risk level represents how critical the action is and how likely it is to cause an actual issue.
The possible risk levels are: Low, Medium, High, and Critical.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>It is not possible to change the date format displayed in the Foreman web UI.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
<div class="sect3">
<h4 id="Managing_Tasks_admin"><a class="anchor" href="#Managing_Tasks_admin"></a>10.1.1. Managing Tasks</h4>
<div class="paragraph">
<p>Foreman keeps a complete log of all planned or performed tasks, such as repositories synchronised, errata applied, and Content Views published.
To review the log, navigate to <strong>Monitor</strong> &gt; <strong>Tasks</strong>.</p>
</div>
<div class="paragraph">
<p>In the Task window, you can search for specific tasks, view their status, details, and elapsed time since they started.
You can also cancel and resume one or more tasks.</p>
</div>
<div class="paragraph">
<p>The tasks are managed using the Dynflow engine.
Remote tasks have a timeout which can be adjusted as needed.</p>
</div>
<div class="olist arabic">
<div class="title">To Adjust Timeout Settings:</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Settings</strong>.</p>
</li>
<li>
<p>Enter <em>%_timeout</em> in the search box and click <strong>Search</strong>.
The search should return four settings, including a description.</p>
</li>
<li>
<p>In the <strong>Value</strong> column, click the icon next to a number to edit it.</p>
</li>
<li>
<p>Enter the desired value in seconds, and click <strong>Save</strong>.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Adjusting the <em>%_finish_timeout</em> values might help in case of low bandwidth.
Adjusting the <em>%_accept_timeout</em> values might help in case of high latency.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When a task is initialized, any back-end service that will be used in the task, such as Candlepin or Pulp, will be checked for correct functioning.
If the check fails, you will receive an error similar to the following one:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">There was an issue with the backend service candlepin: Connection refused  connect(2).</pre>
</div>
</div>
<div class="paragraph">
<p>If the back-end service checking feature turns out to be causing any trouble, it can be disabled as follows.</p>
</div>
<div class="olist arabic">
<div class="title">To Disable Checking for Services:</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Settings</strong>.</p>
</li>
<li>
<p>Enter <em>check_services_before_actions</em> in the search box and click <strong>Search</strong>.</p>
</li>
<li>
<p>In the <strong>Value</strong> column, click the icon to edit the value.</p>
</li>
<li>
<p>From the drop-down menu, select <strong>false</strong>.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Configuring_RSS_Notifications_admin"><a class="anchor" href="#Configuring_RSS_Notifications_admin"></a>10.2. Configuring RSS Notifications</h3>
<div class="paragraph">
<p>To view Foreman event notification alerts, click the <strong>Notifications</strong> icon in the upper right of the screen.</p>
</div>
<div class="paragraph">
<p>By default, the Notifications area displays RSS feed events published in the <a href="https://theforeman.org/blog/">Foreman Blog</a>.</p>
</div>
<div class="paragraph">
<p>The feed is refreshed every 12 hours and the Notifications area is updated whenever new events become available.</p>
</div>
<div class="paragraph">
<p>You can configure the RSS feed notifications by changing the URL feed.
The supported feed format is RSS 2.0 and Atom.
For an example of the RSS 2.0 feed structure, see the <a href="https://access.redhat.com/blogs/1169563/feed">Foreman Blog feed</a>.
For an example of the Atom feed structure, see the <a href="https://theforeman.org/feed.xml">Foreman blog feed</a>.</p>
</div>
<div class="olist arabic">
<div class="title">To Configure RSS Feed Notifications:</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Settings</strong> and select the <strong>Notifications</strong> tab.</p>
</li>
<li>
<p>In the RSS URL row, click the edit icon in the <strong>Value</strong> column and type the required URL.</p>
</li>
<li>
<p>In the RSS enable row, click the edit icon in the <strong>Value</strong> column to enable or disable this feature.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="monitoring-foreman-server_admin"><a class="anchor" href="#monitoring-foreman-server_admin"></a>10.3. Monitoring Foreman&#160;server</h3>
<div class="paragraph">
<p>Audit records list the changes made by all users on Foreman.
This information can be used for maintenance and troubleshooting.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Monitor</strong> &gt; <strong>Audits</strong> to view the audit records.</p>
</li>
<li>
<p>To obtain a list of all the audit attributes, use the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-rake audits:list_attributes</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="monitoring-smart-proxy-server_admin"><a class="anchor" href="#monitoring-smart-proxy-server_admin"></a>10.4. Monitoring Smart&#160;Proxy&#160;server</h3>
<div class="paragraph">
<p>The following section shows how to use the Foreman web UI to find Smart&#160;Proxy information valuable for maintenance and troubleshooting.</p>
</div>
<div class="sect3">
<h4 id="viewing-general-smart-proxy-information_admin"><a class="anchor" href="#viewing-general-smart-proxy-information_admin"></a>10.4.1. Viewing General Smart&#160;Proxy Information</h4>
<div class="paragraph">
<p>In the Foreman web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Smart&#160;Proxies</strong> to view a table of Smart&#160;Proxy&#160;servers registered to Foreman&#160;server.
The information contained in the table answers the following questions:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Is Smart&#160;Proxy&#160;server running?</strong></dt>
<dd>
<p>This is indicated by a green icon in the <strong>Status</strong> column.
A red icon indicates an inactive Smart&#160;Proxy, use the <code>service foreman-proxy restart</code> command on Smart&#160;Proxy&#160;server to activate it.</p>
</dd>
<dt class="hdlist1"><strong>What services are enabled on Smart&#160;Proxy&#160;server?</strong></dt>
<dd>
<p>In the <strong>Features</strong> column you can verify if Smart&#160;Proxy for example provides a DHCP service or acts as a Pulp mirror.
Smart&#160;Proxy features can be enabled during installation or configured in addition.
For more information, see <a href="https://docs.theforeman.org/3.5/Installing_Proxy/index-foreman-deb.html#">Installing Smart&#160;Proxy&#160;server</a>.</p>
</dd>
<dt class="hdlist1"><strong>What organizations and locations is Smart&#160;Proxy&#160;server assigned to?</strong></dt>
<dd>
<p>A Smart&#160;Proxy&#160;server can be assigned to multiple organizations and locations, but only Smart&#160;Proxies belonging to the currently selected organization are displayed.
To list all Smart&#160;Proxies, select <strong>Any Organization</strong> from the context menu in the top left corner.</p>
<div class="paragraph">
<p>After changing the Smart&#160;Proxy configuration, select <strong>Refresh</strong> from the drop-down menu in the <strong>Actions</strong> column to ensure the Smart&#160;Proxy table is up to date.</p>
</div>
<div class="paragraph">
<p>Click the Smart&#160;Proxy name to view further details.
At the <strong>Overview</strong> tab, you can find the same information as in the Smart&#160;Proxy table.
In addition, you can answer to the following questions:</p>
</div>
</dd>
<dt class="hdlist1"><strong>Which hosts are managed by Smart&#160;Proxy&#160;server?</strong></dt>
<dd>
<p>The number of associated hosts is displayed next to the <strong>Hosts managed</strong> label.
Click the number to view the details of associated hosts.</p>
</dd>
<dt class="hdlist1"><strong>How much storage space is available on Smart&#160;Proxy&#160;server?</strong></dt>
<dd>
<p>The amount of storage space occupied by the Pulp content in <code>/var/lib/pulp</code> is displayed.
Also the remaining storage space available on the Smart&#160;Proxy can be ascertained.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="Monitoring_Services_admin"><a class="anchor" href="#Monitoring_Services_admin"></a>10.4.2. Monitoring Services</h4>
<div class="paragraph">
<p>In the Foreman web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Smart&#160;Proxies</strong> and click the name of the selected Smart&#160;Proxy.
At the <strong>Services</strong> tab, you can find basic information on Smart&#160;Proxy services, such as the list of DNS domains, or the number of Pulp workers.
The appearance of the page depends on what services are enabled on Smart&#160;Proxy&#160;server.
Services providing more detailed status information can have dedicated tabs at the Smart&#160;Proxy page.
For more information, see <a href="#Monitoring_Puppet_admin">Monitoring Puppet</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="Monitoring_Puppet_admin"><a class="anchor" href="#Monitoring_Puppet_admin"></a>10.4.3. Monitoring Puppet</h4>
<div class="paragraph">
<p>In the Foreman web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Smart&#160;Proxies</strong> and click the name of the selected Smart&#160;Proxy.
At the <strong>Puppet</strong> tab you can find the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A summary of Puppet events, an overview of latest Puppet runs, and the synchronization status of associated hosts at the <strong>General</strong> sub-tab.</p>
</li>
<li>
<p>A list of Puppet environments at the <strong>Environments</strong> sub-tab.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>At the <strong>Puppet CA</strong> tab you can find the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A certificate status overview and the number of autosign entries at the <strong>General</strong> sub-tab.</p>
</li>
<li>
<p>A table of CA certificates associated with the Smart&#160;Proxy at the <strong>Certificates</strong> sub-tab.
Here you can inspect the certificate expiry data, or cancel the certificate by clicking <strong>Revoke</strong>.</p>
</li>
<li>
<p>A list of autosign entries at the <strong>Autosign entries</strong> sub-tab.
Here you can create an entry by clicking <strong>New</strong> or delete one by clicking <strong>Delete</strong>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Using_Webhooks_admin"><a class="anchor" href="#Using_Webhooks_admin"></a>11. Using Webhooks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A webhook is a way for a web page or web application to provide other applications with information in real time.
Webhooks are only triggered after an event occurs.
The request usually contains details of the event.
An event triggers callbacks, such as sending an e-mail confirming a host has been provisioned.
Webhooks enable you to define a call to an external API based on Foreman internal event using a fire-and-forget message exchange pattern.
The application sending the request does not wait for the response, or ignores it.</p>
</div>
<div class="paragraph">
<p>Payload of a webhook is created from webhook templates.
Webhook templates use the same ERB syntax as Provisioning templates.
Available variables:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@event_name</code>: Name of an event.</p>
</li>
<li>
<p><code>@webhook_id</code>: Unique event ID.</p>
</li>
<li>
<p><code>@payload</code>: Payload data, different for each event type. To access individual fields, use <code>@payload[:key_name]</code> Ruby hash syntax.</p>
</li>
<li>
<p><code>@payload[:object]</code>: Database object for events triggered by database actions (create, update, delete). Not available for custom events.</p>
</li>
<li>
<p><code>@payload[:context]</code>: Additional information as hash like request and session UUID, remote IP address, user, organization and location.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Because webhooks use HTTP, no new infrastructure needs be added to existing web services.</p>
</div>
<div class="paragraph">
<p>The typical use case for webhooks in Foreman is making a call to a monitoring system when a host is created or deleted.</p>
</div>
<div class="paragraph">
<p>Webhooks are useful where the action you want to perform in the external system can be achieved through its API.
Where it is necessary to run additional commands or edit files, the shellhooks plugin for Smart&#160;Proxies is available.
The shellhooks plugin enables you to define a shell script on the Smart&#160;Proxy that can be executed through the API.</p>
</div>
<div class="paragraph">
<p>You can use webhooks successfully without installing the shellhooks plugin.</p>
</div>
<div class="paragraph">
<p>For a list of available events, see <a href="#webhooks-available-events_admin">Available webhook events</a>.</p>
</div>
<div class="sect2">
<h3 id="migrating-to-webhooks_admin"><a class="anchor" href="#migrating-to-webhooks_admin"></a>11.1. Migrating to Webhooks</h3>
<div class="paragraph">
<p>The legacy <code>foreman_hooks</code> plugin provided full access to model objects that the webhooks plugin does not intentionally provide.</p>
</div>
<div class="paragraph">
<p>The scope of what is available is limited by the safemode and all objects and macros are both subject to an API stability promise and are fully documented.</p>
</div>
<div class="paragraph">
<p>The number of events triggered by webhooks is substantially fewer than with <code>foreman_hooks</code>.</p>
</div>
<div class="paragraph">
<p>Webhooks are processed asynchronously so there is minimal risk of tampering with internals of the system.
It is not possible to migrate from <code>foreman_hooks</code> without creating payloads for each individual webhook script.
However, the webhooks plugin comes with several example payload templates.
You can also use the example payloads with shellhooks to simplify migration.</p>
</div>
<div class="paragraph">
<p>Both script and payload templates must be customized to achieve similar results.</p>
</div>
</div>
<div class="sect2">
<h3 id="installing-webhooks-plugin_admin"><a class="anchor" href="#installing-webhooks-plugin_admin"></a>11.2. Installing Webhooks</h3>
<div class="paragraph">
<p>Use the following procedure to install webhooks.
After installing webhooks, you can configure Foreman&#160;server to send webhook requests.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Install webhooks using the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --enable-foreman-plugin-webhooks</pre>
</div>
</div>
</li>
<li>
<p>Optionally, you can install the CLI plugin using the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --enable-foreman-cli-plugin-webhooks</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="creating-a-webhook-template_admin"><a class="anchor" href="#creating-a-webhook-template_admin"></a>11.3. Creating a Webhook Template</h3>
<div class="paragraph">
<p>Use the following procedure to create a webhook template in the Foreman web UI.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> <strong>&gt;</strong> <strong>Webhooks Templates</strong>.</p>
</li>
<li>
<p>Click <strong>Clone an existing template</strong> or <strong>Create Template</strong>.</p>
</li>
<li>
<p>Enter a name for the template.</p>
</li>
<li>
<p>Use the editor to make changes to the template payload.</p>
<div class="paragraph">
<p>A webhook HTTP payload must be created using Foreman template syntax.
The webhook template can use a special variable called <code>@object</code> that can represent the main object of the event.</p>
</div>
<div class="paragraph">
<p>For more information, see <a href="https://docs.theforeman.org/3.5/Managing_Hosts/index-foreman-deb.html#Template_Writing_Reference_managing-hosts">Template Writing Reference</a> in <em>Managing Hosts</em> and for available template macros and methods, visit <code>/templates_doc</code> on Foreman&#160;server.</p>
</div>
</li>
<li>
<p>Optional: Enter the description and audit comment.</p>
</li>
<li>
<p>Assign organizations and locations.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="creating-a-webhook_admin"><a class="anchor" href="#creating-a-webhook_admin"></a>11.4. Creating a Webhook</h3>
<div class="paragraph">
<p>You can customize events, payloads, HTTP authentication, content type, and headers through the Foreman web UI.</p>
</div>
<div class="paragraph">
<p>Use the following procedure to create a webhook in the Foreman web UI.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, click <strong>Administer</strong> <strong>&gt;</strong> <strong>Webhooks</strong>.</p>
</li>
<li>
<p>Click <strong>Create Webhook</strong>.</p>
</li>
<li>
<p>Click <strong>Subscribe to</strong> to select an event.</p>
</li>
<li>
<p>Enter a name.</p>
</li>
<li>
<p>Enter a target URL.
Webhooks make HTTP requests to pre-configured URLs.
The target URL can be a dynamic URL.
When using the shellhooks plugin, the URL should be in the form <code>https://smartproxy.example.com:8443/shellhook/my_script</code>.</p>
</li>
<li>
<p>Click <strong>Template</strong> to select a template.</p>
</li>
<li>
<p>Enter an HTTP method.</p>
</li>
<li>
<p>Check the <strong>Enabled</strong> flag if you want to create an active webhook.</p>
</li>
<li>
<p>Click the <strong>Credentials</strong> tab.</p>
</li>
<li>
<p>Optional: If HTTP authentication is required, enter the username and password.</p>
</li>
<li>
<p>Select <strong>Verify SSL</strong> if the server certificate should be verified against the system certificate store or Foreman CA.</p>
</li>
<li>
<p>Select <strong>Proxy Authorization</strong> when using shellhooks, otherwise clear this box.</p>
</li>
<li>
<p>On the <strong>Additional</strong> tab, enter the HTTP Content Type.
For example, <code>application/json</code>, <code>application/xml</code> or <code>text/plain</code> on the payload you define.
The application does not attempt to convert the content to match the specified content type.</p>
</li>
<li>
<p>Optional: Provide HTTP headers as JSON.
ERB is also allowed.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="webhooks-available-events_admin"><a class="anchor" href="#webhooks-available-events_admin"></a>11.5. Available Webhook Events</h3>
<div class="paragraph">
<p>The following table contains a list of webhook events that are available from the Foreman web UI.
<code>Action</code> events trigger webhooks only on <code>success</code>, so if an action fails, a webhook is not triggered.</p>
</div>
<div class="paragraph">
<p>For more information about payload, go to <strong>Administer</strong> &gt; <strong>About</strong> &gt; <strong>Support</strong> &gt; <strong>Templates DSL</strong>.
A list of available types is provided in the following table.
Some events are marked as <strong>custom</strong>, in that case, the payload is an object object but a Ruby hash (key-value data structure) so syntax is different.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 40%;">
<col style="width: 30%;">
<col style="width: 30%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Event name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Payload</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Katello Content View Promote Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Content View was successfully promoted.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::Katello::ContentView::Promote</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Katello Content View Publish Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A repository was successfully synchronized.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::Katello::ContentView::Publish</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Remote Execution Run Host Job Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A generic remote execution job succeeded for a host. This event is emitted for all Remote Execution jobs, when complete.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::RemoteExecution::RunHostJob</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Remote Execution Run Host Job Katello Errata Install Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Install errata using the Katello interface.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::RemoteExecution::RunHostJob</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Remote Execution Run Host Job Katello Group Install Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Install package group using the Katello interface.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::RemoteExecution::RunHostJob</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Remote Execution Run Host Job Katello Package Install Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Install package using the Katello interface.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::RemoteExecution::RunHostJob</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Remote Execution Run Host Job Katello Group Remove</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remove package group using the Katello interface.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::RemoteExecution::RunHostJob</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Remote Execution Run Host Job Katello Package Remove Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remove package using the Katello interface.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::RemoteExecution::RunHostJob</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Remote Execution Run Host Job Katello Service Restart Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Restart Services using the Katello interface.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::RemoteExecution::RunHostJob</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Remote Execution Run Host Job Katello Group Update Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update package group using the Katello interface.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::RemoteExecution::RunHostJob</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Remote Execution Run Host Job Katello Package Update Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update package using the Katello interface.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::RemoteExecution::RunHostJob</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Remote Execution Run Host Job Foreman OpenSCAP Run Scans Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Run OpenSCAP scan.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::RemoteExecution::RunHostJob</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Remote Execution Run Host Job Ansible Run Host Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Runs an Ansible playbook containing all the roles defined for a host.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::RemoteExecution::RunHostJob</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Remote Execution Run Host Job Ansible Run Capsule Upgrade Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Upgrade Capsules on given Capsule server hosts.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::RemoteExecution::RunHostJob</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Remote Execution Run Host Job Ansible Configure Cloud Connector Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configure Cloud Connector on given hosts.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::RemoteExecution::RunHostJob</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Remote Execution Run Host Job Ansible Run Playbook Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Run an Ansible playbook against given hosts.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::RemoteExecution::RunHostJob</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Remote Execution Run Host Job Ansible Enable Web Console Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Run an Ansible playbook to enable the web console on given hosts.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::RemoteExecution::RunHostJob</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Remote Execution Run Host Job Puppet Run Host Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Perform a single Puppet run.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::RemoteExecution::RunHostJob</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Remote Execution Run Host Job Katello Module Stream Action Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Perform a module stream action using the Katello interface.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::RemoteExecution::RunHostJob</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Remote Execution Run Host Job Leapp Pre-upgrade Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Upgradeability check for RHEL 7 host.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::RemoteExecution::RunHostJob</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Remote Execution Run Host Job Leapp Remediation Plan Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Run Remediation plan with Leapp.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::RemoteExecution::RunHostJob</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Remote Execution Run Host Job Leapp Upgrade Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Run Leapp upgrade job for RHEL 7 host.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::RemoteExecution::RunHostJob</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Build Entered</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A host entered the build mode.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom event: <code>@payload[:id]</code> (host id), <code>@payload[:hostname]</code> (host name).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Build Exited</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A host build mode was canceled, either it was successfully provisioned or the user canceled the build manually.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom event: <code>@payload[:id]</code> (host id), <code>@payload[:hostname]</code> (host name).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Content View Created/Updated/Destroyed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Common database operations on a Content View.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Katello::ContentView</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Domain Created/Updated/Destroyed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Common database operations on a domain.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Domain</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Host Created/Updated/Destroyed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Common database operations on a host.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Host</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hostgroup Created/Updated/Destroyed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Common database operations on a hostgroup.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hostgroup</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Model Created/Updated/Destroyed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Common database operations on a model.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Model</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status Changed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Global host status of a host changed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom event: <code>@payload[:id]</code> (host id), <code>@payload[:hostname]</code>, <code>@payload[:global_status]</code> (hash)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subnet Created/Updated/Destroyed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Common database operations on a subnet.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subnet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Template Render Performed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A report template was rendered.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Template</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Created/Updated/Destroyed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Common database operations on a user.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="shellhooks_admin"><a class="anchor" href="#shellhooks_admin"></a>11.6. Shellhooks</h3>
<div class="paragraph">
<p>With webhooks, one Foreman event can only be mapped to one API call.
For advanced integrations, where a single shell script can contain multiple commands, you can install a Smart&#160;Proxy shellhooks plugin that exposes executables using a REST HTTP API.</p>
</div>
<div class="paragraph">
<p>A webhook can then be configured to reach out to a Smart&#160;Proxy API to run a predefined shellhook, which, for example, can contain commands or edit files.</p>
</div>
<div class="paragraph">
<p>Scripts must be placed in <code>/var/lib/foreman-proxy/shellhooks</code> as executables with only alphanumeric characters and underscores in the name.</p>
</div>
<div class="paragraph">
<p>The HTTPS payload is passed using standard input, optional command line arguments can be provided using X-Shellhook-Arg-1 <em>to</em> N.</p>
</div>
<div class="paragraph">
<p>The HTTP method must be POST.
An example URL would be: <code>https://smartproxy.example.com:8443/shellhook/my_script</code>.</p>
</div>
<div class="paragraph">
<p>You must enable <strong>Proxy Authorization</strong> for each webhook that is connected to a shellhook, to enable it to authorize a call.</p>
</div>
<div class="paragraph">
<p>Standard output and error are redirected to the Smart&#160;Proxy log as messages with debug or warning levels respectively.</p>
</div>
<div class="paragraph">
<p>There is no return value from shellhook HTTPS calls.</p>
</div>
</div>
<div class="sect2">
<h3 id="installing-shellhooks-plugin_admin"><a class="anchor" href="#installing-shellhooks-plugin_admin"></a>11.7. Installing the Shellhooks Plugin</h3>
<div class="paragraph">
<p>Optionally, you can install and enable the shellhooks plugin on each Smart&#160;Proxy used for shellhooks, using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --enable-foreman-proxy-plugin-shellhooks</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="using-shellhook_arguments_admin"><a class="anchor" href="#using-shellhook_arguments_admin"></a>11.8. Using Shellhook Arguments</h3>
<div class="paragraph">
<div class="title">Procedure</div>
<p>To pass arguments into a shellhook script, create the following HTTP headers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">{
  "X-Shellhook-Arg-1": "&lt;%= @object.content_view_version_id %&gt;",
  "X-Shellhook-Arg-2": "&lt;%= @object.content_view_name %&gt;"
}</pre>
</div>
</div>
<div class="paragraph">
<p>Ensure the content renders to a valid JSON.
Also, only pass safe fields like database ID, name, or labels which do not include new lines or quote characters.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Searching_and_Bookmarking_admin"><a class="anchor" href="#Searching_and_Bookmarking_admin"></a>12. Searching and Bookmarking</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Foreman features powerful search functionality on most pages of the Foreman web UI.
It enables you to search all kinds of resources that Foreman manages.
Searches accept both free text and syntax-based queries, which can be built using extensive input prediction.
Search queries can be saved as bookmarks for future reuse.</p>
</div>
<div class="sect2">
<h3 id="Building_Search_Queries_admin"><a class="anchor" href="#Building_Search_Queries_admin"></a>12.1. Building Search Queries</h3>
<div class="paragraph">
<p>As you start typing a search query, a list of valid options to complete the current part of the query appears.
You can either select an option from the list and keep building the query using the prediction, or continue typing.
To learn how free text is interpreted by the search engine, see <a href="#Using_Free_Text_Search_admin">Using Free Text Search</a>.</p>
</div>
<div class="sect3">
<h4 id="Query_Syntax_admin"><a class="anchor" href="#Query_Syntax_admin"></a>12.1.1. Query Syntax</h4>
<div class="listingblock">
<div class="content">
<pre class="nowrap"><em>parameter</em> <em>operator</em> <em>value</em></pre>
</div>
</div>
<div class="paragraph">
<p>Available fields, resources to search, and the way the query is interpreted all depend on context, that is, the page where you perform the search.
For example, the field "hostgroup" on the Hosts page is equivalent to the field "name" on the Host Groups page.
The field type also determines available operators and accepted values.</p>
</div>
<div class="paragraph">
<p>For a list of all operators, see <a href="#Query_Operators_admin">Operators</a>.
For descriptions of value formats, see <a href="#Query_Values_admin">Values</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="Query_Operators_admin"><a class="anchor" href="#Query_Operators_admin"></a>12.1.2. Query Operators</h4>
<div class="paragraph">
<p>All operators that can be used between <em>parameter</em> and <em>value</em> are listed in the following table.
Other symbols and special characters that might appear in a prediction-built query, such as colons, do not have special meaning and are treated as free text.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. Comparison Operators Accepted by Search</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 33.3335%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operator</th>
<th class="tableblock halign-left valign-top">Short Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EQUALS</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Accepts numerical, temporal, or text values.
For text, exact case sensitive matches are returned.</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><div class="content"><div class="paragraph">
<p><code>hostgroup = RHEL7</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">!=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOT EQUALS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">~</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LIKE</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Accepts text or temporal values.
Returns case insensitive matches.
Accepts the following wildcards: _ for a single character, % or * for any number of characters including zero.
If no wildcard is specified, the string is treated as if surrounded by wildcards: %rhel7%</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><div class="content"><div class="paragraph">
<p><code>hostgroup ~ rhel%</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">!~</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOT LIKE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GREATER THAN</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Accepts numerical or temporal values.
For temporal values, the operator &gt; is interpreted as "later than", and &lt; as "earlier than".
Both operators can be combined with EQUALS: &gt;= &lt;=</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><div class="content"><div class="paragraph">
<p><code>registered_at &gt; 10-January-2017</code>
<br>
The search will return hosts that have been registered after the given date, that is, between 10th January 2017 and now.</p>
</div>
<div class="paragraph">
<p><code>registered_at &lt;= Yesterday</code>
<br>
The search will return hosts that have been registered yesterday or earlier.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LESS THAN</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">^</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IN</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Compares an expression against a list of values, as in SQL.
Returns matches that contain or not contain the values, respectively.</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><div class="content"><div class="paragraph">
<p><code>release_version !^ 7</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">!^</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOT IN</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HAS or set?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Returns values that are present or not present, respectively.</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><div class="content"><div class="paragraph">
<p><code>has hostgroup</code> or <code>set? hostgroup</code>
<br>
On the Puppet Classes page, the search will return classes that are assigned to at least one host group.</p>
</div>
<div class="paragraph">
<p><code>not has hostgroup</code> or <code>null? hostgroup</code>
<br>
On the Dashboard with an overview of hosts, the search will return all hosts that have no assigned host group.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOT HAS or null?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#160;</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Simple queries that follow the described syntax can be combined into more complex ones using logical operators AND, OR, and NOT.
Alternative notations of the operators are also accepted:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 9. Logical Operators Accepted by Search</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operator</th>
<th class="tableblock halign-left valign-top" colspan="3">Alternative Notations</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">and</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&amp;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&amp;&amp;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;whitespace&gt;</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>class = motd AND environment ~ production</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">or</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">|</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">||</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>errata_status = errata_needed || errata_status = security_needed</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">!</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>hostgroup ~ rhel7 not status.failed</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="Query_Values_admin"><a class="anchor" href="#Query_Values_admin"></a>12.1.3. Query Values</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Text Values</strong></dt>
<dd>
<p>Text containing whitespaces must be enclosed in quotes.
A whitespace is otherwise interpreted as the AND operator.</p>
<div class="paragraph">
<p><strong>Examples:</strong></p>
</div>
<div class="paragraph">
<p><code>hostgroup = "Web servers"</code></p>
</div>
<div class="paragraph">
<p>The search will return hosts with assigned host group named "Web servers".</p>
</div>
<div class="paragraph">
<p><code>hostgroup = Web servers</code></p>
</div>
<div class="paragraph">
<p>The search will return hosts in the host group Web with any field matching %servers%.</p>
</div>
</dd>
<dt class="hdlist1"><strong>Temporal Values</strong></dt>
<dd>
<p>Many date and time formats are accepted, including the following:</p>
<div class="ulist">
<ul>
<li>
<p>"10 January 2017"</p>
</li>
<li>
<p>"10 Jan 2017"</p>
</li>
<li>
<p>10-January-2017</p>
</li>
<li>
<p>10/January/2017</p>
</li>
<li>
<p>"January 10, 2017"</p>
</li>
<li>
<p>Today, Yesterday, and the like.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>Avoid ambiguous date formats, such as 02/10/2017 or 10-02-2017.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Using_Free_Text_Search_admin"><a class="anchor" href="#Using_Free_Text_Search_admin"></a>12.2. Using Free Text Search</h3>
<div class="paragraph">
<p>When you enter free text, it will be searched for across multiple fields.
For example, if you type "64", the search will return all hosts that have that number in their name, IP address, MAC address, and architecture.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Multi-word queries must be enclosed in quotes, otherwise the whitespace is interpreted as the AND operator.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Because of searching across all fields, free text search results are not very accurate and searching can be slow, especially on a large number of hosts.
For this reason, we recommend that you avoid free text and use more specific, syntax-based queries whenever possible.</p>
</div>
</div>
<div class="sect2">
<h3 id="Managing_Bookmarks_admin"><a class="anchor" href="#Managing_Bookmarks_admin"></a>12.3. Managing Bookmarks</h3>
<div class="paragraph">
<p>You can save search queries as bookmarks for reuse.
You can also delete or modify a bookmark.</p>
</div>
<div class="paragraph">
<p>Bookmarks appear only on the page on which they were created.
On some pages, there are default bookmarks available for the common searches, for example, all <code>active</code> or <code>disabled</code> hosts.</p>
</div>
<div class="sect3">
<h4 id="Creating_Bookmarks_admin"><a class="anchor" href="#Creating_Bookmarks_admin"></a>12.3.1. Creating Bookmarks</h4>
<div class="paragraph">
<p>This section details how to save a search query as a bookmark.
You must save the search query on the relevant page to create a bookmark for that page, for example, saving a host related search query on the Hosts page.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to the page where you want to create a bookmark.</p>
</li>
<li>
<p>In the <strong>Search</strong> field, enter the search query you want to save.</p>
</li>
<li>
<p>Select the arrow to the right of the <strong>Search</strong> button and then select <strong>Bookmark this search</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for the new bookmark.</p>
</li>
<li>
<p>In the <strong>Search query</strong> field, ensure your search query is correct.</p>
</li>
<li>
<p>Ensure the <strong>Public</strong> checkbox is set correctly:</p>
<div class="ulist">
<ul>
<li>
<p>Select the <strong>Public</strong> checkbox to set the bookmark as public and visible to all users.</p>
</li>
<li>
<p>Clear the <strong>Public</strong> checkbox to set the bookmark as private and only visible to the user who created it.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To confirm the creation, either select the arrow to the right of the <strong>Search</strong> button to display the list of bookmarks, or navigate to <strong>Administer</strong> &gt; <strong>Bookmarks</strong> and then check the <strong>Bookmarks</strong> list for the name of the bookmark.</p>
</div>
</div>
<div class="sect3">
<h4 id="Deleting_Bookmarks_admin"><a class="anchor" href="#Deleting_Bookmarks_admin"></a>12.3.2. Deleting Bookmarks</h4>
<div class="paragraph">
<p>You can delete bookmarks on the Bookmarks page.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Bookmarks</strong>.</p>
</li>
<li>
<p>On the Bookmarks page, click <strong>Delete</strong> for the Bookmark you want to delete.</p>
</li>
<li>
<p>When the confirmation window opens, click <strong>OK</strong> to confirm the deletion.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To confirm the deletion, check the <strong>Bookmarks</strong> list for the name of the bookmark.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="administer_settings_information_admin"><a class="anchor" href="#administer_settings_information_admin"></a>Appendix A: Administration Settings</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section contains information about settings that you can edit in the Foreman web UI by navigating to <strong>Administer &gt; Settings</strong>.</p>
</div>
<div class="sect2">
<h3 id="general_settings_information_admin"><a class="anchor" href="#general_settings_information_admin"></a>A.1. General Settings</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Administrator email address</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The default administrator email address</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Satellite URL</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL where your Foreman instance is reachable.
See also <strong>Provisioning &gt; Unattended URL</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Entries per page</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of records shown per page in Foreman</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Fix DB cache</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman maintains a cache of permissions and roles.
When set to <code>Yes</code>, Foreman recreates this cache on the next restart.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>DB pending seed</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should the <code>foreman-rake db:seed</code> be executed on the next run of the installer modules?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Smart&#160;Proxy request timeout</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Open and read timeout for HTTP requests from Foreman to Smart&#160;Proxy (in seconds).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Login page footer text</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Text to be shown in the login-page footer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Show host power status</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Show power status on the host index page.
This feature calls to compute resource providers which may lead to decreased performance on the host listing page.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>HTTP(S) proxy</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set a proxy for outgoing HTTP(S) connections from the Foreman product.
System-wide proxies must be configured at the operating system level.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>HTTP(S) proxy except hosts</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set hostnames to which requests are not to be proxied.
Requests to the local host are excluded by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Show Experimental Labs</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether or not to show a menu to access experimental lab features (requires reload of page).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Append domain names to the host</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If set to <code>Yes</code>, Foreman appends domain names when new hosts are provisioned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Out of sync interval</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Managed hosts report periodically, and if the time between reports exceeds this duration in minutes, hosts are considered out of sync.
You can override this on your hosts by adding the <code>outofsync_interval</code> parameter, per host, at <strong>Hosts &gt; All hosts &gt; $host &gt; Edit &gt; Parameters &gt; Add Parameter</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Foreman UUID</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman instance ID.
Uniquely identifies a Foreman instance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default language</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The UI for new users uses this language.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default timezone</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The timezone to use for new users.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Instance title</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The instance title is shown on the top navigation bar (requires a page reload).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Saved audits interval</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Duration in days to preserve audit data.
Leave empty to disable the audits cleanup.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>New host details UI</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman loads the new UI for host details.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="foreman_tasks_admin"><a class="anchor" href="#foreman_tasks_admin"></a>A.2. Tasks settings</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Sync task timeout</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">120</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of seconds to wait for a synchronous task to finish before an exception is raised.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Enable dynflow console</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable the dynflow console (<code>/foreman_tasks/dynflow</code>) for debugging.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Require auth for dynflow console</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The user must be authenticated as having administrative rights before accessing the dynflow console.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Proxy action retry count</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of attempts permitted to start a task on the Smart&#160;Proxy before failing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Proxy action retry interval</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time in seconds between retries.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Allow proxy batch tasks</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allow triggering tasks on the Smart&#160;Proxy in batches.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Proxy tasks batch size</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of tasks included in one request to the Smart&#160;Proxy if <code>foreman_tasks_proxy_batch_trigger</code> is enabled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Tasks troubleshooting URL</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL pointing to the task troubleshooting documentation.
It should contain a <code>%{label}</code> placeholder that is replaced with a normalized task label (restricted to only alphanumeric characters)).
A <code>%{version}</code> placeholder is also available.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Polling intervals multiplier</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Polling multiplier used to multiply the default polling intervals.
You can use this to prevent polling too frequently for long running tasks.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="template_sync_settings_admin"><a class="anchor" href="#template_sync_settings_admin"></a>A.3. Template Sync Settings</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Associate</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">New</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Associate templates with OS, organization and location.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Branch</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default branch in Git repo.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Commit message</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Templates export made by a Foreman user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom commit message for exported templates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Dirname</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The directory within the Git repo containing the templates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Filter</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Import or export of names matching this regex.
Case-insensitive.
Snippets are not filtered.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Force import</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If set to <code>Yes</code>, locked templates are overwritten during an import.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Lock templates</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Keep, do not lock new</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How to handle lock for imported templates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Metadata export mode</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Refresh</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default metadata export mode.</p>
<p class="tableblock">Possible options:</p>
<p class="tableblock"><code>refresh</code> re-renders metadata.</p>
<p class="tableblock"><code>keep</code> keeps existing metadata.</p>
<p class="tableblock"><code>remove</code> exports the template without metadata.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Negate</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Negate the filter for import or export.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Prefix</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A string added as a prefix to imported templates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Repo</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Target path from where to import or export templates.
Different protocols can be used, for example:</p>
<p class="tableblock"><code>/tmp/dir</code></p>
<p class="tableblock"><code>git://example.com</code></p>
<p class="tableblock"><code>https://example.com</code></p>
<p class="tableblock"><code>ssh://example.com</code></p>
<p class="tableblock">When exporting to <code>/tmp</code>, note that production deployments may be configured to use <code>private tmp</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Verbosity</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Choose verbosity for Rake task importing templates.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="discovered_settings_admin"><a class="anchor" href="#discovered_settings_admin"></a>A.4. Discovered Settings</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Discovery location</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the default location to place discovered hosts in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Discovery organization</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the default organization to which discovered hosts are added.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Interface fact</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">discovery_bootif</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fact name to use for primary interface detection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Create bond interfaces</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Automatically create a bond interface if another interface is detected on the same VLAN using LLDP.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Clean all facts</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clean all reported facts (except discovery facts) during provisioning.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Hostname facts</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">discovery_bootif</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of facts to use for the hostname (comma separated, first wins).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Auto provisioning</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use the provisioning rules to automatically provision newly discovered hosts.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reboot</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Automatically reboot or kexec discovered hosts during provisioning.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Hostname prefix</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">mac</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The default prefix to use for the hostname.
Must start with a letter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Fact columns</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extra facter columns to show in host lists (comma separated).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Highlighted facts</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Regex to organize facts for highlights section &#8211; e.g. <code>^(abc|cde)$</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Storage facts</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Regex to organize facts for the storage section.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Software facts</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Regex to organize facts for the software section.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Hardware facts</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Regex to organize facts for the hardware section.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Network facts</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Regex to organize facts for the network section.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>IPMI facts</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Regex to organize facts for the <em>Intelligent Platform Management Interface</em> (IPMI) section.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Lock PXE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Automatically generate a <em>Preboot Execution Environment</em> (PXE) configuration to pin a newly discovered host to discovery.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Locked PXELinux template name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pxelinux_discovery</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PXELinux template to be used when pinning a host to discovery.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Locked PXEGrub template name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pxegrub_discovery</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PXEGrub template to be used when pinning a host to discovery.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Locked PXEGrub2 template name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pxegrub2_discovery</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PXEGrub2 template to be used when pinning a host to discovery.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Force DNS</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Force the creation of DNS entries when provisioning a discovered host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Error on existing NIC</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Do not permit to discover an existing managed host matching the MAC of a provisioning <em>Network Interface Card</em> (NIC) (errors out early).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Type of name generator</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fact + prefix</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Discovery hostname naming pattern.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Prefer IPv6</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prefer IPv6 to IPv4 when calling discovered nodes.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="boot_disk_settings_admin"><a class="anchor" href="#boot_disk_settings_admin"></a>A.5. Boot Disk Settings</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>iPXE directory</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/usr/share/ipxe</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to directory containing iPXE images.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ISOLINUX directory</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/usr/share/syslinux</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to directory containing ISOLINUX images.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SYSLINUX directory</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/usr/share/syslinux</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to directory containing SYSLINUX images.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Grub2 directory</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/lib/tftpboot/grub2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to directory containing <code>grubx64.efi</code> and <code>shimx64.efi</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Host image template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boot disk iPXE - host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">iPXE template to use for host-specific boot disks.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Generic image template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boot disk iPXE - generic host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">iPXE template to use for generic host boot disks.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Generic Grub2 EFI image template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boot disk Grub2 EFI - generic host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Grub2 template to use for generic <em>Extensible Firmware Interface</em> (EFI) host boot disks.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ISO generation command</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">genisoimage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command to generate ISO image, use <code>genisoimage</code> or <code>mkisofs</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Installation media caching</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Installation media files are cached for full host images.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Allowed bootdisk types</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[generic, host, full_host, subnet]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of permitted bootdisk types.
Leave blank to disable it.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="content_settings_admin"><a class="anchor" href="#content_settings_admin"></a>A.6. Content Settings</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default HTTP Proxy</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default HTTP Proxy for syncing content.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CDN SSL version</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SSL version used to communicate with the CDN.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default synced OS provisioning template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kickstart default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default provisioning template for operating systems created from synced content.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default synced OS finish template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kickstart default finish</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default finish template for new operating systems created from synced content.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default synced OS user-data</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kickstart default user data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default user data for new operating systems created from synced content.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default synced OS PXELinux template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kickstart default PXELinux</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default PXELinux template for new operating systems created from synced content.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default synced OS PXEGrub template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kickstart default PXEGrub</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default PXEGrub template for new operating systems created from synced content.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default synced OS PXEGrub2 template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kickstart default PXEGrub2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default PXEGrub2 template for new operating systems created from synced content.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default synced OS iPXE template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kickstart default iPXE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default iPXE template for new operating systems created from synced content.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default synced OS partition table</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kickstart default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default partitioning table for new operating systems created from synced content.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default synced OS kexec template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Discovery Foreman developers kexec</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default kexec template for new operating systems created from synced content.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default synced OS Atomic template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Atomic Kickstart default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default provisioning template for new atomic operating systems created from synced content.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Manifest refresh timeout</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1200</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timeout when refreshing a manifest (in seconds).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Accept action timeout</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time in seconds to wait for a host to pick up a remote action.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Finish action timeout</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3600</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time in seconds to wait for a host to finish a remote action.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Subscription connection enabled</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Can communicate with the Foreman developers Portal for subscriptions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Installable errata from Content View</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Calculate errata host status based only on errata in a host&#8217;s Content View and Lifecycle Environment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Restrict Composite Content View promotion</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this is enabled, a composite content view cannot be published or promoted, unless the content view versions that it includes exist in the target environment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Check services before actions</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check the status of backend services such as pulp and candlepin before performing actions?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Batch size to sync repositories in</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How many repositories should be synced concurrently on a Smart&#160;Proxy.
A smaller number may lead to longer sync times.
A larger number will increase dynflow load.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Sync Smart&#160;Proxies after Content View promotion</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether or not to auto sync Smart&#160;Proxies after a Content View promotion.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default Custom Repository download policy</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>immediate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default download policy for custom repositories.
Either <code>immediate</code> or <code>on_demand</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default Foreman developers Repository download policy</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_demand</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default download policy for enabled Foreman developers repositories.
Either <code>immediate</code> or <code>on_demand</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default Smart&#160;Proxy download policy</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_demand</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default download policy for Smart&#160;Proxy syncs.
Either <code>inherit</code>, <code>immediate</code>, or <code>on_demand</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Pulp export destination filepath</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/lib/pulp/katello-export</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">On-disk location for exported repositories.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Pulp 3 export destination filepath</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/lib/pulp/exports</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">On-disk location for Pulp 3 exported repositories.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Pulp client key</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/etc/pki/katello/private/pulp-client.key</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path for SSL key used for Pulp server authentication.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Pulp client cert</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/etc/pki/katello/certs/pulp-client.crt</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path for SSL certificate used for Pulp server authentication.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Sync Connection Timeout</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">300</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total timeout in seconds for connections when syncing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Use remote execution by default</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If enabled, remote execution is used instead of katello-agent for remote actions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Delete Host upon unregister</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When unregistering a host using subscription-manager, also delete the host record.
Managed resources linked to the host such as virtual machines and DNS records might also be deleted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Subscription manager name registration fact</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When registering a host using subscription-manager, force use the specified fact for the host name (in the form of <code>fact.fact</code>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Subscription manager name registration fact strict matching</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this is enabled, and <code>register_hostname_fact</code> is set and provided, registration looks for a new host by name only using that fact, and skips all hostname matching.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default Location subscribed hosts</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default Location</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default location where new subscribed hosts are stored after registration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Expire soon days</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">120</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of days remaining in a subscription before you are reminded about renewing it.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Content View Dependency Solving Default</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The default dependency solving value for new content views.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Host Duplicate DMI UUIDs</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If hosts fail to register because of duplicate <em>Desktop Management Interface</em> (DMI) UUIDs, add their comma-separated values here.
Subsequent registrations generate a unique DMI UUID for the affected hosts.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Host Profile Assume</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable new host registrations to assume registered profiles with matching hostname as long as the registering DMI UUID is not used by another host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Host Profile Can Change In Build</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable host registrations to bypass <strong>Host Profile Assume</strong> as long as the host is in build mode.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Host Can Re-Register Only In Build</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable hosts to re-register only when they are in build mode.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Host Tasks Workers Pool Size</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of workers in the pool to handle the execution of host-related tasks.
When set to 0, the default queue is used.
Restart of the dynflowd/foreman-tasks service is required.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Applicability Batch Size</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of host applicability calculations to process per task.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Autosearch</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For pages that support it, automatically perform the search while typing in search input.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Autosearch delay</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">500</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If Autosearch is enabled, delay in milliseconds before executing searches while typing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Pulp bulk load size</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of items fetched from a single paged Pulp API call.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Upload profiles without Dynflow</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable Katello to update host installed packages, enabled repositories, and module inventory directly instead of wrapped in Dynflow tasks (try turning off if Puma processes are using too much memory).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Orphaned Content Protection Time</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1440</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time in minutes to consider orphan content as orphaned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Prefer registered through proxy for remote execution</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prefer using a proxy to which a host is registered when using remote execution.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Allow deleting repositories in published content views</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable removal of repositories that the user has previously published in one or more Content View versions.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="authentication_settings_admin"><a class="anchor" href="#authentication_settings_admin"></a>A.7. Authentication Settings</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>OAuth active</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman will use OAuth for API authorization.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>OAuth consumer key</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">*****</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OAuth consumer key.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>OAuth consumer secret</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">*****</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OAuth consumer secret.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>OAuth map users</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman maps users by username in the request-header.
If this is disabled, OAuth requests have administrator rights.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Failed login attempts limit</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman blocks user logins from an incoming IP address for 5 minutes after the specified number of failed login attempts.
Set to 0 to disable brute force protection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Restrict registered Smart&#160;Proxies</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only known Smart&#160;Proxies can access features that use Smart&#160;Proxy authentication.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Trusted hosts</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of hostnames, IPv4, IPv6 addresses or subnets to be trusted in addition to Smart&#160;Proxies for access to fact/report importers and ENC output.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SSL certificate</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/etc/foreman/client_cert.pem</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SSL Certificate path that Foreman uses to communicate with its proxies.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SSL CA file</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/etc/foreman/proxy_ca.pem</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SSL CA file path that Foreman uses to communicate with its proxies.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SSL private key</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/etc/foreman/client_key.pem</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SSL Private Key path that Foreman uses to communicate with its proxies.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SSL client DN env</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTP_SSL_CLIENT_S_DN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Environment variable containing the subject DN from a client SSL certificate.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SSL client verify env</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTP_SSL_CLIENT_VERIFY</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Environment variable containing the verification status of a client SSL certificate.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SSL client cert env</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTP_SSL_CLIENT_CERT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Environment variable containing a client&#8217;s SSL certificate.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Server CA file</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SSL CA file path used in templates to verify the connection to Foreman.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Websockets SSL key</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>etc/pki/katello/private/katello-apache.key</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Private key file path that Foreman uses to encrypt websockets.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Websockets SSL certificate</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/etc/pki/katello/certs/katello-apache.crt</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Certificate path that Foreman uses to encrypt websockets.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Websockets encryption</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VNC/SPICE websocket proxy console access encryption (<code>websockets_ssl_key/cert</code> setting required).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Login delegation logout URL</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redirect your users to this URL on logout.
Enable <strong>Authorize login delegation</strong> also.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Authorize login delegation auth source user autocreate</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">External</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the external authentication source where unknown externally authenticated users (see <strong>Authorize login delegation</strong>) are created.
Empty means no autocreation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Authorize login delegation</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Authorize login delegation with <code>REMOTE_USER HTTP</code> header.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Authorize login delegation API</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Authorize login delegation with <code>REMOTE_USER HTTP</code> header for API calls too.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Idle timeout</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Log out idle users after the specified number of minutes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>BCrypt password cost</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cost value of bcrypt password hash function for internal auth-sources (4&#8202;&#8211;&#8202;30).
A higher value is safer but verification is slower, particularly for stateless API calls and UI logins.
A password change is needed to affect existing passwords.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>BMC credentials access</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Permits access to BMC interface passwords through ENC YAML output and in templates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>OIDC JWKs URL</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenID Connect <em>JSON Web Key Set</em> (JWKS) URL.
Typically <code>https://keycloak.example.com/auth/realms/&lt;realm name&gt;/protocol/openid-connect/certs</code> when using Keycloak as an OpenID provider.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>OIDC Audience</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the OpenID Connect Audience that is being used for authentication.
In the case of Keycloak this is the Client ID.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>OIDC Issuer</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The issuer claim identifies the principal that issued the <em>JSON Web tokens</em> (JWT), which exists at a <code>/.well-known/openid-configuration</code> in case of most of the OpenID providers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>OIDC Algorithm</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The algorithm used to encode the JWT in the OpenID provider.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="email_settings_admin"><a class="anchor" href="#email_settings_admin"></a>A.8. Email Settings</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Email reply address</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Email reply address for emails that Foreman is sending.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Email subject prefix</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prefix to add to all outgoing email.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Send welcome email</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Send a welcome email including username and URL to new users.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Delivery method</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sendmail</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Method used to deliver email.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SMTP enable StartTLS auto</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP automatically enables StartTLS.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SMTP OpenSSL verify mode</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default verification mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When using TLS, you can set how OpenSSL checks the certificate.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SMTP address</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP address to connect to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SMTP port</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP port to connect to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SMTP HELO/EHLO domain</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HELO/EHLO domain.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SMTP username</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username to use to authenticate, if required.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SMTP password</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">*****</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password to use to authenticate, if required.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SMTP authentication</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specify authentication type, if required.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Sendmail arguments</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-i</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specify additional options to sendmail.
Only used when the delivery method is set to sendmail.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Sendmail location</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/usr/sbin/sendmail</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The location of the sendmail executable.
Only used when the delivery method is set to sendmail.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="notifications_settings_admin"><a class="anchor" href="#notifications_settings_admin"></a>A.9. Notifications Settings</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>RSS enable</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pull RSS notifications.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>RSS URL</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://theforeman.org/feed.xml" class="bare">https://theforeman.org/feed.xml</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL from which to fetch RSS notifications.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="provisioning_settings_admin"><a class="anchor" href="#provisioning_settings_admin"></a>A.10. Provisioning Settings</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Host owner</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default owner on provisioned hosts, if empty Foreman uses the current user.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Root password</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">*****</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default encrypted root password on provisioned hosts.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Unattended URL</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL that hosts retrieve templates from during the build.
When it starts with https, unattended, or userdata, controllers cannot be accessed using HTTP.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Safemode rendering</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Yes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables safe mode rendering of provisioning templates.
The default and recommended option <code>Yes</code> denies access to variables and any object that is not listed in Foreman.</p>
<p class="tableblock">When set to <code>No</code>, any object may be accessed by a user with permission to use templating features, either by editing templates, parameters or smart variables.
This permits users full remote code execution on Foreman&#160;server, effectively disabling all authorization.
This is not a safe option, especially in larger companies.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Access unattended without build</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable access to unattended URLs without build mode being used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Query local nameservers</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman queries the locally configured resolver instead of the SOA/NS authorities.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Installation token lifetime</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">360</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time in minutes that installation tokens should be valid for.
Set to 0 to disable the token.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SSH timeout</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">120</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time in seconds before SSH provisioning times out.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Libvirt default console address</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.0.0.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IP address that should be used for the console listen address when provisioning new virtual machines using libvirt.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Update IP from built request</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman updates the host IP with the IP that made the build request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Use short name for VMs</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman uses the short hostname instead of the FQDN for creating new virtual machines.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>DNS timeout</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[5, 10, 15, 20]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of timeouts (in seconds) for DNS lookup attempts such as the <code>dns_lookup</code> macro and DNS record conflict validation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Clean up failed deployment</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman deletes the virtual machine if the provisioning script ends with a non-zero exit code.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Type of name generator</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Random-based</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the method used to generate a hostname when creating a new host.</p>
<p class="tableblock">The default <code>Random-based</code> option generates a unique random hostname which you can but do not have to use.
This is useful for users who create many hosts and do not know how to name them.</p>
<p class="tableblock">The <code>MAC-based</code> option is for bare-metal hosts only.
If you delete a host and create it later on, it receives the same hostname based on the MAC address.
This can be useful for users who recycle servers and want them to always get the same hostname.</p>
<p class="tableblock">The <code>Off</code> option disables the name generator function and leaves the hostname field blank.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default PXE global template entry</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default PXE menu item in a global template &#8211; <code>local</code>, <code>discovery</code> or custom, use blank for template default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default PXE local template entry</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default PXE menu item in local template &#8211; <code>local</code>, <code>local_chain_hd0</code>, or custom, use blank for template default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>iPXE intermediate script</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">iPXE intermediate script</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intermediate iPXE script for unattended installations.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Destroy associated VM on host delete</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Destroy associated VM on host delete.
When enabled, VMs linked to hosts are deleted on Compute Resource.
When disabled, VMs are unlinked when the host is deleted, meaning they remain on Compute Resource and can be re-associated or imported back to Foreman again.
This does not automatically power off the VM</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Maximum structured facts</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of keys in structured subtree, statistics stored in <code>foreman::dropped_subtree_facts</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default Global registration template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Global Registration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Global Registration template.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default 'Host initial configuration' template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Linux host_init_config default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default 'Host initial configuration' template, automatically assigned when a new operating system is created.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CoreOS Transpiler Command</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<code>false</code>, <code>--pretty</code>, <code>--files-dir</code>, <code>/usr/share/foreman/config/ct</code>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full path to CoreOS transpiler (ct) with arguments as an comma-separated array</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Fedora CoreOS Transpiler Command</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[false</code>, <code>--pretty</code>, <code>--files-dir</code>, <code>/usr/share/foreman/config/ct</code>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full path to Fedora CoreOS transpiler (fcct) with arguments as an comma-separated array</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Global default PXEGrub2 template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PXEGrub2 global default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Global default PXEGrub2 template.
This template is deployed to all configured TFTP servers.
It is not affected by upgrades.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Global default PXELinux template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PXELinux global default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Global default PXELinux template.
This template is deployed to all configured TFTP servers.
It is not affected by upgrades.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Global default PXEGrub template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PXEGrub global default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Global default PXEGrub template.
This template is deployed to all configured TFTP servers.
It is not affected by upgrades.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Global default iPXE template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">iPXE global default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Global default iPXE template.
This template is deployed to all configured TFTP servers.
It is not affected by upgrades.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Local boot PXEGrub2 template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PXEGrub2 default local boot</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Template that is selected as PXEGrub2 default for local boot.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Local boot PXELinux template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PXELinux default local boot</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Template that is selected as PXELinux default for local boot.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Local boot PXEGrub template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PXEGrub default local boot</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Template that is selected as PXEGrub default for local boot.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Local boot iPXE template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">iPXE default local boot</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Template that is selected as iPXE default for local boot.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Manage PuppetCA</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman automates certificate signing upon provision of a new host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Use UUID for certificates</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman uses random UUIDs for certificate signing instead of hostnames.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="facts_settings_admin"><a class="anchor" href="#facts_settings_admin"></a>A.11. Facts Settings</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Create new host when facts are uploaded</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman creates the host when new facts are received.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Location fact</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">foreman_location</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hosts created after a Puppet run are placed in the location specified by this fact.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Organization fact</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">foreman_organization</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hosts created after a Puppet run are placed in the organization specified by this fact.
The content of this fact should be the full label of the organization.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default location</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default Location</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hosts created after a Puppet run that did not send a location fact are placed in this location.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default organization</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default Organization</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hosts created after a Puppet run that did not send an organization fact are placed in this organization.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Update hostgroup from facts</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman updates a host&#8217;s hostgroup from its facts.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Ignore facts for operating system</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Stop updating operating system from facts.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Ignore facts for domain</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Stop updating domain values from facts.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Update subnets from facts</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">None</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman updates a host&#8217;s subnet from its facts.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Ignore interfaces facts for provisioning</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Stop updating IP and MAC address values from facts (affects all interfaces).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Ignore interfaces with matching identifier</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<code>lo</code>, <code>en*v*</code>, <code>usb*</code>, <code>vnet*</code>, <code>macvtap*</code>, <code>;vdsmdummy;</code>, <code>veth*</code>, <code>tap*</code>, <code>qbr*</code>, <code>qvb*</code>, <code>qvo*</code>, <code>qr-*</code>, <code>qg-*</code>, <code>vlinuxbr*</code>, <code>vovsbr*</code>, <code>br-int</code>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Skip creating or updating host network interfaces objects with identifiers matching these values from incoming facts.
You can use a * wildcard to match identifiers with indexes, e.g. <code>macvtap*</code>.
The ignored interface raw facts are still stored in the database, see the <strong>Exclude pattern</strong> setting for more details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Exclude pattern for facts stored in satellite</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<code>lo</code>, <code>en*v*</code>, <code>usb*</code>, <code>vnet*</code>, <code>macvtap*</code>, <code>;vdsmdummy;</code>, <code>veth*</code>, <code>tap*</code>, <code>qbr*</code>, <code>qvb*</code>, <code>qvo*</code>, <code>qr-*</code>, <code>qg-*</code>, <code>vlinuxbr*</code>, <code>vovsbr*</code>, <code>br-int</code>, <code>load_averages::*</code>, <code>memory::swap::available*</code>, <code>memory::swap::capacity</code>, <code>memory::swap::used*</code>, <code>memory::system::available*</code>, <code>memory::system::capacity</code>, <code>memory::system::used*</code>, <code>memoryfree</code>, <code>memoryfree_mb</code>, <code>swapfree</code>, <code>swapfree_mb</code>, <code>uptime_hours</code>, <code>uptime_days</code>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exclude pattern for all types of imported facts (Puppet, Ansible, rhsm).
Those facts are not stored in the foreman database.
You can use a * wildcard to match names with indexes, e.g. <code>ignore*</code> filters out ignore, ignore123 as well as a::ignore or even a::ignore123::b.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default Puppet environment</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">production</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman defaults to this puppet environment if it cannot auto detect one.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ENC environment</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman explicitly sets the puppet environment in the ENC yaml output.
This avoids conflicts between the environment in <code>puppet.conf</code> and the environment set in Foreman.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Update environment from facts</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman updates a host&#8217;s environment from its facts.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="config_management_settings_admin"><a class="anchor" href="#config_management_settings_admin"></a>A.12. Configuration Management Settings</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Create new host when report is uploaded</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman creates the host when a report is received.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Matchers inheritance</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman matchers are inherited by children when evaluating smart class parameters for hostgroups, organizations, and locations.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default parameters lookup path</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<code>fqdn</code>, <code>hostgroup</code>, <code>os</code>, <code>domain</code>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman evaluates host smart class parameters in this order by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Interpolate ERB in parameters</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman parses ERB in parameters value in the ENC output.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Always show configuration status</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All hosts show a configuration status even when a Puppet Smart&#160;Proxy is not assigned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Puppet interval</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">35</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Duration in minutes after servers reporting using Puppet are classed as out of sync.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Puppet out of sync disabled</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disable host configuration status turning to out of sync for Puppet after report does not arrive within configured interval.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="remote_execution_settings_admin"><a class="anchor" href="#remote_execution_settings_admin"></a>A.13. Remote Execution Settings</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Fallback to Any Proxy</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search the host for any proxy with Remote Execution.
This is useful when the host has no subnet or the subnet does not have an execution proxy.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Enable Global Proxy</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search for Remote Execution proxy outside of the proxies assigned to the host.
The search is limited to the host&#8217;s organization and location.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SSH User</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">root</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default user to use for SSH.
You can override per host by setting the <code>remote_execution_ssh_user</code> parameter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Effective User</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">root</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default user to use for executing the script.
If the user differs from the SSH user, su or sudo is used to switch the user.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Effective User Method</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">sudo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The command used to switch to the effective user.
One of [<code>sudo</code>, <code>dzdo</code>, <code>su</code>]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Effective user password</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">*****</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Effective user password. See <strong>Effective User</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Sync Job Templates</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to sync templates from disk when running <code>db:seed</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SSH Port</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">22</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port to use for SSH communication.
Default port 22.
You can override per host by setting the <code>remote_execution_ssh_port</code> parameter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Connect by IP</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether the IP addresses on host interfaces are preferred over the FQDN.
It is useful when the DNS is not resolving the FQDNs properly.
You can override this per host by setting the <code>remote_execution_connect_by_ip</code> parameter.
For dual-stacked hosts, consider the <code>remote_execution_connect_by_ip_prefer_ipv6</code> setting.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Prefer IPv6 over IPv4</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When connecting using an IP address, are IPv6 addresses preferred?
If no IPv6 address is set, it falls back to IPv4 automatically.
You can override this per host by setting the <code>remote_execution_connect_by_ip_prefer_ipv6</code> parameter.
By default and for compatibility, IPv4 is preferred over IPv6.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default SSH password</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">*****</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default password to use for SSH.
You can override per host by setting the <code>remote_execution_ssh_password</code> parameter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default SSH key passphrase</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">*****</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default key passphrase to use for SSH.
You can override per host by setting the <code>remote_execution_ssh_key_passphrase</code> parameter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Workers pool size</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of workers in the pool to handle the execution of the remote execution jobs.
Restart of the <code>dynflowd/foreman-tasks</code> service is required.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Cleanup working directories</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether working directories are removed after task completion.
You can override this per host by setting the <code>remote_execution_cleanup_working_dirs</code> parameter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Cockpit URL</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where to find the Cockpit instance for the Web Console button.
By default, no button is shown.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Form Job Template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Run Command - SSH Default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Choose a job template that is pre-selected in job invocation form.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Job Invocation Report Template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jobs - Invocation report template</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Select a report template used for generating a report for a particular remote execution job.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Time to pickup</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">86400</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time in seconds within which the host has to pick up a job.
If the job is not picked up within this limit, the job will be cancelled.
Applies only to pull-mqtt based jobs.
Defaults to one day.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="ansible_settings_admin"><a class="anchor" href="#ansible_settings_admin"></a>A.14. Ansible Settings</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Private Key Path</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use this to supply a path to an SSH Private Key that Ansible uses instead of a password.
 Override with the <code>ansible_ssh_private_key_file</code> host parameter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Connection type</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ssh</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use this connection type by default when running Ansible playbooks.
You can override this on hosts by adding the <code>ansible_connection</code> parameter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>WinRM cert Validation</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">validate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable or disable WinRM server certificate validation when running Ansible playbooks.
You can override this on hosts by adding the <code>ansible_winrm_server_cert_validation</code> parameter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default verbosity level</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman adds this level of verbosity for additional debugging output when running Ansible playbooks.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Post-provision timeout</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">360</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timeout (in seconds) to set when Foreman triggers an Ansible roles task playbook after a host is fully provisioned.
Set this to the maximum time you expect a host to take until it is ready after a reboot.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Ansible report timeout</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timeout (in minutes) when hosts should have reported.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Ansible out of sync disabled</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disable host configuration status turning to out of sync for Ansible after a report does not arrive within the configured interval.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default Ansible inventory report template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ansible - Ansible Inventory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman uses this template to schedule the report with Ansible inventory.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Ansible roles to ignore</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The roles to exclude when importing roles from Smart&#160;Proxy.
The expected input is comma separated values and you can use * wildcard metacharacters.
For example: <code>foo*</code>, <code>*b*</code>, <code>*bar</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Proxy tasks batch size for Ansible</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of tasks which should be sent to the Smart&#160;Proxy in one request if <code>foreman_tasks_proxy_batch_trigger</code> is enabled.
If set, it overrides the foreman_tasks_proxy_batch_size setting for Ansible jobs.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 3.5<br>
Last updated Feb 2023
</div>
</div>
</body>
</html>