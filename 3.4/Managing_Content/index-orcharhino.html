<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<title>Managing Content</title>
<style>
*,::before,::after{box-sizing:border-box}html{font-size:100%;-webkit-text-size-adjust:100%}body{background:#fff;color:rgba(0,0,0,0.8);padding:0;margin:0;font-family:"Noto Serif", "DejaVu Serif", serif;font-size:inherit;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,p,blockquote,th,td{margin:0;padding:0}a{background:none;color:#2156a5;text-decoration:underline;line-height:inherit}a:active,a:hover{cursor:pointer;outline:0}a:focus{outline:thin dotted}a:hover,a:focus{color:#1d4b8f}abbr{font-size:0.9em}abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}b,strong{font-weight:bold;line-height:inherit}strong strong{font-weight:400}code,kbd,pre{font-family:"Droid Sans Mono", "DejaVu Sans Mono", monospace;font-size:1em}code{font-weight:400;color:rgba(0,0,0,0.9)}pre{color:rgba(0,0,0,0.9);line-height:1.45;text-rendering:optimizeSpeed;white-space:pre-wrap}dfn{font-style:italic}em,i{font-style:italic;line-height:inherit}em em{font-style:normal}hr{border:solid #dddddf;border-width:1px 0 0;clear:both;height:0;margin:1.25em 0 1.1875em}mark{background:#ff0;color:#000}p{line-height:1.6;margin-bottom:1.25rem;text-rendering:optimizeLegibility}q{quotes:"\201C" "\201D" "\2018" "\2019"}small{font-size:60%;line-height:inherit}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-0.5em}sub{bottom:-0.25em}img,object[type^="image/"],svg{display:inline-block;height:auto;max-width:100%;vertical-align:middle}img{border:0;-ms-interpolation-mode:bicubic}object{max-width:100%}svg:not(:root){overflow:hidden}figure{margin:0}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}.left{float:left !important}.right{float:right !important}.text-left{text-align:left !important}.text-right{text-align:right !important}.text-center{text-align:center !important}.text-justify{text-align:justify !important}.hide{display:none}.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:0.25em}p aside{font-size:.875em;line-height:1.35;font-style:italic}h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans", "DejaVu Sans", sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.2;word-spacing:-0.05em}h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{color:#e99b8f;line-height:0}h1{font-size:2.125em}h2{font-size:1.6875em}h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}h4,h5{font-size:1.125em}h6{font-size:1em}ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}ul,ol{margin-left:1.5em}ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}ul.square{list-style-type:square}ul.circle{list-style-type:circle}ul.disc{list-style-type:disc}ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}dl dt{margin-bottom:.3125em;font-weight:bold}dl dd{margin-bottom:1.25em;margin-left:1.125em}blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,0.85)}@media screen and (min-width: 768px){h1{font-size:2.75em}h2{font-size:2.3125em}h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}h4{font-size:1.4375em}}table{background:#fff;border:1px solid #dedede;border-collapse:collapse;border-spacing:0;margin-bottom:1.25em;word-wrap:normal}table thead,table tfoot{background:#f7f8f7}table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,0.8);text-align:left}table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,0.8)}table tr.even,table tr.alt{background:#f8f8f7}table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}.center{margin-left:auto;margin-right:auto}.stretch{width:100%}.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:"";display:table}.clearfix::after,.float-group::after{clear:both}:not(pre).nobreak{word-wrap:normal}:not(pre).nowrap{white-space:nowrap}:not(pre).pre-wrap{white-space:pre-wrap}:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal !important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}pre>code{display:block}pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}.keyseq{color:rgba(51,51,51,0.8)}kbd{display:inline-block;color:rgba(0,0,0,0.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,0.2),inset 0 0 0 0.1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}.keyseq kbd:first-child{margin-left:0}.keyseq kbd:last-child{margin-right:0}.menuseq,.menuref{color:#000}.menuseq b:not(.caret),.menuref{font-weight:inherit}.menuseq{word-spacing:-0.02em}.menuseq b.caret{font-size:1.25em;line-height:0.8}.menuseq i.caret{font-weight:bold;text-align:center;width:0.45em}b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}b.button::before{content:"[";padding:0 3px 0 2px}b.button::after{content:"]";padding:0 2px 0 3px}p a>code:hover{color:rgba(0,0,0,0.9)}body>div[id]{margin:0 auto;max-width:62.5em;position:relative;padding-left:.9375em;padding-right:.9375em;width:100%}body>div[id]::before,body>div[id]::after,#content #footnotes::before{content:"";display:table;clear:both}#content{margin-top:1.25em;margin-bottom:0.625em}#content::before{content:none}#header>h1:first-child{color:rgba(0,0,0,0.85);margin-top:2.25rem;margin-bottom:0}#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,0.6);display:flex;flex-flow:row wrap}#header .details span:first-child{margin-left:-0.125em}#header .details span.email a{color:rgba(0,0,0,0.85)}#header .details br{display:none}#header .details br+span::before{content:"\00a0\2013\00a0"}#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,0.85)}#header .details br+span#revremark::before{content:"\00a0|\00a0"}#header #revnumber{text-transform:capitalize}#header #revnumber::after{content:"\00a0"}#content>h1:first-child:not([class]){color:rgba(0,0,0,0.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}#toc{border-bottom:1px solid #e7e7e9;padding-bottom:0.5em}#toc>ul{margin-left:0.125em}#toc ul.sectlevel0>li>a{font-style:italic}#toc ul.sectlevel0 ul.sectlevel1{margin:0.5em 0}#toc ul{font-family:"Open Sans", "DejaVu Sans", sans-serif;list-style-type:none}#toc li{line-height:1.3334;margin-top:0.3334em}#toc a{text-decoration:none}#toc a:active{text-decoration:underline}#toctitle{color:#7a2518;font-size:1.2em}@media screen and (min-width: 768px){#toctitle{font-size:1.375em}body.toc2{padding-left:15em;padding-right:0}#toc.toc2{margin-top:0 !important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0 !important;border-bottom-width:0 !important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}#toc.toc2>ul{font-size:.9em;margin-bottom:0}#toc.toc2 ul ul{margin-left:0;padding-left:1em}#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:0.5em}body.toc2.toc-right{padding-left:0;padding-right:15em}body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}@media screen and (min-width: 1280px){body.toc2{padding-left:20em;padding-right:0}#toc.toc2{width:20em}#toc.toc2 #toctitle{font-size:1.375em}#toc.toc2>ul{font-size:0.95em}#toc.toc2 ul ul{padding-left:1.25em}body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}#content #toc>:first-child{margin-top:0}#content #toc>:last-child{margin-bottom:0}#footer{max-width:none;background:#025d8c;padding:1.25em}#footer-text{color:rgba(255,255,255,0.8);line-height:1.44}.sect1{padding-bottom:0.625em}@media screen and (min-width: 768px){#content{margin-bottom:1.25em}.sect1{padding-bottom:1.25em}}.sect1:last-child{padding-bottom:0}.sect1+.sect1{border-top:1px solid #e7e7e9}#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none !important;visibility:hidden;text-align:center;font-weight:400}#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:0.1em}#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}details{margin-left:1.25rem}details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}details>summary::-webkit-details-marker{display:none}details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif", "DejaVu Serif", serif;font-size:1rem;font-style:italic}table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,0.85)}.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}.admonitionblock>table td.icon{text-align:center;width:80px}.admonitionblock>table td.icon img{max-width:none}.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans", "DejaVu Sans", sans-serif;text-transform:uppercase}.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,0.6);word-wrap:anywhere}.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}.exampleblock>.content{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#fffef7;border-radius:4px;box-shadow:0 1px 4px #e0e0dc}.exampleblock>.content>:first-child{margin-top:0}.exampleblock>.content>:last-child{margin-bottom:0}.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}.sidebarblock>:first-child{margin-top:0}.sidebarblock>:last-child{margin-bottom:0}.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:0.8125em}@media screen and (min-width: 768px){.literalblock pre,.listingblock>.content>pre{font-size:0.90625em}}@media screen and (min-width: 1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,0.9)}.listingblock>.content{position:relative}.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:0.5}.listingblock:hover code[data-lang]::before{display:block}.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:0.5}.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}.listingblock pre.highlightjs{padding:0}.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}.listingblock pre.prettyprint{border-width:0}.prettyprint{background:#f7f7f8}pre.prettyprint .linenums{line-height:1.45;margin-left:2em}pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}pre.prettyprint li code[data-lang]::before{opacity:1}pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}table.linenotable td.code{padding-left:0.75em}table.linenotable td.linenos{width:0.01%}table.linenotable td.linenos,pre.pygments .linenos,pre.rouge .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}pre.pygments span.linenos,pre.rouge span.linenos{display:inline-block;margin-right:0.75em}.quoteblock{margin:0 1em 1.25em 1.5em;display:table}.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:0.75em}.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,0.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}.quoteblock blockquote{margin:0;padding:0;border:0}.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,0.1)}.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}.verseblock{margin:0 1em 1.25em}.verseblock pre{font-family:"Open Sans", "DejaVu Sans", sans-serif;font-size:1.15rem;color:rgba(0,0,0,0.85);font-weight:300;text-rendering:optimizeLegibility}.verseblock pre strong{font-weight:400}.verseblock .attribution{margin-top:1.25rem;margin-left:0.5ex}.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}.quoteblock .attribution br,.verseblock .attribution br{display:none}.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,0.6)}.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}.quoteblock.abstract{margin:0 1em 1.25em;display:block}.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:0.25em solid #dddddf}.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}p.tableblock:last-child{margin-bottom:0}td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}td.tableblock>.content>:last-child{margin-bottom:-1.25em}table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}table.grid-all>*>tr>*{border-width:1px}table.grid-cols>*>tr>*{border-width:0 1px}table.grid-rows>*>tr>*{border-width:1px 0}table.frame-all{border-width:1px}table.frame-ends{border-width:1px 0}table.frame-sides{border-width:0 1px}table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}th.halign-left,td.halign-left{text-align:left}th.halign-right,td.halign-right{text-align:right}th.halign-center,td.halign-center{text-align:center}th.valign-top,td.valign-top{vertical-align:top}th.valign-bottom,td.valign-bottom{vertical-align:bottom}th.valign-middle,td.valign-middle{vertical-align:middle}table thead th,table tfoot th{font-weight:bold}tbody tr th{background:#f7f8f7}tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,0.8);font-weight:bold}p.tableblock>code:only-child{background:none;padding:0}p.tableblock{font-size:1em}ol{margin-left:1.75em}ul li ol{margin-left:1.5em}dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:0.625em}ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:0.625em}ul.unstyled,ol.unstyled{margin-left:0}li>p:empty:only-child::before{content:"";display:inline-block}ul.checklist>li>p:first-child{margin-left:-1em}ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:0.125em}ul.checklist>li>p:first-child>input[type=checkbox]:first-child{font:inherit;margin:0 .25em 0 0;padding:0}ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 0.625em -1.25em}ul.inline>li{margin-left:1.25em}.unstyled dl dt{font-weight:400;font-style:normal}ol.arabic{list-style-type:decimal}ol.decimal{list-style-type:decimal-leading-zero}ol.loweralpha{list-style-type:lower-alpha}ol.upperalpha{list-style-type:upper-alpha}ol.lowerroman{list-style-type:lower-roman}ol.upperroman{list-style-type:upper-roman}ol.lowergreek{list-style-type:lower-greek}.hdlist>table,.colist>table{border:0;background:none}.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}td.hdlist1,td.hdlist2{vertical-align:top;padding:0 0.625em}td.hdlist1{font-weight:bold;padding-bottom:1.25em}td.hdlist2{word-wrap:anywhere}.literalblock+.colist,.listingblock+.colist{margin-top:-0.5em}.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}.colist td:not([class]):first-child img{max-width:none}.colist td:not([class]):last-child{padding:0.25em 0}.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}.imageblock.left{margin:0.25em 0.625em 1.25em 0}.imageblock.right{margin:0.25em 0 1.25em 0.625em}.imageblock>.title{margin-bottom:0}.imageblock.thumb,.imageblock.th{border-width:6px}.imageblock.thumb>.title,.imageblock.th>.title{padding:0 0.125em}.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}.image.left{margin-right:0.625em}.image.right{margin-left:0.625em}a.image{text-decoration:none;display:inline-block}a.image object{pointer-events:none}sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}sup.footnote a,sup.footnoteref a{text-decoration:none}sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:0.625em}#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:0.2em}#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}#footnotes .footnote:last-of-type{margin-bottom:0}#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:0.75em 0}div.page-break{display:none}div.unbreakable{page-break-inside:avoid}.big{font-size:larger}.small{font-size:smaller}.underline{text-decoration:underline}.overline{text-decoration:overline}.line-through{text-decoration:line-through}.aqua{color:#00bfbf}.aqua-background{background:#00fafa}.black{color:#000}.black-background{background:#000}.blue{color:#0000bf}.blue-background{background:#0000fa}.fuchsia{color:#bf00bf}.fuchsia-background{background:#fa00fa}.gray{color:#606060}.gray-background{background:#7d7d7d}.green{color:#006000}.green-background{background:#007d00}.lime{color:#00bf00}.lime-background{background:#00fa00}.maroon{color:#600000}.maroon-background{background:#7d0000}.navy{color:#000060}.navy-background{background:#00007d}.olive{color:#606000}.olive-background{background:#7d7d00}.purple{color:#600060}.purple-background{background:#7d007d}.red{color:#bf0000}.red-background{background:#fa0000}.silver{color:#909090}.silver-background{background:#bcbcbc}.teal{color:#006060}.teal-background{background:#007d7d}.white{color:#bfbfbf}.white-background{background:#fafafa}.yellow{color:#bfbf00}.yellow-background{background:#fafa00}span.icon>.fa{cursor:default}a span.icon>.fa{cursor:inherit}.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,0.5);cursor:default}.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,0.8);color:#111}.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}.conum[data-value]{display:inline-block;color:#fff !important;background:rgba(0,0,0,0.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans", "DejaVu Sans", sans-serif;font-style:normal;font-weight:bold}.conum[data-value] *{color:#fff !important}.conum[data-value]+b{display:none}.conum[data-value]::after{content:attr(data-value)}pre .conum[data-value]{position:relative;top:-0.125em}b.conum *{color:inherit !important}.conum:not([data-value]):empty{display:none}dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}h1,h2,p,td.content,span.alt,summary{letter-spacing:-0.01em}p strong,td.content strong,div.footnote strong{letter-spacing:-0.005em}p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}.print-only{display:none !important}@page{margin:1.25cm 0.75cm}@media print{*{box-shadow:none !important;text-shadow:none !important}html{font-size:80%}a{color:inherit !important;text-decoration:underline !important}a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none !important}a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:0.25em}abbr[title]{border-bottom:1px dotted}abbr[title]::after{content:" (" attr(title) ")"}pre,blockquote,tr,img,object,svg{page-break-inside:avoid}thead{display:table-header-group}p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}body>div[id]{max-width:none}#toc,.sidebarblock,.exampleblock>.content{background:none !important}#toc{border-bottom:1px solid #dddddf !important;padding-bottom:0 !important}body.book #header{text-align:center}body.book #header>h1:first-child{border:0 !important;margin:2.5em 0 1em}body.book #header .details{border:0 !important;display:block;padding:0 !important}body.book #header .details span:first-child{margin-left:0 !important}body.book #header .details br{display:block}body.book #header .details br+span::before{content:none !important}body.book #toc{border:0 !important;text-align:left !important;padding:0 !important;margin:0 !important}body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}.listingblock code[data-lang]::before{display:block}div.page-break{display:block;page-break-after:always}#footer{padding:0 0.9375em}.hide-on-print{display:none !important}.print-only{display:block !important}.hide-for-print{display:none !important}.show-for-print{display:inherit !important}}@media amzn-kf8, print{#header>h1:first-child{margin-top:1.25rem}.sect1{padding:0 !important}.sect1+.sect1{border:0}#footer{background:none}#footer-text{color:rgba(0,0,0,0.6);font-size:0.9em}}@media amzn-kf8{body>div[id]{padding:0}}body{padding:0;margin:0;margin-top:70px !important}.container{position:relative;z-index:1;padding-top:50px;min-height:100%}.container p{font-family:sans-serif;font-size:1.2em}nav{position:fixed;z-index:9999;left:0;right:0;top:0;height:70px;padding:0 1.5em;background-color:#025d8c;font-family:sans-serif;line-height:70px}nav .logo{width:50px;vertical-align:middle}nav .nav-menu{position:absolute;right:0.3em;top:0;padding:0;margin:0;list-style:none}nav .nav-item{display:inline-block}nav .nav-item>a{display:inline-block;padding:0 2.5em;line-height:70px;color:#fff;text-decoration:none}nav .dropdown{position:relative}nav .dropdown a::after{content:"";display:inline-block;margin-left:0.5em;vertical-align:middle;border-top:0.3em solid #fff;border-right:0.3em solid transparent;border-left:0.3em solid transparent}nav .dropdown.show a::after{transform:rotate(180deg)}nav .dropdown-menu{display:none;position:absolute;left:0;right:0;top:100%;padding:0.5em 0;margin-top:-0.5em;border:1px solid rgba(0,0,0,0.3);border-radius:0.5em;background-color:#fff;width:max-content}nav .dropdown-menu-left{left:auto;right:0}nav .dropdown.show .dropdown-menu{display:block}nav .dropdown-div{display:block;padding:0.4em 0;line-height:4em}nav .dropdown-div a::after{content:none;margin-left:0;border-top:0;border-right:0;border-left:0}nav .dropdown-item{display:block;padding:0 1.5em;font-size:0.875em;color:#000;line-height:1.6em;text-decoration:none}nav .btn-hamburger{display:none;position:absolute;right:1.5em;top:50%;background-color:transparent;border:0;cursor:pointer;outline:none;transform:translateY(-50%)}nav .btn-hamburger span{display:block;width:30px;height:4px;background-color:#fff;margin:6px;border-radius:2px;transition:0.3s ease-in-out}nav .btn-hamburger span:nth-child(4),nav .btn-hamburger span:nth-child(5){position:absolute;top:10px;opacity:0.5}nav .btn-hamburger span:nth-child(4){transform:rotate(45deg) scale(0)}nav .btn-hamburger span:nth-child(5){transform:rotate(-45deg) scale(0)}nav.opened .btn-hamburger span:nth-child(4){opacity:1;transform:rotate(45deg) scale(1)}nav.opened .btn-hamburger span:nth-child(5){opacity:1;transform:rotate(-45deg) scale(1)}nav.opened .btn-hamburger span:nth-child(1),nav.opened .btn-hamburger span:nth-child(2),nav.opened .btn-hamburger span:nth-child(3){opacity:0}@media screen and (max-width: 768px){nav .nav-menu{position:fixed;left:0;right:0;top:70px;bottom:100%;display:flex;flex-direction:column;justify-content:start;background-color:#363d4e;transition:bottom 0.5s ease-in-out;overflow:hidden}nav.opened .nav-menu{bottom:0}nav .nav-item>a{display:block}nav .dropdown-menu{position:relative;top:0;margin:0 1.5em}nav .btn-hamburger{display:block}}@media screen{div.narrow{max-width:1080px;margin:0 auto !important;margin-top:70px auto !important;float:none !important}#toc.toc2{margin-top:70px !important}}

</style>
<!-- docinfo -->
</head>
<body class="book toc2 toc-left">
    <div id="wrap">
      <script src="/js/versions.js"></script>
      <script src="/js/nav.js"></script>
      <script>
        document.open();
        document.write(buildNavigation());
        addNavbarListeners();
        document.close();
      </script>
    </div>
<div id="header">
<h1>Managing Content</h1>
<div class="details">
<span id="revnumber">version 6.3 (unsupported),</span>
<span id="revdate">published Apr 24 2023</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#Introduction_to_Content_Management_content-management">1. Introduction to Content Management</a></li>
<li><a href="#Content_Types_Overview_content-management">2. Content Types Overview</a></li>
<li><a href="#Managing_Red_Hat_Subscriptions_content-management">3. Managing Red Hat Subscriptions</a>
<ul class="sectlevel2">
<li><a href="#Importing_a_Red_Hat_Subscription_Manifest_into_Server_content-management">3.1. Importing a Red&#160;Hat Subscription Manifest into orcharhino&#160;Server</a></li>
<li><a href="#Locating_a_Red_Hat_Subscription_content-management">3.2. Locating a Red Hat Subscription</a></li>
<li><a href="#Adding_Red_Hat_Subscriptions_to_Subscription_Allocations_content-management">3.3. Adding Red Hat Subscriptions to Subscription Allocations</a></li>
<li><a href="#Removing_Red_Hat_Subscriptions_from_Subscription_Allocations_content-management">3.4. Removing Red Hat Subscriptions from Subscription Allocations</a></li>
<li><a href="#Updating_and_Refreshing_Red_Hat_Subscription_Manifests_content-management">3.5. Updating and Refreshing Red&#160;Hat Subscription Manifests</a></li>
<li><a href="#Attaching_Red_Hat_Subscriptions_to_Content_Hosts_content-management">3.6. Attaching Red Hat Subscriptions to Content Hosts</a></li>
<li><a href="#Updating_Red_Hat_Subscriptions_on_Multiple_Hosts_content-management">3.7. Updating Red Hat Subscriptions on Multiple Hosts</a></li>
</ul>
</li>
<li><a href="#Importing_Content_content-management">4. Importing Content</a>
<ul class="sectlevel2">
<li><a href="#Products_and_Repositories_content-management">4.1. Products and Repositories in orcharhino</a></li>
<li><a href="#Importing_Custom_SSL_Certificates_content-management">4.2. Importing Custom SSL Certificates</a></li>
<li><a href="#Creating_a_Custom_Product_content-management">4.3. Creating a Custom Product</a></li>
<li><a href="#Adding_Custom_RPM_Repositories_content-management">4.4. Adding Custom RPM Repositories</a></li>
<li><a href="#Adding_Custom_RPM_Repositories_for_AlmaLinux_9_content-management">4.5. Adding Custom RPM Repositories for AlmaLinux 9</a></li>
<li><a href="#Adding_Custom_RPM_Repositories_for_AlmaLinux_8_content-management">4.6. Adding Custom RPM Repositories for AlmaLinux 8</a></li>
<li><a href="#Adding_Custom_RPM_Repositories_for_CentOS_Stream_9_content-management">4.7. Adding Custom RPM Repositories for CentOS Stream 9</a></li>
<li><a href="#Adding_Custom_RPM_Repositories_for_Oracle_Linux_9_content-management">4.8. Adding Custom RPM Repositories for Oracle Linux 9</a></li>
<li><a href="#Adding_Custom_RPM_Repositories_for_Oracle_Linux_8_content-management">4.9. Adding Custom RPM Repositories for Oracle Linux 8</a></li>
<li><a href="#Adding_Custom_RPM_Repositories_for_Rocky_Linux_9_content-management">4.10. Adding Custom RPM Repositories for Rocky Linux 9</a></li>
<li><a href="#Adding_Custom_RPM_Repositories_for_Rocky_Linux_8_content-management">4.11. Adding Custom RPM Repositories for Rocky Linux 8</a></li>
<li><a href="#Extracting_GPG_Public_Key_Fingerprints_from_a_Release_Files_content-management">4.12. Extracting GPG Public Key Fingerprints from a Release Files</a></li>
<li><a href="#Adding_Custom_DEB_Repositories_content-management">4.13. Adding DEB Repositories</a></li>
<li><a href="#Adding_Custom_DEB_Repository_Example_for_Debian_11_content-management">4.14. Adding DEB Repository Example for Debian 11</a></li>
<li><a href="#Adding_Custom_DEB_Repository_Example_for_Ubuntu_22_04_content-management">4.15. Adding DEB Repository Example for Ubuntu 22.04</a></li>
<li><a href="#Changing_the_Repository_Sets_Status_for-a-Host-in_orcharhino_content-management">4.16. Changing the Repository Sets Status for a Host in orcharhino</a></li>
<li><a href="#Enabling_Red_Hat_Repositories_content-management">4.17. Enabling Red&#160;Hat Repositories</a></li>
<li><a href="#Synchronizing_Repositories_content-management">4.18. Synchronizing Repositories</a></li>
<li><a href="#Synchronizing_All_Repositories_in_an_Organization_content-management">4.19. Synchronizing All Repositories in an Organization</a></li>
<li><a href="#Download_Policies_Overview_content-management">4.20. Download Policies Overview</a></li>
<li><a href="#Changing_the_Default_Download_Policy">4.21. Changing the Default Download Policy</a></li>
<li><a href="#changing_the_download_policy_for_a_repository_content-management">4.22. Changing the Download Policy for a Repository</a></li>
<li><a href="#Mirroring_Policies_Overview_content-management">4.23. Mirroring Policies Overview</a></li>
<li><a href="#Changing_the_Mirroring_Policy_for_a_Repository_content-management">4.24. Changing the Mirroring Policy for a Repository</a></li>
<li><a href="#Uploading_Content_to_custom_rpm_Repositories_content-management">4.25. Uploading Content to Custom RPM Repositories</a></li>
<li><a href="#configuring-selinux-to-permit-content-synchronization-on-custom-ports_content-management">4.26. Configuring SELinux to Permit Content Synchronization on Custom Ports</a></li>
<li><a href="#Recovering_a_Corrupted_Repository_content-management">4.27. Recovering a Corrupted Repository</a></li>
<li><a href="#Adding_an_HTTP_Proxy_content-management">4.28. Adding an HTTP Proxy</a></li>
<li><a href="#Changing_the_HTTP_Proxy_Policy_for_a_Product_content-management">4.29. Changing the HTTP Proxy Policy for a Product</a></li>
<li><a href="#Changing_the_HTTP_Proxy_Policy_for_a_Repository_content-management">4.30. Changing the HTTP Proxy Policy for a Repository</a></li>
<li><a href="#Creating_a_Sync_Plan_content-management">4.31. Creating a Sync Plan</a></li>
<li><a href="#Assigning_a_Sync_Plan_to_a_Product_content-management">4.32. Assigning a Sync Plan to a Product</a></li>
<li><a href="#Assigning_a_Sync_Plan_to_Multiple_Products_content-management">4.33. Assigning a Sync Plan to Multiple Products</a></li>
<li><a href="#Limiting_Synchronization_Concurrency_content-management">4.34. Limiting Synchronization Concurrency</a></li>
<li><a href="#Importing_a_Custom_GPG_Key_content-management">4.35. Importing a Custom GPG Key</a></li>
<li><a href="#Restricting_Custom_Repositories_to_RHEL_9_content-management">4.36. Restricting Custom Repositories to RHEL 9 in orcharhino</a></li>
</ul>
</li>
<li><a href="#Creating_an_Application_Life_Cycle_content-management">5. Managing Application Life Cycles</a>
<ul class="sectlevel2">
<li><a href="#introduction_to_application_life_cycle_content-management">5.1. Introduction to Application Life Cycle</a></li>
<li><a href="#Content_Promotion_across_the_Application_Life_Cycle_content-management">5.2. Content Promotion across the Application Life Cycle</a></li>
<li><a href="#Creating_a_Life_Cycle_Environment_Path_content-management">5.3. Creating a Life Cycle Environment Path</a></li>
<li><a href="#Removing_Life_Cycle_Environments_from_Server_content-management">5.4. Removing Life Cycle Environments from orcharhino&#160;Server</a></li>
<li><a href="#Removing_Life_Cycle_Environments_from_smart_proxy_content-management">5.5. Removing Life Cycle Environments from orcharhino&#160;Proxy</a></li>
<li><a href="#Adding_Life_Cycle_Environments_content-management">5.6. Adding Life Cycle Environments to orcharhino&#160;Proxies</a></li>
</ul>
</li>
<li><a href="#Managing_Content_Views_content-management">6. Managing Content Views</a>
<ul class="sectlevel2">
<li><a href="#Creating_a_Content_View_content-management">6.1. Creating a Content View</a></li>
<li><a href="#Viewing_Module_Streams_content-management">6.2. Viewing Module Streams</a></li>
<li><a href="#Promoting_a_Content_View_content-management">6.3. Promoting a Content View</a></li>
<li><a href="#Promoting_a_Content_View_Across_All_Life_Cycle_Environments_within_an_Organization_content-management">6.4. Promoting a Content View Across All Life Cycle Environments within an Organization</a></li>
<li><a href="#Composite_Content_Views_Overview_content-management">6.5. Composite Content Views Overview</a></li>
<li><a href="#Creating_a_Composite_Content_View_content-management">6.6. Creating a Composite Content View</a></li>
<li><a href="#Content_Filter_Overview_content-management">6.7. Content Filter Overview</a></li>
<li><a href="#Resolving_Package_Dependencies_content-management">6.8. Resolving Package Dependencies</a></li>
<li><a href="#Content_Filter_Examples_content-management">6.9. Content Filter Examples</a></li>
<li><a href="#Creating_a_Content_Filter_for_Yum_Content_content-management">6.10. Creating a Content Filter for Yum Content</a></li>
<li><a href="#Creating_a_Content_Filter_for_APT_Content_content-management">6.11. Creating a Content Filter for APT Content</a></li>
<li><a href="#Deleting_Multiple_Content_View_Versions_content-management">6.12. Deleting Multiple Content View Versions</a></li>
</ul>
</li>
<li><a href="#Synchronizing_Content_Between_Servers_content-management">7. Synchronizing Content Between orcharhino&#160;Servers</a>
<ul class="sectlevel2">
<li><a href="#how-to-synchronize-content-using-export-and-import_content-management">7.1. How to Synchronize Content Using Export and Import</a></li>
<li><a href="#Synchronizing_a_Custom_Repository_content-management">7.2. Synchronizing a Custom Repository</a></li>
<li><a href="#Exporting_the_Library_Environment_content-management">7.3. Exporting the Library Environment</a></li>
<li><a href="#Exporting_the_Library_Environment_in_a_Syncable_Format_content-management">7.4. Exporting the Library Environment in a Syncable Format</a></li>
<li><a href="#Exporting_Library_Incrementally_content-management">7.5. Exporting the Library Environment Incrementally</a></li>
<li><a href="#Exporting_the_Library_Environment_Incrementally_in_a_Syncable_Format_content-management">7.6. Exporting the Library Environment Incrementally in a Syncable Format</a></li>
<li><a href="#Exporting_a_Content_View_Version_content-management">7.7. Exporting a Content View Version</a></li>
<li><a href="#Exporting_a_Content_View_Version_in_a_Syncable_Format_content-management">7.8. Exporting a Content View Version in a Syncable Format</a></li>
<li><a href="#Exporting_a_Content_View_Version_Incrementally_content-management">7.9. Exporting a Content View Version Incrementally</a></li>
<li><a href="#Exporting_a_Content_View_Version_Incrementally_in_a_Syncable_Format_content-management">7.10. Exporting a Content View Version Incrementally in a Syncable Format</a></li>
<li><a href="#Exporting_a_Repository_content-management">7.11. Exporting a Repository</a></li>
<li><a href="#Exporting_a_Repository_in_a_Syncable_Format_content-management">7.12. Exporting a Repository in a Syncable Format</a></li>
<li><a href="#Exporting_Repository_Incrementally_content-management">7.13. Exporting a Repository Incrementally</a></li>
<li><a href="#Exporting_a_Repository_Incrementally_in_a_Syncable_Format_content-management">7.14. Exporting a Repository Incrementally in a Syncable Format</a></li>
<li><a href="#Keeping_Track_of_Your_Exports_content-management">7.15. Keeping Track of Your Exports</a></li>
<li><a href="#Importing_into_the_Library_Environment_content-management">7.16. Importing into the Library Environment</a></li>
<li><a href="#Importing_a_Content_View_Version_content-management">7.17. Importing a Content View Version</a></li>
<li><a href="#Importing_a_Repository_content-management">7.18. Importing a Repository</a></li>
<li><a href="#Exporting_and_Importing_Content_Using_Hammer_CLI_Cheat_Sheet_content-management">7.19. Exporting and Importing Content using Hammer CLI Cheat Sheet</a></li>
</ul>
</li>
<li><a href="#Managing_Activation_Keys_content-management">8. Managing Activation Keys</a>
<ul class="sectlevel2">
<li><a href="#Creating_an_Activation_Key_content-management">8.1. Creating an Activation Key</a></li>
<li><a href="#Updating_Subscriptions_Associated_with_an_Activation_Key_content-management">8.2. Updating Subscriptions Associated with an Activation Key</a></li>
<li><a href="#Using_Activation_Keys_for_Host_Registration_content-management">8.3. Using Activation Keys for Host Registration</a></li>
<li><a href="#Enabling_Auto_Attach_content-management">8.4. Enabling Auto-Attach</a></li>
<li><a href="#Setting_the_Service_Level_content-management">8.5. Setting the Service Level</a></li>
</ul>
</li>
<li><a href="#Managing_SUSE_Content_content-management">9. Managing SUSE Content</a>
<ul class="sectlevel2">
<li><a href="#Preparing_SUSE_Installation_Media_content-management">9.1. Preparing SUSE Installation Media</a></li>
<li><a href="#Creating_a_SUSE_Operating_System_content-management">9.2. Creating a SUSE Operating System</a></li>
<li><a href="#Installing_the_SCC_Manager_Plugin_content-management">9.3. Installing the SCC Manager Plug-in</a></li>
<li><a href="#Adding_an_SCC_Account_to_Server_content-management">9.4. Adding an SCC Account to orcharhino</a></li>
<li><a href="#Switching_SCC_Accounts_content-management">9.5. Switching SCC Accounts</a></li>
<li><a href="#Importing_SUSE_Products_content-management">9.6. Importing SUSE Products</a></li>
<li><a href="#Synchronizing_SUSE_Content_content-management">9.7. Synchronizing SUSE Content</a></li>
</ul>
</li>
<li><a href="#Managing_Errata_content-management">10. Managing Errata</a>
<ul class="sectlevel2">
<li><a href="#Inspecting_Available_Errata_content-management">10.1. Inspecting Available Errata</a></li>
<li><a href="#Parameters_Available_for_Errata_Search_content-management">10.2. Parameters Available for Errata Search</a></li>
<li><a href="#Applying_installable_errata_content-management">10.3. Applying Installable Errata</a></li>
<li><a href="#Subscribing_to_Errata_Notifications_content-management">10.4. Subscribing to Errata Notifications</a></li>
<li><a href="#Limitations_to_Repository_Dependency_Resolution_content-management">10.5. Limitations to Repository Dependency Resolution</a></li>
<li><a href="#Creating_a_Content_View_Filter_for_Errata_content-management">10.6. Creating a Content View Filter for Errata</a></li>
<li><a href="#Adding_Errata_To_An_Incremental_Content_View_content-management">10.7. Adding Errata to an Incremental Content View</a></li>
<li><a href="#Applying_Errata_to_Hosts_content-management">10.8. Applying Errata to Hosts</a></li>
<li><a href="#Applying_Errata_to_Multiple_Hosts_content-management">10.9. Applying Errata to Multiple Hosts</a></li>
<li><a href="#Applying_Errata_to_a_Host_Collection_content-management">10.10. Applying Errata to a Host Collection</a></li>
</ul>
</li>
<li><a href="#con_managing-ostree-content_content-management">11. Managing OSTree Content</a>
<ul class="sectlevel2">
<li><a href="#importing-ostree-content_content-management">11.1. Importing OSTree Content</a></li>
<li><a href="#uploading-ostree-content-with-hammer-cli_content-management">11.2. Uploading OSTree Content with Hammer CLI</a></li>
<li><a href="#managing-ostree-content-with-content-views_content-management">11.3. Managing OSTree Content with Content Views</a></li>
</ul>
</li>
<li><a href="#Managing_Container_Images_content-management">12. Managing Container Images</a>
<ul class="sectlevel2">
<li><a href="#Importing_Container_Images_content-management">12.1. Importing Container Images</a></li>
<li><a href="#Managing_Container_Name_Patterns_content-management">12.2. Managing Container Name Patterns</a></li>
<li><a href="#Managing_Container_Registry_Authentication_content-management">12.3. Managing Container Registry Authentication</a></li>
<li><a href="#Configuring_podman_to_trust_the_CA_content-management">12.4. Configuring Podman and Docker to trust the Certificate Authority</a></li>
<li><a href="#Using_Container_Registries_content-management">12.5. Using Container Registries</a></li>
</ul>
</li>
<li><a href="#Managing_ISO_Images_content-management">13. Managing ISO Images</a>
<ul class="sectlevel2">
<li><a href="#Importing_ISO_Images_from_Red_Hat_content-management">13.1. Importing ISO Images from Red Hat</a></li>
<li><a href="#Importing_Individual_ISO_Images_and_Files_content-management">13.2. Importing Individual ISO Images and Files</a></li>
</ul>
</li>
<li><a href="#Managing_Custom_File_Type_Content_content-management">14. Managing Custom File Type Content</a>
<ul class="sectlevel2">
<li><a href="#Creating_a_Local_Source_for_a_Custom_File_Type_Repository_content-management">14.1. Creating a Local Source for a Custom File Type Repository</a></li>
<li><a href="#Creating_a_Remote_Source_for_a_Custom_File_Type_Repository_content-management">14.2. Creating a Remote Source for a Custom File Type Repository</a></li>
<li><a href="#Creating_a_Custom_File_Type_Repository_content-management">14.3. Creating a Custom File Type Repository</a></li>
<li><a href="#Uploading_Files_To_a_Custom_File_Type_Repository_content-management">14.4. Uploading Files To a Custom File Type Repository</a></li>
<li><a href="#Downloading_Files_to_a_Host_from_a_Custom_File_Type_Repository_content-management">14.5. Downloading Files to a Host From a Custom File Type Repository</a></li>
</ul>
</li>
<li><a href="#Using_an_NFS_Share_for_Content_Storage_content-management">Appendix A: Using an NFS Share for Content Storage</a></li>
<li><a href="#_configuring_inter_server_synchronization_iss_in_orcharhino">Appendix B: Configuring Inter-Server Synchronization (ISS) in orcharhino</a>
<ul class="sectlevel2">
<li><a href="#how-to-configure-inter-server-sync_content-management">B.1. How to Configure Inter-Server Synchronization</a></li>
<li><a href="#configuring-server-to-sync-content-using-exports_content-management">B.2. Configuring orcharhino Server to Synchronize Content Using Exports</a></li>
<li><a href="#configuring-server-to-synchronize-content-over-a-network_content-management">B.3. Configuring orcharhino Server to Synchronize Content over a Network</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="Introduction_to_Content_Management_content-management"><a class="anchor" href="#Introduction_to_Content_Management_content-management"></a>1. Introduction to Content Management</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the context of orcharhino, <em>content</em> is defined as the software installed on systems.
This includes, but is not limited to, the base operating system, middleware services, and end-user applications.
With orcharhino, you can manage the various types of content at every stage of the software life cycle.</p>
</div>
<div class="paragraph">
<p>orcharhino manages the following content:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Red Hat Subscription management</dt>
<dd>
<p>This provides organizations with a method to store Red Hat content and organize it in various ways.</p>
</dd>
<dt class="hdlist1">SUSE Subscription management</dt>
<dd>
<p>This provides organizations with a method to store SUSE content and organize it in various ways.
Note that this requires the Foreman SCC Manager plug-in.
For more information, see <a href="#Managing_SUSE_Content_content-management">Managing SUSE Content</a>.</p>
</dd>
<dt class="hdlist1">Content management</dt>
<dd>
<p>This provides organizations with a method to store APT and YUM content and organize it in various ways.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Content_Types_Overview_content-management"><a class="anchor" href="#Content_Types_Overview_content-management"></a>2. Content Types Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With orcharhino, you can manage the following content types:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">RPM Packages</dt>
<dd>
<p>Import RPM packages from any repository, for example from Red Hat, SUSE, and custom repositories.
orcharhino&#160;Server downloads the RPM files and stores them locally.
You can use these repositories and their RPM files in Content Views.</p>
</dd>
<dt class="hdlist1">DEB Packages</dt>
<dd>
<p>Import DEB packages from repositories, for example for Debian or Ubuntu.
You can also import single DEB packages or synchronize custom repositories.
You can use these repositories and their DEB files in Content Views.</p>
</dd>
<dt class="hdlist1">Provisioning Templates</dt>
<dd>
<p>You can provision hosts running EL based on synchronized content and Debian, Ubuntu, or SUSE Linux Enterprise Server based on local installation media.
orcharhino contains predefined AutoYaST, kickstart, and Preseed templates as well as the ability to create your own, which are used to provision systems and customize the installation.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>You can also manage other types of custom content in orcharhino.
For example:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ISO and KVM Images</dt>
<dd>
<p>Download and manage media for installation and provisioning.
For example, orcharhino downloads, stores, and manages ISO images and guest images for specific Red&#160;Hat Enterprise Linux and non-Red Hat operating systems.</p>
</dd>
<dt class="hdlist1">OSTree</dt>
<dd>
<p>You can import OSTree branches and publish this content to an HTTP location for consumption by OSTree clients.</p>
</dd>
<dt class="hdlist1">Custom File Type</dt>
<dd>
<p>You can manage custom content for any type of file you require, such as SSL certificates and OVAL files.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Managing_Red_Hat_Subscriptions_content-management"><a class="anchor" href="#Managing_Red_Hat_Subscriptions_content-management"></a>3. Managing Red Hat Subscriptions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>orcharhino can import content from the Red&#160;Hat Content Delivery Network (CDN).
orcharhino requires a Red&#160;Hat Subscription Manifest to find, access, and download content from the corresponding repositories.
You must have a Red&#160;Hat Subscription Manifest containing a subscription allocation for each organization on orcharhino&#160;Server.
All subscription information is available in your Red Hat Customer Portal account.</p>
</div>
<div class="paragraph">
<p>Before you can complete the tasks in this chapter, you must create a Red&#160;Hat Subscription Manifest in the Customer Portal.</p>
</div>
<div class="paragraph">
<p>Use this chapter to import a Red&#160;Hat Subscription Manifest and manage the manifest within the orcharhino management UI.</p>
</div>
<div class="paragraph">
<div class="title">Subscription Allocations and Organizations</div>
<p>You can manage more than one organization if you have more than one subscription allocation.
orcharhino requires a single allocation for each organization configured in orcharhino&#160;Server.
The advantage of this is that each organization maintains separate subscriptions so that you can support multiple organizations, each with their own Red Hat accounts.</p>
</div>
<div class="paragraph">
<div class="title">Future-Dated subscriptions</div>
<p>You can use future-dated subscriptions in a subscription allocation.
When you add future-dated subscriptions to content hosts before the expiry date of the existing subscriptions, you can have uninterrupted access to repositories.</p>
</div>
<div class="paragraph">
<p>Manually attach the future-dated subscriptions to your content hosts before the current subscriptions expire.
Do not rely on the auto-attach method because this method is designed for a different purpose and might not work.
For more information, see <a href="#Attaching_Red_Hat_Subscriptions_to_Content_Hosts_content-management">Attaching Red Hat Subscriptions to Content Hosts</a>.</p>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://docs.theforeman.org/3.4/Installing_Server/index-orcharhino.html#configuring-orcharhino-server-to-consume-content-from-a-custom-cdn_orcharhino">Configuring orcharhino&#160;Server to Consume Content from a Custom CDN</a> in <em>Installing orcharhino&#160;Server</em></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="Importing_a_Red_Hat_Subscription_Manifest_into_Server_content-management"><a class="anchor" href="#Importing_a_Red_Hat_Subscription_Manifest_into_Server_content-management"></a>3.1. Importing a Red&#160;Hat Subscription Manifest into orcharhino&#160;Server</h3>
<div class="paragraph">
<p>Use the following procedure to import a Red&#160;Hat Subscription Manifest into orcharhino&#160;Server.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Simple Content Access (SCA) is set on the organization, not the manifest.
Importing a manifest does not change your organization&#8217;s Simple Content Access status.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have a Red&#160;Hat Subscription Manifest file exported from the <a href="https://access.redhat.com">Red&#160;Hat Customer Portal</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, ensure the context is set to the organization you want to use.</p>
</li>
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Subscriptions</strong> and click <strong>Manage Manifest</strong>.</p>
</li>
<li>
<p>In the <strong>Manage Manifest</strong> window, click <strong>Choose File</strong>.</p>
</li>
<li>
<p>Navigate to the location that contains the Red&#160;Hat Subscription Manifest file, then click <strong>Open</strong>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Copy the Red&#160;Hat Subscription Manifest file from your client to orcharhino&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre>$ scp ~/<em>manifest_file</em>.zip root@<em>orcharhino.example.com</em>:~/.</pre>
</div>
</div>
</li>
<li>
<p>Log in to orcharhino&#160;Server as the <code>root</code> user and import the Red&#160;Hat Subscription Manifest file:</p>
<div class="listingblock">
<div class="content">
<pre># hammer subscription upload \
--file ~/<em>manifest_file</em>.zip \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can now enable repositories and import Red Hat content.
For more information, see <a href="https://docs.theforeman.org/3.4/Managing_Content/index-orcharhino.html#Importing_Content_content-management">Importing Content</a> in <em>Managing Content</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Locating_a_Red_Hat_Subscription_content-management"><a class="anchor" href="#Locating_a_Red_Hat_Subscription_content-management"></a>3.2. Locating a Red Hat Subscription</h3>
<div class="paragraph">
<p>When you import a Red&#160;Hat Subscription Manifest into orcharhino&#160;Server, the subscriptions from your manifest are listed in the Subscriptions window.
If you have a high volume of subscriptions, you can filter the results to find a specific subscription.</p>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>You must have a Red&#160;Hat Subscription Manifest file imported to orcharhino&#160;Server.
For more information, see <a href="#Importing_a_Red_Hat_Subscription_Manifest_into_Server_content-management">Importing a Red&#160;Hat Subscription Manifest into orcharhino&#160;Server</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, ensure the context is set to the organization you want to use.</p>
</li>
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Subscriptions</strong>.</p>
</li>
<li>
<p>In the Subscriptions window, click the <strong>Search</strong> field to view the list of search criteria for building your search query.</p>
</li>
<li>
<p>Select search criteria to display further options.</p>
</li>
<li>
<p>When you have built your search query, click the search icon.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For example, if you place your cursor in the <strong>Search</strong> field and select <strong>expires</strong>, then press the space bar, another list appears with the options of placing a <strong>&gt;</strong>, <strong>&lt;</strong>, or <strong>=</strong> character.
If you select <strong>&gt;</strong> and press the space bar, another list of automatic options appears.
You can also enter your own criteria.</p>
</div>
</div>
<div class="sect2">
<h3 id="Adding_Red_Hat_Subscriptions_to_Subscription_Allocations_content-management"><a class="anchor" href="#Adding_Red_Hat_Subscriptions_to_Subscription_Allocations_content-management"></a>3.3. Adding Red Hat Subscriptions to Subscription Allocations</h3>
<div class="paragraph">
<p>Use the following procedure to add Red Hat subscriptions to a subscription allocation in the orcharhino management UI.</p>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>You must have a Red&#160;Hat Subscription Manifest file imported to orcharhino&#160;Server.
For more information, see <a href="#Importing_a_Red_Hat_Subscription_Manifest_into_Server_content-management">Importing a Red&#160;Hat Subscription Manifest into orcharhino&#160;Server</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, ensure the context is set to the organization you want to use.</p>
</li>
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Subscriptions</strong>.</p>
</li>
<li>
<p>In the Subscriptions window, click <strong>Add Subscriptions</strong>.</p>
</li>
<li>
<p>On the row of each subscription you want to add, enter the quantity in the <strong>Quantity to Allocate</strong> column.</p>
</li>
<li>
<p>Click <strong>Submit</strong></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Removing_Red_Hat_Subscriptions_from_Subscription_Allocations_content-management"><a class="anchor" href="#Removing_Red_Hat_Subscriptions_from_Subscription_Allocations_content-management"></a>3.4. Removing Red Hat Subscriptions from Subscription Allocations</h3>
<div class="paragraph">
<p>Use the following procedure to remove Red Hat subscriptions from a subscription allocation in the orcharhino management UI.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Manifests must not be deleted.
If you delete the manifest from the Red Hat Customer Portal or in the orcharhino management UI, all of the entitlements for all of your content hosts will be removed.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>You must have a Red&#160;Hat Subscription Manifest file imported to orcharhino&#160;Server.
For more information, see <a href="#Importing_a_Red_Hat_Subscription_Manifest_into_Server_content-management">Importing a Red&#160;Hat Subscription Manifest into orcharhino&#160;Server</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, ensure the context is set to the organization you want to use.</p>
</li>
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Subscriptions</strong>.</p>
</li>
<li>
<p>On the row of each subscription you want to remove, select the corresponding checkbox.</p>
</li>
<li>
<p>Click <strong>Delete</strong>, and then confirm deletion.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Updating_and_Refreshing_Red_Hat_Subscription_Manifests_content-management"><a class="anchor" href="#Updating_and_Refreshing_Red_Hat_Subscription_Manifests_content-management"></a>3.5. Updating and Refreshing Red&#160;Hat Subscription Manifests</h3>
<div class="paragraph">
<p>Every time that you change a subscription allocation, you must refresh the manifest to reflect these changes.
For example, you must refresh the manifest if you take any of the following actions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Renewing a subscription</p>
</li>
<li>
<p>Adjusting subscription quantities</p>
</li>
<li>
<p>Purchasing additional subscriptions</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can refresh the manifest directly in the orcharhino management UI.
Alternatively, you can import an updated manifest that contains the changes.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, ensure the context is set to the organization you want to use.</p>
</li>
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Subscriptions</strong>.</p>
</li>
<li>
<p>In the Subscriptions window, click <strong>Manage Manifest</strong>.</p>
</li>
<li>
<p>In the Manage Manifest window, click <strong>Refresh</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Attaching_Red_Hat_Subscriptions_to_Content_Hosts_content-management"><a class="anchor" href="#Attaching_Red_Hat_Subscriptions_to_Content_Hosts_content-management"></a>3.6. Attaching Red Hat Subscriptions to Content Hosts</h3>
<div class="paragraph">
<p>Using activation keys is the main method to attach subscriptions to content hosts during the provisioning process.
However, an activation key cannot update an existing host.
If you need to attach new or additional subscriptions, such as future-dated subscriptions, to one host, use the following procedure.</p>
</div>
<div class="paragraph">
<p>For more information about updating multiple hosts, see <a href="#Updating_Red_Hat_Subscriptions_on_Multiple_Hosts_content-management">Updating Red Hat Subscriptions on Multiple Hosts</a>.
For more information about activation keys, see <a href="#Managing_Activation_Keys_content-management">Managing Activation Keys</a>.</p>
</div>
<div class="paragraph">
<div class="title">Smart Management Subscriptions</div>
<p>In orcharhino, you must maintain a Red&#160;Hat Enterprise Linux Smart Management subscription for every Red&#160;Hat Enterprise Linux host that you want to manage.</p>
</div>
<div class="paragraph">
<p>However, you are not required to attach Smart Management subscriptions to each content host.
Smart Management subscriptions cannot attach automatically to content hosts in orcharhino because they are not associated with any product certificates.
Adding a Smart Management subscription to a content host does not provide any content or repository access.
If you want, you can add a Smart Management subscription to a manifest for your own recording or tracking purposes.</p>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>You must have a Red&#160;Hat Subscription Manifest file imported to orcharhino&#160;Server.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, ensure the context is set to the organization you want to use.</p>
</li>
<li>
<p>In the orcharhino management UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong>.</p>
</li>
<li>
<p>On the row of each content host whose subscription you want to change, select the corresponding checkbox.</p>
</li>
<li>
<p>From the <strong>Select Action</strong> list, select <strong>Manage Subscriptions</strong>.</p>
</li>
<li>
<p>Optionally, enter a key and value in the <strong>Search</strong> field to filter the subscriptions displayed.</p>
</li>
<li>
<p>Select the checkbox to the left of the subscriptions that you want to add or remove and click <strong>Add Selected</strong> or <strong>Remove Selected</strong> as required.</p>
</li>
<li>
<p>Click <strong>Done</strong> to save the changes.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Connect to orcharhino&#160;Server as the root user, and then list the available subscriptions:</p>
<div class="listingblock">
<div class="content">
<pre># hammer subscription list \
--organization-id 1</pre>
</div>
</div>
</li>
<li>
<p>Attach a subscription to the host:</p>
<div class="listingblock">
<div class="content">
<pre># hammer host subscription attach \
--host <em>host_name</em> \
--subscription-id <em>subscription_id</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Updating_Red_Hat_Subscriptions_on_Multiple_Hosts_content-management"><a class="anchor" href="#Updating_Red_Hat_Subscriptions_on_Multiple_Hosts_content-management"></a>3.7. Updating Red Hat Subscriptions on Multiple Hosts</h3>
<div class="paragraph">
<p>Use this procedure for post-installation changes to multiple content hosts at the same time.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, ensure the context is set to the organization you want to use.</p>
</li>
<li>
<p>In the orcharhino management UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong>.</p>
</li>
<li>
<p>On the row of each content host whose subscription you want to change, select the corresponding checkbox.</p>
</li>
<li>
<p>From the <strong>Select Action</strong> list, select <strong>Manage Subscriptions</strong>.</p>
</li>
<li>
<p>Optionally, enter a key and value in the <strong>Search</strong> field to filter the subscriptions displayed.</p>
</li>
<li>
<p>Select the checkbox to the left of the subscriptions to be added or removed and click <strong>Add Selected</strong> or <strong>Remove Selected</strong> as required.</p>
</li>
<li>
<p>Click <strong>Done</strong> to save the changes.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Importing_Content_content-management"><a class="anchor" href="#Importing_Content_content-management"></a>4. Importing Content</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter outlines how you can import different types of custom content to orcharhino.
If you want to import RPM or DEB packages, Files, or Puppet Modules to orcharhino, it is done with largely the same procedures in this chapter.</p>
</div>
<div class="paragraph">
<p>For example, you can use the following chapters for information on specific types of custom content but the underlying procedures are the same:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#Managing_ISO_Images_content-management">Managing ISO Images</a></p>
</li>
<li>
<p><a href="#Managing_Custom_File_Type_Content_content-management">Managing Custom File Type Content</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="Products_and_Repositories_content-management"><a class="anchor" href="#Products_and_Repositories_content-management"></a>4.1. Products and Repositories in orcharhino</h3>
<div class="paragraph">
<p>You can organize content in Products.
Products bundle an arbitrary number of repositories.</p>
</div>
<div class="paragraph">
<p>Custom Products require a subscription for hosts to access.
orcharhino creates a subscription for each custom product you create.</p>
</div>
</div>
<div class="sect2">
<h3 id="Importing_Custom_SSL_Certificates_content-management"><a class="anchor" href="#Importing_Custom_SSL_Certificates_content-management"></a>4.2. Importing Custom SSL Certificates</h3>
<div class="paragraph">
<p>Before you synchronize custom content from an external source, you might need to import SSL certificates into your custom product.
This might include client certs and keys or CA certificates for the upstream repositories you want to synchronize.</p>
</div>
<div class="paragraph">
<p>If you require SSL certificates and keys to download RPMs, you can add them to orcharhino.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the orcharhino management UI, see the <a href="#cli-importing-custom-ssl-certificates_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Content Credentials</strong>.
In the Content Credentials window, click <strong>Create Content Credential</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for your SSL certificate.</p>
</li>
<li>
<p>From the <strong>Type</strong> list, select <strong>SSL Certificate</strong>.</p>
</li>
<li>
<p>In the <strong>Content Credentials Content</strong> field, paste your SSL certificate, or click <strong>Browse</strong> to upload your SSL certificate.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
<div id="cli-importing-custom-ssl-certificates_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Copy the SSL certificate to your orcharhino&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ scp <em>My_SSL_Certificate</em> root@orcharhino.example.com:~/.</pre>
</div>
</div>
<div class="paragraph">
<p>Or download the SSL certificate to your orcharhino&#160;Server from an online source:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ wget -P ~ http://<em>upstream-orcharhino.example.com</em>/pub/katello-server-ca.crt</pre>
</div>
</div>
</li>
<li>
<p>Upload the SSL Certificate to orcharhino:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-credential create \
--content-type cert \
--name "<em>My_SSL_Certificate</em>" \
--organization "<em>My_Organization</em>" \
--path ~/<em>My_SSL_Certificate</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Creating_a_Custom_Product_content-management"><a class="anchor" href="#Creating_a_Custom_Product_content-management"></a>4.3. Creating a Custom Product</h3>
<div class="paragraph">
<p>Use this procedure to create a custom product that you can then add repositories to.
To use the CLI instead of the orcharhino management UI, see the <a href="#cli-creating-a-custom-product">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>, click <strong>Create Product</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for the product.
orcharhino automatically completes the <strong>Label</strong> field based on what you have entered for <strong>Name</strong>.</p>
</li>
<li>
<p>Optional: From the <strong>GPG Key</strong> list, select the GPG key for the product.</p>
</li>
<li>
<p>Optional: From the <strong>SSL CA Cert</strong> list, select the SSL CA certificate for the product.</p>
</li>
<li>
<p>Optional: From the <strong>SSL Client Cert</strong> list, select the SSL client certificate for the product.</p>
</li>
<li>
<p>Optional: From the <strong>SSL Client Key</strong> list, select the SSL client key for the product.</p>
</li>
<li>
<p>Optional: From the <strong>Sync Plan</strong> list, select an existing sync plan or click <strong>Create Sync Plan</strong> and create a sync plan for your product requirements.</p>
</li>
<li>
<p>In the <strong>Description</strong> field, enter a description of the product.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
<div id="cli-creating-a-custom-product" class="paragraph">
<div class="title">CLI procedure</div>
<p>To create the product, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer product create \
--name "<em>My_Product</em>" \
--sync-plan "<em>Example Plan</em>" \
--description "<em>Content from My Repositories</em>" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Adding_Custom_RPM_Repositories_content-management"><a class="anchor" href="#Adding_Custom_RPM_Repositories_content-management"></a>4.4. Adding Custom RPM Repositories</h3>
<div class="paragraph">
<p>Use this procedure to add custom RPM repositories in orcharhino.
To use the CLI instead of the orcharhino management UI, see the <a href="#cli-adding-custom-rpm-repositories">CLI procedure</a>.</p>
</div>
<div class="paragraph">
<p>The Products window in the orcharhino management UI also provides a <strong>Repo Discovery</strong> function that finds all repositories from a URL and you can select which ones to add to your custom product.
For example, you can use the <strong>Repo Discovery</strong> to search <code><a href="http://yum.postgresql.org/9.5/redhat/" class="bare">http://yum.postgresql.org/9.5/redhat/</a></code> and list all repositories for different Red&#160;Hat Enterprise Linux versions and architectures.
This helps users save time importing multiple repositories from a single source.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong> and select the product that you want to use, and then click <strong>New Repository</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for the repository.
orcharhino automatically completes the <strong>Label</strong> field based on what you have entered for <strong>Name</strong>.</p>
</li>
<li>
<p>Optional: In the <strong>Description</strong> field, enter a description for the repository.</p>
</li>
<li>
<p>From the <strong>Type</strong> list, select <code>yum</code> as type of repository.</p>
</li>
<li>
<p>Optional: From the <strong>Restrict to Architecture</strong> list, select an architecture.
If you want to make the repository available to all hosts regardless of the architecture, ensure to select <strong>No restriction</strong>.</p>
</li>
<li>
<p>Optional: From the <strong>Restrict to OS Version</strong> list, select the OS version.
If you want to make the repository available to all hosts regardless of the OS version, ensure to select <strong>No restriction</strong>.</p>
</li>
<li>
<p>Optional: In the <strong>Upstream URL</strong> field, enter the URL of the external repository to use as a source.
orcharhino supports three protocols: <code>http://</code>, <code>https://</code>, and <code>file://</code>.
If you are using a <code>file://</code> repository, you have to place it under <code>/var/lib/pulp/sync_imports/</code> directory.</p>
<div class="paragraph">
<p>If you do not enter an upstream URL, you can manually upload packages.</p>
</div>
</li>
<li>
<p>Optional: Check the <strong>Ignore SRPMs</strong> checkbox to exclude source RPM packages from being synchronized to orcharhino.</p>
</li>
<li>
<p>Select the <strong>Verify SSL</strong> checkbox if you want to verify that the upstream repository&#8217;s SSL certificates are signed by a trusted CA.</p>
</li>
<li>
<p>Optional: In the <strong>Upstream Username</strong> field, enter the user name for the upstream repository if required for authentication.
Clear this field if the repository does not require authentication.</p>
</li>
<li>
<p>Optional: In the <strong>Upstream Password</strong> field, enter the corresponding password for the upstream repository.
Clear this field if the repository does not require authentication.</p>
</li>
<li>
<p>Optional: In the <strong>Upstream Authentication Token</strong> field, provide the token of the upstream repository user for authentication.
Leave this field empty if the repository does not require authentication.</p>
</li>
<li>
<p>From the <strong>Download Policy</strong> list, select the type of synchronization orcharhino&#160;Server performs.
For more information, see <a href="#Download_Policies_Overview_content-management">Download Policies Overview</a>.</p>
</li>
<li>
<p>From the <strong>Mirroring Policy</strong> list, select the type of content synchronization orcharhino&#160;Server performs.
For more information, see <a href="#Mirroring_Policies_Overview_content-management">Mirroring Policies Overview</a>.</p>
</li>
<li>
<p>Optional: In the <strong>Retain package versions</strong> field, enter the number of versions you want to retain per package.</p>
</li>
<li>
<p>Optional: In the <strong>HTTP Proxy Policy</strong> field, select an HTTP proxy.</p>
</li>
<li>
<p>From the <strong>Checksum</strong> list, select the checksum type for the repository.</p>
</li>
<li>
<p>Optional: You can clear the <strong>Unprotected</strong> checkbox to require a subscription entitlement certificate for accessing this repository.
By default, the repository is published through HTTP.</p>
</li>
<li>
<p>Optional: From the <strong>GPG Key</strong> list, select the GPG key for the product.</p>
</li>
<li>
<p>Optional: In the <strong>SSL CA Cert</strong> field, select the SSL CA Certificate for the repository.</p>
</li>
<li>
<p>Optional: In the <strong>SSL Client cert</strong> field, select the SSL Client Certificate for the repository.</p>
</li>
<li>
<p>Optional: In the <strong>SSL Client Key</strong> field, select the SSL Client Key for the repository.</p>
</li>
<li>
<p>Click <strong>Save</strong> to create the repository.</p>
</li>
</ol>
</div>
<div id="cli-adding-custom-rpm-repositories" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Enter the following command to create the repository:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository create \
--arch "<em>My_Architecture</em>" \
--content-type "yum" \
--gpg-key-id <em>My_GPG_Key_ID</em> \
--name "<em>My_Repository</em>" \
--organization "<em>My_Organization</em>" \
--os-version "<em>My_OS_Version</em>" \
--product "<em>My_Product</em>" \
--publish-via-http true \
--url <em>My_Upstream_URL</em></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Continue to <a href="#Synchronizing_Repositories_content-management">synchronize the repository</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Adding_Custom_RPM_Repositories_for_AlmaLinux_9_content-management"><a class="anchor" href="#Adding_Custom_RPM_Repositories_for_AlmaLinux_9_content-management"></a>4.5. Adding Custom RPM Repositories for AlmaLinux 9</h3>
<div class="paragraph">
<p>This example creates a product and repositories for AlmaLinux 9.</p>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>Download and import the <a href="http://repo.almalinux.org/almalinux/RPM-GPG-KEY-AlmaLinux-9">GPG public key</a> for yum repositories for AlmaLinux 9 into orcharhino.
For more information, see <a href="#Importing_a_Custom_GPG_Key_content-management">Importing a Custom GPG Key</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content &gt; Products</strong>.</p>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>AlmaLinux 9</code>.
For more information, see <a href="#Creating_a_Custom_Product_content-management">Creating a Custom Product</a>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create three repositories of type <code>yum</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>AlmaLinux 9 BaseOS</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://repo.almalinux.org/almalinux/9/extras/x86_64/os/" class="bare">http://repo.almalinux.org/almalinux/9/extras/x86_64/os/</a></code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>AlmaLinux 9 AppStream</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://repo.almalinux.org/almalinux/9/AppStream/x86_64/os/" class="bare">http://repo.almalinux.org/almalinux/9/AppStream/x86_64/os/</a></code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>AlmaLinux 9 extras</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://repo.almalinux.org/almalinux/9/extras/x86_64/os/" class="bare">http://repo.almalinux.org/almalinux/9/extras/x86_64/os/</a></code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information, see <a href="#Adding_Custom_RPM_Repositories_content-management">Adding Custom RPM Repositories</a>.</p>
</div>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>AlmaLinux 9 client</code>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create a repository of type <code>yum</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>AlmaLinux 9 client</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: see <a href="https://atixservice.zendesk.com/hc/de/articles/360013840079">ATIX Service Portal</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Adding_Custom_RPM_Repositories_for_AlmaLinux_8_content-management"><a class="anchor" href="#Adding_Custom_RPM_Repositories_for_AlmaLinux_8_content-management"></a>4.6. Adding Custom RPM Repositories for AlmaLinux 8</h3>
<div class="paragraph">
<p>This example creates a product and repositories for AlmaLinux 8.</p>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>Download and import the <a href="http://repo.almalinux.org/almalinux/RPM-GPG-KEY-AlmaLinux-8">GPG public key</a> for yum repositories for AlmaLinux 8 into orcharhino.
For more information, see <a href="#Importing_a_Custom_GPG_Key_content-management">Importing a Custom GPG Key</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content &gt; Products</strong>.</p>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>AlmaLinux 8</code>.
For more information, see <a href="#Creating_a_Custom_Product_content-management">Creating a Custom Product</a>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create three repositories of type <code>yum</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>AlmaLinux 8 BaseOS</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://repo.almalinux.org/almalinux/8/extras/x86_64/os/" class="bare">http://repo.almalinux.org/almalinux/8/extras/x86_64/os/</a></code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>AlmaLinux 8 AppStream</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://repo.almalinux.org/almalinux/8/AppStream/x86_64/os/" class="bare">http://repo.almalinux.org/almalinux/8/AppStream/x86_64/os/</a></code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>AlmaLinux 8 extras</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://repo.almalinux.org/almalinux/8/extras/x86_64/os/" class="bare">http://repo.almalinux.org/almalinux/8/extras/x86_64/os/</a></code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information, see <a href="#Adding_Custom_RPM_Repositories_content-management">Adding Custom RPM Repositories</a>.</p>
</div>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>AlmaLinux 8 client</code>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create a repository of type <code>yum</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>AlmaLinux 8 client</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: see <a href="https://atixservice.zendesk.com/hc/de/articles/360013840079">ATIX Service Portal</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Adding_Custom_RPM_Repositories_for_CentOS_Stream_9_content-management"><a class="anchor" href="#Adding_Custom_RPM_Repositories_for_CentOS_Stream_9_content-management"></a>4.7. Adding Custom RPM Repositories for CentOS Stream 9</h3>
<div class="paragraph">
<p>This example creates a product and repositories for CentOS Stream 9.</p>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>Download and import the <a href="https://www.centos.org/keys/RPM-GPG-KEY-CentOS-Official">GPG public key</a> for yum repositories for CentOS Stream 9 into orcharhino.
For more information, see <a href="#Importing_a_Custom_GPG_Key_content-management">Importing a Custom GPG Key</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content &gt; Products</strong>.</p>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>CentOS Stream 9</code>.
For more information, see <a href="#Creating_a_Custom_Product_content-management">Creating a Custom Product</a>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create three repositories of type <code>yum</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>CentOS Stream 9 BaseOS</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://mirror.stream.centos.org/9-stream/BaseOS/x86_64/" class="bare">http://mirror.stream.centos.org/9-stream/BaseOS/x86_64/</a></code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>CentOS Stream 9 AppStream</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://mirror.stream.centos.org/9-stream/AppStream/x86_64/" class="bare">http://mirror.stream.centos.org/9-stream/AppStream/x86_64/</a></code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information, see <a href="#Adding_Custom_RPM_Repositories_content-management">Adding Custom RPM Repositories</a>.</p>
</div>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>CentOS Stream 9 client</code>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create a repository of type <code>yum</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>CentOS Stream 9 client</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: see <a href="https://atixservice.zendesk.com/hc/de/articles/360013840079">ATIX Service Portal</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Adding_Custom_RPM_Repositories_for_Oracle_Linux_9_content-management"><a class="anchor" href="#Adding_Custom_RPM_Repositories_for_Oracle_Linux_9_content-management"></a>4.8. Adding Custom RPM Repositories for Oracle Linux 9</h3>
<div class="paragraph">
<p>This example creates a product and repositories for Oracle Linux 9.</p>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>Download and import the <a href="https://yum.oracle.com/RPM-GPG-KEY-oracle-ol9">GPG public key</a> for yum repositories for Oracle Linux 9 into orcharhino.
For more information, see <a href="#Importing_a_Custom_GPG_Key_content-management">Importing a Custom GPG Key</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content &gt; Products</strong>.</p>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>Oracle Linux 9</code>.
For more information, see <a href="#Creating_a_Custom_Product_content-management">Creating a Custom Product</a>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create three repositories of type <code>yum</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Oracle Linux 9 BaseOS</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://yum.oracle.com/repo/OracleLinux/OL9/baseos/latest/x86_64/" class="bare">http://yum.oracle.com/repo/OracleLinux/OL9/baseos/latest/x86_64/</a></code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Oracle Linux 9 AppStream</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://yum.oracle.com/repo/OracleLinux/OL9/appstream/x86_64/" class="bare">http://yum.oracle.com/repo/OracleLinux/OL9/appstream/x86_64/</a></code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Oracle Linux 9 Addons</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://yum.oracle.com/repo/OracleLinux/OL9/addons/x86_64/" class="bare">http://yum.oracle.com/repo/OracleLinux/OL9/addons/x86_64/</a></code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information, see <a href="#Adding_Custom_RPM_Repositories_content-management">Adding Custom RPM Repositories</a>.</p>
</div>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>Oracle Linux 9 client</code>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create a repository of type <code>yum</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Oracle Linux 9 client</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: see <a href="https://atixservice.zendesk.com/hc/de/articles/360013840079">ATIX Service Portal</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Adding_Custom_RPM_Repositories_for_Oracle_Linux_8_content-management"><a class="anchor" href="#Adding_Custom_RPM_Repositories_for_Oracle_Linux_8_content-management"></a>4.9. Adding Custom RPM Repositories for Oracle Linux 8</h3>
<div class="paragraph">
<p>This example creates a product and repositories for Oracle Linux 8.</p>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>Download and import the <a href="https://yum.oracle.com/RPM-GPG-KEY-oracle-ol8">GPG public key</a> for yum repositories for Oracle Linux 8 into orcharhino.
For more information, see <a href="#Importing_a_Custom_GPG_Key_content-management">Importing a Custom GPG Key</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content &gt; Products</strong>.</p>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>Oracle Linux 8</code>.
For more information, see <a href="#Creating_a_Custom_Product_content-management">Creating a Custom Product</a>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create three repositories of type <code>yum</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Oracle Linux 8 BaseOS</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://yum.oracle.com/repo/OracleLinux/OL8/baseos/latest/x86_64/" class="bare">http://yum.oracle.com/repo/OracleLinux/OL8/baseos/latest/x86_64/</a></code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Oracle Linux 8 AppStream</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://yum.oracle.com/repo/OracleLinux/OL8/appstream/x86_64/" class="bare">http://yum.oracle.com/repo/OracleLinux/OL8/appstream/x86_64/</a></code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Oracle Linux 8 Addons</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://yum.oracle.com/repo/OracleLinux/OL8/addons/x86_64/" class="bare">http://yum.oracle.com/repo/OracleLinux/OL8/addons/x86_64/</a></code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information, see <a href="#Adding_Custom_RPM_Repositories_content-management">Adding Custom RPM Repositories</a>.</p>
</div>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>Oracle Linux 8 client</code>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create a repository of type <code>yum</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Oracle Linux 8 client</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: see <a href="https://atixservice.zendesk.com/hc/de/articles/360013840079">ATIX Service Portal</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Adding_Custom_RPM_Repositories_for_Rocky_Linux_9_content-management"><a class="anchor" href="#Adding_Custom_RPM_Repositories_for_Rocky_Linux_9_content-management"></a>4.10. Adding Custom RPM Repositories for Rocky Linux 9</h3>
<div class="paragraph">
<p>This example creates a product and repositories for Rocky Linux 9.</p>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>Download and import the <a href="https://dl.rockylinux.org/pub/rocky/RPM-GPG-KEY-rockyofficial">GPG public key</a> for yum repositories for Rocky Linux 9 into orcharhino.
For more information, see <a href="#Importing_a_Custom_GPG_Key_content-management">Importing a Custom GPG Key</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content &gt; Products</strong>.</p>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>Rocky Linux 9</code>.
For more information, see <a href="#Creating_a_Custom_Product_content-management">Creating a Custom Product</a>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create three repositories of type <code>yum</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Rocky Linux 9 BaseOS</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://dl.rockylinux.org/pub/rocky/9/BaseOS/x86_64/os/" class="bare">http://dl.rockylinux.org/pub/rocky/9/BaseOS/x86_64/os/</a></code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Rocky Linux 9 AppStream</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://dl.rockylinux.org/pub/rocky/9/AppStream/x86_64/os/" class="bare">http://dl.rockylinux.org/pub/rocky/9/AppStream/x86_64/os/</a></code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Rocky Linux 9 extras</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://dl.rockylinux.org/pub/rocky/9/extras/x86_64/os/" class="bare">http://dl.rockylinux.org/pub/rocky/9/extras/x86_64/os/</a></code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information, see <a href="#Adding_Custom_RPM_Repositories_content-management">Adding Custom RPM Repositories</a>.</p>
</div>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>Rocky Linux 9 client</code>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create a repository of type <code>yum</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Rocky Linux 9 client</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: see <a href="https://atixservice.zendesk.com/hc/de/articles/360013840079">ATIX Service Portal</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Adding_Custom_RPM_Repositories_for_Rocky_Linux_8_content-management"><a class="anchor" href="#Adding_Custom_RPM_Repositories_for_Rocky_Linux_8_content-management"></a>4.11. Adding Custom RPM Repositories for Rocky Linux 8</h3>
<div class="paragraph">
<p>This example creates a product and repositories for Rocky Linux 8.</p>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>Download and import the <a href="https://dl.rockylinux.org/pub/rocky/RPM-GPG-KEY-rockyofficial">GPG public key</a> for yum repositories for Rocky Linux 8 into orcharhino.
For more information, see <a href="#Importing_a_Custom_GPG_Key_content-management">Importing a Custom GPG Key</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content &gt; Products</strong>.</p>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>Rocky Linux 8</code>.
For more information, see <a href="#Creating_a_Custom_Product_content-management">Creating a Custom Product</a>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create three repositories of type <code>yum</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Rocky Linux 8 BaseOS</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://dl.rockylinux.org/pub/rocky/8/BaseOS/x86_64/os/" class="bare">http://dl.rockylinux.org/pub/rocky/8/BaseOS/x86_64/os/</a></code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Rocky Linux 8 AppStream</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://dl.rockylinux.org/pub/rocky/8/AppStream/x86_64/os/" class="bare">http://dl.rockylinux.org/pub/rocky/8/AppStream/x86_64/os/</a></code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Rocky Linux 8 extras</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://dl.rockylinux.org/pub/rocky/8/extras/x86_64/os/" class="bare">http://dl.rockylinux.org/pub/rocky/8/extras/x86_64/os/</a></code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information, see <a href="#Adding_Custom_RPM_Repositories_content-management">Adding Custom RPM Repositories</a>.</p>
</div>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>Rocky Linux 8 client</code>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create a repository of type <code>yum</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Rocky Linux 8 client</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: see <a href="https://atixservice.zendesk.com/hc/de/articles/360013840079">ATIX Service Portal</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Extracting_GPG_Public_Key_Fingerprints_from_a_Release_Files_content-management"><a class="anchor" href="#Extracting_GPG_Public_Key_Fingerprints_from_a_Release_Files_content-management"></a>4.12. Extracting GPG Public Key Fingerprints from a Release Files</h3>
<div class="paragraph">
<p>You can use GPG public keys the verify the authenticity of APT repositories by verifying the signature of the <code>Release</code> file.
This example verifies the signature for the <code>Release</code> file from Debian 11.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Download the <code>Release</code> and <code>Release.gpg</code> files:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ wget https://deb.debian.org/debian/dists/bullseye/Release
$ wget https://deb.debian.org/debian/dists/bullseye/Release.gpg</pre>
</div>
</div>
</li>
<li>
<p>Verify the signature:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ gpg --verify Release.gpg Release</pre>
</div>
</div>
</li>
<li>
<p>If you cannot verify the signature, import the missing GPG public keys based on the output of the command above:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ gpg --keyserver hkp://keyserver.ubuntu.com --recv-keys 0146DC6D4A0B2914BDED34DB648ACFD622F3D138
$ gpg --keyserver hkp://keyserver.ubuntu.com --recv-keys A7236886F3CCCAAD148A27F80E98404D386FA1D9
$ gpg --keyserver hkp://keyserver.ubuntu.com --recv-keys A4285295FC7B1A81600062A9605C66F00D6C9793</pre>
</div>
</div>
</li>
<li>
<p>Optional: Verify the signature again:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ gpg --verify Release.gpg Release</pre>
</div>
</div>
</li>
<li>
<p>Export the <em>ASCII-armored</em> GPG public keys to a file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ gpg --armor --export 0146DC6D4A0B2914BDED34DB648ACFD622F3D138 A7236886F3CCCAAD148A27F80E98404D386FA1D9 A4285295FC7B1A81600062A9605C66F00D6C9793 &gt; debian_11.txt</pre>
</div>
</div>
<div class="paragraph">
<p>Use this <code>.txt</code> file and upload it to orcharhino as described below.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Continue to <a href="#Importing_a_Custom_GPG_Key_content-management">import the custom GPG public key</a> into orcharhino.</p>
</div>
</div>
<div class="sect2">
<h3 id="Adding_Custom_DEB_Repositories_content-management"><a class="anchor" href="#Adding_Custom_DEB_Repositories_content-management"></a>4.13. Adding DEB Repositories</h3>
<div class="paragraph">
<p>Use this procedure to add DEB repositories in orcharhino.
To use the CLI instead of the orcharhino management UI, see the <a href="#cli-adding-custom-deb-repositories">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong> and select the product that you want to use, and then click <strong>New Repository</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for the repository.
orcharhino automatically completes the <strong>Label</strong> field based on what you have entered for <strong>Name</strong>.</p>
</li>
<li>
<p>Optional: In the <strong>Description</strong> field, enter a description for the repository.</p>
</li>
<li>
<p>From the <strong>Type</strong> list, select <code>deb</code> as type of repository.</p>
</li>
<li>
<p>Optional: In the <strong>Upstream URL</strong> field, enter the URL of the external repository to use as a source.
You can find the upstream URLs on Debian-based systems in <code>/etc/apt/sources.list</code>.</p>
<div class="paragraph">
<p>If you do not enter an upstream URL, you can manually upload packages.</p>
</div>
</li>
<li>
<p>In the <strong>Releases/Distributions</strong> field, set one or multiple releases separated by whitespace.
The distributions specify the path from the repository root to the <code>Release</code> file.
Repositories that omit the <code>dists</code> directory are using the deprecated <em>flat repository structure</em>.
To synchronize a flat repository, you must specify exactly one distribution that ends with a <code>/</code>.</p>
<div class="paragraph">
<p>For official Debian repositories, set a <em>codename</em> in the <strong>Releases/Distributions</strong> field, for example <code>buster</code> for Debian 10 or <code>bullseye</code> for Debian 11.
Avoid using <code>stable</code> or <code>testing</code> because the codename they reference changes over time.
This helps to avoid drastic changes once a new Debian version is released and the reference is changed.
To keep things easy to manage and to avoid potential performance and network issues during synchronization, create one repository per release in orcharhino.
For official Ubuntu repositories, use the Ubuntu suite, for example <code>focal</code> or <code>focal-updates</code>.</p>
</div>
</li>
<li>
<p>Optional: In the <strong>Components</strong> field, enter a component.
This indicates the licensing terms of the software packages.</p>
<div class="paragraph">
<p>In Debian, it is divided into <code>main</code>, <code>contrib</code>, and <code>non-free</code>.
For official Debian or Ubuntu repositories, ATIX AG recommends leaving this field empty to synchronize all available components.
Note that some third party Debian repositories use the components in ways that may require setting an explicit selection.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">
<div class="paragraph">
<p>Ensure that you enter both <strong>Releases</strong> and <strong>Components</strong> exactly as they are in an <code>/etc/apt/sources.list</code> file.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Optional: In the <strong>Architectures</strong> field, enter one or multiple architectures.
If you want to make the repository available to all hosts regardless of the architecture, ensure to select <strong>No restriction</strong>.</p>
</li>
<li>
<p>Optional: In the <strong>Errata URL</strong> field, enter the URL of an errata service.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>The <em>ATIX AG Debian and Ubuntu Errata service</em> provides errata for Debian and Ubuntu.
When creating a repository of type <code>deb</code>, point the <strong>Errata URL</strong> to <em>ATIX AG Debian and Ubuntu Errata service</em>.
Use <code>https://dep.atix.de/dep/api/v1/debian</code> for Debian, <code>https://dep.atix.de/dep/api/v1/ubuntu</code> for Ubuntu, and <code>https://dep.atix.de/dep/api/v1/ubuntu-esm</code> for Ubuntu-ESM.</p>
</div>
<div class="paragraph">
<p>An erratum contains the information which packages have to be updated to fix a security issue.
Debian and Ubuntu errata are derived from the Debian security announcements (DSA) and the Ubuntu security notices (USN).</p>
</div>
<div class="paragraph">
<p>Ensure to only add Debian and Ubuntu errata to Debian and Ubuntu repositories that contain the packages needed to apply the errata.
For Debian, you need the <code><em>My_Debian_Release</em>/updates</code> repository, for example <code>bullseye/updates</code>.
For Ubuntu, you need the <code><em>My_Ubuntu_Release</em>-security</code> repository, for example <code>jammy-security</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Optional: Select the <strong>Verify SSL</strong> checkbox if you want to verify that the upstream repository&#8217;s SSL certificates are signed by a trusted CA.</p>
</li>
<li>
<p>Optional: In the <strong>Upstream Username</strong> field, enter the user name for the upstream repository if required for authentication.
Clear this field if the repository does not require authentication.</p>
</li>
<li>
<p>Optional: In the <strong>Upstream Password</strong> field, enter the corresponding password for the upstream repository.
Clear this field if the repository does not require authentication.</p>
</li>
<li>
<p>Optional: In the <strong>Upstream Authentication Token</strong> field, provide the token of the upstream repository user for authentication.
Leave this field empty if the repository does not require authentication.</p>
</li>
<li>
<p>From the <strong>Download Policy</strong> list, select the type of synchronization orcharhino&#160;Server performs.
For more information, see <a href="#Download_Policies_Overview_content-management">Download Policies Overview</a>.</p>
</li>
<li>
<p>From the <strong>Mirroring Policy</strong> list, select the type of content synchronization orcharhino&#160;Server performs.
For more information, see <a href="#Mirroring_Policies_Overview_content-management">Mirroring Policies Overview</a>.</p>
</li>
<li>
<p>Optional: In the <strong>HTTP Proxy Policy</strong> field, select an HTTP proxy.</p>
</li>
<li>
<p>Optional: You can clear the <strong>Unprotected</strong> checkbox to require a subscription entitlement certificate for accessing this repository.
By default, the repository is published through HTTP.</p>
</li>
<li>
<p>Optional: From the <strong>GPG Key</strong> list, select the GPG key if you want to verify the signatures of the <code>Release</code> files associated with the Debian repository.</p>
</li>
<li>
<p>Optional: In the <strong>SSL CA Cert</strong> field, select the SSL CA Certificate for the repository.</p>
</li>
<li>
<p>Optional: In the <strong>SSL Client cert</strong> field, select the SSL Client Certificate for the repository.</p>
</li>
<li>
<p>Optional: In the <strong>SSL Client Key</strong> field, select the SSL Client Key for the repository.</p>
</li>
<li>
<p>Click <strong>Save</strong> to create the repository.</p>
</li>
</ol>
</div>
<div id="cli-adding-custom-deb-repositories" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Enter the following command to create the repository:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository create \
--content-type "deb" \
--deb-architectures "<em>My_DEB_Architectures" \
--deb-components "_My_DEB_Components</em>" \
--deb-releases "<em>My_DEB_Releases</em>" \
--gpg-key-id "<em>My_GPG_Key_ID" \
--name "_My_Repository</em>" \
--organization "<em>My_Organization</em>" \
--product "<em>My_Product</em>" \
--publish-via-http true \
--url <em>My_Upstream_URL</em></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Continue to <a href="#Synchronizing_Repositories_content-management">synchronize the repository</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Adding_Custom_DEB_Repository_Example_for_Debian_11_content-management"><a class="anchor" href="#Adding_Custom_DEB_Repository_Example_for_Debian_11_content-management"></a>4.14. Adding DEB Repository Example for Debian 11</h3>
<div class="paragraph">
<p>This example creates a product and repositories for Debian 11.</p>
</div>
<div class="olist arabic">
<div class="title">Prerequisites</div>
<ol class="arabic">
<li>
<p><a href="#Extracting_GPG_Public_Key_Fingerprints_from_a_Release_Files_content-management">Extract the GPG public keys</a> from the <code>Release</code> file</p>
</li>
<li>
<p><a href="#Importing_a_Custom_GPG_Key_content-management">Import the content credentials</a> into orcharhino</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content &gt; Products</strong>.</p>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>Debian 11</code>.
For more information, see <a href="#Creating_a_Custom_Product_content-management">Creating a Custom Product</a>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create three repositories of type <code>deb</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Debian 11 main</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code>http://deb.debian.org/debian/</code></p>
</li>
<li>
<p><strong>Releases/Distributions</strong>: <code>bullseye</code></p>
</li>
<li>
<p><strong>Component</strong>: <code>main</code></p>
</li>
<li>
<p><strong>Architecture</strong>: <code>amd64</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Debian 11 updates</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code>http://deb.debian.org/debian/</code></p>
</li>
<li>
<p><strong>Releases/Distributions</strong>: <code>bullseye-updates</code></p>
</li>
<li>
<p><strong>Component</strong>: <code>main</code></p>
</li>
<li>
<p><strong>Architecture</strong>: <code>amd64</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Debian 11 security</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code>http://deb.debian.org/debian-security/</code></p>
</li>
<li>
<p><strong>Releases/Distributions</strong>: <code>bullseye-security</code></p>
</li>
<li>
<p><strong>Component</strong>: <code>main</code></p>
</li>
<li>
<p><strong>Architecture</strong>: <code>amd64</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>Debian 11 client</code>.
For more information, see <a href="#Creating_a_Custom_Product_content-management">Creating a Custom Product</a>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create a repository of type <code>deb</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Debian 11 client</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: see <a href="https://atixservice.zendesk.com/hc/de/articles/360013840079">ATIX Service Portal</a></p>
</li>
<li>
<p><strong>Releases/Distributions</strong>: <code>stable</code></p>
</li>
<li>
<p><strong>Component</strong>: <code>main</code></p>
</li>
<li>
<p><strong>Architecture</strong>: <code>amd64</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Adding_Custom_DEB_Repository_Example_for_Ubuntu_22_04_content-management"><a class="anchor" href="#Adding_Custom_DEB_Repository_Example_for_Ubuntu_22_04_content-management"></a>4.15. Adding DEB Repository Example for Ubuntu 22.04</h3>
<div class="paragraph">
<p>This example creates a product and repositories for Ubuntu 22.04.</p>
</div>
<div class="olist arabic">
<div class="title">Prerequisites</div>
<ol class="arabic">
<li>
<p><a href="#Extracting_GPG_Public_Key_Fingerprints_from_a_Release_Files_content-management">Extract the GPG public keys</a> from the <code>Release</code> file</p>
</li>
<li>
<p><a href="#Importing_a_Custom_GPG_Key_content-management">Import the content credentials</a> into orcharhino</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content &gt; Products</strong>.</p>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>Ubuntu 22.04</code>.
For more information, see <a href="#Creating_a_Custom_Product_content-management">Creating a Custom Product</a>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create three repositories of type <code>deb</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Ubuntu 22.04 main</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code>http://archive.ubuntu.com/ubuntu/</code></p>
</li>
<li>
<p><strong>Releases/Distributions</strong>: <code>jammy</code></p>
</li>
<li>
<p><strong>Component</strong>: <code>main</code></p>
</li>
<li>
<p><strong>Architecture</strong>: <code>amd64</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Ubuntu 22.04 updates</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code>http://archive.ubuntu.com/ubuntu/</code></p>
</li>
<li>
<p><strong>Releases/Distributions</strong>: <code>jammy-updates</code></p>
</li>
<li>
<p><strong>Component</strong>: <code>main</code></p>
</li>
<li>
<p><strong>Architecture</strong>: <code>amd64</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Ubuntu 22.04 security</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code>http://security.ubuntu.com/ubuntu/</code></p>
</li>
<li>
<p><strong>Releases/Distributions</strong>: <code>jammy-security</code></p>
</li>
<li>
<p><strong>Component</strong>: <code>main</code></p>
</li>
<li>
<p><strong>Architecture</strong>: <code>amd64</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>Ubuntu 22.04 client</code>.
For more information, see <a href="#Creating_a_Custom_Product_content-management">Creating a Custom Product</a>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create a repository of type <code>deb</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Ubuntu 22.04 client</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: see <a href="https://atixservice.zendesk.com/hc/de/articles/360013840079">ATIX Service Portal</a></p>
</li>
<li>
<p><strong>Releases/Distributions</strong>: <code>stable</code></p>
</li>
<li>
<p><strong>Component</strong>: <code>main</code></p>
</li>
<li>
<p><strong>Architecture</strong>: <code>amd64</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Changing_the_Repository_Sets_Status_for-a-Host-in_orcharhino_content-management"><a class="anchor" href="#Changing_the_Repository_Sets_Status_for-a-Host-in_orcharhino_content-management"></a>4.16. Changing the Repository Sets Status for a Host in orcharhino</h3>
<div class="paragraph">
<p>Repository sets show repositories available to each host.
A host will be able to access content from a given repository if that repository is enabled.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong> and select a host.</p>
</li>
<li>
<p>Select the <strong>Content</strong> tab, then select the <strong>Repository sets</strong> subtab.
On the tab, there is a set of repositories available to each host with a status of <strong>Enabled</strong> or <strong>Disabled</strong>.</p>
</li>
<li>
<p>You can override the default status by using the action menus on each table row by changing the status to <strong>Override to disabled</strong>, <strong>Override to enabled</strong>, or <strong>Reset to default</strong>.</p>
</li>
<li>
<p>You can also bulk select the checkboxes on each table row, and use the vertical ellipsis icon at the top.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>For hosts not in the default Content View and lifecycle environment, the <strong>Repository sets</strong> tab shows a toggle group with two options, <strong>Limit to environment</strong> and <strong>Show all</strong>.
The <strong>Limit to environment</strong> option shows only repositories that are relevant to the host.
The <strong>Show all</strong> option shows all available repositories including those that may not be in the host&#8217;s Content View and lifecycle environment.
On the <strong>Overview</strong> tab, click <strong>Content view details</strong> to view the environment for the host.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Enabling_Red_Hat_Repositories_content-management"><a class="anchor" href="#Enabling_Red_Hat_Repositories_content-management"></a>4.17. Enabling Red&#160;Hat Repositories</h3>
<div class="paragraph">
<p>If outside network access requires usage of an HTTP proxy, configure a default HTTP proxy for your server.
For more information, see <a href="https://docs.theforeman.org/3.4/Installing_Server/index-orcharhino.html#adding-a-default-http-proxy_orcharhino">Adding a Default HTTP Proxy to orcharhino</a>.</p>
</div>
<div class="paragraph">
<p>To select the repositories to synchronize, you must first identify the Product that contains the repository, and then enable that repository based on the relevant release version and base architecture.</p>
</div>
<div class="paragraph">
<div class="title">For Red&#160;Hat Enterprise Linux 8 Hosts</div>
<p>To provision Red&#160;Hat Enterprise Linux 8 hosts, you require the <strong>Red&#160;Hat Enterprise Linux 8 for x86_64 - AppStream (RPMs)</strong> and <strong>Red&#160;Hat Enterprise Linux 8 for x86_64 - BaseOS (RPMs)</strong> repositories.</p>
</div>
<div class="paragraph">
<div class="title">For Red&#160;Hat Enterprise Linux 7 Hosts</div>
<p>To provision Red&#160;Hat Enterprise Linux 7 hosts, you require the <strong>Red&#160;Hat Enterprise Linux 7 Server (RPMs)</strong> repository.</p>
</div>
<div class="paragraph">
<p>The difference between associating Red&#160;Hat Enterprise Linux operating system release version with either <strong>7Server</strong> repositories or <strong>7.<em>X</em></strong> repositories is that <strong>7Server</strong> repositories contain all the latest updates while <strong>Red&#160;Hat Enterprise Linux 7.<em>X</em></strong> repositories stop getting updates after the next minor version release.
Note that Kickstart repositories only have minor versions.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Red&#160;Hat Repositories</strong>.</p>
</li>
<li>
<p>To find repositories, either enter the repository name, or toggle the <strong>Recommended Repositories</strong> button to the on position to view a list of repositories that you require.</p>
</li>
<li>
<p>In the Available Repositories pane, click a repository to expand the repository set.</p>
</li>
<li>
<p>Click the <strong>Enable</strong> icon next to the base architecture and release version that you want.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>To search for your Product, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer product list --organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>List the repository set for the Product:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository-set list \
--product "Red Hat Enterprise Linux Server" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Enable the repository using either the name or ID number.
Include the release version, such as <code>7Server</code>, and base architecture, such as <code>x86_64</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository-set enable \
--name "Red Hat Enterprise Linux 7 Server (RPMs)" \
--releasever "7Server" \
--basearch "x86_64" \
--product "Red Hat Enterprise Linux Server" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Synchronizing_Repositories_content-management"><a class="anchor" href="#Synchronizing_Repositories_content-management"></a>4.18. Synchronizing Repositories</h3>
<div class="paragraph">
<p>You must synchronize repositories to download content into orcharhino.
You can use this procedure for an initial synchronization of repositories or to synchronize repositories manually as you need.</p>
</div>
<div class="paragraph">
<p>You can also sync all repositories in an organization.
For more information, see <a href="#Synchronizing_All_Repositories_in_an_Organization_content-management">Synchronizing All Repositories in an Organization</a>.</p>
</div>
<div class="paragraph">
<p>Create a sync plan to ensure updates on a regular basis.
For more information, see <a href="#Creating_a_Sync_Plan_content-management">Creating a Sync Plan</a>.</p>
</div>
<div class="paragraph">
<p>The synchronization duration depends on the size of each repository and the speed of your network connection.
The following table provides estimates of how long it would take to synchronize content, depending on the available Internet bandwidth:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">Single Package (10Mb)</th>
<th class="tableblock halign-left valign-top">Minor Release (750Mb)</th>
<th class="tableblock halign-left valign-top">Major Release (6Gb)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">256 Kbps</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5 Mins 27 Secs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6 Hrs 49 Mins 36 Secs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 Days 7 Hrs 55 Mins</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">512 Kbps</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 Mins 43.84 Secs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3 Hrs 24 Mins 48 Secs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 Day 3 Hrs 57 Mins</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">T1 (1.5 Mbps)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">54.33 Secs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 Hr 7 Mins 54.78 Secs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">9 Hrs 16 Mins 20.57 Secs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 Mbps</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8.39 Secs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 Mins 29.15 Secs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 Hr 25 Mins 53.96 Secs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">100 Mbps</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.84 Secs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 Min 2.91 Secs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8 Mins 35.4 Secs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1000 Mbps</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.08 Secs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6.29 Secs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">51.54 Secs</p></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong> and select the Product that contains the repositories that you want to synchronize.</p>
</li>
<li>
<p>Select the repositories that you want to synchronize and click <strong>Sync Now</strong>.</p>
</li>
<li>
<p>Optional: To view the progress of the synchronization in the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Sync Status</strong> and expand the corresponding Product or repository tree.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Synchronize an entire Product:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer product synchronize \
--name "<em>My_Product</em>" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Synchronize an individual repository:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository synchronize \
--name "<em>My_Repository</em>" \
--organization "<em>My_Organization</em>" \
--product "<em>My Product</em>"</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Synchronizing_All_Repositories_in_an_Organization_content-management"><a class="anchor" href="#Synchronizing_All_Repositories_in_an_Organization_content-management"></a>4.19. Synchronizing All Repositories in an Organization</h3>
<div class="paragraph">
<p>Use this procedure to synchronize all repositories within an organization.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in to your orcharhino&#160;Server using SSH.</p>
</li>
<li>
<p>Run the following Bash script:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-Bash" data-lang="Bash">ORG="<em>My_Organization</em>"

for i in $(hammer --no-headers --csv repository list --organization $ORG | awk -F, {'print $1'})
do
  hammer repository synchronize --id ${i} --organization $ORG --async
done</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Download_Policies_Overview_content-management"><a class="anchor" href="#Download_Policies_Overview_content-management"></a>4.20. Download Policies Overview</h3>
<div class="paragraph">
<p>orcharhino provides multiple download policies for synchronizing RPM and DEB content and container images.
For example, you might want to download only the content metadata while deferring the actual content download for later.</p>
</div>
<div class="paragraph">
<p>orcharhino&#160;Server has the following policies:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Immediate</dt>
<dd>
<p>orcharhino&#160;Server downloads all metadata and packages during synchronization.</p>
</dd>
<dt class="hdlist1">On Demand</dt>
<dd>
<p>orcharhino&#160;Server downloads only the metadata during synchronization.
orcharhino&#160;Server only fetches and stores packages on the file system when orcharhino&#160;Proxies or directly connected clients request them.
This setting has no effect if you set a corresponding repository on a orcharhino&#160;Proxy to <strong>Immediate</strong> because orcharhino&#160;Server is forced to download all the packages.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The <strong>On Demand</strong> policy acts as a <em>Lazy Synchronization</em> feature because they save time synchronizing content.
The lazy synchronization feature must be used only for <code>deb</code> and <code>yum</code> repositories.
You can add the packages to Content Views and promote to life cycle environments as normal.</p>
</div>
<div class="paragraph">
<p>orcharhino&#160;Proxy has the following policies:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Immediate</dt>
<dd>
<p>orcharhino&#160;Proxy downloads all metadata and packages during synchronization.
Do not use this setting if the corresponding repository on orcharhino&#160;Server is set to <strong>On Demand</strong> as orcharhino&#160;Server is forced to download all the packages.</p>
</dd>
<dt class="hdlist1">On Demand</dt>
<dd>
<p>orcharhino&#160;Proxy only downloads the metadata during synchronization.
orcharhino&#160;Proxy fetches and stores packages only on the file system when directly connected clients request them.
When you use an <strong>On Demand</strong> download policy, content is downloaded from orcharhino&#160;Server if it is not available on orcharhino&#160;Proxy.</p>
</dd>
<dt class="hdlist1">Inherit</dt>
<dd>
<p>orcharhino&#160;Proxy inherits the download policy for the repository from the corresponding repository on orcharhino&#160;Server.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="Changing_the_Default_Download_Policy"><a class="anchor" href="#Changing_the_Default_Download_Policy"></a>4.21. Changing the Default Download Policy</h3>
<div class="paragraph">
<p>You can set the default download policy that orcharhino applies to repositories that you create in all organizations.</p>
</div>
<div class="paragraph">
<p>Depending on whether it is a Red Hat, SUSE, or custom repository, orcharhino uses separate settings.
Changing the default value does not change existing settings.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Administer</strong> &gt; <strong>Settings</strong>.</p>
</li>
<li>
<p>Click the <strong>Content</strong> tab.</p>
</li>
<li>
<p>Change the default download policy depending on your requirements:</p>
<div class="ulist">
<ul>
<li>
<p>To change the default download policy for a Red Hat repository, change the value of the <strong>Default Red Hat Repository download policy</strong> setting.</p>
</li>
<li>
<p>To change the default download policy for a non-Red Hat custom repository, change the value of the <strong>Default Custom Repository download policy</strong> setting.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>To change the default download policy for Red Hat repositories to one of <code>immediate</code> or <code>on_demand</code>, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre># hammer settings set \
--name default_redhat_download_policy \
--value <em>immediate</em></pre>
</div>
</div>
</li>
<li>
<p>To change the default download policy for a custom repository to one of <code>immediate</code> or <code>on_demand</code>, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre># hammer settings set \
--name default_download_policy \
--value <em>immediate</em></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="changing_the_download_policy_for_a_repository_content-management"><a class="anchor" href="#changing_the_download_policy_for_a_repository_content-management"></a>4.22. Changing the Download Policy for a Repository</h3>
<div class="paragraph">
<p>You can set the download policy for a repository.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Select the required product name.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click the required repository name, locate the <strong>Download Policy</strong> field, and click the edit icon.</p>
</li>
<li>
<p>From the list, select the required download policy and then click <strong>Save</strong>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List the repositories for an organization:</p>
<div class="listingblock">
<div class="content">
<pre># hammer repository list \
--organization-label <em>My_Organization_Label</em></pre>
</div>
</div>
</li>
<li>
<p>Change the download policy for a repository to <code>immediate</code> or <code>on_demand</code>:</p>
<div class="listingblock">
<div class="content">
<pre># hammer repository update \
--download-policy immediate \
--name "<em>My_Repository</em>" \
--organization-label <em>My_Organization_Label</em> \
--product "<em>My_Product</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Mirroring_Policies_Overview_content-management"><a class="anchor" href="#Mirroring_Policies_Overview_content-management"></a>4.23. Mirroring Policies Overview</h3>
<div class="paragraph">
<p>Mirroring keeps the local repository exactly in synchronization with the upstream repository.
If any content is removed from the upstream repository since the last synchronization, with the next synchronization, it will be removed from the local repository as well.</p>
</div>
<div class="paragraph">
<p>You can use mirroring policies for finer control over mirroring of repodata and content when synchronizing a repository.
For example, if it is not possible to mirror the repodata for a repository, you can set the mirroring policy to mirror only content for this repository.</p>
</div>
<div class="paragraph">
<p>orcharhino&#160;Server has the following mirroring policies:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Additive</dt>
<dd>
<p>Neither the content nor the repodata is mirrored.
Thus, only new content added since the last synchronization is added to the local repository and nothing is removed.</p>
</dd>
<dt class="hdlist1">Content Only</dt>
<dd>
<p>Mirrors only content and not the repodata.
Some repositories do not support metadata mirroring, in such cases you can set the mirroring policy to content only to only mirror the content.</p>
</dd>
<dt class="hdlist1">Complete Mirroring</dt>
<dd>
<p>Mirrors content as well as repodata.
This is the fastest method.
This mirroring policy is only available for Yum content.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="Changing_the_Mirroring_Policy_for_a_Repository_content-management"><a class="anchor" href="#Changing_the_Mirroring_Policy_for_a_Repository_content-management"></a>4.24. Changing the Mirroring Policy for a Repository</h3>
<div class="paragraph">
<p>You can set the mirroring policy for a repository.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the orcharhino management UI, see the <a href="#cli-Changing_the_Mirroring_Policy_for_a_Repository_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Select the product name.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click the repository name, locate the <strong>Mirroring Policy</strong> field, and click the edit icon.</p>
</li>
<li>
<p>From the list, select a mirroring policy and click <strong>Save</strong>.</p>
</li>
</ol>
</div>
<div id="cli-Changing_the_Mirroring_Policy_for_a_Repository_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List the repositories for an organization:</p>
<div class="listingblock">
<div class="content">
<pre># hammer repository list \
--organization-label <em>My_Organization_Label</em></pre>
</div>
</div>
</li>
<li>
<p>Change the mirroring policy for a repository to <code>additive</code>, <code>mirror_complete</code>, or <code>mirror_content_only</code>:</p>
<div class="listingblock">
<div class="content">
<pre># hammer repository update \
--id 1 \
--mirroring-policy mirror_complete</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Uploading_Content_to_custom_rpm_Repositories_content-management"><a class="anchor" href="#Uploading_Content_to_custom_rpm_Repositories_content-management"></a>4.25. Uploading Content to Custom RPM Repositories</h3>
<div class="paragraph">
<p>You can upload individual RPMs and source RPMs to custom RPM repositories.
You can upload RPMs using the orcharhino management UI or the Hammer CLI.
You must use the Hammer CLI to upload source RPMs.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, click <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Click the name of the custom product.</p>
</li>
<li>
<p>In the <strong>Repositories</strong> tab, click the name of the custom RPM repository.</p>
</li>
<li>
<p>Under <strong>Upload Package</strong>, click <strong>Browse&#8230;&#8203;</strong> and select the RPM you want to upload.</p>
</li>
<li>
<p>Click <strong>Upload</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To view all RPMs in this repository, click the number next to <strong>Packages</strong> under <strong>Content Counts</strong>.</p>
</div>
<div class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Enter the following command to upload an RPM:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository upload-content \
--id <em>Repository_ID</em> \
--path <em>/path/to/example-package.rpm</em></pre>
</div>
</div>
</li>
<li>
<p>Enter the following command to upload a source RPM:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository upload-content \
--content-type srpm \
--id <em>Repository_ID</em> \
--path <em>/path/to/example-package.src.rpm</em></pre>
</div>
</div>
<div class="paragraph">
<p>When the upload is complete, you can view information about a source RPM by using the commands <code>hammer srpm list</code> and <code>hammer srpm info --id <em>srpm_ID</em></code>.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="configuring-selinux-to-permit-content-synchronization-on-custom-ports_content-management"><a class="anchor" href="#configuring-selinux-to-permit-content-synchronization-on-custom-ports_content-management"></a>4.26. Configuring SELinux to Permit Content Synchronization on Custom Ports</h3>
<div class="paragraph">
<p>SELinux permits access of orcharhino for content synchronization only on specific ports.
By default, connecting to web servers running on the following ports is permitted: 80, 81, 443, 488, 8008, 8009, 8443, and 9000.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>On orcharhino, to verify the ports that are permitted by SELinux for content synchronization, enter a command as follows:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># semanage port -l | grep ^http_port_t
http_port_t     tcp      80, 81, 443, 488, 8008, 8009, 8443, 9000</pre>
</div>
</div>
</li>
<li>
<p>To configure SELinux to permit a port for content synchronization, for example 10011, enter a command as follows:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># semanage port -a -t http_port_t -p tcp 10011</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Recovering_a_Corrupted_Repository_content-management"><a class="anchor" href="#Recovering_a_Corrupted_Repository_content-management"></a>4.27. Recovering a Corrupted Repository</h3>
<div class="paragraph">
<p>In case of repository corruption, you can recover it by using an advanced synchronization, which has three options:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Optimized Sync</dt>
<dd>
<p>Synchronizes the repository bypassing RPMs that have no detected differences from the upstream RPMs.</p>
</dd>
<dt class="hdlist1">Complete Sync</dt>
<dd>
<p>Synchronizes all RPMs regardless of detected changes.
Use this option if specific RPMs could not be downloaded to the local repository even though they exist in the upstream repository.</p>
</dd>
<dt class="hdlist1">Verify Content Checksum</dt>
<dd>
<p>Synchronizes all RPMs and then verifies the checksum of all RPMs locally.
If the checksum of an RPM differs from the upstream, it re-downloads the RPM.
This option is relevant only for <code>yum</code> repositories.
Use this option if you have one of the following errors:</p>
<div class="ulist">
<ul>
<li>
<p>Specific RPMs cause a <code>404</code> error while synchronizing with <code>yum</code>.</p>
</li>
<li>
<p><code>Package does not match intended download</code> error, which means that specific RPMs are corrupted.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Select the product containing the corrupted repository.</p>
</li>
<li>
<p>Select the name of a repository you want to synchronize.</p>
</li>
<li>
<p>To perform optimized sync or complete sync, select <strong>Advanced Sync</strong> from the <strong>Select Action</strong> menu.</p>
</li>
<li>
<p>Select the required option and click <strong>Sync</strong>.</p>
</li>
<li>
<p>Optional: To verify the checksum, click <strong>Verify Content Checksum</strong> from the <strong>Select Action</strong> menu.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Obtain a list of repository IDs:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository list \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Synchronize a corrupted repository using the necessary option:</p>
<div class="ulist">
<ul>
<li>
<p>For the optimized synchronization:</p>
<div class="listingblock">
<div class="content">
<pre># hammer repository synchronize \
--id <em>My_ID</em></pre>
</div>
</div>
</li>
<li>
<p>For the complete synchronization:</p>
<div class="listingblock">
<div class="content">
<pre># hammer repository synchronize \
--id <em>My_ID</em> \
--skip-metadata-check true</pre>
</div>
</div>
</li>
<li>
<p>For the validate content synchronization:</p>
<div class="listingblock">
<div class="content">
<pre># hammer repository synchronize \
--id <em>My_ID</em> \
--validate-contents true</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Adding_an_HTTP_Proxy_content-management"><a class="anchor" href="#Adding_an_HTTP_Proxy_content-management"></a>4.28. Adding an HTTP Proxy</h3>
<div class="paragraph">
<p>Use this procedure to add HTTP proxies to orcharhino.
You can then specify which HTTP proxy to use for Products, repositories, and supported compute resources.</p>
</div>
<div class="paragraph">
<div class="title">Prerequisites</div>
<p>Your HTTP proxy must allow access to the following hosts:</p>
</div>
<table id="host-names-for-http-proxy_content-management" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Host name</th>
<th class="tableblock halign-left valign-top">Port</th>
<th class="tableblock halign-left valign-top">Protocol</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subscription.rhsm.redhat.com</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cdn.redhat.com</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">*.akamaiedge.net</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>If orcharhino&#160;Server uses a proxy to communicate with subscription.rhsm.redhat.com and cdn.redhat.com then the proxy must not perform SSL inspection on these communications.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the orcharhino management UI, see the <a href="#cli-adding-an-http-proxy">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Infrastructure</strong> &gt; <strong>HTTP Proxies</strong> and select <strong>New HTTP Proxy</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for the HTTP proxy.</p>
</li>
<li>
<p>In the <strong>URL</strong> field, enter the URL for the HTTP proxy, including the port number.</p>
</li>
<li>
<p>If your HTTP proxy requires authentication, enter a <strong>Username</strong> and <strong>Password</strong>.</p>
</li>
<li>
<p>Optional: In the <strong>Test URL</strong> field, enter the HTTP proxy URL, then click <strong>Test Connection</strong> to ensure that you can connect to the HTTP proxy from orcharhino.</p>
</li>
<li>
<p>Click the <strong>Locations</strong> tab and add a location.</p>
</li>
<li>
<p>Click the <strong>Organization</strong> tab and add an organization.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
<div id="cli-adding-an-http-proxy" class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>On orcharhino&#160;Server, enter the following command to add an HTTP proxy:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer http-proxy create \
--name <em>proxy-name</em> \
--url <em>proxy-URL:port-number</em></pre>
</div>
</div>
<div class="paragraph">
<p>If your HTTP proxy requires authentication, add the <code>--username <em>name</em></code> and <code>--password <em>password</em></code> options.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Changing_the_HTTP_Proxy_Policy_for_a_Product_content-management"><a class="anchor" href="#Changing_the_HTTP_Proxy_Policy_for_a_Product_content-management"></a>4.29. Changing the HTTP Proxy Policy for a Product</h3>
<div class="paragraph">
<p>For granular control over network traffic, you can set an HTTP proxy policy for each Product.
A Product&#8217;s HTTP proxy policy applies to all repositories in the Product, unless you set a different policy for individual repositories.</p>
</div>
<div class="paragraph">
<p>To set an HTTP proxy policy for individual repositories, see <a href="#Changing_the_HTTP_Proxy_Policy_for_a_Repository_content-management">Changing the HTTP Proxy Policy for a Repository</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong> and select the checkbox next to each of the Products that you want to change.</p>
</li>
<li>
<p>From the <strong>Select Action</strong> list, select <strong>Manage HTTP Proxy</strong>.</p>
</li>
<li>
<p>Select an <strong>HTTP Proxy Policy</strong> from the list:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Global Default</strong>: Use the global default proxy setting.</p>
</li>
<li>
<p><strong>No HTTP Proxy</strong>: Do not use an HTTP proxy, even if a global default proxy is configured.</p>
</li>
<li>
<p><strong>Use specific HTTP Proxy</strong>: Select an <strong>HTTP Proxy</strong> from the list.
You must add HTTP proxies to orcharhino before you can select a proxy from this list.
For more information, see <a href="#Adding_an_HTTP_Proxy_content-management">Adding an HTTP Proxy</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Update</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Changing_the_HTTP_Proxy_Policy_for_a_Repository_content-management"><a class="anchor" href="#Changing_the_HTTP_Proxy_Policy_for_a_Repository_content-management"></a>4.30. Changing the HTTP Proxy Policy for a Repository</h3>
<div class="paragraph">
<p>For granular control over network traffic, you can set an HTTP proxy policy for each repository.
To use the CLI instead of the orcharhino management UI, see the <a href="#cli-Changing_the_HTTP_Proxy_Policy_for_a_Repository_content-management">CLI procedure</a>.</p>
</div>
<div class="paragraph">
<p>To set the same HTTP proxy policy for all repositories in a Product, see <a href="#Changing_the_HTTP_Proxy_Policy_for_a_Product_content-management">Changing the HTTP Proxy Policy for a Product</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong> and click the name of the Product that contains the repository.</p>
</li>
<li>
<p>In the <strong>Repositories</strong> tab, click the name of the repository.</p>
</li>
<li>
<p>Locate the <strong>HTTP Proxy</strong> field and click the edit icon.</p>
</li>
<li>
<p>Select an <strong>HTTP Proxy Policy</strong> from the list:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Global Default</strong>: Use the global default proxy setting.</p>
</li>
<li>
<p><strong>No HTTP Proxy</strong>: Do not use an HTTP proxy, even if a global default proxy is configured.</p>
</li>
<li>
<p><strong>Use specific HTTP Proxy</strong>: Select an <strong>HTTP Proxy</strong> from the list.
You must add HTTP proxies to orcharhino before you can select a proxy from this list.
For more information, see <a href="#Adding_an_HTTP_Proxy_content-management">Adding an HTTP Proxy</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
<div id="cli-Changing_the_HTTP_Proxy_Policy_for_a_Repository_content-management" class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>On orcharhino&#160;Server, enter the following command, specifying the HTTP proxy policy you want to use:</p>
<div class="listingblock">
<div class="content">
<pre># hammer repository update \
--http-proxy-policy <em>HTTP_Proxy_Policy</em> \
--id <em>Repository_ID</em></pre>
</div>
</div>
<div class="paragraph">
<p>Specify one of the following options for <code>--http-proxy-policy</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>none</code>: Do not use an HTTP proxy, even if a global default proxy is configured.</p>
</li>
<li>
<p><code>global_default_http_proxy</code>: Use the global default proxy setting.</p>
</li>
<li>
<p><code>use_selected_http_proxy</code>: Specify an HTTP proxy using either <code>--http-proxy <em>My_HTTP_Proxy_Name</em></code> or <code>--http-proxy-id <em>My_HTTP_Proxy_ID</em></code>.
To add a new HTTP proxy to orcharhino, see <a href="#Adding_an_HTTP_Proxy_content-management">Adding an HTTP Proxy</a>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Creating_a_Sync_Plan_content-management"><a class="anchor" href="#Creating_a_Sync_Plan_content-management"></a>4.31. Creating a Sync Plan</h3>
<div class="paragraph">
<p>A sync plan checks and updates the content at a scheduled date and time.
In orcharhino, you can create a sync plan and assign products to the plan.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the orcharhino management UI, see the <a href="#cli-creating-a-sync-plan">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Sync Plans</strong> and click <strong>New Sync Plan</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for the plan.</p>
</li>
<li>
<p>Optional: In the <strong>Description</strong> field, enter a description of the plan.</p>
</li>
<li>
<p>From the <strong>Interval</strong> list, select the interval at which you want the plan to run.</p>
</li>
<li>
<p>From the <strong>Start Date</strong> and <strong>Start Time</strong> lists, select when to start running the synchronization plan.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
<div id="cli-creating-a-sync-plan" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>To create the synchronization plan, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer sync-plan create \
--description "<em>My_Description</em>" \
--enabled true \
--interval daily \
--name "<em>My_Products</em>" \
--organization "<em>My_Organization</em>" \
--sync-date "2023-01-01 01:00:00"</pre>
</div>
</div>
</li>
<li>
<p>View the available sync plans for an organization to verify that the sync plan has been created:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer sync-plan list --organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Assigning_a_Sync_Plan_to_a_Product_content-management"><a class="anchor" href="#Assigning_a_Sync_Plan_to_a_Product_content-management"></a>4.32. Assigning a Sync Plan to a Product</h3>
<div class="paragraph">
<p>A sync plan checks and updates the content at a scheduled date and time.
In orcharhino, you can assign a sync plan to products to update content regularly.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the orcharhino management UI, see the <a href="#cli-assigning-a-sync-plan-to-a-product">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content &gt; Products</strong>.</p>
</li>
<li>
<p>Select a product.</p>
</li>
<li>
<p>On the <strong>Details</strong> tab, select a <strong>Sync Plan</strong> from the drop down menu.</p>
</li>
</ol>
</div>
<div id="cli-assigning-a-sync-plan-to-a-product" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Assign a sync plan to a product:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer product set-sync-plan \
--name "<em>My_Product_Name</em>" \
--organization "<em>My_Organization</em>" \
--sync-plan "<em>My_Sync_Plan_Name</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Assigning_a_Sync_Plan_to_Multiple_Products_content-management"><a class="anchor" href="#Assigning_a_Sync_Plan_to_Multiple_Products_content-management"></a>4.33. Assigning a Sync Plan to Multiple Products</h3>
<div class="paragraph">
<p>Use this procedure to assign a sync plan to the products in an organization that have been synchronized at least once and contain at least one repository.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Run the following Bash script:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-Bash" data-lang="Bash">ORG="<em>My_Organization</em>"
SYNC_PLAN="daily_sync_at_3_a.m"

hammer sync-plan create --name $SYNC_PLAN --interval daily --sync-date "2023-04-5 03:00:00" --enabled true --organization $ORG
for i in $(hammer --no-headers --csv --csv-separator="|" product list --organization $ORG --per-page 999 | grep -vi not_synced | awk -F'|' '$5 != "0" { print $1}')
do
  hammer product set-sync-plan --sync-plan $SYNC_PLAN --organization $ORG --id $i
done</code></pre>
</div>
</div>
</li>
<li>
<p>After executing the script, view the products assigned to the sync plan:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer product list --organization $ORG --sync-plan $SYNC_PLAN</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Limiting_Synchronization_Concurrency_content-management"><a class="anchor" href="#Limiting_Synchronization_Concurrency_content-management"></a>4.34. Limiting Synchronization Concurrency</h3>
<div class="paragraph">
<p>By default, each Repository Synchronization job can fetch up to ten files at a time.
This can be adjusted on a per repository basis.</p>
</div>
<div class="paragraph">
<p>Increasing the limit may improve performance, but can cause the upstream server to be overloaded or start rejecting requests.
If you are seeing Repository syncs fail due to the upstream servers rejecting requests, you may want to try lowering the limit.</p>
</div>
<div class="listingblock">
<div class="title">CLI procedure</div>
<div class="content">
<pre class="nowrap"># hammer repository update \
--download-concurrency 5 \
--id <em>Repository_ID</em> \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Importing_a_Custom_GPG_Key_content-management"><a class="anchor" href="#Importing_a_Custom_GPG_Key_content-management"></a>4.35. Importing a Custom GPG Key</h3>
<div class="paragraph">
<p>When clients are consuming signed custom content, ensure that the clients are configured to validate the installation of packages with the appropriate GPG Key.
This helps to ensure that only packages from authorized sources can be installed.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the orcharhino management UI, see the <a href="#cli-importing-a-gpg-key">CLI procedure</a>.</p>
</div>
<div class="paragraph">
<div class="title">Prerequisites</div>
<p>Ensure that you have a copy of the GPG key used to sign the RPM content that you want to use and manage in orcharhino.
Most RPM distribution providers provide their GPG Key on their website.
You can also extract this manually from an RPM:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download a copy of the version specific repository package to your client system:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ wget <em>http://www.example.com/9.5/example-9.5-2.noarch.rpm</em></pre>
</div>
</div>
</li>
<li>
<p>Extract the RPM file without installing it:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ rpm2cpio <em>example-9.5-2.noarch.rpm</em> | cpio -idmv</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>The GPG key is located relative to the extraction at <code>etc/pki/rpm-gpg/RPM-GPG-KEY-<em>EXAMPLE-95</em></code>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Content Credentials</strong> and in the upper-right of the window, click <strong>Create Content Credential</strong>.</p>
</li>
<li>
<p>Enter the name of your repository and select <strong>GPG Key</strong> from the <strong>Type</strong> list.</p>
</li>
<li>
<p>Either paste the GPG key into the <strong>Content Credential Contents</strong> field, or click <strong>Browse</strong> and select the GPG key file that you want to import.</p>
<div class="paragraph">
<p>If your custom repository contains content signed by multiple GPG keys, you must enter all required GPG keys in the <strong>Content Credential Contents</strong> field with new lines between each key, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>-----BEGIN PGP PUBLIC KEY BLOCK-----

mQINBFy/HE4BEADttv2TCPzVrre+aJ9f5QsR6oWZMm7N5Lwxjm5x5zA9BLiPPGFN
4aTUR/g+K1S0aqCU+ZS3Rnxb+6fnBxD+COH9kMqXHi3M5UNzbp5WhCdUpISXjjpU
XIFFWBPuBfyr/FKRknFH15P+9kLZLxCpVZZLsweLWCuw+JKCMmnA
=F6VG
-----END PGP PUBLIC KEY BLOCK-----

-----BEGIN PGP PUBLIC KEY BLOCK-----

mQINBFw467UBEACmREzDeK/kuScCmfJfHJa0Wgh/2fbJLLt3KSvsgDhORIptf+PP
OTFDlKuLkJx99ZYG5xMnBG47C7ByoMec1j94YeXczuBbynOyyPlvduma/zf8oB9e
Wl5GnzcLGAnUSRamfqGUWcyMMinHHIKIc1X1P4I=
=WPpI
-----END PGP PUBLIC KEY BLOCK-----</pre>
</div>
</div>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
<div id="cli-importing-a-gpg-key" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Copy the GPG key to your orcharhino&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ scp ~/etc/pki/rpm-gpg/RPM-GPG-KEY-<em>EXAMPLE-95</em> root@orcharhino.example.com:~/.</pre>
</div>
</div>
</li>
<li>
<p>Upload the GPG key to orcharhino:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-credentials create \
--content-type gpg_key \
--name "<em>My_GPG_Key</em>" \
--organization "<em>My_Organization</em>" \
--path ~/RPM-GPG-KEY-<em>EXAMPLE-95</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Restricting_Custom_Repositories_to_RHEL_9_content-management"><a class="anchor" href="#Restricting_Custom_Repositories_to_RHEL_9_content-management"></a>4.36. Restricting Custom Repositories to RHEL 9 in orcharhino</h3>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Select the product that contains the repository sets that you want to restrict.</p>
</li>
<li>
<p>In the <strong>Repositories</strong> tab, click the repository that you want to restrict.</p>
</li>
<li>
<p>From the <strong>Restrict to OS</strong> list, select the operating system to include Red&#160;Hat Enterprise Linux operating systems for their corresponding Red&#160;Hat Enterprise Linux repositories.</p>
</li>
<li>
<p>Click <strong>Save</strong> to submit your change.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Creating_an_Application_Life_Cycle_content-management"><a class="anchor" href="#Creating_an_Application_Life_Cycle_content-management"></a>5. Managing Application Life Cycles</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter outlines the application life cycle in orcharhino and how to create and remove application life cycles for orcharhino and orcharhino&#160;Proxy.</p>
</div>
<div class="sect2">
<h3 id="introduction_to_application_life_cycle_content-management"><a class="anchor" href="#introduction_to_application_life_cycle_content-management"></a>5.1. Introduction to Application Life Cycle</h3>
<div class="paragraph">
<p>The <em>application life cycle</em> is a concept central to orcharhino&#8217;s content management functions.
The application life cycle defines how a particular system and its software look at a particular stage.
For example, an application life cycle might be simple; you might only have a development stage and production stage.
In this case the application life cycle might look like this:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Development</p>
</li>
<li>
<p>Production</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>However, a more complex application life cycle might have further stages, such as a phase for testing or a beta release.
This adds extra stages to the application life cycle:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Development</p>
</li>
<li>
<p>Testing</p>
</li>
<li>
<p>Beta Release</p>
</li>
<li>
<p>Production</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>orcharhino provides methods to customize each application life cycle stage so that it suits your specifications.</p>
</div>
<div class="paragraph">
<p>Each stage in the application life cycle is called an <em>environment</em> in orcharhino.
Each environment uses a specific collection of content.
orcharhino defines these content collections as a Content View.
Each Content View acts as a filter where you can define what repositories, and packages to include in a particular environment.
This provides a method for you to define specific sets of content to designate to each environment.</p>
</div>
<div class="paragraph">
<p>For example, an email server might only require a simple application life cycle where you have a production-level server for real-world use and a test server for trying out the latest mail server packages.
When the test server passes the initial phase, you can set the production-level server to use the new packages.</p>
</div>
<div class="paragraph">
<p>Another example is a development life cycle for a software product.
To develop a new piece of software in a development environment, test it in a quality assurance environment, pre-release as a beta, then release the software as a production-level application.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/application-life-cycle-orcharhino.svg" alt="The orcharhino Application Life Cycle">
</div>
<div class="title">Figure 1. The orcharhino Application Life Cycle</div>
</div>
</div>
<div class="sect2">
<h3 id="Content_Promotion_across_the_Application_Life_Cycle_content-management"><a class="anchor" href="#Content_Promotion_across_the_Application_Life_Cycle_content-management"></a>5.2. Content Promotion across the Application Life Cycle</h3>
<div class="paragraph">
<p>In the application life cycle chain, when content moves from one environment to the next, this is called <em>promotion</em>.</p>
</div>
<div class="paragraph">
<div class="title">Example Content Promotion Across orcharhino Life Cycle Environments</div>
<p>Each environment contains a set of systems registered to orcharhino.
These systems only have access to repositories relevant to their environment.
When you promote packages from one environment to the next, the target environment&#8217;s repositories receive new package versions.
As a result, each system in the target environment can update to the new package versions.</p>
</div>
<div class="paragraph">
<p>This example uses a <code>.rpm</code> package, but you can promote any type of content across the application life cycle.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Development</th>
<th class="tableblock halign-left valign-top">Testing</th>
<th class="tableblock halign-left valign-top">Production</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example_software</em>-1.1-0.noarch.rpm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example_software</em>-1.0-0.noarch.rpm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example_software</em>-1.0-0.noarch.rpm</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>After completing development on the patch, you promote the package to the Testing environment so the Quality Engineering team can review the patch.
The application life cycle then contains the following package versions in each environment:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Development</th>
<th class="tableblock halign-left valign-top">Testing</th>
<th class="tableblock halign-left valign-top">Production</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example_software</em>-1.1-0.noarch.rpm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>example_software</em>-1.1-0.noarch.rpm</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example_software</em>-1.0-0.noarch.rpm</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>While the Quality Engineering team reviews the patch, the Development team starts work on <em>example_software</em> 2.0.
This results in the following application life cycle:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Development</th>
<th class="tableblock halign-left valign-top">Testing</th>
<th class="tableblock halign-left valign-top">Production</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>example_software</em>-2.0-0.noarch.rpm</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example_software</em>-1.1-0.noarch.rpm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example_software</em>-1.0-0.noarch.rpm</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The Quality Engineering team completes their review of the patch.
Now <em>example_software</em> 1.1 is ready to release.
You promote 1.1 to the <em>Production</em> environment:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Development</th>
<th class="tableblock halign-left valign-top">Testing</th>
<th class="tableblock halign-left valign-top">Production</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example_software</em>-2.0-0.noarch.rpm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example_software</em>-1.1-0.noarch.rpm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>example_software</em>-1.1-0.noarch.rpm</strong></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The Development team completes their work on <em>example_software</em> 2.0 and promotes it to the Testing environment:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Development</th>
<th class="tableblock halign-left valign-top">Testing</th>
<th class="tableblock halign-left valign-top">Production</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example_software</em>-2.0-0.noarch.rpm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>example_software</em>-2.0-0.noarch.rpm</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example_software</em>-1.1-0.noarch.rpm</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Finally, the Quality Engineering team reviews the package.
After a successful review, promote the package to the <em>Production</em> environment:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Development</th>
<th class="tableblock halign-left valign-top">Testing</th>
<th class="tableblock halign-left valign-top">Production</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example_software</em>-2.0-0.noarch.rpm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example_software</em>-2.0-0.noarch.rpm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>example_software</em>-2.0-0.noarch.rpm</strong></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For more information, see <a href="#Promoting_a_Content_View_content-management">Promoting a Content View</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Creating_a_Life_Cycle_Environment_Path_content-management"><a class="anchor" href="#Creating_a_Life_Cycle_Environment_Path_content-management"></a>5.3. Creating a Life Cycle Environment Path</h3>
<div class="paragraph">
<p>To create an application life cycle for developing and releasing software, use the <em>Library</em> environment as the initial environment to create environment paths.
Then optionally add additional environments to the environment paths.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle Environments</strong>.</p>
</li>
<li>
<p>Click <strong>New Environment Path</strong> to start a new application life cycle.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for your environment.</p>
</li>
<li>
<p>In the <strong>Description</strong> field, enter a description for your environment.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
<li>
<p>Optional: To add an environment to the environment path, click <strong>Add New Environment</strong>, complete the <strong>Name</strong> and <strong>Description</strong> fields, and select the prior environment from the <strong>Prior Environment</strong> list.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>To create an environment path, enter the <code>hammer lifecycle-environment create</code> command and specify the Library environment with the <code>--prior</code> option:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer lifecycle-environment create \
--name "<em>Environment Path Name</em>" \
--description "<em>Environment Path Description</em>" \
--prior "Library" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Optional: To add an environment to the environment path, enter the <code>hammer lifecycle-environment create</code> command and specify the parent environment with the <code>--prior</code> option:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer lifecycle-environment create \
--name "<em>Environment Name</em>" \
--description "<em>Environment Description</em>" \
--prior "<em>Prior Environment Name</em>" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>To view the chain of the life cycle environment, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer lifecycle-environment paths --organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Removing_Life_Cycle_Environments_from_Server_content-management"><a class="anchor" href="#Removing_Life_Cycle_Environments_from_Server_content-management"></a>5.4. Removing Life Cycle Environments from orcharhino&#160;Server</h3>
<div class="paragraph">
<p>Use this procedure to remove a life cycle environment.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Life Cycle Environments</strong>.</p>
</li>
<li>
<p>Click the name of the life cycle environment that you want to remove, and then click <strong>Remove Environment</strong>.</p>
</li>
<li>
<p>Click <strong>Remove</strong> to remove the environment.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List the life cycle environments for your organization and note the name of the life cycle environment you want to remove:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer lifecycle-environment list \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Use the <code>hammer lifecycle-environment delete</code> command to remove an environment:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer lifecycle-environment delete \
--name "<em>My_Environment</em>" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Removing_Life_Cycle_Environments_from_smart_proxy_content-management"><a class="anchor" href="#Removing_Life_Cycle_Environments_from_smart_proxy_content-management"></a>5.5. Removing Life Cycle Environments from orcharhino&#160;Proxy</h3>
<div class="paragraph">
<p>When life cycle environments are no longer relevant to the host system or environments are added incorrectly to orcharhino&#160;Proxy, you can remove the life cycle environments from orcharhino&#160;Proxy.</p>
</div>
<div class="paragraph">
<p>You can use both the orcharhino management UI and the Hammer CLI to remove life cycle environments from orcharhino&#160;Proxy.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Infrastructure</strong> &gt; <strong>orcharhino&#160;Proxies</strong>, and select the orcharhino&#160;Proxy that you want to remove a life cycle from.</p>
</li>
<li>
<p>Click <strong>Edit</strong> and click the <strong>Life Cycle Environments</strong> tab.</p>
</li>
<li>
<p>From the right menu, select the life cycle environments that you want to remove from orcharhino&#160;Proxy, and then click <strong>Submit</strong>.</p>
</li>
<li>
<p>To synchronize orcharhino&#160;Proxy&#8217;s content, click the <strong>Overview</strong> tab, and then click <strong>Synchronize</strong>.</p>
</li>
<li>
<p>Select either <strong>Optimized Sync</strong> or <strong>Complete Sync</strong>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Select orcharhino&#160;Proxy that you want from the list and take note of its <strong>id</strong>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer proxy list</pre>
</div>
</div>
</li>
<li>
<p>To verify orcharhino&#160;Proxy&#8217;s details, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer proxy info \
--id <em>My</em>orcharhino&#160;Proxy_ID_</pre>
</div>
</div>
</li>
<li>
<p>Verify the list of life cycle environments currently attached to orcharhino&#160;Proxy and take note of the <strong>Environment ID</strong>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer proxy content lifecycle-environments \
--id <em>My</em>orcharhino&#160;Proxy_ID_</pre>
</div>
</div>
</li>
<li>
<p>Remove the life cycle environment from orcharhino&#160;Proxy:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer proxy content remove-lifecycle-environment \
--id <em>My</em>orcharhino&#160;Proxy_ID_
--lifecycle-environment-id <em>My_Lifecycle_Environment_ID</em></pre>
</div>
</div>
<div class="paragraph">
<p>Repeat this step for every life cycle environment that you want to remove from orcharhino&#160;Proxy.</p>
</div>
</li>
<li>
<p>Synchronize the content from orcharhino&#160;Server&#8217;s environment to orcharhino&#160;Proxy:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer proxy content synchronize \
--id <em>My</em>orcharhino-proxy_ID_</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Adding_Life_Cycle_Environments_content-management"><a class="anchor" href="#Adding_Life_Cycle_Environments_content-management"></a>5.6. Adding Life Cycle Environments to orcharhino&#160;Proxies</h3>
<div class="paragraph">
<p>If your orcharhino&#160;Proxy has the content functionality enabled, you must add an environment so that orcharhino&#160;Proxy can synchronize content from orcharhino&#160;Server and provide content to host systems.</p>
</div>
<div class="paragraph">
<p>Do not assign the <em>Library</em> lifecycle environment to your orcharhino&#160;Proxy because it triggers an automated orcharhino&#160;Proxy sync every time the CDN updates a repository.
This might consume multiple system resources on orcharhino&#160;Proxies, network bandwidth between orcharhino and orcharhino&#160;Proxies, and available disk space on orcharhino&#160;Proxies.</p>
</div>
<div class="paragraph">
<p>You can use Hammer CLI on orcharhino&#160;Server or the orcharhino management UI.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Infrastructure</strong> &gt; <strong>orcharhino&#160;Proxies</strong>, and select the orcharhino&#160;Proxy that you want to add a life cycle to.</p>
</li>
<li>
<p>Click <strong>Edit</strong> and click the <strong>Life Cycle Environments</strong> tab.</p>
</li>
<li>
<p>From the left menu, select the life cycle environments that you want to add to orcharhino&#160;Proxy and click <strong>Submit</strong>.</p>
</li>
<li>
<p>To synchronize the content on the orcharhino&#160;Proxy, click the <strong>Overview</strong> tab and click <strong>Synchronize</strong>.</p>
</li>
<li>
<p>Select either <strong>Optimized Sync</strong> or <strong>Complete Sync</strong>.</p>
<div class="paragraph">
<p>For definitions of each synchronization type, see <a href="https://docs.theforeman.org/3.4/Managing_Content/index-orcharhino.html#Recovering_a_Corrupted_Repository_content-management">Recovering a Repository</a>.</p>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>To display a list of all orcharhino&#160;Proxies, on orcharhino&#160;Server, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer proxy list</pre>
</div>
</div>
<div class="paragraph">
<p>Note the orcharhino&#160;Proxy ID of the orcharhino&#160;Proxy that you want to add a life cycle to.</p>
</div>
</li>
<li>
<p>Using the ID, verify the details of your orcharhino&#160;Proxy:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer proxy info \
--id <em>My</em>orcharhino-proxy_ID_</pre>
</div>
</div>
</li>
<li>
<p>To view the life cycle environments available for your orcharhino&#160;Proxy, enter the following command and note the ID and the organization name:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer proxy content available-lifecycle-environments \
--id <em>My</em>orcharhino-proxy_ID_</pre>
</div>
</div>
</li>
<li>
<p>Add the life cycle environment to your orcharhino&#160;Proxy:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer proxy content add-lifecycle-environment \
--id <em>My</em>orcharhino-proxy_ID_ \
--lifecycle-environment-id <em>My_Lifecycle_Environment_ID</em>
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>Repeat for each life cycle environment you want to add to orcharhino&#160;Proxy.</p>
</div>
</li>
<li>
<p>Synchronize the content from orcharhino to orcharhino&#160;Proxy.</p>
<div class="ulist">
<ul>
<li>
<p>To synchronize all content from your orcharhino&#160;Server environment to orcharhino&#160;Proxy, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer proxy content synchronize \
--id <em>My</em>orcharhino-proxy_ID_</pre>
</div>
</div>
</li>
<li>
<p>To synchronize a specific life cycle environment from your orcharhino&#160;Server to orcharhino&#160;Proxy, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer proxy content synchronize \
--id <em>My</em>orcharhino-proxy_ID_
--lifecycle-environment-id <em>My_Lifecycle_Environment_ID</em></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Managing_Content_Views_content-management"><a class="anchor" href="#Managing_Content_Views_content-management"></a>6. Managing Content Views</h2>
<div class="sectionbody">
<div class="paragraph">
<p>orcharhino uses Content Views to create customized repositories from the repositories.
To do this, you must define which repositories to use and then apply certain filters to the content.
These filters include package filters, package group filters, errata filters, module stream filters, and container image tag filters.
You can use Content Views to define which software versions a particular environment uses.
For example, a <em>Production</em> environment might use a Content View containing older package versions, while a <em>Development</em> environment might use a Content View containing newer package versions.</p>
</div>
<div class="paragraph">
<p>Alternatively, a <em>Default Organization View</em> is an application-controlled Content View for all content that is synchronized to orcharhino.
This type is useful if you want to register a host to orcharhino and access content using a subscription, without manipulating content views and lifecycle environments.</p>
</div>
<div class="paragraph">
<p>Each Content View creates a set of repositories across each environment, which orcharhino&#160;Server stores and manages.
When you promote a Content View from one environment to the next environment in the application life cycle, the respective repository on orcharhino&#160;Server updates and publishes the packages.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">Development</th>
<th class="tableblock halign-left valign-top">Testing</th>
<th class="tableblock halign-left valign-top">Production</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Content View Version and Contents</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version 2 &#8211; <em>example_software</em>-1.1-0.noarch.rpm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version 1 &#8211; <em>example_software</em>-1.0-0.noarch.rpm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version 1 &#8211; <em>example_software</em>-1.0-0.noarch.rpm</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The repositories for Testing and Production contain the <code><em>example_software</em>-1.0-0.noarch.rpm</code> package.
If you promote Version 2 of the Content View from Development to Testing, the repository for Testing regenerates and then contains the <code><em>example_software</em>-1.1-0.noarch.rpm</code> package:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">Development</th>
<th class="tableblock halign-left valign-top">Testing</th>
<th class="tableblock halign-left valign-top">Production</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Content View Version and Contents</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version 2 &#8211; <em>example_software</em>-1.1-0.noarch.rpm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Version 2 &#8211; <em>example_software</em>-1.1-0.noarch.rpm</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version 1 &#8211; <em>example_software</em>-1.0-0.noarch.rpm</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This ensures systems are designated to a specific environment but receive updates when that environment uses a new version of the Content View.</p>
</div>
<div class="paragraph">
<p>The general workflow for creating Content Views for filtering and creating snapshots is as follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a Content View.</p>
</li>
<li>
<p>Add one or more repositories that you want to the Content View.</p>
</li>
<li>
<p>Optional: Create one or more filters to refine the content of the Content View.
For more information, see <a href="#Content_Filter_Examples_content-management">Content Filter Examples</a>.</p>
</li>
<li>
<p>Optional: Resolve any package dependencies for a Content View.
For more information, see <a href="#Resolving_Package_Dependencies_content-management">Resolving Package Dependencies</a>.</p>
</li>
<li>
<p>Publish the Content View.</p>
</li>
<li>
<p>Optional: Promote the Content View to another environment.
For more information, see <a href="#Promoting_a_Content_View_content-management">Promoting a Content View</a>.</p>
</li>
<li>
<p>Attach the content host to the Content View.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If a repository is not associated with the Content View, the file <code>/etc/yum.repos.d/redhat.repo</code> remains empty and systems registered to it cannot receive updates.</p>
</div>
<div class="paragraph">
<p>Hosts can only be associated with a single Content View.
To associate a host with multiple Content Views, create a composite Content View.
For more information, see <a href="#Creating_a_Composite_Content_View_content-management">Creating a Composite Content View</a>.</p>
</div>
<div class="sect2">
<h3 id="Creating_a_Content_View_content-management"><a class="anchor" href="#Creating_a_Content_View_content-management"></a>6.1. Creating a Content View</h3>
<div class="paragraph">
<p>Use this procedure to create a simple Content View.
To use the CLI instead of the orcharhino management UI, see the <a href="#cli-creating-a-content-view_content-management">CLI procedure</a>.</p>
</div>
<div class="paragraph">
<div class="title">Prerequisites</div>
<p>While you can stipulate whether you want to resolve any package dependencies on a Content View by Content View basis, you might want to change the default orcharhino settings to enable or disable package resolution for all Content Views.
For more information, see <a href="#Resolving_Package_Dependencies_content-management">Resolving Package Dependencies</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Content Views</strong> and click <strong>Create content view</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for the view.
orcharhino automatically completes the <strong>Label</strong> field from the name you enter.</p>
</li>
<li>
<p>In the <strong>Description</strong> field, enter a description of the view.</p>
</li>
<li>
<p>In the <strong>Type</strong> field, select a <strong>Content view</strong> or a <strong>Composite content view</strong>.</p>
</li>
<li>
<p>Optional: If you want to solve dependencies automatically every time you publish this Content View, select the <strong>Solve dependencies</strong> checkbox.
Dependency solving slows the publishing time and might ignore any Content View filters you use.
This can also cause errors when resolving dependencies for errata.</p>
</li>
<li>
<p>Optional: If you want to designate this Content View for importing from an upstream server, select the <strong>Import only</strong> checkbox.
Import-only content views cannot be published directly.</p>
</li>
<li>
<p>Click <strong>Create content view</strong>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Content View Steps</div>
<ol class="arabic">
<li>
<p>Click <strong>Create content view</strong> to create the Content View.</p>
</li>
<li>
<p>In the <strong>Repositories</strong> tab, select the repository from the <strong>Type</strong> list that you want to add to your Content View, select the checkbox next to the available repositories you want to add, then click <strong>Add repositories</strong>.</p>
</li>
<li>
<p>Click <strong>Publish new version</strong> and in the <strong>Description</strong> field, enter information about the version to log changes.</p>
</li>
<li>
<p>Optional: You can enable a promotion path by clicking <strong>Promote</strong> to <strong>Select a lifecycle environment from the available promotion paths to promote new version</strong>.</p>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Review</strong> page, you can review the environments you are trying to publish.</p>
</li>
<li>
<p>Click <strong>Finish</strong>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<strong>Remove</strong> and <strong>Delete</strong> are similar but the <strong>Delete</strong> option deletes an entire Content View and the versions associated with that lifecycle environment.
The <strong>Remove</strong> option allows you to choose which version you want removed from the lifecycle environment.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can view the Content View in the Content Views window.
To view more information about the Content View, click the Content View name.
To register a host to your Content View, see <a href="https://docs.theforeman.org/3.4/Managing_Hosts/index-orcharhino.html#Registering_Hosts_managing-hosts">Registering Hosts</a> in <em>Managing Hosts</em>.</p>
</div>
<div id="cli-creating-a-content-view_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Obtain a list of repository IDs:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository list --organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Create the Content View and add repositories:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view create \
--description "<em>My_Content_View</em>" \
--name "<em>My_Content_View</em>" \
--organization "<em>My_Organization</em>" \
--repository-ids 1,2</pre>
</div>
</div>
<div class="paragraph">
<p>For the <code>--repository-ids</code> option, you can find the IDs in the output of the <code>hammer repository list</code> command.</p>
</div>
</li>
<li>
<p>Publish the view:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view publish \
--description "<em>My_Content_View</em>" \
--name "<em>My_Content_View</em>" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Optional: To add a repository to an existing Content View, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">#hammer content-view add-repository \
--name "<em>My_Content_View</em>" \
--organization "<em>My_Organization</em>" \
--repository-id <em>repository_ID</em></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>orcharhino&#160;Server creates the new version of the view and publishes it to the Library environment.</p>
</div>
</div>
<div class="sect2">
<h3 id="Viewing_Module_Streams_content-management"><a class="anchor" href="#Viewing_Module_Streams_content-management"></a>6.2. Viewing Module Streams</h3>
<div class="paragraph">
<p>In orcharhino, you can view the module streams of the repositories in your Content Views.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the orcharhino management UI, see the <a href="#cli-Viewing_Module_Streams_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to a published version of a <strong>Content View</strong> &gt; <strong>Module Streams</strong> to view the module streams that are available for the Content Types.</p>
</li>
<li>
<p>Use the <strong>Search</strong> field to search for specific modules.</p>
</li>
<li>
<p>To view the information about the module, click the module and its corresponding tabs to include <strong>Details</strong>, <strong>Repositories</strong>, <strong>Profiles</strong>, and <strong>Artifacts</strong>.</p>
</li>
</ol>
</div>
<div id="cli-Viewing_Module_Streams_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all organizations:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer organization list</pre>
</div>
</div>
</li>
<li>
<p>View all module streams for your organization:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer module-stream list \
--organization-id <em>My_Organization_ID</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Promoting_a_Content_View_content-management"><a class="anchor" href="#Promoting_a_Content_View_content-management"></a>6.3. Promoting a Content View</h3>
<div class="paragraph">
<p>Use this procedure to promote Content Views across different lifecycle environments.
To use the CLI instead of the orcharhino management UI, see the <a href="#cli-promoting-a-content-view_content-management">CLI procedure</a>.</p>
</div>
<div class="paragraph">
<div class="title">Permission Requirements for Content View Promotion</div>
<p>Non-administrator users require two permissions to promote a Content View to an environment:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>promote_or_remove_content_views</code></p>
</li>
<li>
<p><code>promote_or_remove_content_views_to_environment</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The <code>promote_or_remove_content_views</code> permission restricts which Content Views a user can promote.</p>
</div>
<div class="paragraph">
<p>The <code>promote_or_remove_content_views_to_environment</code> permission restricts the environments to which a user can promote Content Views.</p>
</div>
<div class="paragraph">
<p>With these permissions you can assign users permissions to promote certain Content Views to certain environments, but not to other environments.
For example, you can limit a user so that they are permitted to promote to test environments, but not to production environments.</p>
</div>
<div class="paragraph">
<p>You must assign both permissions to a user to allow them to promote Content Views.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Content Views</strong> and select the Content View that you want to promote.</p>
</li>
<li>
<p>Select the version that you want to promote, click the vertical ellipsis icon, and click <strong>Promote</strong>.</p>
</li>
<li>
<p>Select the environment where you want to promote the Content View and click <strong>Promote</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now the repository for the Content View appears in all environments.</p>
</div>
<div id="cli-promoting-a-content-view_content-management" class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Promote the Content View using the <code>hammer content-view version promote</code> each time:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view version promote \
--content-view "Database" \
--version 1 \
--to-lifecycle-environment "Development" \
--organization "<em>My_Organization</em>"
# hammer content-view version promote \
--content-view "Database" \
--version 1 \
--to-lifecycle-environment "Testing" \
--organization "<em>My_Organization</em>"
# hammer content-view version promote \
--content-view "Database" \
--version 1 \
--to-lifecycle-environment "Production" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>Now the database content is available in all environments.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>To register a host to your Content View, see <a href="https://docs.theforeman.org/3.4/Managing_Hosts/index-orcharhino.html#Registering_Hosts_managing-hosts">Registering Hosts</a> in <em>Managing Hosts</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Promoting_a_Content_View_Across_All_Life_Cycle_Environments_within_an_Organization_content-management"><a class="anchor" href="#Promoting_a_Content_View_Across_All_Life_Cycle_Environments_within_an_Organization_content-management"></a>6.4. Promoting a Content View Across All Life Cycle Environments within an Organization</h3>
<div class="paragraph">
<p>Use this procedure to promote Content Views across all lifecycle environments within an organization.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>To promote a selected Content View version from Library across all life cycle environments within an organization, run the following Bash script:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-Bash" data-lang="Bash">ORG="<em>My_Organization</em>"
CVV_ID=<em>3</em>

for i in $(hammer --no-headers --csv lifecycle-environment list --organization $ORG | awk -F, {'print $1'} | sort -n)
do
   hammer content-view version promote --organization $ORG --to-lifecycle-environment-id $i --id $CVV_ID
done</code></pre>
</div>
</div>
</li>
<li>
<p>Display information about your Content View version to verify that it is promoted to the required lifecycle environments:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">#hammer content-view version info --id <em>3</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Composite_Content_Views_Overview_content-management"><a class="anchor" href="#Composite_Content_Views_Overview_content-management"></a>6.5. Composite Content Views Overview</h3>
<div class="paragraph">
<p>A Composite Content View combines the content from several Content Views.
For example, you might have separate Content Views to manage an operating system and an application individually.
You can use a Composite Content View to merge the contents of both Content Views into a new repository.
The repositories for the original Content Views still exist but a new repository also exists for the combined content.</p>
</div>
<div class="paragraph">
<p>If you want to develop an application that supports different database servers.
The <em>example_application</em> appears as:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><em>example_software</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Database</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operating System</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Example of four separate Content Views:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Red&#160;Hat Enterprise Linux (Operating System)</p>
</li>
<li>
<p>PostgreSQL (Database)</p>
</li>
<li>
<p>MariaDB (Database)</p>
</li>
<li>
<p><em>example_software</em> (Application)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>From the previous Content Views, you can create two Composite Content Views.</p>
</div>
<div class="paragraph">
<p>Example Composite Content View for a PostgreSQL database:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Composite Content View 1 &#8211; <em>example_software</em> on PostgreSQL</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example_software</em> (Application)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PostgreSQL (Database)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Red&#160;Hat Enterprise Linux (Operating System)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Example Composite Content View for a MariaDB:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Composite Content View 2 &#8211; <em>example_software</em> on MariaDB</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example_software</em> (Application)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MariaDB (Database)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Red&#160;Hat Enterprise Linux (Operating System)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Each Content View is then managed and published separately.
When you create a version of the application, you publish a new version of the Composite Content Views.
You can also select the <strong>Auto Publish</strong> option when creating a Composite Content View, and then the Composite Content View is automatically republished when a Content View it includes is republished.</p>
</div>
<div class="paragraph">
<div class="title">Repository Restrictions</div>
<p>You cannot include more than one of each repository in Composite Content Views.
For example, if you attempt to include two Content Views using the same repository in a Composite Content View, orcharhino&#160;Server reports an error.</p>
</div>
</div>
<div class="sect2">
<h3 id="Creating_a_Composite_Content_View_content-management"><a class="anchor" href="#Creating_a_Composite_Content_View_content-management"></a>6.6. Creating a Composite Content View</h3>
<div class="paragraph">
<p>Use this procedure to create a composite Content View.
To use the CLI instead of the orcharhino management UI, see the <a href="#cli-creating-a-composite-content-view_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Content Views</strong> and click <strong>Create content view</strong>.</p>
</li>
<li>
<p>In the <strong>Create content view</strong> window, enter a name for the view in the <strong>Name</strong> field.
orcharhino automatically completes the <strong>Label</strong> field from the name you enter.</p>
</li>
<li>
<p>Optional: In the <strong>Description</strong> field, enter a description of the view.</p>
</li>
<li>
<p>On the <strong>Type</strong> tab, select <strong>Composite content view</strong>.</p>
</li>
<li>
<p>Optional: If you want to automatically publish a new version of the Composite Content View when a Content View is republished, select the <strong>Auto publish</strong> checkbox.</p>
</li>
<li>
<p>Click <strong>Create content view</strong>.</p>
</li>
<li>
<p>On the <strong>Content views</strong> tab, select the Content Views that you want to add to the Composite Content View, and then click <strong>Add content views</strong>.</p>
</li>
<li>
<p>In the <strong>Add content views</strong> window, select the version of each Content View.</p>
</li>
<li>
<p>Optional: If you want to automatically update the Content View to the latest version, select the <strong>Always update to latest version</strong> checkbox.</p>
</li>
<li>
<p>Click <strong>Add</strong>, then click <strong>Publish new version</strong>.</p>
</li>
<li>
<p>Optional: In the <strong>Description</strong> field, enter a description of the Content View.</p>
</li>
<li>
<p>In the <strong>Publish</strong> window, set the <strong>Promote</strong> switch, then select the lifecycle environment.</p>
</li>
<li>
<p>Click <strong>Next</strong>, then click <strong>Finish</strong>.</p>
</li>
</ol>
</div>
<div id="cli-creating-a-composite-content-view_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Before you create the Composite Content Views, list the version IDs for your existing Content Views:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view version list \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Create a new Composite Content View.
When the <code>--auto-publish</code> option is set to <code>yes</code>, the Composite Content View is automatically republished when a Content View it includes is republished:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view create \
--composite \
--auto-publish yes \
--name "<em>Example_Composite_Content_View</em>" \
--description "Example Composite Content View" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Add a Content View to the Composite Content View.
You must include the Content View Version ID and use the <code>--latest</code> option.
To add multiple Content Views to the Composite Content View, repeat this step for every Content View you want to include:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view component add \
--component-content-view-id <em>Content_View_Version_ID</em> \
--latest \
--composite-content-view "Example_Composite_Content_View"</pre>
</div>
</div>
</li>
<li>
<p>Publish the Composite Content View:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view publish \
--name "<em>Example_Composite_Content_View</em>" \
--description "Initial version of Composite Content View" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Promote the Composite Content View across all environments:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view version promote \
--content-view "<em>Example_Composite_Content_View</em>" \
--version 1 \
--to-lifecycle-environment "Development" \
--organization "<em>My_Organization</em>"
# hammer content-view version promote \
--content-view "<em>Example_Composite_Content_View</em>" \
--version 1 \
--to-lifecycle-environment "Testing" \
--organization "<em>My_Organization</em>"
# hammer content-view version promote \
--content-view "<em>Example_Composite_Content_View</em>" \
--version 1 \
--to-lifecycle-environment "Production" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Content_Filter_Overview_content-management"><a class="anchor" href="#Content_Filter_Overview_content-management"></a>6.7. Content Filter Overview</h3>
<div class="paragraph">
<p>Content Views also use filters to include or restrict certain RPM and DEB content.
Without these filters, a Content View includes everything from the selected repositories.</p>
</div>
<div class="paragraph">
<p>There are two types of content filters:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Filter Types</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Filter Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Include</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">You start with no content, then select which content to add from the selected repositories.
Use this filter to combine multiple content items.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Exclude</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">You start with all content from selected repositories, then select which content to remove.
Use this filter when you want to use most of a particular content repository but exclude certain packages, such as blacklisted packages.
The filter uses all content in the repository except for the content you select.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Include and Exclude Filter Combinations</div>
<p>If using a combination of Include and Exclude filters, publishing a Content View triggers the include filters first, then the exclude filters.
In this situation, select which content to include, then which content to exclude from the inclusive subset.</p>
</div>
<div class="paragraph">
<div class="title">Content Types</div>
<p>There are also five types of content to filter:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Content Types</caption>
<colgroup>
<col style="width: 40%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Content Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>RPM</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filter packages based on their name and version number.
The <strong>RPM</strong> option filters non-modular RPM packages and errata.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Package Group</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filter packages based on package groups.
The list of package groups is based on the repositories added to the Content View.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Erratum (by ID)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Select which specific errata to add to the filter.
The list of Errata is based on the repositories added to the Content View.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Erratum (by Date and Type)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Select a issued or updated date range and errata type (Bugfix, Enhancement, or Security) to add to the filter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Module Streams</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Select whether to include or exclude specific module streams.
The <strong>Module Streams</strong> option filters modular RPMs and errata, but does not filter non-modular content that is associated with the selected module stream.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Container Image Tag</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Select whether to include or exclude specific container image tags.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="Resolving_Package_Dependencies_content-management"><a class="anchor" href="#Resolving_Package_Dependencies_content-management"></a>6.8. Resolving Package Dependencies</h3>
<div class="paragraph">
<p>In orcharhino, you can use the package dependency resolution feature to ensure that any dependencies that packages have within a Content View are added to the dependent repository as part of the Content View publication process.</p>
</div>
<div class="paragraph">
<p>You can select to resolve package dependencies for any Content View that you want, or you can change the default setting to enable or disable resolving package dependencies for all new Content Views.</p>
</div>
<div class="paragraph">
<p>Note that resolving package dependencies can cause significant delays to Content View promotion.
The package dependency resolution feature does not consider packages that are installed on your system independently of the Content View or solve dependencies across repositories.</p>
</div>
<div class="paragraph">
<div class="title">Resolving Package Dependencies and Filters</div>
<p>Filters do not resolve any dependencies of the packages listed in the filters.
This might require some level of testing to determine what dependencies are required.</p>
</div>
<div class="paragraph">
<p>If you add a filter that excludes some packages that are required and the Content View has dependency resolution enabled, orcharhino ignores the rules you create in your filter in favor of resolving the package dependency.</p>
</div>
<div class="paragraph">
<p>If you create a content filter for security purposes, to resolve a package dependency, orcharhino can add packages that you might consider insecure.</p>
</div>
</div>
<div class="sect2">
<h3 id="Content_Filter_Examples_content-management"><a class="anchor" href="#Content_Filter_Examples_content-management"></a>6.9. Content Filter Examples</h3>
<div class="paragraph">
<p>Use any of the following examples with the procedure that follows to build custom content filters.</p>
</div>
<div class="paragraph">
<div class="title">Example 1</div>
<p>Create a repository with the base Red&#160;Hat Enterprise Linux packages.
This filter requires a Red&#160;Hat Enterprise Linux repository added to the Content View.</p>
</div>
<div class="paragraph">
<p><strong>Filter:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Inclusion Type:</strong> Include</p>
</li>
<li>
<p><strong>Content Type:</strong> Package Group</p>
</li>
<li>
<p><strong>Filter:</strong> Select only the <strong>Base</strong> package group</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Example 2</div>
<p>Create a repository that excludes all errata, except for security updates, after a certain date.
This is useful if you want to perform system updates on a regular basis with the exception of critical security updates, which must be applied immediately.
This filter requires a Red&#160;Hat Enterprise Linux repository added to the Content View.</p>
</div>
<div class="paragraph">
<p><strong>Filter:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Inclusion Type:</strong> Exclude</p>
</li>
<li>
<p><strong>Content Type:</strong> Erratum (by Date and Type)</p>
</li>
<li>
<p><strong>Filter:</strong> Select only the <strong>Bugfix</strong> and <strong>Enhancement</strong> errata types, and clear the <strong>Security</strong> errata type.
Set the <strong>Date Type</strong> to <strong>Updated On</strong>.
Set the <strong>Start Date</strong> to the date you want to restrict errata.
Leave the <strong>End Date</strong> blank to ensure any new non-security errata is filtered.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Example 3</div>
<p>A combination of Example 1 and Example 2 where you only require the operating system packages and want to exclude recent bug fix and enhancement errata.
This requires two filters attached to the same Content View.
The Content View processes the Include filter first, then the Exclude filter.</p>
</div>
<div class="paragraph">
<p><strong>Filter 1:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Inclusion Type:</strong> Include</p>
</li>
<li>
<p><strong>Content Type:</strong> Package Group</p>
</li>
<li>
<p><strong>Filter:</strong> Select only the <strong>Base</strong> package group</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Filter 2:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Inclusion Type:</strong> Exclude</p>
</li>
<li>
<p><strong>Content Type:</strong> Erratum (by Date and Type)</p>
</li>
<li>
<p><strong>Filter:</strong> Select only the <strong>Bugfix</strong> and <strong>Enhancement</strong> errata types, and clear the <strong>Security</strong> errata type.
Set the <strong>Date Type</strong> to <strong>Updated On</strong>.
Set the <strong>Start Date</strong> to the date you want to restrict errata.
Leave the <strong>End Date</strong> blank to ensure any new non-security errata is filtered.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Example 4</div>
<p>Filter a specific module stream in a Content View.</p>
</div>
<div class="paragraph">
<p><strong>Filter 1:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Inclusion Type:</strong> Include</p>
</li>
<li>
<p><strong>Content Type:</strong> Module Stream</p>
</li>
<li>
<p><strong>Filter:</strong> Select only the specific module stream that you want for the Content View, for example <strong>ant</strong>, and click <strong>Add Module Stream</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Filter 2:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Inclusion Type:</strong> Exclude</p>
</li>
<li>
<p><strong>Content Type:</strong> Package</p>
</li>
<li>
<p><strong>Filter:</strong> Add a rule to filter any non-modular packages that you want to exclude from the Content View.
If you do not filter the packages, the Content View filter includes all non-modular packages associated with the module stream <strong>ant</strong>.
Add a rule to exclude all <code>*</code> packages, or specify the package names that you want to exclude.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Creating_a_Content_Filter_for_Yum_Content_content-management"><a class="anchor" href="#Creating_a_Content_Filter_for_Yum_Content_content-management"></a>6.10. Creating a Content Filter for Yum Content</h3>
<div class="paragraph">
<p>You can filter Content Views containing Yum content to include or exclude specific packages, package groups, errata, or module streams.
Filters are based on a combination of the <em>name</em>, <em>version</em>, and <em>architecture</em>.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the orcharhino management UI, see the <a href="#cli-creating-a-content-filter-yum_content-management">CLI procedure</a>.</p>
</div>
<div class="paragraph">
<p>For examples of how to build a filter, see <a href="#Content_Filter_Examples_content-management">Content Filter Examples</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Content Views</strong> and select a Content View.</p>
</li>
<li>
<p>On the <strong>Filters</strong> tab, click <strong>Create filter</strong>.</p>
</li>
<li>
<p>Enter a name.</p>
</li>
<li>
<p>From the <strong>Content type</strong> list, select a content type.</p>
</li>
<li>
<p>From the <strong>Inclusion Type</strong> list, select either <strong>Include filter</strong> or <strong>Exclude filter</strong>.</p>
</li>
<li>
<p>Optional: In the <strong>Description</strong> field, enter a description for the filter.</p>
</li>
<li>
<p>Click <strong>Create filter</strong> to create your content filter.</p>
</li>
<li>
<p>Depending on what you enter for <strong>Content Type</strong>, add rules to create the filter that you want.</p>
</li>
<li>
<p>Select if you want the filter to <strong>Apply to subset of repositories</strong> or <strong>Apply to all repositories</strong>.</p>
</li>
<li>
<p>Click <strong>Publish New Version</strong> to publish the filtered repository.</p>
</li>
<li>
<p>Optional: In the <strong>Description</strong> field, enter a description of the changes.</p>
</li>
<li>
<p>Click <strong>Create filter</strong> to publish a new version of the Content View.</p>
<div class="paragraph">
<p>You can promote this Content View across all environments.</p>
</div>
</li>
</ol>
</div>
<div id="cli-creating-a-content-filter-yum_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Add a filter to the Content View.
Use the <code>--inclusion false</code> option to set the filter to an Exclude filter:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view filter create \
--name "<em>Errata Filter</em>" \
--type erratum --content-view "<em>Example_Content_View</em>" \
--description "<em>My latest filter</em>" \
--inclusion false \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Add a rule to the filter:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view filter rule create \
--content-view "<em>Example_Content_View</em>" \
--content-view-filter "<em>Errata Filter</em>" \
--start-date "<em>YYYY-MM-DD</em>" \
--types enhancement,bugfix \
--date-type updated \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Publish the Content View:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view publish \
--name "<em>Example_Content_View</em>" \
--description "Adding errata filter" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Promote the view across all environments:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view version promote \
--content-view "<em>Example_Content_View</em>" \
--version 1 \
--to-lifecycle-environment "Development" \
--organization "<em>My_Organization</em>"
# hammer content-view version promote \
--content-view "<em>Example_Content_View</em>" \
--version 1 \
--to-lifecycle-environment "Testing" \
--organization "<em>My_Organization</em>"
# hammer content-view version promote \
--content-view "<em>Example_Content_View</em>" \
--version 1 \
--to-lifecycle-environment "Production" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Creating_a_Content_Filter_for_APT_Content_content-management"><a class="anchor" href="#Creating_a_Content_Filter_for_APT_Content_content-management"></a>6.11. Creating a Content Filter for APT Content</h3>
<div class="paragraph">
<p>You can filter Content Views containing deb content to include or exclude specific packages or package groups.
Filters are based on a combination of the <em>name</em> and the <em>architecture</em>.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the orcharhino management UI, see the <a href="#cli-creating-a-content-filter-apt_content-management">CLI procedure</a>.</p>
</div>
<div class="paragraph">
<p>For examples of how to build a filter, see <a href="#Content_Filter_Examples_content-management">Content Filter Examples</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Content Views</strong> and select a Content View.</p>
</li>
<li>
<p>On the <strong>Filters</strong> tab, click <strong>Create filter</strong>.</p>
</li>
<li>
<p>Enter a name.</p>
</li>
<li>
<p>From the <strong>Content type</strong> list, select a content type.</p>
</li>
<li>
<p>From the <strong>Inclusion Type</strong> list, select either <strong>Include filter</strong> or <strong>Exclude filter</strong>.</p>
</li>
<li>
<p>Optional: In the <strong>Description</strong> field, enter a description for the filter.</p>
</li>
<li>
<p>Click <strong>Create filter</strong> to create your content filter.</p>
</li>
<li>
<p>Depending on what you enter for <strong>Content Type</strong>, add rules to create the filter that you want.</p>
</li>
<li>
<p>Select if you want the filter to <strong>Apply to subset of repositories</strong> or <strong>Apply to all repositories</strong>.</p>
</li>
<li>
<p>Click <strong>Publish New Version</strong> to publish the filtered repository.</p>
</li>
<li>
<p>Optional: In the <strong>Description</strong> field, enter a description of the changes.</p>
</li>
<li>
<p>Click <strong>Save</strong> to publish a new version of the Content View.</p>
<div class="paragraph">
<p>You can promote this Content View across all environments.</p>
</div>
</li>
</ol>
</div>
<div id="cli-creating-a-content-filter-apt_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Add a filter to the Content View.
Use the <code>--inclusion false</code> option to set the filter to an Exclude filter:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view filter create \
--content-view "<em>Example_Content_View</em>" \
--description "<em>My_Content_View_Filter_Description</em>" \
--inclusion false \
--name "<em>Errata Filter</em>" \
--organization "<em>My_Organization</em>" \
--type erratum</pre>
</div>
</div>
</li>
<li>
<p>Add a rule to the filter:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view filter rule create \
--content-view "<em>My_Content_View</em>" \
--content-view-filter "<em>My_Errata_Filter</em>" \
--date-type updated \
--organization "<em>My_Organization</em>" \
--start-date "<em>YYYY-MM-DD</em>" \
--types enhancement,bugfix</pre>
</div>
</div>
</li>
<li>
<p>Publish the Content View:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view publish \
--description "Adding errata filter" \
--name "<em>My_Content_View</em>" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Promote the view across all environments:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view version promote \
--content-view "<em>Example_Content_View</em>" \
--organization "<em>My_Organization</em>" \
--to-lifecycle-environment "Development" \
--version 1
# hammer content-view version promote \
--content-view "<em>Example_Content_View</em>" \
--organization "<em>My_Organization</em>" \
--to-lifecycle-environment "Testing" \
--version 1
# hammer content-view version promote \
--content-view "<em>Example_Content_View</em>" \
--organization "<em>My_Organization</em>" \
--to-lifecycle-environment "Production" \
--version 1</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Deleting_Multiple_Content_View_Versions_content-management"><a class="anchor" href="#Deleting_Multiple_Content_View_Versions_content-management"></a>6.12. Deleting Multiple Content View Versions</h3>
<div class="paragraph">
<p>You can delete multiple Content View versions simultaneously.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Content Views</strong>.</p>
</li>
<li>
<p>Select the Content View you want to delete versions of.</p>
</li>
<li>
<p>On the <strong>Versions</strong> tab, select the checkbox of the version or versions you want to delete.</p>
</li>
<li>
<p>Click the vertical ellipsis icon at the top of the list of Content Views.</p>
</li>
<li>
<p>Click <strong>Delete</strong> to open the deletion wizard that shows any affected environments.</p>
</li>
<li>
<p>If there are no affected environments, review the details and click <strong>Delete</strong>.</p>
</li>
<li>
<p>If there are any affected environments, reassign any hosts or activation keys before deletion.</p>
</li>
<li>
<p>Review the details of the actions.</p>
</li>
<li>
<p>Click <strong>Delete</strong>.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Synchronizing_Content_Between_Servers_content-management"><a class="anchor" href="#Synchronizing_Content_Between_Servers_content-management"></a>7. Synchronizing Content Between orcharhino&#160;Servers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In a orcharhino setup with multiple orcharhino&#160;Servers, you can use Inter-Server Synchronization (ISS) to synchronize content from one upstream server to one or more downstream servers.</p>
</div>
<div class="paragraph">
<p>There are two possible ISS configurations of orcharhino, depending on how you deployed your infrastructure:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ISS Network Sync</dt>
<dd>
<p>If your upstream server can communicate with the downstream server over a network, you can synchronize content over HTTPS.</p>
<div class="paragraph">
<p>Configure your orcharhino to synchronize content over a network.
For more information, see <a href="#configuring-server-to-synchronize-content-over-a-network_content-management">Configuring orcharhino Server to Synchronize Content over a Network</a>.</p>
</div>
</dd>
<dt class="hdlist1">ISS Export Sync</dt>
<dd>
<p>If your upstream and downstream servers are air-gapped, you can synchronize content using export and import.</p>
<div class="paragraph">
<p>Configure your orcharhino to synchronize content using export and import.
For more information, see <a href="#configuring-server-to-sync-content-using-exports_content-management">Configuring orcharhino Server to Synchronize Content Using Exports</a>.</p>
</div>
</dd>
</dl>
</div>
<div class="ulist">
<div class="title">Additional Resources</div>
<ul>
<li>
<p>For more information on ISS use cases and scenarios, see <a href="#how-to-configure-inter-server-sync_content-management">How to Configure Inter-Server Synchronization</a>.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="how-to-synchronize-content-using-export-and-import_content-management"><a class="anchor" href="#how-to-synchronize-content-using-export-and-import_content-management"></a>7.1. How to Synchronize Content Using Export and Import</h3>
<div class="paragraph">
<p>There are multiple approaches for synchronizing content using the export and import workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You employ the upstream orcharhino&#160;Server as a content store, which means that you sync the whole Library rather than Content View versions.
This approach offers the simplest export/import workflow.
In such case, you can manage the versions downstream.
For more information, see <a href="#Using_Upstream_Server_as_a_Content_Store_content-management">Using an Upstream orcharhino&#160;Server as a Content Store</a>.</p>
</li>
<li>
<p>You use the upstream orcharhino&#160;Server to sync Content View versions.
This approach offers more control over what content is synced between orcharhino&#160;Servers.
For more information, see <a href="#Using_Upstream_Server_to_Sync_Content_View_Versions_content-management">Using an Upstream orcharhino&#160;Server to Sync Content View Versions</a>.</p>
</li>
<li>
<p>You sync a single repository.
This can be useful if you use the Content-View syncing approach, but you want to sync an additional repository without adding it to an existing Content View.
For more information, see <a href="#synchronizing-a-single-repository_content-management">Synchronizing a Single Repository</a>.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="Using_Upstream_Server_as_a_Content_Store_content-management"><a class="anchor" href="#Using_Upstream_Server_as_a_Content_Store_content-management"></a>7.1.1. Using an Upstream orcharhino&#160;Server as a Content Store</h4>
<div class="paragraph">
<p>In this scenario, you use the upstream orcharhino&#160;Server as a content store for updates rather than to manage content.
You use the downstream orcharhino&#160;Server to manage content for all infrastructure behind the isolated network.
You export the Library content from the upstream orcharhino&#160;Server and import it into the downstream orcharhino&#160;Server.</p>
</div>
<div class="olist arabic">
<div class="title">On the upstream orcharhino&#160;Server</div>
<ol class="arabic">
<li>
<p>Ensure that repositories are using the <strong>Immediate</strong> download policy in one of the following ways:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>For existing repositories using <strong>On Demand</strong>, change their download policy on the repository details page to <strong>Immediate</strong>.</p>
</li>
<li>
<p>For new repositories, ensure that the <strong>Default Red Hat Repository download policy</strong> setting is set to <strong>Immediate</strong> before enabling Red Hat repositories, and that the <strong>Default download policy</strong> is set to <strong>Immediate</strong> for custom repositories.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For more information, see <a href="#Download_Policies_Overview_content-management">Download Policies Overview</a>.</p>
</div>
</li>
<li>
<p>Enable the content that you want to synchronize.
For more information, see <a href="#Enabling_Red_Hat_Repositories_content-management">Enabling Red&#160;Hat Repositories</a>.</p>
<div class="paragraph">
<p>If you want to sync custom content, first <a href="#Creating_a_Custom_Product_content-management">create a custom Product</a> and <a href="#Synchronizing_Repositories_content-management">synchronize Product repositories</a>.</p>
</div>
</li>
<li>
<p>Synchronize the enabled content:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>On the first export, perform a <code>complete</code> Library export so that all the synchronized content is exported.
This generates content archives that you can later import into one or more downstream orcharhino&#160;Servers.
For more information on performing a complete Library export, see <a href="#Exporting_the_Library_Environment_content-management">Exporting the Library Environment</a>.</p>
</li>
<li>
<p>Export all future updates on the upstream orcharhino&#160;Server incrementally.
This generates leaner content archives that contain only a recent set of updates.
For example, if you enable and synchronize a new repository, the next exported content archive contains content only from the newly enabled repository.
For more information on performing an incremental Library export, see <a href="#Exporting_Library_Incrementally_content-management">Exporting the Library Environment Incrementally</a>.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">On the downstream orcharhino&#160;Server</div>
<ol class="arabic">
<li>
<p>Bring the content exported from the upstream orcharhino&#160;Server over to the hard disk.</p>
</li>
<li>
<p>Place it inside a directory under <code>/var/lib/pulp/imports</code>.</p>
</li>
<li>
<p>Import the content to an organization using the procedure outlined in <a href="#Importing_into_the_Library_Environment_content-management">Importing into the Library Environment</a>.</p>
<div class="paragraph">
<p>You can then manage content using Content Views or Lifecycle Environments as you require.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Using_Upstream_Server_to_Sync_Content_View_Versions_content-management"><a class="anchor" href="#Using_Upstream_Server_to_Sync_Content_View_Versions_content-management"></a>7.1.2. Using an Upstream orcharhino&#160;Server to Sync Content View Versions</h4>
<div class="paragraph">
<p>In this scenario, you use the upstream orcharhino&#160;Server not only as a content store, but also to synchronize content for all infrastructure behind the isolated network.
You curate updates coming from the CDN into Content Views and Lifecycle Environments.
Once you promote content to a designated Lifecycle Environment, you can export the content from the upstream orcharhino&#160;Server and import it into the downstream orcharhino&#160;Server.</p>
</div>
<div class="olist arabic">
<div class="title">On the upstream orcharhino&#160;Server</div>
<ol class="arabic">
<li>
<p>Ensure that repositories are using the <strong>Immediate</strong> download policy in one of the following ways:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>For existing repositories using <strong>On Demand</strong>, change their download policy on the repository details page to <strong>Immediate</strong>.</p>
</li>
<li>
<p>For new repositories, ensure that the <strong>Default Red Hat Repository download policy</strong> setting is set to <strong>Immediate</strong> before enabling Red Hat repositories, and that the <strong>Default download policy</strong> is set to <strong>Immediate</strong> for custom repositories.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For more information, see <a href="#Download_Policies_Overview_content-management">Download Policies Overview</a>.</p>
</div>
</li>
<li>
<p>Enable the content that you want to synchronize.
For more information, see <a href="#Enabling_Red_Hat_Repositories_content-management">Enabling Red&#160;Hat Repositories</a>.</p>
<div class="paragraph">
<p>If you want to sync custom content, first <a href="#Creating_a_Custom_Product_content-management">create a custom Product</a> and <a href="#Synchronizing_Repositories_content-management">synchronize Product repositories</a>.</p>
</div>
</li>
<li>
<p>Synchronize the enabled content:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>For the first export, perform a <code>complete</code> Version export on the Content View Version that you want to export.
For more information see, <a href="#Exporting_a_Content_View_Version_content-management">Exporting a Content View Version</a>.
This generates content archives that you can import into one or more downstream orcharhino&#160;Servers.</p>
</li>
<li>
<p>Export all future updates in the connected orcharhino&#160;Servers incrementally.
This generates leaner content archives that contain changes only from the recent set of updates.
For example, if your Content View has a new repository, this exported content archive contains only the latest changes.
For more information, see <a href="#Exporting_a_Content_View_Version_Incrementally_content-management">Exporting a Content View Version Incrementally</a>.</p>
</li>
<li>
<p>When you have new content, republish the Content Views that include this content before exporting the increment.
For more information, see <a href="#Managing_Content_Views_content-management">Managing Content Views</a>.
This creates a new Content View Version with the appropriate content to export.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">On the downstream orcharhino&#160;Server</div>
<ol class="arabic">
<li>
<p>Bring the content exported from the upstream orcharhino&#160;Server over to the hard disk.</p>
</li>
<li>
<p>Place it inside a directory under <code>/var/lib/pulp/imports</code>.</p>
</li>
<li>
<p>Import the content to the organization that you want.
For more information, see <a href="#Importing_a_Content_View_Version_content-management">Importing a Content View Version</a>.
This will create a Content View Version from the exported content archives and then import content appropriately.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="synchronizing-a-single-repository_content-management"><a class="anchor" href="#synchronizing-a-single-repository_content-management"></a>7.1.3. Synchronizing a Single Repository</h4>
<div class="paragraph">
<p>In this scenario, you export and import a single repository.</p>
</div>
<div class="olist arabic">
<div class="title">On the upstream orcharhino&#160;Server</div>
<ol class="arabic">
<li>
<p>Ensure that the repository is using the <strong>Immediate</strong> download policy in one of the following ways:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>For existing repositories using <strong>On Demand</strong>, change their download policy on the repository details page to <strong>Immediate</strong>.</p>
</li>
<li>
<p>For new repositories, ensure that the <strong>Default Red Hat Repository download policy</strong> setting is set to <strong>Immediate</strong> before enabling Red Hat repositories, and that the <strong>Default download policy</strong> is set to <strong>Immediate</strong> for custom repositories.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For more information, see <a href="#Download_Policies_Overview_content-management">Download Policies Overview</a>.</p>
</div>
</li>
<li>
<p>Enable the content that you want to synchronize.
For more information, see <a href="#Enabling_Red_Hat_Repositories_content-management">Enabling Red&#160;Hat Repositories</a>.</p>
<div class="paragraph">
<p>If you want to sync custom content, first <a href="#Creating_a_Custom_Product_content-management">create a custom Product</a> and <a href="#Synchronizing_Repositories_content-management">synchronize Product repositories</a>.</p>
</div>
</li>
<li>
<p>Synchronize the enabled content:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>On the first export, perform a <code>complete</code> repository export so that all the synchronized content is exported.
This generates content archives that you can later import into one or more downstream orcharhino&#160;Servers.
For more information on performing a complete repository export, see <a href="#Exporting_a_Repository_content-management">Exporting a Repository</a>.</p>
</li>
<li>
<p>Export all future updates on the upstream orcharhino&#160;Server incrementally.
This generates leaner content archives that contain only a recent set of updates.
For more information on performing an incremental repository export, see <a href="#Exporting_Repository_Incrementally_content-management">Exporting a Repository Incrementally</a>.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">On the downstream orcharhino&#160;Server</div>
<ol class="arabic">
<li>
<p>Bring the content exported from the upstream orcharhino&#160;Server over to the hard disk.</p>
</li>
<li>
<p>Place it inside a directory under <code>/var/lib/pulp/imports</code>.</p>
</li>
<li>
<p>Import the content to an organization. See <a href="#Importing_a_Repository_content-management">Importing a Repository</a>.</p>
<div class="paragraph">
<p>You can then manage content using Content Views or Lifecycle Environments as you require.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Synchronizing_a_Custom_Repository_content-management"><a class="anchor" href="#Synchronizing_a_Custom_Repository_content-management"></a>7.2. Synchronizing a Custom Repository</h3>
<div class="paragraph">
<p>When using Inter-Server Synchronization Network Sync, Red Hat repositories are configured automatically, but custom repositories are not.
Use this procedure to synchronize content from a custom repository on a connected orcharhino&#160;Server to a disconnected orcharhino&#160;Server through Inter-Server Synchronization (ISS) Network Sync.</p>
</div>
<div class="paragraph">
<p>Follow the procedure for the connected orcharhino&#160;Server before completing the procedure for the disconnected orcharhino&#160;Server.</p>
</div>
<div class="olist arabic">
<div class="title">Connected orcharhino&#160;Server</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Click on the custom product.</p>
</li>
<li>
<p>Click on the custom repository.</p>
</li>
<li>
<p>Copy the <strong>Published At:</strong> URL.</p>
</li>
<li>
<p>Continue with the procedure on disconnected orcharhino&#160;Server.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Disconnected orcharhino&#160;Server</div>
<ol class="arabic">
<li>
<p>Download the <code>katello-server-ca.crt</code> file from the connected orcharhino&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl http://orcharhino.example.com/pub/katello-server-ca.crt</pre>
</div>
</div>
</li>
<li>
<p>Create an SSL Content Credential with the contents of <code>katello-server-ca.crt</code>.
For more information on creating an SSL Content Credential, see <a href="#Importing_Custom_SSL_Certificates_content-management">Importing Custom SSL Certificates</a>.</p>
</li>
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Create your custom product with the following:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: Paste the link that you copied earlier.</p>
</li>
<li>
<p><strong>SSL CA Cert</strong>: Select the SSL certificate that was transferred from your connected orcharhino&#160;Server.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information on creating a custom product, see <a href="#Creating_a_Custom_Product_content-management">Creating a Custom Product</a>.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>After completing these steps, the custom repository is properly configured on the disconnected orcharhino&#160;Server.</p>
</div>
</div>
<div class="sect2">
<h3 id="Exporting_the_Library_Environment_content-management"><a class="anchor" href="#Exporting_the_Library_Environment_content-management"></a>7.3. Exporting the Library Environment</h3>
<div class="paragraph">
<p>You can export contents of all Yum repositories in the Library environment of an organization to an archive file from orcharhino&#160;Server and use this archive file to create the same repositories in another orcharhino&#160;Server or in another orcharhino&#160;Server organization.
The exported archive file contains the following data:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A JSON file containing Content View version metadata.</p>
</li>
<li>
<p>An archive file containing all the repositories from the Library environment of the organization.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>orcharhino&#160;Server exports only RPM and kickstart files included in a Content View version.
orcharhino does not export the following content:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Docker content</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Prerequisites</div>
<p>To export the contents of the Library lifecycle environment of the organization, ensure that orcharhino&#160;Server where you want to export meets the following conditions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ensure that the export directory has free storage space to accommodate the export.</p>
</li>
<li>
<p>Ensure that the <code>/var/lib/pulp/exports</code> directory has free storage space equivalent to the size of the repositories being exported for temporary files created during the export process.</p>
</li>
<li>
<p>Ensure that you set download policy to <strong>Immediate</strong> for all repositories within the Library lifecycle environment you export.
For more information, see <a href="#Download_Policies_Overview_content-management">Download Policies Overview</a>.</p>
</li>
<li>
<p>Ensure that you synchronize Products that you export to the required date.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Export the Library Content of an Organization</div>
<ol class="arabic">
<li>
<p>Use the organization name or ID to export.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-export complete library --organization="<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Verify that the archive containing the exported version of a Content View is located in the export directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ls -lh /var/lib/pulp/exports/<em>My_Organization</em>/Export-Library/1.0/2021-03-02T03-35-24-00-00
total 68M
-rw-r--r--. 1 pulp pulp 68M Mar  2 03:35 export-1e25417c-6d09-49d4-b9a5-23df4db3d52a-20210302_0335.tar.gz
-rw-r--r--. 1 pulp pulp 333 Mar  2 03:35 export-1e25417c-6d09-49d4-b9a5-23df4db3d52a-20210302_0335-toc.json
-rw-r--r--. 1 pulp pulp 443 Mar  2 03:35 metadata.json</pre>
</div>
</div>
<div class="paragraph">
<p>You need all three files, the <code>tar.gz</code>, the <code>toc.json</code>, and the <code>metadata.json</code> file to be able to import.</p>
</div>
</li>
<li>
<p>A new Content View <strong>Export-Library</strong> is created in the organization.
This Content View contains all the repositories belonging to this organization.
A new version of this Content View is published and exported automatically.</p>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Export with chunking</div>
<p>In many cases the exported archive content may be several gigabytes in size.
If you want to split it into smaller sizes or chunks.
You can use the <code>--chunk-size-gb</code> flag directly in the export command to handle this.
In the following example, you can see how to specify <code>--chunk-size-gb=2</code> to split the archives in <code>2 GB</code> chunks.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-export complete library \
--chunk-size-gb=2 \
--organization="<em>My_Organization</em>"

Generated /var/lib/pulp/exports/<em>My_Organization</em>/Export-Library/2.0/2021-03-02T04-01-25-00-00/metadata.json

# ls -lh /var/lib/pulp/exports/<em>My_Organization</em>/Export-Library/2.0/2021-03-02T04-01-25-00-00/</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Exporting_the_Library_Environment_in_a_Syncable_Format_content-management"><a class="anchor" href="#Exporting_the_Library_Environment_in_a_Syncable_Format_content-management"></a>7.4. Exporting the Library Environment in a Syncable Format</h3>
<div class="paragraph">
<p>You can export contents of all yum repositories, Kickstart repositories and file repositories in the Library environment of an organization to a syncable format that you can use to create your custom CDN and synchronize the content from the custom CDN over HTTP/HTTPS.</p>
</div>
<div class="paragraph">
<p>You can use the generated content to create the same repository in another orcharhino&#160;Server or in another orcharhino&#160;Server organization using content import.
On importing the exported archive, a regular Content View is created or updated on your downstream orcharhino&#160;Server.
For more information, see <a href="#Importing_a_Content_View_Version_content-management">Importing a Content View Version</a>.</p>
</div>
<div class="paragraph">
<p>You can export the following content in a syncable format from orcharhino&#160;Server:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Yum repositories</p>
</li>
<li>
<p>Kickstart repositories</p>
</li>
<li>
<p>File repositories</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You cannot export Ansible, DEB, and Docker content.</p>
</div>
<div class="paragraph">
<p>The export contains directories with the packages, <strong>listing</strong> files, and metadata of the repository in Yum format that can be used to synchronize in the importing orcharhino&#160;Server.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure that you set the download policy to <strong>Immediate</strong> for all repositories within the Library lifecycle environment you export.
For more information, see <a href="#Download_Policies_Overview_content-management">Download Policies Overview</a>.</p>
</li>
<li>
<p>Ensure that you synchronize products you export to the required date.</p>
</li>
<li>
<p>Ensure that the user exporting the content has the <code>Content Exporter</code> role.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Use the organization name or ID to export:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-export complete library \
--organization="<em>My_Organization</em>" \
--format=syncable</pre>
</div>
</div>
</li>
<li>
<p>Optional: Verify that the exported content is located in the export directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># du -sh /var/lib/pulp/exports/<em>My_Organization</em>/Export-<em>My_Repository</em>/1.0/2021-03-02T03-35-24-00-00</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Exporting_Library_Incrementally_content-management"><a class="anchor" href="#Exporting_Library_Incrementally_content-management"></a>7.5. Exporting the Library Environment Incrementally</h3>
<div class="paragraph">
<p>Exporting Library content can be a very expensive operation in terms of system resources.
The size of the exported Library depends on the number of products.
Organizations that have multiple Red&#160;Hat Enterprise Linux trees can occupy several gigabytes of space on orcharhino&#160;Server.</p>
</div>
<div class="paragraph">
<p>In such cases, you can use <strong>Incremental Export</strong> to export only pieces of content that changed since the previous export.
Incremental exports typically result in smaller archive files than the full exports.</p>
</div>
<div class="paragraph">
<p>The example below shows incremental export of all repositories in the organization&#8217;s Library.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create an incremental export:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-export incremental library --organization="<em>My_Organization</em>"

Generated /var/lib/pulp/exports/<em>My_Organization</em>/Export-Library/3.0/2021-03-02T04-22-14-00-00/metadata.json</pre>
</div>
</div>
</li>
<li>
<p>Optional: View the exported data:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ls -lh /var/lib/pulp/exports/<em>My_Organization</em>/Export-Library/3.0/2021-03-02T04-22-14-00-00/
total 172K
-rw-r--r--. 1 pulp pulp 161K Mar  2 04:22 export-436882d8-de5a-48e9-a30a-17169318f908-20210302_0422.tar.gz
-rw-r--r--. 1 pulp pulp  333 Mar  2 04:22 export-436882d8-de5a-48e9-a30a-17169318f908-20210302_0422-toc.json
-rw-r--r--. 1 pulp pulp  492 Mar  2 04:22 metadata.json</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Exporting_the_Library_Environment_Incrementally_in_a_Syncable_Format_content-management"><a class="anchor" href="#Exporting_the_Library_Environment_Incrementally_in_a_Syncable_Format_content-management"></a>7.6. Exporting the Library Environment Incrementally in a Syncable Format</h3>
<div class="paragraph">
<p>Exporting Library content can be a very costly operation in terms of system resources.
The size of the exported Library depends on the number of products.
Organizations that have multiple Red&#160;Hat Enterprise Linux trees can occupy several gigabytes of space on orcharhino&#160;Server.</p>
</div>
<div class="paragraph">
<p>In such cases, you can use <strong>Incremental Export</strong> to export only pieces of content that changed since the previous export.
Incremental exports typically result in smaller archive files than full exports.</p>
</div>
<div class="paragraph">
<p>The procedure below shows incremental export of all repositories in the organization&#8217;s Library.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create an incremental export:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-export incremental library \
--format=syncable \
--organization="<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Optional: View the exported data:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># find /var/lib/pulp/exports/Default_Organization/Export-Library-SYNCABLE/2.0/2023-03-09T10-55-48-05-00/ -name "*.rpm"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Exporting_a_Content_View_Version_content-management"><a class="anchor" href="#Exporting_a_Content_View_Version_content-management"></a>7.7. Exporting a Content View Version</h3>
<div class="paragraph">
<p>You can export a version of a Content View to an archive file from orcharhino&#160;Server and use this archive file to create the same Content View version on another orcharhino&#160;Server or on another orcharhino&#160;Server organization.
orcharhino exports composite Content Views as normal Content Views.
The composite nature is not retained.
On importing the exported archive, a regular Content View is created or updated on your downstream orcharhino&#160;Server.
The exported archive file contains the following data:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A JSON file containing Content View version metadata</p>
</li>
<li>
<p>An archive file containing all the repositories included into the Content View version</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>orcharhino&#160;Server exports only RPM and kickstart files added to a version of a Content View.
orcharhino does not export the following content:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Docker content</p>
</li>
<li>
<p>Content View definitions and metadata, such as package filters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Prerequisites</div>
<p>To export a Content View, ensure that orcharhino&#160;Server where you want to export meets the following conditions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ensure that the export directory has free storage space to accommodate the export.</p>
</li>
<li>
<p>Ensure that the <code>/var/lib/pulp/exports</code> directory has free storage space equivalent to the size of the repositories being exported for temporary files created during the export process.</p>
</li>
<li>
<p>Ensure that you set download policy to <strong>Immediate</strong> for all repositories within the Content View you export.
For more information, see <a href="#Download_Policies_Overview_content-management">Download Policies Overview</a>.</p>
</li>
<li>
<p>Ensure that you synchronize Products that you export to the required date.</p>
</li>
<li>
<p>Ensure that the user exporting the content has the <code>Content Exporter</code> role.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">To Export a Content View Version</div>
<ol class="arabic">
<li>
<p>List versions of the Content View that are available for export:</p>
<div class="listingblock">
<div class="content">
<pre># hammer content-view version list \
--content-view="<em>My_Content_View</em>" \
--organization="<em>My_Organization</em>"

---|----------|---------|-------------|-----------------------
ID | NAME     | VERSION | DESCRIPTION | LIFECYCLE ENVIRONMENTS
---|----------|---------|-------------|-----------------------
5  | view 3.0 | 3.0     |             | Library
4  | view 2.0 | 2.0     |             |
3  | view 1.0 | 1.0     |             |
---|----------|---------|-------------|----------------------</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Export a Content View version</div>
<ol class="arabic">
<li>
<p>Get the version number of desired version.
The following example targets version <code>1.0</code> for export.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-export complete version \
--content-view="<em>Content_View_Name</em>" \
--version=1.0 \
--organization="<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Verify that the archive containing the exported version of a Content View is located in the export directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ls -lh /var/lib/pulp/exports/<em>My_Organization</em>/<em>Content_View_Name</em>/1.0/2021-02-25T18-59-26-00-00/</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>You require all three files, for example, the <code>tar.gz</code> archive file, the <code>toc.json</code> and <code>metadata.json</code> to import the content successfully.</p>
</div>
<div class="paragraph">
<div class="title">Export with chunking</div>
<p>In many cases, the exported archive content can be several gigabytes in size.
You might want to split it smaller sizes or chunks.
You can use the <code>--chunk-size-gb</code> option with in the <code>hammer content-export</code> command to handle this.
The following example uses the <code>--chunk-size-gb=2</code> to split the archives into <code>2 GB</code> chunks.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-export complete version \
--chunk-size-gb=2 \
--content-view="<em>Content_View_Name</em>" \
--organization="<em>My_Organization</em>" \
--version=1.0
# ls -lh /var/lib/pulp/exports/<em>My_Organization</em>/view/1.0/2021-02-25T21-15-22-00-00/</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Exporting_a_Content_View_Version_in_a_Syncable_Format_content-management"><a class="anchor" href="#Exporting_a_Content_View_Version_in_a_Syncable_Format_content-management"></a>7.8. Exporting a Content View Version in a Syncable Format</h3>
<div class="paragraph">
<p>You can export a version of a Content View to a syncable format that you can use to create your custom CDN.
After you have exported the Content View, you can do either of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Synchronize the content from your custom CDN over HTTP/HTTPS.</p>
</li>
<li>
<p>Import the content using <code>hammer content-import</code>.
Note that this requires both the Export and Import servers to run orcharhino 6.3.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can use the generated content to create the same repository in another orcharhino&#160;Server or in another orcharhino&#160;Server organization using content import.
On importing the exported archive, a regular Content View is created or updated on your downstream orcharhino&#160;Server.
For more information, see <a href="#Importing_a_Content_View_Version_content-management">Importing a Content View Version</a>.</p>
</div>
<div class="paragraph">
<p>You can export the following content in a syncable format from orcharhino&#160;Server:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Yum repositories</p>
</li>
<li>
<p>Kickstart repositories</p>
</li>
<li>
<p>File repositories</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You cannot export Ansible, DEB, and Docker content.</p>
</div>
<div class="paragraph">
<p>The export contains directories with the packages, <strong>listing</strong> files, and metadata of the repository in Yum format that can be used to synchronize in the importing orcharhino&#160;Server.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure that you set the download policy to <strong>Immediate</strong> for all repositories within the Content View you export.
For more information, see <a href="#Download_Policies_Overview_content-management">Download Policies Overview</a>.</p>
</li>
<li>
<p>Ensure that you synchronize products you export to the required date.</p>
</li>
<li>
<p>Ensure that the user exporting the content has the <code>Content Exporter</code> role.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">To Export a Content View Version</div>
<ul>
<li>
<p>List versions of the Content View that are available for export:</p>
<div class="listingblock">
<div class="content">
<pre># hammer content-view version list \
--content-view="<em>My_Content_View</em>" \
--organization="<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Get the version number of desired version.
The following example targets version <code>1.0</code> for export:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-export complete version \
--content-view="<em>Content_View_Name</em>" \
--version=1.0 \
--organization="<em>My_Organization</em>" \
--format=syncable</pre>
</div>
</div>
</li>
<li>
<p>Optional: Verify that the exported content is located in the export directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ls -lh /var/lib/pulp/exports/<em>My_Organization</em>/<em>My_Content_View_Name</em>/1.0/2021-02-25T18-59-26-00-00/</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Exporting_a_Content_View_Version_Incrementally_content-management"><a class="anchor" href="#Exporting_a_Content_View_Version_Incrementally_content-management"></a>7.9. Exporting a Content View Version Incrementally</h3>
<div class="paragraph">
<p>Exporting complete versions can be a very expensive operation in terms of system resources.
The size of the exported Content View versions depends on the number of products.
Content View versions that have multiple Red&#160;Hat Enterprise Linux trees can occupy several gigabytes of space on orcharhino&#160;Server.</p>
</div>
<div class="paragraph">
<p>In such cases, you can create an incremental export which contains only pieces of content that changed since the previous export.
Incremental exports typically result in smaller archive files than the full exports.</p>
</div>
<div class="paragraph">
<p>The example below targets the version <code>2.0</code> for export because the version <code>1.0</code> was exported previously.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create an incremental export:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-export incremental version \
--content-view="<em>Content_View_Name</em>" \
--organization="<em>My_Organization</em>" \
--version=2.0 \
--format=syncable</pre>
</div>
</div>
</li>
<li>
<p>Optional: View the exported Content View:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ls -lh /var/lib/pulp/exports/<em>My_Organization</em>/view/2.0/2021-02-25T21-45-34-00-00/</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Exporting_a_Content_View_Version_Incrementally_in_a_Syncable_Format_content-management"><a class="anchor" href="#Exporting_a_Content_View_Version_Incrementally_in_a_Syncable_Format_content-management"></a>7.10. Exporting a Content View Version Incrementally in a Syncable Format</h3>
<div class="paragraph">
<p>Exporting complete Content View versions can be a very costly operation in terms of system resources.
The size of the exported Content View versions depends on the number of products.
Content View versions that have multiple Red&#160;Hat Enterprise Linux trees can occupy several gigabytes of space on orcharhino&#160;Server.</p>
</div>
<div class="paragraph">
<p>In such cases, you can use <strong>Incremental Export</strong> to export only pieces of content that changed since the previous export.
Incremental exports typically result in smaller archive files than the full exports.</p>
</div>
<div class="paragraph">
<p>The example below targets the version <code>2.0</code> for export because the version <code>1.0</code> was exported previously.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create an incremental export:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-export incremental version \
--content-view="<em>My_Content_View_Name</em>" \
--organization="<em>My_Organization</em>" \
--version=2.0 \
--format=syncable</pre>
</div>
</div>
</li>
<li>
<p>Optional: View the exported Content View:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># find /var/lib/pulp/exports/Default_Organization/view/2.0/2023-03-02T14-19-50-05-00/ -name "*.rpm"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Exporting_a_Repository_content-management"><a class="anchor" href="#Exporting_a_Repository_content-management"></a>7.11. Exporting a Repository</h3>
<div class="paragraph">
<p>You can export the content of a repository in the Library environment of an organization from orcharhino&#160;Server.
You can use this archive file to create the same repository in another orcharhino&#160;Server or in another orcharhino&#160;Server organization.</p>
</div>
<div class="paragraph">
<p>You can export the following content from orcharhino&#160;Server:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ansible repositories</p>
</li>
<li>
<p>Kickstart repositories</p>
</li>
<li>
<p>Yum repositories</p>
</li>
<li>
<p>File repositories</p>
</li>
<li>
<p>Docker content</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You cannot export DEB repositories from orcharhino&#160;Server.</p>
</div>
<div class="paragraph">
<p>The export contains the following data:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Two JSON files containing repository metadata.</p>
</li>
<li>
<p>One or more archive files containing the contents of the repository from the Library environment of the organization.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You need all the files, <code>tar.gz</code>, <code>toc.json</code> and <code>metadata.json</code>, to be able to import.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure that the export directory has enough free storage space to accommodate the export.</p>
</li>
<li>
<p>Ensure that the <code>/var/lib/pulp/exports</code> directory has enough free storage space equivalent to the size of all repositories that you want to export.</p>
</li>
<li>
<p>Ensure that you set download policy to <strong>Immediate</strong> for the repository within the Library lifecycle environment you export.
For more information, see <a href="#Download_Policies_Overview_content-management">Download Policies Overview</a>.</p>
</li>
<li>
<p>Ensure that you synchronize products that you export to the required date.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Export a repository using the product name and repository name:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-export complete repository \
--name="<em>My_Repository</em>" \
--product="<em>My_Product</em>"</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The size of the exported archive depends on the number and size of the packages within the repository.
If you want to split the exported archive into chunks, export your repository using the <code>--chunk-size-gb</code> argument to limit the size by an integer value in gigabytes, for example <code>---chunk-size-gb=<em>2</em></code>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Optional: Verify that the exported archive is located in the export directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ls -lh /var/lib/pulp/exports/<em>My_Organization</em>/Export-<em>My_Repository</em>/1.0/2022-09-02T03-35-24-00-00/</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Exporting_a_Repository_in_a_Syncable_Format_content-management"><a class="anchor" href="#Exporting_a_Repository_in_a_Syncable_Format_content-management"></a>7.12. Exporting a Repository in a Syncable Format</h3>
<div class="paragraph">
<p>You can export the content of a repository in the Library environment of an organization to a syncable format that you can use to create your custom CDN and synchronize the content from the custom CDN over HTTP/HTTPS.</p>
</div>
<div class="paragraph">
<p>You can use the generated content to create the same repository in another orcharhino&#160;Server or in another orcharhino&#160;Server organization using content import.
On importing the exported archive, a regular Content View is created or updated on your downstream orcharhino&#160;Server.
For more information, see <a href="#Importing_a_Content_View_Version_content-management">Importing a Content View Version</a>.</p>
</div>
<div class="paragraph">
<p>You can export the following content in a syncable format from orcharhino&#160;Server:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Yum repositories</p>
</li>
<li>
<p>Kickstart repositories</p>
</li>
<li>
<p>File repositories</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You cannot export Ansible, DEB, and Docker content.</p>
</div>
<div class="paragraph">
<p>The export contains directories with the packages, <strong>listing</strong> files, and metadata of the repository in Yum format that can be used to synchronize in the importing orcharhino&#160;Server.</p>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>Ensure that you set the download policy to <strong>Immediate</strong> for the repository within the Library lifecycle environment you export.
For more information, see <a href="#Download_Policies_Overview_content-management">Download Policies Overview</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Export a repository using the repository name or ID:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-export complete repository \
--organization="<em>My_Organization</em>" \
--product="<em>My_Product</em>" \
--name="<em>My_Repository</em>" \
--format=syncable</pre>
</div>
</div>
</li>
<li>
<p>Optional: Verify that the exported content is located in the export directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># du -sh /var/lib/pulp/exports/<em>My_Organization</em>/Export-<em>My_Repository</em>/1.0/2021-03-02T03-35-24-00-00</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Exporting_Repository_Incrementally_content-management"><a class="anchor" href="#Exporting_Repository_Incrementally_content-management"></a>7.13. Exporting a Repository Incrementally</h3>
<div class="paragraph">
<p>Exporting a repository can be a very expensive operation in terms of system resources.
A typical Red&#160;Hat Enterprise Linux tree may occupy several gigabytes of space on orcharhino&#160;Server.</p>
</div>
<div class="paragraph">
<p>In such cases, you can use <strong>Incremental Export</strong> to export only pieces of content that changed since the previous export.
Incremental exports typically result in smaller archive files than the full exports.</p>
</div>
<div class="paragraph">
<p>The example below shows incremental export of a repository in the Library lifecycle environment.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create an incremental export:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-export incremental repository \
 --organization="<em>My_Organization</em>" \
 --product="<em>My_Product</em>" \
 --name="<em>My_Repository</em>"

Generated /var/lib/pulp/exports/<em>My_Organization</em>/Export-<em>My_Repository</em>/3.0/2021-03-02T03-35-24-00-00/metadata.json</pre>
</div>
</div>
</li>
<li>
<p>Optional: View the exported data:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ls -lh /var/lib/pulp/exports/<em>My_Organization</em>/Export-<em>My_Repository</em>/3.0/2021-03-02T03-35-24-00-00/
total 172K
-rw-r--r--. 1 pulp pulp  20M Mar  2 04:22 export-436882d8-de5a-48e9-a30a-17169318f908-20210302_0422.tar.gz
-rw-r--r--. 1 pulp pulp  333 Mar  2 04:22 export-436882d8-de5a-48e9-a30a-17169318f908-20210302_0422-toc.json
-rw-r--r--. 1 root root  492 Mar  2 04:22 metadata.json</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Exporting_a_Repository_Incrementally_in_a_Syncable_Format_content-management"><a class="anchor" href="#Exporting_a_Repository_Incrementally_in_a_Syncable_Format_content-management"></a>7.14. Exporting a Repository Incrementally in a Syncable Format</h3>
<div class="paragraph">
<p>Exporting a repository can be a very costly operation in terms of system resources.
A typical Red&#160;Hat Enterprise Linux tree may occupy several gigabytes of space on orcharhino&#160;Server.</p>
</div>
<div class="paragraph">
<p>In such cases, you can use <strong>Incremental Export</strong> to export only pieces of content that changed since the previous export.
Incremental exports typically result in smaller archive files than full exports.</p>
</div>
<div class="paragraph">
<p>The procedure below shows an incremental export of a repository in the Library lifecycle environment.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create an incremental export:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-export incremental repository \
--organization="<em>My_Organization</em>" \
--product="<em>My_Product</em>" \
--name="<em>My_Repository</em>" \
--format=syncable</pre>
</div>
</div>
</li>
<li>
<p>Optional: View the exported data:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># find /var/lib/pulp/exports/Default_Organization/Export-SYNCABLE-Red_Hat_Ansible_Engine_2_for_RHEL_8_x86_64_RPMs-1/2.0/2023-03-09T10-55-48-05-00/ -name "*.rpm"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Keeping_Track_of_Your_Exports_content-management"><a class="anchor" href="#Keeping_Track_of_Your_Exports_content-management"></a>7.15. Keeping Track of Your Exports</h3>
<div class="paragraph">
<p>orcharhino keeps records of all exports.
Each time you export content on the upstream orcharhino&#160;Server, the export is recorded and maintained for future querying.
You can use the records to organize and manage your exports, which is useful especially when exporting incrementally.</p>
</div>
<div class="paragraph">
<p>When exporting content from the upstream orcharhino&#160;Server for several downstream orcharhino&#160;Servers, you can also keep track of content exported for specific servers.
This helps you track which content was exported and to where.</p>
</div>
<div class="paragraph">
<p>Use the <code>--destination-server</code> argument during export to indicate the target server.
This option is available for all <code>content-export</code> operations.</p>
</div>
<div class="ulist">
<div class="title">Tracking Destinations of Library Exports</div>
<ul>
<li>
<p>Specify the destination server when exporting the Library:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-export complete library \
--destination-server=<em>My_Downstream_Server_1</em> \
--organization="<em>My_Organization</em>" \
--version=1.0</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Tracking Destinations of Content View Exports</div>
<ul>
<li>
<p>Specify the destination server when exporting a Content View version:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-export complete version \
--content-view="<em>Content_View_Name</em>" \
--destination-server=<em>My_Downstream_Server_1</em> \
--organization="<em>My_Organization</em>" \
--version=1.0</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Querying Export Records</div>
<ul>
<li>
<p>List content exports using the following command:</p>
<div class="listingblock">
<div class="content">
<pre># hammer content-export list --organization="<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Importing_into_the_Library_Environment_content-management"><a class="anchor" href="#Importing_into_the_Library_Environment_content-management"></a>7.16. Importing into the Library Environment</h3>
<div class="paragraph">
<p>You can import exported Library content into the Library lifecycle environment of an organization on another orcharhino&#160;Server.
For more information about exporting contents from the Library environment, see <a href="#Exporting_the_Library_Environment_content-management">Exporting the Library Environment</a>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The exported files must be in a directory under <code>/var/lib/pulp/imports</code>.</p>
</li>
<li>
<p>If there are any Red Hat repositories in the exported content, the importing organization&#8217;s manifest must contain subscriptions for the products contained within the export.</p>
</li>
<li>
<p>The user importing the content must have the <em>Content Importer</em> Role.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Copy the exported files to a subdirectory of <code>/var/lib/pulp/imports</code> on orcharhino&#160;Server where you want to import.</p>
</li>
<li>
<p>Set the ownership of the import directory and its contents to <code>pulp:pulp</code>.</p>
<div class="listingblock">
<div class="content">
<pre># chown -R pulp:pulp /var/lib/pulp/imports/2021-03-02T03-35-24-00-00
# ls -lh /var/lib/pulp/imports/2021-03-02T03-35-24-00-00
total 68M
-rw-r--r--. 1 pulp pulp 68M Mar  2 04:29 export-1e25417c-6d09-49d4-b9a5-23df4db3d52a-20210302_0335.tar.gz
-rw-r--r--. 1 pulp pulp 333 Mar  2 04:29 export-1e25417c-6d09-49d4-b9a5-23df4db3d52a-20210302_0335-toc.json
-rw-r--r--. 1 pulp pulp 443 Mar  2 04:29 metadata.json</pre>
</div>
</div>
</li>
<li>
<p>Identify the Organization that you wish to import into.</p>
</li>
<li>
<p>To import the Library content to orcharhino&#160;Server, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre># hammer content-import library \
--organization="<em>My_Organization</em>" \
--path=/var/lib/pulp/imports/2021-03-02T03-35-24-00-00</pre>
</div>
</div>
<div class="paragraph">
<p>Note you must enter the full path <code>/var/lib/pulp/imports/<em>My_Exported_Library_Dir</em></code>.
Relative paths do not work.</p>
</div>
</li>
<li>
<p>To verify that you imported the Library content, check the contents of the Product and Repositories.
A new Content View called <code>Import-Library</code> is created in the target organization.
This Content View is used to facilitate the Library content import.</p>
<div class="paragraph">
<p>By default, this Content View is not shown in the orcharhino management UI.
<code>Import-Library</code> is not meant to be assigned directly to hosts.
Instead, assign your hosts to <code>Default Organization View</code> or another Content View as you would normally.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Importing_a_Content_View_Version_content-management"><a class="anchor" href="#Importing_a_Content_View_Version_content-management"></a>7.17. Importing a Content View Version</h3>
<div class="paragraph">
<p>You can import an exported Content View version to create a version with the same content in an organization on another orcharhino&#160;Server.
For more information about exporting a Content View version, see <a href="#Exporting_a_Content_View_Version_content-management">Exporting a Content View Version</a>.</p>
</div>
<div class="paragraph">
<p>When you import a Content View version, it has the same major and minor version numbers and contains the same repositories with the same packages and errata.
Custom Repositories, Products and Content Views are automatically created if they do not exist in the importing organization.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The exported files must be in a directory under <code>/var/lib/pulp/imports</code>.</p>
</li>
<li>
<p>If there are any Red Hat repositories in the exported content, the importing organization&#8217;s manifest must contain subscriptions for the products contained within the export.</p>
</li>
<li>
<p>The user importing the Content View version must have the <em>Content Importer</em> Role.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Copy the exported files to a subdirectory of <code>/var/lib/pulp/imports</code> on orcharhino&#160;Server where you want to import.</p>
</li>
<li>
<p>Set the ownership of the import directory and its contents to <code>pulp:pulp</code>.</p>
<div class="listingblock">
<div class="content">
<pre># chown -R pulp:pulp /var/lib/pulp/imports/2021-02-25T21-15-22-00-00/</pre>
</div>
</div>
</li>
<li>
<p>Verify that the ownership is set correctly:</p>
<div class="listingblock">
<div class="content">
<pre># ls -lh /var/lib/pulp/imports/2021-02-25T21-15-22-00-00/</pre>
</div>
</div>
</li>
<li>
<p>To import the Content View version to orcharhino&#160;Server, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-import version \
--organization-id=<em>My_Organization_ID</em> \
--path=/var/lib/pulp/imports/2021-02-25T21-15-22-00-00/</pre>
</div>
</div>
<div class="paragraph">
<p>Note that you must enter the full path <code>/var/lib/pulp/imports/<em>My_Exported_Version_Dir</em></code>.
Relative paths do not work.</p>
</div>
</li>
<li>
<p>To verify that you imported the Content View version successfully, list Content View versions for your organization:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view version list \
--organization-id=<em>My_Organization_ID</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Importing_a_Repository_content-management"><a class="anchor" href="#Importing_a_Repository_content-management"></a>7.18. Importing a Repository</h3>
<div class="paragraph">
<p>You can import an exported repository into an organization on another orcharhino&#160;Server.
For more information about exporting content of a repository, see <a href="#Exporting_a_Repository_content-management">Exporting a Repository</a>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The export files must be in a directory under <code>/var/lib/pulp/imports</code>.</p>
</li>
<li>
<p>If the export contains any Red Hat repositories, the manifest of the importing organization must contain subscriptions for the products contained within the export.</p>
</li>
<li>
<p>The user importing the content must have the <em>Content Importer</em> Role.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Copy the exported files to a subdirectory of <code>/var/lib/pulp/imports</code> on orcharhino&#160;Server where you want to import.</p>
</li>
<li>
<p>Set the ownership of the import directory and its contents to <code>pulp:pulp</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># chown -R pulp:pulp /var/lib/pulp/imports/2021-03-02T03-35-24-00-00
# ls -lh /var/lib/pulp/imports/2021-03-02T03-35-24-00-00
total 68M
-rw-r--r--. 1 pulp pulp 68M Mar  2 04:29 export-1e25417c-6d09-49d4-b9a5-23df4db3d52a-20210302_0335.tar.gz
-rw-r--r--. 1 pulp pulp 333 Mar  2 04:29 export-1e25417c-6d09-49d4-b9a5-23df4db3d52a-20210302_0335-toc.json
-rw-r--r--. 1 pulp pulp 443 Mar  2 04:29 metadata.json</pre>
</div>
</div>
</li>
<li>
<p>Identify the Organization that you wish to import into.</p>
</li>
<li>
<p>To import the Library content to orcharhino&#160;Server, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre># hammer content-import repository \
--organization="<em>My_Organization</em>" \
--path=/var/lib/pulp/imports/<em>2021-03-02T03-35-24-00-00</em></pre>
</div>
</div>
<div class="paragraph">
<p>Note that you must enter the full path <code>/var/lib/pulp/imports/<em>My_Exported_Repo_Dir</em></code>.
Relative paths do not work.</p>
</div>
</li>
<li>
<p>To verify that you imported the repository, check the contents of the Product and Repository.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Exporting_and_Importing_Content_Using_Hammer_CLI_Cheat_Sheet_content-management"><a class="anchor" href="#Exporting_and_Importing_Content_Using_Hammer_CLI_Cheat_Sheet_content-management"></a>7.19. Exporting and Importing Content using Hammer CLI Cheat Sheet</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Export</caption>
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Intent</th>
<th class="tableblock halign-left valign-top">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fully export an Organization&#8217;s Library</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hammer content-export complete library --organization="<em>My_Organization</em>"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Incrementally export an Organization&#8217;s Library (assuming you have exported something previously)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hammer content-export incremental library --organization="<em>My_Organization</em>"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fully export a Content View version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hammer content-export complete version --content-view="<em>My_Content_View</em>" --version=1.0 --organization="<em>My_Organization</em>"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Export a Content View version promoted to the Dev Environment</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hammer content-export complete version --content-view="<em>My_Content_View</em>" --organization="<em>My_Organization</em>" --lifecycle-environment="Dev"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Export a Content View in smaller chunks (2-GB slabs)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hammer content-export complete version --content-view="<em>My_Content_View</em>" --version=1.0 --organization="<em>My_Organization</em>" --chunk-size-gb=2</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Incrementally export a Content View version (assuming you have exported something previously)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hammer content-export incremental version --content-view="<em>My_Content_View</em>" --version=2.0 --organization="<em>My_Organization</em>"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fully export a Repository</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hammer content-export complete repository --product="<em>My_Product</em>" --name="<em>My_Repository</em>" --organization="<em>My_Organization</em>"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Incrementally export a Repository (assuming you have exported something previously)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hammer content-export incremental repository --product="<em>My_Product</em>" --name="<em>My_Repository</em>" --organization="<em>My_Organization</em>"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">List exports</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hammer content-export list --content-view="<em>My_Content_View</em>" --organization="<em>My_Organization</em>"</code></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Import</caption>
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Intent</th>
<th class="tableblock halign-left valign-top">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Import into an Organization&#8217;s Library</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hammer content-import library --organization="<em>My_Organization</em>" --path="/var/lib/pulp/imports/<em>My_Exported_Library_Dir</em>"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Import to a Content View version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hammer content-import version --organization="<em>My_Organization</em>" --path="/var/lib/pulp/imports/<em>My_Exported_Version_Dir</em>"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Import a Repository</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hammer content-import repository --organization="<em>My_Organization</em>" --path="/var/lib/pulp/imports/<em>My_Exported_Repo_Dir</em>"</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Managing_Activation_Keys_content-management"><a class="anchor" href="#Managing_Activation_Keys_content-management"></a>8. Managing Activation Keys</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Activation keys provide a method to automate system registration and subscription attachment.
You can create multiple keys and associate them with different environments and Content Views.
For example, you might create a basic activation key with a subscription for Red&#160;Hat Enterprise Linux workstations and associate it with Content Views from a particular environment.</p>
</div>
<div class="paragraph">
<p>You can use activation keys during content host registration to improve the speed, simplicity and consistency of the process.
Note that activation keys are used only when hosts are registered.
If changes are made to an activation key, it is applicable only to hosts that are registered with the amended activation key in the future.
The changes are not made to existing hosts.</p>
</div>
<div class="paragraph">
<p>Activation keys can define the following properties for content hosts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Associated subscriptions and subscription attachment behavior</p>
</li>
<li>
<p>Available products and repositories</p>
</li>
<li>
<p>A life cycle environment and a Content View</p>
</li>
<li>
<p>Host collection membership</p>
</li>
<li>
<p>System purpose</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Content View Conflicts between Host Creation and Registration</div>
<p>When you provision a host, orcharhino uses provisioning templates and other content from the Content View that you set in the host group or host settings.
When the host is registered, the Content View from the activation key overwrites the original Content View from the host group or host settings.
Then orcharhino uses the Content View from the activation key for every future task, for example, rebuilding a host.</p>
</div>
<div class="paragraph">
<p>When you rebuild a host, ensure that you set the Content View that you want to use in the activation key and not in the host group or host settings.</p>
</div>
<div class="paragraph">
<div class="title">Using the Same Activation Key with Multiple Content Hosts</div>
<p>You can apply the same activation key to multiple content hosts if it contains enough subscriptions.
However, activation keys set only the initial configuration for a content host.
When the content host is registered to an organization, the organization&#8217;s content can be attached to the content host manually.</p>
</div>
<div class="paragraph">
<div class="title">Using Multiple Activation Keys with a Content Host</div>
<p>A content host can be associated with multiple activation keys that are combined to define the host settings.
In case of conflicting settings, the last specified activation key takes precedence.
You can specify the order of precedence by setting a host group parameter as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer hostgroup set-parameter \
--hostgroup "<em>My_Host_Group</em>" \
--name "<em>My_Activation_Key</em>" \
--value "<em>name_of_first_key</em>", "<em>name_of_second_key</em>", ...</pre>
</div>
</div>
<div class="sect2">
<h3 id="Creating_an_Activation_Key_content-management"><a class="anchor" href="#Creating_an_Activation_Key_content-management"></a>8.1. Creating an Activation Key</h3>
<div class="paragraph">
<p>You can use activation keys to define a specific set of subscriptions to attach to hosts during registration.
The subscriptions that you add to an activation key must be available within the associated Content View.</p>
</div>
<div class="paragraph">
<p>Subscription Manager attaches subscriptions differently depending on the following factors:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Are there any subscriptions associated with the activation key?</p>
</li>
<li>
<p>Is the auto-attach option enabled?</p>
</li>
<li>
<p>For Red&#160;Hat Enterprise Linux 8 hosts: Is there system purpose set on the activation key?</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that orcharhino automatically attaches subscriptions only for the products installed on a host.
For subscriptions that do not list products installed on Red&#160;Hat Enterprise Linux by default, such as the Extended Update Support (EUS) subscription, use an activation key specifying the required subscriptions and with the auto-attach disabled.</p>
</div>
<div class="paragraph">
<p>Based on the previous factors, there are three possible scenarios for subscribing with activation keys:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Activation key that attaches subscriptions automatically.</p>
<div class="paragraph">
<p>With no subscriptions specified and auto-attach enabled, hosts using the activation key search for the best fitting subscription from the ones provided by the Content View associated with the activation key.
This is similar to entering the <code>subscription-manager --auto-attach</code> command.
For Red&#160;Hat Enterprise Linux 8 hosts, you can configure the activation key to set system purpose on hosts during registration to enhance the automatic subscriptions attachment.</p>
</div>
</li>
<li>
<p>Activation key providing a custom set of subscription for auto-attach.</p>
<div class="paragraph">
<p>If there are subscriptions specified and auto-attach is enabled, hosts using the activation key select the best fitting subscription from the list specified in the activation key.
Setting system purpose on the activation key does not affect this scenario.</p>
</div>
</li>
<li>
<p>Activation key with the exact set of subscriptions.</p>
<div class="paragraph">
<p>If there are subscriptions specified and auto-attach is disabled, hosts using the activation key are associated with all subscriptions specified in the activation key.
Setting system purpose on the activation key does not affect this scenario.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Custom Products</div>
<p>If a custom product, typically containing content not provided by Red Hat, is assigned to an activation key, this product is always enabled for the registered content host regardless of the auto-attach setting.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the orcharhino management UI, see the <a href="#cli-creating-an-activation-key_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Activation keys</strong> and click <strong>Create Activation Key</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter the name of the activation key.</p>
</li>
<li>
<p>If you want to set a limit, clear the <strong>Unlimited hosts</strong> checkbox, and in the <strong>Limit</strong> field, enter the maximum number of systems you can register with the activation key.
If you want unlimited hosts to register with the activation key, ensure the <strong>Unlimited Hosts</strong> checkbox is selected.</p>
</li>
<li>
<p>Optional: In the <strong>Description</strong> field, enter a description for the activation key.</p>
</li>
<li>
<p>From the <strong>Environment</strong> list, select the environment to use.</p>
</li>
<li>
<p>From the <strong>Content View</strong> list, select a Content View to use.
If you intend to use the deprecated <code>Katello Agent</code> instead of <code>Remote Execution</code>, the Content View must contain the orcharhino&#160;Client repository because it contains the <code>katello-agent</code> package.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
<li>
<p>Optional: For Red&#160;Hat Enterprise Linux 8 hosts, in the <strong>System Purpose</strong> section, you can configure the activation key with system purpose to set on hosts during registration to enhance subscriptions auto attachment.</p>
</li>
</ol>
</div>
<div id="cli-creating-an-activation-key_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Create the activation key:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer activation-key create \
--name "<em>My_Activation_Key</em>" \
--unlimited-hosts \
--description "<em>Example Stack in the Development Environment</em>" \
--lifecycle-environment "<em>Development</em>" \
--content-view "<em>Stack</em>" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Optional: For Red&#160;Hat Enterprise Linux 8 hosts, enter the following command to configure the activation key with system purpose to set on hosts during registration to enhance subscriptions auto attachment.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer activation-key update \
--organization "<em>My_Organization</em>" \
--name "<em>My_Activation_Key</em>" \
--service-level "<em>Standard</em>" \
--purpose-usage "<em>Development/Test</em>" \
--purpose-role "<em>Red&#160;Hat Enterprise Linux Server</em>" \
--purpose-addons "<em>addons</em>"</pre>
</div>
</div>
</li>
<li>
<p>Obtain a list of your subscription IDs:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer subscription list --organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Attach the Red&#160;Hat Enterprise Linux subscription UUID to the activation key:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer activation-key add-subscription \
--name "<em>My_Activation_Key</em>" \
--subscription-id <em>My_Subscription_ID</em> \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>List the product content associated with the activation key:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer activation-key product-content \
--name "<em>My_Activation_Key</em>" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Override the default auto-enable status for the orcharhino&#160;Client repository.
The default status is set to disabled.
To enable, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer activation-key content-override \
--name "<em>My_Activation_Key</em>" \
--content-label https://yum.theforeman.org/client/3.4/el7/x86_64/foreman-client-release.rpm \
--value 1 \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Updating_Subscriptions_Associated_with_an_Activation_Key_content-management"><a class="anchor" href="#Updating_Subscriptions_Associated_with_an_Activation_Key_content-management"></a>8.2. Updating Subscriptions Associated with an Activation Key</h3>
<div class="paragraph">
<p>Use this procedure to change the subscriptions associated with an activation key.
To use the CLI instead of the orcharhino management UI, see the <a href="#cli-updating-subscriptions-associated-with-an-activation-key_content-management">CLI procedure</a>.</p>
</div>
<div class="paragraph">
<p>Note that changes to an activation key apply only to machines provisioned after the change.
To update subscriptions on existing content hosts, see <a href="#Updating_Red_Hat_Subscriptions_on_Multiple_Hosts_content-management">Updating Red Hat Subscriptions on Multiple Hosts</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Activation keys</strong> and click the name of the activation key.</p>
</li>
<li>
<p>Click the <strong>Subscriptions</strong> tab.</p>
</li>
<li>
<p>To remove subscriptions, select <strong>List/Remove</strong>, and then select the checkboxes to the left of the subscriptions to be removed and then click <strong>Remove Selected</strong>.</p>
</li>
<li>
<p>To add subscriptions, select <strong>Add</strong>, and then select the checkboxes to the left of the subscriptions to be added and then click <strong>Add Selected</strong>.</p>
</li>
<li>
<p>Click the <strong>Repository Sets</strong> tab and review the repositories' status settings.</p>
</li>
<li>
<p>To enable or disable a repository, select the checkbox for a repository and then change the status using the <strong>Select Action</strong> list.</p>
</li>
<li>
<p>Click the <strong>Details</strong> tab, select a Content View for this activation key, and then click <strong>Save</strong>.</p>
</li>
</ol>
</div>
<div id="cli-updating-subscriptions-associated-with-an-activation-key_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List the subscriptions that the activation key currently contains:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer activation-key subscriptions \
--name <em>My_Activation_Key</em> \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Remove the required subscription from the activation key:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer activation-key remove-subscription \
--name "<em>My_Activation_Key</em>" \
--subscription-id <em>ff808181533518d50152354246e901aa</em> \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>For the <code>--subscription-id</code> option, you can use either the UUID or the ID of the subscription.</p>
</div>
</li>
<li>
<p>Attach new subscription to the activation key:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer activation-key add-subscription \
--name "<em>My_Activation_Key</em>" \
--subscription-id <em>ff808181533518d50152354246e901aa</em> \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>For the <code>--subscription-id</code> option, you can use either the UUID or the ID of the subscription.</p>
</div>
</li>
<li>
<p>List the product content associated with the activation key:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer activation-key product-content \
--name "<em>My_Activation_Key</em>" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Override the default auto-enable status for the required repository:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer activation-key content-override \
--name "<em>My_Activation_Key</em>" \
--content-label <em>content_label</em> \
--value 1 \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>For the <code>--value</code> option, enter <code>1</code> for enable, <code>0</code> for disable.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Using_Activation_Keys_for_Host_Registration_content-management"><a class="anchor" href="#Using_Activation_Keys_for_Host_Registration_content-management"></a>8.3. Using Activation Keys for Host Registration</h3>
<div class="paragraph">
<p>You can use activation keys to complete the following tasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Registering new hosts during provisioning through orcharhino.
The kickstart provisioning templates in orcharhino contain commands to register the host using an activation key that is defined when creating a host.</p>
</li>
<li>
<p>Registering existing Red&#160;Hat Enterprise Linux hosts.
Configure Subscription Manager to use orcharhino&#160;Server for registration and specify the activation key when running the <code>subscription-manager register</code> command.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can register hosts with orcharhino using the host registration feature, the orcharhino API, or Hammer CLI.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Hosts &gt; Register Host</strong>.</p>
</li>
<li>
<p>Click <strong>Generate</strong> to create the registration command.</p>
</li>
<li>
<p>Click on the <em>files</em> icon to copy the command to your clipboard.</p>
</li>
<li>
<p>Log in to the host you want register and run the previously generated command.</p>
</li>
<li>
<p>Ensure that the appropriate repositories have been enabled:</p>
<div class="ulist">
<ul>
<li>
<p>On Enterprise Linux: Check the <code>/etc/yum.repos.d/redhat.repo</code> file and ensure that the appropriate repositories have been enabled.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Generate the host registration command using the Hammer CLI:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host-registration generate-command \
--activation-keys "<em>My_Activation_Key</em>"</pre>
</div>
</div>
</li>
<li>
<p>Log in to the host you want register and run the previously generated command.</p>
</li>
<li>
<p>Ensure that the appropriate repositories have been enabled:</p>
<div class="ulist">
<ul>
<li>
<p>On Enterprise Linux: Check the <code>/etc/yum.repos.d/redhat.repo</code> file and ensure that the appropriate repositories have been enabled.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">API procedure</div>
<ol class="arabic">
<li>
<p>Generate the host registration command using the orcharhino API:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl -X POST https://orcharhino.example.com/api/registration_commands \
--user "<em>My_User_Name</em>" \
-H 'Content-Type: application/json' \
-d '{ "registration_command": { "activation_keys": ["<em>My_Activation_Key_1</em>, <em>My_Activation_Key_2</em>"] }}'</pre>
</div>
</div>
<div class="paragraph">
<p>Use an activation key to simplify specifying the environments.
For more information, see <a href="https://docs.theforeman.org/3.4/Managing_Content/index-orcharhino.html#Managing_Activation_Keys_content-management">Managing Activation Keys</a> in <em>Managing Content</em>.</p>
</div>
<div class="paragraph">
<p>To enter a password as command line argument, use <code>username:password</code> syntax.
Keep in mind this can save the password in the shell history.</p>
</div>
<div class="paragraph">
<p>For more information about registration see <a href="https://docs.theforeman.org/3.4/Managing_Hosts/index-orcharhino.html#Registering_Hosts_managing-hosts">Registering a Host to orcharhino</a> in <em>Managing Hosts</em>.</p>
</div>
</li>
<li>
<p>Log in to the host you want register and run the previously generated command.</p>
</li>
<li>
<p>Ensure that the appropriate repositories have been enabled:</p>
<div class="ulist">
<ul>
<li>
<p>On Enterprise Linux: Check the <code>/etc/yum.repos.d/redhat.repo</code> file and ensure that the appropriate repositories have been enabled.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Multiple Activation Keys</div>
<p>You can use multiple activation keys when registering a content host.
You can then create activation keys for specific subscription sets and combine them according to content host requirements.
For example, the following command registers a content host to your organization with both VDC and OpenShift subscriptions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># subscription-manager register --org="<em>My_Organization</em>" \
--activationkey="ak-VDC,ak-OpenShift"</pre>
</div>
</div>
<div class="paragraph">
<div class="title">Settings Conflicts</div>
<p>If there are conflicting settings in activation keys, the rightmost key takes precedence.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Settings that conflict: <strong>Service Level</strong>, <strong>Release Version</strong>, <strong>Environment</strong>, <strong>Content View</strong>, and <strong>Product Content</strong>.</p>
</li>
<li>
<p>Settings that do not conflict and the host gets the union of them: <strong>Subscriptions</strong> and <strong>Host Collections</strong>.</p>
</li>
<li>
<p>Settings that influence the behavior of the key itself and not the host configuration: <strong>Content Host Limit</strong> and <strong>Auto-Attach</strong>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Enabling_Auto_Attach_content-management"><a class="anchor" href="#Enabling_Auto_Attach_content-management"></a>8.4. Enabling Auto-Attach</h3>
<div class="paragraph">
<p>When auto-attach is enabled on an activation key and there are subscriptions associated with the key, the subscription management service selects and attaches the best-matched associated subscriptions based on a set of criteria like currently installed products, architecture, and preferences like service level.</p>
</div>
<div class="paragraph">
<p>You can enable auto-attach and have no subscriptions associated with the key.
This type of key is commonly used to register virtual machines when you do not want the virtual machine to consume a physical subscription, but to inherit a host-based subscription from the hypervisor.</p>
</div>
<div class="paragraph">
<p>Auto-attach is enabled by default.
Disable the option if you want to force attach all subscriptions associated with the activation key.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Activation Keys</strong>.</p>
</li>
<li>
<p>Click the activation key name that you want to edit.</p>
</li>
<li>
<p>Click the <strong>Subscriptions</strong> tab.</p>
</li>
<li>
<p>Click the edit icon next to <strong>Auto-Attach</strong>.</p>
</li>
<li>
<p>Select or clear the checkbox to enable or disable auto-attach.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Enter the following command to enable auto-attach on the activation key:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer activation-key update --name "<em>My_Activation_Key</em>" \
--organization "<em>My_Organization</em>" --auto-attach true</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Setting_the_Service_Level_content-management"><a class="anchor" href="#Setting_the_Service_Level_content-management"></a>8.5. Setting the Service Level</h3>
<div class="paragraph">
<p>You can configure an activation key to define a default service level for the new host created with the activation key.
Setting a default service level selects only the matching subscriptions to be attached to the host.
For example, if the default service level on an activation key is set to Premium, only subscriptions with premium service levels are attached to the host upon registration.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Activation Keys</strong>.</p>
</li>
<li>
<p>Click the activation key name you want to edit.</p>
</li>
<li>
<p>Click the edit icon next to <strong>Service Level</strong>.</p>
</li>
<li>
<p>Select the required service level from the list.
The list only contains service levels available to the activation key.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Enter the following command to set a default service level to Premium on the activation key:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer activation-key update --name "<em>My_Activation_Key</em>" \
--organization "<em>My_Organization</em>" --service-level premium</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Managing_SUSE_Content_content-management"><a class="anchor" href="#Managing_SUSE_Content_content-management"></a>9. Managing SUSE Content</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use the SCC Manager plug-in to comfortably manage content from SUSE using your orcharhino.</p>
</div>
<div class="sect2">
<h3 id="Preparing_SUSE_Installation_Media_content-management"><a class="anchor" href="#Preparing_SUSE_Installation_Media_content-management"></a>9.1. Preparing SUSE Installation Media</h3>
<div class="paragraph">
<p>Extract the SUSE installation medium on your orcharhino&#160;Server to perform offline installations.
This example prepares the installation medium for SUSE Linux Enterprise Server 15 SP3.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Download the <code>SLES 15 SP3</code> installation medium from <a href="https://www.suse.com/download/sles/">suse.com/download/sles</a>.</p>
</li>
<li>
<p>Download the signature and checksum from <a href="https://www.suse.com/support/security/download-verification/">suse.com</a>.</p>
</li>
<li>
<p>Transfer the <code>.iso</code> image, the signature, and the checksum from your local machine to orcharhino&#160;Server using <code>scp</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># scp SLE-15-SP3-Full-x86_64-GM-Media1.iso root@orcharhino.example.com:/tmp/
# scp SLE-15-SP3-Full-x86_64-GM-Media1.iso.sha256 root@orcharhino.example.com:/tmp/
# scp sles_15_sp3.signature root@orcharhino.example.com:/tmp/</pre>
</div>
</div>
</li>
<li>
<p>On your orcharhino&#160;Server, verify the integrity and authenticity of the <code>.iso</code> image using GPG public keys:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># cd /tmp
# gpg --verify sles_15_sp3.signature SLE-15-SP3-Full-x86_64-GM-Media1.iso.sha256
# echo '2a6259fc849fef6ce6701b8505f64f89de0d2882857def1c9e4379d26e74fa56 SLE-15-SP3-Full-x86_64-GM-Media1.iso' | sha256sum --check</pre>
</div>
</div>
</li>
<li>
<p>Mount the <code>.iso</code> image:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mount SLE-15-SP3-Full-x86_64-GM-Media1.iso /mnt</pre>
</div>
</div>
</li>
<li>
<p>Copy the content of the mounted installation medium to the <code>pub</code> directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir -p /var/www/html/pub/installation_media/sles/15sp3
# cp -a /mnt/* /var/www/html/pub/installation_media/sles/15sp3/</pre>
</div>
</div>
</li>
<li>
<p>Unmount and delete the <code>.iso</code> image:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># cd
# umount /mnt
# rm -f /tmp/SLE-15-SP3-Full-x86_64-GM-Media1.iso
# rm -f /tmp/SLE-15-SP3-Full-x86_64-GM-Media1.iso.sha256
# rm -f /tmp/sles_15_sp3.signature</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Use the path to the local installation media files when <a href="https://docs.theforeman.org/3.4/Provisioning_Hosts/index-orcharhino.html#adding-installation-media_provisioning">creating an installation medium</a>, for example <code>http://orcharhino.example.com/pub/installation_media/sles/15sp3/</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Creating_a_SUSE_Operating_System_content-management"><a class="anchor" href="#Creating_a_SUSE_Operating_System_content-management"></a>9.2. Creating a SUSE Operating System</h3>
<div class="paragraph">
<p><a href="https://docs.theforeman.org/3.4/Provisioning_Hosts/index-orcharhino.html#adding-installation-media_provisioning">Create an installation media</a> and <a href="https://docs.theforeman.org/3.4/Provisioning_Hosts/index-orcharhino.html#creating-operating-systems_provisioning">operating system</a> entry for SLES 15 SP3.</p>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>An <a href="#Preparing_SUSE_Installation_Media_content-management">extracted <code>.iso</code> image</a> on orcharhino or an HTTP server that can be reached during the host provisioning process.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Hosts &gt; Installation Media</strong> and click <strong>Create Medium</strong>.</p>
</li>
<li>
<p>Set a <strong>Name</strong> for the installation medium for SLES 15 SP3.
Add <code>local</code> to the name because the path of the extracted <code>.iso</code> image points to your orcharhino.</p>
</li>
<li>
<p>Set the <strong>Path</strong> of the extracted <code>.iso</code> image.
The content of <code>/var/www/html/pub/</code> is publicly available on <code>http://orcharhino.example.com/pub/</code>.
If you extract the <code>.iso</code> image to <code>/var/www/html/pub/installation_media/sles/15sp3/</code>, the path is <code>http://orcharhino.example.com/pub/installation_media/sles/15sp3/</code>.</p>
</li>
<li>
<p>Set the <strong>Operating System Family</strong> to <code>SUSE</code> for all SLES systems.</p>
</li>
<li>
<p>Set a location and organization context for the installation media.</p>
</li>
<li>
<p>On the <strong>Parameters</strong> tab, add the <code>sle-module-basesystem-url</code> parameter, select the <strong>string</strong> type, and enter the value <code>http://orcharhino.example.com/pub/installation_media/sles/15sp3/</code>.
Note that the value depends on the path of the extracted <code>.iso</code> image.</p>
<div class="paragraph">
<p>Add the <code>or_client_repo_url</code> parameter, select the <strong>string</strong> type, and enter the value <code>http://orcharhino.example.com/pulp/repos/<em>My_Organization</em>/Library/custom/SLES_Client/SLES_Client_15SP3/</code>.</p>
</div>
<div class="paragraph">
<p>(SLES 12 only) Add the parameter <code>additional_media</code>, select the <strong>string</strong> type, and enter the value <code>""</code>.</p>
</div>
</li>
<li>
<p>Click <strong>Submit</strong> to save the installation media entry for SLES 15 SP3.</p>
</li>
<li>
<p>In the orcharhino management UI, navigate to <strong>Hosts &gt; Operating Systems</strong> and click <strong>Create Operating System</strong>.</p>
</li>
<li>
<p>Set the <strong>Name</strong> of the operating system.
Choose a name as reported by Ansible, Puppet, or Salt as fact.</p>
</li>
<li>
<p>Set the <strong>Major Version</strong> of SLES, for example <code>15</code>.</p>
</li>
<li>
<p>Set the <strong>Minor Version</strong> of SLES, for example <code>3</code> for SLES 15 SP3.</p>
</li>
<li>
<p>Optional: Add an arbitrary <strong>Description</strong>.</p>
</li>
<li>
<p>Set the <strong>Family</strong> to <code>SUSE</code> for all SLES systems.</p>
</li>
<li>
<p>Set the <strong>Root Password Hash</strong> to <code>SHA256</code> for SLES 15 SP3.</p>
</li>
<li>
<p>Assign the <strong>Architectures</strong> to SLES 15 SP3.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to save the operating system entry.</p>
</li>
<li>
<p>In the orcharhino management UI, navigate to <strong>Hosts &gt; Partition Tables</strong> and click <strong>Create Partition Table</strong>.
The partition tables are stored in the <code>/usr/share/foreman/app/views/unattended/partition_tables_templates/</code> directory on your orcharhino&#160;Server.</p>
<div class="paragraph">
<p>For more information, see <a href="https://docs.theforeman.org/3.4/Provisioning_Hosts/index-orcharhino.html#creating-partition-tables_provisioning">Partition Tables</a> in <em>Provisioning Hosts</em>.</p>
</div>
</li>
<li>
<p>In the orcharhino management UI, navigate to <strong>Hosts &gt; Provisioning Templates</strong> and click <strong>Create Template</strong>.
The provisioning templates are stored in the <code>/usr/share/foreman/app/views/unattended/provisioning_templates/</code> directory on your orcharhino&#160;Server.</p>
<div class="paragraph">
<p>For more information, see <a href="https://docs.theforeman.org/3.4/Provisioning_Hosts/index-orcharhino.html#provisioning-templates_provisioning">Provisioning Templates</a> in <em>Provisioning Hosts</em>.</p>
</div>
</li>
<li>
<p>In the orcharhino management UI, navigate to <strong>Hosts &gt; Operating Systems</strong>.</p>
</li>
<li>
<p>Select the previously created operating system.</p>
</li>
<li>
<p>On the <strong>Partition Table</strong> tab, select the previously created partition table.</p>
</li>
<li>
<p>On the <strong>Templates</strong> tab, select the previously created provisioning template.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to save the operating system entry.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Installing_the_SCC_Manager_Plugin_content-management"><a class="anchor" href="#Installing_the_SCC_Manager_Plugin_content-management"></a>9.3. Installing the SCC Manager Plug-in</h3>
<div class="paragraph">
<p>Perform the following step to install the <em>SCC Manager</em> plug-in on your orcharhino.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Install the SCC Manager plug-in on your orcharhino&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --enable-foreman-plugin-scc-manager</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Continue with <a href="#Adding_an_SCC_Account_to_Server_content-management">adding your SCC account</a> to orcharhino.</p>
</div>
</div>
<div class="sect2">
<h3 id="Adding_an_SCC_Account_to_Server_content-management"><a class="anchor" href="#Adding_an_SCC_Account_to_Server_content-management"></a>9.4. Adding an SCC Account to orcharhino</h3>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p><a href="#Installing_the_SCC_Manager_Plugin_content-management">SCC Manager plug-in installed</a> on your orcharhino</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content &gt; Content Credentials</strong> and click <strong>Create Content Credential</strong>.</p>
<div class="paragraph">
<p>Add the GPG public key for SLES 15 SP3 from <a href="https://www.suse.com/support/security/keys/">suse.com</a>.</p>
</div>
</li>
<li>
<p>In the orcharhino management UI, navigate to <strong>Content &gt; SUSE Subscriptions</strong>.</p>
</li>
<li>
<p>Click <strong>Add SCC Account</strong>.</p>
</li>
<li>
<p>Enter your account name and password.</p>
</li>
<li>
<p>Optional: Set a <strong>Sync interval</strong> to periodically update the SCC authentication tokens.
Note that this does not refer to synchronizing content to orcharhino.</p>
</li>
<li>
<p>Assign a <strong>GPG key for SUSE products</strong> to the SCC products.
<code>zypper</code> automatically verifies the signatures of each software package to ensure their authenticity.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>You can also set the GPG public key for SUSE repositories at a later stage.
However, changing it does not affect already synchronized products.
If you already have synchronized products in orcharhino, navigate to <strong>Content &gt; Products</strong> and replace the GPG key in each respective product.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click <strong>Test connection</strong> to verify your account information.
Note that you have to re-enter your password if you have already saved your SCC account to orcharhino.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to save your SCC account to orcharhino.</p>
</li>
<li>
<p>In the orcharhino management UI, navigate to <strong>Content &gt; SUSE Subscriptions</strong>, select your SCC account, and click <strong>Sync</strong> to fetch a list of products associated to your SCC account.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Continue with <a href="#Importing_SUSE_Products_content-management">importing products</a> from your SCC account.</p>
</div>
</div>
<div class="sect2">
<h3 id="Switching_SCC_Accounts_content-management"><a class="anchor" href="#Switching_SCC_Accounts_content-management"></a>9.5. Switching SCC Accounts</h3>
<div class="paragraph">
<p>You can switch your SCC account by changing the SCC credentials saved on orcharhino.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>The SCC Manager plug-in does not support multiple SCC accounts.</p>
</div>
<div class="paragraph">
<p>If you want to switch your SCC account and retain the synchronized content, do not immediately delete your old SCC account, even if it is expired.
If you delete your old SCC account, you cannot reuse existing repositories, products, Content Views, and composite Content Views.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content &gt; SUSE Subscriptions</strong>.</p>
</li>
<li>
<p>Select your SCC account.</p>
</li>
<li>
<p>Enter a new <strong>Login</strong> and <strong>Password</strong>.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to change your SCC account.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Your new SCC account reuses existing products and repositories from SUSE.
Content that is no longer available for your new SCC account cannot be synchronized anymore.</p>
</div>
</div>
<div class="sect2">
<h3 id="Importing_SUSE_Products_content-management"><a class="anchor" href="#Importing_SUSE_Products_content-management"></a>9.6. Importing SUSE Products</h3>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p><a href="#Installing_the_SCC_Manager_Plugin_content-management">SCC Manager plug-in installed</a> on your orcharhino</p>
</li>
<li>
<p>Access to the SUSE product <code>SUSE Linux Enterprise Server 15 SP3 x86_64</code></p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content &gt; SUSE Subscriptions</strong>.</p>
</li>
<li>
<p>Click <strong>Select products</strong> on your previously synchronized SCC account.</p>
</li>
<li>
<p>Select all SUSE products you want to synchronize to orcharhino.
This guide assumes you have access to and select the <code>SUSE Linux Enterprise Server 15 SP3 x86_64</code> product.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to create the selected SUSE products in orcharhino.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Continue with <a href="#Synchronizing_SUSE_Content_content-management">synchronizing SUSE products</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Synchronizing_SUSE_Content_content-management"><a class="anchor" href="#Synchronizing_SUSE_Content_content-management"></a>9.7. Synchronizing SUSE Content</h3>
<div class="paragraph">
<p>You can use orcharhino to synchronize SUSE content to deploy, attach, and serve content to managed hosts.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content &gt; Products</strong>.</p>
</li>
<li>
<p>Select the <code>SUSE Linux Enterprise Server 15 SP3 x86_64</code> product and click <strong>Sync Now</strong> to synchronize the SUSE repositories for SLES 15 SP3 to orcharhino.</p>
</li>
<li>
<p>In the orcharhino management UI, navigate to <strong>Content &gt; Content Views</strong>.</p>
</li>
<li>
<p>Create a Content View called <code>SLES 15 SP3</code> comprising the SLES repositories created in the <code>SLES 15 SP3</code> product and a Content View called <code>SLES 15 SP3 orcharhino client</code> comprising the orcharhino client repository created in the <code>SLES 15 SP3 orcharhino client</code> product.</p>
<div class="paragraph">
<p>For more information, see <a href="#Creating_a_Content_View_content-management">creating a Content View</a>.</p>
</div>
</li>
<li>
<p>Publish a new version of both Content Views.</p>
<div class="paragraph">
<p>For more information, see <a href="#Promoting_a_Content_View_content-management">promoting a Content View</a>.</p>
</div>
</li>
<li>
<p>In the orcharhino management UI, navigate to <strong>Content &gt; Content Views</strong>.</p>
</li>
<li>
<p>Click <strong>Create Content View</strong> to create a Composite Content View called <code>Composite SLES 15 SP3</code> comprising the previously published <code>SLES 15 SP3</code> Content View, the <code>SLES 15 SP3 orcharhino client</code> Content View, and optionally further Content Views of your choice, for example a Content View containing Puppet.
For more information, see the <a href="https://atixservice.zendesk.com/hc/de/articles/360013840079">ATIX Service Portal</a> for the necessary upstream URL.
For more information, see <a href="#Creating_a_Composite_Content_View_content-management">creating a Composite Content View</a>.</p>
</li>
<li>
<p>Publish a new version and promote this version to the Life Cycle Environment of your choice.</p>
</li>
<li>
<p>In the orcharhino management UI, navigate to <strong>Content &gt; Activation Keys</strong>.</p>
</li>
<li>
<p>Click <strong>Create Activation Key</strong> to create an Activation Key called <code>sles-15-sp3</code>.</p>
<div class="paragraph">
<p>For more information, see <a href="#Creating_an_Activation_Key_content-management">creating an Activation Key</a>.</p>
</div>
</li>
<li>
<p>On the <strong>Details</strong> tab, select a Life Cycle Environment and Composite Content View.</p>
</li>
<li>
<p>On the <strong>Subscriptions</strong> tab, select the necessary subscriptions, for example <code>SLES 15 SP3</code>, <code>SLES 15 SP3 orcharhino client</code>, and <code>Puppet</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can now <a href="https://docs.theforeman.org/3.4/Managing_Hosts/index-orcharhino.html#Creating_a_Host_Group_managing-hosts">create a Host Group</a> and assign the previously created Activation Key to it to deploy hosts running SLES 15 SP3 more comfortably.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Managing_Errata_content-management"><a class="anchor" href="#Managing_Errata_content-management"></a>10. Managing Errata</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Red&#160;Hat Enterprise Linux users receive errata for each release of official Red Hat RPMs.
SUSE Linux Enterprise Server users receive errata for each release of official SUSE RPMs.
Additionally, ATIX provides errata for managed hosts running Debian, CentOS 7, or Ubuntu.
There are three types of advisories (in order of importance):</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Security Advisory</dt>
<dd>
<p>Describes fixed security issues found in the package.
The security impact of the issue can be Low, Moderate, Important, or Critical.</p>
</dd>
<dt class="hdlist1">Bug Fix Advisory</dt>
<dd>
<p>Describes bug fixes for the package.</p>
</dd>
<dt class="hdlist1">Product Enhancement Advisory</dt>
<dd>
<p>Describes enhancements and new features added to the package.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For Red&#160;Hat Enterprise Linux, orcharhino imports errata information when synchronizing repositories with Red Hat&#8217;s Content Delivery Network (CDN).
For SUSE Linux Enterprise Server, orcharhino imports errata information when synchronizing repositories with SUSE Customer Center.
For Alma Linux and Rocky Linux, orcharhino imports errata information when synchronizing repositories with upstream repositories.
orcharhino also provides tools to inspect and filter errata, allowing for precise update management.
This way, you can select relevant updates and propagate them through Content Views to selected content hosts.</p>
</div>
<div class="paragraph">
<p>Errata are labeled according to the most important advisory type they contain.
Therefore, errata labeled as <strong>Product Enhancement Advisory</strong> can contain only enhancement updates, while <strong>Bug Fix Advisory</strong> errata can contain both bug fixes and enhancements, and <strong>Security Advisory</strong> can contain all three types.</p>
</div>
<div class="paragraph">
<p>In orcharhino, there are two keywords that describe an erratum&#8217;s relationship to the available content hosts:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Applicable</dt>
<dd>
<p>An erratum that applies to one or more content hosts, which means it updates packages present on the content host.
Although these errata apply to content hosts, until their state changes to <strong>Installable</strong>, the errata are not ready to be installed.
Installable errata are automatically applicable.</p>
</dd>
<dt class="hdlist1">Installable</dt>
<dd>
<p>An erratum that applies to one or more content hosts and is available to install on the content host.
Installable errata are available to a content host from life cycle environment and the associated Content View, but are not yet installed.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This chapter shows how to manage errata and apply them to either a single host or multiple hosts.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>The <em>ATIX AG Debian and Ubuntu Errata service</em> provides errata for Debian and Ubuntu.
When creating a repository of type <code>deb</code>, point the <strong>Errata URL</strong> to <em>ATIX AG Debian and Ubuntu Errata service</em>.
Use <code>https://dep.atix.de/dep/api/v1/debian</code> for Debian, <code>https://dep.atix.de/dep/api/v1/ubuntu</code> for Ubuntu, and <code>https://dep.atix.de/dep/api/v1/ubuntu-esm</code> for Ubuntu-ESM.</p>
</div>
<div class="paragraph">
<p>An erratum contains the information which packages have to be updated to fix a security issue.
Debian and Ubuntu errata are derived from the Debian security announcements (DSA) and the Ubuntu security notices (USN).</p>
</div>
<div class="paragraph">
<p>Ensure to only add Debian and Ubuntu errata to Debian and Ubuntu repositories that contain the packages needed to apply the errata.
For Debian, you need the <code><em>My_Debian_Release</em>/updates</code> repository, for example <code>bullseye/updates</code>.
For Ubuntu, you need the <code><em>My_Ubuntu_Release</em>-security</code> repository, for example <code>jammy-security</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Email notifications can help you keeping track of available errata for specific hosts.
You can enable email notifications on the <strong>Email Preferences</strong> tab when editing a user.
For more information, see <a href="https://docs.theforeman.org/3.4/Administering_Project/index-orcharhino.html#Managing_Users_admin">Managing Users</a> in <em>Administering orcharhino</em>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="Inspecting_Available_Errata_content-management"><a class="anchor" href="#Inspecting_Available_Errata_content-management"></a>10.1. Inspecting Available Errata</h3>
<div class="paragraph">
<p>The following procedure describes how to view and filter the available errata and how to display metadata of the selected advisory.
To use the CLI instead of the orcharhino management UI, see the <a href="#cli-inspecting-available-errata">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Errata</strong> to view the list of available errata.</p>
</li>
<li>
<p>Use the filtering tools at the top of the page to limit the number of displayed errata:</p>
<div class="ulist">
<ul>
<li>
<p>Select the repository to be inspected from the list.
<strong>All Repositories</strong> is selected by default.</p>
</li>
<li>
<p>The <strong>Applicable</strong> checkbox is selected by default to view only applicable errata in the selected repository.
Select the <strong>Installable</strong> checkbox to view only errata marked as installable.</p>
</li>
<li>
<p>To search the table of errata, type the query in the <strong>Search</strong> field in the form of:</p>
<div class="listingblock">
<div class="content">
<pre><em>parameter operator value</em></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="#Parameters_Available_for_Errata_Search_content-management">Parameters Available for Errata Search</a> for the list of parameters available for search.
Find the list of applicable operators in <a href="https://docs.theforeman.org/3.4/Administering_Project/index-orcharhino.html#Supported_Operators_for_Granular_Search_admin">Supported Operators for Granular Search</a> in <em>Administering orcharhino</em>.
Automatic suggestion works as you type.
You can also combine queries with the use of <strong>and</strong> and <strong>or</strong> operators.
For example, to display only security advisories related to the <strong>kernel</strong> package, type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>type = security and package_name = kernel</pre>
</div>
</div>
<div class="paragraph">
<p>Press <strong>Enter</strong> to start the search.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Click the <strong>Errata ID</strong> of the erratum you want to inspect:</p>
<div class="ulist">
<ul>
<li>
<p>The <strong>Details</strong> tab contains the description of the updated package as well as documentation of important fixes and enhancements provided by the update.</p>
</li>
<li>
<p>On the <strong>Content Hosts</strong> tab, you can apply the erratum to selected content hosts as described in <a href="#Applying_Errata_to_Multiple_Hosts_content-management">Applying Errata to Multiple Hosts</a>.</p>
</li>
<li>
<p>The <strong>Repositories</strong> tab lists repositories that already contain the erratum.
You can filter repositories by the environment and Content View, and search for them by the repository name.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can also use the new Host page to view to inspect available errata and select errata to install.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Hosts &gt; All Hosts</strong> and select the host you require.</p>
</li>
<li>
<p>If there are errata associated with the host, an Installable Errata card on the new Host page displays an interactive pie chart showing a breakdown of the security advisories, bugfixes, and enhancements.</p>
</li>
<li>
<p>On the new Host page, select the <strong>Content</strong> tab.</p>
</li>
<li>
<p>On the Content page select the <strong>Errata</strong> tab.</p>
</li>
<li>
<p>The page displays installable errata for the chosen host.</p>
</li>
<li>
<p>Click the checkbox for any errata you wish to install.</p>
</li>
<li>
<p>Using the vertical ellipsis icon next to the errata you want to add to the host, select <strong>Apply via Katello agent</strong> if you have no connectivity to the target host using SSH.</p>
</li>
<li>
<p>Select <strong>Apply via Remote Execution</strong> to use Remote Execution, or <strong>Apply via customized remote execution</strong> if you want to customize the remote execution.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
<div id="cli-inspecting-available-errata" class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>To view errata that are available for all organizations, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer erratum list</pre>
</div>
</div>
</li>
<li>
<p>To view details of a specific erratum, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer erratum info --id <em>erratum_ID</em></pre>
</div>
</div>
</li>
<li>
<p>You can search errata by entering the query with the <code>--search</code> option.
For example, to view applicable errata for the selected product that contains the specified bugs ordered so that the security errata are displayed on top, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer erratum list \
--product-id 7 \
--search "bug = 1213000 or bug = 1207972" \
--errata-restrict-applicable 1 \
--order "type desc"</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Parameters_Available_for_Errata_Search_content-management"><a class="anchor" href="#Parameters_Available_for_Errata_Search_content-management"></a>10.2. Parameters Available for Errata Search</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">bug</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search by the Bugzilla number.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>bug = 1172165</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cve</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search by the CVE number.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cve = CVE-2015-0235</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search by the errata ID.
The auto-suggest system displays a list of available IDs as you type.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>id = RHBA-2014:2004</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">issued</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search by the issue date.
You can specify the exact date, like "Feb16,2015", or use keywords, for example "Yesterday", or "1 hour ago".
The time range can be specified with the use of the "&lt;" and "&gt;" operators.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>issued &lt; "Jan 12,2015"</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">package</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search by the full package build name.
The auto-suggest system displays a list of available packages as you type.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>package = glib2-2.22.5-6.el6.i686</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">package_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search by the package name.
The auto-suggest system displays a list of available packages as you type.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>package_name = glib2</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">severity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search by the severity of the issue fixed by the security update.
Specify <em>Critical</em>, <em>Important</em>, or <em>Moderate</em>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>severity = Critical</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">title</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search by the advisory title.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>title ~ openssl</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search by the advisory type.
Specify <em>security</em>, <em>bugfix</em>, or <em>enhancement</em>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>type = bugfix</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">updated</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search by the date of the last update.
You can use the same formats as with the <code>issued</code> parameter.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>updated = "6 days ago"</em></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="Applying_installable_errata_content-management"><a class="anchor" href="#Applying_installable_errata_content-management"></a>10.3. Applying Installable Errata</h3>
<div class="paragraph">
<p>Use the following procedure to view a list of installable errata and select errata to install.
.Procedure</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Hosts &gt; All Hosts</strong> and select the host you require.</p>
</li>
<li>
<p>If there are errata associated with the host they are displayed in an Installable Errata card on the new Host page.</p>
</li>
<li>
<p>On the <strong>Content</strong> tab, <strong>Errata</strong> displays installable errata for the chosen host.</p>
</li>
<li>
<p>Click the checkbox for any errata you wish to install.</p>
</li>
<li>
<p>Using the vertical ellipsis icon next to the errata you want to add to the host, select <strong>Apply via Remote Execution</strong> to use Remote Execution.
Select <strong>Apply via customized remote execution</strong> if you want to customize the remote execution, or select <strong>Apply via Katello agent</strong> if you have no connectivity to the target host using SSH.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Subscribing_to_Errata_Notifications_content-management"><a class="anchor" href="#Subscribing_to_Errata_Notifications_content-management"></a>10.4. Subscribing to Errata Notifications</h3>
<div class="paragraph">
<p>You can configure email notifications for orcharhino users.
Users receive a summary of applicable and installable errata, notifications on Content View promotion or after synchronizing a repository.
For more information, see <a href="https://docs.theforeman.org/3.4/Administering_Project/index-orcharhino.html#Configuring_Email_Notification_Preferences_admin">Configuring Email Notification Preferences</a> in <em>Administering orcharhino</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Limitations_to_Repository_Dependency_Resolution_content-management"><a class="anchor" href="#Limitations_to_Repository_Dependency_Resolution_content-management"></a>10.5. Limitations to Repository Dependency Resolution</h3>
<div class="paragraph">
<p>With orcharhino, using incremental updates to your Content Views solves some repository dependency problems.
However, dependency resolution at a repository level still remains problematic on occasion.</p>
</div>
<div class="paragraph">
<p>When a repository update becomes available with a new dependency, orcharhino retrieves the newest version of the package to solve the dependency, even if there are older versions available in the existing repository package.
This can create further dependency resolution problems when installing packages.</p>
</div>
<div class="paragraph">
<div class="title">Example scenario</div>
<p>A repository on your client has the package <code>example_repository-1.0</code> with the dependency <code>example_repository-libs-1.0</code>.
The repository also has another package <code>example_tools-1.0</code>.</p>
</div>
<div class="paragraph">
<p>A security erratum becomes available with the package <code>example_tools-1.1</code>.
The <code>example_tools-1.1</code> package requires the <code>example_repository-libs-1.1</code> package as a dependency.</p>
</div>
<div class="paragraph">
<p>After an incremental Content View update, the <code>example_tools-1.1</code>, <code>example_tools-1.0</code>, and <code>example_repository-libs-1.1</code> are now in the repository.
The repository also has the packages <code>example_repository-1.0</code> and <code>example_repository-libs-1.0</code>.
Note that the incremental update to the Content View did not add the package <code>example_repository-1.1</code>.
Because you can install all these packages using yum, no potential problem is detected.
However, when the client installs the <code>example_tools-1.1</code> package, a dependency resolution problem occurs because both <code>example_repository-libs-1.0</code> and <code>example_repository-libs-1.1</code> cannot be installed.</p>
</div>
<div class="paragraph">
<p>There is currently no workaround for this problem.
The larger the time frame, and minor <em>Y</em> releases between the base set of RPMs and the errata being applied, the higher the chance of a problem with dependency resolution.</p>
</div>
</div>
<div class="sect2">
<h3 id="Creating_a_Content_View_Filter_for_Errata_content-management"><a class="anchor" href="#Creating_a_Content_View_Filter_for_Errata_content-management"></a>10.6. Creating a Content View Filter for Errata</h3>
<div class="paragraph">
<p>You can use content filters to limit errata.
Such filters include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>ID</strong> &#8211; Select specific erratum to allow into your resulting repositories.</p>
</li>
<li>
<p><strong>Date Range</strong> &#8211; Define a date range and include a set of errata released during that date range.</p>
</li>
<li>
<p><strong>Type</strong> &#8211; Select the type of errata to include such as bug fixes, enhancements, and security updates.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Create a content filter to exclude errata after a certain date.
This ensures your production systems in the application life cycle are kept up to date to a certain point.
Then you can modify the filter&#8217;s start date to introduce new errata into your testing environment to test the compatibility of new packages into your application life cycle.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the orcharhino management UI, see the <a href="#cli-creating-a-content-view-filter-for-errata">CLI procedure</a>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>A Content View with the repositories that contain required errata is created.
For more information, see <a href="#Creating_a_Content_View_content-management">Creating a Content View</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Content Views</strong> and select a Content View that you want to use for applying errata.</p>
</li>
<li>
<p>Select <strong>Yum Content</strong> &gt; <strong>Filters</strong> and click <strong>New Filter</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter <code>Errata Filter</code>.</p>
</li>
<li>
<p>From the <strong>Content Type</strong> list, select <strong>Erratum &#8211; Date and Type</strong>.</p>
</li>
<li>
<p>From the <strong>Inclusion Type</strong> list, select <strong>Exclude</strong>.</p>
</li>
<li>
<p>In the <strong>Description</strong> field, enter <code>Exclude errata items from YYYY-MM-DD</code>.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
<li>
<p>For <strong>Errata Type</strong>, select the checkboxes of errata types you want to exclude.
For example, select the <strong>Enhancement</strong> and <strong>Bugfix</strong> checkboxes and clear the <strong>Security</strong> checkbox to exclude enhancement and bugfix errata after certain date, but include all the security errata.</p>
</li>
<li>
<p>For <strong>Date Type</strong>, select one of two checkboxes:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Issued On</strong> for the issued date of the erratum.</p>
</li>
<li>
<p><strong>Updated On</strong> for the date of the erratums last update.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Select the <strong>Start Date</strong> to exclude all errata on or after the selected date.</p>
</li>
<li>
<p>Leave the <strong>End Date</strong> field blank.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
<li>
<p>Click <strong>Publish New Version</strong> to publish the resulting repository.</p>
</li>
<li>
<p>Enter <code>Adding errata filter</code> in the <strong>Description</strong> field.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
<div class="paragraph">
<p>When the Content View completes publication, notice the <strong>Content</strong> column reports a reduced number of packages and errata from the initial repository.
This means the filter successfully excluded the all non-security errata from the last year.</p>
</div>
</li>
<li>
<p>Click the <strong>Versions</strong> tab.</p>
</li>
<li>
<p>Click <strong>Promote</strong> to the right of the published version.</p>
</li>
<li>
<p>Select the environments you want to promote the Content View version to.</p>
</li>
<li>
<p>In the <strong>Description</strong> field, enter the description for promoting.</p>
</li>
<li>
<p>Click <strong>Promote Version</strong> to promote this Content View version across the required environments.</p>
</li>
</ol>
</div>
<div id="cli-creating-a-content-view-filter-for-errata" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Create a filter for the errata:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view filter create --name "<em>Filter Name</em>" \
--description "Exclude errata items from the <em>YYYY-MM-DD</em>" \
--content-view "<em>CV Name</em>" --organization "<em>Default Organization</em>" \
--type "erratum"</pre>
</div>
</div>
</li>
<li>
<p>Create a filter rule to exclude all errata on or after the <em>Start Date</em> that you want to set:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view filter rule create --start-date "<em>YYYY-MM-DD</em>" \
--content-view "<em>CV Name</em>" --content-view-filter="<em>Filter Name</em>" \
--organization "<em>Default Organization</em>" --types=security,enhancement,bugfix</pre>
</div>
</div>
</li>
<li>
<p>Publish the Content View:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view publish --name "<em>CV Name</em>" \
--organization "<em>Default Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Promote the Content View to the lifecycle environment so that the included errata are available to that lifecycle environment:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view version promote \
--content-view "<em>CV Name</em>" \
--organization "<em>Default Organization</em>" \
--to-lifecycle-environment "<em>Lifecycle Environment Name</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Adding_Errata_To_An_Incremental_Content_View_content-management"><a class="anchor" href="#Adding_Errata_To_An_Incremental_Content_View_content-management"></a>10.7. Adding Errata to an Incremental Content View</h3>
<div class="paragraph">
<p>If errata are available but not installable, you can create an incremental Content View version to add the errata to your content hosts.
For example, if the Content View is version 1.0, it becomes Content View version 1.1, and when you publish, it becomes Content View version 2.0.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the orcharhino management UI, see the <a href="#cli-adding-errata-to-an-incremental-content-view">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Errata</strong>.</p>
</li>
<li>
<p>From the <strong>Errata</strong> list, click the name of the errata that you want to apply.</p>
</li>
<li>
<p>Select the content hosts that you want to apply the errata to, and click <strong>Apply to Hosts</strong>.
This creates the incremental update to the Content View.</p>
</li>
<li>
<p>If you want to apply the errata to the content host, select the <strong>Apply Errata to Content Hosts immediately after publishing</strong> checkbox.</p>
</li>
<li>
<p>Click <strong>Confirm</strong> to apply the errata.</p>
</li>
</ol>
</div>
<div id="cli-adding-errata-to-an-incremental-content-view" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List the errata and its corresponding IDs:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer erratum list</pre>
</div>
</div>
</li>
<li>
<p>List the different content-view versions and the corresponding IDs:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view version list</pre>
</div>
</div>
</li>
<li>
<p>Apply a single erratum to content-view version.
You can add more IDs in a comma-separated list.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view version incremental-update \
--content-view-version-id 319 --errata-ids 34068b</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Applying_Errata_to_Hosts_content-management"><a class="anchor" href="#Applying_Errata_to_Hosts_content-management"></a>10.8. Applying Errata to Hosts</h3>
<div class="paragraph">
<p>Use these procedures to review and apply errata to hosts.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Register the host to an environment and Content View on orcharhino&#160;Server.
For more information, see <a href="https://docs.theforeman.org/3.4/Managing_Hosts/index-orcharhino.html#Registering_Hosts_managing-hosts">Registering Hosts</a> in <em>Managing Hosts</em>.</p>
</li>
<li>
<p>Configure the host for remote execution.
For more information about running remote execution jobs, see <a href="https://docs.theforeman.org/3.4/Managing_Hosts/index-orcharhino.html#Configuring_and_Setting_Up_Remote_Jobs_managing-hosts">Configuring and Setting Up Remote Jobs</a> in <em>Managing Hosts</em>.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If the host is already configured to receive content updates with the deprecated Katello Agent, migrate to remote execution instead.
For more information, see <a href="https://docs.theforeman.org/3.4/Managing_Hosts/index-orcharhino.html#Migrating_From_Katello_Agent_to_Remote_Execution_managing-hosts">Migrating From Katello Agent to Remote Execution</a> in <em>Managing Hosts</em>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The procedure to apply an erratum to a managed host depends on its operating system.</p>
</div>
<div class="sect3">
<h4 id="Applying_Errata_to_Hosts_Running_AlmaLinux_9_content-management"><a class="anchor" href="#Applying_Errata_to_Hosts_Running_AlmaLinux_9_content-management"></a>10.8.1. Applying Errata to Hosts Running AlmaLinux 9</h4>
<div class="paragraph">
<p>Use this procedure to review and apply errata to a host running AlmaLinux 9.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the orcharhino management UI, see the <a href="#cli-Applying_Errata_to_Hosts_Running_AlmaLinux_9_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong> and select the host you want to apply errata to.</p>
</li>
<li>
<p>Navigate to the <strong>Errata</strong> tab to see the list of errata.</p>
</li>
<li>
<p>Select the errata to apply and click <strong>Apply Selected</strong>.
In the confirmation window, click <strong>Apply</strong>.</p>
</li>
<li>
<p>After the task to update all packages associated with the selected errata completes, click the <strong>Details</strong> tab to view the updated packages.</p>
</li>
</ol>
</div>
<div id="cli-Applying_Errata_to_Hosts_Running_AlmaLinux_9_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all errata for the host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host errata list \
--host <em>client.example.com</em></pre>
</div>
</div>
</li>
<li>
<p>Find the module stream an erratum belongs to:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer erratum info --id <em>ERRATUM_ID</em></pre>
</div>
</div>
</li>
<li>
<p>On the host, update the module stream:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf update <em>Module_Stream_Name</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Applying_Errata_to_Hosts_Running_AlmaLinux_8_content-management"><a class="anchor" href="#Applying_Errata_to_Hosts_Running_AlmaLinux_8_content-management"></a>10.8.2. Applying Errata to Hosts Running AlmaLinux 8</h4>
<div class="paragraph">
<p>Use this procedure to review and apply errata to a host running AlmaLinux 8.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the orcharhino management UI, see the <a href="#cli-Applying_Errata_to_Hosts_Running_AlmaLinux_8_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong> and select the host you want to apply errata to.</p>
</li>
<li>
<p>Navigate to the <strong>Errata</strong> tab to see the list of errata.</p>
</li>
<li>
<p>Select the errata to apply and click <strong>Apply Selected</strong>.
In the confirmation window, click <strong>Apply</strong>.</p>
</li>
<li>
<p>After the task to update all packages associated with the selected errata completes, click the <strong>Details</strong> tab to view the updated packages.</p>
</li>
</ol>
</div>
<div id="cli-Applying_Errata_to_Hosts_Running_AlmaLinux_8_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all errata for the host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host errata list \
--host <em>client.example.com</em></pre>
</div>
</div>
</li>
<li>
<p>Find the module stream an erratum belongs to:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer erratum info --id <em>ERRATUM_ID</em></pre>
</div>
</div>
</li>
<li>
<p>On the host, update the module stream:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf update <em>Module_Stream_Name</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Applying_Errata_to_Hosts_Running_CentOS_7_content-management"><a class="anchor" href="#Applying_Errata_to_Hosts_Running_CentOS_7_content-management"></a>10.8.3. Applying Errata to Hosts Running CentOS 7</h4>
<div class="paragraph">
<p>Use this procedure to review and apply errata to a host running CentOS 7.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the orcharhino management UI, see the <a href="#cli-Applying_Errata_to_Hosts_Running_CentOS_7_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong> and select the host you want to apply errata to.</p>
</li>
<li>
<p>Navigate to the <strong>Errata</strong> tab to see the list of errata.</p>
</li>
<li>
<p>Select the errata to apply and click <strong>Apply Selected</strong>.
In the confirmation window, click <strong>Apply</strong>.</p>
</li>
<li>
<p>After the task to update all packages associated with the selected errata completes, click the <strong>Details</strong> tab to view the updated packages.</p>
</li>
</ol>
</div>
<div id="cli-Applying_Errata_to_Hosts_Running_CentOS_7_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all errata for the host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host errata list \
--host <em>client.example.com</em></pre>
</div>
</div>
</li>
<li>
<p>Apply the most recent erratum to the host.
Identify the erratum to apply using the erratum ID:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer job-invocation create \
--feature katello_errata_install \
--inputs errata=<em>ERRATUM_ID1</em>,<em>ERRATUM_ID2</em> \
--search-query "name = client.example.com"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Applying_Errata_to_Hosts_Running_Debian_11_content-management"><a class="anchor" href="#Applying_Errata_to_Hosts_Running_Debian_11_content-management"></a>10.8.4. Applying Errata to Hosts Running Debian 11</h4>
<div class="paragraph">
<p>Use this procedure to review and apply errata to a host running Debian 11.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the orcharhino management UI, see the <a href="#cli-Applying_Errata_to_Hosts_Running_Debian_11_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong> and select the host you want to apply errata to.</p>
</li>
<li>
<p>Navigate to the <strong>Errata</strong> tab to see the list of errata.</p>
</li>
<li>
<p>Select the errata to apply and click <strong>Apply Selected</strong>.
In the confirmation window, click <strong>Apply</strong>.</p>
</li>
<li>
<p>After the task to update all packages associated with the selected errata completes, click the <strong>Details</strong> tab to view the updated packages.</p>
</li>
</ol>
</div>
<div id="cli-Applying_Errata_to_Hosts_Running_Debian_11_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all errata for the host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host errata list \
--host <em>client.example.com</em></pre>
</div>
</div>
</li>
<li>
<p>Apply the most recent erratum to the host.
Identify the erratum to apply using the erratum ID:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer job-invocation create \
--feature katello_errata_install \
--inputs errata=<em>ERRATUM_ID1</em>,<em>ERRATUM_ID2</em> \
--search-query "name = client.example.com"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Applying_Errata_to_Hosts_Running_Debian_10_content-management"><a class="anchor" href="#Applying_Errata_to_Hosts_Running_Debian_10_content-management"></a>10.8.5. Applying Errata to Hosts Running Debian 10</h4>
<div class="paragraph">
<p>Use this procedure to review and apply errata to a host running Debian 10.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the orcharhino management UI, see the <a href="#cli-Applying_Errata_to_Hosts_Running_Debian_10_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong> and select the host you want to apply errata to.</p>
</li>
<li>
<p>Navigate to the <strong>Errata</strong> tab to see the list of errata.</p>
</li>
<li>
<p>Select the errata to apply and click <strong>Apply Selected</strong>.
In the confirmation window, click <strong>Apply</strong>.</p>
</li>
<li>
<p>After the task to update all packages associated with the selected errata completes, click the <strong>Details</strong> tab to view the updated packages.</p>
</li>
</ol>
</div>
<div id="cli-Applying_Errata_to_Hosts_Running_Debian_10_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all errata for the host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host errata list \
--host <em>client.example.com</em></pre>
</div>
</div>
</li>
<li>
<p>Apply the most recent erratum to the host.
Identify the erratum to apply using the erratum ID:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer job-invocation create \
--feature katello_errata_install \
--inputs errata=<em>ERRATUM_ID1</em>,<em>ERRATUM_ID2</em> \
--search-query "name = client.example.com"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Applying_Errata_to_Hosts_Running_Oracle_Linux_9_content-management"><a class="anchor" href="#Applying_Errata_to_Hosts_Running_Oracle_Linux_9_content-management"></a>10.8.6. Applying Errata to Hosts Running Oracle Linux 9</h4>
<div class="paragraph">
<p>Use this procedure to review and apply errata to a host running Oracle Linux 9.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the orcharhino management UI, see the <a href="#cli-Applying_Errata_to_Hosts_Running_Oracle_Linux_9_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong> and select the host you want to apply errata to.</p>
</li>
<li>
<p>Navigate to the <strong>Errata</strong> tab to see the list of errata.</p>
</li>
<li>
<p>Select the errata to apply and click <strong>Apply Selected</strong>.
In the confirmation window, click <strong>Apply</strong>.</p>
</li>
<li>
<p>After the task to update all packages associated with the selected errata completes, click the <strong>Details</strong> tab to view the updated packages.</p>
</li>
</ol>
</div>
<div id="cli-Applying_Errata_to_Hosts_Running_Oracle_Linux_9_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all errata for the host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host errata list \
--host <em>client.example.com</em></pre>
</div>
</div>
</li>
<li>
<p>Find the module stream an erratum belongs to:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer erratum info --id <em>ERRATUM_ID</em></pre>
</div>
</div>
</li>
<li>
<p>On the host, update the module stream:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf update <em>Module_Stream_Name</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Applying_Errata_to_Hosts_Running_Oracle_Linux_8_content-management"><a class="anchor" href="#Applying_Errata_to_Hosts_Running_Oracle_Linux_8_content-management"></a>10.8.7. Applying Errata to Hosts Running Oracle Linux 8</h4>
<div class="paragraph">
<p>Use this procedure to review and apply errata to a host running Oracle Linux 8.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the orcharhino management UI, see the <a href="#cli-Applying_Errata_to_Hosts_Running_Oracle_Linux_8_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong> and select the host you want to apply errata to.</p>
</li>
<li>
<p>Navigate to the <strong>Errata</strong> tab to see the list of errata.</p>
</li>
<li>
<p>Select the errata to apply and click <strong>Apply Selected</strong>.
In the confirmation window, click <strong>Apply</strong>.</p>
</li>
<li>
<p>After the task to update all packages associated with the selected errata completes, click the <strong>Details</strong> tab to view the updated packages.</p>
</li>
</ol>
</div>
<div id="cli-Applying_Errata_to_Hosts_Running_Oracle_Linux_8_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all errata for the host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host errata list \
--host <em>client.example.com</em></pre>
</div>
</div>
</li>
<li>
<p>Find the module stream an erratum belongs to:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer erratum info --id <em>ERRATUM_ID</em></pre>
</div>
</div>
</li>
<li>
<p>On the host, update the module stream:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf update <em>Module_Stream_Name</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Applying_Errata_to_Hosts_Running_Red_Hat_Enterprise_Linux_9_content-management"><a class="anchor" href="#Applying_Errata_to_Hosts_Running_Red_Hat_Enterprise_Linux_9_content-management"></a>10.8.8. Applying Errata to Hosts Running Red&#160;Hat Enterprise Linux 9</h4>
<div class="paragraph">
<p>Use this procedure to review and apply errata to a host running Red&#160;Hat Enterprise Linux 9.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the orcharhino management UI, see the <a href="#cli-Applying_Errata_to_Hosts_Running_Red_Hat_Enterprise_Linux_9_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong> and select the host you want to apply errata to.</p>
</li>
<li>
<p>Navigate to the <strong>Errata</strong> tab to see the list of errata.</p>
</li>
<li>
<p>Select the errata to apply and click <strong>Apply Selected</strong>.
In the confirmation window, click <strong>Apply</strong>.</p>
</li>
<li>
<p>After the task to update all packages associated with the selected errata completes, click the <strong>Details</strong> tab to view the updated packages.</p>
</li>
</ol>
</div>
<div id="cli-Applying_Errata_to_Hosts_Running_Red_Hat_Enterprise_Linux_9_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all errata for the host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host errata list \
--host <em>client.example.com</em></pre>
</div>
</div>
</li>
<li>
<p>Find the module stream an erratum belongs to:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer erratum info --id <em>ERRATUM_ID</em></pre>
</div>
</div>
</li>
<li>
<p>On the host, update the module stream:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf update <em>Module_Stream_Name</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Applying_Errata_to_Hosts_Running_Red_Hat_Enterprise_Linux_8_content-management"><a class="anchor" href="#Applying_Errata_to_Hosts_Running_Red_Hat_Enterprise_Linux_8_content-management"></a>10.8.9. Applying Errata to Hosts Running Red&#160;Hat Enterprise Linux 8</h4>
<div class="paragraph">
<p>Use this procedure to review and apply errata to a host running Red&#160;Hat Enterprise Linux 8.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the orcharhino management UI, see the <a href="#cli-Applying_Errata_to_Hosts_Running_Red_Hat_Enterprise_Linux_8_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong> and select the host you want to apply errata to.</p>
</li>
<li>
<p>Navigate to the <strong>Errata</strong> tab to see the list of errata.</p>
</li>
<li>
<p>Select the errata to apply and click <strong>Apply Selected</strong>.
In the confirmation window, click <strong>Apply</strong>.</p>
</li>
<li>
<p>After the task to update all packages associated with the selected errata completes, click the <strong>Details</strong> tab to view the updated packages.</p>
</li>
</ol>
</div>
<div id="cli-Applying_Errata_to_Hosts_Running_Red_Hat_Enterprise_Linux_8_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all errata for the host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host errata list \
--host <em>client.example.com</em></pre>
</div>
</div>
</li>
<li>
<p>Find the module stream an erratum belongs to:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer erratum info --id <em>ERRATUM_ID</em></pre>
</div>
</div>
</li>
<li>
<p>On the host, update the module stream:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf update <em>Module_Stream_Name</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Applying_Errata_to_Hosts_Running_Red_Hat_Enterprise_Linux_7_content-management"><a class="anchor" href="#Applying_Errata_to_Hosts_Running_Red_Hat_Enterprise_Linux_7_content-management"></a>10.8.10. Applying Errata to Hosts Running Red&#160;Hat Enterprise Linux 7</h4>
<div class="paragraph">
<p>Use this procedure to review and apply errata to a host running Red&#160;Hat Enterprise Linux 7.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the orcharhino management UI, see the <a href="#cli-Applying_Errata_to_Hosts_Running_Red_Hat_Enterprise_Linux_7_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong> and select the host you want to apply errata to.</p>
</li>
<li>
<p>Navigate to the <strong>Errata</strong> tab to see the list of errata.</p>
</li>
<li>
<p>Select the errata to apply and click <strong>Apply Selected</strong>.
In the confirmation window, click <strong>Apply</strong>.</p>
</li>
<li>
<p>After the task to update all packages associated with the selected errata completes, click the <strong>Details</strong> tab to view the updated packages.</p>
</li>
</ol>
</div>
<div id="cli-Applying_Errata_to_Hosts_Running_Red_Hat_Enterprise_Linux_7_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all errata for the host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host errata list \
--host <em>client.example.com</em></pre>
</div>
</div>
</li>
<li>
<p>Apply the most recent erratum to the host.
Identify the erratum to apply using the erratum ID.</p>
<div class="paragraph">
<p>Using <code>Remote Execution</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer job-invocation create \
--feature katello_errata_install \
--inputs errata=<em>ERRATUM_ID1</em>,<em>ERRATUM_ID2</em> \
--search-query "name = client.example.com"</pre>
</div>
</div>
<div class="paragraph">
<p>Using <code>Katello Agent</code> (deprecated)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host errata apply \
--errata-ids <em>ERRATUM_ID1</em>,<em>ERRATUM_ID2</em>... \
--host "client.example.com"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Applying_Errata_to_Hosts_Running_Rocky_Linux_9_content-management"><a class="anchor" href="#Applying_Errata_to_Hosts_Running_Rocky_Linux_9_content-management"></a>10.8.11. Applying Errata to Hosts Running Rocky Linux 9</h4>
<div class="paragraph">
<p>Use this procedure to review and apply errata to a host running Rocky Linux 9.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the orcharhino management UI, see the <a href="#cli-Applying_Errata_to_Hosts_Running_Rocky_Linux_9_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong> and select the host you want to apply errata to.</p>
</li>
<li>
<p>Navigate to the <strong>Errata</strong> tab to see the list of errata.</p>
</li>
<li>
<p>Select the errata to apply and click <strong>Apply Selected</strong>.
In the confirmation window, click <strong>Apply</strong>.</p>
</li>
<li>
<p>After the task to update all packages associated with the selected errata completes, click the <strong>Details</strong> tab to view the updated packages.</p>
</li>
</ol>
</div>
<div id="cli-Applying_Errata_to_Hosts_Running_Rocky_Linux_9_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all errata for the host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host errata list \
--host <em>client.example.com</em></pre>
</div>
</div>
</li>
<li>
<p>Find the module stream an erratum belongs to:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer erratum info --id <em>ERRATUM_ID</em></pre>
</div>
</div>
</li>
<li>
<p>On the host, update the module stream:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf update <em>Module_Stream_Name</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Applying_Errata_to_Hosts_Running_Rocky_Linux_8_content-management"><a class="anchor" href="#Applying_Errata_to_Hosts_Running_Rocky_Linux_8_content-management"></a>10.8.12. Applying Errata to Hosts Running Rocky Linux 8</h4>
<div class="paragraph">
<p>Use this procedure to review and apply errata to a host running Rocky Linux 8.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the orcharhino management UI, see the <a href="#cli-Applying_Errata_to_Hosts_Running_Rocky_Linux_8_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong> and select the host you want to apply errata to.</p>
</li>
<li>
<p>Navigate to the <strong>Errata</strong> tab to see the list of errata.</p>
</li>
<li>
<p>Select the errata to apply and click <strong>Apply Selected</strong>.
In the confirmation window, click <strong>Apply</strong>.</p>
</li>
<li>
<p>After the task to update all packages associated with the selected errata completes, click the <strong>Details</strong> tab to view the updated packages.</p>
</li>
</ol>
</div>
<div id="cli-Applying_Errata_to_Hosts_Running_Rocky_Linux_8_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all errata for the host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host errata list \
--host <em>client.example.com</em></pre>
</div>
</div>
</li>
<li>
<p>Find the module stream an erratum belongs to:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer erratum info --id <em>ERRATUM_ID</em></pre>
</div>
</div>
</li>
<li>
<p>On the host, update the module stream:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf update <em>Module_Stream_Name</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Applying_Errata_to_Hosts_Running_SUSE_Linux_Enterprise_Server_15_content-management"><a class="anchor" href="#Applying_Errata_to_Hosts_Running_SUSE_Linux_Enterprise_Server_15_content-management"></a>10.8.13. Applying Errata to Hosts Running SUSE Linux Enterprise Server 15</h4>
<div class="paragraph">
<p>Use this procedure to review and apply errata to a host running SUSE Linux Enterprise Server 15.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the orcharhino management UI, see the <a href="#cli-Applying_Errata_to_Hosts_Running_SUSE_Linux_Enterprise_Server_15_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong> and select the host you want to apply errata to.</p>
</li>
<li>
<p>Navigate to the <strong>Errata</strong> tab to see the list of errata.</p>
</li>
<li>
<p>Select the errata to apply and click <strong>Apply Selected</strong>.
In the confirmation window, click <strong>Apply</strong>.</p>
</li>
<li>
<p>After the task to update all packages associated with the selected errata completes, click the <strong>Details</strong> tab to view the updated packages.</p>
</li>
</ol>
</div>
<div id="cli-Applying_Errata_to_Hosts_Running_SUSE_Linux_Enterprise_Server_15_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all errata for the host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host errata list \
--host <em>client.example.com</em></pre>
</div>
</div>
</li>
<li>
<p>Apply the most recent erratum to the host.
Identify the erratum to apply using the erratum ID:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer job-invocation create \
--feature katello_errata_install \
--inputs errata=<em>ERRATUM_ID1</em>,<em>ERRATUM_ID2</em> \
--search-query "name = client.example.com"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Applying_Errata_to_Hosts_Running_Ubuntu_22_04_content-management"><a class="anchor" href="#Applying_Errata_to_Hosts_Running_Ubuntu_22_04_content-management"></a>10.8.14. Applying Errata to Hosts Running Ubuntu 22.04</h4>
<div class="paragraph">
<p>Use this procedure to review and apply errata to a host running Ubuntu 22.04.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the orcharhino management UI, see the <a href="#cli-Applying_Errata_to_Hosts_Running_Ubuntu_22_04_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong> and select the host you want to apply errata to.</p>
</li>
<li>
<p>Navigate to the <strong>Errata</strong> tab to see the list of errata.</p>
</li>
<li>
<p>Select the errata to apply and click <strong>Apply Selected</strong>.
In the confirmation window, click <strong>Apply</strong>.</p>
</li>
<li>
<p>After the task to update all packages associated with the selected errata completes, click the <strong>Details</strong> tab to view the updated packages.</p>
</li>
</ol>
</div>
<div id="cli-Applying_Errata_to_Hosts_Running_Ubuntu_22_04_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all errata for the host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host errata list \
--host <em>client.example.com</em></pre>
</div>
</div>
</li>
<li>
<p>Apply the most recent erratum to the host.
Identify the erratum to apply using the erratum ID:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer job-invocation create \
--feature katello_errata_install \
--inputs errata=<em>ERRATUM_ID1</em>,<em>ERRATUM_ID2</em> \
--search-query "name = client.example.com"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Applying_Errata_to_Hosts_Running_Ubuntu_20_04_content-management"><a class="anchor" href="#Applying_Errata_to_Hosts_Running_Ubuntu_20_04_content-management"></a>10.8.15. Applying Errata to Hosts Running Ubuntu 20.04</h4>
<div class="paragraph">
<p>Use this procedure to review and apply errata to a host running Ubuntu 20.04.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the orcharhino management UI, see the <a href="#cli-Applying_Errata_to_Hosts_Running_Ubuntu_20_04_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong> and select the host you want to apply errata to.</p>
</li>
<li>
<p>Navigate to the <strong>Errata</strong> tab to see the list of errata.</p>
</li>
<li>
<p>Select the errata to apply and click <strong>Apply Selected</strong>.
In the confirmation window, click <strong>Apply</strong>.</p>
</li>
<li>
<p>After the task to update all packages associated with the selected errata completes, click the <strong>Details</strong> tab to view the updated packages.</p>
</li>
</ol>
</div>
<div id="cli-Applying_Errata_to_Hosts_Running_Ubuntu_20_04_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all errata for the host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host errata list \
--host <em>client.example.com</em></pre>
</div>
</div>
</li>
<li>
<p>Apply the most recent erratum to the host.
Identify the erratum to apply using the erratum ID:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer job-invocation create \
--feature katello_errata_install \
--inputs errata=<em>ERRATUM_ID1</em>,<em>ERRATUM_ID2</em> \
--search-query "name = client.example.com"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Applying_Errata_to_Multiple_Hosts_content-management"><a class="anchor" href="#Applying_Errata_to_Multiple_Hosts_content-management"></a>10.9. Applying Errata to Multiple Hosts</h3>
<div class="paragraph">
<p>Use these procedures to review and apply errata to multiple RHEL hosts.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Synchronize orcharhino repositories with the latest errata available from Red&#160;Hat.
For more information, see <a href="#Synchronizing_Repositories_content-management">Synchronizing Repositories</a>.</p>
</li>
<li>
<p>Register the hosts to an environment and Content View on orcharhino&#160;Server.
For more information, see <a href="https://docs.theforeman.org/3.4/Managing_Hosts/index-orcharhino.html#Registering_Hosts_managing-hosts">Registering Hosts</a> in <em>Managing Hosts</em>.</p>
</li>
<li>
<p>Configure the host for remote execution.
For more information about running remote execution jobs, see <a href="https://docs.theforeman.org/3.4/Managing_Hosts/index-orcharhino.html#Configuring_and_Setting_Up_Remote_Jobs_managing-hosts">Configuring and Setting Up Remote Jobs</a> in <em>Managing Hosts</em>.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If the host is already configured to receive content updates with the deprecated Katello Agent, migrate to remote execution instead.
For more information, see <a href="https://docs.theforeman.org/3.4/Managing_Hosts/index-orcharhino.html#Migrating_From_Katello_Agent_to_Remote_Execution_managing-hosts">Migrating From Katello Agent to Remote Execution</a> in <em>Managing Hosts</em>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Errata</strong>.</p>
</li>
<li>
<p>Click the name of an erratum you want to apply.</p>
</li>
<li>
<p>Click to <strong>Content Hosts</strong> tab.</p>
</li>
<li>
<p>Select the hosts you want to apply errata to and click <strong>Apply to Hosts</strong>.</p>
</li>
<li>
<p>Click <strong>Confirm</strong>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all installable errata:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer erratum list \
--errata-restrict-installable true \
--organization "<em>Default Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Apply one of the errata to multiple hosts:</p>
<div class="paragraph">
<p>Using <code>Remote Execution</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer job-invocation create \
--feature katello_errata_install \
--inputs errata=<em>ERRATUM_ID</em> \
--search-query "applicable_errata = <em>ERRATUM_ID</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>Using <code>Katello Agent</code> (deprecated)</p>
</div>
<div class="paragraph">
<p>Identify the erratum you want to use and list the hosts that this erratum is applicable to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host list \
--search "applicable_errata = <em>ERRATUM_ID</em>" \
--organization "<em>Default Organization</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>The following Bash script applies an erratum to each host for which this erratum is available:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-Bash" data-lang="Bash">for HOST in <code>hammer --csv --csv-separator "|" host list --search "applicable_errata = ERRATUM_ID" --organization "Default Organization" | tail -n+2 | awk -F "|" '{ print $2 }'</code> ;
do
  echo "== Applying to $HOST ==" ; hammer host errata apply --host $HOST --errata-ids ERRATUM_ID1,ERRATUM_ID2 ;
done</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command identifies all hosts with <em>erratum_IDs</em> as an applicable erratum and then applies the erratum to each host.</p>
</div>
</li>
<li>
<p>To see if an erratum is applied successfully, find the corresponding task in the output of the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer task list</pre>
</div>
</div>
</li>
<li>
<p>View the state of a selected task:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer task progress --id <em>task_ID</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Applying_Errata_to_a_Host_Collection_content-management"><a class="anchor" href="#Applying_Errata_to_a_Host_Collection_content-management"></a>10.10. Applying Errata to a Host Collection</h3>
<div class="listingblock">
<div class="title">Using <code>Remote Execution</code></div>
<div class="content">
<pre class="nowrap"># hammer job-invocation create \
--feature katello_errata_install \
--inputs errata=<em>ERRATUM_ID1</em>,<em>ERRATUM_ID2</em>,... \
--search-query "host_collection = <em>HOST_COLLECTION_NAME</em>"</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Using <code>Katello Agent</code> (deprecated)</div>
<div class="content">
<pre class="nowrap"># hammer host-collection erratum install \
--errata "<em>erratum_ID1</em>,<em>erratum_ID2</em>,..." \
--name "<em>host_collection_name</em>"\
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="con_managing-ostree-content_content-management"><a class="anchor" href="#con_managing-ostree-content_content-management"></a>11. Managing OSTree Content</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use OSTree to manage bootable, immutable, versioned file system trees.</p>
</div>
<div class="paragraph">
<p>OSTree makes it easy to install and update Linux-based operating systems on hosts and to switch between versions of operating systems on hosts.
If a host update fails, you can easily revert the operating system on the host to the previous working version.</p>
</div>
<div class="paragraph">
<p>You can create an OSTree image using an image builder and expose it in an OSTree repository on an HTTP server.
Then you can use your orcharhino to synchronize and manage OSTree branches from the exposed OSTree repository.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>OSTree content is supported only when running orcharhino on Enterprise Linux 8.</p>
</li>
<li>
<p>In orcharhino&#160;Server, OSTree management tools are not enabled by default.
To enable OSTree, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --foreman-proxy-content-enable-ostree=true</pre>
</div>
</div>
</li>
<li>
<p>If you want to use Hammer CLI, you must enable the <code>hammer-cli-katello</code> plugin on orcharhino&#160;Server.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="importing-ostree-content_content-management"><a class="anchor" href="#importing-ostree-content_content-management"></a>11.1. Importing OSTree Content</h3>
<div class="paragraph">
<p>You can import and synchronize OSTree content from custom online sources over HTTPS.</p>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>A published HTTP location, known as an <em>upstream URL</em>, for the OSTree to import.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong> and click <strong>Create Product</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for your OSTree content.
This automatically populates the <strong>Label</strong> field.</p>
</li>
<li>
<p>Optional: From the <strong>GPG Key</strong> list, select the GPG key for the product.</p>
</li>
<li>
<p>Optional: From the <strong>SSL CA Cert</strong> list, select the SSL CA certificate for the product.</p>
</li>
<li>
<p>Optional: From the <strong>SSL Client Cert</strong> list, select the SSL client certificate for the product.</p>
</li>
<li>
<p>Optional: From the <strong>SSL Client Key</strong> list, select the SSL client key for the product.</p>
</li>
<li>
<p>Optional: From the <strong>Sync Plan</strong> list, select an existing sync plan or click <strong>Create Sync Plan</strong> and create a sync plan for your product requirements.</p>
</li>
<li>
<p>Optional: In the <strong>Description</strong> field, enter a description of the product.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
<li>
<p>When the product creation completes, click <strong>New Repository</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for the repository.
This automatically populates the <strong>Label</strong> field.</p>
</li>
<li>
<p>From the <strong>Type</strong> list, select <code>ostree</code>.</p>
</li>
<li>
<p>In the <strong>Upstream URL</strong> field, enter the URL of the external repository to use as a source.
For example <code>http://www.example.com/rpm-ostree/</code>.</p>
</li>
<li>
<p>Optional: Select the <strong>Verify SSL</strong> checkbox if you want to verify that the upstream repository&#8217;s SSL certificates are signed by a trusted CA.</p>
</li>
<li>
<p>In the <strong>Upstream Username</strong> field, enter the user name for the upstream repository if required for authentication.
Clear this field if the repository does not require authentication.</p>
</li>
<li>
<p>In the <strong>Upstream Password</strong> field, enter the corresponding password for the upstream repository.</p>
</li>
<li>
<p>In the <strong>Upstream Authentication Token</strong> field, enter the corresponding token for the upstream repository.</p>
</li>
<li>
<p>From the <strong>Mirroring Policy</strong> menu, select one of the following policies to mirror OSTree content for this repository:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Additive</strong> &#8211; new content available during sync will be added to the repository, and no content will be removed.</p>
</li>
<li>
<p><strong>Mirror Content Only</strong> &#8211; any new content available during sync will be added to the repository and any content removed from the upstream repository will be removed from the local repository.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Optional: In the <strong>HTTP Proxy Policy</strong> field, select an HTTP proxy.</p>
</li>
<li>
<p>Optional: Disable the <strong>Unprotected</strong> checkbox to require a subscription entitlement certificate for accessing the published repository.</p>
</li>
<li>
<p>Optional: In the <strong>SSL CA Cert</strong> field, select the SSL CA Certificate for the repository.</p>
</li>
<li>
<p>Optional: In the <strong>SSL Client cert</strong> field, select the SSL Client Certificate for the repository.</p>
</li>
<li>
<p>Optional: In the <strong>SSL Client Key</strong> field, select the SSL Client Key for the repository.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
<li>
<p>When the repository creation completes, select the new repository and click <strong>Sync Now</strong> to start the synchronization process.</p>
</li>
<li>
<p>To view the synchronization status, navigate to <strong>Content</strong> &gt; <strong>Sync Status</strong> and expand the entry that you want to view.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI Procedure</div>
<ol class="arabic">
<li>
<p>Create a product for your OSTree content:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer product create \
--name "<em>OSTree</em>" \
--sync-plan "<em>Example_Plan</em>" \
--description "OSTree Content" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Create the repository for the OSTree:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository create \
--name "<em>OSTree</em>" \
--content-type "ostree" \
--url "<em>http://www.example.com/rpm-ostree/</em>" \
--product "<em>OSTree Content</em>" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Synchronize the repository:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository synchronize \
--name "<em>OSTree</em>" \
--product "OSTree Content" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="uploading-ostree-content-with-hammer-cli_content-management"><a class="anchor" href="#uploading-ostree-content-with-hammer-cli_content-management"></a>11.2. Uploading OSTree Content with Hammer CLI</h3>
<div class="paragraph">
<p>In deployments in which the orcharhino&#160;Server does not have internet access, you can upload OSTree image archives using Hammer CLI.</p>
</div>
<div class="paragraph">
<p>You can create images using the Image Builder or OSBuild tool.</p>
</div>
<div class="paragraph">
<p>You can also create an OSTree image archive by downloading a repository from an upstream URL, such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># wget --no-parent -r <em>https://repos.example.com/ostree/repo_name/</em>
# tar --exclude="index.html" -cvf "<em>example_archive_repo</em>.tar" -C <em>repos.example.com/ostree</em> "<em>repo_name</em>"</pre>
</div>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>You have an OSTree image archive ready and present on your file system.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Connect to your orcharhino&#160;Server using SSH.</p>
</li>
<li>
<p>Upload your OSTree archive with the <code>hammer</code> command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository upload-content --id <em>repository_id</em> \
--content-type ostree_ref \
--path <em>/path/to/image/file.tar</em> \
--ostree-repository-name <em>example_repo_name</em></pre>
</div>
</div>
<div class="paragraph">
<p>The value of <code>--ostree-repository-name</code> must match the name of the OSTree repository in the archive.</p>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://www.osbuild.org/guides/user-guide/building-ostree-images.html">Building OSTree images using the OSBuild tool</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="managing-ostree-content-with-content-views_content-management"><a class="anchor" href="#managing-ostree-content-with-content-views_content-management"></a>11.3. Managing OSTree Content with Content Views</h3>
<div class="paragraph">
<p>Use Content Views to manage OSTree branches across the application life cycle.
This process uses the same publication and promotion method as RPMs or Puppet modules.</p>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>You have created a Product and added an OSTree repository to it.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Content Views</strong> and click <strong>Create content view</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a plain text name for the view.
This automatically populates the <strong>Label</strong> field.</p>
</li>
<li>
<p>In the <strong>Description</strong> field, enter a description of the OSTree Content View.</p>
</li>
<li>
<p>If you want to use a Composite Content View, select the <strong>Composite View</strong> checkbox.</p>
</li>
<li>
<p>Optional: If you want to solve dependencies automatically every time you publish this Content View, select the <strong>Solve Dependencies</strong> checkbox. Dependency solving slows the publishing time and might ignore any Content View filters you use.</p>
</li>
<li>
<p>Optional: If this Content View is for importing from an upstream server only, select the <strong>Import only</strong> checkbox.
You cannot publish import-only Content Views directly.</p>
</li>
<li>
<p>Click <strong>Save</strong> to complete.</p>
</li>
<li>
<p>Navigate to the <strong>Repositories</strong> tab.</p>
</li>
<li>
<p>Select the OSTree repository that you want to use.
Click <strong>Add Repository</strong> to add the OSTree content from this repository to the Content View.</p>
</li>
<li>
<p>Click <strong>Publish new version</strong>.</p>
</li>
<li>
<p>Optional: In the <strong>Description</strong> field, enter a description for the version.</p>
</li>
<li>
<p>Optional: Enable the <strong>Promote</strong> switch to promote this Content View across environments in the application life cycle.</p>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>Review details and click <strong>Finish</strong>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI Procedure</div>
<ol class="arabic">
<li>
<p>Obtain a list of repository IDs:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository list --organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Create the Content View and add the repository:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view create \
--name "<em>OSTree</em>" \
--description "<em>Example Content View for the OSTree</em>" \
--repository-ids <em>5</em> \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Publish the Content View:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view publish \
--name "<em>OSTree</em>" \
--description "<em>Example Content View for the OSTree</em>" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Managing_Container_Images_content-management"><a class="anchor" href="#Managing_Container_Images_content-management"></a>12. Managing Container Images</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With orcharhino, you can import container images from various sources and distribute them to external containers using Content Views.</p>
</div>
<div class="sect2">
<h3 id="Importing_Container_Images_content-management"><a class="anchor" href="#Importing_Container_Images_content-management"></a>12.1. Importing Container Images</h3>
<div class="paragraph">
<p>You can import container image repositories from any container image registry.</p>
</div>
<div class="paragraph">
<p>This procedure uses repository discovery to find container images and import them as repositories.
For more information about creating a product and repository manually, see <a href="#Importing_Content_content-management">Importing Content</a>.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the orcharhino management UI, see the <a href="#cli-importing-container-images">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong> and click <strong>Repo Discovery</strong>.</p>
</li>
<li>
<p>From the <strong>Repository Type</strong> list, select <strong>Container Images</strong>.</p>
</li>
<li>
<p>In the <strong>Registry to Discover</strong> field, enter the URL of the registry to import images from.</p>
</li>
<li>
<p>In the <strong>Registry Username</strong> field, enter the name that corresponds with your user name for the container image registry.</p>
</li>
<li>
<p>In the <strong>Registry Password</strong> field, enter the password that corresponds with the user name that you enter.</p>
</li>
<li>
<p>In the <strong>Registry Search Parameter</strong> field, enter any search criteria that you want to use to filter your search, and then click <strong>Discover</strong>.</p>
</li>
<li>
<p>Optional: To further refine the <strong>Discovered Repository</strong> list, in the <strong>Filter</strong> field, enter any additional search criteria that you want to use.</p>
</li>
<li>
<p>From the <strong>Discovered Repository</strong> list, select any repositories that you want to import, and then click <strong>Create Selected</strong>.</p>
</li>
<li>
<p>Optional: To change the download policy for this docker repository to <em>on demand</em>, see <a href="#changing_the_download_policy_for_a_repository_content-management">Changing the Download Policy for a Repository</a>.</p>
</li>
<li>
<p>Optional: If you want to create a product, from the <strong>Product</strong> list, select <strong>New Product</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a product name.</p>
</li>
<li>
<p>Optional: In the <strong>Repository Name</strong> and <strong>Repository Label</strong> columns, you can edit the repository names and labels.</p>
</li>
<li>
<p>Click <strong>Run Repository Creation</strong>.</p>
</li>
<li>
<p>When repository creation is complete, you can click each new repository to view more information.</p>
</li>
<li>
<p>Optional: To filter the content you import to a repository, click a repository, and then navigate to <strong>Limit Sync Tags</strong>.
Click to edit, and add any tags that you want to limit the content that synchronizes to orcharhino.</p>
</li>
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong> and select the name of your product.</p>
</li>
<li>
<p>Select the new repositories and then click <strong>Sync Now</strong> to start the synchronization process.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To view the progress of the synchronization, navigate to <strong>Content</strong> &gt; <strong>Sync Status</strong> and expand the repository tree.</p>
</div>
<div class="paragraph">
<p>When the synchronization completes, you can click <strong>Container Image Manifests</strong> to list the available manifests.
From the list, you can also remove any manifests that you do not require.</p>
</div>
<div id="cli-importing-container-images" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Create the custom <code>Red Hat Container Catalog</code> product:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer product create \
--description "<em>My_Description</em>" \
--name "Red Hat Container Catalog" \
--organization "<em>My_Organization</em>" \
--sync-plan "<em>My_Sync_Plan</em>"</pre>
</div>
</div>
</li>
<li>
<p>Create the repository for the container images:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository create \
--content-type "docker" \
--docker-upstream-name "rhel7" \
--name "RHEL7" \
--organization "<em>My_Organization</em>" \
--product "Red Hat Container Catalog" \
--url "http://registry.access.redhat.com/"</pre>
</div>
</div>
</li>
<li>
<p>Synchronize the repository:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository synchronize \
--name "RHEL7" \
--organization "<em>My_Organization</em>" \
--product "Red Hat Container Catalog"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Managing_Container_Name_Patterns_content-management"><a class="anchor" href="#Managing_Container_Name_Patterns_content-management"></a>12.2. Managing Container Name Patterns</h3>
<div class="paragraph">
<p>When you use orcharhino to create and manage your containers, as the container moves through Content View versions and different stages of the orcharhino lifecycle environment, the container name changes at each stage.
For example, if you synchronize a container image with the name <code>ssh</code> from an upstream repository, when you add it to a orcharhino product and organization and then publish as part of a Content View, the container image can have the following name: <code>my_organization_production-custom_spin-my_product-custom_ssh</code>.
This can create problems when you want to pull a container image because container registries can contain only one instance of a container name.
To avoid problems with orcharhino naming conventions, you can set a registry name pattern to override the default name to ensure that your container name is clear for future use.</p>
</div>
<div class="paragraph">
<div class="title">Limitations</div>
<p>If you use a registry name pattern to manage container naming conventions, because registry naming patterns must generate globally unique names, you might experience naming conflict problems.
For example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If you set the <code>repository.docker_upstream_name</code> registry name pattern, you cannot publish or promote Content Views with container content with identical repository names to the <code>Production</code> lifecycle.</p>
</li>
<li>
<p>If you set the <code>lifecycle_environment.name</code> registry name pattern, this can prevent the creation of a second container repository with the identical name.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You must proceed with caution when defining registry naming patterns for your containers.</p>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>To manage container naming with a registry name pattern, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle Environments</strong>, and either create a lifecycle environment or select a lifecycle environment to edit.</p>
</li>
<li>
<p>In the <strong>Container Image Registry</strong> area, click the edit icon to the right of <strong>Registry Name Pattern</strong> area.</p>
</li>
<li>
<p>Use the list of variables and examples to determine which registry name pattern you require.</p>
</li>
<li>
<p>In the <strong>Registry Name Pattern</strong> field, enter the registry name pattern that you want to use.
For example, to use the <code>repository.docker_upstream_name</code>:</p>
<div class="listingblock">
<div class="content">
<pre>&lt;%= repository.docker_upstream_name %&gt;</pre>
</div>
</div>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Managing_Container_Registry_Authentication_content-management"><a class="anchor" href="#Managing_Container_Registry_Authentication_content-management"></a>12.3. Managing Container Registry Authentication</h3>
<div class="paragraph">
<p>You can manage the authentication settings for accessing containers images from orcharhino.
By default, users must authenticate to access containers images in orcharhino.</p>
</div>
<div class="paragraph">
<p>You can specify whether you want users to authenticate to access container images in orcharhino in a lifecycle environment.
For example, you might want to permit users to access container images from the <code>Production</code> lifecycle without any authentication requirement and restrict access the <code>Development</code> and <code>QA</code> environments to authenticated users.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle Environments</strong>.</p>
</li>
<li>
<p>Select the lifecycle environment that you want to manage authentication for.</p>
</li>
<li>
<p>To permit unauthenticated access to the containers in this lifecycle environment, select the <strong>Unauthenticated Pull</strong> checkbox.
To restrict unauthenticated access, clear the <strong>Unauthenticated Pull</strong> checkbox.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Configuring_podman_to_trust_the_CA_content-management"><a class="anchor" href="#Configuring_podman_to_trust_the_CA_content-management"></a>12.4. Configuring Podman and Docker to trust the Certificate Authority</h3>
<div class="paragraph">
<p>Podman uses two paths to locate the CA file, namely, <code>/etc/containers/certs.d/</code> and <code>/etc/docker/certs.d/</code>.</p>
</div>
<div class="paragraph">
<p>Copy the root CA file to one of these locations, with the exact path determined by the server hostname, and naming the file <code>ca.crt</code></p>
</div>
<div class="paragraph">
<p>In the following examples, replace <code>hostname.example.com</code> with <code>orcharhino-server.example.com</code> or <code>orcharhino-proxy-server.example.com</code>, depending on your use case.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You might first need to create the relevant location using:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir -p /etc/containers/certs.d/hostname.example.com</pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir -p /etc/docker/certs.d/hostname.example.com</pre>
</div>
</div>
</li>
<li>
<p>For podman, use:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># cp rootCA.pem /etc/containers/certs.d/hostname.example.com/ca.crt</pre>
</div>
</div>
</li>
<li>
<p>Alternatively, if you are using Docker, copy the root CA file to the equivalent Docker directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># cp rootCA.pem /etc/docker/certs.d/hostname.example.com/ca.crt</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>You no longer need to use the <code>--tls-verify=false</code> option when logging in to the registry:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ podman login hostname.example.com

Username: admin
Password:
Login Succeeded!</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Using_Container_Registries_content-management"><a class="anchor" href="#Using_Container_Registries_content-management"></a>12.5. Using Container Registries</h3>
<div class="paragraph">
<p>Podman and Docker can be used to fetch content from container registries.</p>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>Logging in to the container registry:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># podman login orcharhino.example.com</pre>
</div>
</div>
<div class="paragraph">
<p>Listing container images:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># podman search orcharhino.example.com/</pre>
</div>
</div>
<div class="paragraph">
<p>Pulling container images:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># podman pull orcharhino.example.com/my-image:&lt;optional_tag&gt;</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Managing_ISO_Images_content-management"><a class="anchor" href="#Managing_ISO_Images_content-management"></a>13. Managing ISO Images</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use orcharhino to store ISO images, either from Red&#160;Hat&#8217;s Content Delivery Network or other sources.
You can also upload other files, such as virtual machine images, and publish them in repositories.</p>
</div>
<div class="sect2">
<h3 id="Importing_ISO_Images_from_Red_Hat_content-management"><a class="anchor" href="#Importing_ISO_Images_from_Red_Hat_content-management"></a>13.1. Importing ISO Images from Red Hat</h3>
<div class="paragraph">
<p>The Red&#160;Hat Content Delivery Network provides ISO images for certain products.
The procedure for importing this content is similar to the procedure for enabling repositories for RPM content.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the orcharhino management UI, see the <a href="#cli-importing-iso-images-from-red-hat">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Red&#160;Hat Repositories</strong>.</p>
</li>
<li>
<p>In the <strong>Search</strong> field, enter an image name, for example, <code>Red&#160;Hat Enterprise Linux 7 Server (ISOs)</code>.</p>
</li>
<li>
<p>In the Available Repositories window, expand <strong>Red&#160;Hat Enterprise Linux 7 Server (ISOs)</strong>.</p>
</li>
<li>
<p>For the <strong>x86_64 7.2</strong> entry, click the <strong>Enable</strong> icon to enable the repositories for the image.</p>
</li>
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong> and click <strong>Red&#160;Hat Enterprise Linux Server</strong>.</p>
</li>
<li>
<p>Click the <strong>Repositories</strong> tab of the Red&#160;Hat Enterprise Linux Server window, and click <strong>Red&#160;Hat Enterprise Linux 7 Server ISOs x86_64 7.2</strong>.</p>
</li>
<li>
<p>In the upper right of the Red&#160;Hat Enterprise Linux 7 Server ISOs x86_64 7.2 window, click <strong>Select Action</strong> and select <strong>Sync Now</strong>.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">To view the Synchronization Status</div>
<ul>
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Sync Status</strong> and expand <strong>Red&#160;Hat Enterprise Linux Server</strong>.</p>
</li>
</ul>
</div>
<div id="cli-importing-iso-images-from-red-hat" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Locate the Red&#160;Hat Enterprise Linux Server product for <code>file</code> repositories:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository-set list \
--product "Red Hat Enterprise Linux Server" \
--organization "<em>My_Organization</em>" | grep "file"</pre>
</div>
</div>
</li>
<li>
<p>Enable the <code>file</code> repository for Red&#160;Hat Enterprise Linux 7.2 Server ISO:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository-set enable \
--product "Red Hat Enterprise Linux Server" \
--name "Red Hat Enterprise Linux 7 Server (ISOs)" \
--releasever 7.2 \
--basearch x86_64 \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Locate the repository in the product:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository list \
--product "Red Hat Enterprise Linux Server" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Synchronize the repository in the product:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository synchronize \
--name "Red Hat Enterprise Linux 7 Server ISOs x86_64 7.2" \
--product "Red Hat Enterprise Linux Server" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Importing_Individual_ISO_Images_and_Files_content-management"><a class="anchor" href="#Importing_Individual_ISO_Images_and_Files_content-management"></a>13.2. Importing Individual ISO Images and Files</h3>
<div class="paragraph">
<p>Use this procedure to manually import ISO content and other files to orcharhino&#160;Server.
To import files, you can complete the following steps in the orcharhino management UI or using the Hammer CLI.
However, if the size of the file that you want to upload is larger than 15 MB, you must use the Hammer CLI to upload it to a repository.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the orcharhino management UI, see the <a href="#cli-importing-individual-iso-images-and-files">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>, and in the Products window, click <strong>Create Product</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name to identify the product.
This name populates the <strong>Label</strong> field.</p>
</li>
<li>
<p>Optional: In the <strong>GPG Key</strong> field, enter a GPG Key for the product.</p>
</li>
<li>
<p>Optional: From the <strong>Sync Plan</strong> list, select a synchronization plan for the product.</p>
</li>
<li>
<p>Optional: In the <strong>Description</strong> field, enter a description of the product.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
<li>
<p>In the Products window, click the new product and then click <strong>Create Repository</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for the repository.
This automatically populates the <strong>Label</strong> field.</p>
</li>
<li>
<p>From the <strong>Type</strong> list, select <strong>file</strong>.</p>
</li>
<li>
<p>In the <strong>Upstream URL</strong> field, enter the URL of the registry to use as a source.
Add a corresponding user name and password in the <strong>Upstream Username</strong> and <strong>Upstream Password</strong> fields.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
<li>
<p>Select the new repository.</p>
</li>
<li>
<p>Navigate to <strong>Upload File</strong> and click <strong>Browse</strong>.</p>
</li>
<li>
<p>Select the <code>.iso</code> file and click <strong>Upload</strong>.</p>
</li>
</ol>
</div>
<div id="cli-importing-individual-iso-images-and-files" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Create the custom product:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer product create \
--name "<em>My_ISOs</em>" \
--sync-plan "Example Plan" \
--description "<em>My_Product</em>" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Create the repository:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository create \
--name "<em>My_ISOs</em>" \
--content-type "file" \
--product "<em>My_Product</em>" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Upload the ISO file to the repository:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository upload-content \
--path ~/bootdisk.iso \
--id <em>repo_ID</em> \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Managing_Custom_File_Type_Content_content-management"><a class="anchor" href="#Managing_Custom_File_Type_Content_content-management"></a>14. Managing Custom File Type Content</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In orcharhino, you might require methods of managing and distributing SSH keys and source code files or larger files such as virtual machine images and ISO files.
To achieve this, custom products in orcharhino include repositories for custom file types.
This provides a generic method to incorporate arbitrary files in a product.</p>
</div>
<div class="paragraph">
<p>You can upload files to the repository and synchronize files from an upstream orcharhino&#160;Server.
When you add files to a custom file type repository, you can use the normal orcharhino management functions such as adding a specific version to a Content View to provide version control and making the repository of files available on various orcharhino&#160;Proxies.
Clients must download the files over HTTP or HTTPS using <code>curl -O</code>.</p>
</div>
<div class="paragraph">
<p>You can create a file type repository in orcharhino&#160;Server only in a custom product, but there is flexibility in how you create the repository source.
You can create an independent repository source in a directory on orcharhino&#160;Server, or on a remote HTTP server, and then synchronize the contents of that directory into orcharhino.
This method is useful when you have multiple files to add to a orcharhino repository.</p>
</div>
<div class="sect2">
<h3 id="Creating_a_Local_Source_for_a_Custom_File_Type_Repository_content-management"><a class="anchor" href="#Creating_a_Local_Source_for_a_Custom_File_Type_Repository_content-management"></a>14.1. Creating a Local Source for a Custom File Type Repository</h3>
<div class="paragraph">
<p>You can create a custom file type repository source, from a directory of files, on the base system where orcharhino is installed using <strong>Pulp Manifest</strong>.
You can then synchronize the files into a repository and manage the custom file type content like any other content type.</p>
</div>
<div class="paragraph">
<p>Use this procedure to configure a repository in a directory on the base system where orcharhino is installed.
To create a file type repository in a directory on a remote server, see <a href="#Creating_a_Remote_Source_for_a_Custom_File_Type_Repository_content-management">Creating a Remote Source for a Custom File Type Repository</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Install the Pulp Manifest package:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf install python39-pulp_manifest</pre>
</div>
</div>
</li>
<li>
<p>Create a directory that you want to use as the file type repository, such as:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir -p /var/lib/pulp/<em>local_repos</em>/<em>my_file_repo</em></pre>
</div>
</div>
</li>
<li>
<p>Add the parent folder into allowed import paths:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --foreman-proxy-content-pulpcore-additional-import-paths /var/lib/pulp/<em>local_repos</em></pre>
</div>
</div>
</li>
<li>
<p>Add files to the directory or create a test file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># touch /var/lib/pulp/<em>local_repos</em>/<em>my_file_repo</em>/<em>test.txt</em></pre>
</div>
</div>
</li>
<li>
<p>Run the Pulp Manifest command to create the manifest:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># pulp-manifest /var/lib/pulp/<em>local_repos</em>/<em>my_file_repo</em></pre>
</div>
</div>
</li>
<li>
<p>Verify the manifest was created:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ls /var/lib/pulp/<em>local_repos</em>/<em>my_file_repo</em>
PULP_MANIFEST test.txt</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now, you can import your local source as a custom file type repository.
Use the <code>file://</code> URL scheme and the name of the directory to specify an <strong>Upstream URL</strong>, such as <code>file:///<em>my_file_repo</em></code>.
For more information, see <a href="#Creating_a_Custom_File_Type_Repository_content-management">Creating a Custom File Type Repository</a>.</p>
</div>
<div class="paragraph">
<p>If you update the contents of your directory, re-run Pulp Manifest and sync the repository in orcharhino.
For more information, see <a href="#Synchronizing_Repositories_content-management">Synchronizing Repositories</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Creating_a_Remote_Source_for_a_Custom_File_Type_Repository_content-management"><a class="anchor" href="#Creating_a_Remote_Source_for_a_Custom_File_Type_Repository_content-management"></a>14.2. Creating a Remote Source for a Custom File Type Repository</h3>
<div class="paragraph">
<p>You can create a custom file type repository source from a directory of files that is external to orcharhino&#160;Server using <strong>Pulp Manifest</strong>.
You can then synchronize the files into a repository on orcharhino&#160;Server over HTTP or HTTPS and manage the custom file type content like any other content type.</p>
</div>
<div class="paragraph">
<p>Use this procedure to configure a repository in a directory on a remote server.
To create a file type repository in a directory on the base system where orcharhino&#160;Server is installed, see <a href="#Creating_a_Local_Source_for_a_Custom_File_Type_Repository_content-management">Creating a Local Source for a Custom File Type Repository</a>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have a server running Enterprise Linux registered to your orcharhino.</p>
</li>
<li>
<p>You have installed an HTTP server.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Install the Pulp Manifest package:</p>
<div class="ulist">
<ul>
<li>
<p>On Enterprise Linux 8:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf install python39-pulp_manifest</pre>
</div>
</div>
</li>
<li>
<p>On Enterprise Linux 7:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># yum install tfm-pulpcore-python3-pulp_manifest</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Create a directory that you want to use as the file type repository in the HTTP server&#8217;s public folder:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir /var/www/html/pub/<em>my_file_repo</em></pre>
</div>
</div>
</li>
<li>
<p>Add files to the directory or create a test file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># touch /var/www/html/pub/<em>my_file_repo</em>/<em>test.txt</em></pre>
</div>
</div>
</li>
<li>
<p>Run the Pulp Manifest command to create the manifest:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># pulp-manifest /var/www/html/pub/<em>my_file_repo</em></pre>
</div>
</div>
</li>
<li>
<p>Verify the manifest was created:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ls /var/www/html/pub/<em>my_file_repo</em>
PULP_MANIFEST test.txt</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now, you can import your remote source as a custom file type repository.
Use the path to the directory to specify an <strong>Upstream URL</strong>, such as <code>http://orcharhino.example.com/<em>my_file_repo</em></code>.
For more information, see <a href="#Creating_a_Custom_File_Type_Repository_content-management">Creating a Custom File Type Repository</a>.</p>
</div>
<div class="paragraph">
<p>If you update the contents of your directory, re-run Pulp Manifest and sync the repository in orcharhino.
For more information, see <a href="#Synchronizing_Repositories_content-management">Synchronizing Repositories</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Creating_a_Custom_File_Type_Repository_content-management"><a class="anchor" href="#Creating_a_Custom_File_Type_Repository_content-management"></a>14.3. Creating a Custom File Type Repository</h3>
<div class="paragraph">
<p>The procedure for creating a custom file type repository is the same as the procedure for creating any custom content, except that when you create the repository, you select the <strong>file</strong> type.
You must create a product and then add a custom repository.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the orcharhino management UI, see the <a href="#cli-creating-a-custom-file-type-repository_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content &gt; Products</strong>.</p>
</li>
<li>
<p>Select a product that you want to create a repository for.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for the repository.
orcharhino automatically completes the <strong>Label</strong> field based on the name.</p>
</li>
<li>
<p>Optional: In the <strong>Description</strong> field, enter a description for the repository.</p>
</li>
<li>
<p>From the <strong>Type</strong> list, select <code>file</code> as type of repository.</p>
</li>
<li>
<p>Optional: In the <strong>Upstream URL</strong> field, enter the URL of the upstream repository to use as a source.
If you do not enter an upstream URL, you can manually upload packages.
For more information, see <a href="#Uploading_Files_To_a_Custom_File_Type_Repository_content-management">Uploading Files To a Custom File Type Repository</a>.</p>
</li>
<li>
<p>Select the <strong>Verify SSL</strong> checkbox if you want to verify that the upstream repository&#8217;s SSL certificates are signed by a trusted CA.</p>
</li>
<li>
<p>Optional: In the <strong>Upstream Username</strong> field, enter the user name for the upstream repository if required for authentication.
Clear this field if the repository does not require authentication.</p>
</li>
<li>
<p>Optional: In the <strong>Upstream Password</strong> field, enter the corresponding password for the upstream repository.
Clear this field if the repository does not require authentication.</p>
</li>
<li>
<p>Optional: In the <strong>Upstream Authentication Token</strong> field, provide the token of the upstream repository user for authentication.
Leave this field empty if the repository does not require authentication.</p>
</li>
<li>
<p>From the <strong>Mirroring Policy</strong> list, select the type of content synchronization orcharhino&#160;Server performs.
For more information, see <a href="#Mirroring_Policies_Overview_content-management">Mirroring Policies Overview</a>.</p>
</li>
<li>
<p>Optional: In the <strong>HTTP Proxy Policy</strong> field, select or unselect using a HTTP proxy.
By default, it uses the <code>Global Default</code> HTTP proxy.</p>
</li>
<li>
<p>Optional: You can clear the <strong>Unprotected</strong> checkbox to require a subscription entitlement certificate for accessing this repository.
By default, the repository is published through HTTP.</p>
</li>
<li>
<p>Optional: In the <strong>SSL CA Cert</strong> field, select the SSL CA Certificate for the repository.</p>
</li>
<li>
<p>Optional: In the <strong>SSL Client Cert</strong> field, select the SSL Client Certificate for the repository.</p>
</li>
<li>
<p>Optional: In the <strong>SSL Client Key</strong> field, select the SSL Client Key for the repository.</p>
</li>
<li>
<p>Click <strong>Save</strong> to create the repository.</p>
</li>
</ol>
</div>
<div id="cli-creating-a-custom-file-type-repository_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Create a custom product:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer product create \
--description "<em>My_Files</em>" \
--name "<em>My_File_Product</em>" \
--organization "<em>My_Organization</em>" \
--sync-plan "<em>My_Sync_Plan</em>"</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Optional Parameters for the <code>hammer product create</code> Command</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Option</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--gpg-key-id</code> <em>gpg_key_id</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GPG key numeric identifier</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--sync-plan-id</code> <em>sync_plan_id</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sync plan numeric identifier</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--sync-plan</code> <em>sync_plan_name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sync plan name to search by</p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Create a <code>file</code> type repository:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository create \
--content-type "file" \
--name "<em>My_Files</em>" \
--organization "<em>My_Organization</em>" \
--product "<em>My_File_Product</em>"</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Optional Parameters for the <code>hammer repository create</code> Command</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Option</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--checksum-type</code> <em>sha_version</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Repository checksum, currently 'sha1' &amp; 'sha256' are supported</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--download-policy</code> <em>policy_name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Download policy for yum repos (either 'immediate' or 'on_demand').</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--gpg-key-id</code> <em>gpg_key_id</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GPG key numeric identifier</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--gpg-key</code> <em>gpg_key_name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key name to search by</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--mirror-on-sync</code> <em>boolean</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Must this repo be mirrored from the source, and stale RPMs removed, when synced? Set to <code>true</code> or <code>false</code>, <code>yes</code> or <code>no</code>, <code>1</code> or <code>0</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--publish-via-http</code> <em>boolean</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Must this also be published using HTTP? Set to <code>true</code> or <code>false</code>, <code>yes</code> or <code>no</code>, <code>1</code> or <code>0</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--upstream-password</code> <em>repository_password</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password for the upstream repository user</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--upstream-username</code> <em>repository_username</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Upstream repository user, if required for authentication</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--url</code> <em>source_repo_url</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the Source repository</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--verify-ssl-on-sync</code> <em>boolean</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Must Katello verify that the upstream URL&#8217;s SSL certificates are signed by a trusted CA? Set to <code>true</code> or <code>false</code>, <code>yes</code> or <code>no</code>, <code>1</code> or <code>0</code>.</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Uploading_Files_To_a_Custom_File_Type_Repository_content-management"><a class="anchor" href="#Uploading_Files_To_a_Custom_File_Type_Repository_content-management"></a>14.4. Uploading Files To a Custom File Type Repository</h3>
<div class="paragraph">
<p>Use this procedure to upload files to a custom file type repository.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Select a custom product by name.</p>
</li>
<li>
<p>Select a file type repository by name.</p>
</li>
<li>
<p>Click <strong>Browse</strong> to search and select the file you want to upload.</p>
</li>
<li>
<p>Click <strong>Upload</strong> to upload the selected file to orcharhino&#160;Server.</p>
</li>
<li>
<p>Visit the URL where the repository is published to see the file.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">CLI procedure</div>
<div class="content">
<pre class="nowrap"># hammer repository upload-content \
--id <em>repo_ID</em> \
--organization "<em>My_Organization</em>" \
--path <em>example_file</em></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>--path</code> option can indicate a file, a directory of files, or a glob expression of files.
Globs must be escaped by single or double quotes.</p>
</div>
</div>
<div class="sect2">
<h3 id="Downloading_Files_to_a_Host_from_a_Custom_File_Type_Repository_content-management"><a class="anchor" href="#Downloading_Files_to_a_Host_from_a_Custom_File_Type_Repository_content-management"></a>14.5. Downloading Files to a Host From a Custom File Type Repository</h3>
<div class="paragraph">
<p>You can download files to a client over HTTPS using <code>curl -O</code>, and optionally over HTTP if the <strong>Unprotected</strong> option for repositories is selected.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have a custom file type repository.
For more information, see <a href="#Creating_a_Custom_File_Type_Repository_content-management">Creating a Custom File Type Repository</a>.</p>
</li>
<li>
<p>You know the name of the file you want to download to clients from the file type repository.</p>
</li>
<li>
<p>To use HTTPS you require the following certificates on the client:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The <code>katello-server-ca.crt</code>.
For more information, see <a href="https://docs.theforeman.org/3.4/Administering_Project/index-orcharhino.html#Importing_the_Katello_Root_CA_Certificate_admin">Importing the Katello Root CA Certificate</a> in <em>Administering orcharhino</em>.</p>
</li>
<li>
<p>An Organization Debug Certificate.
For more information, see <a href="https://docs.theforeman.org/3.4/Managing_Organizations_and_Locations/index-orcharhino.html#Creating_an_Organization_Debug_Certificate_managing-organizations-locations">Creating an Organization Debug Certificate</a> in <em>Managing Organizations and Locations in orcharhino</em>.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Select a custom product by name.</p>
</li>
<li>
<p>Select a file type repository by name.</p>
</li>
<li>
<p>Ensure to select the <strong>Unprotected</strong> checkbox to access the repository is published through HTTP.</p>
</li>
<li>
<p>Copy the URL where the repository is published.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List the file type repositories.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository list --content-type file
---|------------|-------------------|--------------|----
ID | NAME       | PRODUCT           | CONTENT TYPE | URL
---|------------|-------------------|--------------|----
7  | <em>My_Files</em> | <em>My_File_Product</em> | file         |
---|------------|-------------------|--------------|----</pre>
</div>
</div>
</li>
<li>
<p>Display the repository information.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository info \
--name "<em>My_Files</em>" \
--organization-id <em>My_Organization_ID</em> \
--product "<em>My_File_Product</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>If <strong>Unprotected</strong> is enabled, the output is similar to this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">Publish Via HTTP:   yes
Published At:       http://<em>orcharhino.example.com</em>/pulp/isos/<em>uuid</em>/</pre>
</div>
</div>
<div class="paragraph">
<p>If <strong>Unprotected</strong> is not enabled, the output is similar to this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">Publish Via HTTP:   no
Published At:       https://<em>orcharhino.example.com</em>/pulp/isos/<em>uuid</em>/</pre>
</div>
</div>
</li>
<li>
<p>On the client, enter a command in the appropriate format for HTTP or HTTPS:</p>
<div class="paragraph">
<p>For HTTP:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl -O <em>orcharhino.example.com</em>/pulp/isos/<em>uuid</em>/<em>my_file</em></pre>
</div>
</div>
<div class="paragraph">
<p>For HTTPS:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl -O --cert <em>./Default\ Organization-key-cert.pem</em> --cacert katello-server-ca.crt <em>orcharhino.example.com</em>/pulp/isos/<em>uuid</em>/<em>my_file</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Using_an_NFS_Share_for_Content_Storage_content-management"><a class="anchor" href="#Using_an_NFS_Share_for_Content_Storage_content-management"></a>Appendix A: Using an NFS Share for Content Storage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Your environment requires adequate hard disk space to fulfill content storage.
In some situations, it is useful to use an NFS share to store this content.
This appendix shows how to mount the NFS share on your orcharhino&#160;Server&#8217;s content management component.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
Use high-bandwidth, low-latency storage for the <code>/var/lib/pulp</code> file system.
orcharhino has many I/O-intensive operations; therefore, high-latency, low-bandwidth storage might have issues with performance degradation.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create the NFS share.
This example uses a share at <code>nfs.example.com:/orcharhino/pulp</code>.
Ensure this share provides the appropriate permissions to orcharhino&#160;Server and its <code>apache</code> user.</p>
</li>
<li>
<p>Stop orcharhino services on your orcharhino&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain service stop</pre>
</div>
</div>
</li>
<li>
<p>Ensure orcharhino&#160;Server has the <code>nfs-utils</code> package installed:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf install nfs-utils</pre>
</div>
</div>
</li>
<li>
<p>You need to copy the existing contents of <code>/var/lib/pulp</code> to the NFS share.
First, mount the NFS share to a temporary location:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir /mnt/temp
# mount -o rw nfs.example.com:/orcharhino/pulp /mnt/temp</pre>
</div>
</div>
<div class="paragraph">
<p>Copy the existing contents of <code>/var/lib/pulp</code> to the temporary location:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># cp -r /var/lib/pulp/* /mnt/temp/.</pre>
</div>
</div>
</li>
<li>
<p>Set the permissions for all files on the share to use the <code>pulp</code> user.</p>
</li>
<li>
<p>Unmount the temporary storage location:</p>
<div class="listingblock">
<div class="content">
<pre># umount /mnt/temp</pre>
</div>
</div>
</li>
<li>
<p>Remove the existing contents of <code>/var/lib/pulp</code>:</p>
<div class="listingblock">
<div class="content">
<pre># rm -rf /var/lib/pulp/*</pre>
</div>
</div>
</li>
<li>
<p>Edit the <code>/etc/fstab</code> file and add the following line:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">nfs.example.com:/orcharhino/pulp    /var/lib/pulp   nfs    rw,hard,intr,context="system_u:object_r:pulpcore_var_lib_t:s0"</pre>
</div>
</div>
<div class="paragraph">
<p>This makes the mount persistent across system reboots.
Ensure to include the SELinux context.</p>
</div>
</li>
<li>
<p>Enable the mount:</p>
<div class="listingblock">
<div class="content">
<pre># mount -a</pre>
</div>
</div>
</li>
<li>
<p>Confirm the NFS share mounts to <code>var/lib/pulp</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># df
Filesystem                         1K-blocks     Used Available Use% Mounted on
...
nfs.example.com:/orcharhino/pulp 309506048 58632800 235128224  20% /var/lib/pulp
...</pre>
</div>
</div>
<div class="paragraph">
<p>Also confirm that the existing content exists at the mount on <code>var/lib/pulp</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># ls /var/lib/pulp</pre>
</div>
</div>
</li>
<li>
<p>Start orcharhino services on your orcharhino&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain service start</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>orcharhino&#160;Server now uses the NFS share to store content.
Run a content synchronization to ensure the NFS share works as expected.
For more information, see <a href="#Synchronizing_Repositories_content-management">Synchronizing Repositories</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuring_inter_server_synchronization_iss_in_orcharhino"><a class="anchor" href="#_configuring_inter_server_synchronization_iss_in_orcharhino"></a>Appendix B: Configuring Inter-Server Synchronization (ISS) in orcharhino</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="how-to-configure-inter-server-sync_content-management"><a class="anchor" href="#how-to-configure-inter-server-sync_content-management"></a>B.1. How to Configure Inter-Server Synchronization</h3>
<div class="paragraph">
<p>orcharhino uses Inter-Server Synchronization (ISS) to synchronize content between two orcharhino&#160;Servers including those that are air-gapped.</p>
</div>
<div class="paragraph">
<p>You can use ISS in cases such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If you want to copy some but not all content from your orcharhino&#160;Server to other orcharhino&#160;Servers.
For example, you have Content Views that your IT department consumes from orcharhino&#160;Server, and you want to copy content from those Content Views to other orcharhino&#160;Servers.</p>
</li>
<li>
<p>If you want to copy all Library content from your orcharhino&#160;Server to other orcharhino&#160;Servers.
For example, you have Products and repositories that your IT department consumes from orcharhino&#160;Server in the Library, and you want to copy all Products and repositories in that organization to other orcharhino&#160;Servers.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>You cannot use ISS to synchronize content from orcharhino&#160;Server to orcharhino&#160;Proxy.
orcharhino&#160;Proxy supports synchronization natively.
For more information, see <a href="https://docs.theforeman.org/3.4/Planning_for_Project/index-orcharhino.html#chap-Documentation-Architecture_Guide-Capsule_Server_Overview">orcharhino&#160;Proxy Overview</a> in <em>Planning for orcharhino</em>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There are different ways of using ISS.
The way you can use depends on your multi-server setup that can fall to one of the following scenarios.</p>
</div>
<div class="sect3">
<h4 id="_iss_network_sync_in_a_disconnected_scenario"><a class="anchor" href="#_iss_network_sync_in_a_disconnected_scenario"></a>B.1.1. ISS Network Sync in a Disconnected Scenario</h4>
<div class="paragraph">
<p>In a disconnected scenario, there is the following setup:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The upstream orcharhino&#160;Server is connected to the Internet.
This server consumes content from the Red Hat Content Delivery Network (CDN) or custom sources.</p>
</li>
<li>
<p>The downstream orcharhino&#160;Server is completely isolated from all external networks.</p>
</li>
<li>
<p>The downstream orcharhino&#160;Server can communicate with a connected upstream orcharhino&#160;Server over an internal network.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/common/iss-disconnected-orcharhino.svg" alt="The orcharhino ISS Disconnected Scenario">
</div>
<div class="title">Figure 2. The orcharhino ISS Disconnected Scenario</div>
</div>
<div class="paragraph">
<p>You can configure your downstream orcharhino&#160;Server to synchronize content from the upstream orcharhino&#160;Server over the network.
See <a href="#configuring-server-to-synchronize-content-over-a-network_content-management">Configuring orcharhino Server to Synchronize Content over a Network</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_iss_export_sync_in_an_air_gapped_scenario"><a class="anchor" href="#_iss_export_sync_in_an_air_gapped_scenario"></a>B.1.2. ISS Export Sync in an Air-Gapped Scenario</h4>
<div class="paragraph">
<p>In an air-gapped scenario, there is the following setup:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The upstream orcharhino&#160;Server is connected to the Internet.
This server consumes content from the Red Hat CDN or custom sources.</p>
</li>
<li>
<p>The downstream orcharhino&#160;Server is completely isolated from all external networks.</p>
</li>
<li>
<p>The downstream orcharhino&#160;Server does not have a network connection to a connected upstream orcharhino&#160;Server.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/common/iss-airgapped-orcharhino.svg" alt="The orcharhino ISS Air-Gapped Scenario">
</div>
<div class="title">Figure 3. The orcharhino ISS Air-Gapped Scenario</div>
</div>
<div class="paragraph">
<p>The only way for an air-gapped downstream orcharhino&#160;Server to receive content updates is by exporting payload from the upstream orcharhino&#160;Server, bringing it physically to the downstream orcharhino&#160;Server, and importing the payload.
For more information, see <a href="https://docs.theforeman.org/3.4/Managing_Content/index-orcharhino.html#Synchronizing_Content_Between_Servers_content-management">Synchronizing Content Between orcharhino&#160;Servers</a> in <em>Managing Content</em>.</p>
</div>
<div class="paragraph">
<p>Configure your downstream orcharhino&#160;Server to synchronize content using exports.
See <a href="#configuring-server-to-sync-content-using-exports_content-management">Configuring orcharhino Server to Synchronize Content Using Exports</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuring-server-to-sync-content-using-exports_content-management"><a class="anchor" href="#configuring-server-to-sync-content-using-exports_content-management"></a>B.2. Configuring orcharhino Server to Synchronize Content Using Exports</h3>
<div class="paragraph">
<p>If you deployed your downstream orcharhino&#160;Server as air-gapped, configure your orcharhino&#160;Server as such to avoid attempts to consume content from a network.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Subscriptions</strong>.</p>
</li>
<li>
<p>Click the <strong>Manage Manifest</strong> button.</p>
</li>
<li>
<p>Switch to the <strong>CDN Configuration</strong> tab.</p>
</li>
<li>
<p>Select the <strong>Export Sync</strong> tab.</p>
</li>
<li>
<p>Click <strong>Update</strong>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI Procedure</div>
<ol class="arabic">
<li>
<p>Log in to your orcharhino&#160;Server using SSH.</p>
</li>
<li>
<p>Set CDN configuration to sync using exports:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer organization configure-cdn --name="<em>My_Organization</em>" --type=export_sync</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="configuring-server-to-synchronize-content-over-a-network_content-management"><a class="anchor" href="#configuring-server-to-synchronize-content-over-a-network_content-management"></a>B.3. Configuring orcharhino Server to Synchronize Content over a Network</h3>
<div class="paragraph">
<p>Configure a downstream orcharhino&#160;Server to synchronize repositories from a connected upstream orcharhino&#160;Server over HTTPS.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>A network connection exists between the upstream orcharhino&#160;Server and the downstream orcharhino&#160;Server.</p>
</li>
<li>
<p>You imported the subscription manifest on both the upstream and downstream orcharhino&#160;Server.</p>
</li>
<li>
<p>On the upstream orcharhino&#160;Server, you enabled the required repositories for the organization.</p>
</li>
<li>
<p>The upstream user is an admin or has the following permissions:</p>
<div class="ulist">
<ul>
<li>
<p><code>view_organizations</code></p>
</li>
<li>
<p><code>view_products</code></p>
</li>
<li>
<p><code>edit_organizations</code> (to download the CA certificate)</p>
</li>
<li>
<p><code>view_lifecycle_environments</code></p>
</li>
<li>
<p><code>view_content_views</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>On the downstream orcharhino&#160;Server, you have imported the SSL certificate of the upstream orcharhino&#160;Server using the contents of <code>http://<em>upstream-orcharhino.example.com</em>/pub/katello-server-ca.crt</code>.
For more information, see <a href="https://docs.theforeman.org/3.4/Managing_Content/index-orcharhino.html#Importing_Custom_SSL_Certificates_content-management">Importing SSL Certificates</a> in <em>Managing Content</em>.</p>
</li>
<li>
<p>The downstream user is an admin or has the permissions to create product repositories and organizations.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Navigate to <strong>Content</strong> &gt; <strong>Subscriptions</strong>.</p>
</li>
<li>
<p>Click the <strong>Manage Manifest</strong> button.</p>
</li>
<li>
<p>Navigate to the <strong>CDN Configuration</strong> tab.</p>
</li>
<li>
<p>Select the <strong>Network Sync</strong> tab.</p>
</li>
<li>
<p>In the <strong>URL</strong> field, enter the address of the upstream orcharhino&#160;Server.</p>
</li>
<li>
<p>In the <strong>Username</strong>, enter your username for upstream login.</p>
</li>
<li>
<p>In the <strong>Password</strong>, enter your password or personal access token for upstream login.</p>
</li>
<li>
<p>In the <strong>Organization label</strong> field, enter the label of the upstream organization.</p>
</li>
<li>
<p>Optional: In the <strong>Lifecycle Environment Label</strong> field, enter the label of the upstream lifecycle environment.
Default is <code>Library</code>.</p>
</li>
<li>
<p>Optional: In the <strong>Content view label</strong> field, enter the label of the upstream Content View.
Default is <code>Default_Organization_View</code>.</p>
</li>
<li>
<p>From the <strong>SSL CA Content Credential</strong> menu, select a CA certificate used by the upstream orcharhino&#160;Server.</p>
</li>
<li>
<p>Click <strong>Update</strong>.</p>
</li>
<li>
<p>In the orcharhino management UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Click <strong>Sync Now</strong> to synchronize the repositories.</p>
<div class="paragraph">
<p>You can also create a synchronization plan to ensure updates on a regular basis.
For more information, see <a href="https://docs.theforeman.org/3.4/Managing_Content/index-orcharhino.html#Creating_a_Sync_Plan_content-management">Creating a Synchronization Plan</a> in <em>Managing Content</em>.</p>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI Procedure</div>
<ol class="arabic">
<li>
<p>Connect to your downstream orcharhino&#160;Server using SSH.</p>
</li>
<li>
<p>View information about the upstream CA certificate:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-credential show \
--name="<em>My_Upstream_CA_Cert</em>" \
--organization="<em>My_Downstream_Organization</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>Note the ID of the CA certificate for the next step.</p>
</div>
</li>
<li>
<p>Set CDN configuration to an upstream orcharhino&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer organization configure-cdn --name="<em>My_Downstream_Organization</em>" \
--type=network_sync \
--url https://<em>upstream-orcharhino.example.com</em> \
--username <em>upstream_username</em> --password <em>upstream_password</em> \
--ssl-ca-credential-id "<em>My_Upstream_CA_Cert_ID" \
--upstream-organization-label="_My_Upstream_Organization</em>" \
[--upstream-lifecycle-environment-label="<em>My_Lifecycle_Environment</em>"] \
[--upstream-content-view-label="<em>My_Content_View</em>"]</pre>
</div>
</div>
<div class="paragraph">
<p>The default lifecycle environment label is <code>Library</code>.
The default Content View label is <code>Default_Organization_View</code>.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 6.3 (unsupported)<br>
Last updated Apr 2023
</div>
</div>
</body>
</html>