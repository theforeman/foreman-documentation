<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.26">
<title>Integrating provisioning infrastructure services</title>
<style>
﻿*,::before,::after{box-sizing:border-box}html{font-size:100%;-webkit-text-size-adjust:100%}body{background:#fff;color:rgba(0,0,0,0.8);padding:0;margin:0;font-family:"Noto Serif", "DejaVu Serif", serif;font-size:inherit;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,p,blockquote,th,td{margin:0;padding:0}a{background:none;color:#2156a5;text-decoration:underline;line-height:inherit}a:active,a:hover{cursor:pointer;outline:0}a:focus{outline:thin dotted}a:hover,a:focus{color:#1d4b8f}abbr{font-size:0.9em}abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}b,strong{font-weight:bold;line-height:inherit}strong strong{font-weight:400}code,kbd,pre{font-family:"Droid Sans Mono", "DejaVu Sans Mono", monospace;font-size:1em}code{font-weight:400;color:rgba(0,0,0,0.9)}pre{color:rgba(0,0,0,0.9);line-height:1.45;text-rendering:optimizeSpeed;white-space:pre-wrap}dfn{font-style:italic}em,i{font-style:italic;line-height:inherit}em em{font-style:normal}hr{border:solid #dddddf;border-width:1px 0 0;clear:both;height:0;margin:1.25em 0 1.1875em}mark{background:#ff0;color:#000}p{line-height:1.6;margin-bottom:1.25rem;text-rendering:optimizeLegibility}q{quotes:"“" "”" "‘" "’"}small{font-size:60%;line-height:inherit}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-0.5em}sub{bottom:-0.25em}img,object[type^="image/"],svg{display:inline-block;height:auto;max-width:100%;vertical-align:middle}img{border:0;-ms-interpolation-mode:bicubic}object{max-width:100%}svg:not(:root){overflow:hidden}figure{margin:0}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}.left{float:left !important}.right{float:right !important}.text-left{text-align:left !important}.text-right{text-align:right !important}.text-center{text-align:center !important}.text-justify{text-align:justify !important}.hide{display:none}.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:0.25em}p aside{font-size:.875em;line-height:1.35;font-style:italic}h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans", "DejaVu Sans", sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.2;word-spacing:-0.05em}h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{color:#e99b8f;line-height:0}h1{font-size:2.125em}h2{font-size:1.6875em}h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}h4,h5{font-size:1.125em}h6{font-size:1em}ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}ul,ol{margin-left:1.5em}ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}ul.square{list-style-type:square}ul.circle{list-style-type:circle}ul.disc{list-style-type:disc}ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}dl dt{margin-bottom:.3125em;font-weight:bold}dl dd{margin-bottom:1.25em;margin-left:1.125em}blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,0.85)}@media screen and (min-width: 768px){h1{font-size:2.75em}h2{font-size:2.3125em}h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}h4{font-size:1.4375em}}table{background:#fff;border:1px solid #dedede;border-collapse:collapse;border-spacing:0;margin-bottom:1.25em;word-wrap:normal}table thead,table tfoot{background:#f7f8f7}table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,0.8);text-align:left}table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,0.8)}table tr.even,table tr.alt{background:#f8f8f7}table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}.center{margin-left:auto;margin-right:auto}.stretch{width:100%}.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:"";display:table}.clearfix::after,.float-group::after{clear:both}:not(pre).nobreak{word-wrap:normal}:not(pre).nowrap{white-space:nowrap}:not(pre).pre-wrap{white-space:pre-wrap}:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal !important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}pre>code{display:block}pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}.keyseq{color:rgba(51,51,51,0.8)}kbd{display:inline-block;color:rgba(0,0,0,0.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,0.2),inset 0 0 0 0.1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}.keyseq kbd:first-child{margin-left:0}.keyseq kbd:last-child{margin-right:0}.menuseq,.menuref{color:#000}.menuseq b:not(.caret),.menuref{font-weight:inherit}.menuseq{word-spacing:-0.02em}.menuseq b.caret{font-size:1.25em;line-height:0.8}.menuseq i.caret{font-weight:bold;text-align:center;width:0.45em}b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}b.button::before{content:"[";padding:0 3px 0 2px}b.button::after{content:"]";padding:0 2px 0 3px}p a>code:hover{color:rgba(0,0,0,0.9)}body>div[id]{margin:0 auto;max-width:62.5em;position:relative;padding-left:.9375em;padding-right:0.9375em}body>div[id]::before,body>div[id]::after,#content #footnotes::before{content:"";display:table;clear:both}#content{margin-top:1.25em;margin-bottom:0.625em}#content::before{content:none}#header>h1:first-child{color:rgba(0,0,0,0.85);margin-top:2.25rem;margin-bottom:0}#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,0.6);display:flex;flex-flow:row wrap}#header .details span:first-child{margin-left:-0.125em}#header .details span.email a{color:rgba(0,0,0,0.85)}#header .details br{display:none}#header .details br+span::before{content:" – "}#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,0.85)}#header .details br+span#revremark::before{content:" | "}#header #revnumber{text-transform:capitalize}#header #revnumber::after{content:" "}#content>h1:first-child:not([class]){color:rgba(0,0,0,0.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}#toc{border-bottom:1px solid #e7e7e9;padding-bottom:0.5em}#toc>ul{margin-left:0.125em}#toc ul.sectlevel0>li>a{font-style:italic}#toc ul.sectlevel0 ul.sectlevel1{margin:0.5em 0}#toc ul{font-family:"Open Sans", "DejaVu Sans", sans-serif;list-style-type:none}#toc li{line-height:1.3334;margin-top:0.3334em}#toc a{text-decoration:none}#toc a:active{text-decoration:underline}#toctitle{color:#7a2518;font-size:1.2em}@media screen and (min-width: 768px){#toctitle{font-size:1.375em}body.toc2{padding-left:15em;padding-right:0}#toc.toc2{margin-top:0 !important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0 !important;border-bottom-width:0 !important;z-index:1000;padding:1.25em 1em;height:calc(100% - (70px + 2.5em));overflow:auto}#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}#toc.toc2>ul{font-size:.9em;margin-bottom:0}#toc.toc2 ul ul{margin-left:0;padding-left:1em}#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:0.5em}body.toc2.toc-right{padding-left:0;padding-right:15em}body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}@media screen and (min-width: 1280px){body.toc2{padding-left:20em;padding-right:0}#toc.toc2{width:20em}#toc.toc2 #toctitle{font-size:1.375em}#toc.toc2>ul{font-size:0.95em}#toc.toc2 ul ul{padding-left:1.25em}body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}#content #toc>:first-child{margin-top:0}#content #toc>:last-child{margin-bottom:0}#footer{max-width:none;background:#025d8c;padding:1.25em;margin-left:2em}#footer-text{color:rgba(255,255,255,0.8);line-height:1.44}h1:before,h2:before,h3:before,h4:before,h5:before,h6:before,div.title:before{display:block;content:" ";height:90px;margin-top:-90px;visibility:hidden}.sect1{padding-bottom:0.625em}@media screen and (min-width: 768px){#content{margin-bottom:1.25em}.sect1{padding-bottom:1.25em}}.sect1:last-child{padding-bottom:0}.sect1+.sect1{border-top:1px solid #e7e7e9}#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none !important;visibility:hidden;text-align:center;font-weight:400}#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:0.1em}#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}details{margin-left:1.25rem}details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}details>summary::-webkit-details-marker{display:none}details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif", "DejaVu Serif", serif;font-size:1rem;font-style:italic}table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,0.85)}.admonitionblock>table{border-collapse:separate;border:1;background:none;width:100%}.admonitionblock>table td.icon{text-align:center;width:80px}.admonitionblock>table td.icon img{max-width:none}.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans", "DejaVu Sans", sans-serif;text-transform:uppercase}.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,0.6);word-wrap:anywhere}.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}.exampleblock>.content{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#fffef7;border-radius:4px;box-shadow:0 1px 4px #e0e0dc}.exampleblock>.content>:first-child{margin-top:0}.exampleblock>.content>:last-child{margin-bottom:0}.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}.sidebarblock>:first-child{margin-top:0}.sidebarblock>:last-child{margin-bottom:0}.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:0.8125em}@media screen and (min-width: 768px){.literalblock pre,.listingblock>.content>pre{font-size:0.90625em}}@media screen and (min-width: 1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,0.9)}.listingblock>.content{position:relative}.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:0.5}.listingblock:hover code[data-lang]::before{display:block}.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:0.5}.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}.listingblock pre.highlightjs{padding:0}.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}.listingblock pre.prettyprint{border-width:0}.prettyprint{background:#f7f7f8}pre.prettyprint .linenums{line-height:1.45;margin-left:2em}pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}pre.prettyprint li code[data-lang]::before{opacity:1}pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}table.linenotable td.code{padding-left:0.75em}table.linenotable td.linenos{width:0.01%}table.linenotable td.linenos,pre.pygments .linenos,pre.rouge .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}pre.pygments span.linenos,pre.rouge span.linenos{display:inline-block;margin-right:0.75em}.quoteblock{margin:0 1em 1.25em 1.5em;display:table}.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:0.75em}.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,0.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}.quoteblock blockquote{margin:0;padding:0;border:0}.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,0.1)}.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}.verseblock{margin:0 1em 1.25em}.verseblock pre{font-family:"Open Sans", "DejaVu Sans", sans-serif;font-size:1.15rem;color:rgba(0,0,0,0.85);font-weight:300;text-rendering:optimizeLegibility}.verseblock pre strong{font-weight:400}.verseblock .attribution{margin-top:1.25rem;margin-left:0.5ex}.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}.quoteblock .attribution br,.verseblock .attribution br{display:none}.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,0.6)}.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}.quoteblock.abstract{margin:0 1em 1.25em;display:block}.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:0.25em solid #dddddf}.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}p.tableblock:last-child{margin-bottom:0}td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}td.tableblock>.content>:last-child{margin-bottom:-1.25em}table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}table.grid-all>*>tr>*{border-width:1px}table.grid-cols>*>tr>*{border-width:0 1px}table.grid-rows>*>tr>*{border-width:1px 0}table.frame-all{border-width:1px}table.frame-ends{border-width:1px 0}table.frame-sides{border-width:0 1px}table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}th.halign-left,td.halign-left{text-align:left}th.halign-right,td.halign-right{text-align:right}th.halign-center,td.halign-center{text-align:center}th.valign-top,td.valign-top{vertical-align:top}th.valign-bottom,td.valign-bottom{vertical-align:bottom}th.valign-middle,td.valign-middle{vertical-align:middle}table thead th,table tfoot th{font-weight:bold}tbody tr th{background:#f7f8f7}tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,0.8);font-weight:bold}p.tableblock>code:only-child{background:none;padding:0}p.tableblock{font-size:1em}ol{margin-left:1.75em}ul li ol{margin-left:1.5em}dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:0.625em}ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:0.625em}ul.unstyled,ol.unstyled{margin-left:0}li>p:empty:only-child::before{content:"";display:inline-block}ul.checklist>li>p:first-child{margin-left:-1em}ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:0.125em}ul.checklist>li>p:first-child>input[type=checkbox]:first-child{font:inherit;margin:0 .25em 0 0;padding:0}ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 0.625em -1.25em}ul.inline>li{margin-left:1.25em}.unstyled dl dt{font-weight:400;font-style:normal}ol.arabic{list-style-type:decimal}ol.decimal{list-style-type:decimal-leading-zero}ol.loweralpha{list-style-type:lower-alpha}ol.upperalpha{list-style-type:upper-alpha}ol.lowerroman{list-style-type:lower-roman}ol.upperroman{list-style-type:upper-roman}ol.lowergreek{list-style-type:lower-greek}.hdlist>table,.colist>table{border:0;background:none}.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}td.hdlist1,td.hdlist2{vertical-align:top;padding:0 0.625em}td.hdlist1{font-weight:bold;padding-bottom:1.25em}td.hdlist2{word-wrap:anywhere}.literalblock+.colist,.listingblock+.colist{margin-top:-0.5em}.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}.colist td:not([class]):first-child img{max-width:none}.colist td:not([class]):last-child{padding:0.25em 0}.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}.imageblock.left{margin:0.25em 0.625em 1.25em 0}.imageblock.right{margin:0.25em 0 1.25em 0.625em}.imageblock>.title{margin-bottom:0}.imageblock.thumb,.imageblock.th{border-width:6px}.imageblock.thumb>.title,.imageblock.th>.title{padding:0 0.125em}.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}.image.left{margin-right:0.625em}.image.right{margin-left:0.625em}a.image{text-decoration:none;display:inline-block}a.image object{pointer-events:none}sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}sup.footnote a,sup.footnoteref a{text-decoration:none}sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:0.625em}#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:0.2em}#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}#footnotes .footnote:last-of-type{margin-bottom:0}#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:0.75em 0}div.page-break{display:none}div.unbreakable{page-break-inside:avoid}.big{font-size:larger}.small{font-size:smaller}.underline{text-decoration:underline}.overline{text-decoration:overline}.line-through{text-decoration:line-through}.aqua{color:#00bfbf}.aqua-background{background:#00fafa}.black{color:#000}.black-background{background:#000}.blue{color:#0000bf}.blue-background{background:#0000fa}.fuchsia{color:#bf00bf}.fuchsia-background{background:#fa00fa}.gray{color:#606060}.gray-background{background:#7d7d7d}.green{color:#006000}.green-background{background:#007d00}.lime{color:#00bf00}.lime-background{background:#00fa00}.maroon{color:#600000}.maroon-background{background:#7d0000}.navy{color:#000060}.navy-background{background:#00007d}.olive{color:#606000}.olive-background{background:#7d7d00}.purple{color:#600060}.purple-background{background:#7d007d}.red{color:#bf0000}.red-background{background:#fa0000}.silver{color:#909090}.silver-background{background:#bcbcbc}.teal{color:#006060}.teal-background{background:#007d7d}.white{color:#bfbfbf}.white-background{background:#fafafa}.yellow{color:#bfbf00}.yellow-background{background:#fafa00}span.icon>.fa{cursor:default}a span.icon>.fa{cursor:inherit}.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,0.5);cursor:default}.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,0.8);color:#111}.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}.conum[data-value]{display:inline-block;color:#fff !important;background:rgba(0,0,0,0.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans", "DejaVu Sans", sans-serif;font-style:normal;font-weight:bold}.conum[data-value] *{color:#fff !important}.conum[data-value]+b{display:none}.conum[data-value]::after{content:attr(data-value)}pre .conum[data-value]{position:relative;top:-0.125em}b.conum *{color:inherit !important}.conum:not([data-value]):empty{display:none}dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}h1,h2,p,td.content,span.alt,summary{letter-spacing:-0.01em}p strong,td.content strong,div.footnote strong{letter-spacing:-0.005em}p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}.print-only{display:none !important}@page{margin:1.25cm 0.75cm}@media print{*{box-shadow:none !important;text-shadow:none !important}html{font-size:80%}a{color:inherit !important;text-decoration:underline !important}a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none !important}a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:0.25em}abbr[title]{border-bottom:1px dotted}abbr[title]::after{content:" (" attr(title) ")"}pre,blockquote,tr,img,object,svg{page-break-inside:avoid}thead{display:table-header-group}p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}body>div[id]{max-width:none}#toc,.sidebarblock,.exampleblock>.content{background:none !important}#toc{border-bottom:1px solid #dddddf !important;padding-bottom:0 !important}body.book #header{text-align:center}body.book #header>h1:first-child{border:0 !important;margin:2.5em 0 1em}body.book #header .details{border:0 !important;display:block;padding:0 !important}body.book #header .details span:first-child{margin-left:0 !important}body.book #header .details br{display:block}body.book #header .details br+span::before{content:none !important}body.book #toc{border:0 !important;text-align:left !important;padding:0 !important;margin:0 !important}body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}.listingblock code[data-lang]::before{display:block}div.page-break{display:block;page-break-after:always}#footer{padding:0 0.9375em}.hide-on-print{display:none !important}.print-only{display:block !important}.hide-for-print{display:none !important}.show-for-print{display:inherit !important}}@media amzn-kf8, print{#header>h1:first-child{margin-top:1.25rem}.sect1{padding:0 !important}.sect1+.sect1{border:0}#footer{background:none}#footer-text{color:rgba(0,0,0,0.6);font-size:0.9em}}@media amzn-kf8{body>div[id]{padding:0}}body{padding:0;margin:0;margin-top:70px !important}.container{position:relative;z-index:1;padding-top:50px;min-height:100%}.container p{font-family:sans-serif;font-size:1.2em}nav{position:fixed;z-index:9999;left:0;right:0;top:0;height:70px;padding:0 1.5em;background-color:#025d8c;font-family:sans-serif;line-height:70px}nav .logo{width:50px;vertical-align:middle}nav .nav-menu{position:absolute;right:0.3em;top:0;padding:0;margin:0;list-style:none}nav .nav-item{display:inline-block}nav .nav-item>a{display:inline-block;padding:0 2.5em;line-height:70px;color:#fff;text-decoration:none}nav .dropdown{position:relative}nav .dropdown a::after{content:"";display:inline-block;margin-left:0.5em;vertical-align:middle;border-top:0.3em solid #fff;border-right:0.3em solid transparent;border-left:0.3em solid transparent}nav .dropdown.show a::after{transform:rotate(180deg)}nav .dropdown-menu{display:none;position:absolute;left:0;right:0;top:100%;padding:0.5em 0;margin-top:-0.5em;border:1px solid rgba(0,0,0,0.3);border-radius:0.5em;background-color:#fff;width:max-content;max-height:80vh;overflow:scroll}nav .dropdown-menu-left{left:auto;right:0}nav .dropdown.show .dropdown-menu{display:block}nav .dropdown-div{display:block;padding:0.4em 0;line-height:4em}nav .dropdown-div a::after{content:none;margin-left:0;border-top:0;border-right:0;border-left:0}nav .dropdown-item{display:block;padding:0 1.5em;font-size:0.875em;color:#000;line-height:1.6em;text-decoration:none}nav .btn-hamburger{display:none;position:absolute;right:1.5em;top:50%;background-color:transparent;border:0;cursor:pointer;outline:none;transform:translateY(-50%)}nav .btn-hamburger span{display:block;width:30px;height:4px;background-color:#fff;margin:6px;border-radius:2px;transition:0.3s ease-in-out}nav .btn-hamburger span:nth-child(4),nav .btn-hamburger span:nth-child(5){position:absolute;top:10px;opacity:0.5}nav .btn-hamburger span:nth-child(4){transform:rotate(45deg) scale(0)}nav .btn-hamburger span:nth-child(5){transform:rotate(-45deg) scale(0)}nav.opened .btn-hamburger span:nth-child(4){opacity:1;transform:rotate(45deg) scale(1)}nav.opened .btn-hamburger span:nth-child(5){opacity:1;transform:rotate(-45deg) scale(1)}nav.opened .btn-hamburger span:nth-child(1),nav.opened .btn-hamburger span:nth-child(2),nav.opened .btn-hamburger span:nth-child(3){opacity:0}@media screen and (max-width: 768px){nav .nav-menu{position:fixed;left:0;right:0;top:70px;bottom:100%;display:flex;flex-direction:column;justify-content:start;background-color:#363d4e;transition:bottom 0.5s ease-in-out;overflow:hidden}nav.opened .nav-menu{bottom:0}nav .nav-item>a{display:block}nav .dropdown-menu{position:relative;top:0;margin:0 1.5em}nav .btn-hamburger{display:block}}/*!
* "Fork me on GitHub" CSS ribbon v0.2.3 | MIT License
* https://github.com/simonwhitaker/github-fork-ribbon-css

The MIT License (MIT)

Copyright (c) 2013 Simon Whitaker

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/.github-fork-ribbon,.release-ribbon,.issue-ribbon{width:12.1em;height:12.1em;position:absolute;overflow:hidden;top:70px;right:0;z-index:9998;pointer-events:none;font-size:13px;text-decoration:none;text-indent:-999999px}.github-fork-ribbon.fixed,.fixed.release-ribbon,.fixed.issue-ribbon{position:fixed}.github-fork-ribbon:hover,.release-ribbon:hover,.issue-ribbon:hover,.github-fork-ribbon:active,.release-ribbon:active,.issue-ribbon:active{background-color:transparent}.github-fork-ribbon:before,.release-ribbon:before,.issue-ribbon:before,.github-fork-ribbon:after,.release-ribbon:after,.issue-ribbon:after{position:absolute;display:block;width:15.38em;height:1.54em;top:3.23em;right:-3.23em;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.github-fork-ribbon:before,.release-ribbon:before,.issue-ribbon:before{content:"";padding:.38em 0;background-color:#a00;background-image:-webkit-gradient(linear, left top, left bottom, from(transparent), to(rgba(0,0,0,0.15)));background-image:-webkit-linear-gradient(top, transparent, rgba(0,0,0,0.15));background-image:-moz-linear-gradient(top, transparent, rgba(0,0,0,0.15));background-image:-ms-linear-gradient(top, transparent, rgba(0,0,0,0.15));background-image:-o-linear-gradient(top, transparent, rgba(0,0,0,0.15));background-image:linear-gradient(to bottom, transparent, rgba(0,0,0,0.15));-webkit-box-shadow:0 0.15em 0.23em 0 rgba(0,0,0,0.5);-moz-box-shadow:0 0.15em 0.23em 0 rgba(0,0,0,0.5);box-shadow:0 0.15em 0.23em 0 rgba(0,0,0,0.5);pointer-events:auto}.github-fork-ribbon:after,.release-ribbon:after,.issue-ribbon:after{content:attr(data-ribbon);color:#fff;font:700 1em "Helvetica Neue", Helvetica, Arial, sans-serif;line-height:1.54em;text-decoration:none;text-shadow:0 -0.08em rgba(0,0,0,0.5);text-align:center;text-indent:0;padding:.15em 0;margin:.15em 0;border-width:.08em 0;border-style:dotted;border-color:#fff;border-color:rgba(255,255,255,0.7)}.github-fork-ribbon.left-top,.left-top.release-ribbon,.left-top.issue-ribbon,.github-fork-ribbon.left-bottom,.left-bottom.release-ribbon,.left-bottom.issue-ribbon{right:auto;left:0}.github-fork-ribbon.left-bottom,.left-bottom.release-ribbon,.left-bottom.issue-ribbon,.github-fork-ribbon.right-bottom,.right-bottom.release-ribbon,.right-bottom.issue-ribbon{top:auto;bottom:0}.github-fork-ribbon.left-top:before,.left-top.release-ribbon:before,.left-top.issue-ribbon:before,.github-fork-ribbon.left-top:after,.left-top.release-ribbon:after,.left-top.issue-ribbon:after,.github-fork-ribbon.left-bottom:before,.left-bottom.release-ribbon:before,.left-bottom.issue-ribbon:before,.github-fork-ribbon.left-bottom:after,.left-bottom.release-ribbon:after,.left-bottom.issue-ribbon:after{right:auto;left:-3.23em}.github-fork-ribbon.left-bottom:before,.left-bottom.release-ribbon:before,.left-bottom.issue-ribbon:before,.github-fork-ribbon.left-bottom:after,.left-bottom.release-ribbon:after,.left-bottom.issue-ribbon:after,.github-fork-ribbon.right-bottom:before,.right-bottom.release-ribbon:before,.right-bottom.issue-ribbon:before,.github-fork-ribbon.right-bottom:after,.right-bottom.release-ribbon:after,.right-bottom.issue-ribbon:after{top:auto;bottom:3.23em}.github-fork-ribbon.left-top:before,.left-top.release-ribbon:before,.left-top.issue-ribbon:before,.github-fork-ribbon.left-top:after,.left-top.release-ribbon:after,.left-top.issue-ribbon:after,.github-fork-ribbon.right-bottom:before,.right-bottom.release-ribbon:before,.right-bottom.issue-ribbon:before,.github-fork-ribbon.right-bottom:after,.right-bottom.release-ribbon:after,.right-bottom.issue-ribbon:after{-webkit-transform:rotate(-45deg);-moz-transform:rotate(-45deg);-ms-transform:rotate(-45deg);-o-transform:rotate(-45deg);transform:rotate(-45deg)}.release-ribbon:before{background-color:#a00}.issue-ribbon:before{background-color:#025d8c}@media screen{div.narrow{max-width:1080px;margin:0 auto !important;margin-top:70px auto !important;float:none !important}#toc.toc2{margin-top:70px !important}}._abstract{border-left:4px solid #025d8c;border-radius:4px;padding-left:1.25em}

</style>
<!-- Generate a nice TOC -->
<script src="/js/jquery-1.11.3.min.js"></script>
<script src="/js/jquery-ui.min.js"></script>
<script src="/js/jquery.tocify.min.js"></script>
<!-- We do not need the tocify CSS because the asciidoc CSS already provides most of what we need -->

<style>
.tocify-header {
    /* font-style: italic; */
}

.tocify-subheader {
    font-style: normal;
    font-size: 95%;
}

.tocify ul {
    margin: 0;
 }

.tocify-focus {
    /* background-color: rgba(0, 0, 0, 0.05);*/
}

.tocify-focus > a {
    color: #ba3925;
}
</style>

<script type="text/javascript">
    $(function () {
        // Add a new container for the tocify toc into the existing toc so we can re-use its
        // styling
        $("#toc").append("<div id='generated-toc'></div>");
        $("#generated-toc").tocify({
            extendPage: true,
            context: "#content",
            highlightOnScroll: true,
            hideEffect: "slideUp",
            // Use the IDs that asciidoc already provides so that TOC links and intra-document
            // links are the same. Anything else might confuse users when they create bookmarks.
            hashGenerator: function(text, element) {
                return $(element).attr("id");
            },
            // Smooth scrolling doesn't work properly if we use the asciidoc IDs
            smoothScroll: false,
            // Set to 'none' to use the tocify classes
            theme: "none",
            // Handle book (may contain h1) and article (only h2 deeper)
            selectors: $( "#content" ).has( "h1" ).size() > 0 ? "h1,h2,h3,h4,h5" : "h2,h3,h4,h5",
            ignoreSelector: ".discrete"
        });

        // Switch between static asciidoc toc and dynamic tocify toc based on browser size
        // This is set to match the media selectors in the asciidoc CSS
        // Without this, we keep the dynamic toc even if it is moved from the side to preamble
        // position which will cause odd scrolling behavior
        var handleTocOnResize = function() {
            if ($(document).width() < 768) {
                $("#generated-toc").hide();
                $(".sectlevel0").show();
                $(".sectlevel1").show();
            }
            else {
                $("#generated-toc").show();
                $(".sectlevel0").hide();
                $(".sectlevel1").hide();
            }
        }

        $(window).resize(handleTocOnResize);
        handleTocOnResize();
    });
</script>
<style>
/*! Asciidoctor Tabs | Copyright (c) 2018-present Dan Allen | MIT License */
.tabs {
  margin-bottom: 1.25em;
}

.tablist > ul {
  display: flex;
  flex-wrap: wrap;
  list-style: none;
  margin: 0;
  padding: 0;
}

.tablist > ul li {
  align-items: center;
  background-color: #fff;
  cursor: pointer;
  display: flex;
  font-weight: bold;
  line-height: 1.5;
  padding: 0.25em 1em;
  position: relative;
}

.tablist > ul li:focus-visible {
  outline: none;
}

.tablist.ulist,
.tablist.ulist > ul li {
  margin: 0;
}

.tablist.ulist > ul li + li {
  margin-left: 0.25em;
}

.tabs .tablist li::after {
  content: "";
  display: block;
  height: 1px;
  position: absolute;
  bottom: -1px;
  left: 0;
  right: 0;
}

.tabs.is-loading .tablist li:not(:first-child),
.tabs:not(.is-loading) .tablist li:not(.is-selected) {
  background-color: #f5f5f5;
}

.tabs.is-loading .tablist li:first-child::after,
.tabs:not(.is-loading) .tablist li.is-selected::after {
  background-color: #fff;
}

/*
.tabs:not(.is-loading) .tablist li,
.tabs:not(.is-loading) .tablist li::after {
  transition: background-color 200ms ease-in-out;
}
*/

.tablist > ul p {
  line-height: inherit;
  margin: 0;
}

.tabpanel {
  background-color: #fff;
  padding: 1.25em;
}

.tablist > ul li,
.tabpanel {
  border: 1px solid #dcdcdc;
}

.tablist > ul li {
  border-bottom: 0;
}

.tabs.is-loading .tabpanel + .tabpanel,
.tabs:not(.is-loading) .tabpanel.is-hidden {
  display: none;
}

.tabpanel > :first-child {
  margin-top: 0;
}

/* #content is a signature of the Asciidoctor standalone HTML output */
#content .tabpanel > :last-child,
#content .tabpanel > :last-child > :last-child,
#content .tabpanel > :last-child > :last-child > li:last-child > :last-child {
  margin-bottom: 0;
}

.tablecontainer {
  overflow-x: auto;
}

#content .tablecontainer {
  margin-bottom: 1.25em;
}

#content .tablecontainer > table.tableblock {
  margin-bottom: 0;
}
</style>
</head>
<body class="book toc2 toc-left">
    <div id="wrap">
      <script src="/js/versions.js"></script>
      <script src="/js/nav.js"></script>
      <script>
        document.open();
        document.write(buildNavigation());
        addNavbarListeners();
        document.close();
      </script>
    </div>
<div id="header">
<h1>Integrating provisioning infrastructure services</h1>
<div class="details">
<span id="revnumber">version 3.17,</span>
<span id="revdate">published Feb 25 2026</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#configuring-dns-integration">1. Configuring DNS integration</a>
<ul class="sectlevel2">
<li><a href="#dns-service-providers">1.1. DNS service providers</a></li>
<li><a href="#enabling-the-installer-managed-dns-service">1.2. Enabling the installer-managed DNS service</a></li>
<li><a href="#integrating-a-local-self-managed-dns-service">1.3. Integrating a local self-managed DNS service</a></li>
<li><a href="#integrating-a-generic-rfc-2136-compatible-remote-dns-server">1.4. Integrating a generic RFC 2136-compatible remote DNS server</a></li>
<li><a href="#integrating-idm-dns-with-tsig-authentication">1.5. Integrating FreeIPA DNS with TSIG authentication</a></li>
<li><a href="#integrating-idm-dns-update-with-gss-tsig-authentication">1.6. Integrating FreeIPA DNS with GSS-TSIG authentication</a>
<ul class="sectlevel3">
<li><a href="#configuring-freeipa-to-use-with-foreman-server">1.6.1. Configuring FreeIPA to use with Foreman&#160;server</a></li>
<li><a href="#configuring-smart-proxy-for-use-with-freeipa">1.6.2. Configuring Smart&#160;Proxies for use with FreeIPA</a></li>
</ul>
</li>
<li><a href="#integrating-infoblox-dns">1.7. Integrating Infoblox DNS</a></li>
<li><a href="#integrating-the-libvirt-api-to-manage-dns-records">1.8. Integrating the libvirt API to manage DNS records</a></li>
<li><a href="#integrating-powerdns">1.9. Integrating PowerDNS</a></li>
<li><a href="#integrating-route-53">1.10. Integrating Route 53 DNS</a></li>
<li><a href="#associating-the-dns-service-with-a-domain-and-subnet">1.11. Associating the DNS service with a domain and subnet</a></li>
<li><a href="#disabling-dns-for-integration">1.12. Disabling DNS for integration</a></li>
</ul>
</li>
<li><a href="#configuring-dhcp-integration">2. Configuring DHCP integration</a>
<ul class="sectlevel2">
<li><a href="#dhcp-service-providers">2.1. DHCP service providers</a></li>
<li><a href="#enabling-the-installer-managed-dhcp-service">2.2. Enabling the installer-managed DHCP service</a></li>
<li><a href="#integrating-a-remote-isc-dhcp-server">2.3. Integrating a remote ISC DHCP server</a>
<ul class="sectlevel3">
<li><a href="#enabling-omapi-authentication-in-isc-dhcp">2.3.1. Enabling OMAPI authentication in ISC DHCP</a></li>
<li><a href="#sharing-the-dhcp-configuration-files-and-lease-database-over-nfs">2.3.2. Sharing the DHCP configuration files and lease database over NFS</a></li>
<li><a href="#configuring-server-or-proxy-for-use-with-isc-dhcp">2.3.3. Configuring Foreman&#160;server or Smart&#160;Proxy&#160;server for use with ISC DHCP</a></li>
</ul>
</li>
<li><a href="#integrating-infoblox-dhcp">2.4. Integrating Infoblox DHCP</a></li>
<li><a href="#integrating-the-libvirt-api-to-manage-dhcp-leases">2.5. Integrating the libvirt API to manage DHCP leases</a></li>
<li><a href="#associating-the-dhcp-service-with-a-subnet">2.6. Associating the DHCP service with a subnet</a></li>
<li><a href="#disabling-dhcp-for-integration">2.7. Disabling DHCP for integration</a></li>
<li><a href="#troubleshooting-dhcp-problems">2.8. Troubleshooting DHCP problems</a></li>
</ul>
</li>
<li><a href="#configuring-tftp-integration">3. Configuring TFTP integration</a>
<ul class="sectlevel2">
<li><a href="#enabling-the-installer-managed-tftp-service">3.1. Enabling the installer-managed TFTP service</a></li>
<li><a href="#integrating-a-generic-tftp-server">3.2. Integrating a generic TFTP server</a>
<ul class="sectlevel3">
<li><a href="#configuring-server-for-use-with-tftp">3.2.1. Configuring Foreman&#160;server for use with tftp</a></li>
</ul>
</li>
<li><a href="#associating-the-tftp-service-with-a-subnet">3.3. Associating the TFTP service with a subnet</a></li>
<li><a href="#disabling-tftp-for-integration">3.4. Disabling TFTP for integration</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="configuring-dns-integration"><a class="anchor" href="#configuring-dns-integration"></a>1. Configuring DNS integration</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>You can integrate DNS with Foreman to automate the creation and management of DNS records when provisioning, modifying, and decommissioning hosts.
This helps to ensure a consistent and error-free network configuration.</p>
</div>
<div class="sect2">
<h3 id="dns-service-providers"><a class="anchor" href="#dns-service-providers"></a>1.1. DNS service providers</h3>
<div class="paragraph _abstract">
<p>Smart&#160;Proxy supports the following DNS providers that you can use to integrate Foreman with your existing DNS infrastructure or deploy a new one:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>dns_nsupdate</code></dt>
<dd>
<p>Dynamic DNS updates on an <a href="https://datatracker.ietf.org/doc/html/rfc2136">RFC 2136</a>-compatible DNS server by using the <code>nsupdate</code> utility.
See:</p>
<div class="ulist">
<ul>
<li>
<p><a href="#enabling-the-installer-managed-dns-service">Enabling the installer-managed DNS service</a></p>
</li>
<li>
<p><a href="#integrating-a-local-self-managed-dns-service">Integrating a local self-managed DNS service</a></p>
</li>
<li>
<p><a href="#integrating-a-generic-rfc-2136-compatible-remote-dns-server">Integrating a generic RFC 2136-compatible remote DNS server</a></p>
</li>
<li>
<p><a href="#integrating-idm-dns-with-tsig-authentication">Integrating FreeIPA DNS with TSIG authentication</a>.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code>dns_nsupdate_gss</code></dt>
<dd>
<p>Dynamic DNS updates on an <a href="https://datatracker.ietf.org/doc/html/rfc2136">RFC 2136</a>-compatible DNS server by using the <code>nsupdate</code> utility with Generic Security Service algorithm for Transaction Signature (GSS-TSIG) authentication.
See <a href="#integrating-idm-dns-update-with-gss-tsig-authentication">Integrating FreeIPA DNS with GSS-TSIG authentication</a>.</p>
</dd>
<dt class="hdlist1"><code>dns_infoblox</code></dt>
<dd>
<p>Dynamic DNS updates on an Infoblox DNS server.
See <a href="#integrating-infoblox-dns">Integrating Infoblox DNS</a>.</p>
</dd>
<dt class="hdlist1"><code>dns_libvirt</code></dt>
<dd>
<p>Dynamic DNS updates on a dnsmasq DNS server by using the <code>libvirt</code> API.
See <a href="#integrating-the-libvirt-api-to-manage-dns-records">Integrating the libvirt API to manage DNS records</a>.</p>
</dd>
<dt class="hdlist1"><code>dns_powerdns</code></dt>
<dd>
<p>Dynamic DNS updates on a PowerDNS server.
See <a href="#integrating-powerdns">Integrating PowerDNS</a>.</p>
</dd>
<dt class="hdlist1"><code>dns_route53</code></dt>
<dd>
<p>Dynamic DNS updates on an Amazon Route 53 DNS server.
See <a href="#integrating-route-53">Integrating Route 53 DNS</a>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="enabling-the-installer-managed-dns-service"><a class="anchor" href="#enabling-the-installer-managed-dns-service"></a>1.2. Enabling the installer-managed DNS service</h3>
<div class="paragraph _abstract">
<p>If you do not have a DNS server available in your network, you can use the installer-managed DNS service.
This feature enables you to provide a DNS service with low maintenance overhead.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Configure Foreman or Smart&#160;Proxy as DNS server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer \
--foreman-proxy-dns true \
--foreman-proxy-dns-provider nsupdate \
--foreman-proxy-dns-managed true \
--reset-foreman-proxy-dns-server</pre>
</div>
</div>
</li>
<li>
<p>For each affected Smart&#160;Proxy, update the configuration of that Smart&#160;Proxy in the Foreman web UI.
For more information, see <a href="#associating-the-dns-service-with-a-domain-and-subnet">Associating the DNS service with a domain and subnet</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="integrating-a-local-self-managed-dns-service"><a class="anchor" href="#integrating-a-local-self-managed-dns-service"></a>1.3. Integrating a local self-managed DNS service</h3>
<div class="paragraph _abstract">
<p>The installer exposes a limited feature set for the Foreman installer-managed DNS service.
For example, you can configure only a single forward DNS zone.
As an alternative, you can first use the installer-managed DNS and later convert it to a self-managed DNS server to bypass the limitations.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You installed and configured a DNS service on the Foreman&#160;server or Smart&#160;Proxy&#160;server host.</p>
</li>
<li>
<p>The DNS service supports <a href="https://datatracker.ietf.org/doc/html/rfc2136">RFC 2136</a>-compatible updates</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Set the local, self-managed DNS service on your Foreman&#160;server or Smart&#160;Proxy&#160;server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer \
--foreman-proxy-dns true \
--foreman-proxy-dns-provider nsupdate \
--foreman-proxy-dns-managed false \
--foreman-proxy-dns-server "127.0.0.1"</pre>
</div>
</div>
</li>
<li>
<p>For each affected Smart&#160;Proxy, update the configuration of that Smart&#160;Proxy in the Foreman web UI.
For more information, see <a href="#associating-the-dns-service-with-a-domain-and-subnet">Associating the DNS service with a domain and subnet</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="integrating-a-generic-rfc-2136-compatible-remote-dns-server"><a class="anchor" href="#integrating-a-generic-rfc-2136-compatible-remote-dns-server"></a>1.4. Integrating a generic RFC 2136-compatible remote DNS server</h3>
<div class="paragraph _abstract">
<p>If you have a DNS service in your network and it supports RFC 2136-compatible dynamic updates, you can integrate this service into your Foreman&#160;server.
The integration enables you to continue using your existing DNS server, and Foreman manages DNS records for hosts during their life cycle.</p>
</div>
<div class="paragraph">
<p>With this type of integration, Foreman uses a transaction signature (TSIG) key to authenticate to the DNS server and the <code>nsupdate</code> utility to manage DNS records.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The remote DNS service is configured and can be queried.</p>
</li>
<li>
<p>The remote DNS service supports RFC 2136-compatible dynamic updates</p>
</li>
<li>
<p>The Remote Name Daemon Control (RNDC) key file to connect to the remote DNS server is placed in <code>/etc/foreman-proxy/rndc.key</code> on your Foreman&#160;server or Smart&#160;Proxy&#160;server.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Update the permissions on <code>/etc/foreman-proxy/rndc.key</code> to enable members of the <code>foreman-proxy</code> group to read this file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># chown -v root:foreman-proxy /etc/foreman-proxy/rndc.key
# chmod -v 640 /etc/foreman-proxy/rndc.key</pre>
</div>
</div>
</li>
<li>
<p>Restore the SELinux context on <code>/etc/foreman-proxy/rndc.key</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># restorecon -v /etc/foreman-proxy/rndc.key</pre>
</div>
</div>
</li>
<li>
<p>Optional: Verify if you can use the key file to manually manage DNS entries:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Create a test DNS entry.
For example, host <code><em>test.example.com</em></code> with an <code>A</code> record of <code>192.168.25.20</code> on the DNS server at <code>192.168.25.1</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># echo -e "server 192.168.25.1\n \
update add <em>test.example.com</em> 3600 IN A 192.168.25.20\n \
send\n" | nsupdate -k /etc/foreman-proxy/rndc.key</pre>
</div>
</div>
</li>
<li>
<p>Verify that you can query the new DNS entry:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># host <em>test.example.com</em> 192.168.25.1</pre>
</div>
</div>
<div class="paragraph">
<p>Example output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-none" data-lang="none">Using domain server:
Name: 192.168.25.1
Address: 192.168.25.1#53
Aliases:

test.example.com has address 192.168.25.20</code></pre>
</div>
</div>
</li>
<li>
<p>If resolved successfully, remove the test DNS entry:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># echo -e "server 192.168.25.1\n \
update delete <em>test.example.com</em> 3600 IN A 192.168.25.20\n \
send\n" | nsupdate -k /etc/foreman-proxy/rndc.key</pre>
</div>
</div>
</li>
<li>
<p>Confirm that the DNS entry was removed:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># host <em>test.example.com</em> 192.168.25.1</pre>
</div>
</div>
<div class="paragraph">
<p>If the command returns <code>Host <em>test.example.com</em> not found: 3(NXDOMAIN)</code>, the record was successfully deleted.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Configure Foreman&#160;server or Smart&#160;Proxy&#160;server to use the DNS server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer \
--foreman-proxy-dns true \
--foreman-proxy-dns-provider nsupdate \
--foreman-proxy-dns-managed false \
--foreman-proxy-dns-server "<em>dns_server_ip_address</em>" \
--foreman-proxy-keyfile /etc/foreman-proxy/rndc.key</pre>
</div>
</div>
</li>
<li>
<p>For the affected Smart&#160;Proxy, update the configuration of that Smart&#160;Proxy in the Foreman web UI.
For more information, see <a href="#associating-the-dns-service-with-a-domain-and-subnet">Associating the DNS service with a domain and subnet</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="integrating-idm-dns-with-tsig-authentication"><a class="anchor" href="#integrating-idm-dns-with-tsig-authentication"></a>1.5. Integrating FreeIPA DNS with TSIG authentication</h3>
<div class="paragraph _abstract">
<p>If you use FreeIPA to centrally manage hosts in your domain, you can integrate the FreeIPA DNS service into Foreman&#160;server.
The integration enables you to continue using your existing FreeIPA DNS service, and Foreman manages DNS records for hosts during their life cycle.</p>
</div>
<div class="paragraph">
<p>If Foreman&#160;server or Smart&#160;Proxy&#160;server is not a member of a FreeIPA domain, use a transaction signature (TSIG) key to authenticate to the DNS server.
This method provides a lower security and an increased key management effort compared to dynamic updates with generic security service transaction signature (GSS-TSIG) authentication.
For more information, see <a href="#integrating-idm-dns-update-with-gss-tsig-authentication">Integrating FreeIPA DNS with GSS-TSIG authentication</a>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The FreeIPA server is deployed and functional.</p>
</li>
<li>
<p>The firewall on the FreeIPA server allows access to the required ports.
See <a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/installing_identity_management/preparing-the-system-for-ipa-server-installation_installing-identity-management#port-requirements-for-idm_preparing-the-system-for-ipa-server-installation">Port requirements for FreeIPA</a> in the <em>Red&#160;Hat Enterprise Linux&#160;9 Installing Identity Management guide</em>.</p>
</li>
<li>
<p>You have <code>root</code> access on the FreeIPA server.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Perform the following steps on the FreeIPA Server:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Insert the following settings at the top of the <code>/etc/named.conf</code> file:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-none" data-lang="none">include "/etc/rndc.key";
controls {
    inet <em>FreeIPA_server_ip_address</em> port 953 allow { <em>Foreman_ip_address</em>; } keys { "rndc-key"; };
};</code></pre>
</div>
</div>
</li>
<li>
<p>Reload the <code>named</code> service:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># systemctl reload named</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>In the FreeIPA web UI:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Navigate to <strong>Network Services</strong> &gt; <strong>DNS</strong> &gt; <strong>DNS Zones</strong></p>
</li>
<li>
<p>Click the name of the zone.</p>
</li>
<li>
<p>Open the <strong>Settings</strong> tab.</p>
</li>
<li>
<p>Enter in the <strong>BIND update policy</strong> field:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-none" data-lang="none">grant "rndc-key" zonesub ANY;</code></pre>
</div>
</div>
</li>
<li>
<p>Set <strong>Dynamic update</strong> to <strong>True</strong>.</p>
</li>
<li>
<p>Click <strong>Update</strong> to save the changes.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Configure dynamic DNS updates in Foreman&#160;server or Smart&#160;Proxy&#160;server.
For more information, see <a href="#integrating-a-generic-rfc-2136-compatible-remote-dns-server">Integrating a generic RFC 2136-compatible remote DNS server</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="integrating-idm-dns-update-with-gss-tsig-authentication"><a class="anchor" href="#integrating-idm-dns-update-with-gss-tsig-authentication"></a>1.6. Integrating FreeIPA DNS with GSS-TSIG authentication</h3>
<div class="paragraph _abstract">
<p>If you use FreeIPA to centrally manage hosts in your domain, you can integrate the FreeIPA DNS service into Foreman&#160;server.
The integration enables you to continue using your existing FreeIPA DNS service, and Foreman manages DNS records for hosts during their life cycle.</p>
</div>
<div class="paragraph">
<p>If Foreman&#160;server or Smart&#160;Proxy&#160;server is a member of a FreeIPA domain, use generic security service transaction signature (GSS-TSIG) authentication.
This method provides an increased security and a low key management effort compared to TSIG authentication.</p>
</div>
<div class="sect3">
<h4 id="configuring-freeipa-to-use-with-foreman-server"><a class="anchor" href="#configuring-freeipa-to-use-with-foreman-server"></a>1.6.1. Configuring FreeIPA to use with Foreman&#160;server</h4>
<div class="paragraph _abstract">
<p>Before you can integrate an existing FreeIPA DNS server, you must prepare the FreeIPA environment.
The preparation work enables Foreman&#160;server to use generic security service transaction signature (GSS-TSIG) authentication to update DNS entries.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The FreeIPA domain is deployed and functional.</p>
</li>
<li>
<p>FreeIPA is configured with its integrated DNS service.</p>
</li>
<li>
<p>The firewall on the FreeIPA servers allow access to the required ports.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux//9/html/installing_identity_management/preparing-the-system-for-ipa-server-installation_installing-identity-management#port-requirements-for-idm_preparing-the-system-for-ipa-server-installation">Port requirements for IdM</a> in <em>Red&#160;Hat Enterprise Linux&#160;9 Installing Identity Management</em>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>On a host that is a member of the FreeIPA domain, obtain a Kerberos ticket for the <code>admin</code> user:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># kinit admin</pre>
</div>
</div>
</li>
<li>
<p>Create a new Kerberos principal Foreman&#160;server to be used for authentication on the FreeIPA server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ipa service-add <em>smartproxy/foreman.example.com</em></pre>
</div>
</div>
</li>
<li>
<p>Optional: Add a forward DNS zone:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ipa dnszone-add <em>example.com</em></pre>
</div>
</div>
</li>
<li>
<p>Display the BIND update policy of the forward zone:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ipa dnszone-show <em>example.com</em> --all | \
grep "BIND update policy"</pre>
</div>
</div>
<div class="paragraph">
<p>Example output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-none" data-lang="none">BIND update policy: grant <em>EXAMPLE.COM</em> krb5-self * A; grant <em>EXAMPLE.COM</em> krb5-self * AAAA; grant <em>EXAMPLE.COM</em> krb5-self * SSHFP;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note the value of the setting.</p>
</div>
</li>
<li>
<p>Update the forward zone settings:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ipa dnszone-mod <em>example.com</em> \
--dynamic-update=TRUE \
--allow-sync-ptr=TRUE \
--update-policy="<em>&lt;existing_policy&gt;</em> <strong>grant <em>smartproxy\047foreman.example.com@EXAMPLE.COM</em> wildcard * ANY;</strong>"</pre>
</div>
</div>
<div class="paragraph">
<p>This command modifies the zone settings as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Dynamic zone updates are enabled.</p>
</li>
<li>
<p>FreeIPA updates the corresponding PTR record in the reverse DNS zone if an A or AAAA record is updated in the forward zone.</p>
</li>
<li>
<p>The Kerberos principal created in an earlier step is authorized to modify any type of any data record.
Note that you must append this setting to the existing value.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Optional: Add a reverse DNS zone:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ipa dnszone-add <em>0.168.192.in-addr.arpa</em></pre>
</div>
</div>
</li>
<li>
<p>Display the BIND update policy of the reverse zone:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ipa dnszone-show <em>0.168.192.in-addr.arpa</em> --all | \
grep "BIND update policy"</pre>
</div>
</div>
<div class="paragraph">
<p>Example output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-none" data-lang="none">BIND update policy: grant <em>EXAMPLE.COM</em> krb5-subdomain <em>0.168.192.in-addr.arpa.</em> PTR;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note the value of the setting.</p>
</div>
</li>
<li>
<p>Update the reverse zone settings:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ipa dnszone-mod <em>0.168.192.in-addr.arpa</em> \
--dynamic-update=TRUE \
--update-policy="<em>&lt;existing_policy&gt;</em> <strong>grant <em>smartproxy\047foreman.example.com@EXAMPLE.COM</em> wildcard * ANY;</strong>"</pre>
</div>
</div>
<div class="paragraph">
<p>Note that you must append the update policy to the existing value.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="configuring-smart-proxy-for-use-with-freeipa"><a class="anchor" href="#configuring-smart-proxy-for-use-with-freeipa"></a>1.6.2. Configuring Smart&#160;Proxies for use with FreeIPA</h4>
<div class="paragraph _abstract">
<p>After you have prepared the FreeIPA DNS server as described in <a href="#configuring-freeipa-to-use-with-foreman-server">Configuring FreeIPA to use with Foreman&#160;server</a>, integrate the DNS server into your Foreman&#160;server or Smart&#160;Proxy&#160;server.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You set the DNS search domain of the host to the FreeIPA DNS domain.</p>
</li>
<li>
<p>You know the Kerberos principal the host should use to authenticate to the FreeIPA DNS server, for example, <code><em>smartproxy/foreman.example.com</em></code>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>If your Foreman&#160;server or Smart&#160;Proxy&#160;server is not yet a member of the FreeIPA domain:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Install the <code>ipa-client</code> package:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf install ipa-client</pre>
</div>
</div>
</li>
<li>
<p>Install the FreeIPA client:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ipa-client-install</pre>
</div>
</div>
<div class="paragraph">
<p>Follow the on-screen prompts.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Obtain a Kerberos ticket for the <code>admin</code> user:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># kinit admin</pre>
</div>
</div>
</li>
<li>
<p>Remove the <code>/etc/foreman-proxy/dns.keytab</code> file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># rm --force /etc/foreman-proxy/dns.keytab</pre>
</div>
</div>
</li>
<li>
<p>Obtain a Kerberos keytab file for your Smart&#160;Proxy and store it in the <code>/etc/foreman-proxy/dns.keytab</code> file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ipa-getkeytab -p <em>smartproxy/foreman.example.com@EXAMPLE.COM</em> \
-k /etc/foreman-proxy/dns.keytab</pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>When adding a keytab to a standby system with the same host name as the original system in service, pass the <code>-r</code> option to the <code>ipa-getkeytab</code> command to prevent generating new credentials and rendering the credentials on the original system invalid.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Set the owner and group of <code>/etc/foreman-proxy/dns.keytab</code> to <code>foreman-proxy</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># chown foreman-proxy:foreman-proxy /etc/foreman-proxy/dns.keytab</pre>
</div>
</div>
</li>
<li>
<p>Verify that the <code>/etc/foreman-proxy/dns.keytab</code> file is valid:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Use the file to obtain a Kerberos ticket:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># kinit -kt /etc/foreman-proxy/dns.keytab \
<em>smartproxy/foreman.example.com@EXAMPLE.COM</em></pre>
</div>
</div>
</li>
<li>
<p>Display the Kerberos ticket:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># klist</pre>
</div>
</div>
<div class="paragraph">
<p>Example output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-none" data-lang="none">Ticket cache: KCM:0:50473
Default principal: smartproxy/foreman.example.com@EXAMPLE.COM

Valid starting       Expires              Service principal
05/20/2025 12:12:35  05/21/2025 11:54:31  krbtgt/EXAMPLE.COM@EXAMPLE.COM</code></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Configure Foreman&#160;server or Smart&#160;Proxy&#160;server to connect to the FreeIPA DNS service:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer \
--foreman-proxy-dns true \
--foreman-proxy-dns-provider nsupdate_gss \
--foreman-proxy-dns-managed false \
--foreman-proxy-dns-server "<em>freeipa-server.example.com</em>" \
--foreman-proxy-dns-tsig-keytab /etc/foreman-proxy/dns.keytab \
--foreman-proxy-dns-tsig-principal "<em>smartproxy/foreman.example.com@EXAMPLE.COM</em>"</pre>
</div>
</div>
</li>
<li>
<p>For each affected Smart&#160;Proxy, update the configuration of that Smart&#160;Proxy in the Foreman web UI.
For more information, see <a href="#associating-the-dns-service-with-a-domain-and-subnet">Associating the DNS service with a domain and subnet</a>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="integrating-infoblox-dns"><a class="anchor" href="#integrating-infoblox-dns"></a>1.7. Integrating Infoblox DNS</h3>
<div class="paragraph _abstract">
<p>If you have an Infoblox appliance in your network, you can integrate this service into Foreman&#160;server and Smart&#160;Proxy&#160;server by using the Infoblox Web API (WAPI)
The integration enables you to continue using your existing DNS server, and Foreman manages DNS records for hosts during their life cycle.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Integrating Infoblox DNS has the following limitations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can manage DNS entries only in a single view, and you cannot edit the view after you create it.</p>
</li>
<li>
<p>Foreman&#160;server uses the standard HTTPS web API to communicate with Infoblox.
By default, it communicates only with a single node.
If you require high availability, configure this feature in Infoblox.</p>
</li>
<li>
<p>You cannot integrate the Foreman IP address management (IPAM) feature into Infoblox.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have an Infoblox account with the roles <code>DHCP Admin</code> and <code>DNS Admin</code>.</p>
</li>
<li>
<p>The Infoblox roles have permissions or belong to an admin group that permits the accounts to perform tasks through the Infoblox API.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Download the certificate from the Infoblox server, and store it in the <code>/etc/pki/ca-trust/source/anchors/infoblox.crt</code> file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># openssl s_client -showcerts -connect <em>infoblox.example.com</em>:443 &lt;/dev/null | \
openssl x509 -text &gt;/etc/pki/ca-trust/source/anchors/infoblox.crt</pre>
</div>
</div>
<div class="paragraph">
<p>The hostname must match the one for the Infoblox application in the X.509 certificate.</p>
</div>
</li>
<li>
<p>Add the Infoblox certificate to the system truststore:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># update-ca-trust extract</pre>
</div>
</div>
</li>
<li>
<p>Test the CA certificate by using it in a query to the Infoblox API:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl -u admin:<em>password</em> https://<em>infoblox.example.com</em>/wapi/v2.0/network</pre>
</div>
</div>
<div class="paragraph">
<p>Example of a positive response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">[
    {
        "_ref": "network/ZG5zLm5ldHdvcmskMTkyLjE2OC4yMDIuMC8yNC8w:<em>infoblox.example.com</em>/24/default",
        "network": "192.168.202.0/24",
        "network_view": "default"
    }
]</pre>
</div>
</div>
</li>
<li>
<p>Configure Foreman&#160;server or Smart&#160;Proxy&#160;server to connect to the Infoblox DNS service:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer \
--foreman-proxy-dns true \
--foreman-proxy-dns-provider infoblox \
--enable-foreman-proxy-plugin-dns-infoblox \
--foreman-proxy-plugin-dns-infoblox-dns-server <em>infoblox.example.com</em> \
--foreman-proxy-plugin-dns-infoblox-username <em>admin</em> \
--foreman-proxy-plugin-dns-infoblox-password <em>password</em> \
--foreman-proxy-plugin-dns-infoblox-dns-view <em>view_name</em></pre>
</div>
</div>
<div class="paragraph">
<p>Omit the <code>--foreman-proxy-plugin-dns-infoblox-dns-view</code> option if you use the <code>default</code> view in Infoblox DNS.</p>
</div>
</li>
<li>
<p>For each affected Smart&#160;Proxy, update the configuration of that Smart&#160;Proxy in the Foreman web UI.
For more information, see <a href="#associating-the-dns-service-with-a-domain-and-subnet">Associating the DNS service with a domain and subnet</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="integrating-the-libvirt-api-to-manage-dns-records"><a class="anchor" href="#integrating-the-libvirt-api-to-manage-dns-records"></a>1.8. Integrating the libvirt API to manage DNS records</h3>
<div class="paragraph _abstract">
<p>If you manage VMs through the <code>libvirt</code> API, you can integrate the API into Foreman&#160;server to manage DNS records.
The integration enables you to continue using <code>dnsmasq</code> in <code>libvirt</code>, and Foreman manages DNS records for hosts during their life cycle.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Configure Foreman&#160;server or Smart&#160;Proxy&#160;server to connect to the <code>libvirt</code> API:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer \
--foreman-proxy-dns true \
--foreman-proxy-dns-provider libvirt \
--foreman-proxy-libvirt-network default \
--foreman-proxy-libvirt-connection qemu:///system</pre>
</div>
</div>
<div class="paragraph">
<p>Note that you can only use one network and URL for both the <code>dns_libvirt</code> and <code>dhcp_libvirt</code> providers.</p>
</div>
</li>
<li>
<p>For each affected Smart&#160;Proxy, update the configuration of that Smart&#160;Proxy in the Foreman web UI.
For more information, see <a href="#associating-the-dns-service-with-a-domain-and-subnet">Associating the DNS service with a domain and subnet</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="integrating-powerdns"><a class="anchor" href="#integrating-powerdns"></a>1.9. Integrating PowerDNS</h3>
<div class="paragraph _abstract">
<p>If you have a PowerDNS service in your network, you can integrate this service into Foreman&#160;server.
The integration enables you to continue using your existing DNS server, and Foreman manages DNS records for hosts during their life cycle.</p>
</div>
<div class="paragraph">
<p>With this type of integration, Foreman uses the PowerDNS REST API to authenticate and manage DNS records in local or remote PowerDNS instances.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Configure Foreman&#160;server or Smart&#160;Proxy&#160;server to connect to the PowerDNS service:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer \
--foreman-proxy-dns true \
--foreman-proxy-dns-provider powerdns \
--enable-foreman-proxy-plugin-dns-powerdns \
--foreman-proxy-plugin-dns-powerdns-rest-api-key <em>My_API_Key</em> \
--foreman-proxy-plugin-dns-powerdns-rest-url http://<em>powerdns.example.com</em>:8081/api/v1/servers/localhost</pre>
</div>
</div>
</li>
<li>
<p>For each affected Smart&#160;Proxy, update the configuration of that Smart&#160;Proxy in the Foreman web UI.
For more information, see <a href="#associating-the-dns-service-with-a-domain-and-subnet">Associating the DNS service with a domain and subnet</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="integrating-route-53"><a class="anchor" href="#integrating-route-53"></a>1.10. Integrating Route 53 DNS</h3>
<div class="paragraph _abstract">
<p>If you have an Amazon Route 53 DNS service in your network, you can integrate this service into Foreman&#160;server.
The integration enables you to continue using your existing DNS server, and Foreman manages DNS records for hosts during their life cycle.</p>
</div>
<div class="paragraph">
<p>With this type of integration, Foreman uses the Route 53 API to authenticate and manage DNS records in Amazon Web Services (AWS).</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Configure Foreman&#160;server or Smart&#160;Proxy&#160;server to connect to the Amazon Route 53 DNS service:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer \
--foreman-proxy-dns true \
--foreman-proxy-dns-provider route53 \
--enable-foreman-proxy-plugin-dns-route53 \
--foreman-proxy-plugin-dns-route53-aws-access-key <em>My_AWS_Access_Key</em> \
--foreman-proxy-plugin-dns-route53-aws-secret-key <em>My_AWS_Secret_Key</em></pre>
</div>
</div>
</li>
<li>
<p>For each affected Smart&#160;Proxy, update the configuration of that Smart&#160;Proxy in the Foreman web UI.
For more information, see <a href="#associating-the-dns-service-with-a-domain-and-subnet">Associating the DNS service with a domain and subnet</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="associating-the-dns-service-with-a-domain-and-subnet"><a class="anchor" href="#associating-the-dns-service-with-a-domain-and-subnet"></a>1.11. Associating the DNS service with a domain and subnet</h3>
<div class="paragraph _abstract">
<p>After you configured or changed the DNS provider, you must update the configuration of each affected Smart&#160;Proxy in the Foreman web UI.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You configured a DNS provider.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Configure the domain:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Foreman web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Domains</strong>.</p>
</li>
<li>
<p>Select the domain name.</p>
</li>
<li>
<p>On the <strong>Domain</strong> tab, ensure <strong>DNS Smart&#160;Proxy</strong> is set to the Smart&#160;Proxy where the subnet is connected.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Configure the subnet:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Navigate to <strong>Infrastructure</strong> &gt; <strong>Subnets</strong>.</p>
</li>
<li>
<p>Select the subnet name.</p>
</li>
<li>
<p>On the <strong>Domains</strong> tab, select the domains that are valid on the subnet.</p>
</li>
<li>
<p>In the <strong>Smart&#160;Proxies</strong> tab, ensure <strong>Reverse DNS Smart&#160;Proxy</strong> is set to the Smart&#160;Proxy where the subnet is connected.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="disabling-dns-for-integration"><a class="anchor" href="#disabling-dns-for-integration"></a>1.12. Disabling DNS for integration</h3>
<div class="paragraph _abstract">
<p>If you want to manually manage a DNS service and not integrate it into Foreman&#160;server, you must prevent Foreman from maintaining this service on the operating system and disable orchestration to avoid errors.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Disabling DNS in Foreman does not remove the related backend service on the operating system.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Subnets</strong>.</p>
</li>
<li>
<p>For each subnet that is associated with the DNS Smart&#160;Proxy:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Select the subnet.</p>
</li>
<li>
<p>On the <strong>Smart&#160;Proxies</strong> tab, clear the <strong>Reverse DNS Smart&#160;Proxy</strong> field.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Navigate to <strong>Infrastructure</strong> &gt; <strong>Domains</strong>.</p>
</li>
<li>
<p>For each domain that is associated with the DNS Smart&#160;Proxy:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Select the domain.</p>
</li>
<li>
<p>Clear the <strong>DNS Smart&#160;Proxy</strong> field.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>On Foreman&#160;server, enter:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --foreman-proxy-dns false</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Foreman does not perform orchestration when a Smart&#160;Proxy is not set for a given subnet and domain.
When you disable Smart&#160;Proxy associations, orchestration commands for existing hosts can fail if the expected records and configuration files are not present.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-dhcp-integration"><a class="anchor" href="#configuring-dhcp-integration"></a>2. Configuring DHCP integration</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>You can integrate DHCP with Foreman to automatically manage IP leases and boot configurations on a DHCP server during the provisioning of hosts.
This helps to simplify the automated provisioning of hosts.</p>
</div>
<div class="sect2">
<h3 id="dhcp-service-providers"><a class="anchor" href="#dhcp-service-providers"></a>2.1. DHCP service providers</h3>
<div class="paragraph _abstract">
<p>Smart&#160;Proxy supports the following DHCP providers that you can use to integrate Foreman with your existing DHCP infrastructure or deploy a new one:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>dhcp_isc</code></dt>
<dd>
<p>Managing IP leases on an ISC DHCP server by using the Object Management Application Programming Interface (OMAPI).
See <a href="#enabling-the-installer-managed-dhcp-service">Enabling the installer-managed DHCP service</a>.</p>
</dd>
<dt class="hdlist1"><code>dhcp_remote_isc</code></dt>
<dd>
<p>Managing IP leases on a remote ISC dhcpd server by using OMAPI.
This provider requires that you share the leases over the network, for example, with NFS.
See <a href="#integrating-a-remote-isc-dhcp-server">Integrating a remote ISC DHCP server</a>.</p>
</dd>
<dt class="hdlist1"><code>dhcp_infoblox</code></dt>
<dd>
<p>Managing IP leases on an Infoblox DHCP server.
See <a href="#integrating-infoblox-dhcp">Integrating Infoblox DHCP</a>.</p>
</dd>
<dt class="hdlist1"><code>dhcp_libvirt</code></dt>
<dd>
<p>Managing IP leases on a dnsmasq DHCP server by using the <code>libvirt</code> API.
See <a href="#integrating-the-libvirt-api-to-manage-dhcp-leases">Integrating the libvirt API to manage DHCP leases</a>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="enabling-the-installer-managed-dhcp-service"><a class="anchor" href="#enabling-the-installer-managed-dhcp-service"></a>2.2. Enabling the installer-managed DHCP service</h3>
<div class="paragraph _abstract">
<p>If you do not have a DHCP server available in your network, you can use the installer-managed DHCP service.
Therefore, you can run a DHCP service with a lower maintenance overhead.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You know the following network information:</p>
<div class="ulist">
<ul>
<li>
<p>The range of IP addresses the DHCP should manage</p>
</li>
<li>
<p>The IP address of the default gateway in the subnet</p>
</li>
<li>
<p>The IP addresses of the name servers for the subnet</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Configure Foreman&#160;server or Smart&#160;Proxy&#160;server as DHCP server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer \
--foreman-proxy-dhcp true \
--foreman-proxy-dhcp-provider isc \
--foreman-proxy-dhcp-managed true \
--foreman-proxy-dhcp-range "192.0.2.100 192.0.2.150" \
--foreman-proxy-dhcp-gateway 192.0.2.1 \
--foreman-proxy-dhcp-nameservers 192.0.2.2,192.0.2.3</pre>
</div>
</div>
</li>
<li>
<p>For each affected Smart&#160;Proxy, update the configuration of that Smart&#160;Proxy in the Foreman web UI. See <a href="#associating-the-dhcp-service-with-a-subnet">Associating the DHCP service with a subnet</a>.</p>
</li>
<li>
<p>Optional: Secure the <code>dhcpd</code> API on the Smart&#160;Proxy by using an Object Management Application Programming Interface (OMAPI) key:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Install the required package:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf install bind-utils</pre>
</div>
</div>
</li>
<li>
<p>Generate an OMAPI key:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># tsig-keygen -a <em>Algorithm_Name</em> <em>My_Key_Name</em></pre>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Use the following values in the command:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code><em>Algorithm_Name</em></code></dt>
<dd>
<p>Specifies the algorithm to be used to generate the key.
You can use any of the values specified in the <code>tsig-keygen(8)</code> man page on your system.
The default algorithm is HMAC-SHA256.</p>
</dd>
<dt class="hdlist1"><code><em>My_Key_Name</em></code></dt>
<dd>
<p>Specifies the name of the OMAPI key.
The default name is <code>tsig-key</code>.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>The command outputs key information in the following format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-none" data-lang="none">key "<em>My_Key_Name</em>" {
	algorithm <em>Algorithm_Name</em>;
	secret "<em>Key_Secret</em>";
};</code></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Add the information about the key from the command output to the Smart&#160;Proxy configuration:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer \
--foreman-proxy-dhcp-key-name "<em>My_Key_Name</em>" \
--foreman-proxy-dhcp-key-algorithm "<em>Algorithm_Name</em>" \
--foreman-proxy-dhcp-key-secret "<em>Key_Secret</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>If you use the default algorithm, which is HMAC-SHA256, you can omit the algorithm line from the configuration.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="integrating-a-remote-isc-dhcp-server"><a class="anchor" href="#integrating-a-remote-isc-dhcp-server"></a>2.3. Integrating a remote ISC DHCP server</h3>
<div class="paragraph _abstract">
<p>If you have an ISC DHCP server in your network, but not on the same host as your Foreman&#160;server, you can integrate this service into your Foreman&#160;server.
The integration enables you to continue using your existing DHCP server, and Foreman manages IP leases and boot configurations on the DHCP server during the provisioning of hosts.</p>
</div>
<div class="paragraph">
<p>With this type of integration, Foreman uses an Object Management Application Programming Interface (OMAPI) key to update leases and the Network File System (NFS) protocol to access the ISC DHCP server&#8217;s configuration files and lease database.</p>
</div>
<div class="sect3">
<h4 id="enabling-omapi-authentication-in-isc-dhcp"><a class="anchor" href="#enabling-omapi-authentication-in-isc-dhcp"></a>2.3.1. Enabling OMAPI authentication in ISC DHCP</h4>
<div class="paragraph _abstract">
<p>The integration of an existing remote ISC DHCP service requires that you enable the Object Management Application Programming Interface (OMAPI) in the DHCP service.
Foreman uses OMAPI to remotely manage DHCP server objects.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The ISC DHCP service is deployed and functional.</p>
</li>
<li>
<p>The firewall on the DHCP server allows access to the DHCP service (port 67/UDP).</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create a security token:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># tsig-keygen -a <em>Algorithm_Name</em> <em>My_Key_Name</em></pre>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Use the following values in the command:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code><em>Algorithm_Name</em></code></dt>
<dd>
<p>Specifies the algorithm to be used to generate the key.
You can use any of the values specified in the <code>tsig-keygen(8)</code> man page on your system.
The default algorithm is HMAC-SHA256.</p>
</dd>
<dt class="hdlist1"><code><em>My_Key_Name</em></code></dt>
<dd>
<p>Specifies the name of the OMAPI key.
The default name is <code>tsig-key</code>.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>The command outputs key information in the following format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-none" data-lang="none">key "<em>My_Key_Name</em>" {
	algorithm <em>Algorithm_Name</em>;
	secret "<em>Key_Secret</em>";
};</code></pre>
</div>
</div>
</li>
<li>
<p>Edit the <code>/etc/dhcp/dhcpd.conf</code> file, and append the following settings:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-none" data-lang="none">key "<em>My_Key_Name</em>" {
	algorithm <em>Algorithm_Name</em>;
	secret "<em>Key_Secret</em>";
};
omapi-port 7911;
omapi-key <em>My_Key_Name</em>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The settings specified in the example include the following:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>key "<em>My_Key_Name</em>"</code></dt>
<dd>
<p>Defines the key, its algorithm and encrypted password.
Use the output of the <code>tsig-keygen</code> command for this directive.</p>
</dd>
<dt class="hdlist1"><code>omapi-port 7911</code></dt>
<dd>
<p>Enables the OMAPI protocol in ISC DHCP and defines the port of the protocol.</p>
</dd>
<dt class="hdlist1"><code>omapi-key <em>My_Key_Name</em></code></dt>
<dd>
<p>Defines the name of the key the OMAPI interface uses.
The name must match the one you specified in the <code>tsig-keygen</code> command.</p>
</dd>
</dl>
</div>
</li>
<li>
<p>Restart the <code>dhcpd</code> service:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># systemctl restart dhcpd</pre>
</div>
</div>
</li>
<li>
<p>Open the OMAPI port in the <code>firewalld</code> service:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd --add-port=7911/tcp</pre>
</div>
</div>
</li>
<li>
<p>Make the changes persistent:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd --runtime-to-permanent</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="sharing-the-dhcp-configuration-files-and-lease-database-over-nfs"><a class="anchor" href="#sharing-the-dhcp-configuration-files-and-lease-database-over-nfs"></a>2.3.2. Sharing the DHCP configuration files and lease database over NFS</h4>
<div class="paragraph _abstract">
<p>The integration of an existing remote ISC DHCP service requires that you share the configuration file and lease database of the service over network.
For example, you can use the NFS service.
Foreman then uses NFS to access configuration settings, such as subnet definitions.
Read access to the lease database ensures efficient access to all lease information, which is not available over the ISC DHCP Object Management Application Programming Interface (OMAPI).</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The ISC DHCP service is deployed and functional.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>On Foreman&#160;server, determine both the UID and the primary GID of the <code>foreman-proxy</code> user:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># id -u foreman-proxy
# id -g foreman-proxy</pre>
</div>
</div>
<div class="paragraph">
<p>You require these IDs in the next steps.</p>
</div>
</li>
<li>
<p>On the DHCP server, share the configuration of the DHCP service and lease database over NFS:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Create the <code>foreman-proxy</code> group with the same group ID as on the Foreman&#160;server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># groupadd -g <em>My_User_ID</em> foreman-proxy</pre>
</div>
</div>
</li>
<li>
<p>Create the <code>foreman-proxy</code> user with the same user ID and primary group ID as on the Foreman&#160;server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># useradd -u <em>My_User_ID</em> -g <em>My_Group_ID</em> -s /sbin/nologin foreman-proxy</pre>
</div>
</div>
</li>
<li>
<p>Ensure that members of the <code>foreman-proxy</code> group can access the configuration file of the DHCP service:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># chgrp -R foreman-proxy /etc/dhcp/
# chmod g+rx /etc/dhcp/
# chmod g+r /etc/dhcp/dhcpd.conf</pre>
</div>
</div>
</li>
<li>
<p>Install the <code>nfs-server</code> package:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf install nfs-utils</pre>
</div>
</div>
</li>
<li>
<p>Edit the <code>/etc/exports</code> file, and append share entries for the <code>/etc/dhcp/</code> and <code>/var/lib/dhcpd/</code> directories:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-none" data-lang="none">/etc/dhcp        <em>foreman.example.com</em>(ro)
/var/lib/dhcpd   <em>foreman.example.com</em>(ro)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Share the directories in read-only mode and only with the Foreman&#160;server or Smart&#160;Proxy&#160;server.</p>
</div>
</li>
<li>
<p>Enable and start the NFS server service:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># systemctl enable --now nfs-server</pre>
</div>
</div>
</li>
<li>
<p>Open the NFSv4 port in the <code>firewalld</code> service:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd --add-service=nfs</pre>
</div>
</div>
</li>
<li>
<p>Make the changes persistent:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd --runtime-to-permanent</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Next steps</div>
<ul>
<li>
<p>By default, the NFS protocol is unencrypted.
If you require an encrypted connection, configure NFS over TLS or Kerberos authentication after you completed this procedure.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/configuring_and_using_network_file_services/deploying-an-nfs-server_configuring-and-using-network-file-services#configuring-an-nfs-server-with-tls-support_deploying-an-nfs-server">Configuring an NFS server with TLS support</a> and <a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/configuring_and_using_network_file_services/deploying-an-nfs-server_configuring-and-using-network-file-services#setting-up-an-nfs-server-with-kerberos-in-a-red-hat-identity-management-domain_deploying-an-nfs-server">Setting up an NFS server with Kerberos in a Red Hat Enterprise Linux Identity Management domain</a> in <em>Red&#160;Hat Enterprise Linux&#160;9 Configuring and using network file services</em>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="configuring-server-or-proxy-for-use-with-isc-dhcp"><a class="anchor" href="#configuring-server-or-proxy-for-use-with-isc-dhcp"></a>2.3.3. Configuring Foreman&#160;server or Smart&#160;Proxy&#160;server for use with ISC DHCP</h4>
<div class="paragraph _abstract">
<p>After you have prepared the DHCP server, integrate the ISC DHCP server into your Foreman&#160;server or Smart&#160;Proxy&#160;server.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You enabled Object Management Application Programming Interface (OMAPI) authentication in ISC DHCP.
For more information, see <a href="#enabling-omapi-authentication-in-isc-dhcp">Enabling OMAPI authentication in ISC DHCP</a>.</p>
</li>
<li>
<p>You shared the DHCP configuration and lease database over NFS.
For more information, see <a href="#sharing-the-dhcp-configuration-files-and-lease-database-over-nfs">Sharing the DHCP configuration files and lease database over NFS</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Install the required package:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf install nfs-utils</pre>
</div>
</div>
</li>
<li>
<p>Create the directories into which you later mount the NFS shares:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir -p \
/srv/nfs/etc/dhcp \
/srv/nfs/var/lib/dhcpd</pre>
</div>
</div>
</li>
<li>
<p>Edit the <code>/etc/fstab</code> file, and add entries for the NFS shares to mount them automatically when the system boots:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-none" data-lang="none"><em>dhcp_server_fqdn</em>:/etc/dhcp       /srv/nfs/etc/dhcp       nfs  ro,auto,context="system_u:object_r:dhcp_etc_t:s0"     0 0
<em>dhcp_server_fqdn</em>:/var/lib/dhcpd  /srv/nfs/var/lib/dhcpd  nfs  ro,auto,context="system_u:object_r:dhcpd_state_t:s0"  0 0</code></pre>
</div>
</div>
</li>
<li>
<p>Reload <code>systemd</code> so that this service uses the updated <code>/etc/fstab</code> file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># systemctl daemon-reload</pre>
</div>
</div>
</li>
<li>
<p>Mount the NFS shares:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mount /srv/nfs/etc/dhcp/
# mount /srv/nfs/var/lib/dhcpd/</pre>
</div>
</div>
</li>
<li>
<p>Verify that the <code>foreman-proxy</code> user can access the files on the NFS server.
For example:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Display the first 5 lines of the <code>/srv/nfs/etc/dhcp/dhcpd.conf</code> file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ su - foreman-proxy -c 'head -5 /srv/nfs/etc/dhcp/dhcpd.conf'</pre>
</div>
</div>
</li>
<li>
<p>Display the first 5 lines of the <code>/srv/nfs/var/lib/dhcpd/dhcpd.leases</code> file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ su - foreman-proxy -c 'head -5 /srv/nfs/var/lib/dhcpd/dhcpd.leases'</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Configure Foreman&#160;server or Smart&#160;Proxy&#160;server to use the DHCP server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer \
--foreman-proxy-dhcp true \
--foreman-proxy-dhcp-provider remote_isc \
--enable-foreman-proxy-plugin-dhcp-remote-isc \
--foreman-proxy-dhcp-server <em>dhcp_server_fqdn</em> \
--foreman-proxy-plugin-dhcp-remote-isc-dhcp-config /srv/nfs/etc/dhcp/dhcpd.conf \
--foreman-proxy-plugin-dhcp-remote-isc-dhcp-leases /srv/nfs/var/lib/dhcpd/dhcpd.leases \
--foreman-proxy-plugin-dhcp-remote-isc-key-name omapi_key \
--foreman-proxy-plugin-dhcp-remote-isc-key-secret <em>key_secret</em> \
--foreman-proxy-plugin-dhcp-remote-isc-omapi-port 7911</pre>
</div>
</div>
</li>
<li>
<p>For each affected Smart&#160;Proxy, update the configuration of that Smart&#160;Proxy in the Foreman web UI.
For more information, see <a href="#associating-the-dhcp-service-with-a-subnet">Associating the DHCP service with a subnet</a>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="integrating-infoblox-dhcp"><a class="anchor" href="#integrating-infoblox-dhcp"></a>2.4. Integrating Infoblox DHCP</h3>
<div class="paragraph _abstract">
<p>If you have an Infoblox appliance in your network, you can integrate this service into Foreman&#160;server and Smart&#160;Proxy&#160;server by using the Infoblox Web API (WAPI).
The integration enables you to continue using your existing DHCP server, and Foreman manages IP leases and boot configurations on the DHCP server during the provisioning of hosts.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Integrating Infoblox DHCP has the following limitations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can manage DHCP entries only in a single network and view, and you cannot edit the view after you create it.</p>
</li>
<li>
<p>Foreman&#160;server uses the standard HTTPS web API to communicate with Infoblox.
By default, it communicates only with a single node.
If you require high availability, configure this feature in Infoblox.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have an Infoblox account with the roles <code>DHCP Admin</code> and <code>DNS Admin</code>.</p>
</li>
<li>
<p>The Infoblox roles have permissions or belong to an admin group that permits the accounts to perform tasks through the Infoblox API.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Download the certificate from the Infoblox server, and store it in the <code>/etc/pki/ca-trust/source/anchors/infoblox.crt</code> file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># openssl s_client -showcerts -connect <em>infoblox.example.com</em>:443 &lt;/dev/null | \
openssl x509 -text &gt;/etc/pki/ca-trust/source/anchors/infoblox.crt</pre>
</div>
</div>
<div class="paragraph">
<p>The hostname must match the one for the Infoblox application in the X.509 certificate.</p>
</div>
</li>
<li>
<p>Add the Infoblox certificate to the system truststore:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># update-ca-trust extract</pre>
</div>
</div>
</li>
<li>
<p>Test the CA certificate by using it in a query to the Infoblox API:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl -u admin:<em>password</em> https://<em>infoblox.example.com</em>/wapi/v2.0/network</pre>
</div>
</div>
<div class="paragraph">
<p>Example of a positive response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">[
    {
        "_ref": "network/ZG5zLm5ldHdvcmskMTkyLjE2OC4yMDIuMC8yNC8w:<em>infoblox.example.com</em>/24/default",
        "network": "192.168.202.0/24",
        "network_view": "default"
    }
]</pre>
</div>
</div>
</li>
<li>
<p>Configure Foreman&#160;server or Smart&#160;Proxy&#160;server to connect to the Infoblox DHCP service:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer \
--foreman-proxy-dhcp true \
--foreman-proxy-dhcp-provider infoblox \
--enable-foreman-proxy-plugin-dhcp-infoblox \
--foreman-proxy-dhcp-server <em>infoblox.example.com</em> \
--foreman-proxy-plugin-dhcp-infoblox-username <em>admin</em> \
--foreman-proxy-plugin-dhcp-infoblox-password <em>password</em> \
--foreman-proxy-plugin-dhcp-infoblox-record-type fixedaddress \
--foreman-proxy-plugin-dhcp-infoblox-dns-view default \
--foreman-proxy-plugin-dhcp-infoblox-network-view default</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you want to use the DHCP and DNS Infoblox modules together, configure the DHCP Infoblox module with the <code>fixedaddress</code> record type only.
The <code>host</code> record type is not supported in this scenario because it causes conflicts and you cannot rename hosts in Foreman.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>For each affected Smart&#160;Proxy, update the configuration of that Smart&#160;Proxy in the Foreman web UI.
For more information, see <a href="#associating-the-dhcp-service-with-a-subnet">Associating the DHCP service with a subnet</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="integrating-the-libvirt-api-to-manage-dhcp-leases"><a class="anchor" href="#integrating-the-libvirt-api-to-manage-dhcp-leases"></a>2.5. Integrating the libvirt API to manage DHCP leases</h3>
<div class="paragraph _abstract">
<p>If you manage VMs through the <code>libvirt</code> API, you can integrate the API into Foreman&#160;server to manage DHCP leases.
The integration enables you to continue using <code>dnsmasq</code> in <code>libvirt</code>, and Foreman manages IP leases and boot configurations on the DHCP server during the provisioning of hosts.</p>
</div>
<div class="paragraph">
<p>With this type of integration, Foreman uses a local or remote <code>libvirt</code> API to manage DHCP leases in <code>dnsmasq</code> instances.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Configure Foreman&#160;server or Smart&#160;Proxy&#160;server to connect to the <code>libvirt</code> API:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer \
--foreman-proxy-dhcp true \
--foreman-proxy-dhcp-provider libvirt \
--foreman-proxy-libvirt-network default \
--foreman-proxy-libvirt-connection qemu:///system</pre>
</div>
</div>
<div class="paragraph">
<p>Note that you can only use one network and URL for both the <code>dns_libvirt</code> and <code>dhcp_libvirt</code> providers.</p>
</div>
</li>
<li>
<p>For each affected Smart&#160;Proxy, update the configuration of that Smart&#160;Proxy in the Foreman web UI.
For more information, see <a href="#associating-the-dhcp-service-with-a-subnet">Associating the DHCP service with a subnet</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="associating-the-dhcp-service-with-a-subnet"><a class="anchor" href="#associating-the-dhcp-service-with-a-subnet"></a>2.6. Associating the DHCP service with a subnet</h3>
<div class="paragraph _abstract">
<p>After you configured or changed the DHCP provider, you must update the configuration of each affected Smart&#160;Proxy in the Foreman web UI.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Subnets</strong>.</p>
</li>
<li>
<p>Select the subnet name.</p>
</li>
<li>
<p>On the <strong>Subnet</strong> tab, set <strong>IPAM</strong> to <strong>DHCP</strong>.</p>
</li>
<li>
<p>On the <strong>Smart&#160;Proxy</strong> tab, set <strong>DHCP Proxy</strong> to your Smart&#160;Proxy.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="disabling-dhcp-for-integration"><a class="anchor" href="#disabling-dhcp-for-integration"></a>2.7. Disabling DHCP for integration</h3>
<div class="paragraph _abstract">
<p>If you want to manually manage a DHCP service and not integrate it into Foreman&#160;server, you must prevent Foreman from maintaining this service on the operating system and disable orchestration to avoid errors.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Disabling DHCP in Foreman does not remove the related backend service on the operating system.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Subnets</strong>.</p>
</li>
<li>
<p>For each subnet that is associated with the DHCP Smart&#160;Proxy:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Select the subnet.</p>
</li>
<li>
<p>On the <strong>Smart&#160;Proxies</strong> tab, clear the <strong>DHCP Smart&#160;Proxy</strong> field.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>On Foreman&#160;server and Smart&#160;Proxy&#160;server, enter:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --foreman-proxy-dhcp false</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Foreman does not perform orchestration when a Smart&#160;Proxy is not set for a given subnet.
When you disable Smart&#160;Proxy associations, orchestration commands for existing hosts can fail if the expected records and configuration files are not present.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="troubleshooting-dhcp-problems"><a class="anchor" href="#troubleshooting-dhcp-problems"></a>2.8. Troubleshooting DHCP problems</h3>
<div class="paragraph _abstract">
<p>Foreman can manage an ISC DHCP server on Foreman&#160;server or Smart&#160;Proxy&#160;servers.
Foreman can list, create, and delete DHCP reservations and leases.
However, you might encounter the following problems:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Out of sync DHCP records</dt>
<dd>
<p>When an error occurs during DHCP orchestration, DHCP records in the Foreman database and the DHCP server might not match.
To fix this, you must add missing DHCP records from the Foreman database to the DHCP server and then remove unwanted records from the DHCP server as per the following steps:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Preview the DHCP records that are going to be added to the DHCP server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-rake orchestration:dhcp:add_missing subnet_name=NAME</pre>
</div>
</div>
</li>
<li>
<p>If you are satisfied by the preview changes in the previous step, apply them by entering the above command with the <code>perform=1</code> argument:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-rake orchestration:dhcp:add_missing subnet_name=NAME perform=1</pre>
</div>
</div>
</li>
<li>
<p>To keep DHCP records in Foreman and in the DHCP server synchronized, you can remove unwanted DHCP records from the DHCP server.
Note that Foreman assumes that all managed DHCP servers do not contain third-party records, therefore, this step might delete those unexpected records.
Preview what records are going to be removed from the DHCP server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-rake orchestration:dhcp:remove_offending subnet_name=NAME</pre>
</div>
</div>
</li>
<li>
<p>If you are satisfied by the preview changes in the previous step, apply them by entering the above command with the <code>perform=1</code> argument:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-rake orchestration:dhcp:remove_offending subnet_name=NAME perform=1</pre>
</div>
</div>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1">PXE loader option change</dt>
<dd>
<p>When the PXE loader option is changed for an existing host, this causes a DHCP conflict.
The only workaround is to overwrite the DHCP entry.</p>
<div class="paragraph">
<p>This is a known issue.
Until <a href="https://projects.theforeman.org/issues/27877">Issue 27877</a> is fixed, the only workaround is to overwrite the DHCP entry.</p>
</div>
</dd>
<dt class="hdlist1">Incorrect permissions on DHCP files</dt>
<dd>
<p>An operating system update can update the <code>dhcpd</code> package.
This causes the permissions of important directories and files to reset so that the DHCP Smart&#160;Proxy cannot read the required information.</p>
<div class="paragraph">
<p>For more information, see <a href="https://projects.theforeman.org/projects/foreman/wiki/ERF12-6899">ERF12-6899 - Unable to set DHCP entry</a>.</p>
</div>
</dd>
<dt class="hdlist1">Changing the DHCP Smart&#160;Proxy entry</dt>
<dd>
<p>Foreman manages DHCP records only for hosts that are assigned to subnets with a DHCP Smart&#160;Proxy set.
If you create a host and then clear or change the DHCP Smart&#160;Proxy, when you attempt to delete the host, the action fails.</p>
<div class="paragraph">
<p>If you create a host without setting the DHCP Smart&#160;Proxy and then try to set the DHCP Smart&#160;Proxy, this causes DHCP conflicts.</p>
</div>
</dd>
<dt class="hdlist1">Deleted hosts entries in the <code>dhcpd.leases</code> file</dt>
<dd>
<p>Any changes to a DHCP lease are appended to the end of the <code>dhcpd.leases</code> file.
Because entries are appended to the file, it is possible that two or more entries of the same lease can exist in the <code>dhcpd.leases</code> file at the same time.
When there are two or more entries of the same lease, the last entry in the file takes precedence.
Group, subgroup and host declarations in the lease file are processed in the same manner.
If a lease is deleted, <code>{ deleted; }</code> is appended to the declaration.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-tftp-integration"><a class="anchor" href="#configuring-tftp-integration"></a>3. Configuring TFTP integration</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>You can integrate TFTP with Foreman to perform unattended installations by booting the operating system&#8217;s setup over the network.</p>
</div>
<div class="sect2">
<h3 id="enabling-the-installer-managed-tftp-service"><a class="anchor" href="#enabling-the-installer-managed-tftp-service"></a>3.1. Enabling the installer-managed TFTP service</h3>
<div class="paragraph _abstract">
<p>If you do not have a TFTP server available in your network, you can use the installer-managed TFTP service to perform unattended installations.
With the installer-managed TFTP service, you can run a TFTP server with a low maintenance effort because Foreman fully manages the TFTP service, including the files on that service.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Configure your Foreman&#160;server or Smart&#160;Proxy&#160;server as the TFTP server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer \
--foreman-proxy-tftp true \
--foreman-proxy-tftp-managed true</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="integrating-a-generic-tftp-server"><a class="anchor" href="#integrating-a-generic-tftp-server"></a>3.2. Integrating a generic TFTP server</h3>
<div class="paragraph _abstract">
<p>If you have a TFTP server in your network, you can integrate this service into your Foreman.
The integration enables you to continue using your existing TFTP server.
With this type of integration, Foreman uses the Network File System (NFS) protocol to access the root directory of the TFTP service.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you prefer a low maintenance solution that also manages files on the TFTP server, use the installer-managed TFTP service.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="configuring-server-for-use-with-tftp"><a class="anchor" href="#configuring-server-for-use-with-tftp"></a>3.2.1. Configuring Foreman&#160;server for use with tftp</h4>
<div class="paragraph _abstract">
<p>After you have prepared the TFTP server, integrate it into your Foreman&#160;server or Smart&#160;Proxy&#160;server.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You shared the <code>/exports/var/lib/tftpboot</code> on the TFTP server with NFS.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create the directory into which you later mount the NFS share:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir -p /mnt/nfs/var/lib/tftpboot</pre>
</div>
</div>
</li>
<li>
<p>Edit the <code>/etc/fstab</code> file, and add entry for the NFS share to mount them automatically when the system boots:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"><em>tftp_server_fqdn</em>:/exports/var/lib/tftpboot  /mnt/nfs/var/lib/tftpboot  nfs  rw,vers=3,auto,nosharecache,context="system_u:object_r:tftpdir_rw_t:s0"  0 0</pre>
</div>
</div>
</li>
<li>
<p>Mount the NFS share:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mount /mnt/nfs/var/lib/tftpboot/</pre>
</div>
</div>
</li>
<li>
<p>Configure Foreman&#160;server or Smart&#160;Proxy&#160;server to use the TFTP server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer \
--foreman-proxy-tftp true \
--foreman-proxy-managed false \
--foreman-proxy-tftp-root /mnt/nfs/var/lib/tftpboot \
--foreman-proxy-tftp-servername <em>tftp_server_fqdn</em></pre>
</div>
</div>
</li>
<li>
<p>For each affected Smart&#160;Proxy, update the configuration of that Smart&#160;Proxy in the Foreman web UI.
For more information, see <a href="#associating-the-tftp-service-with-a-subnet">Associating the TFTP service with a subnet</a>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="associating-the-tftp-service-with-a-subnet"><a class="anchor" href="#associating-the-tftp-service-with-a-subnet"></a>3.3. Associating the TFTP service with a subnet</h3>
<div class="paragraph _abstract">
<p>After you configured or changed the TFTP provider, you must update the configuration of each affected Smart&#160;Proxy in the Foreman web UI.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You configured a TFTP server.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Subnets</strong>.</p>
</li>
<li>
<p>Select the subnet name.</p>
</li>
<li>
<p>On the <strong>Smart&#160;Proxies</strong> tab, select the Smart&#160;Proxy for TFTP.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="disabling-tftp-for-integration"><a class="anchor" href="#disabling-tftp-for-integration"></a>3.4. Disabling TFTP for integration</h3>
<div class="paragraph _abstract">
<p>If you want to manually manage a TFTP service and not integrate it into Foreman, you must prevent Foreman from maintaining this service on the operating system and disable orchestration to avoid errors.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Disabling TFTP in Foreman does not remove the related backend service on the operating system.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Subnets</strong>.</p>
</li>
<li>
<p>For each subnet that is associated with the TFTP Smart&#160;Proxy:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Select the subnet.</p>
</li>
<li>
<p>On the <strong>Smart&#160;Proxies</strong> tab, clear the <strong>TFTP Smart&#160;Proxy</strong> field.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>On Foreman&#160;server, enter:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --foreman-proxy-tftp false</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Foreman does not perform orchestration when a Smart&#160;Proxy is not set for a given subnet.
When you disable Smart&#160;Proxy associations, orchestration commands for existing hosts can fail if the expected records and configuration files are not present.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
<!-- "Fork me on GitHub" CSS ribbon v0.2.3 | MIT License -->
<!-- https://github.com/simonwhitaker/github-fork-ribbon-css -->
<a class="issue-ribbon right-bottom fixed" href="https://github.com/theforeman/foreman-documentation/issues/new?template=report-issue.md" data-ribbon="Report issue" title="Report issue">
Report issue
</a>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 3.17<br>
Last updated Feb 2026
</div>
</div>
<script>
;(function () { /*! Asciidoctor Tabs | Copyright (c) 2018-present Dan Allen | MIT License */
  'use strict'

  var config = (document.currentScript || {}).dataset || {}
  var forEach = Array.prototype.forEach

  init(document.querySelectorAll('.tabs'))

  function init (tabsBlocks) {
    if (!tabsBlocks.length) return
    forEach.call(tabsBlocks, function (tabs) {
      var syncIds = tabs.classList.contains('is-sync') ? {} : undefined
      var tablist = tabs.querySelector('.tablist ul')
      tablist.setAttribute('role', 'tablist')
      var start
      forEach.call(tablist.querySelectorAll('li'), function (tab, idx) {
        tab.tabIndex = -1
        tab.setAttribute('role', tab.classList.add('tab') || 'tab')
        var id, anchor, syncId
        if (!(id = tab.id) && (anchor = tab.querySelector('a[id]'))) {
          id = tab.id = anchor.parentNode.removeChild(anchor).id
        }
        var panel = id && tabs.querySelector('.tabpanel[aria-labelledby~="' + id + '"]')
        if (!panel) return idx ? undefined : toggleSelected(tab, true) // invalid state
        syncIds && (((syncId = tab.textContent.trim()) in syncIds) ? (syncId = undefined) : true) &&
          (syncIds[(tab.dataset.syncId = syncId)] = tab)
        idx || (syncIds && (start = { tab: tab, panel: panel })) ? toggleHidden(panel, true) : toggleSelected(tab, true)
        tab.setAttribute('aria-controls', panel.id)
        panel.setAttribute('role', 'tabpanel')
        var onClick = syncId === undefined ? activateTab : activateTabSync
        tab.addEventListener('click', onClick.bind({ tabs: tabs, tab: tab, panel: panel }))
      })
      if (!tabs.closest('.tabpanel')) {
        forEach.call(tabs.querySelectorAll('.tabpanel table.tableblock'), function (table) {
          var container = Object.assign(document.createElement('div'), { className: 'tablecontainer' })
          table.parentNode.insertBefore(container, table).appendChild(table)
        })
      }
      if (start) {
        var syncGroupId
        for (var i = 0, lst = tabs.classList, len = lst.length, className; i !== len; i++) {
          if (!(className = lst.item(i)).startsWith('data-sync-group-id=')) continue
          tabs.dataset.syncGroupId = syncGroupId = lst.remove(className) || className.slice(19).replace(/\u00a0/g, ' ')
          break
        }
        if (syncGroupId === undefined) tabs.dataset.syncGroupId = syncGroupId = Object.keys(syncIds).sort().join('|')
        var preferredSyncId = 'syncStorageKey' in config &&
          window[(config.syncStorageScope || 'local') + 'Storage'].getItem(config.syncStorageKey + '-' + syncGroupId)
        var tab = preferredSyncId && syncIds[preferredSyncId]
        tab && Object.assign(start, { tab: tab, panel: document.getElementById(tab.getAttribute('aria-controls')) })
        toggleSelected(start.tab, true) || toggleHidden(start.panel, false)
      }
    })
    onHashChange()
    toggleClassOnEach(tabsBlocks, 'is-loading', 'remove')
    window.setTimeout(toggleClassOnEach.bind(null, tabsBlocks, 'is-loaded', 'add'), 0)
    window.addEventListener('hashchange', onHashChange)
  }

  function activateTab (e) {
    var tab = this.tab
    var tabs = this.tabs || (this.tabs = tab.closest('.tabs'))
    var panel = this.panel || (this.panel = document.getElementById(tab.getAttribute('aria-controls')))
    querySelectorWithSiblings(tabs, '.tablist .tab', 'tab').forEach(function (el) {
      toggleSelected(el, el === tab)
    })
    querySelectorWithSiblings(tabs, '.tabpanel', 'tabpanel').forEach(function (el) {
      toggleHidden(el, el !== panel)
    })
    if (!this.isSync && 'syncStorageKey' in config && 'syncGroupId' in tabs.dataset) {
      var storageKey = config.syncStorageKey + '-' + tabs.dataset.syncGroupId
      window[(config.syncStorageScope || 'local') + 'Storage'].setItem(storageKey, tab.dataset.syncId)
    }
    if (!e) return
    var loc = window.location
    var hashIdx = loc.hash ? loc.href.indexOf('#') : -1
    if (~hashIdx) window.history.replaceState(null, '', loc.href.slice(0, hashIdx))
    e.preventDefault()
  }

  function activateTabSync (e) {
    activateTab.call(this, e)
    var thisTabs = this.tabs
    var thisTab = this.tab
    var initialY = thisTabs.getBoundingClientRect().y
    forEach.call(document.querySelectorAll('.tabs'), function (tabs) {
      if (tabs === thisTabs || tabs.dataset.syncGroupId !== thisTabs.dataset.syncGroupId) return
      querySelectorWithSiblings(tabs, '.tablist .tab', 'tab').forEach(function (tab) {
        if (tab.dataset.syncId === thisTab.dataset.syncId) activateTab.call({ tabs: tabs, tab: tab, isSync: true })
      })
    })
    var shiftedBy = thisTabs.getBoundingClientRect().y - initialY
    if (shiftedBy && (shiftedBy = Math.round(shiftedBy))) window.scrollBy({ top: shiftedBy, behavior: 'instant' })
  }

  function querySelectorWithSiblings (scope, selector, siblingClass) {
    var el = scope.querySelector(selector)
    if (!el) return []
    var result = [el]
    while ((el = el.nextElementSibling) && el.classList.contains(siblingClass)) result.push(el)
    return result
  }

  function toggleClassOnEach (elements, className, method) {
    forEach.call(elements, function (el) {
      el.classList[method](className)
    })
  }

  function toggleHidden (el, state) {
    el.classList[(el.hidden = state) ? 'add' : 'remove']('is-hidden')
  }

  function toggleSelected (el, state) {
    el.setAttribute('aria-selected', '' + state)
    el.classList[state ? 'add' : 'remove']('is-selected')
    el.tabIndex = state ? 0 : -1
  }

  function onHashChange () {
    var id = window.location.hash.slice(1)
    if (!id) return
    var tab = document.getElementById(~id.indexOf('%') ? decodeURIComponent(id) : id)
    if (!(tab && tab.classList.contains('tab'))) return
    'syncId' in tab.dataset ? activateTabSync.call({ tab: tab }) : activateTab.call({ tab: tab })
  }
})()
</script>
</body>
</html>