<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.22">
<title>Managing hosts</title>
<style>
﻿*,::before,::after{box-sizing:border-box}html{font-size:100%;-webkit-text-size-adjust:100%}body{background:#fff;color:rgba(0,0,0,0.8);padding:0;margin:0;font-family:"Noto Serif", "DejaVu Serif", serif;font-size:inherit;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,p,blockquote,th,td{margin:0;padding:0}a{background:none;color:#2156a5;text-decoration:underline;line-height:inherit}a:active,a:hover{cursor:pointer;outline:0}a:focus{outline:thin dotted}a:hover,a:focus{color:#1d4b8f}abbr{font-size:0.9em}abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}b,strong{font-weight:bold;line-height:inherit}strong strong{font-weight:400}code,kbd,pre{font-family:"Droid Sans Mono", "DejaVu Sans Mono", monospace;font-size:1em}code{font-weight:400;color:rgba(0,0,0,0.9)}pre{color:rgba(0,0,0,0.9);line-height:1.45;text-rendering:optimizeSpeed;white-space:pre-wrap}dfn{font-style:italic}em,i{font-style:italic;line-height:inherit}em em{font-style:normal}hr{border:solid #dddddf;border-width:1px 0 0;clear:both;height:0;margin:1.25em 0 1.1875em}mark{background:#ff0;color:#000}p{line-height:1.6;margin-bottom:1.25rem;text-rendering:optimizeLegibility}q{quotes:"“" "”" "‘" "’"}small{font-size:60%;line-height:inherit}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-0.5em}sub{bottom:-0.25em}img,object[type^="image/"],svg{display:inline-block;height:auto;max-width:100%;vertical-align:middle}img{border:0;-ms-interpolation-mode:bicubic}object{max-width:100%}svg:not(:root){overflow:hidden}figure{margin:0}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}.left{float:left !important}.right{float:right !important}.text-left{text-align:left !important}.text-right{text-align:right !important}.text-center{text-align:center !important}.text-justify{text-align:justify !important}.hide{display:none}.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:0.25em}p aside{font-size:.875em;line-height:1.35;font-style:italic}h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans", "DejaVu Sans", sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.2;word-spacing:-0.05em}h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{color:#e99b8f;line-height:0}h1{font-size:2.125em}h2{font-size:1.6875em}h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}h4,h5{font-size:1.125em}h6{font-size:1em}ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}ul,ol{margin-left:1.5em}ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}ul.square{list-style-type:square}ul.circle{list-style-type:circle}ul.disc{list-style-type:disc}ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}dl dt{margin-bottom:.3125em;font-weight:bold}dl dd{margin-bottom:1.25em;margin-left:1.125em}blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,0.85)}@media screen and (min-width: 768px){h1{font-size:2.75em}h2{font-size:2.3125em}h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}h4{font-size:1.4375em}}table{background:#fff;border:1px solid #dedede;border-collapse:collapse;border-spacing:0;margin-bottom:1.25em;word-wrap:normal}table thead,table tfoot{background:#f7f8f7}table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,0.8);text-align:left}table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,0.8)}table tr.even,table tr.alt{background:#f8f8f7}table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}.center{margin-left:auto;margin-right:auto}.stretch{width:100%}.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:"";display:table}.clearfix::after,.float-group::after{clear:both}:not(pre).nobreak{word-wrap:normal}:not(pre).nowrap{white-space:nowrap}:not(pre).pre-wrap{white-space:pre-wrap}:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal !important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}pre>code{display:block}pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}.keyseq{color:rgba(51,51,51,0.8)}kbd{display:inline-block;color:rgba(0,0,0,0.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,0.2),inset 0 0 0 0.1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}.keyseq kbd:first-child{margin-left:0}.keyseq kbd:last-child{margin-right:0}.menuseq,.menuref{color:#000}.menuseq b:not(.caret),.menuref{font-weight:inherit}.menuseq{word-spacing:-0.02em}.menuseq b.caret{font-size:1.25em;line-height:0.8}.menuseq i.caret{font-weight:bold;text-align:center;width:0.45em}b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}b.button::before{content:"[";padding:0 3px 0 2px}b.button::after{content:"]";padding:0 2px 0 3px}p a>code:hover{color:rgba(0,0,0,0.9)}body>div[id]{margin:0 auto;max-width:62.5em;position:relative;padding-left:.9375em;padding-right:0.9375em}body>div[id]::before,body>div[id]::after,#content #footnotes::before{content:"";display:table;clear:both}#content{margin-top:1.25em;margin-bottom:0.625em}#content::before{content:none}#header>h1:first-child{color:rgba(0,0,0,0.85);margin-top:2.25rem;margin-bottom:0}#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,0.6);display:flex;flex-flow:row wrap}#header .details span:first-child{margin-left:-0.125em}#header .details span.email a{color:rgba(0,0,0,0.85)}#header .details br{display:none}#header .details br+span::before{content:" – "}#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,0.85)}#header .details br+span#revremark::before{content:" | "}#header #revnumber{text-transform:capitalize}#header #revnumber::after{content:" "}#content>h1:first-child:not([class]){color:rgba(0,0,0,0.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}#toc{border-bottom:1px solid #e7e7e9;padding-bottom:0.5em}#toc>ul{margin-left:0.125em}#toc ul.sectlevel0>li>a{font-style:italic}#toc ul.sectlevel0 ul.sectlevel1{margin:0.5em 0}#toc ul{font-family:"Open Sans", "DejaVu Sans", sans-serif;list-style-type:none}#toc li{line-height:1.3334;margin-top:0.3334em}#toc a{text-decoration:none}#toc a:active{text-decoration:underline}#toctitle{color:#7a2518;font-size:1.2em}@media screen and (min-width: 768px){#toctitle{font-size:1.375em}body.toc2{padding-left:15em;padding-right:0}#toc.toc2{margin-top:0 !important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0 !important;border-bottom-width:0 !important;z-index:1000;padding:1.25em 1em;height:calc(100% - (70px + 2.5em));overflow:auto}#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}#toc.toc2>ul{font-size:.9em;margin-bottom:0}#toc.toc2 ul ul{margin-left:0;padding-left:1em}#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:0.5em}body.toc2.toc-right{padding-left:0;padding-right:15em}body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}@media screen and (min-width: 1280px){body.toc2{padding-left:20em;padding-right:0}#toc.toc2{width:20em}#toc.toc2 #toctitle{font-size:1.375em}#toc.toc2>ul{font-size:0.95em}#toc.toc2 ul ul{padding-left:1.25em}body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}#content #toc>:first-child{margin-top:0}#content #toc>:last-child{margin-bottom:0}#footer{max-width:none;background:#025d8c;padding:1.25em;margin-left:2em}#footer-text{color:rgba(255,255,255,0.8);line-height:1.44}.sect1{padding-bottom:0.625em}@media screen and (min-width: 768px){#content{margin-bottom:1.25em}.sect1{padding-bottom:1.25em}}.sect1:last-child{padding-bottom:0}.sect1+.sect1{border-top:1px solid #e7e7e9}#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none !important;visibility:hidden;text-align:center;font-weight:400}#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:0.1em}#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}details{margin-left:1.25rem}details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}details>summary::-webkit-details-marker{display:none}details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif", "DejaVu Serif", serif;font-size:1rem;font-style:italic}table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,0.85)}.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}.admonitionblock>table td.icon{text-align:center;width:80px}.admonitionblock>table td.icon img{max-width:none}.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans", "DejaVu Sans", sans-serif;text-transform:uppercase}.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,0.6);word-wrap:anywhere}.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}.exampleblock>.content{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#fffef7;border-radius:4px;box-shadow:0 1px 4px #e0e0dc}.exampleblock>.content>:first-child{margin-top:0}.exampleblock>.content>:last-child{margin-bottom:0}.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}.sidebarblock>:first-child{margin-top:0}.sidebarblock>:last-child{margin-bottom:0}.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:0.8125em}@media screen and (min-width: 768px){.literalblock pre,.listingblock>.content>pre{font-size:0.90625em}}@media screen and (min-width: 1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,0.9)}.listingblock>.content{position:relative}.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:0.5}.listingblock:hover code[data-lang]::before{display:block}.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:0.5}.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}.listingblock pre.highlightjs{padding:0}.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}.listingblock pre.prettyprint{border-width:0}.prettyprint{background:#f7f7f8}pre.prettyprint .linenums{line-height:1.45;margin-left:2em}pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}pre.prettyprint li code[data-lang]::before{opacity:1}pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}table.linenotable td.code{padding-left:0.75em}table.linenotable td.linenos{width:0.01%}table.linenotable td.linenos,pre.pygments .linenos,pre.rouge .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}pre.pygments span.linenos,pre.rouge span.linenos{display:inline-block;margin-right:0.75em}.quoteblock{margin:0 1em 1.25em 1.5em;display:table}.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:0.75em}.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,0.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}.quoteblock blockquote{margin:0;padding:0;border:0}.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,0.1)}.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}.verseblock{margin:0 1em 1.25em}.verseblock pre{font-family:"Open Sans", "DejaVu Sans", sans-serif;font-size:1.15rem;color:rgba(0,0,0,0.85);font-weight:300;text-rendering:optimizeLegibility}.verseblock pre strong{font-weight:400}.verseblock .attribution{margin-top:1.25rem;margin-left:0.5ex}.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}.quoteblock .attribution br,.verseblock .attribution br{display:none}.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,0.6)}.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}.quoteblock.abstract{margin:0 1em 1.25em;display:block}.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:0.25em solid #dddddf}.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}p.tableblock:last-child{margin-bottom:0}td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}td.tableblock>.content>:last-child{margin-bottom:-1.25em}table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}table.grid-all>*>tr>*{border-width:1px}table.grid-cols>*>tr>*{border-width:0 1px}table.grid-rows>*>tr>*{border-width:1px 0}table.frame-all{border-width:1px}table.frame-ends{border-width:1px 0}table.frame-sides{border-width:0 1px}table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}th.halign-left,td.halign-left{text-align:left}th.halign-right,td.halign-right{text-align:right}th.halign-center,td.halign-center{text-align:center}th.valign-top,td.valign-top{vertical-align:top}th.valign-bottom,td.valign-bottom{vertical-align:bottom}th.valign-middle,td.valign-middle{vertical-align:middle}table thead th,table tfoot th{font-weight:bold}tbody tr th{background:#f7f8f7}tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,0.8);font-weight:bold}p.tableblock>code:only-child{background:none;padding:0}p.tableblock{font-size:1em}ol{margin-left:1.75em}ul li ol{margin-left:1.5em}dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:0.625em}ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:0.625em}ul.unstyled,ol.unstyled{margin-left:0}li>p:empty:only-child::before{content:"";display:inline-block}ul.checklist>li>p:first-child{margin-left:-1em}ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:0.125em}ul.checklist>li>p:first-child>input[type=checkbox]:first-child{font:inherit;margin:0 .25em 0 0;padding:0}ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 0.625em -1.25em}ul.inline>li{margin-left:1.25em}.unstyled dl dt{font-weight:400;font-style:normal}ol.arabic{list-style-type:decimal}ol.decimal{list-style-type:decimal-leading-zero}ol.loweralpha{list-style-type:lower-alpha}ol.upperalpha{list-style-type:upper-alpha}ol.lowerroman{list-style-type:lower-roman}ol.upperroman{list-style-type:upper-roman}ol.lowergreek{list-style-type:lower-greek}.hdlist>table,.colist>table{border:0;background:none}.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}td.hdlist1,td.hdlist2{vertical-align:top;padding:0 0.625em}td.hdlist1{font-weight:bold;padding-bottom:1.25em}td.hdlist2{word-wrap:anywhere}.literalblock+.colist,.listingblock+.colist{margin-top:-0.5em}.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}.colist td:not([class]):first-child img{max-width:none}.colist td:not([class]):last-child{padding:0.25em 0}.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}.imageblock.left{margin:0.25em 0.625em 1.25em 0}.imageblock.right{margin:0.25em 0 1.25em 0.625em}.imageblock>.title{margin-bottom:0}.imageblock.thumb,.imageblock.th{border-width:6px}.imageblock.thumb>.title,.imageblock.th>.title{padding:0 0.125em}.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}.image.left{margin-right:0.625em}.image.right{margin-left:0.625em}a.image{text-decoration:none;display:inline-block}a.image object{pointer-events:none}sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}sup.footnote a,sup.footnoteref a{text-decoration:none}sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:0.625em}#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:0.2em}#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}#footnotes .footnote:last-of-type{margin-bottom:0}#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:0.75em 0}div.page-break{display:none}div.unbreakable{page-break-inside:avoid}.big{font-size:larger}.small{font-size:smaller}.underline{text-decoration:underline}.overline{text-decoration:overline}.line-through{text-decoration:line-through}.aqua{color:#00bfbf}.aqua-background{background:#00fafa}.black{color:#000}.black-background{background:#000}.blue{color:#0000bf}.blue-background{background:#0000fa}.fuchsia{color:#bf00bf}.fuchsia-background{background:#fa00fa}.gray{color:#606060}.gray-background{background:#7d7d7d}.green{color:#006000}.green-background{background:#007d00}.lime{color:#00bf00}.lime-background{background:#00fa00}.maroon{color:#600000}.maroon-background{background:#7d0000}.navy{color:#000060}.navy-background{background:#00007d}.olive{color:#606000}.olive-background{background:#7d7d00}.purple{color:#600060}.purple-background{background:#7d007d}.red{color:#bf0000}.red-background{background:#fa0000}.silver{color:#909090}.silver-background{background:#bcbcbc}.teal{color:#006060}.teal-background{background:#007d7d}.white{color:#bfbfbf}.white-background{background:#fafafa}.yellow{color:#bfbf00}.yellow-background{background:#fafa00}span.icon>.fa{cursor:default}a span.icon>.fa{cursor:inherit}.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,0.5);cursor:default}.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,0.8);color:#111}.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}.conum[data-value]{display:inline-block;color:#fff !important;background:rgba(0,0,0,0.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans", "DejaVu Sans", sans-serif;font-style:normal;font-weight:bold}.conum[data-value] *{color:#fff !important}.conum[data-value]+b{display:none}.conum[data-value]::after{content:attr(data-value)}pre .conum[data-value]{position:relative;top:-0.125em}b.conum *{color:inherit !important}.conum:not([data-value]):empty{display:none}dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}h1,h2,p,td.content,span.alt,summary{letter-spacing:-0.01em}p strong,td.content strong,div.footnote strong{letter-spacing:-0.005em}p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}.print-only{display:none !important}@page{margin:1.25cm 0.75cm}@media print{*{box-shadow:none !important;text-shadow:none !important}html{font-size:80%}a{color:inherit !important;text-decoration:underline !important}a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none !important}a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:0.25em}abbr[title]{border-bottom:1px dotted}abbr[title]::after{content:" (" attr(title) ")"}pre,blockquote,tr,img,object,svg{page-break-inside:avoid}thead{display:table-header-group}p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}body>div[id]{max-width:none}#toc,.sidebarblock,.exampleblock>.content{background:none !important}#toc{border-bottom:1px solid #dddddf !important;padding-bottom:0 !important}body.book #header{text-align:center}body.book #header>h1:first-child{border:0 !important;margin:2.5em 0 1em}body.book #header .details{border:0 !important;display:block;padding:0 !important}body.book #header .details span:first-child{margin-left:0 !important}body.book #header .details br{display:block}body.book #header .details br+span::before{content:none !important}body.book #toc{border:0 !important;text-align:left !important;padding:0 !important;margin:0 !important}body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}.listingblock code[data-lang]::before{display:block}div.page-break{display:block;page-break-after:always}#footer{padding:0 0.9375em}.hide-on-print{display:none !important}.print-only{display:block !important}.hide-for-print{display:none !important}.show-for-print{display:inherit !important}}@media amzn-kf8, print{#header>h1:first-child{margin-top:1.25rem}.sect1{padding:0 !important}.sect1+.sect1{border:0}#footer{background:none}#footer-text{color:rgba(0,0,0,0.6);font-size:0.9em}}@media amzn-kf8{body>div[id]{padding:0}}body{padding:0;margin:0;margin-top:70px !important}.container{position:relative;z-index:1;padding-top:50px;min-height:100%}.container p{font-family:sans-serif;font-size:1.2em}nav{position:fixed;z-index:9999;left:0;right:0;top:0;height:70px;padding:0 1.5em;background-color:#025d8c;font-family:sans-serif;line-height:70px}nav .logo{width:50px;vertical-align:middle}nav .nav-menu{position:absolute;right:0.3em;top:0;padding:0;margin:0;list-style:none}nav .nav-item{display:inline-block}nav .nav-item>a{display:inline-block;padding:0 2.5em;line-height:70px;color:#fff;text-decoration:none}nav .dropdown{position:relative}nav .dropdown a::after{content:"";display:inline-block;margin-left:0.5em;vertical-align:middle;border-top:0.3em solid #fff;border-right:0.3em solid transparent;border-left:0.3em solid transparent}nav .dropdown.show a::after{transform:rotate(180deg)}nav .dropdown-menu{display:none;position:absolute;left:0;right:0;top:100%;padding:0.5em 0;margin-top:-0.5em;border:1px solid rgba(0,0,0,0.3);border-radius:0.5em;background-color:#fff;width:max-content}nav .dropdown-menu-left{left:auto;right:0}nav .dropdown.show .dropdown-menu{display:block}nav .dropdown-div{display:block;padding:0.4em 0;line-height:4em}nav .dropdown-div a::after{content:none;margin-left:0;border-top:0;border-right:0;border-left:0}nav .dropdown-item{display:block;padding:0 1.5em;font-size:0.875em;color:#000;line-height:1.6em;text-decoration:none}nav .btn-hamburger{display:none;position:absolute;right:1.5em;top:50%;background-color:transparent;border:0;cursor:pointer;outline:none;transform:translateY(-50%)}nav .btn-hamburger span{display:block;width:30px;height:4px;background-color:#fff;margin:6px;border-radius:2px;transition:0.3s ease-in-out}nav .btn-hamburger span:nth-child(4),nav .btn-hamburger span:nth-child(5){position:absolute;top:10px;opacity:0.5}nav .btn-hamburger span:nth-child(4){transform:rotate(45deg) scale(0)}nav .btn-hamburger span:nth-child(5){transform:rotate(-45deg) scale(0)}nav.opened .btn-hamburger span:nth-child(4){opacity:1;transform:rotate(45deg) scale(1)}nav.opened .btn-hamburger span:nth-child(5){opacity:1;transform:rotate(-45deg) scale(1)}nav.opened .btn-hamburger span:nth-child(1),nav.opened .btn-hamburger span:nth-child(2),nav.opened .btn-hamburger span:nth-child(3){opacity:0}@media screen and (max-width: 768px){nav .nav-menu{position:fixed;left:0;right:0;top:70px;bottom:100%;display:flex;flex-direction:column;justify-content:start;background-color:#363d4e;transition:bottom 0.5s ease-in-out;overflow:hidden}nav.opened .nav-menu{bottom:0}nav .nav-item>a{display:block}nav .dropdown-menu{position:relative;top:0;margin:0 1.5em}nav .btn-hamburger{display:block}}@media screen{div.narrow{max-width:1080px;margin:0 auto !important;margin-top:70px auto !important;float:none !important}#toc.toc2{margin-top:70px !important}}

</style>
<!-- docinfo -->
</head>
<body class="book toc2 toc-left">
    <div id="wrap">
      <script src="/js/versions.js"></script>
      <script src="/js/nav.js"></script>
      <script>
        document.open();
        document.write(buildNavigation());
        addNavbarListeners();
        document.close();
      </script>
    </div>
<div id="header">
<h1>Managing hosts</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#making-open-source-more-inclusive_managing-hosts">1. Making open source more inclusive</a></li>
<li><a href="#providing-feedback-on-red-hat-documentation_managing-hosts">Providing feedback on Red Hat documentation</a></li>
<li><a href="#Overview-of-Hosts-in-Satellite_managing-hosts">2. Overview of hosts in Satellite</a></li>
<li><a href="#Browsing-Hosts-in-satellite_web_UI_managing-hosts">3. Browsing Hosts in Satellite web UI</a></li>
<li><a href="#Administering_Hosts_managing-hosts">4. Administering hosts</a>
<ul class="sectlevel2">
<li><a href="#Creating_a_Host_managing-hosts">4.1. Creating a host in Red&#160;Hat Satellite</a></li>
<li><a href="#Cloning_Hosts_managing-hosts">4.2. Cloning hosts</a></li>
<li><a href="#Associating_a_Virtual_Machine_from_a_Hypervisor_managing-hosts">4.3. Associating a virtual machine with Satellite from a hypervisor</a></li>
<li><a href="#Editing_the_System_Purpose_of_a_Host_managing-hosts">4.4. Editing the system purpose of a host</a></li>
<li><a href="#Editing_the_System_Purpose_of_Multiple_Hosts_managing-hosts">4.5. Editing the system purpose of multiple hosts</a></li>
<li><a href="#Changing_a_Module_Stream_for_a_Host_managing-hosts">4.6. Changing a module stream for a host</a></li>
<li><a href="#Enabling_Custom_Repositories_on_Content_Hosts_managing-hosts">4.7. Enabling custom repositories on content hosts</a></li>
<li><a href="#adding-a-host-to-a-host-collection_managing-hosts">4.8. Adding a host to a host collection</a></li>
<li><a href="#using-the-details-tab_managing-hosts">4.9. Using the Details tab</a></li>
<li><a href="#Changing_the_Content_Source_of_a_Host_managing-hosts">4.10. Changing the content source of a host</a></li>
<li><a href="#Changing_the_Environment_of_a_Host_managing-hosts">4.11. Changing the environment of a host</a></li>
<li><a href="#Changing_the_Managed_Status_of_a_Host_managing-hosts">4.12. Changing the managed status of a host</a></li>
<li><a href="#enabling-tracer-on-a-host_managing-hosts">4.13. Enabling Tracer on a host</a></li>
<li><a href="#restarting-applications-on-a-host_managing-hosts">4.14. Restarting applications on a host</a></li>
<li><a href="#Assigning_a_Host_to_a_Specific_Organization_managing-hosts">4.15. Assigning a host to a specific organization</a></li>
<li><a href="#Assigning_a_Host_to_a_Specific_Location_managing-hosts">4.16. Assigning a host to a specific location</a></li>
<li><a href="#switching-between-hosts_managing-hosts">4.17. Switching between hosts</a></li>
<li><a href="#Viewing_Host_Details_from_a_Content_Host_managing-hosts">4.18. Viewing host details from a content host</a></li>
<li><a href="#selecting-host-columns_managing-hosts">4.19. Selecting host columns</a></li>
<li><a href="#Removing_a_Host_from_Server_managing-hosts">4.20. Removing a host from Satellite</a></li>
<li><a href="#lifecycle_status_of_rhel_hosts_managing-hosts">4.21. Lifecycle status of RHEL hosts</a></li>
</ul>
</li>
<li><a href="#Working_with_Host_Groups_managing-hosts">5. Working with host groups</a>
<ul class="sectlevel2">
<li><a href="#Host_Group_Settings_and_Nested_Host_Groups_managing-hosts">5.1. Host group settings and nested host groups</a></li>
<li><a href="#Creating_a_Host_Group_managing-hosts">5.2. Creating a host group</a></li>
<li><a href="#Creating_a_Host_Group_for_each_Lifecycle_Environment_managing-hosts">5.3. Creating a host group for each lifecycle environment</a></li>
<li><a href="#adding-a-host-to-a-host-group_managing-hosts">5.4. Adding a host to a host group</a></li>
<li><a href="#Changing_the_Host_Group_of_a_Host_managing-hosts">5.5. Changing the host group of a host</a></li>
</ul>
</li>
<li><a href="#registering_hosts_to_server_managing-hosts">6. Registering hosts and setting up host integration</a>
<ul class="sectlevel2">
<li><a href="#supported-clients-in-registration_managing-hosts">6.1. Supported clients in registration</a></li>
<li><a href="#registration-methods_managing-hosts">6.2. Registration methods</a></li>
<li><a href="#Registering_Hosts_by_Using_Global_Registration_managing-hosts">6.3. Registering hosts by using global registration</a></li>
<li><a href="#Registering_Hosts_by_Using_the_Bootstrap_Script_managing-hosts">6.4. Registering hosts by using the bootstrap script</a></li>
<li><a href="#Installing_Tracer_managing-hosts">6.5. Installing Tracer</a></li>
<li><a href="#installing-and-configuring-puppet-agent-during-host-registration_managing-hosts">6.6. Installing and configuring Puppet agent during host registration</a></li>
<li><a href="#Installing_and_Configuring_Puppet_Agent_Manually_managing-hosts">6.7. Installing and configuring Puppet agent manually</a></li>
</ul>
</li>
<li><a href="#Adding_Network_Interfaces_managing-hosts">7. Adding network interfaces</a>
<ul class="sectlevel2">
<li><a href="#Adding_a_Physical_Interface_managing-hosts">7.1. Adding a physical interface</a></li>
<li><a href="#Adding_a_Virtual_Interface_managing-hosts">7.2. Adding a virtual interface</a></li>
<li><a href="#Adding_a_Bonded_Interface_managing-hosts">7.3. Adding a bonded interface</a></li>
<li><a href="#Bonding_Modes_Available_managing-hosts">7.4. Bonding modes available in Satellite</a></li>
<li><a href="#Adding_a_Baseboard_Management_Controller_Interface_managing-hosts">7.5. Adding a baseboard management controller (BMC) interface</a></li>
</ul>
</li>
<li><a href="#Upgrading_Hosts_to_Next_Major_Release_managing-hosts">8. Upgrading hosts to next major Red&#160;Hat Enterprise Linux release</a></li>
<li><a href="#converting-a-host-to-rhel_managing-hosts">9. Converting a host to Red&#160;Hat Enterprise Linux</a>
<ul class="sectlevel2">
<li><a href="#ansible-variables-for-conversion_managing-hosts">9.1. Ansible variables for conversion</a></li>
</ul>
</li>
<li><a href="#Host_Management_and_Monitoring_Using_Cockpit_managing-hosts">10. Host management and monitoring using RHEL web console</a>
<ul class="sectlevel2">
<li><a href="#Enabling_Cockpit_on_Server_managing-hosts">10.1. Enabling RHEL web console on Satellite</a></li>
<li><a href="#Managing_and_Monitoring_Hosts_Using_Cockpit_managing-hosts">10.2. Managing and monitoring hosts using RHEL web console</a></li>
<li><a href="#disabling-cockpit-on-project_managing-hosts">10.3. Disabling RHEL web console on Satellite</a></li>
</ul>
</li>
<li><a href="#Monitoring_Hosts_Using_Red_Hat_Insights_managing-hosts">11. Monitoring hosts using Red&#160;Hat Insights</a>
<ul class="sectlevel2">
<li><a href="#access_to_information_from_insights_in_Satellite_managing-hosts">11.1. Access to information from Insights in Satellite</a></li>
<li><a href="#excluding-hosts-from-rh-cloud-and-insights-client-reports_managing-hosts">11.2. Excluding hosts from rh-cloud and insights-client reports</a></li>
<li><a href="#deploying-red-hat-insights-using-the-ansible-role_managing-hosts">11.3. Deploying Red&#160;Hat Insights using the Ansible role</a></li>
<li><a href="#configuring_synchronization_of_insights_recommendations_for_hosts_managing-hosts">11.4. Configuring synchronization of Insights recommendations for hosts</a></li>
<li><a href="#configuring_automatic_removal_of_hosts_from_the_insights_inventory_managing-hosts">11.5. Configuring automatic removal of hosts from the Insights Inventory</a></li>
<li><a href="#Creating_an_Insights_Remediation_Plan_for_Hosts_managing-hosts">11.6. Creating an Insights remediation plan for hosts</a></li>
</ul>
</li>
<li><a href="#Using_Report_Templates_to_Monitor_Hosts_managing-hosts">12. Using report templates to monitor hosts</a>
<ul class="sectlevel2">
<li><a href="#Generating_Host_Monitoring_Reports_managing-hosts">12.1. Generating host monitoring reports</a></li>
<li><a href="#Creating_a_Report_Template_managing-hosts">12.2. Creating a report template</a></li>
<li><a href="#Exporting_Report_Templates_managing-hosts">12.3. Exporting report templates</a></li>
<li><a href="#Exporting_Report_Templates_Using_the_API_managing-hosts">12.4. Exporting report templates using the Satellite API</a></li>
<li><a href="#Importing_Report_Templates_managing-hosts">12.5. Importing report templates</a></li>
<li><a href="#Importing_Report_Templates_Using_the_API_managing-hosts">12.6. Importing report templates using the Satellite API</a></li>
<li><a href="#Generating_a_List_of_Installed_Packages_managing-hosts">12.7. Generating a list of installed packages</a></li>
<li><a href="#Creating_a_Report_Template_to_Monitor_Entitlements_managing-hosts">12.8. Creating a report template to monitor entitlements</a></li>
<li><a href="#Report_Template_Safe_Mode_managing-hosts">12.9. Report template safe mode</a></li>
</ul>
</li>
<li><a href="#Configuring_Host_Collections_managing-hosts">13. Configuring host collections</a>
<ul class="sectlevel2">
<li><a href="#Creating_a_Host_Collection_managing-hosts">13.1. Creating a host collection</a></li>
<li><a href="#Cloning_a_Host_Collection_managing-hosts">13.2. Cloning a host collection</a></li>
<li><a href="#Removing_a_Host_Collection_managing-hosts">13.3. Removing a host collection</a></li>
<li><a href="#adding-hosts-to-a-host-collection-in-bulk_managing-hosts">13.4. Adding hosts to a host collection in bulk</a></li>
<li><a href="#Removing_a_Host_From_a_Host_Collection_managing-hosts">13.5. Removing a host from a host collection</a></li>
<li><a href="#Adding_Content_to_a_Host_Collection_managing-hosts">13.6. Adding content to a host collection</a></li>
</ul>
</li>
<li><a href="#Configuring_and_Setting_Up_Remote_Jobs_managing-hosts">14. Configuring and setting up remote jobs</a>
<ul class="sectlevel2">
<li><a href="#Remote-Execution-in-Satellite_managing-hosts">14.1. Remote execution in Red&#160;Hat Satellite</a></li>
<li><a href="#remote-execution-workflow_managing-hosts">14.2. Remote execution workflow</a></li>
<li><a href="#permissions-for-remote-execution_managing-hosts">14.3. Permissions for remote execution</a></li>
<li><a href="#transport-modes-for-remote-execution_managing-hosts">14.4. Transport modes for remote execution</a></li>
<li><a href="#Configuring_a_Host_to_Use_the_Pull_Client_managing-hosts">14.5. Configuring a host to use the pull client</a></li>
<li><a href="#creating-a-job-template_managing-hosts">14.6. Creating a job template</a></li>
<li><a href="#importing-an-ansible-playbook-by-name_managing-hosts">14.7. Importing an Ansible playbook by name</a></li>
<li><a href="#importing-all-available-ansible-playbooks_managing-hosts">14.8. Importing all available Ansible playbooks</a></li>
<li><a href="#Configuring_the_Fallback_to_any_capsule_Remote_Execution_Setting_in_satellite_managing-hosts">14.9. Configuring the fallback to any Capsule remote execution setting in Satellite</a></li>
<li><a href="#Configuring_the_Global_capsule_Remote_Execution_Setting_in_satellite_managing-hosts">14.10. Configuring the global Capsule remote execution setting in Satellite</a></li>
<li><a href="#setting-an-alternative-directory-for-remote-execution-jobs-in-push-mode_managing-hosts">14.11. Setting an alternative directory for remote execution jobs in push mode</a></li>
<li><a href="#setting-an-alternative-directory-for-remote-execution-jobs-in-pull-mode_managing-hosts">14.12. Setting an alternative directory for remote execution jobs in pull mode</a></li>
<li><a href="#altering-the-privilege-elevation-method_managing-hosts">14.13. Altering the privilege elevation method</a></li>
<li><a href="#Distributing_SSH_Keys_for_Remote_Execution_managing-hosts">14.14. Distributing SSH keys for remote execution</a></li>
<li><a href="#distributing-ssh-keys-for-remote-execution-manually_managing-hosts">14.15. Distributing SSH keys for remote execution manually</a></li>
<li><a href="#adding-a-passphrase-to-ssh-key-used-for-remote-execution_managing-hosts">14.16. Adding a passphrase to SSH key used for remote execution</a></li>
<li><a href="#Using_the_satellite_API_to_Obtain_SSH_Keys_for_Remote_Execution_managing-hosts">14.17. Using the Satellite API to obtain SSH keys for remote execution</a></li>
<li><a href="#Configuring_a_Kickstart_Template_to_Distribute_SSH_Keys_During_Provisioning_managing-hosts">14.18. Configuring a Kickstart template to distribute SSH keys during provisioning</a></li>
<li><a href="#configuring-a-keytab-for-kerberos-ticket-granting-tickets_managing-hosts">14.19. Configuring a keytab for Kerberos ticket granting tickets</a></li>
<li><a href="#configuring-kerberos-authentication-for-remote-execution_managing-hosts">14.20. Configuring Kerberos authentication for remote execution</a></li>
<li><a href="#setting-up-job-templates_managing-hosts">14.21. Setting up job templates</a></li>
<li><a href="#executing-a-remote-job_managing-hosts">14.22. Executing a remote job</a></li>
<li><a href="#advanced-settings-in-the-job-wizard_managing-hosts">14.23. Advanced settings in the job wizard</a></li>
<li><a href="#using-extended-cron-lines_managing-hosts">14.24. Using extended cron lines</a></li>
<li><a href="#scheduling-a-recurring-ansible-job-for-a-host_managing-hosts">14.25. Scheduling a recurring Ansible job for a host</a></li>
<li><a href="#Scheduling_a_Recurring_Ansible_Job_for_a_Host_Group_managing-hosts">14.26. Scheduling a recurring Ansible job for a host group</a></li>
<li><a href="#Monitoring_Jobs_managing-hosts">14.27. Monitoring jobs</a></li>
<li><a href="#setting-the-job-rate-limit-on-capsule_managing-hosts">14.28. Setting the job rate limit on Capsule</a></li>
</ul>
</li>
<li><a href="#Host_Status_managing-hosts">15. Host status in Satellite</a>
<ul class="sectlevel2">
<li><a href="#host-global-status-overview_managing-hosts">15.1. Host global status overview</a></li>
<li><a href="#host-substatus-overview_managing-hosts">15.2. Host sub-status overview</a></li>
</ul>
</li>
<li><a href="#Synchronizing_Templates_Repositories_managing-hosts">16. Synchronizing template repositories</a>
<ul class="sectlevel2">
<li><a href="#Enabling_the_TemplateSync_plugin_managing-hosts">16.1. Enabling the TemplateSync plug-in</a></li>
<li><a href="#Configuring_the_TemplateSync_plugin_managing-hosts">16.2. Configuring the TemplateSync plug-in</a></li>
<li><a href="#using-repository-sources_managing-hosts">16.3. Using repository sources</a></li>
<li><a href="#Importing_and_Exporting_Templates_managing-hosts">16.4. Importing and exporting templates</a></li>
<li><a href="#Uninstalling_the_Foreman_Templates_Plug-in_managing-hosts">16.5. Uninstalling the Foreman templates plug-in</a></li>
</ul>
</li>
<li><a href="#managing-packages_managing-hosts">17. Managing packages</a>
<ul class="sectlevel2">
<li><a href="#Enabling_and_Disabling_Repositories_on_Hosts_managing-hosts">17.1. Enabling and disabling repositories on hosts</a></li>
<li><a href="#Installing_Packages_on_a_Host_managing-hosts">17.2. Installing packages on a host</a></li>
<li><a href="#upgrading-packages-on-a-host_managing-hosts">17.3. Upgrading packages on a host</a></li>
<li><a href="#removing-packages-from-a-host_managing-hosts">17.4. Removing packages from a host</a></li>
</ul>
</li>
<li><a href="#Template_Writing_Reference_managing-hosts">Appendix A: Template writing reference</a>
<ul class="sectlevel2">
<li><a href="#Accessing_the_Template_Writing_Reference_managing-hosts">Accessing the template writing reference in the Satellite web UI</a></li>
<li><a href="#Using_Autocompletion_in_Templates_managing-hosts">Using autocompletion in templates</a></li>
<li><a href="#Writing_ERB_Templates_managing-hosts">Writing ERB templates</a></li>
<li><a href="#Troubleshooting_ERB_Templates_managing-hosts">Troubleshooting ERB templates</a></li>
<li><a href="#Generic_Project-specific_Macros_managing-hosts">Generic Satellite-specific macros</a></li>
<li><a href="#Template_Macros_managing-hosts">Template macros</a></li>
<li><a href="#Host_Specific_Variables_managing-hosts">Host-specific variables</a></li>
<li><a href="#Kickstart_Specific_Variables_managing-hosts">Kickstart-specific variables</a></li>
<li><a href="#Conditional_Statements_managing-hosts">Conditional statements</a></li>
<li><a href="#Parsing_Arrays_managing-hosts">Parsing arrays</a></li>
<li><a href="#Example_Template_Snippets_managing-hosts">Example template snippets</a></li>
</ul>
</li>
<li><a href="#Job_Template_Examples_and_Extensions_managing-hosts">Appendix B: Job template examples and extensions</a>
<ul class="sectlevel2">
<li><a href="#Customizing_Job_Templates_managing-hosts">Customizing job templates</a></li>
<li><a href="#default-job-template-categories_managing-hosts">Default job template categories</a></li>
<li><a href="#Example_restorecon_Template_managing-hosts">Example restorecon template</a></li>
<li><a href="#Rendering_a_restorecon_Template_managing-hosts">Rendering a restorecon template</a></li>
<li><a href="#Executing_a_restorecon_Template_on_Multiple_Hosts_managing-hosts">Executing a restorecon template on multiple hosts</a></li>
<li><a href="#Including_Power_Actions_in_Templates_managing-hosts">Including power actions in templates</a></li>
</ul>
</li>
<li><a href="#overview-of-the-host-columns_managing-hosts">Appendix C: Overview of the host columns</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="making-open-source-more-inclusive_managing-hosts"><a class="anchor" href="#making-open-source-more-inclusive_managing-hosts"></a>1. Making open source more inclusive</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Red Hat is committed to replacing problematic language in our code, documentation, and web properties.
Because of the enormity of this endeavor, these changes are being updated gradually and where possible.
For more details, see <a href="https://www.redhat.com/en/blog/making-open-source-more-inclusive-eradicating-problematic-language">our CTO Chris Wright&#8217;s message</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="providing-feedback-on-red-hat-documentation_managing-hosts"><a class="anchor" href="#providing-feedback-on-red-hat-documentation_managing-hosts"></a>Providing feedback on Red Hat documentation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We appreciate your input on our documentation.
Please let us know how we could make it better.</p>
</div>
<div class="paragraph">
<p>You can submit feedback by filing a ticket in Bugzilla:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to the <a href="https://bugzilla.redhat.com/enter_bug.cgi?product=Red%20Hat%20Satellite">Bugzilla</a> website.</p>
</li>
<li>
<p>In the <strong>Component</strong> field, use <code>Documentation</code>.</p>
</li>
<li>
<p>In the <strong>Description</strong> field, enter your suggestion for improvement.
Include a link to the relevant parts of the documentation.</p>
</li>
<li>
<p>Click <strong>Submit Bug</strong>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Overview-of-Hosts-in-Satellite_managing-hosts"><a class="anchor" href="#Overview-of-Hosts-in-Satellite_managing-hosts"></a>2. Overview of hosts in Satellite</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A host is any Linux client that Red&#160;Hat Satellite manages.
Hosts can be physical or virtual.</p>
</div>
<div class="paragraph">
<p>You can deploy virtual hosts on any platform supported by Red&#160;Hat Satellite,
such as Amazon EC2, Google Compute Engine, KVM, libvirt, Microsoft Azure, OpenStack, Red&#160;Hat&#160;Virtualization, Rackspace Cloud Services, or VMware vSphere.</p>
</div>
<div class="paragraph">
<p>With Satellite, you can manage hosts at scale, including monitoring, provisioning, remote execution, configuration management, software management, and subscription management.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Browsing-Hosts-in-satellite_web_UI_managing-hosts"><a class="anchor" href="#Browsing-Hosts-in-satellite_web_UI_managing-hosts"></a>3. Browsing Hosts in Satellite web UI</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the Satellite web UI, you can browse all hosts recognized by Satellite, grouped by type:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>All Hosts</strong> &#8211; a list of all hosts recognized by Satellite.</p>
</li>
<li>
<p><strong>Discovered Hosts</strong> &#8211; a list of bare-metal hosts detected on the provisioning network by the Discovery plug-in.</p>
</li>
<li>
<p><strong>Content Hosts</strong> &#8211; a list of hosts that manage tasks related to content and subscriptions.</p>
</li>
<li>
<p><strong>Host Collections</strong> &#8211; a list of user-defined collections of hosts used for bulk actions such as errata installation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To search for a host, type in the <strong>Search</strong> field, and use an asterisk (*) to perform a partial string search.
For example, if searching for a content host named <code>server.example.com</code>, click the <strong>Content Hosts</strong> page and type <code>server*</code> in the <strong>Search</strong> field.
Alternatively, <code>*ver*</code> will also find the content host <code>server.example.com</code>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Satellite&#160;Server is listed as a host itself even if it is not self-registered.
Do not delete Satellite&#160;Server from the list of hosts.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Administering_Hosts_managing-hosts"><a class="anchor" href="#Administering_Hosts_managing-hosts"></a>4. Administering hosts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter describes creating, registering, administering, and removing hosts.</p>
</div>
<div class="sect2">
<h3 id="Creating_a_Host_managing-hosts"><a class="anchor" href="#Creating_a_Host_managing-hosts"></a>4.1. Creating a host in Red&#160;Hat Satellite</h3>
<div class="paragraph">
<p>Use this procedure to create a host in Red&#160;Hat Satellite.
To use the CLI instead of the Satellite web UI, see the <a href="#cli-creating-a-host_managing-hosts">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, click <strong>Hosts</strong> &gt; <strong>Create Host</strong>.</p>
</li>
<li>
<p>On the <strong>Host</strong> tab, enter the required details.</p>
</li>
<li>
<p>Click the <strong>Ansible Roles</strong> tab, and from the <strong>Ansible Roles</strong> list, select one or more roles that you want to add to the host.
Use the <strong>arrow</strong> icon to manage the roles that you add or remove.</p>
</li>
<li>
<p>On the <strong>Puppet Classes</strong> tab, select the Puppet classes you want to include.</p>
</li>
<li>
<p>On the <strong>Interfaces</strong> tab:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>For each interface, click <strong>Edit</strong> in the <strong>Actions</strong> column and configure the following settings as required:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>&#8201;&#8212;&#8201;For a Bond or BMC interface, use the <strong>Type</strong> list and select the interface type.</p>
</li>
<li>
<p><strong>MAC address</strong>&#8201;&#8212;&#8201;Enter the MAC address.</p>
</li>
<li>
<p><strong>DNS name</strong>&#8201;&#8212;&#8201;Enter the DNS name that is known to the DNS server.
This is used for the host part of the FQDN.</p>
</li>
<li>
<p><strong>Domain</strong>&#8201;&#8212;&#8201;Select the domain name of the provisioning network.
This automatically updates the <strong>Subnet</strong> list with a selection of suitable subnets.</p>
</li>
<li>
<p><strong>IPv4 Subnet</strong>&#8201;&#8212;&#8201;Select an IPv4 subnet for the host from the list.</p>
</li>
<li>
<p><strong>IPv6 Subnet</strong>&#8201;&#8212;&#8201;Select an IPv6 subnet for the host from the list.</p>
</li>
<li>
<p><strong>IPv4 address</strong>&#8201;&#8212;&#8201;If IP address management (IPAM) is enabled for the subnet, the IP address is automatically suggested.
Alternatively, you can enter an address.
The address can be omitted if provisioning tokens are enabled, if the domain does not mange DNS, if the subnet does not manage reverse DNS, or if the subnet does not manage DHCP reservations.</p>
</li>
<li>
<p><strong>IPv6 address</strong>&#8201;&#8212;&#8201;If IP address management (IPAM) is enabled for the subnet, the IP address is automatically suggested.
Alternatively, you can enter an address.</p>
</li>
<li>
<p><strong>Managed</strong>&#8201;&#8212;&#8201;Select this checkbox to configure the interface during provisioning to use the Capsule provided DHCP and DNS services.</p>
</li>
<li>
<p><strong>Primary</strong>&#8201;&#8212;&#8201;Select this checkbox to use the DNS name from this interface as the host portion of the FQDN.</p>
</li>
<li>
<p><strong>Provision</strong>&#8201;&#8212;&#8201;Select this checkbox to use this interface for provisioning.
This means TFTP boot will take place using this interface, or in case of image based provisioning, the script to complete the provisioning will be executed through this interface.
Note that many provisioning tasks, such as downloading packages by <strong>anaconda</strong> or Puppet setup in a <code>%post</code> script, will use the primary interface.</p>
</li>
<li>
<p><strong>Virtual NIC</strong>&#8201;&#8212;&#8201;Select this checkbox if this interface is not a physical device.
This setting has two options:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Tag</strong>&#8201;&#8212;&#8201;Optionally set a VLAN tag.
If unset, the tag will be the VLAN ID of the subnet.</p>
</li>
<li>
<p><strong>Attached to</strong>&#8201;&#8212;&#8201;Enter the device name of the interface this virtual interface is attached to.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>OK</strong> to save the interface configuration.</p>
</li>
<li>
<p>Optionally, click <strong>Add Interface</strong> to include an additional network interface.
For more information, see <a href="#Adding_Network_Interfaces_managing-hosts">Adding network interfaces</a>.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to apply the changes and exit.</p>
</li>
</ol>
</div>
</li>
<li>
<p>On the <strong>Operating System</strong> tab, enter the required details.
For Red&#160;Hat operating systems, select <strong>Synced Content</strong> for <strong>Media Selection</strong>.
If you want to use non Red Hat operating systems, select <strong>All Media</strong>, then select the installation media from the <strong>Media Selection</strong> list.
You can select a partition table from the list or enter a custom partition table in the <strong>Custom partition table</strong> field.
You cannot specify both.</p>
</li>
<li>
<p>On the <strong>Parameters</strong> tab, click <strong>Add Parameter</strong> to add any parameter variables that you want to pass to job templates at run time.
This includes all Puppet Class, Ansible playbook parameters and host parameters that you want to associate with the host.
To use a parameter variable with an Ansible job template, you must add a <strong>Host Parameter</strong>.</p>
<div class="paragraph">
<p>When you create a Red&#160;Hat Enterprise Linux 8 host, you can set system purpose attributes.
System purpose attributes define what subscriptions to attach automatically on host creation.
In the <strong>Host Parameters</strong> area, enter the following parameter names with the corresponding values.
For the list of values, see <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/performing_a_standard_rhel_8_installation/graphical-installation_graphical-installation?extIdCarryOver=true&amp;sc_cid=701f2000001Css5AAC#system_purposes-adoc_connect-to-red-hat">Introduction to System Purpose</a> in <em>Performing a standard RHEL 8 installation</em>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>syspurpose_role</code></p>
</li>
<li>
<p><code>syspurpose_sla</code></p>
</li>
<li>
<p><code>syspurpose_usage</code></p>
</li>
<li>
<p><code>syspurpose_addons</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you want to create a host with pull mode for remote job execution, add the <code>enable-remote-execution-pull</code> parameter with type <code>boolean</code> set to <code>true</code>.
For more information, see <a href="#transport-modes-for-remote-execution_managing-hosts">Transport modes for remote execution</a>.</p>
</div>
</li>
<li>
<p>On the <strong>Additional Information</strong> tab, enter additional information about the host.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to complete your provisioning request.</p>
</li>
</ol>
</div>
<div id="cli-creating-a-host_managing-hosts" class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>To create a host associated to a host group, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host create \
--ask-root-password yes \
--hostgroup "<em>My_Host_Group</em>" \
--interface="primary=true, \
            provision=true, \
            mac=<em>My_MAC_Address</em>, \
            ip=<em>My_IP_Address</em>" \
--location "<em>My_Location</em>" \
--name "<em>My_Host_Name</em>" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>This command prompts you to specify the root password.
It is required to specify the host&#8217;s IP and MAC address.
Other properties of the primary network interface can be inherited from the host group or set using the <code>--subnet</code>, and <code>--domain</code> parameters.
You can set additional interfaces using the <code>--interface</code> option, which accepts a list of key-value pairs.
For the list of available interface settings, enter the <code>hammer host create --help</code> command.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Cloning_Hosts_managing-hosts"><a class="anchor" href="#Cloning_Hosts_managing-hosts"></a>4.2. Cloning hosts</h3>
<div class="paragraph">
<p>You can clone existing hosts.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts &gt; All Hosts</strong>.</p>
</li>
<li>
<p>In the <strong>Actions</strong> menu, click <strong>Clone</strong>.</p>
</li>
<li>
<p>On the <strong>Host</strong> tab, ensure to provide a <strong>Name</strong> different from the original host.</p>
</li>
<li>
<p>On the <strong>Interfaces</strong> tab, ensure to provide a different IP address.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to clone the host.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For more information, see <a href="#Creating_a_Host_managing-hosts">Creating a host in Red&#160;Hat Satellite</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Associating_a_Virtual_Machine_from_a_Hypervisor_managing-hosts"><a class="anchor" href="#Associating_a_Virtual_Machine_from_a_Hypervisor_managing-hosts"></a>4.3. Associating a virtual machine with Satellite from a hypervisor</h3>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Compute Resources</strong>.</p>
</li>
<li>
<p>Select a compute resource.</p>
</li>
<li>
<p>On the <strong>Virtual Machines</strong> tab, click <strong>Associate VM</strong> from the <strong>Actions</strong> menu.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Editing_the_System_Purpose_of_a_Host_managing-hosts"><a class="anchor" href="#Editing_the_System_Purpose_of_a_Host_managing-hosts"></a>4.4. Editing the system purpose of a host</h3>
<div class="paragraph">
<p>You can edit the system purpose attributes for a Red&#160;Hat Enterprise Linux host.
System purpose allows you to set the intended use of a system on your network and improves reporting accuracy in the Subscriptions service of the Red Hat Hybrid Cloud Console.
For more information about system purpose, see <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/performing_a_standard_rhel_8_installation/graphical-installation_graphical-installation?extIdCarryOver=true&amp;sc_cid=701f2000001Css5AAC#system_purposes-adoc_connect-to-red-hat">Introduction to System Purpose</a> in <em>Performing a standard RHEL 8 installation</em>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The host that you want to edit must be registered with the subscription-manager.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>.</p>
</li>
<li>
<p>Click the name of the host you want to modify.</p>
</li>
<li>
<p>On the <strong>Overview</strong> tab, click <strong>Edit</strong> on the <strong>System purpose</strong> card.</p>
</li>
<li>
<p>Select the system purpose attributes for your host.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Log in to the host and edit the required system purpose attributes.
For example, set the usage type to <code>Production</code>, the role to <code>Red&#160;Hat Enterprise Linux Server</code>, and add the <code>addon</code> add on.
For the list of values, see <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/performing_a_standard_rhel_8_installation/graphical-installation_graphical-installation?extIdCarryOver=true&amp;sc_cid=701f2000001Css5AAC#system_purposes-adoc_connect-to-red-hat">Introduction to System Purpose</a> in  <em>Performing a standard RHEL 8 installation</em>.</p>
<div class="listingblock">
<div class="content">
<pre># subscription-manager syspurpose set usage '<em>Production</em>'
# subscription-manager syspurpose set role '<em>Red Hat Enterprise Linux Server</em>'
# subscription-manager syspurpose add addons '<em>your_addon</em>'</pre>
</div>
</div>
</li>
<li>
<p>Verify the system purpose attributes for this host:</p>
<div class="listingblock">
<div class="content">
<pre># subscription-manager syspurpose</pre>
</div>
</div>
</li>
<li>
<p>Automatically attach subscriptions to this host:</p>
<div class="listingblock">
<div class="content">
<pre># subscription-manager attach --auto</pre>
</div>
</div>
</li>
<li>
<p>Verify the system purpose status for this host:</p>
<div class="listingblock">
<div class="content">
<pre># subscription-manager status</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Editing_the_System_Purpose_of_Multiple_Hosts_managing-hosts"><a class="anchor" href="#Editing_the_System_Purpose_of_Multiple_Hosts_managing-hosts"></a>4.5. Editing the system purpose of multiple hosts</h3>
<div class="paragraph">
<p>You can edit the system purpose attributes of Red&#160;Hat Enterprise Linux hosts.
System purpose attributes define which subscriptions to attach automatically to hosts.
For more information about system purpose, see <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/performing_a_standard_rhel_8_installation/graphical-installation_graphical-installation?extIdCarryOver=true&amp;sc_cid=701f2000001Css5AAC#system_purposes-adoc_connect-to-red-hat">Introduction to System Purpose</a> in <em>Performing a standard RHEL 8 installation</em>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The hosts that you want to edit must be registered with the subscription-manager.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong> and select Red&#160;Hat Enterprise Linux 8 hosts that you want to edit.</p>
</li>
<li>
<p>Click the <strong>Select Action</strong> list and select <strong>Manage System Purpose</strong>.</p>
</li>
<li>
<p>Select the system purpose attributes that you want to assign to the selected hosts.
You can select one of the following values:</p>
<div class="ulist">
<ul>
<li>
<p>A specific attribute to set an all selected hosts.</p>
</li>
<li>
<p><strong>No Change</strong> to keep the attribute set on the selected hosts.</p>
</li>
<li>
<p><strong>None (Clear)</strong> to clear the attribute on the selected hosts.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Assign</strong>.</p>
</li>
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong> and select the same Red&#160;Hat Enterprise Linux 8 hosts to automatically attach subscriptions based on the system purpose.</p>
</li>
<li>
<p>Click the <strong>Select Action</strong> list and select <strong>Manage Subscriptions</strong>.</p>
</li>
<li>
<p>Click <strong>Auto-Attach</strong> to attach subscriptions to all selected hosts automatically based on their system role.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Changing_a_Module_Stream_for_a_Host_managing-hosts"><a class="anchor" href="#Changing_a_Module_Stream_for_a_Host_managing-hosts"></a>4.6. Changing a module stream for a host</h3>
<div class="paragraph">
<p>If you have a host running Red&#160;Hat Enterprise Linux 8, you can modify the module stream for the repositories you install.</p>
</div>
<div class="paragraph">
<p>You can enable, disable, install, update, and remove module streams from your host in the Satellite web UI.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>.</p>
</li>
<li>
<p>Click the name of the host you want to modify.</p>
</li>
<li>
<p>Click the <strong>Content</strong> tab, then click the <strong>Module streams</strong> tab.</p>
</li>
<li>
<p>Click the vertical ellipsis next to the module and select the action you want to perform.
You get a REX job notification once the remote execution job is complete.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Enabling_Custom_Repositories_on_Content_Hosts_managing-hosts"><a class="anchor" href="#Enabling_Custom_Repositories_on_Content_Hosts_managing-hosts"></a>4.7. Enabling custom repositories on content hosts</h3>
<div class="paragraph">
<p>As a Simple Content Access (SCA) user, you can enable all custom repositories on content hosts using the Satellite web UI.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong> and select a host.</p>
</li>
<li>
<p>Select the <strong>Content</strong> tab, then select <strong>Repository sets</strong>.</p>
</li>
<li>
<p>From the dropdown, you can filter the <strong>Repository type</strong> column to <strong>Custom</strong>.</p>
</li>
<li>
<p>Select the desired number of repositories or click the <strong>Select All</strong> checkbox to select all repositories, then click the vertical ellipsis, and select <strong>Override to Enabled</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="adding-a-host-to-a-host-collection_managing-hosts"><a class="anchor" href="#adding-a-host-to-a-host-collection_managing-hosts"></a>4.8. Adding a host to a host collection</h3>
<div class="paragraph">
<p>You can add a host to a host collection in the Satellite web UI.</p>
</div>
<div class="paragraph">
<div class="title">Prerequisites</div>
<p>A host must be registered to Red&#160;Hat Satellite to add it to a Host Collection.
For more information about registering hosts, see <a href="#Registering_Hosts_by_Using_Global_Registration_managing-hosts">Registering hosts by using global registration</a>.</p>
</div>
<div class="paragraph">
<p>Note that if you add a host to a host collection, the Satellite auditing system does not log the change.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>.</p>
</li>
<li>
<p>Click the name of the host you want to modify.</p>
</li>
<li>
<p>In the <strong>Host collections</strong> card, click the vertical ellipsis and select <strong>Add host to collections</strong>.</p>
</li>
<li>
<p>Select the host collection.</p>
</li>
<li>
<p>Click <strong>Add</strong>.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>To add a host to a host collection, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host-collection add-host \
--host-ids <em>My_Host_ID_1</em> \
--id <em>My_Host_Collection_ID</em></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="using-the-details-tab_managing-hosts"><a class="anchor" href="#using-the-details-tab_managing-hosts"></a>4.9. Using the Details tab</h3>
<div class="paragraph">
<p>In Satellite, you can view details of a host name in the <strong>Details</strong> tab.
You can expand and collapse individual cards and all links.
Your browser remembers the card expansion and collapse state.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>.</p>
</li>
<li>
<p>Click the name of the host you want to view.</p>
</li>
<li>
<p>Select the <strong>Details</strong> tab.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The cards in the <strong>Details</strong> tab show details for the <strong>System properties</strong>, <strong>BIOS</strong>, <strong>Networking interfaces</strong>, <strong>Operating system</strong>, <strong>Provisioning templates</strong>, and <strong>Provisioning</strong>.
Registered content hosts show additional cards for <strong>Registration details</strong>, <strong>Installed products</strong>, and <strong>HW properties</strong> providing information about <strong>Model</strong>, <strong>Number of CPU(s)</strong>, <strong>Sockets</strong>, <strong>Cores per socket</strong> and <strong>RAM</strong>.</p>
</div>
<div class="paragraph">
<p>In the  <strong>Operating system</strong> card, you can see details for the <strong>Architecture</strong>, <strong>OS</strong>, <strong>Boot time</strong>, and <strong>Kernel release</strong>.</p>
</div>
<div class="paragraph">
<p>There are interactive features for the following <strong>Details</strong> cards:</p>
</div>
<div class="olist arabic">
<div class="title">Networking interfaces</div>
<ol class="arabic">
<li>
<p>Click to collapse and expand each network interface.</p>
</li>
<li>
<p>Click the link to edit all network interfaces.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">System properties</div>
<ol class="arabic">
<li>
<p>Click to copy values to clipboard including <strong>Name</strong>, <strong>Subscription UUID</strong>, and <strong>Domain</strong>.</p>
</li>
<li>
<p>For hosts with virtual guests, click the chip to see the list of guests.</p>
</li>
<li>
<p>For hosts that are virtual guests, click the <strong>Virtual host</strong> link to view its host.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Provisioning templates</div>
<ol class="arabic">
<li>
<p>Click to view a template in a pop-up modal without leaving the page.</p>
</li>
<li>
<p>Click the pencil icon to edit a template.</p>
</li>
<li>
<p>Click the pop-out button in modal to view the template in a new tab.</p>
</li>
<li>
<p>Click the link in modal to edit the template.</p>
</li>
<li>
<p>Click the <em>Copy to clipboard</em> button in modal to get the template into clipboard.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Changing_the_Content_Source_of_a_Host_managing-hosts"><a class="anchor" href="#Changing_the_Content_Source_of_a_Host_managing-hosts"></a>4.10. Changing the content source of a host</h3>
<div class="paragraph">
<p>A content source is a Capsule that a host consumes content from.
Use this procedure to change the content source for a host.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>.</p>
</li>
<li>
<p>Click the name of the host you want to modify.</p>
</li>
<li>
<p>Click the vertical ellipsis icon next to the <strong>Edit</strong> button and select <strong>Change content source</strong>.</p>
</li>
<li>
<p>Select <strong>Content Source</strong>, <strong>Lifecycle Content View</strong>, and <strong>Content Source</strong> from the lists.</p>
</li>
<li>
<p>Click <strong>Change content source</strong>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Some lifecycle environments can be unavailable for selection if they are not synced on the selected content source.
For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_content/index#Adding_Lifecycle_Environments_content-management">Adding Lifecycle Environments to Capsule&#160;Servers</a> in <em>Managing content</em>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can either complete the content source change using remote execution or manually.
To update configuration on host using remote execution, click <strong>Run job invocation</strong>.
For more information about running remote execution jobs, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_hosts/index#configuring-and-setting-up-remote-jobs_managing-hosts">Configuring and Setting up Remote Jobs</a>.
To update the content source manually, execute the autogenerated commands from <strong>Change content source</strong> on the host.</p>
</div>
</div>
<div class="sect2">
<h3 id="Changing_the_Environment_of_a_Host_managing-hosts"><a class="anchor" href="#Changing_the_Environment_of_a_Host_managing-hosts"></a>4.11. Changing the environment of a host</h3>
<div class="paragraph">
<p>Use this procedure to change the environment of a host.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>.</p>
</li>
<li>
<p>Click the name of the host you want to modify.</p>
</li>
<li>
<p>Click the vertical ellipsis in the <strong>Content view details</strong> card and select <strong>Edit content view assignment</strong>.</p>
</li>
<li>
<p>Select the environment.</p>
</li>
<li>
<p>Select the content view.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Changing_the_Managed_Status_of_a_Host_managing-hosts"><a class="anchor" href="#Changing_the_Managed_Status_of_a_Host_managing-hosts"></a>4.12. Changing the managed status of a host</h3>
<div class="paragraph">
<p>Hosts provisioned by Satellite are Managed by default.
When a host is set to Managed, you can configure additional host parameters from Satellite&#160;Server.
These additional parameters are listed on the <strong>Operating System</strong> tab.
If you change any settings on the <strong>Operating System</strong> tab, they will not take effect until you set the host to build and reboot it.</p>
</div>
<div class="paragraph">
<p>If you need to obtain reports about configuration management on systems using an operating system not supported by Satellite, set the host to Unmanaged.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>.</p>
</li>
<li>
<p>Click the name of the host you want to modify.</p>
</li>
<li>
<p>Click <strong>Edit</strong>.</p>
</li>
<li>
<p>Click <strong>Manage host</strong> or <strong>Unmanage host</strong> to change the host&#8217;s status.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="enabling-tracer-on-a-host_managing-hosts"><a class="anchor" href="#enabling-tracer-on-a-host_managing-hosts"></a>4.13. Enabling Tracer on a host</h3>
<div class="paragraph">
<p>Use this procedure to enable Tracer on Satellite and access Traces.
Tracer displays a list of services and applications that need to be restarted.
Traces is the output generated by Tracer in the Satellite web UI.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Satellite Client 6 repository is synced</p>
</li>
<li>
<p>Satellite Client 6 repository is available in the content view and the lifecycle environment of the host</p>
</li>
<li>
<p>Satellite Client 6 repository is enabled for the host</p>
</li>
<li>
<p>Remote execution is enabled</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>.</p>
</li>
<li>
<p>Click the name of the host you want to modify.</p>
</li>
<li>
<p>On the <strong>Traces</strong> tab, click <strong>Enable Traces</strong>.</p>
</li>
<li>
<p>Select the provider to install <code>katello-host-tools-tracer</code> from the list.</p>
</li>
<li>
<p>Click <strong>Enable Tracer</strong>.
You get a REX job notification after the remote execution job is complete.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="restarting-applications-on-a-host_managing-hosts"><a class="anchor" href="#restarting-applications-on-a-host_managing-hosts"></a>4.14. Restarting applications on a host</h3>
<div class="paragraph">
<p>Use this procedure to restart applications from the Satellite web UI.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>.</p>
</li>
<li>
<p>Click the name of the hosts you want to modify.</p>
</li>
<li>
<p>Select the <strong>Traces</strong> tab.</p>
</li>
<li>
<p>Select applications that you want to restart.</p>
</li>
<li>
<p>Select <strong>Restart via remote execution</strong> from the <strong>Restart app</strong> list.
You will get a REX job notification once the remote execution job is complete.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Assigning_a_Host_to_a_Specific_Organization_managing-hosts"><a class="anchor" href="#Assigning_a_Host_to_a_Specific_Organization_managing-hosts"></a>4.15. Assigning a host to a specific organization</h3>
<div class="paragraph">
<p>Use this procedure to assign a host to a specific organization.
For general information about organizations and how to configure them, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/administering_red_hat_satellite/index#Managing_Organizations_admin">Managing Organizations</a> in <em>Administering Red&#160;Hat Satellite</em>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If your host is already registered with a different organization, you must first unregister the host before assigning it to a new organization.
To unregister the host, run <code>subscription-manager unregister</code> on the host.
After you assign the host to a new organization, you can re-register the host.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>.</p>
</li>
<li>
<p>Select the checkbox of the host you want to change.</p>
</li>
<li>
<p>From the <strong>Select Action</strong> list, select <strong>Assign Organization</strong>.
A new option window opens.</p>
</li>
<li>
<p>From the <strong>Select Organization</strong> list, select the organization that you want to assign your host to.
Select the checkbox <strong>Fix Organization on Mismatch</strong>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>A mismatch happens if there is a resource associated with a host, such as a domain or subnet, and at the same time not associated with the organization you want to assign the host to.
The option <strong>Fix Organization on Mismatch</strong> will add such a resource to the organization, and is therefore the recommended choice.
The option <strong>Fail on Mismatch</strong> will always result in an error message.
For example, reassigning a host from one organization to another will fail, even if there is no actual mismatch in settings.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Assigning_a_Host_to_a_Specific_Location_managing-hosts"><a class="anchor" href="#Assigning_a_Host_to_a_Specific_Location_managing-hosts"></a>4.16. Assigning a host to a specific location</h3>
<div class="paragraph">
<p>Use this procedure to assign a host to a specific location.
For general information about locations and how to configure them, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_content/index#Creating_a_Location_content-management">Creating a Location</a> in <em>Managing content</em>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>.</p>
</li>
<li>
<p>Select the checkbox of the host you want to change.</p>
</li>
<li>
<p>From the <strong>Select Action</strong> list, select <strong>Assign Location</strong>.
A new option window opens.</p>
</li>
<li>
<p>Navigate to the <strong>Select Location</strong> list and choose the location that you want for your host.
Select the checkbox <strong>Fix Location on Mismatch</strong>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>A mismatch happens if there is a resource associated with a host, such as a domain or subnet, and at the same time not associated with the location you want to assign the host to.
The option <strong>Fix Location on Mismatch</strong> will add such a resource to the location, and is therefore the recommended choice.
The option <strong>Fail on Mismatch</strong> will always result in an error message.
For example, reassigning a host from one location to another will fail, even if there is no actual mismatch in settings.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="switching-between-hosts_managing-hosts"><a class="anchor" href="#switching-between-hosts_managing-hosts"></a>4.17. Switching between hosts</h3>
<div class="paragraph">
<p>When you are on a particular host in the Satellite web UI, you can navigate between hosts without leaving the page by using the host switcher.
Click <strong>⇄</strong> next to the hostname.
This displays a list of hosts in alphabetical order with a pagination arrow and a search bar to find the host you are looking for.</p>
</div>
</div>
<div class="sect2">
<h3 id="Viewing_Host_Details_from_a_Content_Host_managing-hosts"><a class="anchor" href="#Viewing_Host_Details_from_a_Content_Host_managing-hosts"></a>4.18. Viewing host details from a content host</h3>
<div class="paragraph">
<p>Use this procedure to view the host details page from a content host.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong></p>
</li>
<li>
<p>Click the content host you want to view.</p>
</li>
<li>
<p>Select the <strong>Details</strong> tab to see the host details page.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The cards in the <strong>Details</strong> tab show details for the <strong>System properties</strong>, <strong>BIOS</strong>, <strong>Networking interfaces</strong>, <strong>Operating system</strong>, <strong>Provisioning templates</strong>, and <strong>Provisioning</strong>.
Registered content hosts show additional cards for <strong>Registration details</strong>, <strong>Installed products</strong>, and <strong>HW properties</strong> providing information about <strong>Model</strong>, <strong>Number of CPU(s)</strong>, <strong>Sockets</strong>, <strong>Cores per socket</strong>, and <strong>RAM</strong>.</p>
</div>
</div>
<div class="sect2">
<h3 id="selecting-host-columns_managing-hosts"><a class="anchor" href="#selecting-host-columns_managing-hosts"></a>4.19. Selecting host columns</h3>
<div class="paragraph">
<p>You can select what columns you want to see in the host table on the <strong>Hosts</strong> &gt; <strong>All Hosts</strong> page.
For a complete list of host columns, see <a href="#overview-of-the-host-columns_managing-hosts">Overview of the host columns</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>It is not possible to deselect the <strong>Name</strong> column.
The <strong>Name</strong> column serves as a primary identification method of the host.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>.</p>
</li>
<li>
<p>Click <strong>Manage columns</strong>.</p>
</li>
<li>
<p>Select columns that you want to display.
You can select individual columns or column categories.
Selecting or deselecting a category selects or deselects all columns in that category.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Some columns are included in more than one category, but you can display a column of a specific type only once.
By selecting or deselecting a specific column, you select or deselect all instances of that column.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>You can now see the selected columns in the host table.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Removing_a_Host_from_Server_managing-hosts"><a class="anchor" href="#Removing_a_Host_from_Server_managing-hosts"></a>4.20. Removing a host from Satellite</h3>
<div class="paragraph">
<p>Use this procedure to remove a host from Satellite.
To use the CLI instead of the Satellite web UI, see the <a href="#cli-Removing_a_Host_from_Server_managing-hosts">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong> or <strong>Hosts</strong> &gt; <strong>Content Hosts</strong>.
Note that there is no difference from what page you remove a host, from <strong>All Hosts</strong> or <strong>Content Hosts</strong>.
In both cases, Satellite removes a host completely.</p>
</li>
<li>
<p>Select the hosts that you want to remove.</p>
</li>
<li>
<p>From the <strong>Select Action</strong> list, select <strong>Delete Hosts</strong>.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to remove the host from Satellite permanently.</p>
</li>
</ol>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>By default, the <code>Destroy associated VM on host delete</code> setting is set to <code>no</code>.
If a host record that is associated with a virtual machine is deleted, the virtual machine will remain on the compute resource.</p>
</div>
<div class="paragraph">
<p>To delete a virtual machine on the compute resource, navigate to <strong>Administer &gt; Settings</strong> and select the <strong>Provisioning</strong> tab.
Setting <code>Destroy associated VM on host delete</code> to <code>yes</code> deletes the virtual machine if the host record that is associated with the virtual machine is deleted.
To avoid deleting the virtual machine in this situation, disassociate the virtual machine from Satellite without removing it from the compute resource or change the setting.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="cli-Removing_a_Host_from_Server_managing-hosts" class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Delete your host from Satellite:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer host delete \
--id <em>My_Host_ID</em> \
--location-id <em>My_Location_ID</em> \
--organization-id <em>My_Organization_ID</em></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can use <code>--name <em>My_Host_Name</em></code> instead of <code>--id <em>My_Host_ID</em></code>.</p>
</div>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="Disassociating_a_Virtual_Machine_without_Removing_It_from_a_Hypervisor_managing-hosts"><a class="anchor" href="#Disassociating_a_Virtual_Machine_without_Removing_It_from_a_Hypervisor_managing-hosts"></a>4.20.1. Disassociating a virtual machine from Satellite without removing it from a hypervisor</h4>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>.</p>
</li>
<li>
<p>Select the checkbox to the left of the hosts that you want to disassociate.</p>
</li>
<li>
<p>From the <strong>Select Action</strong> list, click <strong>Disassociate Hosts</strong>.</p>
</li>
<li>
<p>Optional: Select the checkbox to keep the hosts for future action.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="lifecycle_status_of_rhel_hosts_managing-hosts"><a class="anchor" href="#lifecycle_status_of_rhel_hosts_managing-hosts"></a>4.21. Lifecycle status of RHEL hosts</h3>
<div class="paragraph">
<p>Satellite provides multiple mechanisms to display information about upcoming End of Support (EOS) events for your Red&#160;Hat Enterprise Linux hosts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Notification banner</p>
</li>
<li>
<p>A column on the Hosts index page</p>
</li>
<li>
<p>Alert on the Hosts index page for each host that runs Red&#160;Hat Enterprise Linux with an upcoming EOS event in a year as well as when support has ended</p>
</li>
<li>
<p>Ability to <strong>Search</strong> for hosts by EOS on the Hosts index page</p>
</li>
<li>
<p><strong>Host status</strong> card on the host details page</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For any hosts that are not running Red&#160;Hat Enterprise Linux, Satellite displays <strong>Unknown</strong> in the <strong>RHEL Lifecycle status</strong> and <strong>Last report</strong> columns.</p>
</div>
<div class="paragraph">
<div class="title">EOS notification banner</div>
<p>When either the end of maintenance support or the end of extended lifecycle support approaches in a year, you will see a notification banner in the Satellite web UI if you have hosts with that Red&#160;Hat Enterprise Linux version.
The notification provides information about the Red&#160;Hat Enterprise Linux version, the number of hosts running that version in your environment, the lifecycle support, and the expiration date.
Along with other information, the Red&#160;Hat Enterprise Linux lifecycle column is visible in the notification.</p>
</div>
<div class="sect3">
<h4 id="Displaying_RHEL_Lifecycle_Status_managing-hosts"><a class="anchor" href="#Displaying_RHEL_Lifecycle_Status_managing-hosts"></a>4.21.1. Displaying RHEL lifecycle status</h4>
<div class="paragraph">
<p>You can display the status of the end of support (EOS) for your Red&#160;Hat Enterprise Linux hosts in the table on the Hosts index page.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>.</p>
</li>
<li>
<p>Click <strong>Manage columns</strong>.</p>
</li>
<li>
<p>Select the <strong>Content</strong> column to expand it.</p>
</li>
<li>
<p>Select <strong>RHEL Lifecycle status</strong>.</p>
</li>
<li>
<p>Click <strong>Save</strong> to generate a new column that displays the Red&#160;Hat Enterprise Linux lifecycle status.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="host_search_by_rhel_lifecycle_status_managing-hosts"><a class="anchor" href="#host_search_by_rhel_lifecycle_status_managing-hosts"></a>4.21.2. Host search by RHEL lifecycle status</h4>
<div class="paragraph">
<p>You can use the <strong>Search</strong> field to search hosts by <code>rhel_lifecycle_status</code>.
It can have one of the following values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>full_support</code></p>
</li>
<li>
<p><code>maintenance_support</code></p>
</li>
<li>
<p><code>approaching_end_of_maintenance</code></p>
</li>
<li>
<p><code>extended_support</code></p>
</li>
<li>
<p><code>approaching_end_of_support</code></p>
</li>
<li>
<p><code>support_ended</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Working_with_Host_Groups_managing-hosts"><a class="anchor" href="#Working_with_Host_Groups_managing-hosts"></a>5. Working with host groups</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A host group acts as a template for common host settings.
Instead of defining the settings individually for each host, use host groups to define common settings once and apply them to multiple hosts.</p>
</div>
<div class="sect2">
<h3 id="Host_Group_Settings_and_Nested_Host_Groups_managing-hosts"><a class="anchor" href="#Host_Group_Settings_and_Nested_Host_Groups_managing-hosts"></a>5.1. Host group settings and nested host groups</h3>
<div class="paragraph">
<p>A host group can define many settings for hosts, such as Lifecycle Environment, content view, or Ansible roles that are available to the hosts.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
When you change the settings of an existing host group, the new settings do not propagate to the hosts assigned to the host group.
Only Puppet class settings get updated on hosts after you change them in the host group.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can create a hierarchy of host groups.
Aim to have one base level host group that represents all hosts in your organization and provides general settings, and then nested groups that provide specific settings.</p>
</div>
<div class="paragraph">
<p>Satellite applies host settings in the following order when nesting host groups:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Host settings take priority over host group settings.</p>
</li>
<li>
<p>Nested host group settings take priority over parent host group settings.</p>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="title">Example 1. Nested host group hierarchy</div>
<div class="content">
<div class="paragraph">
<p>You create a top-level host group named <strong>Base</strong> and two nested host groups named <strong>Webserver</strong> and <strong>Storage</strong>.
The nested host groups are associated with multiple hosts.
You also create host <code>custom.example.com</code> that is not associated with any host group.</p>
</div>
<div class="paragraph">
<p>You define the operating system on the top-level host group (<strong>Base</strong>) and Ansible roles on the nested host groups (<strong>Webservers</strong> and <strong>Storage</strong>).</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Top-level host group</th>
<th class="tableblock halign-left valign-top">Nested host group</th>
<th class="tableblock halign-left valign-top">Hosts</th>
<th class="tableblock halign-left valign-top">Settings inherited from host groups</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><strong>Base</strong></p>
<p class="tableblock">This host group applies the <code>Red&#160;Hat Enterprise Linux&#160;8.8</code> operating system setting.</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock"><strong>Webservers</strong></p>
<p class="tableblock">This host group applies the <code>linux-system-roles.selinux</code> Ansible role.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>webserver1.example.com</strong></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><div class="content"><div class="paragraph">
<p>Hosts use the following settings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Red&#160;Hat Enterprise Linux&#160;8.8</code> defined by host group <strong>Base</strong></p>
</li>
<li>
<p><code>linux-system-roles.selinux</code> defined by host group <strong>Webservers</strong></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>webserver2.example.com</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock"><strong>Storage</strong></p>
<p class="tableblock">This host group applies the <code>linux-system-roles.postfix</code> Ansible role.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>storage1.example.com</strong></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><div class="content"><div class="paragraph">
<p>Hosts use the following settings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Red&#160;Hat Enterprise Linux&#160;8.8</code> defined by host group <strong>Base</strong></p>
</li>
<li>
<p><code>linux-system-roles.postfix</code> defined by host group <strong>Storage</strong></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>storage2.example.com</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">[No host group]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>custom.example.com</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No settings inherited from host groups.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 2. Nested host group settings</div>
<div class="content">
<div class="paragraph">
<p>You create a top-level host group named <strong>Base</strong> and two nested host groups named <strong>Webserver</strong> and <strong>Storage</strong>.
You also create host <code>custom.example.com</code> that is associated with the top-level host group <strong>Base</strong>, but no nested host group.</p>
</div>
<div class="paragraph">
<p>You define different values for the operating system and Ansible role settings on the top-level host group (<strong>Base</strong>) and nested host groups (<strong>Webserver</strong> and <strong>Storage</strong>).</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Top-level host group</th>
<th class="tableblock halign-left valign-top">Nested host group</th>
<th class="tableblock halign-left valign-top">Host</th>
<th class="tableblock halign-left valign-top">Settings inherited from host groups</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" rowspan="5"><div class="content"><div class="paragraph">
<p><strong>Base</strong></p>
</div>
<div class="paragraph">
<p>This host group applies these settings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>Red&#160;Hat Enterprise Linux&#160;8.8</code> operating system</p>
</li>
<li>
<p>The <code>linux-system-roles.selinux</code> Ansible role</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top" rowspan="2"><div class="content"><div class="paragraph">
<p><strong>Webservers</strong></p>
</div>
<div class="paragraph">
<p>This host group applies these settings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>Red&#160;Hat Enterprise Linux&#160;8.9</code> operating system</p>
</li>
<li>
<p>No Ansible role</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>webserver1.example.com</strong></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><div class="content"><div class="paragraph">
<p>Hosts use the following settings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>Red&#160;Hat Enterprise Linux&#160;8.9</code> operating system from host group <strong>Webservers</strong></p>
</li>
<li>
<p>The <code>linux-system-roles.selinux</code> Ansible role from host group <strong>Base</strong></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>webserver2.example.com</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="2"><div class="content"><div class="paragraph">
<p><strong>Storage</strong></p>
</div>
<div class="paragraph">
<p>This host group applies these settings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>No operating system</p>
</li>
<li>
<p>The <code>linux-system-roles.postfix</code> Ansible role</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>storage1.example.com</strong></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><div class="content"><div class="paragraph">
<p>Hosts use the following settings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>Red&#160;Hat Enterprise Linux&#160;8.8</code> operating system from host group <strong>Base</strong></p>
</li>
<li>
<p>The <code>linux-system-roles.postfix</code> Ansible role from host group <strong>Storage</strong></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>storage2.example.com</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[No nested host group]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>custom.example.com</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Host uses the following settings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>Red&#160;Hat Enterprise Linux&#160;8.8</code> operating system from host group <strong>Base</strong></p>
</li>
<li>
<p>The <code>linux-system-roles.selinux</code> Ansible role from host group <strong>Base</strong></p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Creating_a_Host_Group_managing-hosts"><a class="anchor" href="#Creating_a_Host_Group_managing-hosts"></a>5.2. Creating a host group</h3>
<div class="paragraph">
<p>Create a host group to be able to apply host settings to multiple hosts.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Satellite web UI, see the <a href="#cli-creating-a-host-group_managing-hosts">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Configure</strong> &gt; <strong>Host Groups</strong> and click <strong>Create Host Group</strong>.</p>
</li>
<li>
<p>If you have an existing host group that you want to inherit attributes from, you can select a host group from the <strong>Parent</strong> list.
If you do not, leave this field blank.</p>
</li>
<li>
<p>Enter a <strong>Name</strong> for the new host group.</p>
</li>
<li>
<p>Enter any further information that you want future hosts to inherit.</p>
</li>
<li>
<p>Click the <strong>Ansible Roles</strong> tab, and from the <strong>Ansible Roles</strong> list, select one or more roles that you want to add to the host.
Use the <strong>arrow</strong> icon to manage the roles that you add or remove.</p>
</li>
<li>
<p>Click the additional tabs and add any details that you want to attribute to the host group.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Puppet fails to retrieve the Puppet CA certificate while registering a host with a host group associated with a Puppet environment created inside a <code>Production</code> environment.</p>
</div>
<div class="paragraph">
<p>To create a suitable Puppet environment to be associated with a host group, manually create a directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir /etc/puppetlabs/code/environments/<em>example_environment</em></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click <strong>Submit</strong> to save the host group.</p>
</li>
</ol>
</div>
<div id="cli-creating-a-host-group_managing-hosts" class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Create the host group with the <code>hammer hostgroup create</code> command.
For example:</p>
<div class="listingblock">
<div class="content">
<pre># hammer hostgroup create --name "Base" \
--architecture "My_Architecture" \
--content-source-id _My_Content_Source_ID_ \
--content-view "_My_Content_View_" \
--domain "_My_Domain_" \
--lifecycle-environment "_My_Lifecycle_Environment_" \
--locations "_My_Location_" \
--medium-id _My_Installation_Medium_ID_ \
--operatingsystem "_My_Operating_System_" \
--organizations "_My_Organization_" \
--partition-table "_My_Partition_Table_" \
--puppet-ca-proxy-id _My_Puppet_CA_Proxy_ID_ \
--puppet-environment "_My_Puppet_Environment_" \
--puppet-proxy-id _My_Puppet_Proxy_ID_ \
--root-pass "My_Password" \
--subnet "_My_Subnet_"</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Creating_a_Host_Group_for_each_Lifecycle_Environment_managing-hosts"><a class="anchor" href="#Creating_a_Host_Group_for_each_Lifecycle_Environment_managing-hosts"></a>5.3. Creating a host group for each lifecycle environment</h3>
<div class="paragraph">
<p>Use this procedure to create a host group for the Library lifecycle environment and add nested host groups for other lifecycle environments.</p>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>To create a host group for each lifecycle environment, run the following Bash script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-terminal" data-lang="terminal">MAJOR="<em>My_Major_OS_Version</em>"
ARCH="<em>My_Architecture</em>"
ORG="<em>My_Organization</em>"
LOCATIONS="<em>My_Location</em>"
PTABLE_NAME="<em>My_Partition_Table</em>"
DOMAIN="<em>My_Domain</em>"

hammer --output csv --no-headers lifecycle-environment list --organization "${ORG}" | cut -d ',' -f 2 | while read LC_ENV; do
  [[ ${LC_ENV} == "Library" ]] &amp;&amp; continue

  hammer hostgroup create --name "rhel-${MAJOR}server-${ARCH}-${LC_ENV}" \
    --architecture "${ARCH}" \
    --partition-table "${PTABLE_NAME}" \
    --domain "${DOMAIN}" \
    --organizations "${ORG}" \
    --query-organization "${ORG}" \
    --locations "${LOCATIONS}" \
    --lifecycle-environment "${LC_ENV}"
done</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="adding-a-host-to-a-host-group_managing-hosts"><a class="anchor" href="#adding-a-host-to-a-host-group_managing-hosts"></a>5.4. Adding a host to a host group</h3>
<div class="paragraph">
<p>You can add a host to a host group in the Satellite web UI.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>.</p>
</li>
<li>
<p>Click the name of the host you want to modify.</p>
</li>
<li>
<p>Click <strong>Edit</strong>.</p>
</li>
<li>
<p>Select the host group from the <strong>Host Group</strong> list.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>The <strong>Details</strong> card under the <strong>Overview</strong> tab now shows the host group your host belongs to.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Changing_the_Host_Group_of_a_Host_managing-hosts"><a class="anchor" href="#Changing_the_Host_Group_of_a_Host_managing-hosts"></a>5.5. Changing the host group of a host</h3>
<div class="paragraph">
<p>Use this procedure to change the Host Group of a host.</p>
</div>
<div class="paragraph">
<p>If you reprovision a host after changing the host group, the fresh values that the host inherits from the host group will be applied.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>.</p>
</li>
<li>
<p>Click the name of the host you want to modify.</p>
</li>
<li>
<p>Click <strong>Edit</strong>.</p>
</li>
<li>
<p>Select the new host group from the <strong>Host Group</strong> list.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>The <strong>Details</strong> card under the <strong>Overview</strong> tab now shows the host group your host belongs to.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="registering_hosts_to_server_managing-hosts"><a class="anchor" href="#registering_hosts_to_server_managing-hosts"></a>6. Registering hosts and setting up host integration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You must register hosts that have not been provisioned through Satellite to be able to manage them with Satellite.
You can register hosts through Satellite&#160;Server or Capsule&#160;Server.</p>
</div>
<div class="paragraph">
<p>Note that the entitlement-based subscription model is deprecated and will be removed in a future release.
Red&#160;Hat recommends that you use the access-based subscription model of <a href="https://access.redhat.com/articles/simple-content-access">Simple Content Access</a> instead.</p>
</div>
<div class="paragraph">
<p>You must also install and configure tools on your hosts, depending on which integration features you want to use.
Use the following procedures to install and configure host tools:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#Installing_Tracer_managing-hosts">Installing Tracer</a></p>
</li>
<li>
<p><a href="#installing-and-configuring-puppet-agent-during-host-registration_managing-hosts">Installing and configuring Puppet agent during host registration</a></p>
</li>
<li>
<p><a href="#Installing_and_Configuring_Puppet_Agent_Manually_managing-hosts">Installing and configuring Puppet agent manually</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="supported-clients-in-registration_managing-hosts"><a class="anchor" href="#supported-clients-in-registration_managing-hosts"></a>6.1. Supported clients in registration</h3>
<div class="paragraph">
<p>Satellite supports the following operating systems and architectures for registration.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported Host Operating Systems</dt>
<dd>
<p>The hosts can use the following operating systems:</p>
<div class="ulist">
<ul>
<li>
<p>Red&#160;Hat Enterprise Linux 9, 8, 7</p>
</li>
<li>
<p>Red&#160;Hat Enterprise Linux 6 with the <a href="https://www.redhat.com/en/resources/els-datasheet">ELS Add-On</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Supported Host Architectures</dt>
<dd>
<p>The hosts can use the following architectures:</p>
<div class="ulist">
<ul>
<li>
<p>i386</p>
</li>
<li>
<p>x86_64</p>
</li>
<li>
<p>s390x</p>
</li>
<li>
<p>ppc_64</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="registration-methods_managing-hosts"><a class="anchor" href="#registration-methods_managing-hosts"></a>6.2. Registration methods</h3>
<div class="paragraph">
<p>You can use the following methods to register hosts to Satellite:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Global registration</dt>
<dd>
<p>You generate a <code>curl</code> command from Satellite and run this command from an unlimited number of hosts to register them using provisioning templates over the Satellite API.
For more information, see <a href="#Registering_Hosts_by_Using_Global_Registration_managing-hosts">Registering hosts by using global registration</a>.</p>
<div class="paragraph">
<p>By using this method, you can also deploy Satellite SSH keys to hosts during registration to Satellite to enable hosts for remote execution jobs.
For more information, see <a href="#Configuring_and_Setting_Up_Remote_Jobs_managing-hosts">Configuring and setting up remote jobs</a>.</p>
</div>
<div class="paragraph">
<p>By using this method, you can also configure hosts with Red&#160;Hat Insights during registration to Satellite.
For more information, see <a href="#Monitoring_Hosts_Using_Red_Hat_Insights_managing-hosts">Monitoring hosts using Red&#160;Hat Insights</a>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>(Deprecated)</strong> Katello CA Consumer</dt>
<dd>
<p>You download and install the consumer RPM from <code><em>satellite.example.com</em>/pub/katello-ca-consumer-latest.noarch.rpm</code> on the host and then run <code>subscription-manager</code>.</p>
</dd>
<dt class="hdlist1"><strong>(Deprecated)</strong> Bootstrap script</dt>
<dd>
<p>You download the bootstrap script from <code><em>satellite.example.com</em>/pub/bootstrap.py</code> on the host and then run the script.
For more information, see <a href="#Registering_Hosts_by_Using_the_Bootstrap_Script_managing-hosts">Registering hosts by using the bootstrap script</a>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="Registering_Hosts_by_Using_Global_Registration_managing-hosts"><a class="anchor" href="#Registering_Hosts_by_Using_Global_Registration_managing-hosts"></a>6.3. Registering hosts by using global registration</h3>
<div class="paragraph">
<p>You can register a host to Satellite by generating a <code>curl</code> command on Satellite and running this command on hosts.
This method uses two provisioning templates: <strong>Global Registration</strong> template and <strong>Linux host_init_config default</strong> template.
That gives you complete control over the host registration process.</p>
</div>
<div class="paragraph">
<p>You can also customize the default templates if you need greater flexibility.
For more information, see <a href="#Customizing_the_Registration_Templates_managing-hosts">Customizing the registration templates</a>.</p>
</div>
<div class="sect3">
<h4 id="global-parameters-for-registration_managing-hosts"><a class="anchor" href="#global-parameters-for-registration_managing-hosts"></a>6.3.1. Global parameters for registration</h4>
<div class="paragraph">
<p>You can configure the following global parameters by navigating to <strong>Configure</strong> &gt; <strong>Global Parameters</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>host_registration_insights</code> parameter is used in the <code>insights</code> snippet.
If the parameter is set to <code>true</code>, the registration installs and enables the Red&#160;Hat Insights client on the host.
If the parameter is set to <code>false</code>, it prevents Satellite and the Red&#160;Hat Insights client from uploading Inventory reports to your Red&#160;Hat Hybrid Cloud Console.
The default value is <code>true</code>.
When overriding the parameter value, set the parameter type to <code>boolean</code>.</p>
</li>
<li>
<p>The <code>host_packages</code> parameter is for installing packages on the host.</p>
</li>
<li>
<p>The <code>host_registration_remote_execution</code> parameter is used in the <code>remote_execution_ssh_keys</code> snippet.
If it is set to <code>true</code>, the registration enables remote execution on the host.
The default value is <code>true</code>.</p>
</li>
<li>
<p>The <code>remote_execution_ssh_keys</code>, <code>remote_execution_ssh_user</code>, <code>remote_execution_create_user</code>, and <code>remote_execution_effective_user_method</code> parameters are used in the <code>remote_execution_ssh_keys</code> snippet.
For more details, see the snippet.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can navigate to snippets in the Satellite web UI through <strong>Hosts</strong> &gt; <strong>Templates</strong> &gt; <strong>Provisioning Templates</strong>.</p>
</div>
</div>
<div class="sect3">
<h4 id="registering-a-host_managing-hosts"><a class="anchor" href="#registering-a-host_managing-hosts"></a>6.3.2. Registering a host</h4>
<div class="paragraph">
<p>You can register a host by using registration templates and set up various integration features and host tools during the registration process.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Your user account has a role assigned that has the <code>create_hosts</code> permission.</p>
</li>
<li>
<p>You must have root privileges on the host that you want to register.</p>
</li>
<li>
<p>Satellite&#160;Server, any Capsule&#160;Servers, and all hosts must be synchronized with the same NTP server, and have a time synchronization tool enabled and running.</p>
</li>
<li>
<p>An activation key must be available for the host.
For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_content/index#Managing_Activation_Keys_content-management">Managing Activation Keys</a> in <em>Managing content</em>.</p>
</li>
<li>
<p>Optional: If you want to register hosts to Red&#160;Hat Insights, you must synchronize the <code>rhel-8-for-x86_64-baseos-rpms</code> and <code>rhel-8-for-x86_64-appstream-rpms</code> repositories and make them available in the activation key that you use.
This is required to install the <code>insights-client</code> package on hosts.</p>
</li>
<li>
<p>If you want to use Capsule&#160;Servers instead of your Satellite&#160;Server, ensure that you have configured your Capsule&#160;Servers accordingly.
For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/installing_capsule_server/index#configuring-capsule-for-host-registration-and-provisioning_capsule">Configuring Capsule for Host Registration and Provisioning</a> in <em>Installing Capsule Server</em>.</p>
</li>
<li>
<p>If your Satellite&#160;Server or Capsule&#160;Server is behind an HTTP proxy, configure the Subscription Manager on your host to use the HTTP proxy for connection.
For more information, see <a href="https://access.redhat.com/solutions/65300">How to access Red Hat Subscription Manager (RHSM) through a firewall or proxy</a> in the <em>Red&#160;Hat Knowledgebase</em>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>Register Host</strong>.</p>
</li>
<li>
<p>Optional: Select a different <strong>Organization</strong>.</p>
</li>
<li>
<p>Optional: Select a different <strong>Location</strong>.</p>
</li>
<li>
<p>Optional: From the <strong>Host Group</strong> list, select the host group to associate the hosts with.
Fields that inherit value from <strong>Host group</strong>: <strong>Operating system</strong>, <strong>Activation Keys</strong> and <strong>Lifecycle environment</strong>.</p>
</li>
<li>
<p>Optional: From the <strong>Operating system</strong> list, select the operating system of hosts that you want to register.</p>
</li>
<li>
<p>Optional: From the <strong>Capsule</strong> list, select the Capsule to register hosts through.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>A Capsule behind a load balancer takes precedence over a Capsule selected in the Satellite web UI as the host&#8217;s content source.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>In the <strong>Activation Keys</strong> field, enter one or more activation keys to assign to hosts.</p>
</li>
<li>
<p>Optional: Select the <strong>Insecure</strong> option, if you want to make the first call insecure.
During this first call, hosts download the CA file from Satellite.
Hosts will use this CA file to connect to Satellite with all future calls making them secure.</p>
<div class="paragraph">
<p>Red&#160;Hat recommends that you avoid insecure calls.</p>
</div>
<div class="paragraph">
<p>If an attacker, located in the network between Satellite and a host, fetches the CA file from the first insecure call, the attacker will be able to access the content of the API calls to and from the registered host and the JSON Web Tokens (JWT).
Therefore, if you have chosen to deploy SSH keys during registration, the attacker will be able to access the host using the SSH key.</p>
</div>
<div class="paragraph">
<p>Instead, you can manually copy and install the CA file on each host before registering the host.</p>
</div>
<div class="paragraph">
<p>To do this, find where Satellite stores the CA file by navigating to <strong>Administer</strong> &gt; <strong>Settings</strong> &gt; <strong>Authentication</strong> and locating the value of the <strong>SSL CA file</strong> setting.</p>
</div>
<div class="paragraph">
<p>Copy the CA file to the <code>/etc/pki/ca-trust/source/anchors/</code> directory on hosts and enter the following commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># update-ca-trust enable
# update-ca-trust</pre>
</div>
</div>
<div class="paragraph">
<p>Then register the hosts with a secure <code>curl</code> command, such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl -sS https://satellite.example.com/register ...</pre>
</div>
</div>
<div class="paragraph">
<p>The following is an example of the <code>curl</code> command with the <code>--insecure</code> option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl -sS --insecure https://satellite.example.com/register ...</pre>
</div>
</div>
</li>
<li>
<p>Select the <strong>Advanced</strong> tab.</p>
</li>
<li>
<p>Optional: From the <strong>Setup REX</strong> list, select whether you want to deploy Satellite SSH keys to hosts or not.</p>
<div class="paragraph">
<p>If set to <code>Yes</code>, public SSH keys will be installed on the registered host.
The inherited value is based on the <code>host_registration_remote_execution</code> parameter.
It can be inherited, for example from a host group, an operating system, or an organization.
When overridden, the selected value will be stored on host parameter level.</p>
</div>
</li>
<li>
<p>Optional: From the <strong>Setup Insights</strong> list, select whether you want to install <code>insights-client</code> and register the hosts to Insights.</p>
<div class="paragraph">
<p>The Insights tool is available for Red&#160;Hat Enterprise Linux only.
It has no effect on other operating systems.</p>
</div>
<div class="paragraph">
<p>You must enable the following repositories on a registered machine:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Red&#160;Hat Enterprise Linux 6: <code>rhel-6-server-rpms</code></p>
</li>
<li>
<p>Red&#160;Hat Enterprise Linux 7: <code>rhel-7-server-rpms</code></p>
</li>
<li>
<p>Red&#160;Hat Enterprise Linux 8: <code>rhel-8-for-x86_64-appstream-rpms</code></p>
<div class="paragraph">
<p>The <code>insights-client</code> package is installed by default on Red&#160;Hat Enterprise Linux 8 except in environments whereby Red&#160;Hat Enterprise Linux 8 was deployed with "Minimal Install" option.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Optional: In the <strong>Install packages</strong> field, list the packages (separated with spaces) that you want to install on the host upon registration.
This can be set by the <code>host_packages</code> parameter.</p>
</li>
<li>
<p>Optional: Select the <strong>Update packages</strong> option to update all packages on the host upon registration.
This can be set by the <code>host_update_packages</code> parameter.</p>
</li>
<li>
<p>Optional: In the <strong>Repository</strong> field, enter a repository to be added before the registration is performed.
For example, it can be useful to make the <code>subscription-manager</code> package available for the purpose of the registration.
For Red Hat family distributions, enter the URL of the repository, for example <code>http://rpm.example.com/</code>.</p>
</li>
<li>
<p>Optional: In the <strong>Repository GPG key URL</strong> field, specify the public key to verify the signatures of GPG-signed packages.
It needs to be specified in the ASCII form with the GPG public key header.</p>
</li>
<li>
<p>Optional: In the <strong>Token lifetime (hours)</strong> field, change the validity duration of the JSON Web Token (JWT) that Satellite uses for authentication.
The duration of this token defines how long the generated <code>curl</code> command works.
You can set the duration to 0&#8202;&#8211;&#8202;999 999 hours or unlimited.</p>
<div class="paragraph">
<p>Note that Satellite applies the permissions of the user who generates the <code>curl</code> command to authorization of hosts.
If the user loses or gains additional permissions, the permissions of the JWT change too.
Therefore, do not delete, block, or change permissions of the user during the token duration.</p>
</div>
<div class="paragraph">
<p>The scope of the JWTs is limited to the registration endpoints only and cannot be used anywhere else.</p>
</div>
</li>
<li>
<p>Optional: In the <strong>Remote Execution Interface</strong> field, enter the identifier of a network interface that hosts must use for the SSH connection.
If you keep this field blank, Satellite uses the default network interface.</p>
</li>
<li>
<p>Optional: From the <strong>REX pull mode</strong> list, select whether you want to deploy Satellite remote execution pull client.</p>
<div class="paragraph">
<p>If set to <code>Yes</code>, the remote execution pull client is installed on the registered host.
The inherited value is based on the <code>host_registration_remote_execution_pull</code> parameter.
It can be inherited, for example from a host group, an operating system, or an organization.
When overridden, the selected value is stored on the host parameter level.</p>
</div>
<div class="paragraph">
<p>The registered host must have access to the Red&#160;Hat Satellite Client 6 repository.</p>
</div>
<div class="paragraph">
<p>For more information about the pull mode, see <a href="#transport-modes-for-remote-execution_managing-hosts">Transport modes for remote execution</a>.</p>
</div>
</li>
<li>
<p>Optional: Select the <strong>Ignore errors</strong> option if you want to ignore subscription manager errors.</p>
</li>
<li>
<p>Optional: Select the <strong>Force</strong> option if you want to remove any <code>katello-ca-consumer</code> rpms before registration and run <code>subscription-manager</code> with the <code>--force</code> argument.</p>
</li>
<li>
<p>Click <strong>Generate</strong>.</p>
</li>
<li>
<p>Copy the generated <code>curl</code> command.</p>
</li>
<li>
<p>On the host that you want to register, run the <code>curl</code> command as <code>root</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Customizing_the_Registration_Templates_managing-hosts"><a class="anchor" href="#Customizing_the_Registration_Templates_managing-hosts"></a>6.3.3. Customizing the registration templates</h4>
<div class="paragraph">
<p>You can customize the registration process by editing the provisioning templates.
Note that all default templates in Satellite are locked.
If you want to customize the registration templates, you must clone the default templates and edit the clones.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Red&#160;Hat only provides support for the original unedited templates.
Customized templates do not receive updates released by Red&#160;Hat.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The registration process uses the following provisioning templates:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <strong>Global Registration</strong> template contains steps for registering hosts to Satellite.
This template renders when hosts access the <code>/register</code> Satellite API endpoint.</p>
</li>
<li>
<p>The <strong>Linux host_init_config default</strong> template contains steps for initial configuration of hosts after they are registered.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Navigate to <strong>Hosts</strong> &gt; <strong>Templates</strong> &gt; <strong>Provisioning Templates</strong>.</p>
</li>
<li>
<p>Search for the template you want to edit.</p>
</li>
<li>
<p>In the row of the required template, click <strong>Clone</strong>.</p>
</li>
<li>
<p>Edit the template as needed.
For more information, see <a href="#Template_Writing_Reference_managing-hosts">Template writing reference</a>.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
<li>
<p>Navigate to <strong>Administer</strong> &gt; <strong>Settings</strong> &gt; <strong>Provisioning</strong>.</p>
</li>
<li>
<p>Change the following settings as needed:</p>
<div class="ulist">
<ul>
<li>
<p>Point the <strong>Default Global registration template</strong> setting to your custom global registration template,</p>
</li>
<li>
<p>Point the <strong>Default 'Host initial configuration' template</strong> setting to your custom initial configuration template.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Registering_Hosts_by_Using_the_Bootstrap_Script_managing-hosts"><a class="anchor" href="#Registering_Hosts_by_Using_the_Bootstrap_Script_managing-hosts"></a>6.4. Registering hosts by using the bootstrap script</h3>
<div class="paragraph">
<p><strong>Deprecated</strong> Use <a href="#Registering_Hosts_by_Using_Global_Registration_managing-hosts">Registering hosts by using global registration</a> instead.</p>
</div>
<div class="paragraph">
<p>Use the bootstrap script to automate content registration and Puppet configuration.
You can use the bootstrap script to register new hosts, or to migrate existing hosts from RHN, SAM, RHSM, or another Red&#160;Hat Satellite instance.</p>
</div>
<div class="paragraph">
<p>The <code>katello-client-bootstrap</code> package is installed by default on Satellite&#160;Server&#8217;s base operating system.
The <code>bootstrap.py</code> script is installed in the <code>/var/www/html/pub/</code> directory to make it available to hosts at <code><em>satellite.example.com</em>/pub/bootstrap.py</code>.
The script includes documentation in the <code>/usr/share/doc/katello-client-bootstrap-<em>version</em>/README.md</code> file.</p>
</div>
<div class="paragraph">
<p>To use the bootstrap script, you must install it on the host.
As the script is only required once, and only for the <code>root</code> user, you can place it in <code>/root</code> or <code>/usr/local/sbin</code> and remove it after use.
This procedure uses <code>/root</code>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have a Satellite user with the permissions required to run the bootstrap script.
The examples in this procedure specify the <code>admin</code> user.
If this is not acceptable to your security policy, create a new role with the minimum permissions required and add it to the user that will run the script.
For more information, see <a href="#Setting_Permissions_for_the_Bootstrap_Script_managing-hosts">Setting permissions for the bootstrap script</a>.</p>
</li>
<li>
<p>You have an activation key for your hosts with the Satellite Client 6 repository enabled.
For information on configuring activation keys, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_content/index#Managing_Activation_Keys_content-management">Managing Activation Keys</a> in <em>Managing content</em>.</p>
</li>
<li>
<p>You have created a host group.
For more information about creating host groups, see <a href="#Creating_a_Host_Group_managing-hosts">Creating a host group</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Puppet considerations</div>
<p>If a host group is associated with a Puppet environment created inside a <code>Production</code> environment, Puppet fails to retrieve the Puppet CA certificate while registering a host from that host group.</p>
</div>
<div class="paragraph">
<p>To create a suitable Puppet environment to be associated with a host group, follow these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Manually create a directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir /etc/puppetlabs/code/environments/<em>example_environment</em></pre>
</div>
</div>
</li>
<li>
<p>In the Satellite web UI, navigate to <strong>Configure</strong> &gt; <strong>Puppet ENC</strong> &gt; <strong>Environments</strong>.</p>
</li>
<li>
<p>Click <strong>Import environment from</strong>.
The button name includes the FQDN of the internal or external Capsule.</p>
</li>
<li>
<p>Choose the created directory and click <strong>Update</strong>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in to the host as the <code>root</code> user.</p>
</li>
<li>
<p>Download the script:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl -O http://<em>satellite.example.com</em>/pub/bootstrap.py</pre>
</div>
</div>
</li>
<li>
<p>Make the script executable:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># chmod +x bootstrap.py</pre>
</div>
</div>
</li>
<li>
<p>Confirm that the script is executable by viewing the help text:</p>
<div class="ulist">
<ul>
<li>
<p>On Red&#160;Hat Enterprise Linux 8:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># /usr/libexec/platform-python bootstrap.py -h</pre>
</div>
</div>
</li>
<li>
<p>On other Red&#160;Hat Enterprise Linux versions:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ./bootstrap.py -h</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Enter the bootstrap command with values suitable for your environment.</p>
<div class="paragraph">
<p>For the <code>--server</code> option, specify the FQDN of Satellite&#160;Server or a Capsule&#160;Server.
For the <code>--location</code>, <code>--organization</code>, and <code>--hostgroup</code> options, use quoted names, not labels, as arguments to the options.
For advanced use cases, see <a href="#Advanced_Bootstrap_Script_Configuration_managing-hosts">Advanced bootstrap script configuration</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>On Red&#160;Hat Enterprise Linux 8, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># /usr/libexec/platform-python bootstrap.py \
--login=<em>admin</em> \
--server <em>satellite.example.com</em> \
--location="<em>My_Location</em>" \
--organization="<em>My_Organization</em>" \
--hostgroup="<em>My_Host_Group</em>" \
--activationkey="<em>My_Activation_Key</em>"</pre>
</div>
</div>
</li>
<li>
<p>On Red&#160;Hat Enterprise Linux 6 or 7, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ./bootstrap.py --login=<em>admin</em> \
--server <em>satellite.example.com</em> \
--location="<em>My_Location</em>" \
--organization="<em>My_Organization</em>" \
--hostgroup="<em>My_Host_Group</em>" \
--activationkey="<em>My_Activation_Key</em>"</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Enter the password of the Satellite user you specified with the <code>--login</code> option.</p>
<div class="paragraph">
<p>The script sends notices of progress to <strong>stdout</strong>.</p>
</div>
</li>
<li>
<p>When prompted by the script, approve the host&#8217;s Puppet certificate.
In the Satellite web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Capsules</strong> and find the Satellite or Capsule&#160;Server you specified with the <code>--server</code> option.</p>
</li>
<li>
<p>From the list in the <strong>Actions</strong> column, select <strong>Certificates</strong>.</p>
</li>
<li>
<p>In the <strong>Actions</strong> column, click <strong>Sign</strong> to approve the host&#8217;s Puppet certificate.</p>
</li>
<li>
<p>Return to the host to see the remainder of the bootstrap process completing.</p>
</li>
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong> and ensure that the host is connected to the correct host group.</p>
</li>
<li>
<p>Optional: After the host registration is complete, remove the script:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># rm bootstrap.py</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="Setting_Permissions_for_the_Bootstrap_Script_managing-hosts"><a class="anchor" href="#Setting_Permissions_for_the_Bootstrap_Script_managing-hosts"></a>6.4.1. Setting permissions for the bootstrap script</h4>
<div class="paragraph">
<p>Use this procedure to configure a Satellite user with the permissions required to run the bootstrap script.
To use the CLI instead of the Satellite web UI, see the <a href="#CLI_Setting_Permissions_for_the_Bootstrap_Script_managing-hosts">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Administer</strong> &gt; <strong>Users</strong>.</p>
</li>
<li>
<p>Select an existing user by clicking the required <strong>Username</strong>.
A new pane opens with tabs to modify information about the selected user.
Alternatively, create a new user specifically for the purpose of running this script.</p>
</li>
<li>
<p>Click the <strong>Roles</strong> tab.</p>
</li>
<li>
<p>Select <strong>Edit hosts</strong> and <strong>Viewer</strong> from the <strong>Roles</strong> list.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>The <strong>Edit hosts</strong> role allows the user to edit and delete hosts as well as being able to add hosts.
If this is not acceptable to your security policy, create a new role with the following permissions and assign it to the user:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>view_organizations</code></p>
</li>
<li>
<p><code>view_locations</code></p>
</li>
<li>
<p><code>view_domains</code></p>
</li>
<li>
<p><code>view_hostgroups</code></p>
</li>
<li>
<p><code>view_hosts</code></p>
</li>
<li>
<p><code>view_architectures</code></p>
</li>
<li>
<p><code>view_ptables</code></p>
</li>
<li>
<p><code>view_operatingsystems</code></p>
</li>
<li>
<p><code>create_hosts</code></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
<div id="CLI_Setting_Permissions_for_the_Bootstrap_Script_managing-hosts" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Create a role with the minimum permissions required by the bootstrap script.
This example creates a role with the name <em>Bootstrap</em>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ROLE='Bootstrap'
hammer role create --name "$ROLE"
hammer filter create --role "$ROLE" --permissions view_organizations
hammer filter create --role "$ROLE" --permissions view_locations
hammer filter create --role "$ROLE" --permissions view_domains
hammer filter create --role "$ROLE" --permissions view_hostgroups
hammer filter create --role "$ROLE" --permissions view_hosts
hammer filter create --role "$ROLE" --permissions view_architectures
hammer filter create --role "$ROLE" --permissions view_ptables
hammer filter create --role "$ROLE" --permissions view_operatingsystems
hammer filter create --role "$ROLE" --permissions create_hosts</pre>
</div>
</div>
</li>
<li>
<p>Assign the new role to an existing user:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer user add-role --id <em>user_id</em> --role <em>Bootstrap</em></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can create a new user and assign this new role to them.
For more information on creating users with Hammer, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/administering_red_hat_satellite/index#Managing_Users_and_Roles_admin">Managing Users and Roles</a> in <em>Administering Red&#160;Hat Satellite</em>.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Advanced_Bootstrap_Script_Configuration_managing-hosts"><a class="anchor" href="#Advanced_Bootstrap_Script_Configuration_managing-hosts"></a>6.4.2. Advanced bootstrap script configuration</h4>
<div class="paragraph">
<p>This section has more examples for using the bootstrap script to register or migrate a host.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>These examples specify the <code>admin</code> Satellite user.
If this is not acceptable to your security policy, create a new role with the minimum permissions required by the bootstrap script.
For more information, see <a href="#Setting_Permissions_for_the_Bootstrap_Script_managing-hosts">Setting permissions for the bootstrap script</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="Migration_a_Host_From_One_Server_to_another_Server_managing-hosts"><a class="anchor" href="#Migration_a_Host_From_One_Server_to_another_Server_managing-hosts"></a>Migrating a host from one Satellite to another Satellite</h5>
<div class="paragraph">
<p>Use the script with <code>--force</code> to remove the <code>katello-ca-consumer-*</code> packages from the old Satellite and install the <code>katello-ca-consumer-*</code> packages on the new Satellite.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>On Red&#160;Hat Enterprise Linux 8, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># /usr/libexec/platform-python bootstrap.py \
--login=<em>admin</em> \
--server <em>satellite.example.com</em> \
--location="<em>My_Location</em>" \
--organization="<em>My_Organization</em>" \
--hostgroup="<em>My_Host_Group</em>" \
--activationkey="<em>My_Activation_Key</em>" \
--force</pre>
</div>
</div>
</li>
<li>
<p>On Red&#160;Hat Enterprise Linux 6 or 7, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># bootstrap.py --login=<em>admin</em> \
--server <em>satellite.example.com</em> \
--location="<em>My_Location</em>" \
--organization="<em>My_Organization</em>" \
--hostgroup="<em>My_Host_Group</em>" \
--activationkey="<em>My_Activation_Key</em>" \
--force</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Migrating_a_Host_from_Red_Hat_Network_managing-hosts"><a class="anchor" href="#Migrating_a_Host_from_Red_Hat_Network_managing-hosts"></a>Migrating a host from Red Hat Network (RHN) or Satellite 5 to Satellite</h5>
<div class="paragraph">
<p>The bootstrap script detects the presence of <code>/etc/syconfig/rhn/systemid</code> and a valid connection to RHN as an indicator that the system is registered to a legacy platform.
The script then calls <code>rhn-classic-migrate-to-rhsm</code> to migrate the system from RHN.
By default, the script does not delete the system&#8217;s legacy profile due to auditing reasons.
To remove the legacy profile, use <code>--legacy-purge</code>, and use <code>--legacy-login</code> to supply a user account that has appropriate permissions to remove a profile.
Enter the user account password when prompted.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>On Red&#160;Hat Enterprise Linux 8, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># /usr/libexec/platform-python bootstrap.py \
--login=<em>admin</em> \
--server <em>satellite.example.com</em> \
--location="<em>My_Location</em>" \
--organization="<em>My_Organization</em>" \
--hostgroup="<em>My_Host_Group</em>" \
--activationkey="<em>My_Activation_Key</em>" \
--legacy-purge \
--legacy-login <em>rhn-user</em></pre>
</div>
</div>
</li>
<li>
<p>On Red&#160;Hat Enterprise Linux 6 or 7, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># bootstrap.py --login=<em>admin</em> \
--server <em>satellite.example.com</em> \
--location="<em>My_Location</em>" \
--organization="<em>My_Organization</em>" \
--hostgroup="<em>My_Host_Group</em>" \
--activationkey="<em>My_Activation_Key</em>" \
--legacy-purge \
--legacy-login <em>rhn-user</em></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Registering_a_Host_Without_Puppet_managing-hosts"><a class="anchor" href="#Registering_a_Host_Without_Puppet_managing-hosts"></a>Registering a host to Satellite without Puppet</h5>
<div class="paragraph">
<p>By default, the bootstrap script configures the host for content management and configuration management.
If you have an existing configuration management system and do not want to install Puppet on the host, use <code>--skip-puppet</code>.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>On Red&#160;Hat Enterprise Linux 8, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># /usr/libexec/platform-python bootstrap.py \
--login=<em>admin</em> \
--server <em>satellite.example.com</em> \
--location="<em>My_Location</em>" \
--organization="<em>My_Organization</em>" \
--hostgroup="<em>My_Host_Group</em>" \
--activationkey="<em>My_Activation_Key</em>" \
--skip-puppet</pre>
</div>
</div>
</li>
<li>
<p>On Red&#160;Hat Enterprise Linux 6 or 7, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># bootstrap.py --login=<em>admin</em> \
--server <em>satellite.example.com</em> \
--location="<em>My_Location</em>" \
--organization="<em>My_Organization</em>" \
--hostgroup="<em>My_Host_Group</em>" \
--activationkey="<em>My_Activation_Key</em>" \
--skip-puppet</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Registering_a_Host_for_Content_Management_Only_managing-hosts"><a class="anchor" href="#Registering_a_Host_for_Content_Management_Only_managing-hosts"></a>Registering a host to Satellite for content management only</h5>
<div class="paragraph">
<p>To register a system as a content host, and omit the provisioning and configuration management functions, use <code>--skip-foreman</code>.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>On Red&#160;Hat Enterprise Linux 8, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># /usr/libexec/platform-python bootstrap.py \
--server <em>satellite.example.com</em> \
--organization="<em>My_Organization</em>" \
--activationkey="<em>My_Activation_Key</em>" \
--skip-foreman</pre>
</div>
</div>
</li>
<li>
<p>On Red&#160;Hat Enterprise Linux 6 or 7, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># bootstrap.py --server <em>satellite.example.com</em> \
--organization="<em>My_Organization</em>" \
--activationkey="<em>My_Activation_Key</em>" \
--skip-foreman</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Changing_the_Method_the_Bootstrap_Script_Uses_to_Download_the_Consumer_RPM_managing-hosts"><a class="anchor" href="#Changing_the_Method_the_Bootstrap_Script_Uses_to_Download_the_Consumer_RPM_managing-hosts"></a>Changing the method the bootstrap script uses to download the consumer RPM</h5>
<div class="paragraph">
<p>By default, the bootstrap script uses HTTP to download the consumer RPM from <code>http://satellite.example.com/pub/katello-ca-consumer-latest.noarch.rpm</code>.
In some environments, you might want to allow HTTPS only between the host and Satellite.
Use <code>--download-method</code> to change the download method from HTTP to HTTPS.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>On Red&#160;Hat Enterprise Linux 8, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># /usr/libexec/platform-python bootstrap.py \
--login=<em>admin</em> \
--server <em>satellite.example.com</em> \
--location="<em>My_Location</em>" \
--organization="<em>My_Organization</em>" \
--hostgroup="<em>My_Host_Group</em>" \
--activationkey="<em>My_Activation_Key</em>" \
--download-method https</pre>
</div>
</div>
</li>
<li>
<p>On Red&#160;Hat Enterprise Linux 6 or 7, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># bootstrap.py --login=<em>admin</em> \
--server <em>satellite.example.com</em> \
--location="<em>My_Location</em>" \
--organization="<em>My_Organization</em>" \
--hostgroup="<em>My_Host_Group</em>" \
--activationkey="<em>My_Activation_Key</em>" \
--download-method https</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Providing_the_Hosts_IP_Address_managing-hosts"><a class="anchor" href="#Providing_the_Hosts_IP_Address_managing-hosts"></a>Providing the host&#8217;s IP address to Satellite</h5>
<div class="paragraph">
<p>On hosts with multiple interfaces or multiple IP addresses on one interface, you might need to override the auto-detection of the IP address and provide a specific IP address to Satellite.
Use <code>--ip</code>.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>On Red&#160;Hat Enterprise Linux 8, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># /usr/libexec/platform-python bootstrap.py \
--login=<em>admin</em> \
--server <em>satellite.example.com</em> \
--location="<em>My_Location</em>" \
--organization="<em>My_Organization</em>" \
--hostgroup="<em>My_Host_Group</em>" \
--activationkey="<em>My_Activation_Key</em>" \
--ip <em>192.x.x.x</em></pre>
</div>
</div>
</li>
<li>
<p>On Red&#160;Hat Enterprise Linux 6 or 7, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># bootstrap.py --login=<em>admin</em> \
--server <em>satellite.example.com</em> \
--location="<em>My_Location</em>" \
--organization="<em>My_Organization</em>" \
--hostgroup="<em>My_Host_Group</em>" \
--activationkey="<em>My_Activation_Key</em>" \
--ip <em>192.x.x.x</em></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Enabling_Remote_Execution_on_the_Host_managing-hosts"><a class="anchor" href="#Enabling_Remote_Execution_on_the_Host_managing-hosts"></a>Enabling remote execution on the host</h5>
<div class="paragraph">
<p>Use <code>--rex</code> and <code>--rex-user</code> to enable remote execution and add the required SSH keys for the specified user.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>On Red&#160;Hat Enterprise Linux 8, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># /usr/libexec/platform-python bootstrap.py \
--login=<em>admin</em> \
--server <em>satellite.example.com</em> \
--location="<em>My_Location</em>" \
--organization="<em>My_Organization</em>" \
--hostgroup="<em>My_Host_Group</em>" \
--activationkey="<em>My_Activation_Key</em>" \
--rex \
--rex-user <em>root</em></pre>
</div>
</div>
</li>
<li>
<p>On Red&#160;Hat Enterprise Linux 6 or 7, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># bootstrap.py --login=<em>admin</em> \
--server <em>satellite.example.com</em> \
--location="<em>My_Location</em>" \
--organization="<em>My_Organization</em>" \
--hostgroup="<em>My_Host_Group</em>" \
--activationkey="<em>My_Activation_Key</em>" \
--rex \
--rex-user <em>root</em></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Creating_a_Domain_for_a_Host_During_Registration_managing-hosts"><a class="anchor" href="#Creating_a_Domain_for_a_Host_During_Registration_managing-hosts"></a>Creating a domain for a host during registration</h5>
<div class="paragraph">
<p>To create a host record, the DNS domain of a host needs to exist in Satellite prior to running the script.
If the domain does not exist, add it using <code>--add-domain</code>.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>On Red&#160;Hat Enterprise Linux 8, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># /usr/libexec/platform-python bootstrap.py \
--login=<em>admin</em> \
--server <em>satellite.example.com</em> \
--location="<em>My_Location</em>" \
--organization="<em>My_Organization</em>" \
--hostgroup="<em>My_Host_Group</em>" \
--activationkey="<em>My_Activation_Key</em>" \
--add-domain</pre>
</div>
</div>
</li>
<li>
<p>On Red&#160;Hat Enterprise Linux 6 or 7, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># bootstrap.py --login=<em>admin</em> \
--server <em>satellite.example.com</em> \
--location="<em>My_Location</em>" \
--organization="<em>My_Organization</em>" \
--hostgroup="<em>My_Host_Group</em>" \
--activationkey="<em>My_Activation_Key</em>" \
--add-domain</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Providing_an_Alternative_FQDN_for_the_Host_managing-hosts"><a class="anchor" href="#Providing_an_Alternative_FQDN_for_the_Host_managing-hosts"></a>Providing an alternative FQDN for the host</h5>
<div class="paragraph">
<p>If the host&#8217;s host name is not an FQDN, or is not RFC-compliant (containing a character such as an underscore), the script will fail at the host name validation stage.
If you cannot update the host to use an FQDN that is accepted by Satellite, you can use the bootstrap script to specify an alternative FQDN.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Set <code>create_new_host_when_facts_are_uploaded</code> and <code>create_new_host_when_report_is_uploaded</code> to false using Hammer:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer settings set \
--name create_new_host_when_facts_are_uploaded \
--value false
# hammer settings set \
--name create_new_host_when_report_is_uploaded \
--value false</pre>
</div>
</div>
</li>
<li>
<p>Use <code>--fqdn</code> to specify the FQDN that will be reported to Satellite:</p>
<div class="ulist">
<ul>
<li>
<p>On Red&#160;Hat Enterprise Linux 8, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># /usr/libexec/platform-python bootstrap.py --login=<em>admin</em> \
--server <em>satellite.example.com</em> \
--location="<em>My_Location</em>" \
--organization="<em>My_Organization</em>" \
--hostgroup="<em>My_Host_Group</em>" \
--activationkey="<em>My_Activation_Key</em>" \
--fqdn <em>node100.example.com</em></pre>
</div>
</div>
</li>
<li>
<p>On Red&#160;Hat Enterprise Linux 6 or 7, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># bootstrap.py --login=<em>admin</em> \
--server <em>satellite.example.com</em> \
--location="<em>My_Location</em>" \
--organization="<em>My_Organization</em>" \
--hostgroup="<em>My_Host_Group</em>" \
--activationkey="<em>My_Activation_Key</em>" \
--fqdn <em>node100.example.com</em></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Installing_Tracer_managing-hosts"><a class="anchor" href="#Installing_Tracer_managing-hosts"></a>6.5. Installing Tracer</h3>
<div class="paragraph">
<p>Use this procedure to install Tracer on Red&#160;Hat Satellite and access Traces.
Tracer displays a list of services and applications that are outdated and need to be restarted.
Traces is the output generated by Tracer in the Satellite web UI.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The host must be registered to Red&#160;Hat Satellite.</p>
</li>
<li>
<p>The Red&#160;Hat Satellite Client 6 repository must be enabled and synchronized on Satellite&#160;Server, and enabled on the host.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>On the content host, install the <code>katello-host-tools-tracer</code> RPM package:</p>
<div class="listingblock">
<div class="content">
<pre># yum install katello-host-tools-tracer</pre>
</div>
</div>
</li>
<li>
<p>Enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre># katello-tracer-upload</pre>
</div>
</div>
</li>
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>, then click the required host name.</p>
</li>
<li>
<p>Click the <strong>Traces</strong> tab to view Traces.
If it is not installed, an <strong>Enable Traces</strong> button initiates a remote execution job that installs the package.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="installing-and-configuring-puppet-agent-during-host-registration_managing-hosts"><a class="anchor" href="#installing-and-configuring-puppet-agent-during-host-registration_managing-hosts"></a>6.6. Installing and configuring Puppet agent during host registration</h3>
<div class="paragraph">
<p>You can install and configure the Puppet agent on the host during registration.
A configured Puppet agent is required on the host for Puppet integration with your Satellite.
For more information about Puppet, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_configurations_using_puppet_integration/index#"><em>Managing configurations using Puppet integration</em></a>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Puppet must be enabled in your Satellite.
For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_configurations_using_puppet_integration/index#Enabling_Puppet_Integration_managing-configurations-puppet">Enabling Puppet Integration with Satellite</a> in <em>Managing configurations using Puppet integration</em>.</p>
</li>
<li>
<p>You enabled and synchronized the <strong>Satellite Client 6</strong> repository to Satellite.
For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_content/index#Importing_Content_content-management">Importing Content</a> in <em>Managing content</em>.</p>
</li>
<li>
<p>You created an activation key that enables the <strong>Satellite Client 6</strong> repository for hosts.
For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_content/index#Managing_Activation_Keys_content-management">Managing Activation Keys</a> in <em>Managing content</em>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Configure</strong> &gt; <strong>Global Parameters</strong> to add host parameters globally.
Alternatively, you can navigate to <strong>Configure</strong> &gt; <strong>Host Groups</strong> and edit or create a host group to add host parameters only to a host group.</p>
</li>
<li>
<p>Enable the Puppet agent using a host parameter in global parameters or a host group.
Add a host parameter named <code>enable-puppet7</code>, select the <strong>boolean</strong> type, and set the value to <code>true</code>.</p>
</li>
<li>
<p>Specify configuration for the Puppet agent using the following host parameters in global parameters or a host group:</p>
<div class="ulist">
<ul>
<li>
<p>Add a host parameter named <code>puppet_server</code>, select the <strong>string</strong> type, and set the value to the hostname of your Puppet server, such as <code>puppet.example.com</code>.</p>
</li>
<li>
<p>Optional: Add a host parameter named <code>puppet_ca_server</code>, select the <strong>string</strong> type, and set the value to the hostname of your Puppet CA server, such as <code>puppet-ca.example.com</code>.
If <code>puppet_ca_server</code> is not set, the Puppet agent will use the same server as <code>puppet_server</code>.</p>
</li>
<li>
<p>Optional: Add a host parameter named <code>puppet_environment</code>, select the <strong>string</strong> type, and set the value to the Puppet environment you want the host to use.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Until the <a href="https://bugzilla.redhat.com/show_bug.cgi?id=2177730">BZ2177730</a> is resolved, you must use host parameters to specify the Puppet agent configuration even in integrated setups where the Puppet server is a Capsule&#160;Server.</p>
</div>
</li>
<li>
<p>Navigate to <strong>Hosts</strong> &gt; <strong>Register Host</strong> and register your host using an appropriate activation key.
For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_hosts/index#Registering_Hosts_managing-hosts">Registering Hosts</a> in <em>Managing hosts</em>.</p>
</li>
<li>
<p>Navigate to <strong>Infrastructure</strong> &gt; <strong>Capsules</strong>.</p>
</li>
<li>
<p>From the list in the <strong>Actions</strong> column for the required Capsule&#160;Server, select <strong>Certificates</strong>.</p>
</li>
<li>
<p>Click <strong>Sign</strong> to the right of the required host to sign the SSL certificate for the Puppet agent.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Installing_and_Configuring_Puppet_Agent_Manually_managing-hosts"><a class="anchor" href="#Installing_and_Configuring_Puppet_Agent_Manually_managing-hosts"></a>6.7. Installing and configuring Puppet agent manually</h3>
<div class="paragraph">
<p>You can install and configure the Puppet agent on a host manually.
A configured Puppet agent is required on the host for Puppet integration with your Satellite.
For more information about Puppet, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_configurations_using_puppet_integration/index#"><em>Managing configurations using Puppet integration</em></a>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Puppet must be enabled in your Satellite.
For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_configurations_using_puppet_integration/index#Enabling_Puppet_Integration_managing-configurations-puppet">Enabling Puppet Integration with Satellite</a> in <em>Managing configurations using Puppet integration</em>.</p>
</li>
<li>
<p>The host must have a Puppet environment assigned to it.</p>
</li>
<li>
<p>The <strong>Satellite Client 6</strong> repository must be enabled and synchronized to Satellite&#160;Server, and enabled on the host.
For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_content/index#Importing_Content_content-management">Importing Content</a> in <em>Managing content</em>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in to the host as the <code>root</code> user.</p>
</li>
<li>
<p>Install the Puppet agent package.</p>
<div class="ulist">
<ul>
<li>
<p>On hosts running Red&#160;Hat Enterprise Linux 8 and above:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf install puppet-agent</pre>
</div>
</div>
</li>
<li>
<p>On hosts running Red&#160;Hat Enterprise Linux 7 and below:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># yum install puppet-agent</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Add the Puppet agent to <code>PATH</code> in your current shell using the following script:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">. /etc/profile.d/puppet-agent.sh</pre>
</div>
</div>
</li>
<li>
<p>Configure the Puppet agent.
Set the <code>environment</code> parameter to the name of the Puppet environment to which the host belongs:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># puppet config set server <em>satellite.example.com</em> --section agent
# puppet config set environment <em>My_Puppet_Environment</em> --section agent</pre>
</div>
</div>
</li>
<li>
<p>Start the Puppet agent service:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># puppet resource service puppet ensure=running enable=true</pre>
</div>
</div>
</li>
<li>
<p>Create a certificate for the host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># puppet ssl bootstrap</pre>
</div>
</div>
</li>
<li>
<p>In the Satellite web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Capsules</strong>.</p>
</li>
<li>
<p>From the list in the <strong>Actions</strong> column for the required Capsule&#160;Server, select <strong>Certificates</strong>.</p>
</li>
<li>
<p>Click <strong>Sign</strong> to the right of the required host to sign the SSL certificate for the Puppet agent.</p>
</li>
<li>
<p>On the host, run the Puppet agent again:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># puppet ssl bootstrap</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Adding_Network_Interfaces_managing-hosts"><a class="anchor" href="#Adding_Network_Interfaces_managing-hosts"></a>7. Adding network interfaces</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Satellite supports specifying multiple network interfaces for a single host.
You can configure these interfaces when creating a new host as described in <a href="#Creating_a_Host_managing-hosts">Creating a host in Red&#160;Hat Satellite</a> or when editing an existing host.</p>
</div>
<div class="paragraph">
<p>There are several types of network interfaces that you can attach to a host.
When adding a new interface, select one of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Interface</strong>: Allows you to specify an additional physical or virtual interface.
There are two types of virtual interfaces you can create.
Use <strong>VLAN</strong> when the host needs to communicate with several (virtual) networks using a single interface, while these networks are not accessible to each other.
Use <strong>alias</strong> to add an additional IP address to an existing interface.</p>
<div class="paragraph">
<p>For more information about adding a physical interface, see <a href="#Adding_a_Physical_Interface_managing-hosts">Adding a physical interface</a>.</p>
</div>
<div class="paragraph">
<p>For more information about adding a virtual interface, see <a href="#Adding_a_Virtual_Interface_managing-hosts">Adding a virtual interface</a>.</p>
</div>
</li>
<li>
<p><strong>Bond</strong>: Creates a bonded interface.
NIC bonding is a way to bind multiple network interfaces together into a single interface that appears as a single device and has a single MAC address.
This enables two or more network interfaces to act as one, increasing the bandwidth and providing redundancy.
For more information, see <a href="#Adding_a_Bonded_Interface_managing-hosts">Adding a bonded interface</a>.</p>
</li>
<li>
<p><strong>BMC</strong>: Baseboard Management Controller (BMC) allows you to remotely monitor and manage the physical state of machines.
For more information about BMC, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/installing_satellite_server_in_a_connected_network_environment/index#enabling-power-management-on-hosts_satellite">Enabling Power Management on Hosts</a> in <em>Installing Satellite&#160;Server in a connected network environment</em>.
For more information about configuring BMC interfaces, see <a href="#Adding_a_Baseboard_Management_Controller_Interface_managing-hosts">Adding a baseboard management controller (BMC) interface</a>.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Additional interfaces have the <strong>Managed</strong> flag enabled by default, which means the new interface is configured automatically during provisioning by the DNS and DHCP Capsule&#160;Servers associated with the selected subnet.
This requires a subnet with correctly configured DNS and DHCP Capsule&#160;Servers.
If you use a Kickstart method for host provisioning, configuration files are automatically created for managed interfaces in the post-installation phase at <code>/etc/sysconfig/network-scripts/ifcfg-<em>interface_id</em></code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Virtual and bonded interfaces currently require a MAC address of a physical device.
Therefore, the configuration of these interfaces works only on bare-metal hosts.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="Adding_a_Physical_Interface_managing-hosts"><a class="anchor" href="#Adding_a_Physical_Interface_managing-hosts"></a>7.1. Adding a physical interface</h3>
<div class="paragraph">
<p>Use this procedure to add an additional physical interface to a host.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>.</p>
</li>
<li>
<p>Click <strong>Edit</strong> next to the host you want to edit.</p>
</li>
<li>
<p>On the <strong>Interfaces</strong> tab, click <strong>Add Interface</strong>.</p>
</li>
<li>
<p>Keep the <strong>Interface</strong> option selected in the <strong>Type</strong> list.</p>
</li>
<li>
<p>Specify a <strong>MAC address</strong>.
This setting is required.</p>
</li>
<li>
<p>Specify the <strong>Device Identifier</strong>, for example <strong>eth0</strong>.
The identifier is used to specify this physical interface when creating bonded interfaces, VLANs, and aliases.</p>
</li>
<li>
<p>Specify the <strong>DNS name</strong> associated with the host&#8217;s IP address.
Satellite saves this name in Capsule&#160;Server associated with the selected domain (the "DNS A" field) and Capsule&#160;Server associated with the selected subnet (the "DNS PTR" field).
A single host can therefore have several DNS entries.</p>
</li>
<li>
<p>Select a domain from the <strong>Domain</strong> list.
To create and manage domains, navigate to <strong>Infrastructure</strong> &gt; <strong>Domains</strong>.</p>
</li>
<li>
<p>Select a subnet from the <strong>Subnet</strong> list.
To create and manage subnets, navigate to <strong>Infrastructure</strong> &gt; <strong>Subnets</strong>.</p>
</li>
<li>
<p>Specify the <strong>IP address</strong>.
Managed interfaces with an assigned DHCP Capsule&#160;Server require this setting for creating a DHCP lease.
DHCP-enabled managed interfaces are automatically provided with a suggested IP address.</p>
</li>
<li>
<p>Select whether the interface is <strong>Managed</strong>.
If the interface is managed, configuration is pulled from the associated Capsule&#160;Server during provisioning, and DNS and DHCP entries are created.
If using kickstart provisioning, a configuration file is automatically created for the interface.</p>
</li>
<li>
<p>Select whether this is the <strong>Primary</strong> interface for the host.
The DNS name from the primary interface is used as the host portion of the FQDN.</p>
</li>
<li>
<p>Select whether this is the <strong>Provision</strong> interface for the host.
TFTP boot takes place using the provisioning interface.
For image-based provisioning, the script to complete the provisioning is executed through the provisioning interface.</p>
</li>
<li>
<p>Select whether to use the interface for <strong>Remote execution</strong>.</p>
</li>
<li>
<p>Leave the <strong>Virtual NIC</strong> checkbox clear.</p>
</li>
<li>
<p>Click <strong>OK</strong> to save the interface configuration.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to apply the changes to the host.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Adding_a_Virtual_Interface_managing-hosts"><a class="anchor" href="#Adding_a_Virtual_Interface_managing-hosts"></a>7.2. Adding a virtual interface</h3>
<div class="paragraph">
<p>Use this procedure to configure a virtual interface for a host.
This can be either a VLAN or an alias interface.</p>
</div>
<div class="paragraph">
<p>An alias interface is an additional IP address attached to an existing interface.
An alias interface automatically inherits a MAC address from the interface it is attached to; therefore, you can create an alias without specifying a MAC address.
The interface must be specified in a subnet with boot mode set to <code>static</code>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>.</p>
</li>
<li>
<p>Click <strong>Edit</strong> next to the host you want to edit.</p>
</li>
<li>
<p>On the <strong>Interfaces</strong> tab, click <strong>Add Interface</strong>.</p>
</li>
<li>
<p>Keep the <strong>Interface</strong> option selected in the <strong>Type</strong> list.</p>
</li>
<li>
<p>Specify the general interface settings.
The applicable configuration options are the same as for the physical interfaces described in <a href="#Adding_a_Physical_Interface_managing-hosts">Adding a physical interface</a>.</p>
<div class="paragraph">
<p>Specify a <strong>MAC address</strong> for managed virtual interfaces so that the configuration files for provisioning are generated correctly.
However, a <strong>MAC address</strong> is not required for virtual interfaces that are not managed.</p>
</div>
<div class="paragraph">
<p>If creating a VLAN, specify ID in the form of <strong>eth1.10</strong> in the <strong>Device Identifier</strong> field.
If creating an alias, use ID in the form of <strong>eth1:10</strong>.</p>
</div>
</li>
<li>
<p>Select the <strong>Virtual NIC</strong> checkbox.
Additional configuration options specific to virtual interfaces are appended to the form:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Tag</strong>: Optionally set a VLAN tag to trunk a network segment from the physical network through to the virtual interface.
If you do not specify a tag, managed interfaces inherit the VLAN tag of the associated subnet.
User-specified entries from this field are not applied to alias interfaces.</p>
</li>
<li>
<p><strong>Attached to</strong>: Specify the identifier of the physical interface to which the virtual interface belongs, for example <strong>eth1</strong>.
This setting is required.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>OK</strong> to save the interface configuration.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to apply the changes to the host.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Adding_a_Bonded_Interface_managing-hosts"><a class="anchor" href="#Adding_a_Bonded_Interface_managing-hosts"></a>7.3. Adding a bonded interface</h3>
<div class="paragraph">
<p>Use this procedure to configure a bonded interface for a host.
To use the CLI instead of the Satellite web UI, see the <a href="#cli-adding-a-bonded-interface_managing-hosts">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>.</p>
</li>
<li>
<p>Click <strong>Edit</strong> next to the host you want to edit.</p>
</li>
<li>
<p>On the <strong>Interfaces</strong> tab, click <strong>Add Interface</strong>.</p>
</li>
<li>
<p>Select <strong>Bond</strong> from the <strong>Type</strong> list.
Additional type-specific configuration options are appended to the form.</p>
</li>
<li>
<p>Specify the general interface settings.
The applicable configuration options are the same as for the physical interfaces described in <a href="#Adding_a_Physical_Interface_managing-hosts">Adding a physical interface</a>.</p>
<div class="paragraph">
<p>Bonded interfaces use IDs in the form of <strong>bond0</strong> in the <strong>Device Identifier</strong> field.</p>
</div>
<div class="paragraph">
<p>A single <strong>MAC address</strong> is sufficient.</p>
</div>
<div class="paragraph">
<p>If you are adding a secondary interface, select <strong>Managed</strong>.
Otherwise, Satellite does not apply the configuration.</p>
</div>
</li>
<li>
<p>Specify the configuration options specific to bonded interfaces:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Mode</strong>: Select the bonding mode that defines a policy for fault tolerance and load balancing.
See <a href="#Bonding_Modes_Available_managing-hosts">Bonding modes available in Satellite</a> for a brief description of each bonding mode.</p>
</li>
<li>
<p><strong>Attached devices</strong>: Specify a comma-separated list of identifiers of attached devices.
These can be physical interfaces or VLANs.</p>
</li>
<li>
<p><strong>Bond options</strong>: Specify a space-separated list of configuration options, for example <strong>miimon=100</strong>.
For more information on configuration options for bonded interfaces, see <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/configuring_and_managing_networking/index#configuring-network-bonding_configuring-and-managing-networking">Configuring network bonding</a> in the <em>Red&#160;Hat Enterprise Linux Configuring and Managing Networking</em> guide.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>OK</strong> to save the interface configuration.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to apply the changes to the host.</p>
</li>
</ol>
</div>
<div id="cli-adding-a-bonded-interface_managing-hosts" class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>To create a host with a bonded interface, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host create \
--ask-root-password yes \
--hostgroup <em>My_Host_Group</em> \
--ip=<em>My_IP_Address</em> \
--mac=<em>My_MAC_Address</em> \
--managed true \
--interface="identifier=<em>My_NIC_1, mac=_My_MAC_Address_1</em>, managed=true, type=Nic::Managed, domain_id=<em>My_Domain_ID</em>, subnet_id=<em>My_Subnet_ID</em>" \
--interface="identifier=<em>My_NIC_2</em>, mac=<em>My_MAC_Address_2</em>, managed=true, type=Nic::Managed, domain_id=<em>My_Domain_ID</em>, subnet_id=<em>My_Subnet_ID</em>" \
--interface="identifier=<em>bond0</em>, ip=<em>My_IP_Address_2</em>, type=Nic::Bond, mode=active-backup, attached_devices=[<em>My_NIC_1</em>,<em>My_NIC_2</em>], managed=true, domain_id=<em>My_Domain_ID</em>, subnet_id=<em>My_Subnet_ID</em>" \
--location "<em>My_Location</em>" \
--name "<em>My_Host_Name</em>" \
--organization "<em>My_Organization</em>" \
--subnet-id=<em>My_Subnet_ID</em></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Bonding_Modes_Available_managing-hosts"><a class="anchor" href="#Bonding_Modes_Available_managing-hosts"></a>7.4. Bonding modes available in Satellite</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Bonding Mode</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">balance-rr</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transmissions are received and sent sequentially on each bonded interface.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">active-backup</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transmissions are received and sent through the first available bonded interface.
Another bonded interface is only used if the active bonded interface fails.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">balance-xor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transmissions are based on the selected hash policy.
In this mode, traffic destined for specific peers is always sent over the same interface.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">broadcast</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All transmissions are sent on all bonded interfaces.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">802.a3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Creates aggregation groups that share the same settings.
Transmits and receives on all interfaces in the active group.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">balance-tlb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The outgoing traffic is distributed according to the current load on each bonded interface.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">balance-alb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Receive load balancing is achieved through Address Resolution Protocol (ARP) negotiation.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="Adding_a_Baseboard_Management_Controller_Interface_managing-hosts"><a class="anchor" href="#Adding_a_Baseboard_Management_Controller_Interface_managing-hosts"></a>7.5. Adding a baseboard management controller (BMC) interface</h3>
<div class="paragraph">
<p>Use this procedure to configure a baseboard management controller (BMC) interface for a host that supports this feature.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The <code>ipmitool</code> package is installed.</p>
</li>
<li>
<p>You know the MAC address, IP address, and other details of the BMC interface on the host, and the appropriate credentials for that interface.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>You only need the MAC address for the BMC interface if the BMC interface is managed, so that it can create a DHCP reservation.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Enable BMC on the Capsule server if it is not already enabled:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Configure BMC power management on Capsule&#160;Server by running the <code>satellite-installer</code> script with the following options:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer --foreman-proxy-bmc=true \
--foreman-proxy-bmc-default-provider=ipmitool</pre>
</div>
</div>
</li>
<li>
<p>In the Satellite web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Capsules</strong>.</p>
</li>
<li>
<p>From the list in the <strong>Actions</strong> column, click <strong>Refresh</strong>.
The list in the <strong>Features</strong> column should now include BMC.</p>
</li>
</ol>
</div>
</li>
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>.</p>
</li>
<li>
<p>Click <strong>Edit</strong> next to the host you want to edit.</p>
</li>
<li>
<p>On the <strong>Interfaces</strong> tab, click <strong>Add Interface</strong>.</p>
</li>
<li>
<p>Select <strong>BMC</strong> from the <strong>Type</strong> list.
Type-specific configuration options are appended to the form.</p>
</li>
<li>
<p>Specify the general interface settings.
The applicable configuration options are the same as for the physical interfaces described in <a href="#Adding_a_Physical_Interface_managing-hosts">Adding a physical interface</a>.</p>
</li>
<li>
<p>Specify the configuration options specific to BMC interfaces:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Username</strong> and <strong>Password</strong>: Specify any authentication credentials required by BMC.</p>
</li>
<li>
<p><strong>Provider</strong>: Specify the BMC provider.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>OK</strong> to save the interface configuration.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to apply the changes to the host.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Upgrading_Hosts_to_Next_Major_Release_managing-hosts"><a class="anchor" href="#Upgrading_Hosts_to_Next_Major_Release_managing-hosts"></a>8. Upgrading hosts to next major Red&#160;Hat Enterprise Linux release</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use a job template to upgrade your Red&#160;Hat Enterprise Linux hosts to the next major release.
Below upgrade paths are possible:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Red&#160;Hat Enterprise Linux 7 to Red&#160;Hat Enterprise Linux 8</p>
</li>
<li>
<p>Red&#160;Hat Enterprise Linux 8 to Red&#160;Hat Enterprise Linux 9</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure that your Red&#160;Hat Enterprise Linux hosts meet the requirements for the upgrade.</p>
<div class="ulist">
<ul>
<li>
<p>For Red&#160;Hat Enterprise Linux 7 to Red&#160;Hat Enterprise Linux 8 upgrade, see <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/upgrading_from_rhel_7_to_rhel_8/planning-an-upgrade_upgrading-from-rhel-7-to-rhel-8">Planning an upgrade</a> in <em>Upgrading from RHEL 7 to RHEL 8</em>.</p>
</li>
<li>
<p>For Red&#160;Hat Enterprise Linux 8 to Red&#160;Hat Enterprise Linux 9 upgrade, see <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/upgrading_from_rhel_8_to_rhel_9/planning-an-upgrade-to-rhel-9_upgrading-from-rhel-8-to-rhel-9">Planning an upgrade to RHEL 9</a> in <em>Upgrading from RHEL 8 to RHEL 9</em>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Prepare your Red&#160;Hat Enterprise Linux hosts for the upgrade.</p>
<div class="ulist">
<ul>
<li>
<p>For Red&#160;Hat Enterprise Linux 7 to Red&#160;Hat Enterprise Linux 8 upgrade, see <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/upgrading_from_rhel_7_to_rhel_8/index#preparing-a-rhel-7-system-for-the-upgrade_upgrading-from-rhel-7-to-rhel-8">Preparing a RHEL 7 system for the upgrade</a> in <em>Upgrading from RHEL 7 to RHEL 8</em>.</p>
</li>
<li>
<p>For Red&#160;Hat Enterprise Linux 8 to Red&#160;Hat Enterprise Linux 9 upgrade, see <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/upgrading_from_rhel_8_to_rhel_9/assembly_preparing-for-the-upgrade_upgrading-from-rhel-8-to-rhel-9#preparing-a-rhel-8-system-for-the-upgrade_upgrading-from-rhel-8-to-rhel-9">Preparing a RHEL 8 system for the upgrade</a> in <em>Upgrading from RHEL 8 to RHEL 9</em>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Distribute Satellite SSH keys to the hosts that you want to upgrade.
For more information, see <a href="#Distributing_SSH_Keys_for_Remote_Execution_managing-hosts">Distributing SSH keys for remote execution</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>On Satellite, enable the Leapp plug-in:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer --enable-foreman-plugin-leapp</pre>
</div>
</div>
</li>
<li>
<p>If you are using a custom job template for the Leapp pre-upgrade check, configure the <strong>leapp_preupgrade</strong> remote execution feature to point to your template:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Satellite web UI, navigate to <strong>Administer</strong> &gt; <strong>Remote Execution Features</strong>.</p>
</li>
<li>
<p>Click <strong>leapp_preupgrade</strong>.</p>
</li>
<li>
<p>In the <strong>Job Template</strong> dropdown menu, select your template.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>.</p>
</li>
<li>
<p>Select the hosts that you want to upgrade to the next major Red&#160;Hat Enterprise Linux version.</p>
</li>
<li>
<p>From the <strong>Schedule Remote Job</strong> list, select <strong>Preupgrade check with Leapp</strong>.</p>
</li>
<li>
<p>When the check is finished, click the <strong>Leapp preupgrade report</strong> tab to see if Leapp has found any issues on your hosts.
Issues that have the <strong>Inhibitor</strong> flag are considered crucial and are likely to break the upgrade procedure.
Issues that have the <strong>Has Remediation</strong> flag contain remediation that can help you fix the issue.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Click an issue that is flagged as <strong>Has Remediation</strong> to expand it.</p>
<div class="ulist">
<ul>
<li>
<p>If the issue contains a remediation <strong>Command</strong>, you can fix it directly from Satellite using remote execution.
Select the issue.</p>
</li>
<li>
<p>If the issue contains only a remediation <strong>Hint</strong>, use the hint to fix the issue on the host manually.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Repeat this step for other issues.</p>
</div>
</li>
<li>
<p>After you selected any issues with remediation commands, click <strong>Fix Selected</strong> and submit the job.</p>
</li>
<li>
<p>After the issues are fixed, click <strong>Rerun</strong>, and then click <strong>Submit</strong> to run the pre-upgrade check again to verify that the hosts you are upgrading do not have any issues and are ready to be upgraded.</p>
</li>
</ol>
</div>
</li>
<li>
<p>If the pre-upgrade check verifies that the hosts do not have any issues, click <strong>Run Upgrade</strong> and click <strong>Submit</strong> to start the upgrade.
Alternatively, you can upgrade your host by selecting <strong>Upgrade with Leapp</strong> in the <strong>Schedule Remote Job</strong> drop down menu.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="converting-a-host-to-rhel_managing-hosts"><a class="anchor" href="#converting-a-host-to-rhel_managing-hosts"></a>9. Converting a host to Red&#160;Hat Enterprise Linux</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can convert Red&#160;Hat Enterprise Linux derivative distributions into a supportable Red&#160;Hat Enterprise Linux on a host while retaining installed applications and configurations.
Satellite provides <strong>Convert2RHEL</strong> utilities to simplify the conversion process.</p>
</div>
<div class="paragraph">
<p>The <strong>Convert2RHEL</strong> utilities in Satellite contain an Ansible role and Ansible playbook.
You use the Ansible role to generate conversion data on Satellite&#160;Server, which includes enabling required repositories and creating products, activation keys, and host groups.
Then you perform the actual conversion on the host using the Ansible playbook, which installs the Convert2RHEL CLI tool on the host and runs it.</p>
</div>
<div class="paragraph">
<p>You can use the Ansible role to generate conversion data for the following conversions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>CentOS Linux 7 to Red&#160;Hat Enterprise Linux 7</p>
</li>
<li>
<p>Oracle Linux 7 to Red&#160;Hat Enterprise Linux 7</p>
</li>
<li>
<p>Oracle Linux 8 to Red&#160;Hat Enterprise Linux 8</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These conversions are supported by Red Hat.</p>
</div>
<div class="paragraph">
<p>The conversion process is similar to a minor release upgrade of Red&#160;Hat Enterprise Linux in which every RPM package on the system is replaced.
Third-party packages and non-Red Hat packages that are not available in Red&#160;Hat Enterprise Linux are retained.</p>
</div>
<div class="paragraph">
<p>The Convert2RHEL utility removes unnecessary packages such as logos or packages known to cause issues during the conversion.
The utility replaces the <code>CentOS-release</code> or <code>Oracle-release</code> package with the <code>rhel-release</code> package, and all packages signed by CentOS or Oracle with their Red Hat equivalents.
The utility also subscribes the host to Red&#160;Hat Subscription Management.</p>
</div>
<div class="paragraph">
<p>The duration of the conversion process depends on the number of packages that have to be replaced, network speed, storage speed, and similar factors.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Review <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/converting_from_an_rpm-based_linux_distribution_to_rhel/index#con_supported-conversion-paths_converting-from-a-linux-distribution-to-rhel">Supported conversion paths</a> in <em>Converting from an RPM-based Linux distribution to RHEL</em>.</p>
</li>
<li>
<p>You must have completed the steps 1.&#8202;&#8211;&#8202;5. of the procedure <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/converting_from_an_rpm-based_linux_distribution_to_rhel/index#proc_preparing-for-a-rhel-conversion_converting-using-the-command-line">Preparing for a RHEL conversion</a> in <em>Converting from an RPM-based Linux distribution to RHEL</em>.</p>
</li>
<li>
<p>Ensure you have a subscription manifest uploaded to your Satellite and that there are sufficient Red&#160;Hat Enterprise Linux entitlements allocated for the conversions you intend.
Alternatively, you can use Ansible variables to tell the role to import the manifest from disk.
The manifest must be imported to the organization to which you will register hosts for conversion.</p>
<div class="paragraph">
<p>You can update your allocations and download the updated manifest from the <a href="https://access.redhat.com">Red Hat Customer Portal</a>.
For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_subscription_management/2022/html/using_red_hat_subscription_management/using_manifests_con">Using manifests</a> in <em>Red Hat Subscription Management</em>.</p>
</div>
</li>
<li>
<p>Ensure that you have enabled and synchronized Red Hat repositories in Satellite for the minor Red&#160;Hat Enterprise Linux version to which you convert your hosts.
For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_content/index#Enabling_Red_Hat_Repositories_content-management">Enabling Red Hat Repositories</a> and <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_content/index#Synchronizing_Repositories_content-management">Synchronizing Repositories</a> in <em>Managing content</em>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">High-level conversion steps</div>
<ol class="arabic">
<li>
<p>Import the <code>redhat.satellite.convert2rhel</code> Ansible role and variables.
For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_configurations_using_ansible_integration/index#Importing_Ansible_Roles_and_Variables_ansible">Importing Ansible Roles and Variables</a> in <em>Managing configurations using Ansible integration</em>.</p>
</li>
<li>
<p>Configure Ansible variables for generation of conversion data.
For more information, see <a href="#ansible-variables-for-conversion_managing-hosts">Ansible variables for conversion</a>.</p>
</li>
<li>
<p>Assign the <code>redhat.satellite.convert2rhel</code> role to the host that represents Satellite&#160;Server.
For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_configurations_using_ansible_integration/index#Assigning_Ansible_Roles_to_an_Existing_Host_ansible">Assigning Ansible Roles to an Existing Host</a> in <em>Managing configurations using Ansible integration</em>.</p>
</li>
<li>
<p>Run the Ansible role on Satellite&#160;Server.
For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_configurations_using_ansible_integration/index#running-ansible-roles-on-a-host_ansible">Running Ansible Roles on a Host</a> in <em>Managing configurations using Ansible integration</em>.</p>
<div class="paragraph">
<p>The Ansible role generates data required for host conversion, that is, repositories, certificates, activation keys, and host groups.
The role enables the <code>rhel-7-server-rpms</code> repository with the <strong>7Server</strong> release and <strong>x86_64</strong> architecture, or <code>rhel-8-for-x86_64-baseos-rpms</code> and <code>rhel-8-for-x86_64-appstream-rpms</code>, or both, depending on which variables you have set in the previous steps.</p>
</div>
</li>
<li>
<p>Register a host for conversion using a generated host group.</p>
<div class="paragraph">
<p>Use the global registration template to register and subscribe your host before the conversion.
Select the host group that was generated for the conversion you intend, such as <code>CentOS 7 converting</code> if you convert the host from CentOS&#160;7.
For more information, see <a href="#Registering_Hosts_by_Using_Global_Registration_managing-hosts">Registering hosts by using global registration</a>.</p>
</div>
</li>
<li>
<p>Run the pre-conversion analysis on the host group to verify if your hosts are ready for the conversion.
Execute a remote job with the following settings:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Job category</strong>: <code>Convert 2 RHEL</code></p>
</li>
<li>
<p><strong>Job template</strong>: <code>Convert2RHEL analyze</code></p>
<div class="paragraph">
<p>For more information, see <a href="#executing-a-remote-job_managing-hosts">Executing a remote job</a>.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Review pre-conversion analysis reports and resolve all issues that are blocking the conversion.
Repeat this step until you resolve all blocking issues.
For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/converting_from_an_rpm-based_linux_distribution_to_rhel/index#reviewing-the-pre-conversion-analysis-report_converting-using-the-command-line">Reviewing the pre-conversion analysis report</a> in <em>Converting from an RPM-based Linux distribution to RHEL</em>.</p>
</div>
</li>
<li>
<p>Run the Convert2RHEL playbook on the host group.
Execute a remote job with the following settings:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Job category</strong>: <code>Convert 2 RHEL</code></p>
</li>
<li>
<p><strong>Job template</strong>: <code>Convert to RHEL</code></p>
</li>
<li>
<p><strong>Activation key</strong>:</p>
<div class="ulist">
<ul>
<li>
<p><code>convert2rhel_rhel7</code> if you convert to Red&#160;Hat Enterprise Linux 7</p>
</li>
<li>
<p><code>convert2rhel_rhel8</code> if you convert to Red&#160;Hat Enterprise Linux 8</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information, see <a href="#executing-a-remote-job_managing-hosts">Executing a remote job</a>.</p>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://access.redhat.com/articles/2360841">How to perform an unsupported conversion from a RHEL-derived Linux distribution to RHEL</a> in the <em>Red&#160;Hat Knowledgebase</em></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="ansible-variables-for-conversion_managing-hosts"><a class="anchor" href="#ansible-variables-for-conversion_managing-hosts"></a>9.1. Ansible variables for conversion</h3>
<div class="paragraph">
<p>Before you run the Ansible role to generate conversion data, configure values of the following required Ansible variables.</p>
</div>
<div class="paragraph">
<p>Satellite imports most of the required Ansible variables from the <code>redhat.satellite.convert2rhel</code> role.
However, some variables are not imported.
These variables are marked with an asterisk <code>*</code> in the tables below.
You must create those additional variables manually and assign them to the <code>redhat.satellite.convert2rhel</code> role.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Required variables for conversion</caption>
<colgroup>
<col style="width: 44.4444%;">
<col style="width: 11.1111%;">
<col style="width: 44.4445%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Intent and value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>satellite_server_url</code> *</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of your Satellite&#160;Server, such as <code>https://satellite.example.com</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>satellite_username</code> *</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Your user name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>satellite_password</code> *</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Your password</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>satellite_organization</code> *</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of your organization</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>satellite_content_rhel_wait_for_syncs</code> *</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set to <code>false</code> if you do not want Satellite&#160;Server to wait until repository sync finishes before continuing with data generation. (default: <code>true</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>satellite_validate_certs</code> *</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set to <code>true</code> if you want to enable certificate checks in Ansible. (default: <code>true</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>satellite_convert2rhel_manage_subscription</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set to <code>false</code> if you already have a manifest on your Satellite&#160;Server.
If you upload a new manifest from disk, the current manifest will be overwritten. (default: <code>true</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>satellite_content_rhel_enable_rhel7</code> *</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables Red&#160;Hat Enterprise Linux 7 repositories.
Set to <code>false</code> if you do not intend to convert hosts to Red&#160;Hat Enterprise Linux 7. (default: <code>true</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>satellite_convert2rhel_enable_oracle7</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set to <code>true</code> if you want to prepare conversion data for Oracle Linux 7.
Otherwise, you must set the value to <code>false</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>satellite_content_rhel_enable_rhel8</code> *</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables Red&#160;Hat Enterprise Linux 8 repositories.
Set to <code>false</code> if you do not intend to convert hosts to Red&#160;Hat Enterprise Linux 8. (default: <code>true</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>satellite_convert2rhel_enable_oracle8</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set to <code>true</code> if you want to prepare conversion data for Oracle Linux 8.
Otherwise, you must set the value to <code>false</code>.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Optional variables for conversion</caption>
<colgroup>
<col style="width: 44.4444%;">
<col style="width: 11.1111%;">
<col style="width: 44.4445%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Intent and value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>satellite_manifest_path</code> *</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to a manifest to upload from disk, such as <code>~/manifest.zip</code>.
You must set this path if you upload a new manifest from disk using <code>satellite_convert2rhel_manage_subscription</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>satellite_content_rhel_rhel8_releasever</code> *</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minor release version, such as <code>8.5</code>.
Set this variable if the minor release version of your system differs from the latest Red&#160;Hat Enterprise Linux release to prevent conversion issues. (default: latest)</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Host_Management_and_Monitoring_Using_Cockpit_managing-hosts"><a class="anchor" href="#Host_Management_and_Monitoring_Using_Cockpit_managing-hosts"></a>10. Host management and monitoring using RHEL web console</h2>
<div class="sectionbody">
<div class="paragraph">
<p>RHEL web console is an interactive web interface that you can use to perform actions and monitor Red&#160;Hat Enterprise Linux hosts.
You can enable a remote-execution feature to integrate Satellite with RHEL web console.
When you install RHEL web console on a host that you manage with Satellite, you can view the RHEL web console dashboards of that host from within the Satellite web UI.
You can also use the features that are integrated with RHEL web console, for example, Red&#160;Hat Image Builder.</p>
</div>
<div class="sect2">
<h3 id="Enabling_Cockpit_on_Server_managing-hosts"><a class="anchor" href="#Enabling_Cockpit_on_Server_managing-hosts"></a>10.1. Enabling RHEL web console on Satellite</h3>
<div class="paragraph">
<p>By default, RHEL web console integration is disabled in Satellite.
If you want to access RHEL web console features for your hosts from within Satellite, you must first enable RHEL web console integration on Satellite&#160;Server.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Enable RHEL web console on your Satellite&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer --enable-foreman-plugin-remote-execution-cockpit</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Managing_and_Monitoring_Hosts_Using_Cockpit_managing-hosts"><a class="anchor" href="#Managing_and_Monitoring_Hosts_Using_Cockpit_managing-hosts"></a>10.2. Managing and monitoring hosts using RHEL web console</h3>
<div class="paragraph">
<p>You can access the RHEL web console web UI through the Satellite web UI and use the functionality to manage and monitor hosts in Satellite.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>RHEL web console is enabled in Satellite.</p>
</li>
<li>
<p>RHEL web console is installed on the host that you want to view:</p>
<div class="ulist">
<ul>
<li>
<p>For Red&#160;Hat Enterprise Linux 8, see <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_systems_using_the_rhel_8_web_console/getting-started-with-the-rhel-8-web-console_system-management-using-the-rhel-8-web-console#installing-the-web-console_getting-started-with-the-rhel-8-web-console">Installing the web console</a> in the <em>Managing systems using the RHEL 8 web console</em> guide.</p>
</li>
<li>
<p>For Red&#160;Hat Enterprise Linux 7, see <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/managing_systems_using_the_rhel_7_web_console/getting-started-with-the-rhel-web-console_system-management-using-the-rhel-7-web-console#installing-the-web-console_getting-started-with-the-web-console">Installing the web console</a> in the <em>Managing systems using the RHEL 7 web console</em> guide.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Satellite or Capsule can authenticate to the host with SSH keys.
For more information, see <a href="#Distributing_SSH_Keys_for_Remote_Execution_managing-hosts">Distributing SSH keys for remote execution</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong> and select the host that you want to manage and monitor with RHEL web console.</p>
</li>
<li>
<p>In the upper right of the host window, click the vertical ellipsis and select <strong>Web Console</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can now access the full range of features available for host monitoring and management, for example, Red&#160;Hat Image Builder, through the RHEL web console.</p>
</div>
<div class="paragraph">
<p>For more information about getting started with Red Hat web console, see the <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_systems_using_the_rhel_8_web_console/index"><em>Managing systems using the RHEL 8 web console</em></a> guide or the <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/managing_systems_using_the_rhel_7_web_console/getting-started-with-the-rhel-web-console_system-management-using-the-rhel-7-web-console#installing-the-web-console_getting-started-with-the-web-console"><em>Managing systems using the RHEL 7 web console</em></a> guide.</p>
</div>
<div class="paragraph">
<p>For more information about using Red&#160;Hat Image Builder through RHEL web console, see <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/composing_a_customized_rhel_system_image/creating-system-images-with-composer-web-console-interface_composing-a-customized-rhel-system-image#accessing-composer-gui-in-the-rhel-8-web-console_creating-system-images-with-composer-web-console-interface">Accessing Image Builder GUI in the RHEL 8 web console</a> or <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/image_builder_guide/chap-documentation-image_builder-test_chapter_4#sect-Documentation-Image_Builder-Chapter4">Accessing Image Builder GUI in the RHEL 7 web console</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="disabling-cockpit-on-project_managing-hosts"><a class="anchor" href="#disabling-cockpit-on-project_managing-hosts"></a>10.3. Disabling RHEL web console on Satellite</h3>
<div class="paragraph">
<p>Perform the following procedure if you want to disable RHEL web console on Satellite.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Run this <code>satellite-installer</code> command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer --no-enable-foreman-plugin-remote-execution-cockpit</pre>
</div>
</div>
</li>
<li>
<p>In the Satellite web UI, navigate to <strong>Administer</strong> &gt; <strong>Settings</strong> and click the <strong>Remote execution</strong> tab.</p>
</li>
<li>
<p>In the <strong>Cockpit URL</strong> row, erase the setting under <strong>Value</strong> and click <strong>Submit</strong>.
This removes the <strong>Web Console</strong> button from the Satellite web UI.</p>
</li>
<li>
<p>Uninstall the RHEL web console package from Satellite:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-maintain packages remove rubygem-foreman_remote_execution-cockpit</pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>RHEL web console integration can be independently enabled or disabled on Capsule&#160;Servers.
To prevent enabling RHEL web console integration on a Capsule&#160;Server, run the following command after completing the procedure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer --foreman-proxy-plugin-remote-execution-script-cockpit-integration=false</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Monitoring_Hosts_Using_Red_Hat_Insights_managing-hosts"><a class="anchor" href="#Monitoring_Hosts_Using_Red_Hat_Insights_managing-hosts"></a>11. Monitoring hosts using Red&#160;Hat Insights</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use Insights to diagnose systems and downtime related to security exploits, performance degradation, and stability failures.
You can use the Insights dashboard to quickly identify key risks to stability, security, and performance.
You can sort by category, view details of the impact and resolution, and then determine what systems are affected.</p>
</div>
<div class="paragraph">
<p>To use Insights to monitor hosts that you manage with Satellite, you must first install Insights on your hosts and register your hosts with Insights.</p>
</div>
<div class="paragraph">
<p>For new Satellite hosts, you can install and configure Insights during host registration to Satellite.
For more information, see <a href="#Registering_Hosts_by_Using_Global_Registration_managing-hosts">Registering hosts by using global registration</a>.</p>
</div>
<div class="paragraph">
<p>For hosts already registered to Satellite, you can install and configure Insights on your hosts by using an Ansible role.
For more information, see <a href="#deploying-red-hat-insights-using-the-ansible-role_managing-hosts">Deploying Red&#160;Hat Insights using the Ansible role</a>.</p>
</div>
<div class="ulist">
<div class="title">Additional information</div>
<ul>
<li>
<p>To view the logs for all plug-ins, go to <code>/var/log/foreman/production.log</code>.</p>
</li>
<li>
<p>If you have problems connecting to Insights, ensure that your certificates are up-to-date.
Refresh your subscription manifest to update your certificates.</p>
</li>
<li>
<p>You can change the default schedule for running <code>insights-client</code> by configuring <code>insights-client.timer</code> on a host.
For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_insights/2023/html/client_configuration_guide_for_red_hat_insights/assembly-client-changing-schedule">Changing the insights-client schedule</a> in the <em>Client Configuration Guide for Red Hat Insights</em>.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="access_to_information_from_insights_in_Satellite_managing-hosts"><a class="anchor" href="#access_to_information_from_insights_in_Satellite_managing-hosts"></a>11.1. Access to information from Insights in Satellite</h3>
<div class="paragraph">
<p>You can access the additional information available for hosts from Red&#160;Hat Insights in the following places in the Satellite web UI:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Navigate to <strong>Configure</strong> &gt; <strong>Insights</strong> where the vertical ellipsis next to the <strong>Remediate</strong> button provides a <strong>View in Red&#160;Hat Insights</strong> link to the general recommendations page.
On each recommendation line, the vertical ellipsis provides a <strong>View in Red&#160;Hat Insights</strong> link to the recommendation rule, and, if one is available for that recommendation, a <strong>Knowledgebase article</strong> link.</p>
</li>
<li>
<p>For additional information, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>.
If the host has recommendations listed, click on the number of recommendations.
On the <strong>Insights</strong> tab, the vertical ellipsis next to the <strong>Remediate</strong> button provides a <strong>Go To Satellite Insights page</strong> link to information for the system, and a <strong>View in Red&#160;Hat Insights</strong> link to host details on the console.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="excluding-hosts-from-rh-cloud-and-insights-client-reports_managing-hosts"><a class="anchor" href="#excluding-hosts-from-rh-cloud-and-insights-client-reports_managing-hosts"></a>11.2. Excluding hosts from rh-cloud and insights-client reports</h3>
<div class="paragraph">
<p>You can set the <code>host_registration_insights</code> parameter to <strong>False</strong> to omit <em>rh-cloud</em> and <em>insights-client</em> reports.
Satellite will exclude the hosts from <em>rh-cloud</em> reports and block <em>insights-client</em> from uploading a report to the cloud.</p>
</div>
<div class="paragraph">
<p>Use the following procedure to change the value of <code>host_registration_insights</code> parameter:</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Host</strong> &gt; <strong>All Hosts</strong>.</p>
</li>
<li>
<p>Select any host for which you want to change the value.</p>
</li>
<li>
<p>On the <strong>Parameters</strong> tab, click on the edit button of <code>host_registration_insights</code>.</p>
</li>
<li>
<p>Set the value to <strong>False</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This parameter can also be set at the organization, hostgroup, subnet, and domain level.
Also, it automatically prevents new reports from being uploaded as long as they are associated with the entity.</p>
</div>
<div class="paragraph">
<p>If you set the parameter to false on a host that is already reported on the <a href="https://console.redhat.com/">Red Hat Hybrid Cloud Console</a>, it will be still removed automatically from the inventory.
However, this process can take some time to complete.</p>
</div>
</div>
<div class="sect2">
<h3 id="deploying-red-hat-insights-using-the-ansible-role_managing-hosts"><a class="anchor" href="#deploying-red-hat-insights-using-the-ansible-role_managing-hosts"></a>11.3. Deploying Red&#160;Hat Insights using the Ansible role</h3>
<div class="paragraph">
<p>The <strong>RedHatInsights.insights-client</strong> Ansible role is used to automate the installation and registration of hosts with Insights.
For more information about adding this role to your Satellite, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_configurations_using_ansible_integration/index#Getting_Started_with_Ansible_in_satellite_ansible">Getting Started with Ansible in Satellite</a> in <em>Managing configurations using Ansible integration</em>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Add the <strong>RedHatInsights.insights-client</strong> role to the hosts.</p>
<div class="paragraph">
<p>For new hosts, see <a href="#Creating_a_Host_managing-hosts">Creating a host in Red&#160;Hat Satellite</a>.</p>
</div>
<div class="paragraph">
<p>For existing hosts, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_configurations_using_ansible_integration/index#Using_Ansible_Roles_to_Automate_Repetitive_Tasks_on_Clients_ansible">Using Ansible Roles to Automate Repetitive Tasks on Clients</a> in <em>Managing configurations using Ansible integration</em>.</p>
</div>
</li>
<li>
<p>To run the <strong>RedHatInsights.insights-client</strong> role on your host, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong> and click the name of the host that you want to use.</p>
</li>
<li>
<p>On the host details page, expand the <strong>Schedule a job</strong> dropdown menu.</p>
</li>
<li>
<p>Click <strong>Run Ansible roles</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="configuring_synchronization_of_insights_recommendations_for_hosts_managing-hosts"><a class="anchor" href="#configuring_synchronization_of_insights_recommendations_for_hosts_managing-hosts"></a>11.4. Configuring synchronization of Insights recommendations for hosts</h3>
<div class="paragraph">
<p>You can enable automatic synchronization of the recommendations from Red&#160;Hat Hybrid Cloud Console that occurs daily by default.
If you leave the setting disabled, you can synchronize the recommendations manually.</p>
</div>
<div class="ulist">
<div class="title">Procedures</div>
<ul>
<li>
<p>To get the recommendations automatically:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Configure</strong> &gt; <strong>Insights</strong>.</p>
</li>
<li>
<p>Enable <strong>Sync Automatically</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>To get the recommendations manually:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Configure</strong> &gt; <strong>Insights</strong>.</p>
</li>
<li>
<p>On the vertical ellipsis, click <strong>Sync Recommendations</strong>.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="configuring_automatic_removal_of_hosts_from_the_insights_inventory_managing-hosts"><a class="anchor" href="#configuring_automatic_removal_of_hosts_from_the_insights_inventory_managing-hosts"></a>11.5. Configuring automatic removal of hosts from the Insights Inventory</h3>
<div class="paragraph">
<p>When hosts are removed from Satellite, they can also be removed from the inventory of Red&#160;Hat Insights, either automatically or manually.
You can configure automatic removal of hosts from the Insights Inventory during Red&#160;Hat Hybrid Cloud Console synchronization with Satellite that occurs daily by default.
If you leave the setting disabled, you can still remove the bulk of hosts from the Inventory manually.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Your user account must have the permission of <code>view_foreman_rh_cloud</code> to view the Inventory Upload page in Satellite web UI.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Configure</strong> &gt; <strong>Inventory Upload</strong>.</p>
</li>
<li>
<p>Enable the <strong>Automatic Mismatch Deletion</strong> setting.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Creating_an_Insights_Remediation_Plan_for_Hosts_managing-hosts"><a class="anchor" href="#Creating_an_Insights_Remediation_Plan_for_Hosts_managing-hosts"></a>11.6. Creating an Insights remediation plan for hosts</h3>
<div class="paragraph">
<p>With Satellite, you can create a Red&#160;Hat Insights remediation plan and run the plan on Satellite hosts.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Configure</strong> <strong>&gt;</strong> <strong>Insights</strong>.</p>
</li>
<li>
<p>On the Red&#160;Hat Insights page, select the number of recommendations that you want to include in an Insights plan.</p>
<div class="paragraph">
<p>You can only select the recommendations that have an associated playbook.</p>
</div>
</li>
<li>
<p>Click <strong>Remediate</strong>.</p>
</li>
<li>
<p>In the <strong>Remediation Summary</strong> window, you can select the <strong>Resolutions</strong> to apply.
Use the <strong>Filter</strong> field to search for specific keywords.</p>
</li>
<li>
<p>Click <strong>Remediate</strong>.</p>
</li>
<li>
<p>In the <strong>Job Invocation</strong> page, do not change the contents of precompleted fields.</p>
</li>
<li>
<p>Optional. For more advanced configuration of the Remote Execution Job, click <strong>Show Advanced Fields</strong>.</p>
</li>
<li>
<p>Select the <strong>Type of query</strong> you require.</p>
</li>
<li>
<p>Select the <strong>Schedule</strong> you require.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Alternatively:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> <strong>&gt;</strong> <strong>All Hosts</strong>.</p>
</li>
<li>
<p>Select a host.</p>
</li>
<li>
<p>On the Host details page, click <strong>Recommendations</strong>.</p>
</li>
<li>
<p>On the Red&#160;Hat Insights page, select the number of recommendations you want to include in an Insights plan and proceed as before.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In the Jobs window, you can view the progress of your plan.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Using_Report_Templates_to_Monitor_Hosts_managing-hosts"><a class="anchor" href="#Using_Report_Templates_to_Monitor_Hosts_managing-hosts"></a>12. Using report templates to monitor hosts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use report templates to query Satellite data to obtain information about, for example, host status, registered hosts, applicable errata, applied errata, subscription details, and user activity.
You can use the report templates that ship with Satellite or write your own custom report templates to suit your requirements.
The reporting engine uses the embedded Ruby (ERB) syntax.
For more information about writing templates and ERB syntax, see <a href="#Template_Writing_Reference_managing-hosts">Template writing reference</a>.</p>
</div>
<div class="paragraph">
<p>You can create a template, or clone a template and edit the clone.
For help with the template syntax, click a template and click the <strong>Help</strong> tab.</p>
</div>
<div class="sect2">
<h3 id="Generating_Host_Monitoring_Reports_managing-hosts"><a class="anchor" href="#Generating_Host_Monitoring_Reports_managing-hosts"></a>12.1. Generating host monitoring reports</h3>
<div class="paragraph">
<p>To view the report templates in the Satellite web UI, navigate to <strong>Monitor</strong> &gt; <strong>Reports</strong> &gt; <strong>Report Templates</strong>.
To schedule reports, configure a cron job or use the Satellite web UI.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Monitor</strong> &gt; <strong>Reports</strong> &gt; <strong>Report Templates</strong>.
For example, the following templates are available:</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Host &#8211; Installed Products</dt>
<dd>
<p>Use this template for hosts in Simple Content Access (SCA) organizations.
It generates a report with installed product information along with other metrics included in <strong>Subscription &#8211; Entitlement Report</strong> except information about subscriptions.</p>
</dd>
<dt class="hdlist1">Subscription &#8211; Entitlement Report</dt>
<dd>
<p>Use this template for hosts that are not in SCA organizations.
It generates a report with information about subscription entitlements including when they expire.
It only outputs information for hosts in organizations that do not use SCA.</p>
</dd>
</dl>
</div>
</li>
<li>
<p>To the right of the report template that you want to use, click <strong>Generate</strong>.</p>
</li>
<li>
<p>Optional: To schedule a report, to the right of the <strong>Generate at</strong> field, click the icon to select the date and time you want to generate the report at.</p>
</li>
<li>
<p>Optional: To send a report to an e-mail address, select the <strong>Send report via e-mail</strong> checkbox, and in the <strong>Deliver to e-mail addresses</strong> field, enter the required e-mail address.</p>
</li>
<li>
<p>Optional: Apply search query filters.
To view all available results, do not populate the filter field with any values.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.
A CSV file that contains the report is downloaded.
If you have selected the <strong>Send report via e-mail</strong> checkbox, the host monitoring report is sent to your e-mail address.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all available report templates:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer report-template list</pre>
</div>
</div>
</li>
<li>
<p>Generate a report:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer report-template generate --id <em>My_Template_ID</em></pre>
</div>
</div>
<div class="paragraph">
<p>This command waits until the report fully generates before completing.
If you want to generate the report as a background task, you can use the <code>hammer report-template schedule</code> command.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you want to generate a subscription entitlement report, you have to use the <code>Days from Now</code> option to specify the latest expiration time of entitlement subscriptions.
You can use the <code>no limit</code> value to show all entitlements.</p>
</div>
<div class="listingblock">
<div class="title">Show all entitlements</div>
<div class="content">
<pre class="nowrap"># hammer report-template generate \
--inputs "Days from Now=no limit" \
--name "Subscription - Entitlement Report"</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Show all entitlements that are going to expire within 60 days</div>
<div class="content">
<pre class="nowrap"># hammer report-template generate \
--inputs "Days from Now=60" \
--name "Subscription - Entitlement Report"</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Creating_a_Report_Template_managing-hosts"><a class="anchor" href="#Creating_a_Report_Template_managing-hosts"></a>12.2. Creating a report template</h3>
<div class="paragraph">
<p>In Satellite, you can create a report template and customize the template to suit your requirements.
You can import existing report templates and further customize them with snippets and template macros.</p>
</div>
<div class="paragraph">
<p>Report templates use Embedded Ruby (ERB) syntax.
To view information about working with ERB syntax and macros, in the Satellite web UI, navigate to <strong>Monitor</strong> &gt; <strong>Reports</strong> &gt; <strong>Report Templates</strong>, and click <strong>Create Template</strong>, and then click the <strong>Help</strong> tab.</p>
</div>
<div class="paragraph">
<p>When you create a report template in Satellite, safe mode is enabled by default.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Monitor</strong> &gt; <strong>Reports</strong> &gt; <strong>Report Templates</strong>.</p>
</li>
<li>
<p>Click <strong>Create Template</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a unique name for your report template.</p>
</li>
<li>
<p>If you want the template to be available to all locations and organizations, select <strong>Default</strong>.</p>
</li>
<li>
<p>Create the template directly in the template editor or import a template from a text file by clicking <strong>Import</strong>.
For more information about importing templates, see <a href="#Importing_Report_Templates_managing-hosts">Importing report templates</a>.</p>
</li>
<li>
<p>Optional: In the <strong>Audit Comment</strong> field, you can add any useful information about this template.</p>
</li>
<li>
<p>Click the <strong>Input</strong> tab, and in the <strong>Name</strong> field, enter a name for the input that you can reference in the template in the following format: <code>input('name')</code>.
Note that you must save the template before you can reference this input value in the template body.</p>
</li>
<li>
<p>Select whether the input value is mandatory.
If the input value is mandatory, select the <strong>Required</strong> checkbox.</p>
</li>
<li>
<p>From the <strong>Value Type</strong> list, select the type of input value that the user must input.</p>
</li>
<li>
<p>Optional: If you want to use facts for template input, select the <strong>Advanced</strong> checkbox.</p>
</li>
<li>
<p>Optional: In the <strong>Options</strong> field, define the options that the user can select from.
If this field remains undefined, the users receive a free-text field in which they can enter the value they want.</p>
</li>
<li>
<p>Optional: In the <strong>Default</strong> field, enter a value, for example, a host name, that you want to set as the default template input.</p>
</li>
<li>
<p>Optional: In the <strong>Description</strong> field, you can enter information that you want to display as inline help about the input when you generate the report.</p>
</li>
<li>
<p>Optional: Click the <strong>Type</strong> tab, and select whether this template is a snippet to be included in other templates.</p>
</li>
<li>
<p>Click the <strong>Location</strong> tab and add the locations where you want to use the template.</p>
</li>
<li>
<p>Click the <strong>Organizations</strong> tab and add the organizations where you want to use the template.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to save your changes.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>For more information about safe mode, see <a href="#Report_Template_Safe_Mode_managing-hosts">Report template safe mode</a>.</p>
</li>
<li>
<p>For more information about writing templates, see <a href="#Template_Writing_Reference_managing-hosts">Template writing reference</a>.</p>
</li>
<li>
<p>For more information about macros you can use in report templates, see <a href="#Template_Macros_managing-hosts">Template macros</a>.</p>
</li>
<li>
<p>To view a step by step example of populating a template, see <a href="#Creating_a_Report_Template_to_Monitor_Entitlements_managing-hosts">Creating a report template to monitor entitlements</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Exporting_Report_Templates_managing-hosts"><a class="anchor" href="#Exporting_Report_Templates_managing-hosts"></a>12.3. Exporting report templates</h3>
<div class="paragraph">
<p>You can export report templates that you create in Satellite.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Monitor</strong> &gt; <strong>Reports</strong> &gt; <strong>Report Templates</strong>.</p>
</li>
<li>
<p>Locate the template that you want to export, and from the list in the <strong>Actions</strong> column, select <strong>Export</strong>.</p>
</li>
<li>
<p>Repeat this action for every report template that you want to download.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>An <code>.erb</code> file that contains the template downloads.</p>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>To view the report templates available for export, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer report-template list</pre>
</div>
</div>
<div class="paragraph">
<p>Note the template ID of the template that you want to export in the output of this command.</p>
</div>
</li>
<li>
<p>To export a report template, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer report-template dump --id <em>My_Template_ID</em> &gt; <em>example_export</em>.erb</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Exporting_Report_Templates_Using_the_API_managing-hosts"><a class="anchor" href="#Exporting_Report_Templates_Using_the_API_managing-hosts"></a>12.4. Exporting report templates using the Satellite API</h3>
<div class="paragraph">
<p>You can use the Satellite <code>report_templates</code> API to export report templates from Satellite.
For more information about using the Satellite API, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/api_guide/index#">API guide</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Use the following request to retrieve a list of available report templates:</p>
<div class="listingblock">
<div class="title">Example request:</div>
<div class="content">
<pre class="nowrap">$ curl --insecure --user admin:redhat \
--request GET \
--config https://<em>satellite.example.com</em>/api/report_templates \
| json_reformat</pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the <code>json_reformat</code> tool is used to format the JSON output.</p>
</div>
<div class="listingblock">
<div class="title">Example response:</div>
<div class="content">
<pre class="nowrap">{
    "total": 6,
    "subtotal": 6,
    "page": 1,
    "per_page": 20,
    "search": null,
    "sort": {
        "by": null,
        "order": null
    },
    "results": [
        {
            "created_at": "2019-11-20 17:49:52 UTC",
            "updated_at": "2019-11-20 17:49:52 UTC",
            "name": "Applicable errata",
            "id": 112
        },
        {
            "created_at": "2019-11-20 17:49:52 UTC",
            "updated_at": "2019-11-20 17:49:52 UTC",
            "name": "Applied Errata",
            "id": 113
        },
        {
            "created_at": "2019-11-30 16:15:24 UTC",
            "updated_at": "2019-11-30 16:15:24 UTC",
            "name": "Hosts - complete list",
            "id": 158
        },
        {
            "created_at": "2019-11-20 17:49:52 UTC",
            "updated_at": "2019-11-20 17:49:52 UTC",
            "name": "Host statuses",
            "id": 114
        },
        {
            "created_at": "2019-11-20 17:49:52 UTC",
            "updated_at": "2019-11-20 17:49:52 UTC",
            "name": "Registered hosts",
            "id": 115
        },
        {
            "created_at": "2019-11-20 17:49:52 UTC",
            "updated_at": "2019-11-20 17:49:52 UTC",
            "name": "Subscriptions",
            "id": 116
        }
    ]
}</pre>
</div>
</div>
</li>
<li>
<p>Note the <code>id</code> of the template that you want to export, and use the following request to export the template:</p>
<div class="listingblock">
<div class="title">Example request:</div>
<div class="content">
<pre class="nowrap">$ curl --insecure --output <em>/tmp/_Example_Export_Template</em>.erb_ \
--user <em>admin:password</em> --request GET --config \
https://<em>satellite.example.com</em>/api/report_templates/<em>My_Template_ID</em>/export</pre>
</div>
</div>
<div class="paragraph">
<p>Note that <code>158</code> is an example ID of the template to export.</p>
</div>
<div class="paragraph">
<p>In this example, the exported template is redirected to <code>host_complete_list.erb</code>.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Importing_Report_Templates_managing-hosts"><a class="anchor" href="#Importing_Report_Templates_managing-hosts"></a>12.5. Importing report templates</h3>
<div class="paragraph">
<p>You can import a report template into the body of a new template that you want to create.
Note that using the Satellite web UI, you can only import templates individually.
For bulk actions, use the Satellite API.
For more information, see <a href="#Importing_Report_Templates_Using_the_API_managing-hosts">Importing report templates using the Satellite API</a>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have exported templates from Satellite to import them to use in new templates.
For more information see <a href="#Exporting_Report_Templates_managing-hosts">Exporting report templates</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Monitor</strong> &gt; <strong>Reports</strong> &gt; <strong>Report Templates</strong>.</p>
</li>
<li>
<p>In the upper right of the Report Templates window, click <strong>Create Template</strong>.</p>
</li>
<li>
<p>On the upper right of the <strong>Editor</strong> tab, click the folder icon, and select the <code>.erb</code> file that you want to import.</p>
</li>
<li>
<p>Edit the template to suit your requirements.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For more information about customizing your new template, see <a href="#Template_Writing_Reference_managing-hosts">Template writing reference</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Importing_Report_Templates_Using_the_API_managing-hosts"><a class="anchor" href="#Importing_Report_Templates_Using_the_API_managing-hosts"></a>12.6. Importing report templates using the Satellite API</h3>
<div class="paragraph">
<p>You can use the Satellite API to import report templates into Satellite.
Importing report templates using the Satellite API automatically parses the report template metadata and assigns organizations and locations.
For more information about using the Satellite API, see the <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/api_guide/index#">API guide</a>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Create a template using <code>.erb</code> syntax or export a template from another Satellite.</p>
<div class="paragraph">
<p>For more information about writing templates, see <a href="#Template_Writing_Reference_managing-hosts">Template writing reference</a>.</p>
</div>
<div class="paragraph">
<p>For more information about exporting templates from Satellite, see <a href="#Exporting_Report_Templates_Using_the_API_managing-hosts">Exporting report templates using the Satellite API</a>.</p>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Use the following example to format the template that you want to import to a <code>.json</code> file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># cat <em>Example_Template</em>.json
{
    "name": "<em>Example Template Name</em>",
    "template": "
    <em>Enter ERB Code Here</em>
"
}</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example JSON file with ERB template:</div>
<div class="content">
<pre>{
    "name": "Hosts - complete list",
    "template": "
&lt;%#
name: Hosts - complete list
snippet: false
template_inputs:
- name: host
  required: false
  input_type: user
  advanced: false
  value_type: plain
  resource_type: Katello::ActivationKey
model: ReportTemplate
-%&gt;
&lt;% load_hosts(search: input('host')).each_record do |host| -%&gt;
&lt;%
      report_row(
          'Server FQDN': host.name
      )
-%&gt;
&lt;%  end -%&gt;
&lt;%= report_render %&gt;
"
}</pre>
</div>
</div>
</li>
<li>
<p>Use the following request to import the template:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ curl --insecure --user admin:redhat \
--data @<em>Example_Template</em>.json --header "Content-Type:application/json" \
--request POST --config https://<em>satellite.example.com</em>/api/report_templates/import</pre>
</div>
</div>
</li>
<li>
<p>Use the following request to retrieve a list of report templates and validate that you can view the template in Satellite:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ curl --insecure --user admin:redhat \
 --request GET --config https://<em>satellite.example.com</em>/api/report_templates | json_reformat</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Generating_a_List_of_Installed_Packages_managing-hosts"><a class="anchor" href="#Generating_a_List_of_Installed_Packages_managing-hosts"></a>12.7. Generating a list of installed packages</h3>
<div class="paragraph">
<p>Use this procedure to generate a list of installed packages in <strong>Report Templates</strong>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Monitor</strong> &gt; <strong>Reports</strong> &gt; <strong>Report Templates</strong>.</p>
</li>
<li>
<p>To the right of <strong>Host - All Installed Packages</strong>, click <strong>Generate</strong>.</p>
</li>
<li>
<p>Optional: Use the <strong>Hosts filter</strong> search field to search for and apply specific host filters.</p>
</li>
<li>
<p>Click <strong>Generate</strong>.</p>
</li>
<li>
<p>If the download does not start automatically, click <strong>Download</strong>.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>You have the spreadsheet listing the installed packages for the selected hosts downloaded on your machine.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Creating_a_Report_Template_to_Monitor_Entitlements_managing-hosts"><a class="anchor" href="#Creating_a_Report_Template_to_Monitor_Entitlements_managing-hosts"></a>12.8. Creating a report template to monitor entitlements</h3>
<div class="paragraph">
<p>You can use a report template to return a list of hosts with a certain subscription and to display the number of cores for those hosts.
For more information about writing templates, see <a href="#Template_Writing_Reference_managing-hosts">Template writing reference</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Monitor</strong> &gt; <strong>Reports</strong> &gt; <strong>Report Templates</strong>.</p>
</li>
<li>
<p>Click <strong>Create Template</strong>.</p>
</li>
<li>
<p>Optional: In the <strong>Editor</strong> field, use the <code>&lt;%# &gt;</code> tags to add a comment with information that might be useful for later reference.
For example:</p>
<div class="listingblock">
<div class="content">
<pre>&lt;%#
name: Entitlements
snippet: false
model: ReportTemplate
require:
- plugin: katello
  version: 3.14.0
-%&gt;</pre>
</div>
</div>
</li>
<li>
<p>Add a line with the <code>load_hosts()</code> macro and populate the macro with the following method and variables:</p>
<div class="listingblock">
<div class="content">
<pre>&lt;%- load_hosts(includes: [:lifecycle_environment, :operatingsystem, :architecture, :content_view, :organization, :reported_data, :subscription_facet, :pools =&gt; [:subscription]]).each_record do |host| -%&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>To view a list of variables you can use, click the <strong>Help</strong> tab and in the <strong>Safe mode methods and variables</strong> table, find the <strong>Host::Managed</strong> row.</p>
</div>
</li>
<li>
<p>Add a line with the <code>host.pools</code> variable with the <code>each</code> method, for example:</p>
<div class="listingblock">
<div class="content">
<pre>&lt;%- host.pools.each do |pool| -%&gt;</pre>
</div>
</div>
</li>
<li>
<p>Add a line with the <code>report_row()</code> method to create a report and add the variables that you want to target as part of the report:</p>
<div class="listingblock">
<div class="content">
<pre>&lt;%-     report_row(
          'Name': host.name,
          'Organization': host.organization,
          'Lifecycle Environment': host.lifecycle_environment,
          'Content View': host.content_view,
          'Host Collections': host.host_collections,
          'Virtual': host.virtual,
          'Guest of Host': host.hypervisor_host,
          'OS': host.operatingsystem,
          'Arch': host.architecture,
          'Sockets': host.sockets,
          'RAM': host.ram,
          'Cores': host.cores,
          'SLA': host_sla(host),
          'Products': host_products(host),
          'Subscription Name': sub_name(pool),
          'Subscription Type': pool.type,
          'Subscription Quantity': pool.quantity,
          'Subscription SKU': sub_sku(pool),
          'Subscription Contract': pool.contract_number,
          'Subscription Account': pool.account_number,
          'Subscription Start': pool.start_date,
          'Subscription End': pool.end_date,
          'Subscription Guest': registered_through(host)
          ) -%&gt;</pre>
</div>
</div>
</li>
<li>
<p>Add end statements to the template:</p>
<div class="listingblock">
<div class="content">
<pre>&lt;%-   end -%&gt;
&lt;%- end -%&gt;</pre>
</div>
</div>
</li>
<li>
<p>To generate a report, you must add the <code>&lt;%= report_render -%&gt;</code> macro:</p>
<div class="listingblock">
<div class="content">
<pre>&lt;%= report_render -%&gt;</pre>
</div>
</div>
</li>
<li>
<p>Click <strong>Submit</strong> to save the template.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Report_Template_Safe_Mode_managing-hosts"><a class="anchor" href="#Report_Template_Safe_Mode_managing-hosts"></a>12.9. Report template safe mode</h3>
<div class="paragraph">
<p>When you create report templates in Satellite, safe mode is enabled by default.
Safe mode limits the macros and variables that you can use in the report template.
Safe mode prevents rendering problems and enforces best practices in report templates.
The list of supported macros and variables is available in the Satellite web UI.</p>
</div>
<div class="paragraph">
<p>To view the macros and variables that are available, in the Satellite web UI, navigate to <strong>Monitor</strong> &gt; <strong>Reports</strong> &gt; <strong>Report Templates</strong> and click <strong>Create Template</strong>.
In the Create Template window, click the <strong>Help</strong> tab and expand <strong>Safe mode methods</strong>.</p>
</div>
<div class="paragraph">
<p>While safe mode is enabled, if you try to use a macro or variable that is not listed in <strong>Safe mode methods</strong>, the template editor displays an error message.</p>
</div>
<div class="paragraph">
<p>To view the status of safe mode in Satellite, in the Satellite web UI, navigate to <strong>Administer</strong> &gt; <strong>Settings</strong> and click the <strong>Provisioning</strong> tab.
Locate the <strong>Safemode rendering</strong> row to check the value.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Configuring_Host_Collections_managing-hosts"><a class="anchor" href="#Configuring_Host_Collections_managing-hosts"></a>13. Configuring host collections</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A host collection is a group of content hosts.
This feature enables you to perform the same action on multiple hosts at once.
These actions can include the installation, removal, and update of packages and errata, change of assigned lifecycle environment, and change of content view.
You can create host collections to suit your requirements, and those of your company.
For example, group hosts in host collections by function, department, or business unit.</p>
</div>
<div class="sect2">
<h3 id="Creating_a_Host_Collection_managing-hosts"><a class="anchor" href="#Creating_a_Host_Collection_managing-hosts"></a>13.1. Creating a host collection</h3>
<div class="paragraph">
<p>The following procedure shows how to create host collections.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>Host Collections</strong>.</p>
</li>
<li>
<p>Click <strong>New Host Collection</strong>.</p>
</li>
<li>
<p>Add the <strong>Name</strong> of the host collection.</p>
</li>
<li>
<p>Clear <strong>Unlimited Content Hosts</strong>, and enter the desired maximum number of hosts in the <strong>Limit</strong> field.</p>
</li>
<li>
<p>Add the <strong>Description</strong> of the host collection.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>To create a host collection, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host-collection create \
--name "<em>My_Host_Collection</em>" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Cloning_a_Host_Collection_managing-hosts"><a class="anchor" href="#Cloning_a_Host_Collection_managing-hosts"></a>13.2. Cloning a host collection</h3>
<div class="paragraph">
<p>The following procedure shows how to clone a host collection.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>Host Collections</strong>.</p>
</li>
<li>
<p>On the left hand panel, click the host collection you want to clone.</p>
</li>
<li>
<p>Click <strong>Copy Collection</strong>.</p>
</li>
<li>
<p>Specify a name for the cloned collection.</p>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Removing_a_Host_Collection_managing-hosts"><a class="anchor" href="#Removing_a_Host_Collection_managing-hosts"></a>13.3. Removing a host collection</h3>
<div class="paragraph">
<p>Use the following procedure to remove a host collection from Satellite.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>Host Collections</strong>.</p>
</li>
<li>
<p>Select the host collection that you want to remove.</p>
</li>
<li>
<p>Under <strong>Select Action</strong>, click <strong>Remove</strong>.</p>
</li>
<li>
<p>Click <strong>Delete</strong> to remove the host collection.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="adding-hosts-to-a-host-collection-in-bulk_managing-hosts"><a class="anchor" href="#adding-hosts-to-a-host-collection-in-bulk_managing-hosts"></a>13.4. Adding hosts to a host collection in bulk</h3>
<div class="paragraph">
<p>You can add multiple hosts to a host collection.</p>
</div>
<div class="paragraph">
<div class="title">Prerequisites</div>
<p>A host must be registered to Red&#160;Hat Satellite to add it to a host collection.
For more information about registering hosts, see <a href="#Registering_Hosts_by_Using_Global_Registration_managing-hosts">Registering hosts by using global registration</a>.</p>
</div>
<div class="paragraph">
<p>Note that if you add a host to a host collection, the Satellite auditing system does not log the change.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>Host Collections</strong>.</p>
</li>
<li>
<p>Select the host collection where the host should be added.</p>
</li>
<li>
<p>On the <strong>Hosts</strong> tab, select the <strong>Add</strong> subtab.</p>
</li>
<li>
<p>Select the hosts to be added from the table and click <strong>Add Selected</strong>.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>To add multiple hosts to a host collection, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host-collection add-host \
--host-ids <em>My_Host_ID_1</em>,<em>My_Host_ID_2</em> \
--id <em>My_Host_Collection_ID</em></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Removing_a_Host_From_a_Host_Collection_managing-hosts"><a class="anchor" href="#Removing_a_Host_From_a_Host_Collection_managing-hosts"></a>13.5. Removing a host from a host collection</h3>
<div class="paragraph">
<p>The following procedure shows how to remove hosts from host collections.</p>
</div>
<div class="paragraph">
<p>Note that if you remove a host from a host collection, the host collection record in the database is not modified so the Satellite auditing system does not log the change.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>Host Collections</strong>.</p>
</li>
<li>
<p>Choose the desired host collection.</p>
</li>
<li>
<p>On the <strong>Hosts</strong> tab, select the <strong>List/Remove</strong> subtab.</p>
</li>
<li>
<p>Select the hosts you want to remove from the host collection and click <strong>Remove Selected</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Adding_Content_to_a_Host_Collection_managing-hosts"><a class="anchor" href="#Adding_Content_to_a_Host_Collection_managing-hosts"></a>13.6. Adding content to a host collection</h3>
<div class="paragraph">
<p>These steps show how to add content to host collections in Red&#160;Hat Satellite.</p>
</div>
<div class="sect3">
<h4 id="Adding_Packages_to_a_Host_Collection_managing-hosts"><a class="anchor" href="#Adding_Packages_to_a_Host_Collection_managing-hosts"></a>13.6.1. Adding packages to a host collection</h4>
<div class="paragraph">
<p>The following procedure shows how to add packages to host collections.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The content to be added should be available in one of the existing repositories or added prior to this procedure.</p>
</li>
<li>
<p>Content should be promoted to the environment where the hosts are assigned.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>Host Collections</strong>.</p>
</li>
<li>
<p>Select the host collection where the package should be added.</p>
</li>
<li>
<p>On the <strong>Collection Actions</strong> tab, click <strong>Package Installation, Removal, and Update</strong>.</p>
</li>
<li>
<p>To update all packages, click <strong>Update All Packages</strong> to use the default method.
Alternatively, select the drop-down icon to the right of the button to select a method to use.
Selecting the <strong>via remote execution &#8211; customize first</strong> menu entry will take you to the <strong>Job invocation</strong> page where you can customize the action.</p>
</li>
<li>
<p>Select the <strong>Package</strong> or <strong>Package Group</strong> radio button as required.</p>
</li>
<li>
<p>In the field provided, specify the package or package group name.
Then click:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Install</strong> &#8211; to install a new package using the default method.
Alternatively, select the drop-down icon to the right of the button and select a method to use.
Selecting the <strong>via remote execution &#8211; customize first</strong> menu entry will take you to the <strong>Job invocation</strong> page where you can customize the action.</p>
</li>
<li>
<p><strong>Update</strong> &#8211; to update an existing package in the host collection using the default method.
Alternatively, select the drop-down icon to the right of the button and select a method to use.
Selecting the <strong>via remote execution &#8211; customize first</strong> menu entry will take you to the <strong>Job invocation</strong> page where you can customize the action.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Viewing_installed_packages_managing-hosts"><a class="anchor" href="#Viewing_installed_packages_managing-hosts"></a>13.6.2. Viewing installed packages</h4>
<div class="paragraph">
<p>Use the following procedure to view the installed packages of a host.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts &gt; All Hosts</strong> and select the name of the host.</p>
</li>
<li>
<p>On the <strong>Content</strong> tab, <strong>Packages</strong> displays a list of installed packages.</p>
</li>
<li>
<p>To see details of a package, select that package.</p>
<div class="ulist">
<ul>
<li>
<p>The <strong>Details</strong> tab displays details of the selected package.</p>
</li>
<li>
<p>The <strong>Files</strong> tab lists the files contained in the package.</p>
</li>
<li>
<p>The <strong>Dependencies</strong> tab lists the dependencies of the package.</p>
</li>
<li>
<p>The <strong>Repositories</strong> tab lists the repositories that contain the selected package.</p>
</li>
</ul>
</div>
</li>
<li>
<p>You can filter these by <strong>Library</strong> or <strong>Default organization</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Upgrading_a_package_managing-hosts"><a class="anchor" href="#Upgrading_a_package_managing-hosts"></a>13.6.3. Upgrading a package</h4>
<div class="paragraph">
<p>Use the following procedure to view the installed packages of a host.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong> and select the name of the host that contains the package you want to upgrade.</p>
</li>
<li>
<p>On the <strong>Content</strong> tab, select <strong>Packages</strong>.</p>
<div class="paragraph">
<p>The <strong>Status</strong> column displays whether the package is upgradable or Up-to date.
You cannot update an up-to-date package.</p>
</div>
</li>
<li>
<p>From the list of packages, choose the package you want to upgrade and click the vertical ellipsis icon at the end of the line.</p>
</li>
<li>
<p>Choose the <strong>Apply via Remote Execution</strong> to use Remote Execution, or <strong>Apply via customized remote execution</strong> if you want to customize the remote execution, for example, to set a time when it should be applied.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to upgrade the package.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Removing_a_package_from_a_host_managing-hosts"><a class="anchor" href="#Removing_a_package_from_a_host_managing-hosts"></a>13.6.4. Removing a package from a host</h4>
<div class="paragraph">
<p>Use the following procedure to remove an installed package from a host.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts &gt; All Hosts</strong> and select the host containing the package you want to remove.</p>
</li>
<li>
<p>On the <strong>Content</strong> tab, select <strong>Packages</strong>.</p>
</li>
<li>
<p>Click the vertical ellipsis icon at the end of the line for the package you want to remove, and choose the <strong>Remove</strong> option.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Adding_Errata_to_a_Host_Collection_managing-hosts"><a class="anchor" href="#Adding_Errata_to_a_Host_Collection_managing-hosts"></a>13.6.5. Adding errata to a host collection</h4>
<div class="paragraph">
<p>The following procedure shows how to add errata to host collections.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The errata to be added should be available in one of the existing repositories or added prior to this procedure.</p>
</li>
<li>
<p>Errata should be promoted to the environment where the hosts are assigned.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>Host Collections</strong>.</p>
</li>
<li>
<p>Select the host collection where the errata should be added.</p>
</li>
<li>
<p>On the <strong>Collection Actions</strong> tab, click <strong>Errata Installation</strong>.</p>
</li>
<li>
<p>Select the errata you want to add to the host collection and click <strong>Install Selected</strong> to use the default method.
Alternatively, select the drop-down icon to the right of the button to select a method to use.
Selecting the <strong>via remote execution &#8211; customize first</strong> menu entry takes you to the <strong>Job invocation</strong> page where you can customize the action.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Adding_errata_to_a_single_host_managing-hosts"><a class="anchor" href="#Adding_errata_to_a_single_host_managing-hosts"></a>13.6.6. Adding errata to a single host</h4>
<div class="paragraph">
<p>Use the following procedure to add errata to a host.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>.</p>
</li>
<li>
<p>Select the host you want to add errata to.</p>
</li>
<li>
<p>Click <strong>Content</strong> and select the <strong>Errata</strong> tab.</p>
</li>
<li>
<p>Select the errata you want to add to the host, or select the checkbox at the top of the list to add all installable errata.
Click the checkbox next to any errata you wish to remove from a full list.</p>
</li>
<li>
<p>Using the vertical ellipsis icon next to the errata you want to add to the host, select <strong>Apply via Remote Execution</strong> to use Remote Execution, or select <strong>Apply via customized remote execution</strong> if you want to customize the remote execution.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Applying_installable_errata_managing-hosts"><a class="anchor" href="#Applying_installable_errata_managing-hosts"></a>13.6.7. Applying installable errata</h4>
<div class="paragraph">
<p>Use the following procedure to view a list of installable errata and select errata to install.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts &gt; All Hosts</strong> and select the host you require.</p>
</li>
<li>
<p>If there are errata associated with the host, they are displayed in an Installable Errata card on the new Host page.</p>
</li>
<li>
<p>On the <strong>Content</strong> tab, <strong>Errata</strong> displays installable errata for the chosen host.</p>
</li>
<li>
<p>Click the checkbox for any errata you wish to install.</p>
</li>
<li>
<p>Using the vertical ellipsis icon next to the errata you want to add to the host, select <strong>Apply via Remote Execution</strong> to use Remote Execution.
Select <strong>Apply via customized remote execution</strong> if you want to customize the remote execution.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Filter_errata_by_type_or_severity_managing-hosts"><a class="anchor" href="#Filter_errata_by_type_or_severity_managing-hosts"></a>13.6.8. Filter errata by type and severity</h4>
<div class="paragraph">
<p>Use the following procedure to filter errata by type or severity.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts &gt; All Hosts</strong> and click the name of the host.</p>
</li>
<li>
<p>On the <strong>Contents</strong> tab, <strong>Errata</strong> lists the errata associated with the selected host.</p>
</li>
<li>
<p>Click <strong>Type</strong> to filter errata by type.</p>
</li>
<li>
<p>You can filter to display errata of type Security, Bugfix, or Enhancement</p>
</li>
<li>
<p>Click <strong>Severity</strong> to filter by severity.</p>
</li>
<li>
<p>You can filter to display errata of severity N/A, Low, Moderate, Important, or Critical.</p>
</li>
<li>
<p>To deselect your choice, return to the list of options and click the selected option again.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can also use the <strong>Errata</strong> card on the host page to pre-filter errata for type before display.</p>
</div>
</div>
<div class="sect3">
<h4 id="Viewing_Errata_by_Applicable_and_Installable_managing-hosts"><a class="anchor" href="#Viewing_Errata_by_Applicable_and_Installable_managing-hosts"></a>13.6.9. Viewing errata by applicable and installable</h4>
<div class="paragraph">
<p>Use the following procedure to view errata by applicable or installable.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>.</p>
</li>
<li>
<p>Select the host name.</p>
</li>
<li>
<p>Click the <strong>Overview</strong> tab.
Under the Errata card, there are two types of Errata.</p>
</li>
<li>
<p>Click <strong>Applicable</strong> to view errata that apply to a package installed on your host.</p>
</li>
<li>
<p>Click <strong>Installable</strong> to view applicable errata that are available in the host content view and lifecycle environment.</p>
</li>
<li>
<p>Click the link with number of errata under each type to see the list of all available errata of that type.</p>
</li>
<li>
<p>Click <strong>security advisories</strong>, <strong>bug fixes</strong>, or <strong>enhancements</strong> under each type to view only the respective type of errata.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Generating_a_Report_for_Installable_and_Applicable_Errata_managing-hosts"><a class="anchor" href="#Generating_a_Report_for_Installable_and_Applicable_Errata_managing-hosts"></a>13.6.10. Generating a report for installable and applicable errata</h4>
<div class="paragraph">
<p>Use the following procedure to generate a report of installable or applicable errata on hosts.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Monitor</strong> &gt; <strong>Reports</strong> &gt; <strong>Report Templates</strong>.</p>
</li>
<li>
<p>Click <strong>Generate</strong> for the <strong>Host &#8211; Applicable Errata</strong> template.</p>
</li>
<li>
<p>Optional: To schedule a report, click the <strong>calendar</strong> icon to the right of the <strong>Generate at</strong> field and choose the date and time you want for the generated report.</p>
</li>
<li>
<p>Optional: To send a report to an e-mail address, select the <strong>Send report via e-mail</strong> checkbox, and in the <strong>Deliver to e-mail addresses</strong> field, enter the required e-mail address.</p>
</li>
<li>
<p>Optional: Select another <strong>Output format</strong> for the report file.
The default is CSV.</p>
</li>
<li>
<p>Optional: To limit the report only to hosts found by the search query, click on <strong>Hosts filter</strong> and search from the available list of hosts.
For a report on all available hosts, leave <strong>Hosts filter</strong> empty.</p>
</li>
<li>
<p>Optional: To limit the report only to errata found by the search query, click on <strong>Errata filter</strong> and search from the available list of errata.
For a report on all available errata, leave <strong>Errata filter</strong> empty.</p>
</li>
<li>
<p>From the <strong>Installability</strong> list, select one of these options:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Applicable</strong> to show all applicable errata.</p>
</li>
<li>
<p><strong>Installable</strong> to limit the report exclusively to errata that are accessible in the content view environments of your host that may be installed.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Generate</strong>.
Your browser automatically downloads the report file after Satellite creates it.
If you have selected the <strong>Send report via e-mail</strong> option, the report is sent to your e-mail address.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Removing_Content_From_a_Host_Collection_managing-hosts"><a class="anchor" href="#Removing_Content_From_a_Host_Collection_managing-hosts"></a>13.6.11. Removing content from a host collection</h4>
<div class="paragraph">
<p>The following procedure shows how to remove packages from host collections.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Click <strong>Hosts</strong> &gt; <strong>Host Collections</strong>.</p>
</li>
<li>
<p>Click the host collection where the package should be removed.</p>
</li>
<li>
<p>On the <strong>Collection Actions</strong> tab, click <strong>Package Installation, Removal, and Update</strong>.</p>
</li>
<li>
<p>Select the <strong>Package</strong> or <strong>Package Group</strong> radio button as required.</p>
</li>
<li>
<p>In the field provided, specify the package or package group name.</p>
</li>
<li>
<p>Click <strong>Remove</strong> to remove the package or package group using the default method.
Alternatively, select the drop-down icon to the right of the button and select a method to use.
Selecting the <strong>via remote execution - customize first</strong> menu entry will take you to the <strong>Job invocation</strong> page where you can customize the action.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Changing_the_Lifecycle_Environment_or_Content_View_of_a_Host_Collection_managing-hosts"><a class="anchor" href="#Changing_the_Lifecycle_Environment_or_Content_View_of_a_Host_Collection_managing-hosts"></a>13.6.12. Changing the lifecycle environment or content view of a host collection</h4>
<div class="paragraph">
<p>The following procedure shows how to change the assigned lifecycle environment or content view of host collections.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>Host Collection</strong>.</p>
</li>
<li>
<p>Selection the host collection where the lifecycle environment or content view should be changed.</p>
</li>
<li>
<p>On the <strong>Collection Actions</strong> tab, click <strong>Change assigned Lifecycle Environment or Content View</strong>.</p>
</li>
<li>
<p>Select the lifecycle environment to be assigned to the host collection.</p>
</li>
<li>
<p>Select the required content view from the list.</p>
</li>
<li>
<p>Click <strong>Assign</strong>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The changes take effect in approximately 4 hours.
To make the changes take effect immediately, on the host, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># subscription-manager refresh</pre>
</div>
</div>
<div class="paragraph">
<p>You can use remote execution to run this command on multiple hosts at the same time.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Configuring_and_Setting_Up_Remote_Jobs_managing-hosts"><a class="anchor" href="#Configuring_and_Setting_Up_Remote_Jobs_managing-hosts"></a>14. Configuring and setting up remote jobs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Red&#160;Hat Satellite supports remote execution of commands on hosts.
Using remote execution, you can perform various tasks on multiple hosts simultaneously.</p>
</div>
<div class="sect2">
<h3 id="Remote-Execution-in-Satellite_managing-hosts"><a class="anchor" href="#Remote-Execution-in-Satellite_managing-hosts"></a>14.1. Remote execution in Red&#160;Hat Satellite</h3>
<div class="paragraph">
<p>With remote execution, you can run jobs on hosts remotely from Capsules using shell scripts or Ansible tasks and playbooks.</p>
</div>
<div class="paragraph">
<p>Use remote execution for the following benefits in Satellite:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Run jobs on multiple hosts at once.</p>
</li>
<li>
<p>Use variables in your commands for more granular control over the jobs you run.</p>
</li>
<li>
<p>Use host facts and parameters to populate the variable values.</p>
</li>
<li>
<p>Specify custom values for templates when you run the command.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Communication for remote execution occurs through Capsule&#160;Server, which means that Satellite&#160;Server does not require direct access to the target host, and can scale to manage many hosts.</p>
</div>
<div class="paragraph">
<p>To use remote execution, you must define a job template.
A job template is a command that you want to apply to remote hosts.
You can execute a job template multiple times.</p>
</div>
<div class="paragraph">
<p>Satellite uses ERB syntax job templates.
For more information, see <a href="#Template_Writing_Reference_managing-hosts">Template writing reference</a>.</p>
</div>
<div class="paragraph">
<p>By default, Satellite includes several job templates for shell scripts and Ansible.
For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_hosts/index#setting-up-job-templates_managing-hosts">Setting up Job Templates</a> in <em>Managing hosts</em>.</p>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>See <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_hosts/index#executing-a-remote-job_managing-hosts">Executing a Remote Job</a> in <em>Managing hosts</em>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="remote-execution-workflow_managing-hosts"><a class="anchor" href="#remote-execution-workflow_managing-hosts"></a>14.2. Remote execution workflow</h3>
<div class="paragraph">
<p>For custom Ansible roles that you create, or roles that you download, you must install the package containing the roles on your Capsule&#160;Server.
Before you can use Ansible roles, you must import the roles into Satellite from the Capsule where they are installed.</p>
</div>
<div class="paragraph">
<p>When you run a remote job on hosts, for every host, Satellite performs the following actions to find a remote execution Capsule to use.</p>
</div>
<div class="paragraph">
<p>Satellite searches only for Capsules that have the remote execution feature enabled.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Satellite finds the host&#8217;s interfaces that have the <strong>Remote execution</strong> checkbox selected.</p>
</li>
<li>
<p>Satellite finds the subnets of these interfaces.</p>
</li>
<li>
<p>Satellite finds remote execution Capsules assigned to these subnets.</p>
</li>
<li>
<p>From this set of Capsules, Satellite selects the Capsule that has the least number of running jobs.
By doing this, Satellite ensures that the jobs load is balanced between remote execution Capsules.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If you have enabled <strong>Prefer registered through Capsule for remote execution</strong>, Satellite runs the REX job using the Capsule the host is registered to.</p>
</div>
<div class="paragraph">
<p>By default, <strong>Prefer registered through Capsule for remote execution</strong> is set to <strong>No</strong>.
To enable it, in the Satellite web UI, navigate to <strong>Administer</strong> &gt; <strong>Settings</strong>, and on the <strong>Content</strong> tab, set <code>Prefer registered through Capsule for remote execution</code> to <strong>Yes</strong>.
This ensures that Satellite performs REX jobs on hosts by the Capsule to which they are registered to.</p>
</div>
<div class="paragraph">
<p>If Satellite does not find a remote execution Capsule at this stage, and if the <strong>Fallback to Any Capsule</strong> setting is enabled, Satellite adds another set of Capsules to select the remote execution Capsule from.
Satellite selects the most lightly loaded Capsule from the following types of Capsules that are assigned to the host:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>DHCP, DNS and TFTP Capsules assigned to the host&#8217;s subnets</p>
</li>
<li>
<p>DNS Capsule assigned to the host&#8217;s domain</p>
</li>
<li>
<p>Realm Capsule assigned to the host&#8217;s realm</p>
</li>
<li>
<p>Puppet server Capsule</p>
</li>
<li>
<p>Puppet CA Capsule</p>
</li>
<li>
<p>OpenSCAP Capsule</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If Satellite does not find a remote execution Capsule at this stage, and if the <strong>Enable Global Capsule</strong> setting is enabled, Satellite selects the most lightly loaded remote execution Capsule from the set of all Capsules in the host&#8217;s organization and location to execute a remote job.</p>
</div>
</div>
<div class="sect2">
<h3 id="permissions-for-remote-execution_managing-hosts"><a class="anchor" href="#permissions-for-remote-execution_managing-hosts"></a>14.3. Permissions for remote execution</h3>
<div class="paragraph">
<p>You can control which roles can run which jobs within your infrastructure, including which hosts they can target.
The remote execution feature provides two built-in roles:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Remote Execution Manager</strong>: Can access all remote execution features and functionality.</p>
</li>
<li>
<p><strong>Remote Execution User</strong>: Can only run jobs.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can clone the <strong>Remote Execution User</strong> role and customize its filter for increased granularity.
If you adjust the filter with the <code>view_job_templates</code> permission on a customized role, you can only see and trigger jobs based on matching job templates.
You can use the <code>view_hosts</code> and <code>view_smart_proxies</code> permissions to limit which hosts or Capsules are visible to the role.</p>
</div>
<div class="paragraph">
<p>The <code>execute_template_invocation</code> permission is a special permission that is checked immediately before execution of a job begins.
This permission defines which job template you can run on a particular host.
This allows for even more granularity when specifying permissions.</p>
</div>
<div class="paragraph">
<p>You can run remote execution jobs against Red&#160;Hat Satellite and Capsule registered as hosts to Red&#160;Hat Satellite with the <code>execute_jobs_on_infrastructure_hosts</code> permission.
Standard <strong>Manager</strong> and <strong>Site Manager</strong> roles have this permission by default.
If you use either the <strong>Manager</strong> or <strong>Site Manager</strong> role, or if you use a custom role with the <code>execute_jobs_on_infrastructure_hosts</code> permission, you can execute remote jobs against registered Red&#160;Hat Satellite and Capsule hosts.</p>
</div>
<div class="paragraph">
<p>For more information on working with roles and permissions, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/administering_red_hat_satellite/index#Creating_and_Managing_Roles_admin">Creating and Managing Roles</a> in <em>Administering Red&#160;Hat Satellite</em>.</p>
</div>
<div class="paragraph">
<p>The following example shows filters for the <code>execute_template_invocation</code> permission:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">name = Reboot and host.name = staging.example.com
name = Reboot and host.name ~ *.staging.example.com
name = "Restart service" and host_group.name = webservers</pre>
</div>
</div>
<div class="paragraph">
<p>Use the first line in this example to apply the <strong>Reboot</strong> template to one selected host.
Use the second line to define a pool of hosts with names ending with <code>.staging.example.com</code>.
Use the third line to bind the template with a host group.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Permissions assigned to users with these roles can change over time.
If you have already scheduled some jobs to run in the future, and the permissions change, this can result in execution failure because permissions are checked immediately before job execution.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="transport-modes-for-remote-execution_managing-hosts"><a class="anchor" href="#transport-modes-for-remote-execution_managing-hosts"></a>14.4. Transport modes for remote execution</h3>
<div class="paragraph">
<p>You can configure your Satellite to use two different modes of transport for remote job execution.</p>
</div>
<div class="paragraph">
<p>On Capsules in <code>ssh</code> mode, remote execution uses the SSH service to transport job details.
This is the default transport mode.
The SSH service must be enabled and active on the target hosts.
The remote execution Capsule must have access to the SSH port on the target hosts.
Unless you have a different setting, the standard SSH port is 22.</p>
</div>
<div class="paragraph">
<p>On Capsules in <code>pull-mqtt</code> mode, remote execution uses Message Queueing Telemetry Transport (MQTT) to publish jobs it receives from Satellite&#160;Server.
The host subscribes to the MQTT broker on Capsule for job notifications using the <code>yggdrasil</code> pull client.
After the host receives a notification, it pulls job details from Capsule over HTTPS, runs the job, and reports results back to Capsule.</p>
</div>
<div class="paragraph">
<p>To use the <code>pull-mqtt</code> mode, you must enable it on Capsule&#160;Server and configure the pull client on the target hosts.</p>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>To enable pull mode on Capsule&#160;Server, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/installing_capsule_server/index#configuring-remote-execution-for-pull-client_capsule">Configuring Remote Execution for Pull Client</a> in <em>Installing Capsule Server</em>.</p>
</li>
<li>
<p>To enable pull mode on an existing host, continue with <a href="#Configuring_a_Host_to_Use_the_Pull_Client_managing-hosts">Configuring a host to use the pull client</a>.</p>
</li>
<li>
<p>To enable pull mode on a new host, continue with either of the following procedures:</p>
<div class="ulist">
<ul>
<li>
<p><a href="#Creating_a_Host_managing-hosts">Creating a host in Red&#160;Hat Satellite</a></p>
</li>
<li>
<p><a href="#Registering_Hosts_by_Using_Global_Registration_managing-hosts">Registering hosts by using global registration</a>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Configuring_a_Host_to_Use_the_Pull_Client_managing-hosts"><a class="anchor" href="#Configuring_a_Host_to_Use_the_Pull_Client_managing-hosts"></a>14.5. Configuring a host to use the pull client</h3>
<div class="paragraph">
<p>For Capsules configured to use <code>pull-mqtt</code> mode, hosts can subscribe to remote jobs using the remote execution pull client.
Hosts do not require an SSH connection from their Capsule&#160;Server.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have registered the host to Satellite.</p>
</li>
<li>
<p>The host&#8217;s Capsule is configured to use <code>pull-mqtt</code> mode.
For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/installing_capsule_server/index#configuring-remote-execution-for-pull-client_capsule">Configuring Remote Execution for Pull Client</a> in <em>Installing Capsule Server</em>.</p>
</li>
<li>
<p>The Red&#160;Hat Satellite Client 6 repository is enabled and synchronized on Satellite&#160;Server, and enabled on the host.</p>
</li>
<li>
<p>The host is able to communicate with its Capsule over MQTT using port <code>1883</code>.</p>
</li>
<li>
<p>The host is able to communicate with its Capsule over HTTPS.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Install the <code>katello-pull-transport-migrate</code> package on your host:</p>
<div class="ulist">
<ul>
<li>
<p>On Red&#160;Hat Enterprise Linux 9 and Red&#160;Hat Enterprise Linux 8 hosts:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf install katello-pull-transport-migrate</pre>
</div>
</div>
</li>
<li>
<p>On Red&#160;Hat Enterprise Linux 7 hosts:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># yum install katello-pull-transport-migrate</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The package installs <code>foreman_ygg_worker</code> and <code>yggdrasil</code> as dependencies and enables the pull mode on the host.
The host&#8217;s <code>subscription-manager</code> configuration and consumer certificates are used to configure the <code>yggdrasil</code> client on the host, and the pull mode client worker is started.</p>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>Check the status of the <code>yggdrasild</code> service:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># systemctl status yggdrasild</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="creating-a-job-template_managing-hosts"><a class="anchor" href="#creating-a-job-template_managing-hosts"></a>14.6. Creating a job template</h3>
<div class="paragraph">
<p>Use this procedure to create a job template.
To use the CLI instead of the Satellite web UI, see the <a href="#cli-creating-a-job-template_managing-hosts">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>Templates</strong> &gt; <strong>Job templates</strong>.</p>
</li>
<li>
<p>Click <strong>New Job Template</strong>.</p>
</li>
<li>
<p>Click the <strong>Template</strong> tab, and in the <strong>Name</strong> field, enter a unique name for your job template.</p>
</li>
<li>
<p>Select <strong>Default</strong> to make the template available for all organizations and locations.</p>
</li>
<li>
<p>Create the template directly in the template editor or upload it from a text file by clicking <strong>Import</strong>.</p>
</li>
<li>
<p>Optional: In the <strong>Audit Comment</strong> field, add information about the change.</p>
</li>
<li>
<p>Click the <strong>Job</strong> tab, and in the <strong>Job category</strong> field, enter your own category or select from the default categories listed in <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_hosts/index#default-job-template-categories_managing-hosts">Default Job Template Categories</a> in <em>Managing hosts</em>.</p>
</li>
<li>
<p>Optional: In the <strong>Description Format</strong> field, enter a description template.
For example, <code>Install package %{package_name}</code>.
You can also use <code>%{template_name}</code> and <code>%{job_category}</code> in your template.</p>
</li>
<li>
<p>From the <strong>Provider Type</strong> list, select <strong>SSH</strong> for shell scripts and <strong>Ansible</strong> for Ansible tasks or playbooks.</p>
</li>
<li>
<p>Optional: In the <strong>Timeout to kill</strong> field, enter a timeout value to terminate the job if it does not complete.</p>
</li>
<li>
<p>Optional: Click <strong>Add Input</strong> to define an input parameter.
Parameters are requested when executing the job and do not have to be defined in the template.
For examples, see the <strong>Help</strong> tab.</p>
</li>
<li>
<p>Optional: Click <strong>Foreign input set</strong> to include other templates in this job.</p>
</li>
<li>
<p>Optional: In the <strong>Effective user</strong> area, configure a user if the command cannot use the default <code>remote_execution_effective_user</code> setting.</p>
</li>
<li>
<p>Optional: If this template is a snippet to be included in other templates, click the <strong>Type</strong> tab and select <strong>Snippet</strong>.</p>
</li>
<li>
<p>Optional: If you use the Ansible provider, click the <strong>Ansible</strong> tab.
Select <strong>Enable Ansible Callback</strong> to allow hosts to send facts, which are used to create configuration reports, back to Satellite after a job finishes.</p>
</li>
<li>
<p>Click the <strong>Location</strong> tab and add the locations where you want to use the template.</p>
</li>
<li>
<p>Click the <strong>Organizations</strong> tab and add the organizations where you want to use the template.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to save your changes.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can extend and customize job templates by including other templates in the template syntax.
For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_hosts/index#template_writing_reference_managing-hosts">Template Writing Reference</a> and <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_hosts/index#job_template_examples_and_extensions_managing-hosts">Job Template Examples and Extensions</a> in <em>Managing hosts</em>.</p>
</div>
<div id="cli-creating-a-job-template_managing-hosts" class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>To create a job template using a template-definition file, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer job-template create \
--file "<em>Path_to_My_Template_File</em>" \
--job-category "<em>My_Category_Name</em>" \
--name "<em>My_Template_Name</em>" \
--provider-type SSH</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="importing-an-ansible-playbook-by-name_managing-hosts"><a class="anchor" href="#importing-an-ansible-playbook-by-name_managing-hosts"></a>14.7. Importing an Ansible playbook by name</h3>
<div class="paragraph">
<p>You can import Ansible playbooks by name to Satellite from collections installed on Capsule.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ansible plug-in in Satellite is enabled</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Fetch the available Ansible playbooks using the following API request:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl -X GET 'Content-Type: application/json' https://<em>satellite.example.com</em>/ansible/api/v2/ansible_playbooks/fetch?proxy_id=<em>My</em>capsule_ID_</pre>
</div>
</div>
</li>
<li>
<p>Select the Ansible playbook you want to import and note its name.</p>
</li>
<li>
<p>Import the Ansible playbook using its name:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl -X PUT 'Content-Type: application/json' -d '{ "playbook_names": ["<em>My_Playbook_Name</em>"] }' https://<em>satellite.example.com</em>/ansible/api/v2/ansible_playbooks/sync?proxy_id=<em>My</em>capsule_ID_</pre>
</div>
</div>
<div class="paragraph">
<p>You get a notification in the Satellite web UI after the import completes.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="importing-all-available-ansible-playbooks_managing-hosts"><a class="anchor" href="#importing-all-available-ansible-playbooks_managing-hosts"></a>14.8. Importing all available Ansible playbooks</h3>
<div class="paragraph">
<p>You can import all the available Ansible playbooks to Satellite from collections installed on Capsule.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ansible plug-in in Satellite is enabled</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Import the Ansible playbooks using the following API request:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl -X PUT 'Content-Type: application/json' https://<em>satellite.example.com</em>/ansible/api/v2/ansible_playbooks/sync?proxy_id=<em>My-capsule-ID</em></pre>
</div>
</div>
<div class="paragraph">
<p>You get a notification in the Satellite web UI after the import completes.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Configuring_the_Fallback_to_any_capsule_Remote_Execution_Setting_in_satellite_managing-hosts"><a class="anchor" href="#Configuring_the_Fallback_to_any_capsule_Remote_Execution_Setting_in_satellite_managing-hosts"></a>14.9. Configuring the fallback to any Capsule remote execution setting in Satellite</h3>
<div class="paragraph">
<p>You can enable the <strong>Fallback to Any Capsule</strong> setting to configure Satellite to search for remote execution Capsules from the list of Capsules that are assigned to hosts.
This can be useful if you need to run remote jobs on hosts that have no subnets configured or if the hosts' subnets are assigned to Capsules that do not have the remote execution feature enabled.</p>
</div>
<div class="paragraph">
<p>If the <strong>Fallback to Any Capsule</strong> setting is enabled, Satellite adds another set of Capsules to select the remote execution Capsule from.
Satellite also selects the most lightly loaded Capsule from the set of all Capsules assigned to the host, such as the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>DHCP, DNS and TFTP Capsules assigned to the host&#8217;s subnets</p>
</li>
<li>
<p>DNS Capsule assigned to the host&#8217;s domain</p>
</li>
<li>
<p>Realm Capsule assigned to the host&#8217;s realm</p>
</li>
<li>
<p>Puppet server Capsule</p>
</li>
<li>
<p>Puppet CA Capsule</p>
</li>
<li>
<p>OpenSCAP Capsule</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Administer</strong> &gt; <strong>Settings</strong>.</p>
</li>
<li>
<p>Click <strong>Remote Execution</strong>.</p>
</li>
<li>
<p>Configure the <strong>Fallback to Any Capsule</strong> setting.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Enter the <code>hammer settings set</code> command on Satellite to configure the <strong>Fallback to Any Capsule</strong> setting.
To set the value to <code>true</code>, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer settings set \
--name=remote_execution_fallback_proxy \
--value=true</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Configuring_the_Global_capsule_Remote_Execution_Setting_in_satellite_managing-hosts"><a class="anchor" href="#Configuring_the_Global_capsule_Remote_Execution_Setting_in_satellite_managing-hosts"></a>14.10. Configuring the global Capsule remote execution setting in Satellite</h3>
<div class="paragraph">
<p>By default, Satellite searches for remote execution Capsules in hosts' organizations and locations regardless of whether Capsules are assigned to hosts' subnets or not.
You can disable the <strong>Enable Global Capsule</strong> setting if you want to limit the search to the Capsules that are assigned to hosts' subnets.</p>
</div>
<div class="paragraph">
<p>If the <strong>Enable Global Capsule</strong> setting is enabled, Satellite adds another set of Capsules to select the remote execution Capsule from.
Satellite also selects the most lightly loaded remote execution Capsule from the set of all Capsules in the host&#8217;s organization and location to execute a remote job.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Administer</strong> &gt; <strong>Settings</strong>.</p>
</li>
<li>
<p>Click <strong>Remote Execution</strong>.</p>
</li>
<li>
<p>Configure the <strong>Enable Global Capsule</strong> setting.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Enter the <code>hammer settings set</code> command on Satellite to configure the <code>Enable Global Capsule</code> setting.
To set the value to <code>true</code>, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer settings set \
--name=remote_execution_global_proxy \
--value=true</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="setting-an-alternative-directory-for-remote-execution-jobs-in-push-mode_managing-hosts"><a class="anchor" href="#setting-an-alternative-directory-for-remote-execution-jobs-in-push-mode_managing-hosts"></a>14.11. Setting an alternative directory for remote execution jobs in push mode</h3>
<div class="paragraph">
<p>By default, Satellite uses the <code>/var/tmp</code> directory on hosts for remote execution jobs in push mode.
If the <code>/var/tmp</code> directory on your host is mounted with the <code>noexec</code> flag, Satellite cannot execute remote execution job scripts in this directory.
You can use <code>satellite-installer</code> to set an alternative directory for executing remote execution jobs in push mode.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>On your host, create a new directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir <em>/My_Remote_Working_Directory</em></pre>
</div>
</div>
</li>
<li>
<p>Copy the SELinux context from the default <code>/var/tmp</code> directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># chcon --reference=/var/tmp <em>/My_Remote_Working_Directory</em></pre>
</div>
</div>
</li>
<li>
<p>Configure your Satellite&#160;Server or Capsule&#160;Server to use the new directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer \
--foreman-proxy-plugin-remote-execution-script-remote-working-dir <em>/My_Remote_Working_Directory</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="setting-an-alternative-directory-for-remote-execution-jobs-in-pull-mode_managing-hosts"><a class="anchor" href="#setting-an-alternative-directory-for-remote-execution-jobs-in-pull-mode_managing-hosts"></a>14.12. Setting an alternative directory for remote execution jobs in pull mode</h3>
<div class="paragraph">
<p>By default, Satellite uses the <code>/run</code> directory on hosts for remote execution jobs in pull mode.
If the <code>/run</code> directory on your host is mounted with the <code>noexec</code> flag, Satellite cannot execute remote execution job scripts in this directory.
You can use the <code>yggdrasild</code> service to set an alternative directory for executing remote execution jobs in pull mode.</p>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>On your host, perform these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir <em>/My_Remote_Working_Directory</em></pre>
</div>
</div>
</li>
<li>
<p>Access the <code>yggdrasild</code> service configuration:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># systemctl edit yggdrasild</pre>
</div>
</div>
</li>
<li>
<p>Specify the alternative directory by adding the following line to the configuration:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">Environment=FOREMAN_YGG_WORKER_WORKDIR=<em>/My_Remote_Working_Directory</em></pre>
</div>
</div>
</li>
<li>
<p>Restart the <code>yggdrasild</code> service:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># systemctl restart yggdrasild</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="altering-the-privilege-elevation-method_managing-hosts"><a class="anchor" href="#altering-the-privilege-elevation-method_managing-hosts"></a>14.13. Altering the privilege elevation method</h3>
<div class="paragraph">
<p>By default, push-based remote execution uses <code>sudo</code> to switch from the SSH user to the effective user that executes the script on your host.
In some situations, you might require to use another method, such as <code>su</code> or <code>dzdo</code>.
You can globally configure an alternative method in your Satellite settings.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Your user account has a role assigned that grants the <code>view_settings</code> and <code>edit_settings</code> permissions.</p>
</li>
<li>
<p>If you want to use <code>dzdo</code> for Ansible jobs, ensure the <code>community.general</code> Ansible collection, which contains the required <strong>dzdo</strong> become plug-in, is installed.
For more information, see <a href="https://docs.ansible.com/ansible/latest/collections_guide/collections_installing.html">Installing collections</a> in <em>Ansible documentation</em>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Navigate to <strong>Administer</strong> &gt; <strong>Settings</strong>.</p>
</li>
<li>
<p>Select the <strong>Remote Execution</strong> tab.</p>
</li>
<li>
<p>Click the value of the <strong>Effective User Method</strong> setting.</p>
</li>
<li>
<p>Select the new value.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Distributing_SSH_Keys_for_Remote_Execution_managing-hosts"><a class="anchor" href="#Distributing_SSH_Keys_for_Remote_Execution_managing-hosts"></a>14.14. Distributing SSH keys for remote execution</h3>
<div class="paragraph">
<p>For Capsules in <code>ssh</code> mode, remote execution connections are authenticated using SSH.
The public SSH key from Capsule must be distributed to its attached hosts that you want to manage.</p>
</div>
<div class="paragraph">
<p>Ensure that the SSH service is enabled and running on the hosts.
Configure any network or host-based firewalls to enable access to port 22.</p>
</div>
<div class="paragraph">
<p>Use one of the following methods to distribute the public SSH key from Capsule to target hosts:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#distributing-ssh-keys-for-remote-execution-manually_managing-hosts">Distributing SSH keys for remote execution manually</a>.</p>
</li>
<li>
<p><a href="#Using_the_satellite_API_to_Obtain_SSH_Keys_for_Remote_Execution_managing-hosts">Using the Satellite API to obtain SSH keys for remote execution</a>.</p>
</li>
<li>
<p><a href="#Configuring_a_Kickstart_Template_to_Distribute_SSH_Keys_During_Provisioning_managing-hosts">Configuring a Kickstart template to distribute SSH keys during provisioning</a>.</p>
</li>
<li>
<p>For new Satellite hosts, you can deploy SSH keys to Satellite hosts during registration using the global registration template.
For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_hosts/index#Registering_Hosts_managing-hosts">Registering a Host to Red&#160;Hat Satellite Using the Global Registration Template</a> in <em>Managing hosts</em>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Satellite distributes SSH keys for the remote execution feature to the hosts provisioned from Satellite by default.</p>
</div>
<div class="paragraph">
<p>If the hosts are running on Amazon Web Services, enable password authentication.
For more information, see <a href="https://aws.amazon.com/premiumsupport/knowledge-center/new-user-accounts-linux-instance">New User Accounts</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="distributing-ssh-keys-for-remote-execution-manually_managing-hosts"><a class="anchor" href="#distributing-ssh-keys-for-remote-execution-manually_managing-hosts"></a>14.15. Distributing SSH keys for remote execution manually</h3>
<div class="paragraph">
<p>To distribute SSH keys manually, complete the following steps:</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Copy the SSH pub key from your  Capsule to your target host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ssh-copy-id -i ~foreman-proxy/.ssh/id_rsa_foreman_proxy.pub <em>root@client.example.com</em></pre>
</div>
</div>
<div class="paragraph">
<p>Repeat this step for each target host you want to manage.</p>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>To confirm that the key was successfully copied to the target host, enter the following command on Capsule:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ssh -i ~foreman-proxy/.ssh/id_rsa_foreman_proxy <em>root@client.example.com</em></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="adding-a-passphrase-to-ssh-key-used-for-remote-execution_managing-hosts"><a class="anchor" href="#adding-a-passphrase-to-ssh-key-used-for-remote-execution_managing-hosts"></a>14.16. Adding a passphrase to SSH key used for remote execution</h3>
<div class="paragraph">
<p>By default, Capsule uses a non-passphrase protected SSH key to execute remote jobs on hosts.
You can protect the SSH key with a passphrase by following this procedure.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>On your Satellite&#160;Server or Capsule&#160;Server, use <code>ssh-keygen</code> to add a passphrase to your SSH key:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ssh-keygen -p -f ~foreman-proxy/.ssh/id_rsa_foreman_proxy</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Next steps</div>
<ul>
<li>
<p>Users now must use a passphrase when running remote execution jobs on hosts.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Using_the_satellite_API_to_Obtain_SSH_Keys_for_Remote_Execution_managing-hosts"><a class="anchor" href="#Using_the_satellite_API_to_Obtain_SSH_Keys_for_Remote_Execution_managing-hosts"></a>14.17. Using the Satellite API to obtain SSH keys for remote execution</h3>
<div class="paragraph">
<p>To use the Satellite API to download the public key from Capsule, complete this procedure on each target host.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>On the target host, create the <code>~/.ssh</code> directory to store the SSH key:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir ~/.ssh</pre>
</div>
</div>
</li>
<li>
<p>Download the SSH key from Capsule:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl https://<em>capsule.example.com</em>:9090/ssh/pubkey &gt;&gt; ~/.ssh/authorized_keys</pre>
</div>
</div>
</li>
<li>
<p>Configure permissions for the <code>~/.ssh</code> directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># chmod 700 ~/.ssh</pre>
</div>
</div>
</li>
<li>
<p>Configure permissions for the <code>authorized_keys</code> file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># chmod 600 ~/.ssh/authorized_keys</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Configuring_a_Kickstart_Template_to_Distribute_SSH_Keys_During_Provisioning_managing-hosts"><a class="anchor" href="#Configuring_a_Kickstart_Template_to_Distribute_SSH_Keys_During_Provisioning_managing-hosts"></a>14.18. Configuring a Kickstart template to distribute SSH keys during provisioning</h3>
<div class="paragraph">
<p>You can add a <code>remote_execution_ssh_keys</code> snippet to your custom Kickstart template to deploy SSH keys to hosts during provisioning.
Kickstart templates that Satellite ships include this snippet by default.
Satellite copies the SSH key for remote execution to the systems during provisioning.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>To include the public key in newly-provisioned hosts, add the following snippet to the Kickstart template that you use:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">&lt;%= snippet 'remote_execution_ssh_keys' %&gt;</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="configuring-a-keytab-for-kerberos-ticket-granting-tickets_managing-hosts"><a class="anchor" href="#configuring-a-keytab-for-kerberos-ticket-granting-tickets_managing-hosts"></a>14.19. Configuring a keytab for Kerberos ticket granting tickets</h3>
<div class="paragraph">
<p>Use this procedure to configure Satellite to use a keytab to obtain Kerberos ticket granting tickets.
If you do not set up a keytab, you must manually retrieve tickets.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Find the ID of the <code>foreman-proxy</code> user:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># id -u foreman-proxy</pre>
</div>
</div>
</li>
<li>
<p>Modify the <code>umask</code> value so that new files have the permissions <code>600</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># umask 077</pre>
</div>
</div>
</li>
<li>
<p>Create the directory for the keytab:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir -p "/var/kerberos/krb5/user/<em>My_User_ID</em>"</pre>
</div>
</div>
</li>
<li>
<p>Create a keytab or copy an existing keytab to the directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># cp <em>My_Client.keytab</em> /var/kerberos/krb5/user/<em>My_User_ID</em>/client.keytab</pre>
</div>
</div>
</li>
<li>
<p>Change the directory owner to the <code>foreman-proxy</code> user:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># chown -R foreman-proxy:foreman-proxy "/var/kerberos/krb5/user/<em>My_User_ID</em>"</pre>
</div>
</div>
</li>
<li>
<p>Ensure that the keytab file is read-only:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># chmod -wx "/var/kerberos/krb5/user/<em>My_User_ID</em>/client.keytab"</pre>
</div>
</div>
</li>
<li>
<p>Restore the SELinux context:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># restorecon -RvF /var/kerberos/krb5</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="configuring-kerberos-authentication-for-remote-execution_managing-hosts"><a class="anchor" href="#configuring-kerberos-authentication-for-remote-execution_managing-hosts"></a>14.20. Configuring Kerberos authentication for remote execution</h3>
<div class="paragraph">
<p>You can use Kerberos authentication to establish an SSH connection for remote execution on Satellite hosts.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Enroll Satellite&#160;Server on the Kerberos server</p>
</li>
<li>
<p>Enroll the Satellite target host on the Kerberos server</p>
</li>
<li>
<p>Configure and initialize a Kerberos user account for remote execution</p>
</li>
<li>
<p>Ensure that the foreman-proxy user on Satellite has a valid Kerberos ticket granting ticket</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>To install and enable Kerberos authentication for remote execution, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer --scenario satellite \
--foreman-proxy-plugin-remote-execution-script-ssh-kerberos-auth true</pre>
</div>
</div>
</li>
<li>
<p>To edit the default user for remote execution, in the Satellite web UI, navigate to <strong>Administer</strong> &gt; <strong>Settings</strong> and click the <strong>Remote Execution</strong> tab.
In the <strong>SSH User</strong> row, edit the second column and add the user name for the Kerberos account.</p>
</li>
<li>
<p>Navigate to <strong>remote_execution_effective_user</strong> and edit the second column to add the user name for the Kerberos account.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>To confirm that Kerberos authentication is ready to use, run a remote job on the host.
For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_hosts/index#executing-a-remote-job_managing-hosts">Executing a Remote Job</a> in <em>Managing hosts</em>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="setting-up-job-templates_managing-hosts"><a class="anchor" href="#setting-up-job-templates_managing-hosts"></a>14.21. Setting up job templates</h3>
<div class="paragraph">
<p>Satellite provides default job templates that you can use for executing jobs.
To view the list of job templates, navigate to <strong>Hosts</strong> &gt; <strong>Templates</strong> &gt; <strong>Job templates</strong>.
If you want to use a template without making changes, proceed to <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_hosts/index#executing-a-remote-job_managing-hosts">Executing a Remote Job</a> in <em>Managing hosts</em>.</p>
</div>
<div class="paragraph">
<p>You can use default templates as a base for developing your own.
Default job templates are locked for editing.
Clone the template and edit the clone.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>To clone a template, in the <strong>Actions</strong> column, select <strong>Clone</strong>.</p>
</li>
<li>
<p>Enter a unique name for the clone and click <strong>Submit</strong> to save the changes.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Job templates use the Embedded Ruby (ERB) syntax.
For more information about writing templates, see the <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_hosts/index#Template_Writing_Reference_managing-hosts">Template Writing Reference</a> in <em>Managing hosts</em>.</p>
</div>
<div class="paragraph">
<div class="title">Ansible considerations</div>
<p>To create an Ansible job template, use the following procedure and instead of ERB syntax, use YAML syntax.
Begin the template with <code>---</code>.
You can embed an Ansible playbook YAML file into the job template body.
You can also add ERB syntax to customize your YAML Ansible template.
You can also import Ansible playbooks in Satellite.
For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_hosts/index#Synchronizing_Templates_Repositories_managing-hosts">Synchronizing Repository Templates</a> in <em>Managing hosts</em>.</p>
</div>
<div class="paragraph">
<div class="title">Parameter variables</div>
<p>At run time, job templates can accept parameter variables that you define for a host.
Note that only the parameters visible on the <strong>Parameters</strong> tab at the host&#8217;s edit page can be used as input parameters for job templates.</p>
</div>
</div>
<div class="sect2">
<h3 id="executing-a-remote-job_managing-hosts"><a class="anchor" href="#executing-a-remote-job_managing-hosts"></a>14.22. Executing a remote job</h3>
<div class="paragraph">
<p>You can execute a job that is based on a job template against one or more hosts.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Satellite web UI, see the <a href="#cli-executing-a-remote-job_managing-hosts">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Monitor</strong> &gt; <strong>Jobs</strong> and click <strong>Run job</strong>.</p>
</li>
<li>
<p>Select the <strong>Job category</strong> and the <strong>Job template</strong> you want to use, then click <strong>Next</strong>.</p>
</li>
<li>
<p>Select hosts on which you want to run the job.
If you do not select any hosts, the job will run on all hosts you can see in the current context.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you want to select a host group and all of its subgroups, it is not sufficient to select the host group as the job would only run on hosts directly in that group and not on hosts in subgroups.
Instead, you must either select the host group and all of its subgroups or use this search query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">hostgroup_fullname ~ "<em>My_Host_Group</em>*"</pre>
</div>
</div>
<div class="paragraph">
<p>Replace <em>My_Host_Group</em> with the name of the top-level host group.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>If required, provide inputs for the job template.
Different templates have different inputs and some templates do not have any inputs.
After entering all the required inputs, click <strong>Next</strong>.</p>
</li>
<li>
<p>Optional: To configure advanced settings for the job, fill in the <strong>Advanced fields</strong>.
To learn more about advanced settings, see <a href="#advanced-settings-in-the-job-wizard_managing-hosts">Advanced settings in the job wizard</a>.</p>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>Schedule time for the job.</p>
<div class="ulist">
<ul>
<li>
<p>To execute the job immediately, keep the pre-selected <strong>Immediate execution</strong>.</p>
</li>
<li>
<p>To execute the job in future time, select <strong>Future execution</strong>.</p>
</li>
<li>
<p>To execute the job on regular basis, select <strong>Recurring execution</strong>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Optional: If you selected future or recurring execution, select the <strong>Query type</strong>, otherwise click <strong>Next</strong>.</p>
<div class="ulist">
<ul>
<li>
<p><strong>Static query</strong> means that job executes on the exact list of hosts that you provided.</p>
</li>
<li>
<p><strong>Dynamic query</strong> means that the list of hosts is evaluated just before the job is executed.
If you entered the list of hosts based on some filter, the results can be different from when you first used that filter.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Click <strong>Next</strong> after you have selected the query type.</p>
</div>
</li>
<li>
<p>Optional: If you selected future or recurring execution, provide additional details:</p>
<div class="ulist">
<ul>
<li>
<p>For <strong>Future execution</strong>, enter the <strong>Starts at</strong> date and time.
You also have the option to select the <strong>Starts before</strong> date and time.
If the job cannot start before that time, it will be canceled.</p>
</li>
<li>
<p>For <strong>Recurring execution</strong>, select the start date and time, frequency, and the condition for ending the recurring job.
You can choose the recurrence to never end, end at a certain time, or end after a given number of repetitions.
You can also add <strong>Purpose</strong> - a special label for tracking the job.
There can only be one active job with a given purpose at a time.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Click <strong>Next</strong> after you have entered the required information.</p>
</div>
</li>
<li>
<p>Review job details.
You have the option to return to any part of the job wizard and edit the information.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to schedule the job for execution.</p>
</li>
</ol>
</div>
<div id="cli-executing-a-remote-job_managing-hosts" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Enter the following command on Satellite:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer settings set \
--name=remote_execution_global_proxy \
--value=false</pre>
</div>
</div>
</li>
<li>
<p>Find the ID of the job template you want to use:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer job-template list</pre>
</div>
</div>
</li>
<li>
<p>Show the template details to see parameters required by your template:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer job-template info --id <em>My_Template_ID</em></pre>
</div>
</div>
</li>
<li>
<p>Execute a remote job with custom parameters:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer job-invocation create \
--inputs <em>My_Key_1</em>="<em>My_Value_1</em>",<em>My_Key_2</em>="<em>My_Value_2</em>",... \
--job-template "<em>My_Template_Name</em>" \
--search-query "<em>My_Search_Query</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code><em>My_Search_Query</em></code> with the filter expression that defines hosts, for example <code>"name ~ <em>My_Pattern</em>"</code>.
For more information about executing remote commands with hammer, enter <code>hammer job-template --help</code> and <code>hammer job-invocation --help</code>.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="advanced-settings-in-the-job-wizard_managing-hosts"><a class="anchor" href="#advanced-settings-in-the-job-wizard_managing-hosts"></a>14.23. Advanced settings in the job wizard</h3>
<div class="paragraph">
<p>Some job templates require you to enter advanced settings.
Some of the advanced settings are only visible to certain job templates.
Below is the list of general advanced settings.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">SSH user</dt>
<dd>
<p>A user to be used for connecting to the host through SSH.</p>
</dd>
<dt class="hdlist1">Effective user</dt>
<dd>
<p>A user to be used for executing the job.
By default it is the SSH user.
If it differs from the SSH user, su or sudo, depending on your settings, is used to switch the accounts.</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>A description template for the job.</p>
</dd>
<dt class="hdlist1">Timeout to kill</dt>
<dd>
<p>Time in seconds from the start of the job after which the job should be killed if it is not finished already.</p>
</dd>
<dt class="hdlist1">Time to pickup</dt>
<dd>
<p>Time in seconds after which the job is canceled if it is not picked up by a client.
This setting only applies to hosts using <code>pull-mqtt</code> transport.</p>
</dd>
<dt class="hdlist1">Password</dt>
<dd>
<p>Is used if SSH authentication method is a password instead of the SSH key.</p>
</dd>
<dt class="hdlist1">Private key passphrase</dt>
<dd>
<p>Is used if SSH keys are protected by a passphrase.</p>
</dd>
<dt class="hdlist1">Effective user password</dt>
<dd>
<p>Is used if effective user is different from the ssh user.</p>
</dd>
<dt class="hdlist1">Concurrency level</dt>
<dd>
<p>Defines the maximum number of jobs executed at once.
This can prevent overload of system resources in a case of executing the job on a large number of hosts.</p>
</dd>
<dt class="hdlist1">Execution ordering</dt>
<dd>
<p>Determines the order in which the job is executed on hosts.
It can be alphabetical or randomized.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="using-extended-cron-lines_managing-hosts"><a class="anchor" href="#using-extended-cron-lines_managing-hosts"></a>14.24. Using extended cron lines</h3>
<div class="paragraph">
<p>When scheduling a cron job with remote execution, you can use an extended cron line to specify the cadence of the job.
The standard cron line contains five fields that specify minute, hour, day of the month, month, and day of the week.
For example, <code>0 5 * * *</code> stands for every day at 5 AM.</p>
</div>
<div class="paragraph">
<p>The extended cron line provides the following features:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">You can use <code>#</code> to specify a concrete week day in a month</dt>
<dd>
<p>For example:</p>
<div class="ulist">
<ul>
<li>
<p><code>0 0 * * mon#1</code> specifies first Monday of the month</p>
</li>
<li>
<p><code>0 0 * * fri#3,fri#4</code> specifies 3rd and 4th Fridays of the month</p>
</li>
<li>
<p><code>0 7 * * fri#-1</code> specifies the last Friday of the month at 07:00</p>
</li>
<li>
<p><code>0 7 * * fri#L</code> also specifies the last Friday of the month at 07:00</p>
</li>
<li>
<p><code>0 23 * * mon#2,tue</code> specifies the 2nd Monday of the month and every Tuesday, at 23:00</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">You can use <code>%</code> to specify every n-th day of the month</dt>
<dd>
<p>For example:</p>
<div class="ulist">
<ul>
<li>
<p><code>9 0 * * sun%2</code> specifies every other Sunday at 00:09</p>
</li>
<li>
<p><code>0 0 * * sun%2+1</code> specifies every odd Sunday</p>
</li>
<li>
<p><code>9 0 * * sun%2,tue%3</code> specifies every other Sunday and every third Tuesday</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">You can use <code>&amp;</code> to specify that the day of the month has to match the day of the week</dt>
<dd>
<p>For example:</p>
<div class="ulist">
<ul>
<li>
<p><code>0 0 30 * 1&amp;</code> specifies 30th day of the month, but only if it is Monday</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="scheduling-a-recurring-ansible-job-for-a-host_managing-hosts"><a class="anchor" href="#scheduling-a-recurring-ansible-job-for-a-host_managing-hosts"></a>14.25. Scheduling a recurring Ansible job for a host</h3>
<div class="paragraph">
<p>You can schedule a recurring job to run Ansible roles on hosts.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure you have the <code>view_foreman_tasks</code>, <code>view_job_invocations</code>, and <code>view_recurring_logics</code> permissions.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts &gt; All Hosts</strong> and select the target host on which you want to execute a remote job.</p>
</li>
<li>
<p>On the <strong>Ansible</strong> tab, select <strong>Jobs</strong>.</p>
</li>
<li>
<p>Click <strong>Schedule recurring job</strong>.</p>
</li>
<li>
<p>Define the repetition frequency, start time, and date of the first run in the <strong>Create New Recurring Ansible Run</strong> window.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
<li>
<p>Optional: View the scheduled Ansible job in host overview or by navigating to <strong>Ansible</strong> &gt; <strong>Jobs</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Scheduling_a_Recurring_Ansible_Job_for_a_Host_Group_managing-hosts"><a class="anchor" href="#Scheduling_a_Recurring_Ansible_Job_for_a_Host_Group_managing-hosts"></a>14.26. Scheduling a recurring Ansible job for a host group</h3>
<div class="paragraph">
<p>You can schedule a recurring job to run Ansible roles on host groups.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Configure</strong> &gt; <strong>Host groups</strong>.</p>
</li>
<li>
<p>In the <strong>Actions</strong> column, select <strong>Configure Ansible Job</strong> for the host group you want to schedule an Ansible roles run for.</p>
</li>
<li>
<p>Click <strong>Schedule recurring job</strong>.</p>
</li>
<li>
<p>Define the repetition frequency, start time, and date of the first run in the <strong>Create New Recurring Ansible Run</strong> window.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Monitoring_Jobs_managing-hosts"><a class="anchor" href="#Monitoring_Jobs_managing-hosts"></a>14.27. Monitoring jobs</h3>
<div class="paragraph">
<p>You can monitor the progress of a job while it is running.
This can help in any troubleshooting that may be required.</p>
</div>
<div class="paragraph">
<p>Ansible jobs run on batches of 100 hosts, so you cannot cancel a job running on a specific host.
A job completes only after the Ansible playbook runs on all hosts in the batch.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Monitor &gt; Jobs</strong>.
This page is automatically displayed if you triggered the job with the <code>Execute now</code> setting.
To monitor scheduled jobs, navigate to <strong>Monitor</strong> &gt; <strong>Jobs</strong> and select the job run you wish to inspect.</p>
</li>
<li>
<p>On the Job page, click the <strong>Hosts</strong> tab.
This displays the list of hosts on which the job is running.</p>
</li>
<li>
<p>In the <strong>Host</strong> column, click the name of the host that you want to inspect.
This displays the <strong>Detail of Commands</strong> page where you can monitor the job execution in real time.</p>
</li>
<li>
<p>Click <strong>Back to Job</strong> at any time to return to the <strong>Job Details</strong> page.</p>
</li>
</ol>
</div>
<div id="cli-Monitoring_Jobs_managing-hosts" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Find the ID of a job:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer job-invocation list</pre>
</div>
</div>
</li>
<li>
<p>Monitor the job output:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer job-invocation output \
--host <em>My_Host_Name</em> \
--id <em>My_Job_ID</em></pre>
</div>
</div>
</li>
<li>
<p>Optional: To cancel a job, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer job-invocation cancel \
--id <em>My_Job_ID</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="setting-the-job-rate-limit-on-capsule_managing-hosts"><a class="anchor" href="#setting-the-job-rate-limit-on-capsule_managing-hosts"></a>14.28. Setting the job rate limit on Capsule</h3>
<div class="paragraph">
<p>You can limit the maximum number of active jobs on a Capsule at a time to prevent performance spikes.
The job is active from the time Capsule first tries to notify the host about the job until the job is finished on the host.</p>
</div>
<div class="paragraph">
<p>The job rate limit only applies to mqtt based jobs.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The optimal maximum number of active jobs depends on the computing resources of your Capsule&#160;Server.
By default, the maximum number of active jobs is unlimited.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Set the maximum number of active jobs using <code>satellite-installer</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer \
--foreman-proxy-plugin-remote-execution-script-mqtt-rate-limit <em>MAX_JOBS_NUMBER</em></pre>
</div>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer \
--foreman-proxy-plugin-remote-execution-script-mqtt-rate-limit 200</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Host_Status_managing-hosts"><a class="anchor" href="#Host_Status_managing-hosts"></a>15. Host status in Satellite</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In Satellite, each host has a global status that indicates which hosts need attention.
Each host also has sub-statuses that represent status of a particular feature.
With any change of a sub-status, the global status is recalculated and the result is determined by statuses of all sub-statuses.</p>
</div>
<div class="sect2">
<h3 id="host-global-status-overview_managing-hosts"><a class="anchor" href="#host-global-status-overview_managing-hosts"></a>15.1. Host global status overview</h3>
<div class="paragraph">
<p>The global status represents the overall status of a particular host.
The status can have one of three possible values: <strong>OK</strong>, <strong>Warning</strong>, or <strong>Error</strong>.
You can find global status on the Hosts Overview page.
The status displays a small icon next to host name and has a color that corresponds with the status.
Hovering over the icon renders a tooltip with sub-status information to quickly find out more details.
To view the global status for a host, in the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">OK</dt>
<dd>
<p>No errors were reported by any sub-status.
This status is highlighted with the color green.</p>
</dd>
<dt class="hdlist1">Warning</dt>
<dd>
<p>While no error was detected, some sub-status raised a warning.
For example, there are no configuration management reports for the host even though the host is configured to send reports.
It is a good practice to investigate any warnings to ensure that your deployment remains healthy.
This status is highlighted with the color yellow.</p>
</dd>
<dt class="hdlist1">Error</dt>
<dd>
<p>Some sub-status reports a failure.
For example, a run contains some failed resources.
This status is highlighted with the color red.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<div class="title">Search syntax</div>
<p>If you want to search for hosts according to their status, use the syntax for searching in Satellite that is outlined in the <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/administering_red_hat_satellite/index#Searching_and_Bookmarking_admin">Searching and Bookmarking</a> in <em>Administering Red&#160;Hat Satellite</em>, and then build your searches out using the following status-related examples:</p>
</div>
<div class="paragraph">
<p>To search for hosts that have an <strong>OK</strong> status:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">global_status = ok</pre>
</div>
</div>
<div class="paragraph">
<p>To search for all hosts that deserve attention:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">global_status = error or global_status = warning</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="host-substatus-overview_managing-hosts"><a class="anchor" href="#host-substatus-overview_managing-hosts"></a>15.2. Host sub-status overview</h3>
<div class="paragraph">
<p>A sub-status monitors only a part of a host&#8217;s capabilities.</p>
</div>
<div class="paragraph">
<p>To view the sub-statuses of a host, in the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong> and click on the host whose full status you want to inspect.
You can view the global host status next to the name of the host and the host sub-statuses on the <strong>Host status</strong> card.</p>
</div>
<div class="paragraph">
<p>Each sub-status has its own set of possible values that are mapped to the three global status values.</p>
</div>
<div class="paragraph">
<p>Below are listed sub-statuses that Satellite contains.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Configuration</dt>
<dd>
<p>This sub-status is only relevant if Satellite uses a configuration management system like Ansible, Puppet, or Salt.</p>
<div class="paragraph">
<p>Possible values:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Global host status</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alerts disabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Active</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pending</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">No changes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">No reports</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK / Warning</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Out of sync</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Warning</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Additional information about the values of this sub-status:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Active</strong>: During the last configuration, some resources were applied.</p>
</li>
<li>
<p><strong>Pending</strong>: During the last configuration, some resources would be applied but your configuration management integration was configured to run in <code>noop</code> mode.</p>
</li>
<li>
<p><strong>No changes</strong>: During the last configuration, nothing changed.</p>
</li>
<li>
<p><strong>No reports</strong>: This can be both a <strong>Warning</strong> or <strong>OK</strong> status.
When there are no reports but the host uses an associated Capsule for configuration management or the <code>always_show_configuration_status</code> setting is set to <code>true</code>, it maps to <strong>Warning</strong>.
Otherwise it maps to <strong>OK</strong>.</p>
</li>
<li>
<p><strong>Error</strong>: This indicates an error during configuration.
For example, a configuration run failed to install a package.</p>
</li>
<li>
<p><strong>Out of sync</strong>: A configuration report was not received within the expected interval, based on the <code>outofsync_interval</code> setting.
Reports are identified by an origin and can have different intervals based upon it.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Build</dt>
<dd>
<p>This sub-status is only relevant for hosts provisioned from Satellite or hosts registered through global registration.</p>
<div class="paragraph">
<p>Possible values:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Global host status</th>
<th class="tableblock halign-left valign-top">Number value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Installed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pending installation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Token expired</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Installation error</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
</tbody>
</table>
</dd>
<dt class="hdlist1">Compliance</dt>
<dd>
<p>Indicates if the host is compliant with OpenSCAP policies.</p>
<div class="paragraph">
<p>Possible values:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Global host status</th>
<th class="tableblock halign-left valign-top">Number value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compliant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inconclusive</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Warning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">At least one incompliant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
</tbody>
</table>
</dd>
<dt class="hdlist1">OVAL scan</dt>
<dd>
<p>Indicates if there are any vulnerabilities found on the host</p>
<div class="paragraph">
<p>Possible values:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Global host status</th>
<th class="tableblock halign-left valign-top">Number value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">No vulnerabilities found</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vulnerabilities found</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Warning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vulnerabilities with available patch found</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
</tbody>
</table>
</dd>
<dt class="hdlist1">Execution</dt>
<dd>
<p>Status of the last completed remote execution job.</p>
<div class="paragraph">
<p>Possible values:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Global host status</th>
<th class="tableblock halign-left valign-top">Number value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Last execution succeeded / No execution finished yet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Last execution failed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unknown execution status</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 or 3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Last execution cancelled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
</tr>
</tbody>
</table>
</dd>
<dt class="hdlist1">Inventory</dt>
<dd>
<p>Indicates if the host is synchronized to Red&#160;Hat Hybrid Cloud Console.
Satellite&#160;Server performs the synchronization itself but only uploads basic information to Red&#160;Hat Hybrid Cloud Console.</p>
<div class="paragraph">
<p>Possible values:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Global host status</th>
<th class="tableblock halign-left valign-top">Number value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Host was not uploaded to your RH cloud inventory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Warning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Successfully uploaded to your RH cloud inventory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
</tbody>
</table>
</dd>
<dt class="hdlist1">Insights</dt>
<dd>
<p>Indicates if the host is synchronized to Red&#160;Hat Hybrid Cloud Console.
This synchronization is performed by the host.
The host uploads more information than the Satellite&#160;Server.</p>
<div class="paragraph">
<p>Possible values:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Global host status</th>
<th class="tableblock halign-left valign-top">Number value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reporting</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not reporting</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
</tbody>
</table>
</dd>
<dt class="hdlist1">Errata</dt>
<dd>
<p>Indicates if Errata is available on the host.</p>
<div class="paragraph">
<p>Possible values:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Global host status</th>
<th class="tableblock halign-left valign-top">Number value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Up to date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unknown</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Warning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Needed errata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Needed security errata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
</tbody>
</table>
</dd>
<dt class="hdlist1">Subscription</dt>
<dd>
<p>Indicates if the host has a valid RHEL subscription.</p>
<div class="paragraph">
<p>Possible values:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Global host status</th>
<th class="tableblock halign-left valign-top">Number value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fully entitled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Partially entitled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Warning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unentitled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unknown</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Warning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unsubscribed hypervisor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Warning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SCA enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
</tr>
</tbody>
</table>
</dd>
<dt class="hdlist1">Service level</dt>
<dd>
<p>Indicates if a subscription matching your specified <strong>Service level</strong> syspurpose value can be attached.</p>
<div class="paragraph">
<p>Possible values:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Global host status</th>
<th class="tableblock halign-left valign-top">Number value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unknown</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mismatched</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Warning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Matched</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not specified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
</tbody>
</table>
</dd>
<dt class="hdlist1">Role</dt>
<dd>
<p>Indicates if a subscription matching your specified <strong>Role</strong> syspurpose value can be attached.</p>
<div class="paragraph">
<p>Possible values:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Global host status</th>
<th class="tableblock halign-left valign-top">Number value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unknown</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mismatched</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Warning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Matched</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not specified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
</tbody>
</table>
</dd>
<dt class="hdlist1">Usage</dt>
<dd>
<p>Indicates if a subscription matching your specified <strong>Usage</strong> syspurpose value can be attached.</p>
<div class="paragraph">
<p>Possible values:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Global host status</th>
<th class="tableblock halign-left valign-top">Number value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unknown</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mismatched</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Warning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Matched</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not specified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
</tbody>
</table>
</dd>
<dt class="hdlist1">Addons</dt>
<dd>
<p>Indicates if a subscription matching your specified <strong>Addons</strong> syspurpose value can be attached.</p>
<div class="paragraph">
<p>Possible values:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Global host status</th>
<th class="tableblock halign-left valign-top">Number value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unknown</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mismatched</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Warning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Matched</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not specified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
</tbody>
</table>
</dd>
<dt class="hdlist1">System purpose</dt>
<dd>
<p>Indicates if a subscription matching your specified syspurpose values can be attached.</p>
<div class="paragraph">
<p>Possible values:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Global host status</th>
<th class="tableblock halign-left valign-top">Number value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unknown</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mismatched</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Warning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Matched</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not specified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
</tbody>
</table>
</dd>
<dt class="hdlist1">RHEL Lifecycle</dt>
<dd>
<p>Indicates the current state of the Red&#160;Hat Enterprise Linux operating system installed on the host.</p>
<div class="paragraph">
<p>Possible values:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Global host status</th>
<th class="tableblock halign-left valign-top">Number value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unknown</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full support</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maintenance support</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Approaching end of maintenance support</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Warning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extended support</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Approaching end of support</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Warning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Support ended</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
</tr>
</tbody>
</table>
</dd>
<dt class="hdlist1">Traces</dt>
<dd>
<p>Indicates if the host needs a reboot or a process restart.</p>
<div class="paragraph">
<p>Possible values:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Global host status</th>
<th class="tableblock halign-left valign-top">Number value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unknown</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Warning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Up to date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required process restart</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required reboot</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="paragraph">
<div class="title">Search syntax</div>
<p>If you want to search for hosts according to their sub-status, use the syntax for searching in Satellite that is outlined in the <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/administering_red_hat_satellite/index#Searching_and_Bookmarking_admin">Searching and Bookmarking</a> chapter of the <em>Administering Satellite</em> guide, and then build your searches out using the following status-related examples:</p>
</div>
<div class="paragraph">
<p>You search for hosts' configuration sub-statuses based on their last reported state.</p>
</div>
<div class="paragraph">
<p>For example, to find hosts that have at least one pending resource:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">status.pending &gt; 0</pre>
</div>
</div>
<div class="paragraph">
<p>To find hosts that restarted some service during last run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">status.restarted &gt; 0</pre>
</div>
</div>
<div class="paragraph">
<p>To find hosts that have an interesting last run that might indicate something has happened:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">status.interesting = true</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Synchronizing_Templates_Repositories_managing-hosts"><a class="anchor" href="#Synchronizing_Templates_Repositories_managing-hosts"></a>16. Synchronizing template repositories</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In Satellite, you can synchronize repositories of job templates, provisioning templates, report templates, and partition table templates between Satellite&#160;Server and a version control system or local directory.
In this chapter, a Git repository is used for demonstration purposes.</p>
</div>
<div class="paragraph">
<p>This section details the workflow for installing and configuring the TemplateSync plug-in and performing exporting and importing tasks.</p>
</div>
<div class="sect2">
<h3 id="Enabling_the_TemplateSync_plugin_managing-hosts"><a class="anchor" href="#Enabling_the_TemplateSync_plugin_managing-hosts"></a>16.1. Enabling the TemplateSync plug-in</h3>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>To enable the plug-in on your Satellite&#160;Server, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer --enable-foreman-plugin-templates</pre>
</div>
</div>
</li>
<li>
<p>To verify that the plug-in is installed correctly, ensure <strong>Administer</strong> &gt; <strong>Settings</strong> includes the <strong>TemplateSync</strong> menu.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Configuring_the_TemplateSync_plugin_managing-hosts"><a class="anchor" href="#Configuring_the_TemplateSync_plugin_managing-hosts"></a>16.2. Configuring the TemplateSync plug-in</h3>
<div class="paragraph">
<p>In the Satellite web UI, navigate to <strong>Administer</strong> &gt; <strong>Settings</strong> &gt; <strong>TemplateSync</strong> to configure the plug-in.
The following table explains the parameters.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Some parameters are used only for importing or exporting.</p>
</div>
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. TemplateSync plug-in parameters</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">API parameter name</th>
<th class="tableblock halign-left valign-top">Meaning on importing</th>
<th class="tableblock halign-left valign-top">Meaning on exporting</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Associate</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>associate</code></p>
</div>
<div class="paragraph">
<p>Accepted values: <code>always</code>, <code>new</code>, <code>never</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Associates templates with an operating system, organization, and location based on metadata.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Branch</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>branch</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the default branch in Git repository to read from.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the default branch in Git repository to write to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dirname</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>dirname</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the subdirectory under the repository to read from.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the subdirectory under the repository to write to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filter</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>filter</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Imports only templates with names that match this regular expression.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exports only templates with names that match this regular expression.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Force import</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>force</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Imported templates overwrite locked templates with the same name.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lock templates</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>lock</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Do not overwrite existing templates when you import a new template with the same name, unless <strong>Force import</strong> is enabled.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadata export mode</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>metadata_export_mode</code></p>
</div>
<div class="paragraph">
<p>Accepted values: <code>refresh</code>, <code>keep</code>, <code>remove</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Defines how metadata is handled when exporting:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Refresh</strong> — remove existing metadata from the template content and generate new metadata based on current assignments and attributes.</p>
</li>
<li>
<p><strong>Keep</strong> — retain the existing metadata.</p>
</li>
<li>
<p><strong>Remove</strong> — export template without metadata.
Useful if you want to add metadata manually.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Negate</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>negate</code></p>
</div>
<div class="paragraph">
<p>Accepted values: <code>true</code>, <code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Imports templates ignoring the filter attribute.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exports templates ignoring the filter attribute.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prefix</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>prefix</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adds specified string to the beginning of the template if the template name does not start with the prefix already.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Repo</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>repo</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the path to the repository to synchronize from.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the path to a repository to export to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verbosity</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>verbose</code></p>
</div>
<div class="paragraph">
<p>Accepted values: <code>true</code>, <code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables writing verbose messages to the logs for this action.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="using-repository-sources_managing-hosts"><a class="anchor" href="#using-repository-sources_managing-hosts"></a>16.3. Using repository sources</h3>
<div class="paragraph">
<p>You can use existing repositories or local directories to synchronize templates with your Satellite&#160;Server.</p>
</div>
<div class="sect3">
<h4 id="synchronizing-templates-with-an-existing-repository_managing-hosts"><a class="anchor" href="#synchronizing-templates-with-an-existing-repository_managing-hosts"></a>16.3.1. Synchronizing templates with an existing repository</h4>
<div class="paragraph">
<p>Use this procedure to synchronize templates between your Satellite&#160;Server and an existing repository.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>If you want to use HTTPS to connect to the repository and you use a self-signed certificate authentication on your Git server, validate the certificate:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># sudo -u foreman git config --global http.sslCAPath <em>Path_To_My_Certificate</em></pre>
</div>
</div>
</li>
<li>
<p>If you want to use SSH to connect to the repository, perform the following steps:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Create an SSH key pair if you do not already have it.
Do not specify a passphrase.</p>
<div class="listingblock">
<div class="content">
<pre># sudo -u foreman ssh-keygen</pre>
</div>
</div>
</li>
<li>
<p>Configure your version control server with the public key from your Satellite, which resides in <code>/usr/share/foreman/.ssh/id_rsa.pub</code>.</p>
</li>
<li>
<p>Accept the Git SSH host key as the <code>foreman</code> user:</p>
<div class="listingblock">
<div class="content">
<pre># sudo -u foreman ssh <em>git.example.com</em></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Configure the TemplateSync plug-in settings on a <strong>TemplateSync</strong> tab.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Change the <strong>Branch</strong> setting to match the target branch on a Git server.</p>
</li>
<li>
<p>Change the <strong>Repo</strong> setting to match the Git repository.
For example, for the repository located in <code>git@git.example.com/templates.git</code> set the setting into <code>git@git.example.com/templates.git</code>.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Synchronizing_Templates_with_a_Local_Directory_managing-hosts"><a class="anchor" href="#Synchronizing_Templates_with_a_Local_Directory_managing-hosts"></a>16.3.2. Synchronizing templates with a local directory</h4>
<div class="paragraph">
<p>Synchronizing templates with a local directory is useful if you have configured a version control repository in the local directory.
That way, you can edit templates and track the history of edits in the directory.
You can also synchronize changes to Satellite&#160;Server after editing the templates.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Each template must contain the location and organization that the template belongs to.
This applies to all template types.
Before you import a template, ensure that you add the following section to the template:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">&lt;%#
kind: provision
name: <em>My_Provisioning_Template</em>
oses:
- <em>My_first_OS</em>
- <em>My_second_OS</em>
locations:
- <em>My_first_Location</em>
- <em>My_second_Location</em>
organizations:
- <em>My_first_Organization</em>
- <em>My_second_Organization</em>
%&gt;</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In <code>/var/lib/foreman</code>, create a directory for storing templates:</p>
<div class="listingblock">
<div class="content">
<pre># mkdir /var/lib/foreman/<em>My_Templates_Dir</em></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>You can place your templates to a custom directory outside <code>/var/lib/foreman</code>, but you have to ensure that the <code>Foreman</code> service can read its contents.
The directory must have the correct file permissions and the <code>foreman_lib_t</code> SELinux label.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Change the owner of the new templates directory to the <code>foreman</code> user:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># chown foreman /var/lib/foreman/<em>My_Templates_Dir</em></pre>
</div>
</div>
</li>
<li>
<p>Change the <strong>Repo</strong> setting on the <strong>TemplateSync</strong> tab to match the <code>/var/lib/foreman/<em>My_Templates_Dir</em>/</code> directory.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Importing_and_Exporting_Templates_managing-hosts"><a class="anchor" href="#Importing_and_Exporting_Templates_managing-hosts"></a>16.4. Importing and exporting templates</h3>
<div class="paragraph">
<p>You can import and export templates using the Satellite web UI, Hammer CLI, or Satellite API.
Satellite API calls use the role-based access control system, which enables the tasks to be executed as any user.
You can synchronize templates with a version control system, such as Git, or a local directory.</p>
</div>
<div class="sect3">
<h4 id="Importing_Templates_managing-hosts"><a class="anchor" href="#Importing_Templates_managing-hosts"></a>16.4.1. Importing templates</h4>
<div class="paragraph">
<p>You can import templates from a repository of your choice.
You can use different protocols to point to your repository, for example <code>/tmp/dir</code>, <code>git://example.com</code>, <code>https://example.com</code>, and <code>ssh://example.com</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The templates provided by Satellite are locked and you cannot import them by default.
To overwrite this behavior, change the <code>Force import</code> setting in the <strong>TemplateSync</strong> menu to <code>yes</code> or add the <code>force</code> parameter <code>-d '{ "force": "true" }'</code> to the import command.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Each template must contain the location and organization that the template belongs to.
This applies to all template types.
Before you import a template, ensure that you add the following section to the template:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">&lt;%#
kind: provision
name: <em>My_Provisioning_Template</em>
oses:
- <em>My_first_OS</em>
- <em>My_second_OS</em>
locations:
- <em>My_first_Location</em>
- <em>My_second_Location</em>
organizations:
- <em>My_first_Organization</em>
- <em>My_second_Organization</em>
%&gt;</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Satellite web UI, see the <a href="#cli_Importing_Templates_managing-hosts">CLI procedure</a>.
To use the API, see the <a href="#api_Importing_Templates_managing-hosts">API procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>Templates</strong> &gt; <strong>Sync Templates</strong>.</p>
</li>
<li>
<p>Click <strong>Import</strong>.</p>
</li>
<li>
<p>Each field is populated with values configured in <strong>Administer</strong> &gt; <strong>Settings</strong> &gt; <strong>TemplateSync</strong>.
Change the values as required for the templates you want to import.
For more information about each field, see <a href="#Configuring_the_TemplateSync_plugin_managing-hosts">Configuring the TemplateSync plug-in</a>.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The Satellite web UI displays the status of the import.
The status is not persistent; if you leave the status page, you cannot return to it.</p>
</div>
<div id="cli_Importing_Templates_managing-hosts" class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>To import a template from a repository, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer import-templates \
--branch "<em>My_Branch</em>" \
--filter '.*<em>Template Name$</em>' \
--organization "<em>My_Organization</em>" \
--prefix "[<em>Custom Index</em>] " \
--repo "<em>https://git.example.com/path/to/repository</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>For better indexing and management of your templates, use <code>--prefix</code> to set a category for your templates.
To select certain templates from a large repository, use <code>--filter</code> to define the title of the templates that you want to import.
For example <code>--filter '.*Ansible Default$'</code> imports various Ansible Default templates.</p>
</div>
</li>
</ul>
</div>
<div id="api_Importing_Templates_managing-hosts" class="olist arabic">
<div class="title">API procedure</div>
<ol class="arabic">
<li>
<p>Send a <code>POST</code> request to <code>api/v2/templates/import</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl -H "Accept:application/json" \
-H "Content-Type:application/json" \
-u <em>login</em>:<em>password</em> \
-k https://<em>satellite.example.com</em>/api/v2/templates/import \
-X POST</pre>
</div>
</div>
<div class="paragraph">
<p>If the import is successful, you receive <code>{"message":"Success"}</code>.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Exporting_Templates_managing-hosts"><a class="anchor" href="#Exporting_Templates_managing-hosts"></a>16.4.2. Exporting templates</h4>
<div class="paragraph">
<p>Use this procedure to export templates to a git repository.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Satellite web UI, see the <a href="#cli_Exporting_Templates_managing-hosts">CLI procedure</a>.
To use the API, see the <a href="#api_Exporting_Templates_managing-hosts">API procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>Templates</strong> &gt; <strong>Sync Templates</strong>.</p>
</li>
<li>
<p>Click <strong>Export</strong>.</p>
</li>
<li>
<p>Each field is populated with values configured in <strong>Administer</strong> &gt; <strong>Settings</strong> &gt; <strong>TemplateSync</strong>.
Change the values as required for the templates you want to export.
For more information about each field, see <a href="#Configuring_the_TemplateSync_plugin_managing-hosts">Configuring the TemplateSync plug-in</a>.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The Satellite web UI displays the status of the export.
The status is not persistent; if you leave the status page, you cannot return to it.</p>
</div>
<div id="cli_Exporting_Templates_managing-hosts" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>To export the templates to a repository, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer export-templates \
--organization "<em>My_Organization</em>" \
--repo "<em>https://git.example.com/path/to/repository</em>"</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>This command clones the repository, makes changes in a commit, and pushes back to the repository.
You can use the <code>--branch "<em>My_Branch</em>"</code> option to export the templates to a specific branch.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
<div id="api_Exporting_Templates_managing-hosts" class="olist arabic">
<div class="title">API procedure</div>
<ol class="arabic">
<li>
<p>Send a <code>POST</code> request to <code>api/v2/templates/export</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl -H "Accept:application/json" \
-H "Content-Type:application/json" \
-u <em>login</em>:<em>password</em> \
-k https://<em>satellite.example.com</em>/api/v2/templates/export \
-X POST</pre>
</div>
</div>
<div class="paragraph">
<p>If the export is successful, you receive <code>{"message":"Success"}</code>.</p>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>You can override default API settings by specifying them in the request with the <code>-d</code> parameter.
The following example exports templates to the <code>git.example.com/templates</code> repository:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl -H "Accept:application/json" \
-H "Content-Type:application/json" \
-u login:password \
-k https://<em>satellite.example.com</em>/api/v2/templates/export \
-X POST \
-d "{\"repo\":\"git.example.com/templates\"}"</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Uninstalling_the_Foreman_Templates_Plug-in_managing-hosts"><a class="anchor" href="#Uninstalling_the_Foreman_Templates_Plug-in_managing-hosts"></a>16.5. Uninstalling the Foreman templates plug-in</h3>
<div class="paragraph">
<p>Use the following procedure to avoid errors after removing the foreman_templates plug-in.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Disable the plug-in using the Satellite installer:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer --no-enable-foreman-plugin-templates</pre>
</div>
</div>
</li>
<li>
<p>Clean custom data of the plug-in.
The command does not affect any templates that you created.</p>
<div class="listingblock">
<div class="content">
<pre># foreman-rake templates:cleanup</pre>
</div>
</div>
</li>
<li>
<p>Uninstall the plug-in:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-maintain packages remove foreman-plugin-templates</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="managing-packages_managing-hosts"><a class="anchor" href="#managing-packages_managing-hosts"></a>17. Managing packages</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use Satellite to install, upgrade, and remove packages on hosts, as well as to enable or disable repositories on hosts.</p>
</div>
<div class="sect2">
<h3 id="Enabling_and_Disabling_Repositories_on_Hosts_managing-hosts"><a class="anchor" href="#Enabling_and_Disabling_Repositories_on_Hosts_managing-hosts"></a>17.1. Enabling and disabling repositories on hosts</h3>
<div class="paragraph">
<p>Use this procedure to enable and disable repositories on hosts for Satellite.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>,</p>
</li>
<li>
<p>Select the host name.</p>
</li>
<li>
<p>Click the <strong>Content</strong> tab.</p>
</li>
<li>
<p>Click the <strong>Repository Sets</strong> tab.</p>
</li>
<li>
<p>Click the vertical ellipsis to choose <strong>Override to disabled</strong> or <strong>Override to enabled</strong> to disable or enable repositories on hosts.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Installing_Packages_on_a_Host_managing-hosts"><a class="anchor" href="#Installing_Packages_on_a_Host_managing-hosts"></a>17.2. Installing packages on a host</h3>
<div class="paragraph">
<p>Use this procedure to review and install packages on a host using the Satellite web UI.
The list of packages available for installation depends on the content view and Lifecycle Environment assigned to the host.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong> and select the host you want to install packages on.</p>
</li>
<li>
<p>On the <strong>Content</strong> tab, select the <strong>Packages</strong> tab.</p>
</li>
<li>
<p>On the vertical ellipsis icon next to the upgrade button, click <strong>Install Packages</strong>.</p>
</li>
<li>
<p>In the <strong>Install packages</strong> window, select the package or packages that you want to install on the host.</p>
</li>
<li>
<p>Click <strong>Install</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>By default, the packages are installed using remote execution.
For more information about running remote execution jobs, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_hosts/index#configuring-and-setting-up-remote-jobs_managing-hosts">Configuring and Setting up Remote Jobs</a> in <em>Managing hosts</em>.</p>
</div>
<div class="paragraph">
<p>Create a body of the API request in the JSON format by following the instructions below.</p>
</div>
<div class="olist arabic">
<div class="title">API procedure</div>
<ol class="arabic">
<li>
<p>Create the <code>"job_invocation"</code> object and place rest of the body inside this object.</p>
</li>
<li>
<p>Create the <code>"inputs"</code> object with the <code>"package"</code> field of the string type specifying the packages you want to install.
If you are specifying multiple packages, separate them with a whitespace.</p>
</li>
<li>
<p>Create a <code>"feature"</code> field of the string type with value <code>"katello_package_install"</code>.</p>
</li>
<li>
<p>Create a <code>"search_query"</code> field of the string type and input a search query matching the hosts on which you want to install the packages.</p>
</li>
<li>
<p>Optional: If you want to install packages as a specific user, create an <code>ssh</code> object with the following fields of the string type:</p>
<div class="ulist">
<ul>
<li>
<p><code>"effective_user"</code> with the name of the ssh user</p>
</li>
<li>
<p><code>"effective_user_password"</code> with the password of the ssh user if this password is required</p>
</li>
</ul>
</div>
</li>
<li>
<p>Optional: If you want to install packages at a later time, create the <code>"scheduling"</code> object.
The object can contain one or both of the following fields of the string type with date, time, and a timezone in the ISO 8601 format:</p>
<div class="ulist">
<ul>
<li>
<p><code>"start_at"</code>- sets the time to install the packages</p>
</li>
<li>
<p><code>"start_before"</code> - sets the latest time to install the packages.
If it is not possible to install the packages by this time, then this action is cancelled.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you omit time, it defaults to 00:00:00.
If you omit timezone, it defaults to UTC.</p>
</div>
</li>
<li>
<p>Optional: If you want to limit the number of hosts on which the job is run concurrently, create the <code>"concurrency_control"</code> object with the <code>"concurrency_level"</code> field of the integer type.
Assign the number of hosts as the field value.</p>
</li>
<li>
<p>Optional: If you want to install packages at a later time and you want the host search query to be evaluated at a time of running the job, create a <code>"targeting_type"</code> field of the string type with the <code>"dynamic_query"</code> value.
This is useful if you expect the result of the search query to be different at the time of running the job due to changed status of the hosts.
If you omit this field, it defaults to <code>"static_query"</code>.</p>
</li>
<li>
<p>Send a <code>POST</code> request with the created body to the <code>/api/job_invocations</code> endpoint of your Satellite&#160;Server and use a tool like Python to see a formatted response.</p>
<div class="paragraph">
<p>Example API request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">curl https://<em>satellite.example.com</em>/api/job_invocations \
-H "content-type: application/json" \
-X POST \
-d @<em>Path_To_My_API_Request_Body</em> \
-u <em>My_Username</em>:<em>My_Password</em> | python3 -m json.tool</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>In the Satellite web UI, navigate to <strong>Monitor</strong> &gt; <strong>Jobs</strong> and see the report of the scheduled or completed remote execution job to install the packages on the selected hosts.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Example API request body</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-json" data-lang="json">{
  "job_invocation" : {
    "concurrency_control" : {
      "concurrency_level" : 100
    },
    "feature" : "katello_package_install",
    "inputs" : {
      "package" : "nano vim"
    },
    "scheduling" : {
      "start_at" : "2023-09-21T19:00:00+00:00",
      "start_before" : "2023-09-23T00:00:00+00:00"
    },
    "search_query" : "*",
    "ssh" : {
      "effective_user" : "My_Username",
      "effective_user_password" : "My_Password"
    },
    "targeting_type" : "dynamic_query"
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="upgrading-packages-on-a-host_managing-hosts"><a class="anchor" href="#upgrading-packages-on-a-host_managing-hosts"></a>17.3. Upgrading packages on a host</h3>
<div class="paragraph">
<p>You can upgrade packages on a host in bulk in the Satellite web UI.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>.</p>
</li>
<li>
<p>Click the name of the host you want to modify.</p>
</li>
<li>
<p>Click the <strong>Content</strong> tab, then click the <strong>Packages</strong> tab.</p>
</li>
<li>
<p>Select <strong>Upgradable</strong> from the <strong>Status</strong> list.</p>
</li>
<li>
<p>Select upgrade version from the dropdown menu in <strong>Upgradable to</strong> column where applicable.</p>
</li>
<li>
<p>Select the packages you want to upgrade.</p>
</li>
<li>
<p>Click <strong>Upgrade</strong>.
You get a REX job notification once the remote execution job is complete.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Create a body of the API request in the JSON format by following the instructions below.</p>
</div>
<div class="olist arabic">
<div class="title">API procedure</div>
<ol class="arabic">
<li>
<p>Create the <code>"job_invocation"</code> object and place rest of the body inside this object.</p>
</li>
<li>
<p>Create the <code>"inputs"</code> object with the <code>"package"</code> field of the string type specifying the packages you want to update.
If you are specifying multiple packages, separate them with a whitespace.</p>
</li>
<li>
<p>Create a <code>"feature"</code> field of the string type with value <code>"katello_package_update"</code>.</p>
</li>
<li>
<p>Create a <code>"search_query"</code> field of the string type and input a search query matching the hosts on which you want to update the packages.</p>
</li>
<li>
<p>Optional: If you want to update packages as a specific user, create an <code>ssh</code> object with the following fields of the string type:</p>
<div class="ulist">
<ul>
<li>
<p><code>"effective_user"</code> with the name of the ssh user</p>
</li>
<li>
<p><code>"effective_user_password"</code> with the password of the ssh user if this password is required</p>
</li>
</ul>
</div>
</li>
<li>
<p>Optional: If you want to update packages at a later time, create the <code>"scheduling"</code> object.
The object can contain one or both of the following fields of the string type with date, time, and a timezone in the ISO 8601 format:</p>
<div class="ulist">
<ul>
<li>
<p><code>"start_at"</code>- sets the time to update the packages</p>
</li>
<li>
<p><code>"start_before"</code> - sets the latest time to update the packages.
If it is not possible to update the packages by this time, then this action is cancelled.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you omit time, it defaults to 00:00:00.
If you omit timezone, it defaults to UTC.</p>
</div>
</li>
<li>
<p>Optional: If you want to limit the number of hosts on which the job is run concurrently, create the <code>"concurrency_control"</code> object with the <code>"concurrency_level"</code> field of the integer type.
Assign the number of hosts as the field value.</p>
</li>
<li>
<p>Optional: If you want to update packages at a later time and you want the host search query to be evaluated at a time of running the job, create a <code>"targeting_type"</code> field of the string type with the <code>"dynamic_query"</code> value.
This is useful if you expect the result of the search query to be different at the time of running the job due to changed status of the hosts.
If you omit this field, it defaults to <code>"static_query"</code>.</p>
</li>
<li>
<p>Send a <code>POST</code> request with the created body to the <code>/api/job_invocations</code> endpoint of your Satellite&#160;Server and use a tool like Python to see a formatted response.</p>
<div class="paragraph">
<p>Example API request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">curl https://<em>satellite.example.com</em>/api/job_invocations \
-H "content-type: application/json" \
-X POST \
-d @<em>Path_To_My_API_Request_Body</em> \
-u <em>My_Username</em>:<em>My_Password</em> | python3 -m json.tool</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>In the Satellite web UI, navigate to <strong>Monitor</strong> &gt; <strong>Jobs</strong> and see the report of the scheduled or completed remote execution job to update the packages on the selected hosts.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Example API request body</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-json" data-lang="json">{
  "job_invocation" : {
    "concurrency_control" : {
      "concurrency_level" : 100
    },
    "feature" : "katello_package_update",
    "inputs" : {
      "package" : "nano vim"
    },
    "scheduling" : {
      "start_at" : "2023-09-21T19:00:00+00:00",
      "start_before" : "2023-09-23T00:00:00+00:00"
    },
    "search_query" : "*",
    "ssh" : {
      "effective_user" : "My_Username",
      "effective_user_password" : "My_Password"
    },
    "targeting_type" : "dynamic_query"
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="removing-packages-from-a-host_managing-hosts"><a class="anchor" href="#removing-packages-from-a-host_managing-hosts"></a>17.4. Removing packages from a host</h3>
<div class="paragraph">
<p>You can remove packages from a host in the Satellite web UI.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>.</p>
</li>
<li>
<p>Click the name of the host you want to modify.</p>
</li>
<li>
<p>Click the <strong>Content</strong> tab, then click the <strong>Packages</strong> tab.</p>
</li>
<li>
<p>Click the vertical ellipsis for the package you want to remove and select <strong>Remove</strong>.
You get a REX job notification once the remote execution job is complete.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Create a body of the API request in the JSON format by following the instructions below.</p>
</div>
<div class="olist arabic">
<div class="title">API procedure</div>
<ol class="arabic">
<li>
<p>Create the <code>"job_invocation"</code> object and place rest of the body inside this object.</p>
</li>
<li>
<p>Create the <code>"inputs"</code> object with the <code>"package"</code> field of the string type specifying the packages you want to remove.
If you are specifying multiple packages, separate them with a whitespace.</p>
</li>
<li>
<p>Create a <code>"feature"</code> field of the string type with value <code>"katello_package_remove"</code>.</p>
</li>
<li>
<p>Create a <code>"search_query"</code> field of the string type and input a search query matching the hosts on which you want to remove the packages.</p>
</li>
<li>
<p>Optional: If you want to remove packages as a specific user, create an <code>ssh</code> object with the following fields of the string type:</p>
<div class="ulist">
<ul>
<li>
<p><code>"effective_user"</code> with the name of the ssh user</p>
</li>
<li>
<p><code>"effective_user_password"</code> with the password of the ssh user if this password is required</p>
</li>
</ul>
</div>
</li>
<li>
<p>Optional: If you want to remove packages at a later time, create the <code>"scheduling"</code> object.
The object can contain one or both of the following fields of the string type with date, time, and a timezone in the ISO 8601 format:</p>
<div class="ulist">
<ul>
<li>
<p><code>"start_at"</code>- sets the time to remove the packages</p>
</li>
<li>
<p><code>"start_before"</code> - sets the latest time to remove the packages.
If it is not possible to remove the packages by this time, then this action is cancelled.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you omit time, it defaults to 00:00:00.
If you omit timezone, it defaults to UTC.</p>
</div>
</li>
<li>
<p>Optional: If you want to limit the number of hosts on which the job is run concurrently, create the <code>"concurrency_control"</code> object with the <code>"concurrency_level"</code> field of the integer type.
Assign the number of hosts as the field value.</p>
</li>
<li>
<p>Optional: If you want to remove packages at a later time and you want the host search query to be evaluated at a time of running the job, create a <code>"targeting_type"</code> field of the string type with the <code>"dynamic_query"</code> value.
This is useful if you expect the result of the search query to be different at the time of running the job due to changed status of the hosts.
If you omit this field, it defaults to <code>"static_query"</code>.</p>
</li>
<li>
<p>Send a <code>POST</code> request with the created body to the <code>/api/job_invocations</code> endpoint of your Satellite&#160;Server and use a tool like Python to see a formatted response.</p>
<div class="paragraph">
<p>Example API request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">curl https://<em>satellite.example.com</em>/api/job_invocations \
-H "content-type: application/json" \
-X POST \
-d @<em>Path_To_My_API_Request_Body</em> \
-u <em>My_Username</em>:<em>My_Password</em> | python3 -m json.tool</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>In the Satellite web UI, navigate to <strong>Monitor</strong> &gt; <strong>Jobs</strong> and see the report of the scheduled or completed remote execution job to remove the packages on the selected hosts.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Example API request body</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-json" data-lang="json">{
  "job_invocation" : {
    "concurrency_control" : {
      "concurrency_level" : 100
    },
    "feature" : "katello_package_remove",
    "inputs" : {
      "package" : "nano vim"
    },
    "scheduling" : {
      "start_at" : "2023-09-21T19:00:00+00:00",
      "start_before" : "2023-09-23T00:00:00+00:00"
    },
    "search_query" : "*",
    "ssh" : {
      "effective_user" : "My_Username",
      "effective_user_password" : "My_Password"
    },
    "targeting_type" : "dynamic_query"
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Template_Writing_Reference_managing-hosts"><a class="anchor" href="#Template_Writing_Reference_managing-hosts"></a>Appendix A: Template writing reference</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Embedded Ruby (ERB) is a tool for generating text files based on templates that combine plain text with Ruby code.
Red&#160;Hat Satellite uses ERB syntax in the following cases:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Provisioning templates</dt>
<dd>
<p>For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/provisioning_hosts/index#creating-provisioning-templates_provisioning">Creating Provisioning Templates</a> in <em>Provisioning hosts</em>.</p>
</dd>
<dt class="hdlist1">Remote execution job templates</dt>
<dd>
<p>For more information, see <a href="#Configuring_and_Setting_Up_Remote_Jobs_managing-hosts">Configuring and setting up remote jobs</a>.</p>
</dd>
<dt class="hdlist1">Report templates</dt>
<dd>
<p>For more information, see <a href="#Using_Report_Templates_to_Monitor_Hosts_managing-hosts">Using report templates to monitor hosts</a>.</p>
</dd>
<dt class="hdlist1">Templates for partition tables</dt>
<dd>
<p>For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/provisioning_hosts/index#creating-partition-tables_provisioning">Creating Partition Tables</a> in <em>Provisioning hosts</em>.</p>
</dd>
<dt class="hdlist1">Smart Class Parameters</dt>
<dd>
<p>For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_configurations_using_puppet_integration/index#Configuring_Puppet_Smart_Class_Parameters_managing-configurations-puppet">Configuring Puppet Smart Class Parameters</a> in <em>Managing configurations using Puppet integration</em>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This section provides an overview of Satellite-specific macros and variables that can be used in ERB templates along with some usage examples.
Note that the default templates provided by Red&#160;Hat Satellite (<strong>Hosts</strong> &gt; <strong>Templates</strong> &gt; <strong>Provisioning Templates</strong>, <strong>Hosts</strong> &gt; <strong>Templates</strong> &gt; <strong>Job templates</strong>, <strong>Monitor</strong> &gt; <strong>Reports</strong> &gt; <strong>Report Templates</strong> ) also provide a good source of ERB syntax examples.</p>
</div>
<div class="paragraph">
<p>When provisioning a host or running a remote job, the code in the ERB is executed and the variables are replaced with the host specific values.
This process is referred to as <strong>rendering</strong>.
Satellite&#160;Server has the safemode rendering option enabled by default, which prevents any harmful code being executed from templates.</p>
</div>
<div class="sect2">
<h3 id="Accessing_the_Template_Writing_Reference_managing-hosts"><a class="anchor" href="#Accessing_the_Template_Writing_Reference_managing-hosts"></a>Accessing the template writing reference in the Satellite web UI</h3>
<div class="paragraph">
<p>You can access the template writing reference document in the Satellite web UI.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in to the Satellite web UI.</p>
</li>
<li>
<p>In the Satellite web UI, navigate to <strong>Administer</strong> &gt; <strong>About</strong>.</p>
</li>
<li>
<p>Click the <strong>Templates DSL</strong> link in the Support section.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Using_Autocompletion_in_Templates_managing-hosts"><a class="anchor" href="#Using_Autocompletion_in_Templates_managing-hosts"></a>Using autocompletion in templates</h3>
<div class="paragraph">
<p>You can access a list of available macros and usage information in the template editor with the autocompletion option.
This works for all templates within Satellite.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to either <strong>Hosts</strong> &gt; <strong>Templates</strong> &gt; <strong>Partition tables</strong>, <strong>Hosts</strong> &gt; <strong>Templates</strong> &gt; <strong>Provisioning Templates</strong>, or <strong>Hosts</strong> &gt; <strong>Templates</strong> &gt; <strong>Job templates</strong>.</p>
</li>
<li>
<p>Click the <strong>settings</strong> icon at the top right corner of the template editor and select <strong>Autocompletion</strong>.</p>
</li>
<li>
<p>Press <code><strong>Ctrl</strong></code> + <code><strong>Space</strong></code> in the template editor to access a list of all available macros.
You can narrow down the list of macros by typing in more information about what you are looking for.
For example, if you are looking for a method to list the ID of the content source for a host, you can type <code>host</code> and check the list of available macros for content source.</p>
</li>
<li>
<p>A window next to the dropdown provides a description of the macro, its usage, and the value it will return.</p>
</li>
<li>
<p>When you find the method you are looking for, hit <code>Enter</code> to input the method.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can also enable <strong>Live Autocompletion</strong> in the <strong>settings</strong> menu to view a list of macros that match the pattern whenever you type something.
However, this might input macros in unintended places, like package names in a provisioning template.</p>
</div>
</div>
<div class="sect2">
<h3 id="Writing_ERB_Templates_managing-hosts"><a class="anchor" href="#Writing_ERB_Templates_managing-hosts"></a>Writing ERB templates</h3>
<div class="paragraph">
<p>The following tags are the most important and commonly used in ERB templates:</p>
</div>
<div class="paragraph">
<div class="title">&lt;%  %&gt;</div>
<p>All Ruby code is enclosed within <code>&lt;%  %&gt;</code> in an ERB template.
The code is executed when the template is rendered.
It can contain Ruby control flow structures as well as Satellite-specific macros and variables.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;% if @host.operatingsystem.family == "Redhat" &amp;&amp; @host.operatingsystem.major.to_i &gt; 6 -%&gt;
systemctl &lt;%= input("action") %&gt; &lt;%= input("service") %&gt;
&lt;% else -%&gt;
service &lt;%= input("service") %&gt; &lt;%= input("action") %&gt;
&lt;% end -%&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Note that this template silently performs an action with a service and returns nothing at the output.</p>
</div>
<div class="paragraph">
<div class="title">&lt;%=  %&gt;</div>
<p>This provides the same functionality as <code>&lt;%  %&gt;</code>  but when the template is executed, the code output is inserted into the template.
This is useful for variable substitution, for example:</p>
</div>
<div class="paragraph">
<p>Example input:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>echo &lt;%= @host.name %&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Example rendering:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"><em>host.example.com</em></pre>
</div>
</div>
<div class="paragraph">
<p>Example input:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;% server_name = @host.fqdn %&gt;
&lt;%= server_name %&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Example rendering:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"><em>host.example.com</em></pre>
</div>
</div>
<div class="paragraph">
<p>Note that if you enter an incorrect variable, no output is returned.
However, if you try to call a method on an incorrect variable, the following error message returns:</p>
</div>
<div class="paragraph">
<p>Example input:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">&lt;%= @<em>example_incorrect_variable</em>.fqdn -%&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Example rendering:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>undefined method `fqdn' for nil:NilClass</pre>
</div>
</div>
<div class="paragraph">
<div class="title">&lt;%  -%&gt;, &lt;%=  -%&gt;</div>
<p>By default, a newline character is inserted after a Ruby block if it is closed at the end of a line:</p>
</div>
<div class="paragraph">
<p>Example input:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;%= "line1" %&gt;
&lt;%= "line2" %&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Example rendering:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>line1
line2</pre>
</div>
</div>
<div class="paragraph">
<p>To change the default behavior, modify the enclosing mark with <code>-%&gt;</code>:</p>
</div>
<div class="paragraph">
<p>Example input:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;%= "line1" -%&gt;
&lt;%= "line2" %&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Example rendering:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>line1line2</pre>
</div>
</div>
<div class="paragraph">
<p>This is used to reduce the number of lines, where Ruby syntax permits, in rendered templates.
White spaces in ERB tags are ignored.</p>
</div>
<div class="paragraph">
<p>An example of how this would be used in a report template to remove unnecessary newlines between a FQDN and IP address:</p>
</div>
<div class="paragraph">
<p>Example input:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;%= @host.fqdn -%&gt;
&lt;%= @host.ip -%&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Example rendering:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"><em>host.example.com10.10.181.216</em></pre>
</div>
</div>
<div class="paragraph">
<div class="title">&lt;%#  %&gt;</div>
<p>Encloses a comment that is ignored during template rendering:</p>
</div>
<div class="paragraph">
<p>Example input:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;%# A comment %&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>This generates no output.</p>
</div>
<div class="paragraph">
<div class="title">Indentation in ERB templates</div>
<p>Because of the varying lengths of the ERB tags, indenting the ERB syntax might seem messy.
ERB syntax ignore white space.
One method of handling the indentation is to declare the ERB tag at the beginning of each new line and then use white space within the ERB tag to outline the relationships within the syntax, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;%- load_hosts.each do |host| -%&gt;
&lt;%-   if host.build? %&gt;
&lt;%=     host.name %&gt; build is in progress
&lt;%-   end %&gt;
&lt;%- end %&gt;</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Troubleshooting_ERB_Templates_managing-hosts"><a class="anchor" href="#Troubleshooting_ERB_Templates_managing-hosts"></a>Troubleshooting ERB templates</h3>
<div class="paragraph">
<p>The Satellite web UI provides two ways to verify the template rendering for a specific host:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Directly in the template editor</strong> – when editing a template (under <strong>Hosts</strong> &gt; <strong>Templates</strong> &gt; <strong>Partition tables</strong>, <strong>Hosts</strong> &gt; <strong>Templates</strong> &gt; <strong>Provisioning Templates</strong>, or <strong>Hosts</strong> &gt; <strong>Templates</strong> &gt; <strong>Job templates</strong>), on the <strong>Template</strong> tab click <strong>Preview</strong> and select a host from the list.
The template then renders in the text field using the selected host&#8217;s parameters.
Preview failures can help to identify issues in your template.</p>
</li>
<li>
<p><strong>At the host&#8217;s details page</strong> – select a host at <strong>Hosts</strong> &gt; <strong>All Hosts</strong> and click the <strong>Templates</strong> tab to list templates associated with the host.
Select <strong>Review</strong> from the list next to the selected template to view it&#8217;s rendered version.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Generic_Project-specific_Macros_managing-hosts"><a class="anchor" href="#Generic_Project-specific_Macros_managing-hosts"></a>Generic Satellite-specific macros</h3>
<div class="paragraph">
<p>This section lists Satellite-specific macros for ERB templates.
You can use the macros listed in the following table across all kinds of templates.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Generic macros</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">indent(n)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indents the block of code by n spaces, useful when using a snippet template that is not indented.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">foreman_url(kind)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the full URL to host-rendered templates of the given kind.
For example, templates of the "provision" type usually reside at <code>http://HOST/unattended/provision</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">snippet(name)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renders the specified snippet template.
Useful for nesting provisioning templates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">snippets(file)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renders the specified snippet found in the Foreman database, attempts to load it from the <code>unattended/snippets/</code> directory if it is not found in the database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">snippet_if_exists(name)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renders the specified snippet, skips if no snippet with the specified name is found.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="Template_Macros_managing-hosts"><a class="anchor" href="#Template_Macros_managing-hosts"></a>Template macros</h3>
<div class="paragraph">
<p>If you want to write custom templates, you can use some of the following macros.
Depending on the template type, some of the following macros have different requirements.</p>
</div>
<div class="paragraph">
<p>For more information about the available macros for report templates, in the Satellite web UI, navigate to <strong>Monitor</strong> &gt; <strong>Reports</strong> &gt; <strong>Report Templates</strong>, and click <strong>Create Template</strong>.
In the Create Template window, click the <strong>Help</strong> tab.</p>
</div>
<div class="paragraph">
<p>For more information about the available macros for job templates, in the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>Templates</strong> &gt; <strong>Job templates</strong>, and click the <strong>New Job Template</strong>.
In the New Job Template window, click the <strong>Help</strong> tab.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">input</dt>
<dd>
<p>Using the <code>input</code> macro, you can customize the input data that the template can work with.
You can define the input name, type, and the options that are available for users.
For report templates, you can only use user inputs.
When you define a new input and save the template, you can then reference the input in the ERB syntax of the template body.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">&lt;%= input('cpus') %&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>This loads the value from user input <code>cpus</code>.</p>
</div>
</dd>
<dt class="hdlist1">load_hosts</dt>
<dd>
<p>Using the <code>load_hosts</code> macro, you can generate a complete list of hosts.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">&lt;%- load_hosts().each_record do |host| -%&gt;
&lt;%=     host.name %&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Use the <code>load_hosts</code> macro with the <code>each_record</code> macro to load records in batches of 1000 to reduce memory consumption.</p>
</div>
<div class="paragraph">
<p>If you want to filter the list of hosts for the report, you can add the option <code>search: input(‘<em>Example_Host</em>’)</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">&lt;% load_hosts(search: input('<em>Example_Host</em>')).each_record do |host| -%&gt;
&lt;%=  host.name %&gt;
&lt;% end -%&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>In this example, you first create an input that you then use to refine the search criteria that the <code>load_hosts</code> macro retrieves.</p>
</div>
</dd>
<dt class="hdlist1">report_row</dt>
<dd>
<p>Using the <code>report_row</code> macro, you can create a formatted report for ease of analysis.
The <code>report_row</code> macro requires the <code>report_render</code> macro to generate the output.</p>
<div class="listingblock">
<div class="title">Example input:</div>
<div class="content">
<pre class="nowrap">&lt;%- load_hosts(search: input('<em>Example_Host</em>')).each_record do |host| -%&gt;
&lt;%-   report_row(
        'Server FQDN': host.name
      ) -%&gt;
&lt;%- end -%&gt;
&lt;%= report_render -%&gt;</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example rendering:</div>
<div class="content">
<pre class="nowrap">Server FQDN
<em>host1.example.com</em>
<em>host2.example.com</em>
<em>host3.example.com</em>
<em>host4.example.com</em>
<em>host5.example.com</em>
<em>host6.example.com</em></pre>
</div>
</div>
<div class="paragraph">
<p>You can add extra columns to the report by adding another header.
The following example adds IP addresses to the report:</p>
</div>
<div class="listingblock">
<div class="title">Example input:</div>
<div class="content">
<pre class="nowrap">&lt;%- load_hosts(search: input('host')).each_record do |host| -%&gt;
&lt;%-   report_row(
      'Server FQDN': host.name,
           'IP': host.ip
      ) -%&gt;
&lt;%- end -%&gt;
&lt;%= report_render -%&gt;</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example rendering:</div>
<div class="content">
<pre class="nowrap">Server FQDN,IP
<em>host1.example.com</em>,<em>10.8.30.228</em>
<em>host2.example.com</em>,<em>10.8.30.227</em>
<em>host3.example.com</em>,<em>10.8.30.226</em>
<em>host4.example.com</em>,<em>10.8.30.225</em>
<em>host5.example.com</em>,<em>10.8.30.224</em>
<em>host6.example.com</em>,<em>10.8.30.223</em></pre>
</div>
</div>
</dd>
<dt class="hdlist1">report_render</dt>
<dd>
<div class="paragraph">
<p>This macro is available only for report templates.</p>
</div>
<div class="paragraph">
<p>Using the <code>report_render</code> macro, you create the output for the report.
During the template rendering process, you can select the format that you want for the report.
YAML, JSON, HTML, and CSV formats are supported.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">&lt;%= report_render -%&gt;</pre>
</div>
</div>
</dd>
<dt class="hdlist1">render_template()</dt>
<dd>
<div class="paragraph">
<p>This macro is available only for job templates.</p>
</div>
<div class="paragraph">
<p>Using this macro, you can render a specific template.
You can also enable and define arguments that you want to pass to the template.</p>
</div>
</dd>
<dt class="hdlist1">truthy</dt>
<dd>
<div class="paragraph">
<p>Using the <code>truthy</code> macro, you can declare if the value passed is true or false, regardless of whether the value is an integer or boolean or string.</p>
</div>
<div class="paragraph">
<p>This macro helps to avoid confusion when your template contains multiple value types. For example, the boolean value <code>true</code> is not the same as the string value <code>"true"</code>. With this macro, you can declare how you want the template to interpret the value and avoid confusion.</p>
</div>
<div class="paragraph">
<p>You can use <code>truthy</code> to declare values as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">truthy?("true") =&gt; true
truthy?(1) =&gt; true
truthy?("false") =&gt; false
truthy?(0) =&gt; false</pre>
</div>
</div>
</dd>
<dt class="hdlist1">falsy</dt>
<dd>
<div class="paragraph">
<p>The falsy macro serves the same purpose as the truthy macro.</p>
</div>
<div class="paragraph">
<p>Using the <code>falsy</code> macro, you can declare if the value passed in is true or false, regardless of whether the value is an integer or boolean or string.</p>
</div>
<div class="paragraph">
<p>You can use <code>falsy</code> to declare values as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>falsy?("true") =&gt; false
falsy?(1) =&gt; false
falsy?("false") =&gt; true
falsy?(0) =&gt; true</pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="Host_Specific_Variables_managing-hosts"><a class="anchor" href="#Host_Specific_Variables_managing-hosts"></a>Host-specific variables</h3>
<div class="paragraph">
<p>The following variables enable using host data within templates.
Note that job templates accept only <code>@host</code> variables.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Host-specific variables and macros</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.architecture</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The architecture of the host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.bond_interfaces</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns an array of all bonded interfaces.
See <a href="#Parsing_Arrays_managing-hosts">Parsing arrays</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.capabilities</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The method of system provisioning, can be either build (for example kickstart) or image.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.certname</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The SSL certificate name of the host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.diskLayout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The disk layout of the host.
Can be inherited from the operating system.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.domain</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The domain of the host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.environment <strong>Deprecated</strong> Use the <code>host_puppet_environment</code> variable instead.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Puppet environment of the host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.facts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns a Ruby hash of facts from Facter.
For example to access the 'ipaddress' fact from the output, specify @host.facts['ipaddress'].</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.grub_pass</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the host&#8217;s bootloader password.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.hostgroup</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The host group of the host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">host_enc['parameters']</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns a Ruby hash containing information on host parameters.
For example, use host_enc['parameters']['lifecycle_environment'] to get the lifecycle environment of a host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.image_build?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns <code>true</code> if the host is provisioned using an image.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.interfaces</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains an array of all available host interfaces including the primary interface.
See <a href="#Parsing_Arrays_managing-hosts">Parsing arrays</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.interfaces_with_identifier('IDs')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns array of interfaces with given identifier.
You can pass an array of multiple identifiers as an input, for example @host.interfaces_with_identifier(['eth0', 'eth1']).
See <a href="#Parsing_Arrays_managing-hosts">Parsing arrays</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.ip</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IP address of the host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.location</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The location of the host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.mac</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The MAC address of the host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.managed_interfaces</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns an array of managed interfaces (excluding BMC and bonded interfaces).
See <a href="#Parsing_Arrays_managing-hosts">Parsing arrays</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.medium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The assigned operating system installation medium.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The full name of the host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.operatingsystem.family</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The operating system family.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.operatingsystem.major</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The major version number of the assigned operating system.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.operatingsystem.minor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The minor version number of the assigned operating system.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.operatingsystem.name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The assigned operating system name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.operatingsystem.boot_files_uri(medium_provider)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full path to the kernel and initrd, returns an array.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.os.medium_uri(@host)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The URI used for provisioning (path configured in installation media).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">host_param('parameter_name')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the value of the specified host parameter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">host_param_false?('parameter_name')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns <code>false</code> if the specified host parameter evaluates to false.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">host_param_true?('parameter_name')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns <code>true</code> if the specified host parameter evaluates to true.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.primary_interface</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the primary interface of the host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.provider</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The compute resource provider.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.provision_interface</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the provisioning interface of the host.
Returns an interface object.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.ptable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The partition table name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.puppet_ca_server <strong>Deprecated</strong> Use the <code>host_puppet_ca_server</code> variable instead.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Puppet CA server the host must use.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.puppetmaster <strong>Deprecated</strong> Use the <code>host_puppet_server</code> variable instead.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Puppet server the host must use.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.pxe_build?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns <code>true</code> if the host is provisioned using the network or PXE.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.shortname</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The short name of the host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.sp_ip</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IP address of the BMC interface.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.sp_mac</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The MAC address of the BMC interface.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.sp_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the BMC interface.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.sp_subnet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The subnet of the BMC network.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.subnet.dhcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns <code>true</code> if a DHCP proxy is configured for this host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.subnet.dns_primary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The primary DNS server of the host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.subnet.dns_secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The secondary DNS server of the host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.subnet.gateway</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The gateway of the host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.subnet.mask</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The subnet mask of the host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.url_for_boot(:initrd)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full path to the initrd image associated with this host.
Not recommended, as it does not interpolate variables.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@host.url_for_boot(:kernel)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full path to the kernel associated with this host.
Not recommended, as it does not interpolate variables, prefer boot_files_uri.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@provisioning_type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Equals to 'host' or 'hostgroup' depending on type of provisioning.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns <code>true</code> if the network configuration is static.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@template_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the template being rendered.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">grub_pass</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns a bootloader argument to set the encrypted bootloader password, such as <strong>--md5pass=#{@host.grub_pass}</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ks_console</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns a string assembled using the port and the baud rate of the host which can be added to a kernel line.
For example <strong>console=ttyS1,9600</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">root_pass</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the root password configured for the system.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The majority of common Ruby methods can be applied on host-specific variables.
For example, to extract the last segment of the host&#8217;s IP address, you can use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;% @host.ip.split('.').last %&gt;</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Kickstart_Specific_Variables_managing-hosts"><a class="anchor" href="#Kickstart_Specific_Variables_managing-hosts"></a>Kickstart-specific variables</h3>
<div class="paragraph">
<p>The following variables are designed to be used within kickstart provisioning templates.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Kickstart-specific variables</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@arch</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The host architecture name, same as @host.architecture.name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@dynamic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns <code>true</code> if the partition table being used is a %pre script (has the #Dynamic option as the first line of the table).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@epel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A command which will automatically install the correct version of the epel-release rpm.
Use in a %post script.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@mediapath</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The full kickstart line to provide the URL command.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@osver</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The operating system major version number, same as @host.operatingsystem.major.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="Conditional_Statements_managing-hosts"><a class="anchor" href="#Conditional_Statements_managing-hosts"></a>Conditional statements</h3>
<div class="paragraph">
<p>In your templates, you might perform different actions depending on which value exists.
To achieve this, you can use conditional statements in your ERB syntax.</p>
</div>
<div class="paragraph">
<p>In the following example, the ERB syntax searches for a specific host name and returns an output depending on the value it finds:</p>
</div>
<div class="listingblock">
<div class="title">Example input</div>
<div class="content">
<pre class="nowrap">&lt;% load_hosts().each_record do |host| -%&gt;
&lt;% if @host.name == "<em>host1.example.com</em>" -%&gt;
&lt;%      result="positive" -%&gt;
&lt;%  else -%&gt;
&lt;%      result="negative" -%&gt;
&lt;%  end -%&gt;
&lt;%= result -%&gt;</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example rendering</div>
<div class="content">
<pre class="nowrap"><em>host1.example.com</em>
positive</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Parsing_Arrays_managing-hosts"><a class="anchor" href="#Parsing_Arrays_managing-hosts"></a>Parsing arrays</h3>
<div class="paragraph">
<p>While writing or modifying templates, you might encounter variables that return arrays.
For example, host variables related to network interfaces, such as <code>@host.interfaces</code> or <code>@host.bond_interfaces</code>, return interface data grouped in an array.
To extract a parameter value of a specific interface, use Ruby methods to parse the array.</p>
</div>
<div class="paragraph">
<div class="title">Finding the correct method to parse an array</div>
<p>The following procedure is an example that you can use to find the relevant methods to parse arrays in your template.
In this example, a report template is used, but the steps are applicable to other templates.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>To retrieve the NIC of a content host, in this example, using the <code>@host.interfaces</code> variable returns class values that you can then use to find methods to parse the array.</p>
<div class="listingblock">
<div class="title">Example input:</div>
<div class="content">
<pre>&lt;%= @host.interfaces -%&gt;</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example rendering:</div>
<div class="content">
<pre>&lt;Nic::Base::ActiveRecord_Associations_CollectionProxy:0x00007f734036fbe0&gt;</pre>
</div>
</div>
</li>
<li>
<p>In the Create Template window, click the <strong>Help</strong> tab and search for the <code>ActiveRecord_Associations_CollectionProxy</code> and <code>Nic::Base</code> classes.</p>
</li>
<li>
<p>For <code>ActiveRecord_Associations_CollectionProxy</code>, in the <strong>Allowed methods or members</strong> column, you can view the following methods to parse the array:</p>
<div class="listingblock">
<div class="content">
<pre>[] each find_in_batches first map size to_a</pre>
</div>
</div>
</li>
<li>
<p>For <code>Nic::Base</code>, in the <strong>Allowed methods or members</strong> column, you can view the following method to parse the array:</p>
<div class="listingblock">
<div class="content">
<pre>alias? attached_devices attached_devices_identifiers attached_to bond_options children_mac_addresses domain fqdn identifier inheriting_mac ip ip6 link mac managed? mode mtu nic_delay physical? primary provision shortname subnet subnet6 tag virtual? vlanid</pre>
</div>
</div>
</li>
<li>
<p>To iterate through an interface array, add the relevant methods to the ERB syntax:</p>
<div class="listingblock">
<div class="title">Example input:</div>
<div class="content">
<pre>&lt;% load_hosts().each_record do |host| -%&gt;
&lt;%    host.interfaces.each do |iface| -%&gt;
  iface.alias?: &lt;%= iface.alias? %&gt;
  iface.attached_to: &lt;%= iface.attached_to %&gt;
  iface.bond_options: &lt;%= iface.bond_options %&gt;
  iface.children_mac_addresses: &lt;%= iface.children_mac_addresses %&gt;
  iface.domain: &lt;%= iface.domain %&gt;
  iface.fqdn: &lt;%= iface.fqdn %&gt;
  iface.identifier: &lt;%= iface.identifier %&gt;
  iface.inheriting_mac: &lt;%= iface.inheriting_mac %&gt;
  iface.ip: &lt;%= iface.ip %&gt;
  iface.ip6: &lt;%= iface.ip6 %&gt;
  iface.link: &lt;%= iface.link %&gt;
  iface.mac: &lt;%= iface.mac %&gt;
  iface.managed?: &lt;%= iface.managed? %&gt;
  iface.mode: &lt;%= iface.mode %&gt;
  iface.mtu: &lt;%= iface.mtu %&gt;
  iface.physical?: &lt;%= iface.physical? %&gt;
  iface.primary: &lt;%= iface.primary %&gt;
  iface.provision: &lt;%= iface.provision %&gt;
  iface.shortname: &lt;%= iface.shortname %&gt;
  iface.subnet: &lt;%= iface.subnet %&gt;
  iface.subnet6: &lt;%= iface.subnet6 %&gt;
  iface.tag: &lt;%= iface.tag %&gt;
  iface.virtual?: &lt;%= iface.virtual? %&gt;
  iface.vlanid: &lt;%= iface.vlanid %&gt;
&lt;%- end -%&gt;</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example rendering:</div>
<div class="content">
<pre class="nowrap"><em>host1.example.com</em>
  iface.alias?: false
  iface.attached_to:
  iface.bond_options:
  iface.children_mac_addresses: []
  iface.domain:
  iface.fqdn: <em>host1.example.com</em>
  iface.identifier: ens192
  iface.inheriting_mac: 00:50:56:8d:4c:cf
  iface.ip: 10.10.181.13
  iface.ip6:
  iface.link: true
  iface.mac: 00:50:56:8d:4c:cf
  iface.managed?: true
  iface.mode: balance-rr
  iface.mtu:
  iface.physical?: true
  iface.primary: true
  iface.provision: true
  iface.shortname: <em>host1.example.com</em>
  iface.subnet:
  iface.subnet6:
  iface.tag:
  iface.virtual?: false
  iface.vlanid:</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Example_Template_Snippets_managing-hosts"><a class="anchor" href="#Example_Template_Snippets_managing-hosts"></a>Example template snippets</h3>
<div class="paragraph">
<div class="title">Checking if a host has Puppet and Puppetlabs enabled</div>
<p>The following example checks if the host has the Puppet and Puppetlabs repositories enabled:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;%
pm_set = @host.puppetmaster.empty? ? false : true
puppet_enabled = pm_set || host_param_true?('force-puppet')
puppetlabs_enabled = host_param_true?('enable-puppetlabs-repo')
%&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title">Capturing major and minor versions of a host&#8217;s operating system</div>
<p>The following example shows how to capture the minor and major version of the host&#8217;s operating system, which can be used for package related decisions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;%
os_major = @host.operatingsystem.major.to_i
os_minor = @host.operatingsystem.minor.to_i
%&gt;

&lt;% if ((os_minor &lt; 2) &amp;&amp; (os_major &lt; 14)) -%&gt;
...
&lt;% end -%&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title">Importing snippets to a template</div>
<p>The following example imports the <strong>subscription_manager_registration</strong> snippet to the template and indents it by four spaces:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;%= indent 4 do
snippet 'subscription_manager_registration'
end %&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title">Conditionally importing a Kickstart snippet</div>
<p>The following example imports the <code>kickstart_networking_setup</code> snippet if the host&#8217;s subnet has the DHCP boot mode enabled:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;% subnet = @host.subnet %&gt;
&lt;% if subnet.respond_to?(:dhcp_boot_mode?) -%&gt;
&lt;%= snippet 'kickstart_networking_setup' %&gt;
&lt;% end -%&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title">Parsing values from host custom facts</div>
<p>You can use the <code>host.facts</code> variable to parse values from a host&#8217;s facts and custom facts.
In this example <code>luks_stat</code> is a custom fact that you can parse in the same manner as <code>dmi::system::serial_number</code>, which is a host fact:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>'Serial': host.facts['dmi::system::serial_number'],
'Encrypted': host.facts['luks_stat'],</pre>
</div>
</div>
<div class="paragraph">
<p>In this example, you can customize the Applicable Errata report template to parse for custom information about the kernel version of each host:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;%-     report_row(
          'Host': host.name,
          'Operating System': host.operatingsystem,
          'Kernel': host.facts['uname::release'],
          'Environment': host.lifecycle_environment,
          'Erratum': erratum.errata_id,
          'Type': erratum.errata_type,
          'Published': erratum.issued,
          'Applicable since': erratum.created_at,
          'Severity': erratum.severity,
          'Packages': erratum.package_names,
          'CVEs': erratum.cves,
          'Reboot suggested': erratum.reboot_suggested,
        ) -%&gt;</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Job_Template_Examples_and_Extensions_managing-hosts"><a class="anchor" href="#Job_Template_Examples_and_Extensions_managing-hosts"></a>Appendix B: Job template examples and extensions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use this section as a reference to help modify, customize, and extend your job templates to suit your requirements.</p>
</div>
<div class="sect2">
<h3 id="Customizing_Job_Templates_managing-hosts"><a class="anchor" href="#Customizing_Job_Templates_managing-hosts"></a>Customizing job templates</h3>
<div class="paragraph">
<p>When creating a job template, you can include an existing template in the template editor field.
This way you can combine templates, or create more specific templates from the general ones.</p>
</div>
<div class="paragraph">
<p>The following template combines default templates to install and start the <strong>nginx</strong> service on clients:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-Ruby" data-lang="Ruby">&lt;%= render_template 'Package Action - SSH Default', :action =&gt; 'install', :package =&gt; 'nginx' %&gt;
&lt;%= render_template 'Service Action - SSH Default', :action =&gt; 'start', :service_name =&gt; 'nginx' %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above template specifies parameter values for the rendered template directly.
It is also possible to use the <strong>input()</strong> method to allow users to define input for the rendered template on job execution.
For example, you can use the following syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-Ruby" data-lang="Ruby">&lt;%= render_template 'Package Action - SSH Default', :action =&gt; 'install', :package =&gt; input("package") %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>With the above template, you have to import the parameter definition from the rendered template.
To do so, navigate to the <strong>Jobs</strong> tab, click <strong>Add Foreign Input Set</strong>, and select the rendered template from the <strong>Target template</strong> list.
You can import all parameters or specify a comma separated list.</p>
</div>
</div>
<div class="sect2">
<h3 id="default-job-template-categories_managing-hosts"><a class="anchor" href="#default-job-template-categories_managing-hosts"></a>Default job template categories</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Job template category</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Packages</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Templates for performing package related actions.
Install, update, and remove actions are included by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Puppet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Templates for executing Puppet runs on target hosts.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Power</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Templates for performing power related actions.
Restart and shutdown actions are included by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Commands</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Templates for executing custom commands on remote hosts.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Services</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Templates for performing service related actions.
Start, stop, restart, and status actions are included by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Katello</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Templates for performing content related actions.
These templates are used mainly from different parts of the Satellite web UI (for example bulk actions UI for content hosts), but can be used separately to perform operations such as errata installation.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="Example_restorecon_Template_managing-hosts"><a class="anchor" href="#Example_restorecon_Template_managing-hosts"></a>Example restorecon template</h3>
<div class="paragraph">
<p>This example shows how to create a template called <strong>Run Command - restorecon</strong> that restores the default <strong>SELinux</strong> context for all files in the selected directory on target hosts.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>Templates</strong> &gt; <strong>Job templates</strong>.</p>
</li>
<li>
<p>Click <strong>New Job Template</strong>.</p>
</li>
<li>
<p>Enter <strong>Run Command - restorecon</strong> in the <strong>Name</strong> field.
Select <strong>Default</strong> to make the template available to all organizations.
Add the following text to the template editor:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-Ruby" data-lang="Ruby">restorecon -RvF &lt;%= input("directory") %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>&lt;%= input("directory") %&gt;</code> string is replaced by a user-defined directory during job invocation.</p>
</div>
</li>
<li>
<p>On the <strong>Job</strong> tab, set <strong>Job category</strong> to <code>Commands</code>.</p>
</li>
<li>
<p>Click <strong>Add Input</strong> to allow job customization.
Enter <code>directory</code> to the <strong>Name</strong> field.
The input name must match the value specified in the template editor.</p>
</li>
<li>
<p>Click <strong>Required</strong> so that the command cannot be executed without the user specified parameter.</p>
</li>
<li>
<p>Select <strong>User input</strong> from the <strong>Input type</strong> list.
Enter a description to be shown during job invocation, for example <code>Target directory for restorecon</code>.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.
For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_hosts/index#Executing_a_restorecon_Template_on_Multiple_Hosts_managing-hosts">Executing a restorecon Template on Multiple Hosts</a> in <em>Managing hosts</em>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Rendering_a_restorecon_Template_managing-hosts"><a class="anchor" href="#Rendering_a_restorecon_Template_managing-hosts"></a>Rendering a restorecon template</h3>
<div class="paragraph">
<p>This example shows how to create a template derived from the <strong>Run command - restorecon</strong> template created in <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_hosts/index#Example_restorecon_Template_managing-hosts">Example restorecon Template</a>.
This template does not require user input on job execution, it will restore the SELinux context in all files under the <code>/home/</code> directory on target hosts.</p>
</div>
<div class="paragraph">
<p>Create a new template as described in <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_hosts/index#setting-up-job-templates_managing-hosts">Setting up Job Templates</a>, and specify the following string in the template editor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-Ruby" data-lang="Ruby">&lt;%= render_template("Run Command - restorecon", :directory =&gt; "/home") %&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Executing_a_restorecon_Template_on_Multiple_Hosts_managing-hosts"><a class="anchor" href="#Executing_a_restorecon_Template_on_Multiple_Hosts_managing-hosts"></a>Executing a restorecon template on multiple hosts</h3>
<div class="paragraph">
<p>This example shows how to run a job based on the template created in <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_hosts/index#Example_restorecon_Template_managing-hosts">Example restorecon Template</a> on multiple hosts.
The job restores the SELinux context in all files under the <code>/home/</code> directory.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Monitor</strong> &gt; <strong>Jobs</strong> and click <strong>Run job</strong>.</p>
</li>
<li>
<p>Select <strong>Commands</strong> as <strong>Job category</strong> and <strong>Run Command &#8211; restorecon</strong> as <strong>Job template</strong> and click <strong>Next</strong>.</p>
</li>
<li>
<p>Select the hosts on which you want to run the job.
If you do not select any hosts, the job will run on all hosts you can see in the current context.</p>
</li>
<li>
<p>In the <strong>directory</strong> field, provide a directory, for example <code>/home</code>, and click <strong>Next</strong>.</p>
</li>
<li>
<p>Optional: To configure advanced settings for the job, fill in the <strong>Advanced fields</strong>.
To learn more about advanced settings, see <a href="#advanced-settings-in-the-job-wizard_managing-hosts">Advanced settings in the job wizard</a>.
When you are done entering the advanced settings or if it is not required, click <strong>Next</strong>.</p>
</li>
<li>
<p>Schedule time for the job.</p>
<div class="ulist">
<ul>
<li>
<p>To execute the job immediately, keep the pre-selected <strong>Immediate execution</strong>.</p>
</li>
<li>
<p>To execute the job in future time, select <strong>Future execution</strong>.</p>
</li>
<li>
<p>To execute the job on regular basis, select <strong>Recurring execution</strong>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Optional: If you selected future or recurring execution, select the <strong>Query type</strong>, otherwise click <strong>Next</strong>.</p>
<div class="ulist">
<ul>
<li>
<p><strong>Static query</strong> means that the job executes on the exact list of hosts that you provided.</p>
</li>
<li>
<p><strong>Dynamic query</strong> means that the list of hosts is evaluated just before the job is executed.
If you entered the list of hosts based on some filter, the results can be different from when you first used that filter.</p>
<div class="paragraph">
<p>Click <strong>Next</strong> after you have selected the query type.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Optional: If you selected future or recurring execution, provide additional details:</p>
<div class="ulist">
<ul>
<li>
<p>For <strong>Future execution</strong>, enter the <strong>Starts at</strong> date and time.
You also have the option to select the <strong>Starts before</strong> date and time.
If the job cannot start before that time, it will be canceled.</p>
</li>
<li>
<p>For <strong>Recurring execution</strong>, select the start date and time, frequency, and condition for ending the recurring job.
You can choose the recurrence to never end, end at a certain time, or end after a given number of repetitions.
You can also add <strong>Purpose</strong> - a special label for tracking the job.
There can only be one active job with a given purpose at a time.</p>
<div class="paragraph">
<p>Click <strong>Next</strong> after you have entered the required information.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Review job details.
You have the option to return to any part of the job wizard and edit the information.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to schedule the job for execution.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Including_Power_Actions_in_Templates_managing-hosts"><a class="anchor" href="#Including_Power_Actions_in_Templates_managing-hosts"></a>Including power actions in templates</h3>
<div class="paragraph">
<p>This example shows how to set up a job template for performing power actions, such as reboot.
This procedure prevents Satellite from interpreting the disconnect exception upon reboot as an error, and consequently, remote execution of the job works correctly.</p>
</div>
<div class="paragraph">
<p>Create a new template as described in <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.15/html-single/managing_hosts/index#setting-up-job-templates_managing-hosts">Setting up Job Templates</a>, and specify the following string in the template editor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-Ruby" data-lang="Ruby">&lt;%= render_template("Power Action - SSH Default", :action =&gt; "restart") %&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="overview-of-the-host-columns_managing-hosts"><a class="anchor" href="#overview-of-the-host-columns_managing-hosts"></a>Appendix C: Overview of the host columns</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Below is the complete overview of columns that can be displayed in the host table divided into content categories.
Some columns fall under more than one category.
For more information on how to customize columns in the host table, see <a href="#selecting-host-columns_managing-hosts">Selecting host columns</a>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">General</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Power &#8211; Whether the host is turned on or off, if available</p>
</li>
<li>
<p>Name &#8211; name of the host</p>
</li>
<li>
<p>Operating system &#8211; operating system of the host</p>
</li>
<li>
<p>Model &#8211; host hardware model (or compute resource in case of virtual hosts)</p>
</li>
<li>
<p>Owner &#8211; user or group owning the host</p>
</li>
<li>
<p>Host group &#8211; host group of the host</p>
</li>
<li>
<p>Last report &#8211; time of the last host report</p>
</li>
<li>
<p>Comment &#8211; comment given to host</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Content</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Name &#8211; name of the host</p>
</li>
<li>
<p>Operating system &#8211; operating system of the host</p>
</li>
<li>
<p>Subscription status &#8211; does the host have a valid subscription attached</p>
</li>
<li>
<p>Installable updates &#8211; numbers of installable updates divided into four categories: security, bugfix, enhancement, total</p>
</li>
<li>
<p>Lifecycle Environment &#8211; lifecycle environment of the host</p>
</li>
<li>
<p>Content view &#8211; content view of the host</p>
</li>
<li>
<p>Registered &#8211; time when the host was registered to Satellite</p>
</li>
<li>
<p>Last checkin &#8211; last time of the communication between the host and the Satellite&#160;Server</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Network</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>IPv4 &#8211; IPv4 address of the host</p>
</li>
<li>
<p>IPv6 &#8211; IPv6 address of the host</p>
</li>
<li>
<p>MAC &#8211; MAC address of the host</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Reported data</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Sockets &#8211; number of host sockets</p>
</li>
<li>
<p>Cores &#8211; number of host processor cores</p>
</li>
<li>
<p>RAM &#8211; amount of memory</p>
</li>
<li>
<p>Boot time &#8211; last boot time of the host</p>
</li>
<li>
<p>Virtual &#8211; whether or not the host is recognized as a virtual machine</p>
</li>
<li>
<p>Disks total space &#8211; total host storage space</p>
</li>
<li>
<p>Kernel Version &#8211; Kernel version of the host operating system</p>
</li>
<li>
<p>BIOS vendor &#8211; vendor of the host BIOS</p>
</li>
<li>
<p>BIOS release date &#8211; release date of the host BIOS</p>
</li>
<li>
<p>BIOS version &#8211; version of the host BIOS</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Puppet (only if the Puppet plug-in is installed)</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Environment name &#8211; name of the Puppet environment of the host</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">RH Cloud</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Recommendations &#8211; number of available recommendations for the host</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated Mar 2024
</div>
</div>
</body>
</html>