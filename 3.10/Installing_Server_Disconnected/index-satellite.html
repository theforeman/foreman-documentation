<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.25">
<title>Installing Satellite&#160;Server in a disconnected network environment</title>
<style>
﻿*,::before,::after{box-sizing:border-box}html{font-size:100%;-webkit-text-size-adjust:100%}body{background:#fff;color:rgba(0,0,0,0.8);padding:0;margin:0;font-family:"Noto Serif", "DejaVu Serif", serif;font-size:inherit;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,p,blockquote,th,td{margin:0;padding:0}a{background:none;color:#2156a5;text-decoration:underline;line-height:inherit}a:active,a:hover{cursor:pointer;outline:0}a:focus{outline:thin dotted}a:hover,a:focus{color:#1d4b8f}abbr{font-size:0.9em}abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}b,strong{font-weight:bold;line-height:inherit}strong strong{font-weight:400}code,kbd,pre{font-family:"Droid Sans Mono", "DejaVu Sans Mono", monospace;font-size:1em}code{font-weight:400;color:rgba(0,0,0,0.9)}pre{color:rgba(0,0,0,0.9);line-height:1.45;text-rendering:optimizeSpeed;white-space:pre-wrap}dfn{font-style:italic}em,i{font-style:italic;line-height:inherit}em em{font-style:normal}hr{border:solid #dddddf;border-width:1px 0 0;clear:both;height:0;margin:1.25em 0 1.1875em}mark{background:#ff0;color:#000}p{line-height:1.6;margin-bottom:1.25rem;text-rendering:optimizeLegibility}q{quotes:"“" "”" "‘" "’"}small{font-size:60%;line-height:inherit}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-0.5em}sub{bottom:-0.25em}img,object[type^="image/"],svg{display:inline-block;height:auto;max-width:100%;vertical-align:middle}img{border:0;-ms-interpolation-mode:bicubic}object{max-width:100%}svg:not(:root){overflow:hidden}figure{margin:0}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}.left{float:left !important}.right{float:right !important}.text-left{text-align:left !important}.text-right{text-align:right !important}.text-center{text-align:center !important}.text-justify{text-align:justify !important}.hide{display:none}.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:0.25em}p aside{font-size:.875em;line-height:1.35;font-style:italic}h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans", "DejaVu Sans", sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.2;word-spacing:-0.05em}h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{color:#e99b8f;line-height:0}h1{font-size:2.125em}h2{font-size:1.6875em}h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}h4,h5{font-size:1.125em}h6{font-size:1em}ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}ul,ol{margin-left:1.5em}ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}ul.square{list-style-type:square}ul.circle{list-style-type:circle}ul.disc{list-style-type:disc}ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}dl dt{margin-bottom:.3125em;font-weight:bold}dl dd{margin-bottom:1.25em;margin-left:1.125em}blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,0.85)}@media screen and (min-width: 768px){h1{font-size:2.75em}h2{font-size:2.3125em}h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}h4{font-size:1.4375em}}table{background:#fff;border:1px solid #dedede;border-collapse:collapse;border-spacing:0;margin-bottom:1.25em;word-wrap:normal}table thead,table tfoot{background:#f7f8f7}table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,0.8);text-align:left}table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,0.8)}table tr.even,table tr.alt{background:#f8f8f7}table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}.center{margin-left:auto;margin-right:auto}.stretch{width:100%}.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:"";display:table}.clearfix::after,.float-group::after{clear:both}:not(pre).nobreak{word-wrap:normal}:not(pre).nowrap{white-space:nowrap}:not(pre).pre-wrap{white-space:pre-wrap}:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal !important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}pre>code{display:block}pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}.keyseq{color:rgba(51,51,51,0.8)}kbd{display:inline-block;color:rgba(0,0,0,0.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,0.2),inset 0 0 0 0.1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}.keyseq kbd:first-child{margin-left:0}.keyseq kbd:last-child{margin-right:0}.menuseq,.menuref{color:#000}.menuseq b:not(.caret),.menuref{font-weight:inherit}.menuseq{word-spacing:-0.02em}.menuseq b.caret{font-size:1.25em;line-height:0.8}.menuseq i.caret{font-weight:bold;text-align:center;width:0.45em}b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}b.button::before{content:"[";padding:0 3px 0 2px}b.button::after{content:"]";padding:0 2px 0 3px}p a>code:hover{color:rgba(0,0,0,0.9)}body>div[id]{margin:0 auto;max-width:62.5em;position:relative;padding-left:.9375em;padding-right:0.9375em}body>div[id]::before,body>div[id]::after,#content #footnotes::before{content:"";display:table;clear:both}#content{margin-top:1.25em;margin-bottom:0.625em}#content::before{content:none}#header>h1:first-child{color:rgba(0,0,0,0.85);margin-top:2.25rem;margin-bottom:0}#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,0.6);display:flex;flex-flow:row wrap}#header .details span:first-child{margin-left:-0.125em}#header .details span.email a{color:rgba(0,0,0,0.85)}#header .details br{display:none}#header .details br+span::before{content:" – "}#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,0.85)}#header .details br+span#revremark::before{content:" | "}#header #revnumber{text-transform:capitalize}#header #revnumber::after{content:" "}#content>h1:first-child:not([class]){color:rgba(0,0,0,0.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}#toc{border-bottom:1px solid #e7e7e9;padding-bottom:0.5em}#toc>ul{margin-left:0.125em}#toc ul.sectlevel0>li>a{font-style:italic}#toc ul.sectlevel0 ul.sectlevel1{margin:0.5em 0}#toc ul{font-family:"Open Sans", "DejaVu Sans", sans-serif;list-style-type:none}#toc li{line-height:1.3334;margin-top:0.3334em}#toc a{text-decoration:none}#toc a:active{text-decoration:underline}#toctitle{color:#7a2518;font-size:1.2em}@media screen and (min-width: 768px){#toctitle{font-size:1.375em}body.toc2{padding-left:15em;padding-right:0}#toc.toc2{margin-top:0 !important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0 !important;border-bottom-width:0 !important;z-index:1000;padding:1.25em 1em;height:calc(100% - (70px + 2.5em));overflow:auto}#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}#toc.toc2>ul{font-size:.9em;margin-bottom:0}#toc.toc2 ul ul{margin-left:0;padding-left:1em}#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:0.5em}body.toc2.toc-right{padding-left:0;padding-right:15em}body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}@media screen and (min-width: 1280px){body.toc2{padding-left:20em;padding-right:0}#toc.toc2{width:20em}#toc.toc2 #toctitle{font-size:1.375em}#toc.toc2>ul{font-size:0.95em}#toc.toc2 ul ul{padding-left:1.25em}body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}#content #toc>:first-child{margin-top:0}#content #toc>:last-child{margin-bottom:0}#footer{max-width:none;background:#025d8c;padding:1.25em;margin-left:2em}#footer-text{color:rgba(255,255,255,0.8);line-height:1.44}.sect1{padding-bottom:0.625em}@media screen and (min-width: 768px){#content{margin-bottom:1.25em}.sect1{padding-bottom:1.25em}}.sect1:last-child{padding-bottom:0}.sect1+.sect1{border-top:1px solid #e7e7e9}#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none !important;visibility:hidden;text-align:center;font-weight:400}#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:0.1em}#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}details{margin-left:1.25rem}details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}details>summary::-webkit-details-marker{display:none}details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif", "DejaVu Serif", serif;font-size:1rem;font-style:italic}table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,0.85)}.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}.admonitionblock>table td.icon{text-align:center;width:80px}.admonitionblock>table td.icon img{max-width:none}.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans", "DejaVu Sans", sans-serif;text-transform:uppercase}.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,0.6);word-wrap:anywhere}.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}.exampleblock>.content{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#fffef7;border-radius:4px;box-shadow:0 1px 4px #e0e0dc}.exampleblock>.content>:first-child{margin-top:0}.exampleblock>.content>:last-child{margin-bottom:0}.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}.sidebarblock>:first-child{margin-top:0}.sidebarblock>:last-child{margin-bottom:0}.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:0.8125em}@media screen and (min-width: 768px){.literalblock pre,.listingblock>.content>pre{font-size:0.90625em}}@media screen and (min-width: 1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,0.9)}.listingblock>.content{position:relative}.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:0.5}.listingblock:hover code[data-lang]::before{display:block}.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:0.5}.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}.listingblock pre.highlightjs{padding:0}.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}.listingblock pre.prettyprint{border-width:0}.prettyprint{background:#f7f7f8}pre.prettyprint .linenums{line-height:1.45;margin-left:2em}pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}pre.prettyprint li code[data-lang]::before{opacity:1}pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}table.linenotable td.code{padding-left:0.75em}table.linenotable td.linenos{width:0.01%}table.linenotable td.linenos,pre.pygments .linenos,pre.rouge .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}pre.pygments span.linenos,pre.rouge span.linenos{display:inline-block;margin-right:0.75em}.quoteblock{margin:0 1em 1.25em 1.5em;display:table}.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:0.75em}.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,0.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}.quoteblock blockquote{margin:0;padding:0;border:0}.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,0.1)}.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}.verseblock{margin:0 1em 1.25em}.verseblock pre{font-family:"Open Sans", "DejaVu Sans", sans-serif;font-size:1.15rem;color:rgba(0,0,0,0.85);font-weight:300;text-rendering:optimizeLegibility}.verseblock pre strong{font-weight:400}.verseblock .attribution{margin-top:1.25rem;margin-left:0.5ex}.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}.quoteblock .attribution br,.verseblock .attribution br{display:none}.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,0.6)}.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}.quoteblock.abstract{margin:0 1em 1.25em;display:block}.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:0.25em solid #dddddf}.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}p.tableblock:last-child{margin-bottom:0}td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}td.tableblock>.content>:last-child{margin-bottom:-1.25em}table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}table.grid-all>*>tr>*{border-width:1px}table.grid-cols>*>tr>*{border-width:0 1px}table.grid-rows>*>tr>*{border-width:1px 0}table.frame-all{border-width:1px}table.frame-ends{border-width:1px 0}table.frame-sides{border-width:0 1px}table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}th.halign-left,td.halign-left{text-align:left}th.halign-right,td.halign-right{text-align:right}th.halign-center,td.halign-center{text-align:center}th.valign-top,td.valign-top{vertical-align:top}th.valign-bottom,td.valign-bottom{vertical-align:bottom}th.valign-middle,td.valign-middle{vertical-align:middle}table thead th,table tfoot th{font-weight:bold}tbody tr th{background:#f7f8f7}tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,0.8);font-weight:bold}p.tableblock>code:only-child{background:none;padding:0}p.tableblock{font-size:1em}ol{margin-left:1.75em}ul li ol{margin-left:1.5em}dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:0.625em}ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:0.625em}ul.unstyled,ol.unstyled{margin-left:0}li>p:empty:only-child::before{content:"";display:inline-block}ul.checklist>li>p:first-child{margin-left:-1em}ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:0.125em}ul.checklist>li>p:first-child>input[type=checkbox]:first-child{font:inherit;margin:0 .25em 0 0;padding:0}ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 0.625em -1.25em}ul.inline>li{margin-left:1.25em}.unstyled dl dt{font-weight:400;font-style:normal}ol.arabic{list-style-type:decimal}ol.decimal{list-style-type:decimal-leading-zero}ol.loweralpha{list-style-type:lower-alpha}ol.upperalpha{list-style-type:upper-alpha}ol.lowerroman{list-style-type:lower-roman}ol.upperroman{list-style-type:upper-roman}ol.lowergreek{list-style-type:lower-greek}.hdlist>table,.colist>table{border:0;background:none}.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}td.hdlist1,td.hdlist2{vertical-align:top;padding:0 0.625em}td.hdlist1{font-weight:bold;padding-bottom:1.25em}td.hdlist2{word-wrap:anywhere}.literalblock+.colist,.listingblock+.colist{margin-top:-0.5em}.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}.colist td:not([class]):first-child img{max-width:none}.colist td:not([class]):last-child{padding:0.25em 0}.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}.imageblock.left{margin:0.25em 0.625em 1.25em 0}.imageblock.right{margin:0.25em 0 1.25em 0.625em}.imageblock>.title{margin-bottom:0}.imageblock.thumb,.imageblock.th{border-width:6px}.imageblock.thumb>.title,.imageblock.th>.title{padding:0 0.125em}.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}.image.left{margin-right:0.625em}.image.right{margin-left:0.625em}a.image{text-decoration:none;display:inline-block}a.image object{pointer-events:none}sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}sup.footnote a,sup.footnoteref a{text-decoration:none}sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:0.625em}#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:0.2em}#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}#footnotes .footnote:last-of-type{margin-bottom:0}#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:0.75em 0}div.page-break{display:none}div.unbreakable{page-break-inside:avoid}.big{font-size:larger}.small{font-size:smaller}.underline{text-decoration:underline}.overline{text-decoration:overline}.line-through{text-decoration:line-through}.aqua{color:#00bfbf}.aqua-background{background:#00fafa}.black{color:#000}.black-background{background:#000}.blue{color:#0000bf}.blue-background{background:#0000fa}.fuchsia{color:#bf00bf}.fuchsia-background{background:#fa00fa}.gray{color:#606060}.gray-background{background:#7d7d7d}.green{color:#006000}.green-background{background:#007d00}.lime{color:#00bf00}.lime-background{background:#00fa00}.maroon{color:#600000}.maroon-background{background:#7d0000}.navy{color:#000060}.navy-background{background:#00007d}.olive{color:#606000}.olive-background{background:#7d7d00}.purple{color:#600060}.purple-background{background:#7d007d}.red{color:#bf0000}.red-background{background:#fa0000}.silver{color:#909090}.silver-background{background:#bcbcbc}.teal{color:#006060}.teal-background{background:#007d7d}.white{color:#bfbfbf}.white-background{background:#fafafa}.yellow{color:#bfbf00}.yellow-background{background:#fafa00}span.icon>.fa{cursor:default}a span.icon>.fa{cursor:inherit}.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,0.5);cursor:default}.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,0.8);color:#111}.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}.conum[data-value]{display:inline-block;color:#fff !important;background:rgba(0,0,0,0.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans", "DejaVu Sans", sans-serif;font-style:normal;font-weight:bold}.conum[data-value] *{color:#fff !important}.conum[data-value]+b{display:none}.conum[data-value]::after{content:attr(data-value)}pre .conum[data-value]{position:relative;top:-0.125em}b.conum *{color:inherit !important}.conum:not([data-value]):empty{display:none}dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}h1,h2,p,td.content,span.alt,summary{letter-spacing:-0.01em}p strong,td.content strong,div.footnote strong{letter-spacing:-0.005em}p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}.print-only{display:none !important}@page{margin:1.25cm 0.75cm}@media print{*{box-shadow:none !important;text-shadow:none !important}html{font-size:80%}a{color:inherit !important;text-decoration:underline !important}a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none !important}a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:0.25em}abbr[title]{border-bottom:1px dotted}abbr[title]::after{content:" (" attr(title) ")"}pre,blockquote,tr,img,object,svg{page-break-inside:avoid}thead{display:table-header-group}p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}body>div[id]{max-width:none}#toc,.sidebarblock,.exampleblock>.content{background:none !important}#toc{border-bottom:1px solid #dddddf !important;padding-bottom:0 !important}body.book #header{text-align:center}body.book #header>h1:first-child{border:0 !important;margin:2.5em 0 1em}body.book #header .details{border:0 !important;display:block;padding:0 !important}body.book #header .details span:first-child{margin-left:0 !important}body.book #header .details br{display:block}body.book #header .details br+span::before{content:none !important}body.book #toc{border:0 !important;text-align:left !important;padding:0 !important;margin:0 !important}body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}.listingblock code[data-lang]::before{display:block}div.page-break{display:block;page-break-after:always}#footer{padding:0 0.9375em}.hide-on-print{display:none !important}.print-only{display:block !important}.hide-for-print{display:none !important}.show-for-print{display:inherit !important}}@media amzn-kf8, print{#header>h1:first-child{margin-top:1.25rem}.sect1{padding:0 !important}.sect1+.sect1{border:0}#footer{background:none}#footer-text{color:rgba(0,0,0,0.6);font-size:0.9em}}@media amzn-kf8{body>div[id]{padding:0}}body{padding:0;margin:0;margin-top:70px !important}.container{position:relative;z-index:1;padding-top:50px;min-height:100%}.container p{font-family:sans-serif;font-size:1.2em}nav{position:fixed;z-index:9999;left:0;right:0;top:0;height:70px;padding:0 1.5em;background-color:#025d8c;font-family:sans-serif;line-height:70px}nav .logo{width:50px;vertical-align:middle}nav .nav-menu{position:absolute;right:0.3em;top:0;padding:0;margin:0;list-style:none}nav .nav-item{display:inline-block}nav .nav-item>a{display:inline-block;padding:0 2.5em;line-height:70px;color:#fff;text-decoration:none}nav .dropdown{position:relative}nav .dropdown a::after{content:"";display:inline-block;margin-left:0.5em;vertical-align:middle;border-top:0.3em solid #fff;border-right:0.3em solid transparent;border-left:0.3em solid transparent}nav .dropdown.show a::after{transform:rotate(180deg)}nav .dropdown-menu{display:none;position:absolute;left:0;right:0;top:100%;padding:0.5em 0;margin-top:-0.5em;border:1px solid rgba(0,0,0,0.3);border-radius:0.5em;background-color:#fff;width:max-content}nav .dropdown-menu-left{left:auto;right:0}nav .dropdown.show .dropdown-menu{display:block}nav .dropdown-div{display:block;padding:0.4em 0;line-height:4em}nav .dropdown-div a::after{content:none;margin-left:0;border-top:0;border-right:0;border-left:0}nav .dropdown-item{display:block;padding:0 1.5em;font-size:0.875em;color:#000;line-height:1.6em;text-decoration:none}nav .btn-hamburger{display:none;position:absolute;right:1.5em;top:50%;background-color:transparent;border:0;cursor:pointer;outline:none;transform:translateY(-50%)}nav .btn-hamburger span{display:block;width:30px;height:4px;background-color:#fff;margin:6px;border-radius:2px;transition:0.3s ease-in-out}nav .btn-hamburger span:nth-child(4),nav .btn-hamburger span:nth-child(5){position:absolute;top:10px;opacity:0.5}nav .btn-hamburger span:nth-child(4){transform:rotate(45deg) scale(0)}nav .btn-hamburger span:nth-child(5){transform:rotate(-45deg) scale(0)}nav.opened .btn-hamburger span:nth-child(4){opacity:1;transform:rotate(45deg) scale(1)}nav.opened .btn-hamburger span:nth-child(5){opacity:1;transform:rotate(-45deg) scale(1)}nav.opened .btn-hamburger span:nth-child(1),nav.opened .btn-hamburger span:nth-child(2),nav.opened .btn-hamburger span:nth-child(3){opacity:0}@media screen and (max-width: 768px){nav .nav-menu{position:fixed;left:0;right:0;top:70px;bottom:100%;display:flex;flex-direction:column;justify-content:start;background-color:#363d4e;transition:bottom 0.5s ease-in-out;overflow:hidden}nav.opened .nav-menu{bottom:0}nav .nav-item>a{display:block}nav .dropdown-menu{position:relative;top:0;margin:0 1.5em}nav .btn-hamburger{display:block}}/*!
* "Fork me on GitHub" CSS ribbon v0.2.3 | MIT License
* https://github.com/simonwhitaker/github-fork-ribbon-css

The MIT License (MIT)

Copyright (c) 2013 Simon Whitaker

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/.github-fork-ribbon,.release-ribbon,.issue-ribbon{width:12.1em;height:12.1em;position:absolute;overflow:hidden;top:70px;right:0;z-index:9998;pointer-events:none;font-size:13px;text-decoration:none;text-indent:-999999px}.github-fork-ribbon.fixed,.fixed.release-ribbon,.fixed.issue-ribbon{position:fixed}.github-fork-ribbon:hover,.release-ribbon:hover,.issue-ribbon:hover,.github-fork-ribbon:active,.release-ribbon:active,.issue-ribbon:active{background-color:transparent}.github-fork-ribbon:before,.release-ribbon:before,.issue-ribbon:before,.github-fork-ribbon:after,.release-ribbon:after,.issue-ribbon:after{position:absolute;display:block;width:15.38em;height:1.54em;top:3.23em;right:-3.23em;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.github-fork-ribbon:before,.release-ribbon:before,.issue-ribbon:before{content:"";padding:.38em 0;background-color:#a00;background-image:-webkit-gradient(linear, left top, left bottom, from(transparent), to(rgba(0,0,0,0.15)));background-image:-webkit-linear-gradient(top, transparent, rgba(0,0,0,0.15));background-image:-moz-linear-gradient(top, transparent, rgba(0,0,0,0.15));background-image:-ms-linear-gradient(top, transparent, rgba(0,0,0,0.15));background-image:-o-linear-gradient(top, transparent, rgba(0,0,0,0.15));background-image:linear-gradient(to bottom, transparent, rgba(0,0,0,0.15));-webkit-box-shadow:0 0.15em 0.23em 0 rgba(0,0,0,0.5);-moz-box-shadow:0 0.15em 0.23em 0 rgba(0,0,0,0.5);box-shadow:0 0.15em 0.23em 0 rgba(0,0,0,0.5);pointer-events:auto}.github-fork-ribbon:after,.release-ribbon:after,.issue-ribbon:after{content:attr(data-ribbon);color:#fff;font:700 1em "Helvetica Neue", Helvetica, Arial, sans-serif;line-height:1.54em;text-decoration:none;text-shadow:0 -0.08em rgba(0,0,0,0.5);text-align:center;text-indent:0;padding:.15em 0;margin:.15em 0;border-width:.08em 0;border-style:dotted;border-color:#fff;border-color:rgba(255,255,255,0.7)}.github-fork-ribbon.left-top,.left-top.release-ribbon,.left-top.issue-ribbon,.github-fork-ribbon.left-bottom,.left-bottom.release-ribbon,.left-bottom.issue-ribbon{right:auto;left:0}.github-fork-ribbon.left-bottom,.left-bottom.release-ribbon,.left-bottom.issue-ribbon,.github-fork-ribbon.right-bottom,.right-bottom.release-ribbon,.right-bottom.issue-ribbon{top:auto;bottom:0}.github-fork-ribbon.left-top:before,.left-top.release-ribbon:before,.left-top.issue-ribbon:before,.github-fork-ribbon.left-top:after,.left-top.release-ribbon:after,.left-top.issue-ribbon:after,.github-fork-ribbon.left-bottom:before,.left-bottom.release-ribbon:before,.left-bottom.issue-ribbon:before,.github-fork-ribbon.left-bottom:after,.left-bottom.release-ribbon:after,.left-bottom.issue-ribbon:after{right:auto;left:-3.23em}.github-fork-ribbon.left-bottom:before,.left-bottom.release-ribbon:before,.left-bottom.issue-ribbon:before,.github-fork-ribbon.left-bottom:after,.left-bottom.release-ribbon:after,.left-bottom.issue-ribbon:after,.github-fork-ribbon.right-bottom:before,.right-bottom.release-ribbon:before,.right-bottom.issue-ribbon:before,.github-fork-ribbon.right-bottom:after,.right-bottom.release-ribbon:after,.right-bottom.issue-ribbon:after{top:auto;bottom:3.23em}.github-fork-ribbon.left-top:before,.left-top.release-ribbon:before,.left-top.issue-ribbon:before,.github-fork-ribbon.left-top:after,.left-top.release-ribbon:after,.left-top.issue-ribbon:after,.github-fork-ribbon.right-bottom:before,.right-bottom.release-ribbon:before,.right-bottom.issue-ribbon:before,.github-fork-ribbon.right-bottom:after,.right-bottom.release-ribbon:after,.right-bottom.issue-ribbon:after{-webkit-transform:rotate(-45deg);-moz-transform:rotate(-45deg);-ms-transform:rotate(-45deg);-o-transform:rotate(-45deg);transform:rotate(-45deg)}.release-ribbon:before{background-color:#a00}.issue-ribbon:before{background-color:#025d8c}@media screen{div.narrow{max-width:1080px;margin:0 auto !important;margin-top:70px auto !important;float:none !important}#toc.toc2{margin-top:70px !important}}

</style>
<!-- docinfo -->
</head>
<body class="book toc2 toc-left">
    <div id="wrap">
      <script src="/js/versions.js"></script>
      <script src="/js/nav.js"></script>
      <script>
        document.open();
        document.write(buildNavigation());
        addNavbarListeners();
        document.close();
      </script>
    </div>
<div id="header">
<h1>Installing Satellite&#160;Server in a disconnected network environment</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#providing-feedback-on-red-hat-documentation_satellite">Providing feedback on Red Hat documentation</a></li>
<li><a href="#Preparing_your_Environment_for_Installation_satellite">1. Preparing your environment for installation</a>
<ul class="sectlevel2">
<li><a href="#system-requirements_satellite">1.1. System requirements</a></li>
<li><a href="#storage-requirements_satellite">1.2. Storage requirements</a></li>
<li><a href="#storage-guidelines_satellite">1.3. Storage guidelines</a></li>
<li><a href="#supported-operating-systems_satellite">1.4. Supported operating systems</a></li>
<li><a href="#supported-browsers_satellite">1.5. Supported browsers</a></li>
<li><a href="#Port_and_firewall_requirements_satellite">1.6. Port and firewall requirements</a></li>
<li><a href="#Enabling_Connections_from_a_Client_to_Server_satellite">1.7. Enabling connections from a client to Satellite&#160;Server</a></li>
<li><a href="#verifying-dns-resolution_satellite">1.8. Verifying DNS resolution</a></li>
<li><a href="#tuning-with-predefined-profiles_satellite">1.9. Tuning Satellite&#160;Server with predefined profiles</a></li>
</ul>
</li>
<li><a href="#Installing_Server_Disconnected_satellite">2. Installing Satellite&#160;Server</a>
<ul class="sectlevel2">
<li><a href="#downloading-the-binary-dvd-images_satellite">2.1. Downloading the binary DVD images</a></li>
<li><a href="#configuring-the-base-operating-system-with-offline-repositories_satellite">2.2. Configuring the base operating system with offline repositories</a></li>
<li><a href="#using-fapolicyd-on-server_satellite">2.3. Optional: Using fapolicyd on Satellite&#160;Server</a></li>
<li><a href="#installing-from-the-offline-repositories_satellite">2.4. Installing the Satellite packages from the offline repositories</a></li>
<li><a href="#resolving-package-dependency-errors_satellite">2.5. Resolving package dependency errors</a></li>
<li><a href="#configuring-server_satellite">2.6. Configuring Satellite&#160;Server</a></li>
<li><a href="#disabling-subscription-connection_satellite">2.7. Disabling subscription connection</a></li>
<li><a href="#Importing_a_Red_Hat_Subscription_Manifest_into_Server_satellite">2.8. Importing a Red&#160;Hat subscription manifest into Satellite&#160;Server</a></li>
</ul>
</li>
<li><a href="#performing-additional-configuration">3. Performing Additional Configuration on Satellite&#160;Server</a>
<ul class="sectlevel2">
<li><a href="#configuring-satellite-server-to-consume-content-from-a-custom-cdn_satellite">3.1. Configuring Satellite&#160;Server to consume content from a custom CDN</a></li>
<li><a href="#Configuring-ISS_satellite">3.2. Configuring Inter-Satellite Synchronization (ISS)</a></li>
<li><a href="#configuring-pull-based-transport-for-remote-execution_satellite">3.3. Configuring pull-based transport for remote execution</a></li>
<li><a href="#enabling-power-management-on-hosts_satellite">3.4. Enabling power management on hosts</a></li>
<li><a href="#configuring-dns-dhcp-and-tftp_satellite">3.5. Configuring DNS, DHCP, and TFTP</a></li>
<li><a href="#Configuring_Server_for_Outgoing_Emails_satellite">3.6. Configuring Satellite&#160;Server for outgoing emails</a></li>
<li><a href="#Configuring_Server_with_a_Custom_SSL_Certificate">3.7. Configuring Satellite&#160;Server with a custom SSL certificate</a></li>
<li><a href="#using-external-databases_satellite">3.8. Using external databases with Satellite</a></li>
</ul>
</li>
<li><a href="#configuring-external-services">4. Configuring Satellite&#160;Server with external services</a>
<ul class="sectlevel2">
<li><a href="#configuring-external-dns_satellite">4.1. Configuring Satellite&#160;Server with external DNS</a></li>
<li><a href="#configuring-external-dhcp_satellite">4.2. Configuring Satellite&#160;Server with external DHCP</a></li>
<li><a href="#configuring-external-tftp_satellite">4.3. Configuring Satellite&#160;Server with external TFTP</a></li>
<li><a href="#configuring-external-idm-dns_satellite">4.4. Configuring Satellite&#160;Server with external IdM DNS</a></li>
</ul>
</li>
<li><a href="#applying-custom-configuration_satellite">Appendix A: Applying custom configuration to Red&#160;Hat Satellite</a></li>
<li><a href="#restoring-manual-changes-overwritten-by-a-puppet-run_satellite">Appendix B: Restoring manual changes overwritten by a Puppet run</a></li>
<li><a href="#Reverting_Server_to_Download_Content_from_Red_Hat_CDN_satellite">Appendix C: Reverting Satellite&#160;Server to download content from Red Hat CDN</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="providing-feedback-on-red-hat-documentation_satellite"><a class="anchor" href="#providing-feedback-on-red-hat-documentation_satellite"></a>Providing feedback on Red Hat documentation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We appreciate your feedback on our documentation.
Let us know how we can improve it.</p>
</div>
<div class="paragraph">
<p>Use the <strong>Create Issue</strong> form in Red Hat Jira to provide your feedback.
The Jira issue is created in the Red Hat Satellite Jira project, where you can track its progress.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure you have registered a <a href="https://access.redhat.com/">Red Hat account</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Click the following link: <a href="https://issues.redhat.com/secure/CreateIssueDetails!init.jspa?pid=12324223&amp;summary=Documentation%20feedback:%20%3CAdd%20summary%20here%3E&amp;issuetype=1&amp;components=12347630&amp;priority=10300"><strong>Create Issue</strong></a>.
If Jira displays a login error, log in and proceed after you are redirected to the form.</p>
</li>
<li>
<p>Complete the <strong>Summary</strong> and <strong>Description</strong> fields.
In the <strong>Description</strong> field, include the documentation URL, chapter or section number, and a detailed description of the issue.
Do not modify any other fields in the form.</p>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Preparing_your_Environment_for_Installation_satellite"><a class="anchor" href="#Preparing_your_Environment_for_Installation_satellite"></a>1. Preparing your environment for installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before you install Satellite, ensure that your environment meets the following requirements.</p>
</div>
<div class="sect2">
<h3 id="system-requirements_satellite"><a class="anchor" href="#system-requirements_satellite"></a>1.1. System requirements</h3>
<div class="paragraph">
<p>The following requirements apply to the networked base operating system:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>x86_64 architecture</p>
</li>
<li>
<p>The latest version of Red&#160;Hat Enterprise Linux 9 or Red&#160;Hat Enterprise Linux 8</p>
</li>
<li>
<p>4-core 2.0 GHz CPU at a minimum</p>
</li>
<li>
<p>A minimum of 20 GB RAM is required for Satellite&#160;Server to function.
In addition, a minimum of 4 GB RAM of swap space is also recommended.
Satellite running with less RAM than the minimum value might not operate correctly.</p>
</li>
<li>
<p>A unique host name, which can contain lower-case letters, numbers, dots (.) and hyphens (-)</p>
</li>
<li>
<p>A current Red&#160;Hat Satellite subscription</p>
</li>
<li>
<p>Administrative user (root) access</p>
</li>
<li>
<p>Full forward and reverse DNS resolution using a fully-qualified domain name</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Satellite only supports <code>UTF-8</code> encoding.
If your territory is USA and your language is English, set <code>en_US.utf-8</code> as the system-wide locale settings.
For more information about configuring system locale in Red&#160;Hat Enterprise Linux, see <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_basic_system_settings/assembly_changing-basic-environment-settings_configuring-basic-system-settings#proc_configuring-the-system-locale_assembly_changing-basic-environment-settings">Configuring the system locale</a>.</p>
</div>
<div class="paragraph">
<p>Your Satellite must have the Red Hat Satellite Infrastructure Subscription manifest in your Customer Portal.
Satellite must have satellite-capsule-6.x repository enabled and synced.
To create, manage, and export a Red&#160;Hat Subscription Manifest in the Customer Portal, see <a href="https://access.redhat.com/documentation/en-us/subscription_central/2023/html/creating_and_managing_manifests_for_a_connected_satellite_server/index">Creating and managing manifests for a connected Satellite&#160;Server</a> in <em>Subscription Central</em>.</p>
</div>
<div class="paragraph">
<p>Satellite&#160;Server and Capsule&#160;Server do not support shortnames in the hostnames.
When using custom certificates, the Common Name (CN) of the custom certificate must be a fully qualified domain name (FQDN) instead of a shortname.
This does not apply to the clients of a Satellite.</p>
</div>
<div class="paragraph">
<p>Before you install Satellite&#160;Server, ensure that your environment meets the requirements for installation.</p>
</div>
<div class="paragraph">
<p>Satellite&#160;Server must be installed on a freshly provisioned system that serves no other function except to run Satellite&#160;Server.
The freshly provisioned system must not have the following users provided by external identity providers to avoid conflicts with the local users that Satellite&#160;Server creates:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>apache</p>
</li>
<li>
<p>foreman</p>
</li>
<li>
<p>foreman-proxy</p>
</li>
<li>
<p>postgres</p>
</li>
<li>
<p>pulp</p>
</li>
<li>
<p>puppet</p>
</li>
<li>
<p>redis</p>
</li>
<li>
<p>tomcat</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Certified hypervisors</div>
<p>Satellite&#160;Server is fully supported on both physical systems and virtual machines that run on hypervisors that are supported to run Red&#160;Hat Enterprise Linux.
For more information about certified hypervisors, see <a href="https://access.redhat.com/articles/973163">Certified Guest Operating Systems in Red&#160;Hat OpenStack Services on OpenShift, Red&#160;Hat&#160;Virtualization, Red Hat OpenShift Virtualization and Red&#160;Hat Enterprise Linux with KVM</a>.</p>
</div>
<div class="paragraph">
<div class="title">SELinux mode</div>
<p>SELinux must be enabled, either in enforcing or permissive mode.
Installation with disabled SELinux is not supported.</p>
</div>
<div class="paragraph">
<div class="title">Synchronized system clock</div>
<p>The system clock on the base operating system where you are installing your Satellite&#160;Server must be synchronized across the network.
If the system clock is not synchronized, SSL certificate verification might fail.
For example, you can use the Chrony suite for timekeeping.
For more information, see the following documents:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/configuring_basic_system_settings/configuring-time-synchronization_configuring-basic-system-settings">Configuring time synchronization</a> in <em>Red&#160;Hat Enterprise Linux&#160;9 Configuring basic system settings</em></p>
</li>
<li>
<p><a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/configuring-time-synchronization_configuring-basic-system-settings">Configuring time synchronization</a> in <em>Red&#160;Hat Enterprise Linux&#160;8 Configuring basic system settings</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">FIPS mode</div>
<p>You can install Satellite on a Red&#160;Hat Enterprise Linux system that is operating in FIPS mode.
You cannot enable FIPS mode after the installation of Satellite.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/security_hardening/switching-rhel-to-fips-mode_security-hardening">Switching RHEL to FIPS mode</a> in <em>Red&#160;Hat Enterprise Linux&#160;9 Security hardening</em> or <a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/8/html/security_hardening/switching-rhel-to-fips-mode_security-hardening">Switching RHEL to FIPS mode</a> in <em>Red&#160;Hat Enterprise Linux&#160;8 Security hardening</em>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Satellite supports DEFAULT and FIPS crypto-policies.
The FUTURE crypto-policy is not supported for Satellite and Capsule installations.
The FUTURE policy is a stricter forward-looking security level intended for testing a possible future policy.
For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/security_hardening/using-the-system-wide-cryptographic-policies_security-hardening">Using system-wide cryptographic policies</a> in the Red&#160;Hat Enterprise Linux guide.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Inter-Satellite Synchronization (ISS)</div>
<p>In a scenario with air-gapped Satellite&#160;Servers, all your Satellite&#160;Servers must be on the same Satellite version for ISS Export Sync to work.
ISS Network Sync works across all Satellite versions that support it.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.15/html-single/managing_content/index#Synchronizing_Content_Between_Servers_content-management">Synchronizing Content Between Satellite Servers</a> in <em>Managing content</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="storage-requirements_satellite"><a class="anchor" href="#storage-requirements_satellite"></a>1.2. Storage requirements</h3>
<div class="paragraph">
<p>The following table details storage requirements for specific directories.
These values are based on expected use case scenarios and can vary according to individual environments.</p>
</div>
<div class="paragraph">
<p>The runtime size was measured with Red&#160;Hat Enterprise Linux 7, 8, and 9 repositories synchronized.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Storage requirements for a Satellite&#160;Server installation</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Directory</th>
<th class="tableblock halign-left valign-top">Installation Size</th>
<th class="tableblock halign-left valign-top">Runtime Size</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/var/log</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 GB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/var/lib/pgsql</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100 MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 GB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/usr</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 GB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not Applicable</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/opt/puppetlabs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">500 MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not Applicable</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/var/lib/pulp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">300 GB</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For external database servers: <code>/var/lib/pgsql</code> with installation size of 100 MB and runtime size of 20 GB.</p>
</div>
<div class="paragraph">
<p>For detailed information on partitioning and size, see <a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_storage_devices/disk-partitions_managing-storage-devices">Disk partitions</a> in <em>Red&#160;Hat Enterprise Linux&#160;9 Managing storage devices</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="storage-guidelines_satellite"><a class="anchor" href="#storage-guidelines_satellite"></a>1.3. Storage guidelines</h3>
<div class="paragraph">
<p>Consider the following guidelines when installing Satellite&#160;Server to increase efficiency.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If you mount the <code>/tmp</code> directory as a separate file system, you must use the <code>exec</code> mount option in the <code>/etc/fstab</code> file.
If <code>/tmp</code> is already mounted with the <code>noexec</code> option, you must change the option to <code>exec</code> and re-mount the file system.
This is a requirement for the <code>puppetserver</code> service to work.</p>
</li>
<li>
<p>Because most Satellite&#160;Server data is stored in the <code>/var</code> directory, mounting <code>/var</code> on LVM storage can help the system to scale.</p>
</li>
<li>
<p>Use high-bandwidth, low-latency storage for the <code>/var/lib/pulp/</code> directories.
As Red&#160;Hat Satellite has many operations that are I/O intensive, using high latency, low-bandwidth storage causes performance degradation.
Ensure your installation has a speed in the range 60&#8202;&#8211;&#8202;80 Megabytes per second.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can use the <code>storage-benchmark</code> script to get this data.
For more information on using the <code>storage-benchmark</code> script, see <a href="https://access.redhat.com/solutions/3397771">Impact of Disk Speed on Satellite Operations</a>.</p>
</div>
<div class="ulist">
<div class="title">File system guidelines</div>
<ul>
<li>
<p>Do not use the GFS2 file system as the input-output latency is too high.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Log file storage</div>
<p>Log files are written to <code>/var/log/messages/,</code> <code>/var/log/httpd/</code>, and <code>/var/lib/foreman-proxy/openscap/content/</code>.
You can manage the size of these files using <strong>logrotate</strong>.
For more information, see <a href="https://access.redhat.com/solutions/1294">How to use logrotate utility to rotate log files</a>.</p>
</div>
<div class="paragraph">
<p>The exact amount of storage you require for log messages depends on your installation and setup.</p>
</div>
<div class="paragraph">
<div class="title">SELinux considerations for NFS mount</div>
<p>When the <code>/var/lib/pulp</code> directory is mounted using an NFS share, SELinux blocks the synchronization process.
To avoid this, specify the SELinux context of the <code>/var/lib/pulp</code> directory in the file system table by adding the following lines to <code>/etc/fstab</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>nfs.example.com:/nfsshare  /var/lib/pulp  nfs  context="system_u:object_r:var_lib_t:s0"  1 2</pre>
</div>
</div>
<div class="paragraph">
<p>If NFS share is already mounted, remount it using the above configuration and enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># restorecon -R /var/lib/pulp</pre>
</div>
</div>
<div class="paragraph">
<div class="title">Duplicated packages</div>
<p>Packages that are duplicated in different repositories are only stored once on the disk.
Additional repositories containing duplicate packages require less additional storage.
The bulk of storage resides in the <code>/var/lib/pulp/</code> directory.
These end points are not manually configurable.
Ensure that storage is available on the <code>/var</code> file system to prevent storage problems.</p>
</div>
<div class="paragraph">
<div class="title">Symbolic links</div>
<p>You cannot use symbolic links for <code>/var/lib/pulp/</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="supported-operating-systems_satellite"><a class="anchor" href="#supported-operating-systems_satellite"></a>1.4. Supported operating systems</h3>
<div class="paragraph">
<p>You can install the operating system from a disc, local ISO image, kickstart, or any other method that Red&#160;Hat supports.
Red&#160;Hat Satellite&#160;Server is supported on the latest versions of Red&#160;Hat Enterprise Linux 9 and Red&#160;Hat Enterprise Linux 8 that are available at the time when Satellite&#160;Server is installed.
Previous versions of Red&#160;Hat Enterprise Linux including EUS or z-stream are not supported.</p>
</div>
<div class="paragraph">
<p>The following operating systems are supported by the installer, have packages, and are tested for deploying Satellite:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Operating systems supported by satellite-installer</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operating System</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Architecture</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Notes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Red&#160;Hat Enterprise Linux 9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x86_64 only</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Red&#160;Hat Enterprise Linux 8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x86_64 only</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Red&#160;Hat advises against using an existing system because the Satellite installer will affect the configuration of several components.
Red&#160;Hat Satellite&#160;Server requires a Red&#160;Hat Enterprise Linux installation with the <code>@Base</code> package group with no other package-set modifications, and without third-party configurations or software not directly necessary for the direct operation of the server.
This restriction includes hardening and other non-Red&#160;Hat security software.
If you require such software in your infrastructure, install and verify a complete working Satellite&#160;Server first, then create a backup of the system before adding any non-Red&#160;Hat software.</p>
</div>
<div class="paragraph">
<p>Red&#160;Hat does not support using the system for anything other than running Satellite&#160;Server.</p>
</div>
</div>
<div class="sect2">
<h3 id="supported-browsers_satellite"><a class="anchor" href="#supported-browsers_satellite"></a>1.5. Supported browsers</h3>
<div class="paragraph">
<p>Satellite supports recent versions of Firefox and Google Chrome browsers.</p>
</div>
<div class="paragraph">
<p>The Satellite web UI and command-line interface support English, Simplified Chinese, Japanese, French.</p>
</div>
</div>
<div class="sect2">
<h3 id="Port_and_firewall_requirements_satellite"><a class="anchor" href="#Port_and_firewall_requirements_satellite"></a>1.6. Port and firewall requirements</h3>
<div class="paragraph">
<p>For the components of Satellite architecture to communicate, ensure that the required network ports are open and free on the base operating system.
You must also ensure that the required network ports are open on any network-based firewalls.</p>
</div>
<div class="paragraph">
<p>Use this information to configure any network-based firewalls.
Note that some cloud solutions must be specifically configured to allow communications between machines because they isolate machines similarly to network-based firewalls.
If you use an application-based firewall, ensure that the application-based firewall permits all applications that are listed in the tables and known to your firewall.
If possible, disable the application checking and allow open port communication based on the protocol.</p>
</div>
<div class="paragraph">
<div class="title">Integrated Capsule</div>
<p>Satellite&#160;Server has an integrated Capsule and any host that is directly connected to Satellite&#160;Server is a Client of Satellite in the context of this section.
This includes the base operating system on which Capsule&#160;Server is running.</p>
</div>
<div class="paragraph">
<div class="title">Clients of Capsule</div>
<p>Hosts which are clients of Capsules, other than Satellite&#8217;s integrated Capsule, do not need access to Satellite&#160;Server.
For more information on Satellite Topology and an illustration of port connections, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.15/html-single/overview_concepts_and_deployment_considerations/index#sect-Documentation-Architecture_Guide-Capsule_Networking">Capsule Networking</a> in <em>Overview, concepts, and deployment considerations</em>.</p>
</div>
<div class="paragraph">
<p>Required ports can change based on your configuration.</p>
</div>
<div class="paragraph">
<p>The following tables indicate the destination port and the direction of network traffic:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Satellite&#160;Server incoming traffic</caption>
<colgroup>
<col style="width: 15%;">
<col style="width: 15%;">
<col style="width: 15%;">
<col style="width: 15%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Destination Port</th>
<th class="tableblock halign-left valign-top">Protocol</th>
<th class="tableblock halign-left valign-top">Service</th>
<th class="tableblock halign-left valign-top">Source</th>
<th class="tableblock halign-left valign-top">Required For</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">53</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP and UDP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DNS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DNS Servers and clients</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name resolution</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DNS (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">67</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UDP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DHCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dynamic IP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DHCP (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">69</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UDP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TFTP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TFTP Server (optional)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Capsule</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Red&#160;Hat Satellite API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Communication from Capsule</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">443, 80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS, HTTP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Global Registration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registering hosts to Satellite</p>
<p class="tableblock">Port 443 is required for registration initiation, uploading facts, and sending installed packages and traces</p>
<p class="tableblock">Port 80 notifies Satellite on the <code>/unattended/built</code> endpoint that registration has finished</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Red&#160;Hat Satellite</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Content Mirroring</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Management</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Red&#160;Hat Satellite</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Capsule API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Smart Proxy functionality</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">443, 80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS, HTTP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Capsule</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Content Retrieval</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Content</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">443, 80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS, HTTP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Content Retrieval</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Content</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1883</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MQTT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pull based REX (optional)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Content hosts for REX job notification (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5910&#8202;&#8211;&#8202;5930</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Browsers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute Resource&#8217;s virtual console</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provisioning templates</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Template retrieval for client installers, iPXE or UEFI HTTP Boot</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PXE Boot</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Installation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8140</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Puppet agent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client updates (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9090</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Red&#160;Hat Satellite</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Capsule API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Smart Proxy functionality</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9090</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenSCAP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configure Client (if the OpenSCAP plugin is installed)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9090</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Discovered Node</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Discovery</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Host discovery and provisioning (if the discovery plugin is installed)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9090</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pull based REX (optional)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Content hosts for REX job notification (optional)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Any host that is directly connected to Satellite&#160;Server is a client in this context because it is a client of the integrated Capsule.
This includes the base operating system on which a Capsule&#160;Server is running.</p>
</div>
<div class="paragraph">
<p>A DHCP Capsule performs ICMP ping or TCP echo connection attempts to hosts in subnets with DHCP IPAM set to find out if an IP address considered for use is free.
This behavior can be turned off using <code>satellite-installer --foreman-proxy-dhcp-ping-free-ip=false</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Some outgoing traffic returns to Satellite to enable internal communication and security operations.</p>
</div>
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Satellite&#160;Server outgoing traffic</caption>
<colgroup>
<col style="width: 15%;">
<col style="width: 15%;">
<col style="width: 15%;">
<col style="width: 15%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Destination Port</th>
<th class="tableblock halign-left valign-top">Protocol</th>
<th class="tableblock halign-left valign-top">Service</th>
<th class="tableblock halign-left valign-top">Destination</th>
<th class="tableblock halign-left valign-top">Required For</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ICMP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ping</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DHCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Free IP checking (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">echo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DHCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Free IP checking (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">22</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Target host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remote execution</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Run jobs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">22, 16514</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SSH SSH/TLS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute Resource</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Satellite originated communications, for compute resources in libvirt</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">53</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP and UDP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DNS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DNS Servers on the Internet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DNS Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Resolve DNS records (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">53</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP and UDP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DNS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DNS Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Capsule DNS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validation of DNS conflicts (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">53</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP and UDP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DNS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DNS Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Orchestration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validation of DNS conflicts</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">68</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UDP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DHCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dynamic IP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DHCP (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remote repository</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Content Sync</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remote repositories</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">389, 636</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LDAP, LDAPS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">External LDAP Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LDAP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LDAP authentication, necessary only if external authentication is enabled.
The port can be customized when <code>LDAPAuthSource</code> is defined</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Satellite</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Capsule</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Capsule</p>
<p class="tableblock">Configuration management</p>
<p class="tableblock">Template retrieval</p>
<p class="tableblock">OpenSCAP</p>
<p class="tableblock">Remote Execution result upload</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Amazon EC2, Azure, Google GCE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute resources</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Virtual machine interactions (query/create/destroy) (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Capsule</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Content mirroring</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initiation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Infoblox DHCP Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DHCP management</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When using Infoblox for DHCP, management of the DHCP leases (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">623</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Power management</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BMC On/Off/Cycle/Status</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenStack Compute Resource</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute resources</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Virtual machine interactions (query/create/destroy) (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5900&#8202;&#8211;&#8202;5930</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SSL/TLS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hypervisor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">noVNC console</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Launch noVNC console</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7911</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DHCP, OMAPI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DHCP Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DHCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The DHCP target is configured using <code>--foreman-proxy-dhcp-server</code> and defaults to localhost</p>
<p class="tableblock">ISC and <code>remote_isc</code> use a configurable port that defaults to 7911 and uses OMAPI</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Discovery</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Capsule sends reboot command to the discovered host (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9090</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Capsule</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Capsule API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Management of Capsules</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="Enabling_Connections_from_a_Client_to_Server_satellite"><a class="anchor" href="#Enabling_Connections_from_a_Client_to_Server_satellite"></a>1.7. Enabling connections from a client to Satellite&#160;Server</h3>
<div class="paragraph">
<p>Capsules and Content Hosts that are clients of a Satellite&#160;Server&#8217;s internal Capsule require access through Satellite&#8217;s host-based firewall and any network-based firewalls.</p>
</div>
<div class="paragraph">
<p>Use this procedure to configure the host-based firewall on the system that Satellite is installed on, to enable incoming connections from Clients, and to make the configuration persistent across system reboots.
For more information on the ports used, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.15/html-single/installing_satellite_server_in_a_connected_network_environment/index#satellite-port-and-firewall-requirements_satellite">Port and firewall requirements</a> in <em>Installing Satellite&#160;Server in a connected network environment</em>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Open the ports for clients on Satellite&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd \
--add-port="8000/tcp" \
--add-port="9090/tcp"</pre>
</div>
</div>
</li>
<li>
<p>Allow access to services on Satellite&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd \
--add-service=dns \
--add-service=dhcp \
--add-service=tftp \
--add-service=http \
--add-service=https \
--add-service=puppetmaster</pre>
</div>
</div>
</li>
<li>
<p>Make the changes persistent:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd --runtime-to-permanent</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>Enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd --list-all</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_firewalls_and_packet_filters/using-and-configuring-firewalld_firewall-packet-filters">Using and configuring firewalld</a> in <em>Red&#160;Hat Enterprise Linux 9 guide</em> or <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/securing_networks/using-and-configuring-firewalld_securing-networks">Using and configuring firewalld</a> in <em>Red&#160;Hat Enterprise Linux 8 guide</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="verifying-dns-resolution_satellite"><a class="anchor" href="#verifying-dns-resolution_satellite"></a>1.8. Verifying DNS resolution</h3>
<div class="paragraph">
<p>Verify the full forward and reverse DNS resolution using a fully-qualified domain name to prevent issues while installing Satellite.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Ensure that the host name and local host resolve correctly:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ping -c1 localhost
# ping -c1 `hostname -f` # my_system.domain.com</pre>
</div>
</div>
<div class="paragraph">
<p>Successful name resolution results in output similar to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ping -c1 localhost
PING localhost (127.0.0.1) 56(84) bytes of data.
64 bytes from localhost (127.0.0.1): icmp_seq=1 ttl=64 time=0.043 ms

--- localhost ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.043/0.043/0.043/0.000 ms

# ping -c1 `hostname -f`
PING hostname.gateway (XX.XX.XX.XX) 56(84) bytes of data.
64 bytes from hostname.gateway (XX.XX.XX.XX): icmp_seq=1 ttl=64 time=0.019 ms

--- localhost.gateway ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.019/0.019/0.019/0.000 ms</pre>
</div>
</div>
</li>
<li>
<p>To avoid discrepancies with static and transient host names, set all the host names on the system by entering the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hostnamectl set-hostname <em>name</em></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_networking/assembly_changing-a-hostname_configuring-and-managing-networking#proc_changing-a-hostname-using-hostnamectl_assembly_changing-a-hostname">Changing a hostname using hostnamectl</a> in the <em>Red&#160;Hat Enterprise Linux Configuring and managing networking</em> guide.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>Name resolution is critical to the operation of Satellite.
If Satellite cannot properly resolve its fully qualified domain name, tasks such as content management, subscription management, and provisioning will fail.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="tuning-with-predefined-profiles_satellite"><a class="anchor" href="#tuning-with-predefined-profiles_satellite"></a>1.9. Tuning Satellite&#160;Server with predefined profiles</h3>
<div class="paragraph">
<p>If your Satellite deployment includes more than 5000 hosts, you can use predefined tuning profiles to improve performance of Satellite.</p>
</div>
<div class="paragraph">
<p>Note that you cannot use tuning profiles on Capsules.</p>
</div>
<div class="paragraph">
<p>You can choose one of the profiles depending on the number of hosts your Satellite manages and available hardware resources.</p>
</div>
<div class="paragraph">
<p>The tuning profiles are available in the <code>/usr/share/foreman-installer/config/foreman.hiera/tuning/sizes</code> directory.</p>
</div>
<div class="paragraph">
<p>When you run the <code>satellite-installer</code> command with the <code>--tuning</code> option, deployment configuration settings are applied to Satellite in the following order:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The default tuning profile defined in the <code>/usr/share/foreman-installer/config/foreman.hiera/tuning/common.yaml</code> file</p>
</li>
<li>
<p>The tuning profile that you want to apply to your deployment and is defined in the <code>/usr/share/foreman-installer/config/foreman.hiera/tuning/sizes/</code> directory</p>
</li>
<li>
<p>Optional: If you have configured a <code>/etc/foreman-installer/custom-hiera.yaml</code> file, Satellite applies these configuration settings.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Note that the configuration settings that are defined in the <code>/etc/foreman-installer/custom-hiera.yaml</code> file override the configuration settings that are defined in the tuning profiles.</p>
</div>
<div class="paragraph">
<p>Therefore, before applying a tuning profile, you must compare the configuration settings that are defined in the default tuning profile in <code>/usr/share/foreman-installer/config/foreman.hiera/tuning/common.yaml</code>, the tuning profile that you want to apply and your <code>/etc/foreman-installer/custom-hiera.yaml</code> file, and remove any duplicated configuration from the <code>/etc/foreman-installer/custom-hiera.yaml</code> file.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">default</dt>
<dd>
<p>Number of hosts: 0&#8202;&#8211;&#8202;5000</p>
<div class="paragraph">
<p>RAM: 20G</p>
</div>
<div class="paragraph">
<p>Number of CPU cores: 4</p>
</div>
</dd>
<dt class="hdlist1">medium</dt>
<dd>
<p>Number of hosts: 5001&#8202;&#8211;&#8202;10000</p>
<div class="paragraph">
<p>RAM: 32G</p>
</div>
<div class="paragraph">
<p>Number of CPU cores: 8</p>
</div>
</dd>
<dt class="hdlist1">large</dt>
<dd>
<p>Number of hosts: 10001&#8202;&#8211;&#8202;20000</p>
<div class="paragraph">
<p>RAM: 64G</p>
</div>
<div class="paragraph">
<p>Number of CPU cores: 16</p>
</div>
</dd>
<dt class="hdlist1">extra-large</dt>
<dd>
<p>Number of hosts: 20001&#8202;&#8211;&#8202;60000</p>
<div class="paragraph">
<p>RAM: 128G</p>
</div>
<div class="paragraph">
<p>Number of CPU cores: 32</p>
</div>
</dd>
<dt class="hdlist1">extra-extra-large</dt>
<dd>
<p>Number of hosts: 60000+</p>
<div class="paragraph">
<p>RAM: 256G</p>
</div>
<div class="paragraph">
<p>Number of CPU cores: 48+</p>
</div>
</dd>
</dl>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Optional: If you have configured the <code>custom-hiera.yaml</code> file on Satellite&#160;Server, back up the <code>/etc/foreman-installer/custom-hiera.yaml</code> file to <code>custom-hiera.original</code>.
You can use the backup file to restore the <code>/etc/foreman-installer/custom-hiera.yaml</code> file to its original state if it becomes corrupted:</p>
<div class="listingblock">
<div class="content">
<pre># cp /etc/foreman-installer/custom-hiera.yaml \
/etc/foreman-installer/custom-hiera.original</pre>
</div>
</div>
</li>
<li>
<p>Optional: If you have configured the <code>custom-hiera.yaml</code> file on Satellite&#160;Server, review the definitions of the default tuning profile in <code>/usr/share/foreman-installer/config/foreman.hiera/tuning/common.yaml</code> and the tuning profile that you want to apply in <code>/usr/share/foreman-installer/config/foreman.hiera/tuning/sizes/</code>.
Compare the configuration entries against the entries in your <code>/etc/foreman-installer/custom-hiera.yaml</code> file and remove any duplicated configuration settings in your <code>/etc/foreman-installer/custom-hiera.yaml</code> file.</p>
</li>
<li>
<p>Enter the <code>satellite-installer</code> command with the <code>--tuning</code> option for the profile that you want to apply.
For example, to apply the medium tuning profile settings, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer --tuning medium</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Installing_Server_Disconnected_satellite"><a class="anchor" href="#Installing_Server_Disconnected_satellite"></a>2. Installing Satellite&#160;Server</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When the intended host for Satellite&#160;Server is in a disconnected environment, you can install Satellite&#160;Server by using an external computer to download an ISO image of the packages, and copying the packages to the system you want to install Satellite&#160;Server on.
This method is not recommended for any other situation as ISO images might not contain the latest updates, bug fixes, and functionality.</p>
</div>
<div class="paragraph">
<p>Use the following procedures to install Satellite&#160;Server, perform the initial configuration, and import subscription manifests.</p>
</div>
<div class="paragraph">
<p>Before you continue, consider which manifests are relevant for your environment.
For more information on manifests, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.15/html-single/managing_content/index#Managing_Red_Hat_Subscriptions_content-management">Managing Red Hat Subscriptions</a> in <em>Managing content</em>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>You cannot register Satellite&#160;Server to itself.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="downloading-the-binary-dvd-images_satellite"><a class="anchor" href="#downloading-the-binary-dvd-images_satellite"></a>2.1. Downloading the binary DVD images</h3>
<div class="paragraph">
<p>Use this procedure to download the ISO images for Red&#160;Hat Enterprise Linux and Red&#160;Hat Satellite.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Go to <a href="https://access.redhat.com/">Red Hat Customer Portal</a> and log in.</p>
</li>
<li>
<p>Click <strong>DOWNLOADS</strong>.</p>
</li>
<li>
<p>Select <strong>Red&#160;Hat Enterprise Linux</strong>.</p>
</li>
<li>
<p>Click <strong>All Red&#160;Hat Enterprise Linux Downloads</strong>.</p>
</li>
<li>
<p>Ensure that you have the correct product and version for your environment.</p>
<div class="ulist">
<ul>
<li>
<p><strong>Product Variant</strong> is set to <strong>Red&#160;Hat Enterprise Linux for x86_64</strong>.</p>
</li>
<li>
<p><strong>Version</strong>  is set to the latest minor version of the product you plan to use as the base operating system.</p>
</li>
<li>
<p><strong>Architecture</strong> is set to the 64 bit version.</p>
</li>
</ul>
</div>
</li>
<li>
<p>On the <strong>Product Software</strong> tab, download the Binary DVD image for the latest <strong>Red&#160;Hat Enterprise Linux for x86_64</strong> version.</p>
</li>
<li>
<p>Click <strong>DOWNLOADS</strong> and select <strong>Red&#160;Hat Satellite</strong>.</p>
</li>
<li>
<p>Ensure that you have the correct product and version for your environment.</p>
<div class="ulist">
<ul>
<li>
<p><strong>Product Variant</strong> is set to <strong>Red&#160;Hat Satellite</strong>.</p>
</li>
<li>
<p><strong>Version</strong>  is set to the latest minor version of the product you plan to use.</p>
</li>
</ul>
</div>
</li>
<li>
<p>On the <strong>Product Software</strong> tab, download the Binary DVD image for the latest Red&#160;Hat Satellite version.</p>
</li>
<li>
<p>Copy the ISO files to <code>/var/tmp</code> on the Satellite base operating system or other accessible storage device.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># scp localfile username@hostname:remotefile</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="configuring-the-base-operating-system-with-offline-repositories_satellite"><a class="anchor" href="#configuring-the-base-operating-system-with-offline-repositories_satellite"></a>2.2. Configuring the base operating system with offline repositories</h3>
<div class="paragraph">
<p>Use this procedure to configure offline repositories for Red&#160;Hat Enterprise Linux 9 or Red&#160;Hat Enterprise Linux 8, and Red&#160;Hat Satellite ISO images.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create a directory to serve as the mount point for the ISO file corresponding to the version of the base operating system.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir /media/rhel</pre>
</div>
</div>
</li>
<li>
<p>Mount the ISO image for Red&#160;Hat Enterprise Linux to the mount point.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mount -o loop <em>rhel-DVD</em>.iso /media/rhel</pre>
</div>
</div>
</li>
<li>
<p>To copy the ISO file&#8217;s repository data file and change permissions, enter:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># cp /media/rhel/media.repo /etc/yum.repos.d/rhel.repo
# chmod u+w /etc/yum.repos.d/rhel.repo</pre>
</div>
</div>
</li>
<li>
<p>Edit the repository data file and add the <code>baseurl</code> directive.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">[RHEL-BaseOS]
name=Red Hat Enterprise Linux BaseOS
mediaid=None
metadata_expire=-1
gpgcheck=0
cost=500
baseurl=file:///media/rhel/BaseOS/

[RHEL-AppStream]
name=Red Hat Enterprise Linux Appstream
mediaid=None
metadata_expire=-1
gpgcheck=0
cost=500
baseurl=file:///media/rhel/AppStream/</pre>
</div>
</div>
</li>
<li>
<p>Verify that the repository has been configured.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># yum repolist</pre>
</div>
</div>
</li>
<li>
<p>Create a directory to serve as the mount point for the ISO file of Satellite&#160;Server.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir /media/sat6</pre>
</div>
</div>
</li>
<li>
<p>Mount the ISO image for Satellite&#160;Server to the mount point.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mount -o loop <em>sat6-DVD</em>.iso /media/sat6</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="using-fapolicyd-on-server_satellite"><a class="anchor" href="#using-fapolicyd-on-server_satellite"></a>2.3. Optional: Using fapolicyd on Satellite&#160;Server</h3>
<div class="paragraph">
<p>By enabling <code>fapolicyd</code> on your Satellite&#160;Server, you can provide an additional layer of security by monitoring and controlling access to files and directories.
The fapolicyd daemon uses the RPM database as a repository of trusted binaries and scripts.</p>
</div>
<div class="paragraph">
<p>You can turn on or off the fapolicyd on your Satellite&#160;Server or Capsule&#160;Server at any point.</p>
</div>
<div class="sect3">
<h4 id="installing-fapolicyd-on-server_satellite"><a class="anchor" href="#installing-fapolicyd-on-server_satellite"></a>2.3.1. Installing fapolicyd on Satellite&#160;Server</h4>
<div class="paragraph">
<p>You can install <code>fapolicyd</code> along with Satellite&#160;Server or can be installed on an existing Satellite&#160;Server.
If you are installing <code>fapolicyd</code> along with the new Satellite&#160;Server, the installation process will detect the fapolicyd in your Red&#160;Hat Enterprise Linux host and deploy the Satellite&#160;Server rules automatically.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure your host has access to the BaseOS repositories of Red&#160;Hat Enterprise Linux.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>For a new installation, install fapolicyd:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf install fapolicyd</pre>
</div>
</div>
</li>
<li>
<p>For an existing installation, install fapolicyd using satellite-maintain packages install:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-maintain packages install fapolicyd</pre>
</div>
</div>
</li>
<li>
<p>Start the <code>fapolicyd</code> service:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># systemctl enable --now fapolicyd</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>Verify that the <code>fapolicyd</code> service is running correctly:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># systemctl status fapolicyd</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">New Satellite&#160;Server or Capsule&#160;Server installations</div>
<p>In case of new Satellite&#160;Server or Capsule&#160;Server installation, follow the standard installation procedures after installing and enabling fapolicyd on your Red&#160;Hat Enterprise Linux host.</p>
</div>
<div class="paragraph">
<div class="title">Additional resources</div>
<p>For more information on fapolicyd, see <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/security_hardening/assembly_blocking-and-allowing-applications-using-fapolicyd_security-hardening">Blocking and allowing applications using fapolicyd</a> in <em>Red&#160;Hat Enterprise Linux 9 guide</em> or <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/security_hardening/assembly_blocking-and-allowing-applications-using-fapolicyd_security-hardening">Blocking and allowing applications using fapolicyd</a> in <em>Red&#160;Hat Enterprise Linux 8 guide</em>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="installing-from-the-offline-repositories_satellite"><a class="anchor" href="#installing-from-the-offline-repositories_satellite"></a>2.4. Installing the Satellite packages from the offline repositories</h3>
<div class="paragraph">
<p>Use this procedure to install the Satellite packages from the offline repositories.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Ensure the ISO images for Red&#160;Hat Enterprise Linux Server and Red&#160;Hat Satellite are mounted:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># findmnt -t iso9660</pre>
</div>
</div>
</li>
<li>
<p>Import the Red Hat GPG keys:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release</pre>
</div>
</div>
</li>
<li>
<p>Ensure the base operating system is up to date with the Binary DVD image:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf upgrade</pre>
</div>
</div>
</li>
<li>
<p>Change to the directory where the Satellite ISO is mounted:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># cd /media/sat6/</pre>
</div>
</div>
</li>
<li>
<p>Run the installation script in the mounted directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ./install_packages</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The script contains a command that enables the <code>satellite:el8</code> module.
Enablement of the module <code>satellite:el8</code> warns about a conflict with <code>postgresql:10</code> and <code>ruby:2.5</code> as these modules are set to the default module versions on Red&#160;Hat Enterprise Linux 8.
The module <code>satellite:el8</code> has a dependency for the modules <code>postgresql:12</code> and <code>ruby:2.7</code> that will be enabled with the <code>satellite:el8</code> module.
These warnings do not cause installation process failure, hence can be ignored safely.
For more information about modules and lifecycle streams on Red&#160;Hat Enterprise Linux 8, see <a href="https://access.redhat.com/support/policy/updates/rhel-app-streams-life-cycle">Red&#160;Hat Enterprise Linux Application Streams Lifecycle</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you have successfully installed the Satellite packages, the following message is displayed: <code>Install is complete. Please run satellite-installer --scenario satellite</code>.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="resolving-package-dependency-errors_satellite"><a class="anchor" href="#resolving-package-dependency-errors_satellite"></a>2.5. Resolving package dependency errors</h3>
<div class="paragraph">
<p>If there are package dependency errors during installation of Satellite&#160;Server packages, you can resolve the errors by downloading and installing packages from Red Hat Customer Portal.
For more information about resolving dependency errors, see the KCS solution <a href="https://access.redhat.com/solutions/262323">How can I use the yum output to solve yum dependency errors?</a>.</p>
</div>
<div class="paragraph">
<p>If you have successfully installed the Satellite packages, skip this procedure.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Go to the <a href="https://access.redhat.com/">Red Hat Customer Portal</a> and log in.</p>
</li>
<li>
<p>Click <strong>DOWNLOADS</strong>.</p>
</li>
<li>
<p>Click the Product that contains the package that you want to download.</p>
</li>
<li>
<p>Ensure that you have the correct <strong>Product Variant</strong>, <strong>Version</strong>, and <strong>Architecture</strong> for your environment.</p>
</li>
<li>
<p>Click the <strong>Packages</strong> tab.</p>
</li>
<li>
<p>In the <strong>Search</strong> field, enter the name of the package.</p>
</li>
<li>
<p>Click the package.</p>
</li>
<li>
<p>From the <strong>Version</strong> list, select the version of the package.</p>
</li>
<li>
<p>At the bottom of the page, click <strong>Download Now</strong>.</p>
</li>
<li>
<p>Copy the package to the Satellite base operating system.</p>
</li>
<li>
<p>On Satellite&#160;Server, change to the directory where the package is located:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># cd <em>/path-to-package/</em></pre>
</div>
</div>
</li>
<li>
<p>Install the package locally:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf install <em>package_name</em></pre>
</div>
</div>
</li>
<li>
<p>Change to the directory where the Satellite ISO is mounted:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># cd /media/sat6/</pre>
</div>
</div>
</li>
<li>
<p>Verify that you have resolved the package dependency errors by installing Satellite&#160;Server packages.
If there are further package dependency errors, repeat this procedure.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ./install_packages</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The script contains a command that enables the <code>satellite:el8</code> module.
Enablement of the module <code>satellite:el8</code> warns about a conflict with <code>postgresql:10</code> and <code>ruby:2.5</code> as these modules are set to the default module versions on Red&#160;Hat Enterprise Linux 8.
The module <code>satellite:el8</code> has a dependency for the modules <code>postgresql:12</code> and <code>ruby:2.7</code> that will be enabled with the <code>satellite:el8</code> module.
These warnings do not cause installation process failure, hence can be ignored safely.
For more information about modules and lifecycle streams on Red&#160;Hat Enterprise Linux 8, see <a href="https://access.redhat.com/support/policy/updates/rhel-app-streams-life-cycle">Red&#160;Hat Enterprise Linux Application Streams Lifecycle</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you have successfully installed the Satellite packages, the following message is displayed: <code>Install is complete. Please run satellite-installer --scenario satellite</code>.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="configuring-server_satellite"><a class="anchor" href="#configuring-server_satellite"></a>2.6. Configuring Satellite&#160;Server</h3>
<div class="paragraph">
<p>Install Satellite&#160;Server using the <code>satellite-installer</code> installation script.
Choose from one of the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#Configuring_Installation_satellite">Configuring Satellite installation</a>.
This method is performed by running the installation script with one or more command options.
The command options override the corresponding default initial configuration options and are recorded in the Satellite answer file.
You can run the script as often as needed to configure any necessary options.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="Configuring_Installation_satellite"><a class="anchor" href="#Configuring_Installation_satellite"></a>2.6.1. Configuring Satellite installation</h4>
<div class="paragraph">
<p>This initial configuration procedure creates an organization, location, user name, and password.
After the initial configuration, you can create additional organizations and locations if required.
The initial configuration also installs PostgreSQL databases on the same server.</p>
</div>
<div class="paragraph">
<p>The installation process can take tens of minutes to complete.
If you are connecting remotely to the system, use a utility such as <code>tmux</code> that allows suspending and reattaching a communication session so that you can check the installation progress in case you become disconnected from the remote system.
If you lose connection to the shell where the installation command is running, see the log at <code>/var/log/foreman-installer/satellite.log</code> to determine if the process completed successfully.</p>
</div>
<div class="ulist">
<div class="title">Considerations</div>
<ul>
<li>
<p>Use the <code>satellite-installer --scenario satellite --help</code> command to display the most commonly used options and any default values.</p>
</li>
<li>
<p>Use the <code>satellite-installer --scenario satellite --full-help</code> command to display advanced options.</p>
</li>
<li>
<p>Specify a meaningful value for the option: <code>--foreman-initial-organization</code>.
This can be your company name.
An internal label that matches the value is also created and cannot be changed afterwards.
If you do not specify a value, an organization called <strong>Default Organization</strong> with the label <strong>Default_Organization</strong> is created.
You can rename the organization name but not the label.</p>
</li>
<li>
<p>By default, all configuration files configured by the installer are managed.
When <code>satellite-installer</code> runs, it overwrites any manual changes to the managed files with the intended values.
This means that running the installer on a broken system should restore it to working order, regardless of changes made.
For more information on how to apply custom configuration on other services, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.15/html-single/installing_satellite_server_in_a_connected_network_environment/index#applying-custom-configuration_satellite">Applying Custom Configuration to Satellite</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Enter the following command with any additional options that you want to use:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer --scenario satellite \
--foreman-initial-organization "<em>My_Organization</em>" \
--foreman-initial-location "<em>My_Location</em>" \
--foreman-initial-admin-username <em>admin_user_name</em> \
--foreman-initial-admin-password <em>admin_password</em></pre>
</div>
</div>
<div class="paragraph">
<p>The script displays its progress and writes logs to <code>/var/log/foreman-installer/satellite.log</code>.</p>
</div>
</li>
<li>
<p>Unmount the ISO images:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># umount /media/sat6
# umount /media/rhel</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="disabling-subscription-connection_satellite"><a class="anchor" href="#disabling-subscription-connection_satellite"></a>2.7. Disabling subscription connection</h3>
<div class="paragraph">
<p>Disable subscription connection on disconnected Satellite&#160;Server to avoid connecting to the Red&#160;Hat Portal.
This will also prevent you from refreshing the manifest and updating upstream entitlements.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Administer</strong> &gt; <strong>Settings</strong>.</p>
</li>
<li>
<p>Click the <strong>Content</strong> tab.</p>
</li>
<li>
<p>Set the <code>Subscription Connection Enabled</code> value to <code>No</code>.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Enter the following command on Satellite&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer settings set --name subscription_connection_enabled --value false</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Importing_a_Red_Hat_Subscription_Manifest_into_Server_satellite"><a class="anchor" href="#Importing_a_Red_Hat_Subscription_Manifest_into_Server_satellite"></a>2.8. Importing a Red&#160;Hat subscription manifest into Satellite&#160;Server</h3>
<div class="paragraph">
<p>Use the following procedure to import a Red&#160;Hat subscription manifest into Satellite&#160;Server.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Simple Content Access (SCA) is set on the organization, not the manifest.
Importing a manifest does not change your organization&#8217;s Simple Content Access status.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure you have a Red&#160;Hat subscription manifest exported from the Red Hat Customer Portal.
You will use the same manifest in <a href="#configuring-server-to-synchronize-content-over-a-network_satellite">Configuring Satellite&#160;Server to synchronize content over a network</a>.
For more information, see <a href="https://docs.redhat.com/en/documentation/subscription_central/1-latest/html-single/creating_and_managing_manifests_for_a_disconnected_satellite_server/index">Creating and managing manifests for a disconnected Satellite Server</a> in <em>Subscription Central</em>.</p>
</li>
<li>
<p>Ensure that you disable subscription connection on your Satellite&#160;Server.
For more information, see <a href="#disabling-subscription-connection_satellite">Disabling subscription connection</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, ensure the context is set to the organization you want to use.</p>
</li>
<li>
<p>In the Satellite web UI, navigate to <strong>Content</strong> &gt; <strong>Subscriptions</strong> and click <strong>Manage Manifest</strong>.</p>
</li>
<li>
<p>In the <strong>Manage Manifest</strong> window, click <strong>Choose File</strong>.</p>
</li>
<li>
<p>Navigate to the location that contains the Red&#160;Hat subscription manifest file, then click <strong>Open</strong>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Copy the Red&#160;Hat subscription manifest file from your local machine to Satellite&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre>$ scp ~/<em>manifest_file</em>.zip root@<em>satellite.example.com</em>:~/.</pre>
</div>
</div>
</li>
<li>
<p>Log in to Satellite&#160;Server as the <code>root</code> user and import the Red&#160;Hat subscription manifest file:</p>
<div class="listingblock">
<div class="content">
<pre># hammer subscription upload \
--file ~/<em>manifest_file</em>.zip \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can now enable repositories and import Red Hat content.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.15/html-single/managing_content/index#Importing_Content_content-management">Importing Content</a> in <em>Managing content</em>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="performing-additional-configuration"><a class="anchor" href="#performing-additional-configuration"></a>3. Performing Additional Configuration on Satellite&#160;Server</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="configuring-satellite-server-to-consume-content-from-a-custom-cdn_satellite"><a class="anchor" href="#configuring-satellite-server-to-consume-content-from-a-custom-cdn_satellite"></a>3.1. Configuring Satellite&#160;Server to consume content from a custom CDN</h3>
<div class="paragraph">
<p>If you have an internal Content Delivery Network (CDN) or serve content on an accessible web server, you can configure your Satellite&#160;Server to consume Red&#160;Hat repositories from this CDN server instead of the Red&#160;Hat CDN.
A CDN server can be any web server that mirrors repositories in the same directory structure as the Red&#160;Hat CDN.</p>
</div>
<div class="paragraph">
<p>You can configure the source of content for each organization.
Satellite recognizes automatically which Red&#160;Hat repositories from the subscription manifest in your organization are available on your CDN server.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have a CDN server that provides Red&#160;Hat content and is accessible by Satellite&#160;Server.</p>
</li>
<li>
<p>If your CDN server uses HTTPS, ensure you have uploaded the SSL certificate into Satellite.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.15/html-single/managing_content/index#Importing_Custom_SSL_Certificates_content-management">Importing Custom SSL Certificates</a> in <em>Managing content</em>.</p>
</li>
<li>
<p>You have uploaded a manifest to your organization.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Content</strong> &gt; <strong>Subscriptions</strong>.</p>
</li>
<li>
<p>Click <strong>Manage Manifest</strong>.</p>
</li>
<li>
<p>Select the <strong>CDN Configuration</strong> tab.</p>
</li>
<li>
<p>Select the <strong>Custom CDN</strong> tab.</p>
</li>
<li>
<p>In the <strong>URL</strong> field, enter the URL of your CDN server from which you want Satellite&#160;Server to consume Red&#160;Hat repositories.</p>
</li>
<li>
<p>Optional: In the <strong>SSL CA Content Credential</strong>, select the SSL certificate of the CDN server.</p>
</li>
<li>
<p>Click <strong>Update</strong>.</p>
</li>
<li>
<p>You can now enable Red&#160;Hat repositories consumed from your internal CDN server.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Connect to your Satellite&#160;Server using SSH.</p>
</li>
<li>
<p>Set CDN configuration to your custom CDN server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer organization configure-cdn --name="<em>My_Organization</em>" \
--type=custom_cdn \
--url https://<em>my-cdn.example.com</em> \
--ssl-ca-credential-id "<em>My_CDN_CA_Cert_ID</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.15/html-single/overview_concepts_and_deployment_considerations/index#chap-Architecture_Guide-Content_Delivery_Network_Structure">Content Delivery Network Structure</a> in <em>Overview, concepts, and deployment considerations</em></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Configuring-ISS_satellite"><a class="anchor" href="#Configuring-ISS_satellite"></a>3.2. Configuring Inter-Satellite Synchronization (ISS)</h3>
<div class="paragraph">
<p>Configure Inter-Satellite Synchronization on your disconnected Satellite&#160;Server to provide content in your disconnected network.</p>
</div>
<div class="sect3">
<h4 id="iss-scenarios_satellite"><a class="anchor" href="#iss-scenarios_satellite"></a>3.2.1. Inter-Satellite Synchronization scenarios</h4>
<div class="paragraph">
<p>Red&#160;Hat Satellite uses Inter-Satellite Synchronization (ISS) to synchronize content between two Satellite&#160;Servers including those that are air gapped.</p>
</div>
<div class="paragraph">
<p>You can use ISS in cases such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If you want to copy some but not all content from your Satellite&#160;Server to other Satellite&#160;Servers.
For example, you have content views that your IT department consumes from Satellite&#160;Server, and you want to copy content from those content views to other Satellite&#160;Servers.</p>
</li>
<li>
<p>If you want to copy all Library content from your Satellite&#160;Server to other Satellite&#160;Servers.
For example, you have Products and repositories that your IT department consumes from Satellite&#160;Server in the Library, and you want to copy all Products and repositories in that organization to other Satellite&#160;Servers.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>You cannot use ISS to synchronize content from Satellite&#160;Server to Capsule&#160;Server.
Capsule&#160;Server supports synchronization natively.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.15/html-single/overview_concepts_and_deployment_considerations/index#chap-Documentation-Architecture_Guide-Capsule_Server_Overview">Capsule&#160;Server Overview</a> in <em>Overview, concepts, and deployment considerations</em>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There are different ways of using ISS.
The way you can use depends on your multi-server setup that can fall to one of the following scenarios.</p>
</div>
<div class="sect4">
<h5 id="_iss_network_sync_in_a_disconnected_scenario"><a class="anchor" href="#_iss_network_sync_in_a_disconnected_scenario"></a>ISS network sync in a disconnected scenario</h5>
<div class="paragraph">
<p>In a disconnected scenario, there is the following setup:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The upstream Satellite&#160;Server is connected to the Internet.
This server consumes content from the Red Hat Content Delivery Network (CDN) or custom sources.</p>
</li>
<li>
<p>The downstream Satellite&#160;Server is completely isolated from all external networks.</p>
</li>
<li>
<p>The downstream Satellite&#160;Server can communicate with a connected upstream Satellite&#160;Server over an internal network.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/common/iss-disconnected-satellite.png" alt="Satellite ISS disconnected scenario">
</div>
<div class="title">Figure 1. Satellite ISS disconnected scenario</div>
</div>
<div class="paragraph">
<p>You can configure your downstream Satellite&#160;Server to synchronize content from the upstream Satellite&#160;Server over the network.</p>
</div>
</div>
<div class="sect4">
<h5 id="_iss_export_sync_in_an_air_gapped_scenario"><a class="anchor" href="#_iss_export_sync_in_an_air_gapped_scenario"></a>ISS export sync in an air-gapped scenario</h5>
<div class="paragraph">
<p>In an air-gapped scenario, there is the following setup:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The upstream Satellite&#160;Server is connected to the Internet.
This server consumes content from the Red Hat CDN or custom sources.</p>
</li>
<li>
<p>The downstream Satellite&#160;Server is completely isolated from all external networks.</p>
</li>
<li>
<p>The downstream Satellite&#160;Server does not have a network connection to a connected upstream Satellite&#160;Server.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/common/iss-airgapped-satellite.png" alt="Satellite ISS air-gapped scenario">
</div>
<div class="title">Figure 2. Satellite ISS air-gapped scenario</div>
</div>
<div class="paragraph">
<p>The only way for an air-gapped downstream Satellite&#160;Server to receive content updates is by exporting payload from the upstream Satellite&#160;Server, bringing it physically to the downstream Satellite&#160;Server, and importing the payload.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.15/html-single/managing_content/index#Synchronizing_Content_Between_Servers_content-management">Synchronizing Content Between Satellite&#160;Servers</a> in <em>Managing content</em>.</p>
</div>
<div class="paragraph">
<p>You can configure your downstream Satellite&#160;Server to synchronize content by using exports.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="configuring-projectserver-to-synchronize-content-by-using-exports_satellite"><a class="anchor" href="#configuring-projectserver-to-synchronize-content-by-using-exports_satellite"></a>3.2.2. Configuring Satellite&#160;Server to synchronize content by using exports</h4>
<div class="paragraph">
<p>If you deployed your downstream Satellite&#160;Server as air gapped, configure your Satellite&#160;Server as such to avoid attempts to consume content from a network.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Content</strong> &gt; <strong>Subscriptions</strong>.</p>
</li>
<li>
<p>Click <strong>Manage Manifest</strong>.</p>
</li>
<li>
<p>Switch to the <strong>CDN Configuration</strong> tab.</p>
</li>
<li>
<p>Select the <strong>Export Sync</strong> tab.</p>
</li>
<li>
<p>Click <strong>Update</strong>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Log in to your Satellite&#160;Server by using SSH.</p>
</li>
<li>
<p>Set CDN configuration to sync by using exports:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer organization configure-cdn --name="<em>My_Organization</em>" --type=export_sync</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.15/html-single/managing_content/index#content-synchronization-by-using-export-and-import_content-management">Content synchronization by using export and import</a> in <em>Managing content</em>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="configuring-server-to-synchronize-content-over-a-network_satellite"><a class="anchor" href="#configuring-server-to-synchronize-content-over-a-network_satellite"></a>3.2.3. Configuring Satellite&#160;Server to synchronize content over a network</h4>
<div class="paragraph">
<p>Configure a downstream Satellite&#160;Server to synchronize repositories from a connected upstream Satellite&#160;Server over HTTPS.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>A network connection exists between the upstream Satellite&#160;Server and the downstream Satellite&#160;Server.</p>
</li>
<li>
<p>You imported the same subscription manifest on both the upstream and downstream Satellite&#160;Server.
For more information, see <a href="#Importing_a_Red_Hat_Subscription_Manifest_into_Server_satellite">Importing a Red&#160;Hat subscription manifest into Satellite&#160;Server</a>.</p>
</li>
<li>
<p>On the upstream Satellite&#160;Server, you enabled the required repositories for the organization.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.15/html-single/managing_content/index#Enabling_Red_Hat_Repositories_content-management">Enabling Red Hat Repositories</a> in <em>Managing content</em>.</p>
</li>
<li>
<p>The upstream user is an admin or has the following permissions:</p>
<div class="ulist">
<ul>
<li>
<p><code>view_organizations</code></p>
</li>
<li>
<p><code>view_products</code></p>
</li>
<li>
<p><code>export_content</code></p>
</li>
<li>
<p><code>view_lifecycle_environments</code></p>
</li>
<li>
<p><code>view_content_views</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>On the downstream Satellite&#160;Server, you have imported the SSL certificate of the upstream Satellite&#160;Server using the contents of <code>http://<em>upstream-satellite.example.com</em>/pub/katello-server-ca.crt</code>.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.15/html-single/managing_content/index#Importing_Custom_SSL_Certificates_content-management">Importing SSL Certificates</a> in <em>Managing content</em>.</p>
</li>
<li>
<p>The downstream user is an admin or has the permissions to create product repositories and organizations.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Navigate to <strong>Content</strong> &gt; <strong>Subscriptions</strong>.</p>
</li>
<li>
<p>Click <strong>Manage Manifest</strong>.</p>
</li>
<li>
<p>Navigate to the <strong>CDN Configuration</strong> tab.</p>
</li>
<li>
<p>Select the <strong>Network Sync</strong> tab.</p>
</li>
<li>
<p>In the <strong>URL</strong> field, enter the address of the upstream Satellite&#160;Server.</p>
</li>
<li>
<p>In the <strong>Username</strong>, enter your username for upstream login.</p>
</li>
<li>
<p>In the <strong>Password</strong>, enter your password or personal access token for upstream login.</p>
</li>
<li>
<p>In the <strong>Organization label</strong> field, enter the label of the upstream organization.</p>
</li>
<li>
<p>Optional: In the <strong>Lifecycle Environment Label</strong> field, enter the label of the upstream lifecycle environment.
Default is <code>Library</code>.</p>
</li>
<li>
<p>Optional: In the <strong>Content view label</strong> field, enter the label of the upstream content view.
Default is <code>Default_Organization_View</code>.</p>
</li>
<li>
<p>From the <strong>SSL CA Content Credential</strong> menu, select a CA certificate used by the upstream Satellite&#160;Server.</p>
</li>
<li>
<p>Click <strong>Update</strong>.</p>
</li>
<li>
<p>In the Satellite web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Select the product that contains the repositories that you want to synchronize.</p>
</li>
<li>
<p>From the <strong>Select Action</strong> menu, select <strong>Sync Now</strong> to synchronize all repositories within the product.</p>
<div class="paragraph">
<p>You can also create a synchronization plan to ensure updates on a regular basis.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.15/html-single/managing_content/index#Creating_a_Sync_Plan_content-management">Creating a Synchronization Plan</a> in <em>Managing content</em>.</p>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Connect to your downstream Satellite&#160;Server using SSH.</p>
</li>
<li>
<p>View information about the upstream CA certificate:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-credential show \
--name="<em>My_Upstream_CA_Cert</em>" \
--organization="<em>My_Downstream_Organization</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>Note the ID of the CA certificate for the next step.</p>
</div>
</li>
<li>
<p>Set CDN configuration to an upstream Satellite&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer organization configure-cdn --name="<em>My_Downstream_Organization</em>" \
--type=network_sync \
--url https://<em>upstream-satellite.example.com</em> \
--username <em>upstream_username</em> --password <em>upstream_password</em> \
--ssl-ca-credential-id "<em>My_Upstream_CA_Cert_ID" \
--upstream-organization-label="_My_Upstream_Organization</em>" \
[--upstream-lifecycle-environment-label="<em>My_Lifecycle_Environment</em>"] \
[--upstream-content-view-label="<em>My_Content_View</em>"]</pre>
</div>
</div>
<div class="paragraph">
<p>The default lifecycle environment label is <code>Library</code>.
The default content view label is <code>Default_Organization_View</code>.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuring-pull-based-transport-for-remote-execution_satellite"><a class="anchor" href="#configuring-pull-based-transport-for-remote-execution_satellite"></a>3.3. Configuring pull-based transport for remote execution</h3>
<div class="paragraph">
<p>By default, remote execution uses push-based SSH as the transport mechanism for the Script provider.
If your infrastructure prohibits outgoing connections from Satellite&#160;Server to hosts, you can use remote execution with pull-based transport instead, because the host initiates the connection to Satellite&#160;Server.
The use of pull-based transport is not limited to those infrastructures.</p>
</div>
<div class="paragraph">
<p>The pull-based transport comprises <code>pull-mqtt</code> mode on Capsules in combination with a pull client running on hosts.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>pull-mqtt</code> mode works only with the Script provider.
Ansible and other providers will continue to use their default transport settings.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Enable the pull-based transport on your Satellite&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer --foreman-proxy-plugin-remote-execution-script-mode=pull-mqtt</pre>
</div>
</div>
</li>
<li>
<p>Configure the firewall to allow the MQTT service on port 1883:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd --add-service=mqtt</pre>
</div>
</div>
</li>
<li>
<p>Make the changes persistent:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd --runtime-to-permanent</pre>
</div>
</div>
</li>
<li>
<p>In <code>pull-mqtt</code> mode, hosts subscribe for job notifications to either your Satellite&#160;Server or any Capsule&#160;Server through which they are registered.
Ensure that Satellite&#160;Server sends remote execution jobs to that same Satellite&#160;Server or Capsule&#160;Server:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Satellite web UI, navigate to <strong>Administer</strong> &gt; <strong>Settings</strong>.</p>
</li>
<li>
<p>On the <strong>Content</strong> tab, set the value of <strong>Prefer registered through Capsule for remote execution</strong> to <strong>Yes</strong>.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Next steps</div>
<ul>
<li>
<p>Configure your hosts for the pull-based transport.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.15/html-single/managing_hosts/index#transport-modes-for-remote-execution_managing-hosts">Transport modes for remote execution</a> in <em>Managing hosts</em>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="enabling-power-management-on-hosts_satellite"><a class="anchor" href="#enabling-power-management-on-hosts_satellite"></a>3.4. Enabling power management on hosts</h3>
<div class="paragraph">
<p>To perform power management tasks on hosts using the intelligent platform management interface (IPMI) or a similar protocol, you must enable the baseboard management controller (BMC) module on Satellite&#160;Server.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>All hosts must have a network interface of BMC type.
Satellite&#160;Server uses this NIC to pass the appropriate credentials to the host.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.15/html-single/managing_hosts/index#Adding_a_Baseboard_Management_Controller_Interface_managing-hosts">Adding a Baseboard Management Controller (BMC) Interface</a> in <em>Managing hosts</em>.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>To enable BMC, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer \
--foreman-proxy-bmc "true" \
--foreman-proxy-bmc-default-provider "freeipmi"</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="configuring-dns-dhcp-and-tftp_satellite"><a class="anchor" href="#configuring-dns-dhcp-and-tftp_satellite"></a>3.5. Configuring DNS, DHCP, and TFTP</h3>
<div class="paragraph">
<p>You can manage DNS, DHCP, and TFTP centrally within the Satellite environment, or you can manage them independently after disabling their maintenance on Satellite.
You can also run DNS, DHCP, and TFTP externally, outside of the Satellite environment.</p>
</div>
<div class="sect3">
<h4 id="configuring-dns-dhcp-and-tftp-on-productname_satellite"><a class="anchor" href="#configuring-dns-dhcp-and-tftp-on-productname_satellite"></a>3.5.1. Configuring DNS, DHCP, and TFTP on Satellite&#160;Server</h4>
<div class="paragraph">
<p>To configure the DNS, DHCP, and TFTP services on Satellite&#160;Server, use the <code>satellite-installer</code> command with the options appropriate for your environment.</p>
</div>
<div class="paragraph">
<p>Any changes to the settings require entering the <code>satellite-installer</code> command again.
You can enter the command multiple times and each time it updates all configuration files with the changed values.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure that the following information is available to you:</p>
<div class="ulist">
<ul>
<li>
<p>DHCP IP address ranges</p>
</li>
<li>
<p>DHCP gateway IP address</p>
</li>
<li>
<p>DHCP nameserver IP address</p>
</li>
<li>
<p>DNS information</p>
</li>
<li>
<p>TFTP server name</p>
</li>
</ul>
</div>
</li>
<li>
<p>Use the FQDN instead of the IP address where possible in case of network changes.</p>
</li>
<li>
<p>Contact your network administrator to ensure that you have the correct settings.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Enter the <code>satellite-installer</code> command with the options appropriate for your environment.
The following example shows configuring full provisioning services:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer \
--foreman-proxy-dns true \
--foreman-proxy-dns-managed true \
--foreman-proxy-dns-zone <em>example.com</em> \
--foreman-proxy-dns-reverse <em>2.0.192.in-addr.arpa</em> \
--foreman-proxy-dhcp true \
--foreman-proxy-dhcp-managed true \
--foreman-proxy-dhcp-range "<em>192.0.2.100</em> <em>192.0.2.150</em>" \
--foreman-proxy-dhcp-gateway <em>192.0.2.1</em> \
--foreman-proxy-dhcp-nameservers <em>192.0.2.2</em> \
--foreman-proxy-tftp true \
--foreman-proxy-tftp-managed true \
--foreman-proxy-tftp-servername <em>192.0.2.3</em></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can monitor the progress of the <code>satellite-installer</code> command displayed in your prompt.
You can view the logs in <code>/var/log/foreman-installer/satellite.log</code>.</p>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>For more information about the <code>satellite-installer</code> command, enter <code>satellite-installer --help</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="disabling-dns-dhcp-tftp-for-unmanaged-networks_satellite"><a class="anchor" href="#disabling-dns-dhcp-tftp-for-unmanaged-networks_satellite"></a>3.5.2. Disabling DNS, DHCP, and TFTP for unmanaged networks</h4>
<div class="paragraph">
<p>If you want to manage TFTP, DHCP, and DNS services manually, you must prevent Satellite from maintaining these services on the operating system and disable orchestration to avoid DHCP and DNS validation errors.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>Disabling these Capsule features means Satellite will no longer orchestrate DNS, DHCP, and TFTP, but it does not stop or remove the corresponding services.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Disable DHCP, DNS, and TFTP integration on your Satellite&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer --foreman-proxy-dhcp false \
--foreman-proxy-dns false \
--foreman-proxy-tftp false</pre>
</div>
</div>
</li>
<li>
<p>Disable the Capsule integration for every subnet:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Satellite web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Subnets</strong>.</p>
</li>
<li>
<p>Select a subnet.</p>
</li>
<li>
<p>On the <strong>Capsules</strong> tab, clear the <strong>DHCP Capsule</strong>, <strong>TFTP Capsule</strong>, and <strong>Reverse DNS Capsule</strong> fields.</p>
</li>
</ol>
</div>
</li>
<li>
<p>In the Satellite web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Domains</strong> and select a domain.</p>
</li>
<li>
<p>Clear the <strong>DNS Capsule</strong> field.</p>
</li>
<li>
<p>Optional: If you use a DHCP service supplied by a third party, configure your DHCP server to pass the following options:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">Option 66: <em>IP address of Satellite or Capsule</em>
Option 67: /pxelinux.0</pre>
</div>
</div>
<div class="paragraph">
<p>For more information about DHCP options, see <a href="https://tools.ietf.org/html/rfc2132">RFC 2132</a>.</p>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Satellite does not perform orchestration when a Capsule is not set for a given subnet and domain.
When enabling or disabling Capsule associations, orchestration commands for existing hosts can fail if the expected records and configuration files are not present.
When associating a Capsule to turn orchestration on, ensure the required DHCP and DNS records as well as the TFTP files are in place for the existing Satellite hosts in order to prevent host deletion failures in the future.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="configuring-dns-dhcp-and-tftp-additional-resources_satellite"><a class="anchor" href="#configuring-dns-dhcp-and-tftp-additional-resources_satellite"></a>3.5.3. Additional resources</h4>
<div class="ulist">
<ul>
<li>
<p>For more information about configuring DNS, DHCP, and TFTP externally, see <a href="#configuring-external-services">Configuring Satellite&#160;Server with external services</a>.</p>
</li>
<li>
<p>For more information about configuring DHCP, DNS, and TFTP services, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.15/html-single/provisioning_hosts/index#Configuring_Network_Services_provisioning">Configuring Network Services</a> in <em>Provisioning hosts</em>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Configuring_Server_for_Outgoing_Emails_satellite"><a class="anchor" href="#Configuring_Server_for_Outgoing_Emails_satellite"></a>3.6. Configuring Satellite&#160;Server for outgoing emails</h3>
<div class="paragraph">
<p>To send email messages from Satellite&#160;Server, you can use either an SMTP server, or the <code>sendmail</code> command.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Some SMTP servers with anti-spam protection or grey-listing features are known to cause problems.
To setup outgoing email with such a service either install and configure a vanilla SMTP service on Satellite&#160;Server for relay or use the <code>sendmail</code> command instead.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Administer</strong> &gt; <strong>Settings</strong>.</p>
</li>
<li>
<p>Click the <strong>Email</strong> tab and set the configuration options to match your preferred delivery method.
The changes have an immediate effect.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>The following example shows the configuration options for using an SMTP server:</p>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Using an SMTP server as a delivery method</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Example value</th>
<th class="tableblock halign-left valign-top">Additional information</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delivery method</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP address</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>smtp.example.com</em></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP authentication</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">login</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP HELO/EHLO domain</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example.com</em></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>password</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use the login credentials for the SMTP server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">25</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP username</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>user@example.com</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use the login credentials for the SMTP server.</p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>The following example uses <strong>gmail.com</strong> as an SMTP server:</p>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Using gmail.com as an SMTP server</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Example value</th>
<th class="tableblock halign-left valign-top">Additional information</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delivery method</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP address</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">smtp.gmail.com</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP authentication</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">plain</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP HELO/EHLO domain</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">smtp.gmail.com</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP enable StartTLS auto</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>app password</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use the Google app password.
For more information, see <a href="https://support.google.com/mail/answer/185833">Sign in with app passwords</a> in <em>Google Help Center</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">587</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP username</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>user</em>@gmail.com</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use the Google account name.</p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>The following example uses the <code>sendmail</code> command as a delivery method:</p>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Using sendmail as a delivery method</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Example value</th>
<th class="tableblock halign-left valign-top">Additional information</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delivery method</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sendmail</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sendmail location</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/usr/sbin/sendmail</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">For security reasons, both Sendmail location and Sendmail argument settings are read-only and can be only set in <code>/etc/foreman/settings.yaml</code>.
Both settings currently cannot be set via <code>satellite-installer</code>.
For more information see the <strong>sendmail 1</strong> man page.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sendmail arguments</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-i</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</li>
<li>
<p>If you decide to send email using an SMTP server which uses TLS authentication, also perform one of the following steps:</p>
<div class="ulist">
<ul>
<li>
<p>Mark the CA certificate of the SMTP server as trusted.
To do so, execute the following commands on Satellite&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># cp mailca.crt /etc/pki/ca-trust/source/anchors/
# update-ca-trust extract</pre>
</div>
</div>
<div class="paragraph">
<p>Where <code><em>mailca.crt</em></code> is the CA certificate of the SMTP server.</p>
</div>
</li>
<li>
<p>Alternatively, in the Satellite web UI, set the <code>SMTP enable StartTLS auto</code> option to <code>No</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Test email</strong> to send a test message to the user&#8217;s email address to confirm the configuration is working.
If a message fails to send, the Satellite web UI displays an error.
See the log at <code>/var/log/foreman/production.log</code> for further details.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>For information on configuring email notifications for individual users or user groups, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.15/html-single/administering_red_hat_satellite/index#Configuring_Email_Notification_Preferences_admin">Configuring Email Notification Preferences</a> in <em>Administering Red&#160;Hat Satellite</em>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Configuring_Server_with_a_Custom_SSL_Certificate"><a class="anchor" href="#Configuring_Server_with_a_Custom_SSL_Certificate"></a>3.7. Configuring Satellite&#160;Server with a custom SSL certificate</h3>
<div class="paragraph">
<p>By default, Red&#160;Hat Satellite uses a self-signed SSL certificate to enable encrypted communications between Satellite&#160;Server, external Capsule&#160;Servers, and all hosts.
If you cannot use a Satellite self-signed certificate, you can configure Satellite&#160;Server to use an SSL certificate signed by an external certificate authority (CA).</p>
</div>
<div class="paragraph">
<p>When you configure Red&#160;Hat Satellite with custom SSL certificates, you must fulfill the following requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You must use the privacy-enhanced mail (PEM) encoding for the SSL certificates.</p>
</li>
<li>
<p>You must not use the same SSL certificate for both Satellite&#160;Server and Capsule&#160;Server.</p>
</li>
<li>
<p>The same CA must sign certificates for Satellite&#160;Server and Capsule&#160;Server.</p>
</li>
<li>
<p>An SSL certificate must not also be a CA certificate.</p>
</li>
<li>
<p>An SSL certificate must include a subject alt name (SAN) entry that matches the common name (CN).</p>
</li>
<li>
<p>An SSL certificate must be allowed for Key Encipherment using a Key Usage extension.</p>
</li>
<li>
<p>An SSL certificate must not have a shortname as the CN.</p>
</li>
<li>
<p>You must not set a passphrase for the private key.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To configure your Satellite&#160;Server with a custom certificate, complete the following procedures:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#creating-a-custom-ssl-certificate_satellite">Creating a custom SSL certificate for Satellite&#160;Server</a></p>
</li>
<li>
<p><a href="#Deploying_a_Custom_SSL_Certificate_to_Server_satellite">Deploying a custom SSL certificate to Satellite&#160;Server</a></p>
</li>
<li>
<p><a href="#deploying-a-custom-ssl-certificate-to-hosts_satellite">Deploying a custom SSL certificate to hosts</a></p>
</li>
<li>
<p>If you have external Capsule&#160;Servers registered to Satellite&#160;Server, configure them with custom SSL certificates.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.15/html-single/installing_capsule_server/index#configuring-capsule-custom-server-certificate_capsule">Configuring Capsule&#160;Server with a Custom SSL Certificate</a> in <em>Installing Capsule Server</em>.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="creating-a-custom-ssl-certificate_satellite"><a class="anchor" href="#creating-a-custom-ssl-certificate_satellite"></a>3.7.1. Creating a custom SSL certificate for Satellite&#160;Server</h4>
<div class="paragraph">
<p>Use this procedure to create a custom SSL certificate for Satellite&#160;Server.
If you already have a custom SSL certificate for Satellite&#160;Server, skip this procedure.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>To store all the source certificate files, create a directory that is accessible only to the <code>root</code> user:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir /root/satellite_cert</pre>
</div>
</div>
</li>
<li>
<p>Create a private key with which to sign the certificate signing request (CSR).</p>
<div class="paragraph">
<p>Note that the private key must be unencrypted.
If you use a password-protected private key, remove the private key password.</p>
</div>
<div class="paragraph">
<p>If you already have a private key for this Satellite&#160;Server, skip this step.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># openssl genrsa -out <code>/root/satellite_cert/satellite_cert_key.pem</code> 4096</pre>
</div>
</div>
</li>
<li>
<p>Create the <code>/root/satellite_cert/openssl.cnf</code> configuration file for the CSR and include the following content:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">[ req ]
req_extensions = v3_req
distinguished_name = req_distinguished_name
prompt = no

[ req_distinguished_name ]
commonName = <em>satellite.example.com</em>

[ v3_req ]
basicConstraints = CA:FALSE
keyUsage = digitalSignature, keyEncipherment
extendedKeyUsage = serverAuth, clientAuth
subjectAltName = @alt_names

[ alt_names ]
DNS.1 = <em>satellite.example.com</em></pre>
</div>
</div>
<div class="paragraph">
<p>For more information about the <code>[ v3_req ]</code> parameters and their purpose, see <a href="https://www.rfc-editor.org/rfc/rfc5280">RFC 5280: Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile</a>.</p>
</div>
</li>
<li>
<p>Optional: If you want to add Distinguished Name (DN) details to the CSR, add the following information to the <code>[ req_distinguished_name ]</code> section:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">[req_distinguished_name]
CN = <em>satellite.example.com</em>
countryName =<em>My_Country_Name</em> <b class="conum">(1)</b>
stateOrProvinceName = <em>My_State_Or_Province_Name</em> <b class="conum">(2)</b>
localityName = <em>My_Locality_Name</em> <b class="conum">(3)</b>
organizationName = <em>My_Organization_Or_Company_Name</em>
organizationalUnitName = <em>My_Organizational_Unit_Name</em> <b class="conum">(4)</b></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Two letter code</p>
</li>
<li>
<p>Full name</p>
</li>
<li>
<p>Full name (example: New York)</p>
</li>
<li>
<p>Division responsible for the certificate (example: IT department)</p>
</li>
</ol>
</div>
</li>
<li>
<p>Generate CSR:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># openssl req -new \
-key <em>/root/satellite_cert/satellite_cert_key.pem</em> \ <b class="conum">(1)</b>
-config <em>/root/satellite_cert/openssl.cnf</em> \ <b class="conum">(2)</b>
-out <em>/root/satellite_cert/satellite_cert_csr.pem</em> <b class="conum">(3)</b></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Path to the private key</p>
</li>
<li>
<p>Path to the configuration file</p>
</li>
<li>
<p>Path to the CSR to generate</p>
</li>
</ol>
</div>
</li>
<li>
<p>Send the certificate signing request to the certificate authority (CA).
The same CA must sign certificates for Satellite&#160;Server and Capsule&#160;Server.</p>
<div class="paragraph">
<p>When you submit the request, specify the lifespan of the certificate.
The method for sending the certificate request varies, so consult the CA for the preferred method.
In response to the request, you can expect to receive a CA bundle and a signed certificate, in separate files.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Deploying_a_Custom_SSL_Certificate_to_Server_satellite"><a class="anchor" href="#Deploying_a_Custom_SSL_Certificate_to_Server_satellite"></a>3.7.2. Deploying a custom SSL certificate to Satellite&#160;Server</h4>
<div class="paragraph">
<p>Use this procedure to configure your Satellite&#160;Server to use a custom SSL certificate signed by a Certificate Authority.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>Do not store the SSL certificates or .tar bundles in <code>/tmp</code> or <code>/var/tmp</code> directory.
The operating system removes files from these directories periodically.
As a result, <code>satellite-installer</code> fails to execute while enabling features or upgrading Satellite&#160;Server.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Update certificates on your Satellite&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer \
--certs-server-cert "<em>/root/satellite_cert/satellite_cert.pem</em>" \ <b class="conum">(1)</b>
--certs-server-key "<em>/root/satellite_cert/satellite_cert_key.pem</em>" \ <b class="conum">(2)</b>
--certs-server-ca-cert "<em>/root/satellite_cert/ca_cert_bundle.pem</em>" \ <b class="conum">(3)</b>
--certs-update-server --certs-update-server-ca</pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Path to Satellite&#160;Server certificate file that is signed by a Certificate Authority.</p>
</li>
<li>
<p>Path to the private key that was used to sign Satellite&#160;Server certificate.</p>
</li>
<li>
<p>Path to the Certificate Authority bundle.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Verification</div>
<ol class="arabic">
<li>
<p>On a computer with network access to Satellite&#160;Server, navigate to the following URL: <code>https://satellite.example.com</code>.</p>
</li>
<li>
<p>In your browser, view the certificate details to verify the deployed certificate.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="deploying-a-custom-ssl-certificate-to-hosts_satellite"><a class="anchor" href="#deploying-a-custom-ssl-certificate-to-hosts_satellite"></a>3.7.3. Deploying a custom SSL certificate to hosts</h4>
<div class="paragraph">
<p>After you configure Satellite to use a custom SSL certificate, you must deploy the certificate to hosts registered to Satellite.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Update the SSL certificate on each host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf install http://<em>satellite.example.com</em>/pub/katello-ca-consumer-latest.noarch.rpm</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="using-external-databases_satellite"><a class="anchor" href="#using-external-databases_satellite"></a>3.8. Using external databases with Satellite</h3>
<div class="paragraph">
<p>As part of the installation process for Red&#160;Hat Satellite, the <strong>satellite-installer</strong> command installs PostgreSQL databases on the same server as Satellite.
In certain Satellite deployments, using external databases instead of the default local databases can help with the server load.</p>
</div>
<div class="paragraph">
<p>Red Hat does not provide support or tools for external database maintenance.
This includes backups, upgrades, and database tuning.
You must have your own database administrator to support and maintain external databases.</p>
</div>
<div class="paragraph">
<p>To create and use external databases for Satellite, you must complete the following procedures:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#preparing-a-host-for-external-databases_satellite">Preparing a host for external databases</a>.
Prepare a host for the external databases.</p>
</li>
<li>
<p><a href="#installing-postgresql_satellite">Installing PostgreSQL</a>.
Prepare PostgreSQL with databases for Satellite, Candlepin and Pulp with dedicated users owning them.</p>
</li>
<li>
<p><a href="#Configuring_Server_to_Use_External_Databases_satellite">Configuring Satellite&#160;Server to use external databases</a>.
Edit the parameters of <code>satellite-installer</code> to point to the new databases, and run <code>satellite-installer</code>.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="postgresql-as-an-external-database-considerations_satellite"><a class="anchor" href="#postgresql-as-an-external-database-considerations_satellite"></a>3.8.1. PostgreSQL as an external database considerations</h4>
<div class="paragraph">
<p>Foreman, Katello, and Candlepin use the PostgreSQL database.
If you want to use PostgreSQL as an external database, the following information can help you decide if this option is right for your Satellite configuration.
Satellite supports PostgreSQL version 12.</p>
</div>
<div class="ulist">
<div class="title">Advantages of external PostgreSQL</div>
<ul>
<li>
<p>Increase in free memory and free CPU on Satellite</p>
</li>
<li>
<p>Flexibility to set <code>shared_buffers</code> on the PostgreSQL database to a high number without the risk of interfering with other services on Satellite</p>
</li>
<li>
<p>Flexibility to tune the PostgreSQL server&#8217;s system without adversely affecting Satellite operations</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Disadvantages of external PostgreSQL</div>
<ul>
<li>
<p>Increase in deployment complexity that can make troubleshooting more difficult</p>
</li>
<li>
<p>The external PostgreSQL server is an additional system to patch and maintain</p>
</li>
<li>
<p>If either Satellite or the PostgreSQL database server suffers a hardware or storage failure, Satellite is not operational</p>
</li>
<li>
<p>If there is latency between the Satellite server and database server, performance can suffer</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you suspect that the PostgreSQL database on your Satellite is causing performance problems, use the information in <a href="https://access.redhat.com/solutions/2780871">Satellite 6: How to enable postgres query logging to detect slow running queries</a> to determine if you have slow queries.
Queries that take longer than one second are typically caused by performance issues with large installations, and moving to an external database might not help.
If you have slow queries, contact Red Hat Support.</p>
</div>
</div>
<div class="sect3">
<h4 id="preparing-a-host-for-external-databases_satellite"><a class="anchor" href="#preparing-a-host-for-external-databases_satellite"></a>3.8.2. Preparing a host for external databases</h4>
<div class="paragraph">
<p>Install a freshly provisioned system with the latest Red&#160;Hat Enterprise Linux 9 or Red&#160;Hat Enterprise Linux 8 to host the external databases.</p>
</div>
<div class="paragraph">
<p>Subscriptions for Red&#160;Hat Enterprise Linux do not provide the correct service level agreement for using Satellite with external databases.
You must also attach a Satellite subscription to the base operating system that you want to use for the external databases.</p>
</div>
<div class="paragraph">
<p>Use the instructions in <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.15/html-single/installing_satellite_server_in_a_connected_network_environment/index#attaching-infrastructure-subscription_satellite">Attaching the Satellite Infrastructure Subscription</a> to attach a Satellite subscription to your server.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The prepared host must meet Satellite&#8217;s <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.15/html-single/installing_satellite_server_in_a_connected_network_environment/index#storage-requirements_satellite">Storage Requirements</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>Select the operating system and version you are installing external database on:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#repositories-externaldb-el-9">Red&#160;Hat Enterprise Linux 9</a></p>
</li>
<li>
<p><a href="#repositories-externaldb-el-8">Red&#160;Hat Enterprise Linux 8</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="repositories-externaldb-el-9"><a class="anchor" href="#repositories-externaldb-el-9"></a>Red&#160;Hat Enterprise Linux 9</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Disable all repositories:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># subscription-manager repos --disable "*"</pre>
</div>
</div>
</li>
<li>
<p>Enable the following repositories:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># subscription-manager repos \
--enable=satellite-6.15-for-rhel-9-x86_64-rpms \
--enable=satellite-maintenance-6.15-for-rhel-9-x86_64-rpms \
--enable=rhel-9-for-x86_64-baseos-rpms \
--enable=rhel-9-for-x86_64-appstream-rpms</pre>
</div>
</div>
</li>
<li>
<p>Verify that the required repositories are enabled:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf repolist enabled</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="repositories-externaldb-el-8"><a class="anchor" href="#repositories-externaldb-el-8"></a>Red&#160;Hat Enterprise Linux 8</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Disable all repositories:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># subscription-manager repos --disable "*"</pre>
</div>
</div>
</li>
<li>
<p>Enable the following repositories:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># subscription-manager repos \
--enable=satellite-6.15-for-rhel-8-x86_64-rpms \
--enable=satellite-maintenance-6.15-for-rhel-8-x86_64-rpms \
--enable=rhel-8-for-x86_64-baseos-rpms \
--enable=rhel-8-for-x86_64-appstream-rpms</pre>
</div>
</div>
</li>
<li>
<p>Verify that the required repositories are enabled:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf repolist enabled</pre>
</div>
</div>
</li>
<li>
<p>Enable the following module:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf module enable satellite:el8</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Enablement of the module <code>satellite:el8</code> warns about a conflict with <code>postgresql:10</code> and <code>ruby:2.5</code> as these modules are set to the default module versions on Red&#160;Hat Enterprise Linux 8.
The module <code>satellite:el8</code> has a dependency for the modules <code>postgresql:12</code> and <code>ruby:2.7</code> that will be enabled with the <code>satellite:el8</code> module.
These warnings do not cause installation process failure, hence can be ignored safely.
For more information about modules and lifecycle streams on Red&#160;Hat Enterprise Linux 8, see <a href="https://access.redhat.com/support/policy/updates/rhel-app-streams-life-cycle">Red&#160;Hat Enterprise Linux Application Streams Lifecycle</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="installing-postgresql_satellite"><a class="anchor" href="#installing-postgresql_satellite"></a>3.8.3. Installing PostgreSQL</h4>
<div class="paragraph">
<p>You can install only the same version of PostgreSQL that is installed with the <code>satellite-installer</code> tool during an internal database installation.
Satellite supports PostgreSQL version 12.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>To install PostgreSQL, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre># dnf install postgresql-server postgresql-evr postgresql-contrib</pre>
</div>
</div>
</li>
<li>
<p>To initialize PostgreSQL, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># postgresql-setup initdb</pre>
</div>
</div>
</li>
<li>
<p>Edit the <code>/var/lib/pgsql/data/postgresql.conf</code> file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># vi /var/lib/pgsql/data/postgresql.conf</pre>
</div>
</div>
<div class="paragraph">
<p>Note that the default configuration of external PostgreSQL needs to be adjusted to work with Satellite.
The base recommended external database configuration adjustments are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>checkpoint_completion_target: 0.9</p>
</li>
<li>
<p>max_connections: 500</p>
</li>
<li>
<p>shared_buffers: 512MB</p>
</li>
<li>
<p>work_mem: 4MB</p>
</li>
</ul>
</div>
</li>
<li>
<p>Remove the <code>#</code> and edit to listen to inbound connections:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">listen_addresses = '*'</pre>
</div>
</div>
</li>
<li>
<p>Edit the <code>/var/lib/pgsql/data/pg_hba.conf</code> file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># vi /var/lib/pgsql/data/pg_hba.conf</pre>
</div>
</div>
</li>
<li>
<p>Add the following line to the file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">  host  all   all   <em>Satellite_ip</em>/32   md5</pre>
</div>
</div>
</li>
<li>
<p>To start, and enable PostgreSQL service, enter the following commands:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># systemctl enable --now postgresql</pre>
</div>
</div>
</li>
<li>
<p>Open the <strong>postgresql</strong> port on the external PostgreSQL server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd --add-service=postgresql</pre>
</div>
</div>
</li>
<li>
<p>Make the changes persistent:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd --runtime-to-permanent</pre>
</div>
</div>
</li>
<li>
<p>Switch to the <code>postgres</code> user and start the PostgreSQL client:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ su - postgres -c psql</pre>
</div>
</div>
</li>
<li>
<p>Create three databases and dedicated roles: one for Satellite, one for Candlepin, and one for Pulp:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">CREATE USER "foreman" WITH PASSWORD '<em>Foreman_Password</em>';
CREATE USER "candlepin" WITH PASSWORD '<em>Candlepin_Password</em>';
CREATE USER "pulp" WITH PASSWORD '<em>Pulpcore_Password</em>';
CREATE DATABASE foreman OWNER foreman;
CREATE DATABASE candlepin OWNER candlepin;
CREATE DATABASE pulpcore OWNER pulp;</pre>
</div>
</div>
</li>
<li>
<p>Connect to the Pulp database:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">postgres=# \c pulpcore
You are now connected to database "pulpcore" as user "postgres".</pre>
</div>
</div>
</li>
<li>
<p>Create the <code>hstore</code> extension:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">pulpcore=# CREATE EXTENSION IF NOT EXISTS "hstore";
CREATE EXTENSION</pre>
</div>
</div>
</li>
<li>
<p>Exit the <code>postgres</code> user:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># \q</pre>
</div>
</div>
</li>
<li>
<p>From Satellite&#160;Server, test that you can access the database.
If the connection succeeds, the commands return <code>1</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># PGPASSWORD='<em>Foreman_Password</em>' psql -h <em>postgres.example.com</em>  -p 5432 -U foreman -d foreman -c "SELECT 1 as ping"
# PGPASSWORD='<em>Candlepin_Password</em>' psql -h <em>postgres.example.com</em> -p 5432 -U candlepin -d candlepin -c "SELECT 1 as ping"
# PGPASSWORD='<em>Pulpcore_Password</em>' psql -h <em>postgres.example.com</em> -p 5432 -U pulp -d pulpcore -c "SELECT 1 as ping"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Configuring_Server_to_Use_External_Databases_satellite"><a class="anchor" href="#Configuring_Server_to_Use_External_Databases_satellite"></a>3.8.4. Configuring Satellite&#160;Server to use external databases</h4>
<div class="paragraph">
<p>Use the <code>satellite-installer</code> command to configure Satellite to connect to an external PostgreSQL database.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have installed and configured a PostgreSQL database on a Red&#160;Hat Enterprise Linux server.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>To configure the external databases for Satellite, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer \
--katello-candlepin-manage-db false \
--katello-candlepin-db-host <em>postgres.example.com</em> \
--katello-candlepin-db-name candlepin \
--katello-candlepin-db-user candlepin \
--katello-candlepin-db-password <em>Candlepin_Password</em> \
--foreman-proxy-content-pulpcore-manage-postgresql false \
--foreman-proxy-content-pulpcore-postgresql-host <em>postgres.example.com</em> \
--foreman-proxy-content-pulpcore-postgresql-db-name pulpcore \
--foreman-proxy-content-pulpcore-postgresql-user pulp \
--foreman-proxy-content-pulpcore-postgresql-password <em>Pulpcore_Password</em> \
--foreman-db-manage false \
--foreman-db-host <em>postgres.example.com</em> \
--foreman-db-database foreman \
--foreman-db-username foreman \
--foreman-db-password <em>Foreman_Password</em></pre>
</div>
</div>
<div class="paragraph">
<p>To enable the Secure Sockets Layer (SSL) protocol for these external databases, add the following options:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">--foreman-db-root-cert &lt;path_to_CA&gt;
--foreman-db-sslmode verify-full
--foreman-proxy-content-pulpcore-postgresql-ssl true
--foreman-proxy-content-pulpcore-postgresql-ssl-root-ca &lt;path_to_CA&gt;
--katello-candlepin-db-ssl true
--katello-candlepin-db-ssl-ca &lt;path_to_CA&gt;
--katello-candlepin-db-ssl-verify true</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-external-services"><a class="anchor" href="#configuring-external-services"></a>4. Configuring Satellite&#160;Server with external services</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you do not want to configure the DNS, DHCP, and TFTP services on Satellite&#160;Server, use this section to configure your Satellite&#160;Server to work with external DNS, DHCP, and TFTP services.</p>
</div>
<div class="sect2">
<h3 id="configuring-external-dns_satellite"><a class="anchor" href="#configuring-external-dns_satellite"></a>4.1. Configuring Satellite&#160;Server with external DNS</h3>
<div class="paragraph">
<p>You can configure Satellite&#160;Server with external DNS.
Satellite&#160;Server uses the <code>nsupdate</code> utility to update DNS records on the remote server.</p>
</div>
<div class="paragraph">
<p>To make any changes persistent, you must enter the <code>satellite-installer</code> command with the options appropriate for your environment.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have a configured external DNS server.</p>
</li>
<li>
<p>This guide assumes you have an existing installation.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Copy the <code>/etc/rndc.key</code> file from the external DNS server to Satellite&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># scp root@<em>dns.example.com</em>:/etc/rndc.key /etc/foreman-proxy/rndc.key</pre>
</div>
</div>
</li>
<li>
<p>Configure the ownership, permissions, and SELinux context:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># restorecon -v /etc/foreman-proxy/rndc.key
# chown -v root:foreman-proxy /etc/foreman-proxy/rndc.key
# chmod -v 640 /etc/foreman-proxy/rndc.key</pre>
</div>
</div>
</li>
<li>
<p>To test the <code>nsupdate</code> utility, add a host remotely:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># echo -e "server <em>DNS_IP_Address</em>\n \
update add aaa.example.com 3600 IN A <em>Host_IP_Address</em>\n \
send\n" | nsupdate -k /etc/foreman-proxy/rndc.key
# nslookup aaa.example.com <em>DNS_IP_Address</em>
# echo -e "server <em>DNS_IP_Address</em>\n \
update delete aaa.example.com 3600 IN A <em>Host_IP_Address</em>\n \
send\n" | nsupdate -k /etc/foreman-proxy/rndc.key</pre>
</div>
</div>
</li>
<li>
<p>Enter the <code>satellite-installer</code> command to make the following persistent changes to the <code>/etc/foreman-proxy/settings.d/dns.yml</code> file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer --foreman-proxy-dns=true \
--foreman-proxy-dns-managed=false \
--foreman-proxy-dns-provider=nsupdate \
--foreman-proxy-dns-server="<em>DNS_IP_Address</em>" \
--foreman-proxy-keyfile=/etc/foreman-proxy/rndc.key</pre>
</div>
</div>
</li>
<li>
<p>In the Satellite web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Capsules</strong>.</p>
</li>
<li>
<p>Locate the Satellite&#160;Server and select <strong>Refresh</strong> from the list in the <strong>Actions</strong> column.</p>
</li>
<li>
<p>Associate the DNS service with the appropriate subnets and domain.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="configuring-external-dhcp_satellite"><a class="anchor" href="#configuring-external-dhcp_satellite"></a>4.2. Configuring Satellite&#160;Server with external DHCP</h3>
<div class="paragraph">
<p>To configure Satellite&#160;Server with external DHCP, you must complete the following procedures:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#configuring-an-external-dhcp-server_satellite">Configuring an external DHCP server to use with Satellite&#160;Server</a></p>
</li>
<li>
<p><a href="#Configuring_Server_with_an_External_DHCP_Server_satellite">Configuring Satellite&#160;Server with an external DHCP server</a></p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="configuring-an-external-dhcp-server_satellite"><a class="anchor" href="#configuring-an-external-dhcp-server_satellite"></a>4.2.1. Configuring an external DHCP server to use with Satellite&#160;Server</h4>
<div class="paragraph">
<p>To configure an external DHCP server running Red&#160;Hat Enterprise Linux to use with Satellite&#160;Server, you must install the ISC DHCP Service and Berkeley Internet Name Domain (BIND) utilities packages.
You must also share the DHCP configuration and lease files with Satellite&#160;Server.
The example in this procedure uses the distributed Network File System (NFS) protocol to share the DHCP configuration and lease files.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you use dnsmasq as an external DHCP server, enable the <code>dhcp-no-override</code> setting.
This is required because Satellite creates configuration files on the TFTP server under the <code>grub2/</code> subdirectory.
If the <code>dhcp-no-override</code> setting is disabled, hosts fetch the bootloader and its configuration from the root directory, which might cause an error.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>On your Red&#160;Hat Enterprise Linux host, install the ISC DHCP Service and Berkeley Internet Name Domain (BIND) utilities packages:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf install dhcp-server bind-utils</pre>
</div>
</div>
</li>
<li>
<p>Generate a security token:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># tsig-keygen -a hmac-md5 omapi_key</pre>
</div>
</div>
</li>
<li>
<p>Edit the <code>dhcpd</code> configuration file for all subnets and add the key generated by <code>tsig-keygen</code>.
The following is an example:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># cat /etc/dhcp/dhcpd.conf
default-lease-time 604800;
max-lease-time 2592000;
log-facility local7;

subnet <em>192.168.38.0</em> netmask <em>255.255.255.0</em> {
	range <em>192.168.38.10 192.168.38.100</em>;
	option routers <em>192.168.38.1</em>;
	option subnet-mask <em>255.255.255.0</em>;
	option domain-search "<em>virtual.lan</em>";
	option domain-name "<em>virtual.lan</em>";
	option domain-name-servers <em>8.8.8.8</em>;
}

omapi-port 7911;
key omapi_key {
	algorithm hmac-md5;
	secret "<em>My_Secret</em>";
};
omapi-key omapi_key;</pre>
</div>
</div>
<div class="paragraph">
<p>Note that the <code>option routers</code> value is the IP address of your Satellite&#160;Server or Capsule&#160;Server that you want to use with an external DHCP service.</p>
</div>
</li>
<li>
<p>On Satellite&#160;Server, define each subnet.
Do not set DHCP Capsule for the defined Subnet yet.</p>
<div class="paragraph">
<p>To prevent conflicts, set up the lease and reservation ranges separately.
For example, if the lease range is 192.168.38.10 to 192.168.38.100, in the Satellite web UI define the reservation range as 192.168.38.101 to 192.168.38.250.</p>
</div>
</li>
<li>
<p>Configure the firewall for external access to the DHCP server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd --add-service dhcp</pre>
</div>
</div>
</li>
<li>
<p>Make the changes persistent:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd --runtime-to-permanent</pre>
</div>
</div>
</li>
<li>
<p>On Satellite&#160;Server, determine the UID and GID of the <code>foreman</code> user:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># id -u foreman
<em>993</em>
# id -g foreman
<em>990</em></pre>
</div>
</div>
</li>
<li>
<p>On the DHCP server, create the <code>foreman</code> user and group with the same IDs as determined in a previous step:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># groupadd -g <em>990</em> foreman
# useradd -u <em>993</em> -g <em>990</em> -s /sbin/nologin foreman</pre>
</div>
</div>
</li>
<li>
<p>To ensure that the configuration files are accessible, restore the read and execute flags:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># chmod o+rx /etc/dhcp/
# chmod o+r /etc/dhcp/dhcpd.conf
# chattr +i /etc/dhcp/ /etc/dhcp/dhcpd.conf</pre>
</div>
</div>
</li>
<li>
<p>Enable and start the DHCP service:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># systemctl enable --now dhcpd</pre>
</div>
</div>
</li>
<li>
<p>Export the DHCP configuration and lease files using NFS:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf install nfs-utils
# systemctl enable --now nfs-server</pre>
</div>
</div>
</li>
<li>
<p>Create directories for the DHCP configuration and lease files that you want to export using NFS:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir -p /exports/var/lib/dhcpd /exports/etc/dhcp</pre>
</div>
</div>
</li>
<li>
<p>To create mount points for the created directories, add the following line to the <code>/etc/fstab</code> file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">/var/lib/dhcpd /exports/var/lib/dhcpd none bind,auto 0 0
/etc/dhcp /exports/etc/dhcp none bind,auto 0 0</pre>
</div>
</div>
</li>
<li>
<p>Mount the file systems in <code>/etc/fstab</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mount -a</pre>
</div>
</div>
</li>
<li>
<p>Ensure the following lines are present in <code>/etc/exports</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">/exports <em>192.168.38.1</em>(rw,async,no_root_squash,fsid=0,no_subtree_check)

/exports/etc/dhcp <em>192.168.38.1</em>(ro,async,no_root_squash,no_subtree_check,nohide)

/exports/var/lib/dhcpd <em>192.168.38.1</em>(ro,async,no_root_squash,no_subtree_check,nohide)</pre>
</div>
</div>
<div class="paragraph">
<p>Note that the IP address that you enter is the Satellite or Capsule IP address that you want to use with an external DHCP service.</p>
</div>
</li>
<li>
<p>Reload the NFS server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># exportfs -rva</pre>
</div>
</div>
</li>
<li>
<p>Configure the firewall for DHCP omapi port 7911:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd --add-port=7911/tcp</pre>
</div>
</div>
</li>
<li>
<p>Optional: Configure the firewall for external access to NFS.
Clients are configured using NFSv3.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd \
--add-service mountd \
--add-service nfs \
--add-service rpc-bind \
--zone public</pre>
</div>
</div>
</li>
<li>
<p>Make the changes persistent:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd --runtime-to-permanent</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Configuring_Server_with_an_External_DHCP_Server_satellite"><a class="anchor" href="#Configuring_Server_with_an_External_DHCP_Server_satellite"></a>4.2.2. Configuring Satellite&#160;Server with an external DHCP server</h4>
<div class="paragraph">
<p>You can configure Satellite&#160;Server with an external DHCP server.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure that you have configured an external DHCP server and that you have shared the DHCP configuration and lease files with Satellite&#160;Server.
For more information, see <a href="#configuring-an-external-dhcp-server_satellite">Configuring an external DHCP server to use with Satellite&#160;Server</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Install the <code>nfs-utils</code> package:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-maintain packages install nfs-utils</pre>
</div>
</div>
</li>
<li>
<p>Create the DHCP directories for NFS:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir -p /mnt/nfs/etc/dhcp /mnt/nfs/var/lib/dhcpd</pre>
</div>
</div>
</li>
<li>
<p>Change the file owner:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># chown -R foreman-proxy /mnt/nfs</pre>
</div>
</div>
</li>
<li>
<p>Verify communication with the NFS server and the Remote Procedure Call (RPC) communication paths:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># showmount -e <em>DHCP_Server_FQDN</em>
# rpcinfo -p <em>DHCP_Server_FQDN</em></pre>
</div>
</div>
</li>
<li>
<p>Add the following lines to the <code>/etc/fstab</code> file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"><em>DHCP_Server_FQDN</em>:/exports/etc/dhcp /mnt/nfs/etc/dhcp nfs
ro,vers=3,auto,nosharecache,context="system_u:object_r:dhcp_etc_t:s0" 0 0

<em>DHCP_Server_FQDN</em>:/exports/var/lib/dhcpd /mnt/nfs/var/lib/dhcpd nfs
ro,vers=3,auto,nosharecache,context="system_u:object_r:dhcpd_state_t:s0" 0 0</pre>
</div>
</div>
</li>
<li>
<p>Mount the file systems on <code>/etc/fstab</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mount -a</pre>
</div>
</div>
</li>
<li>
<p>To verify that the <code>foreman-proxy</code> user can access the files that are shared over the network, display the DHCP configuration and lease files:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># su foreman-proxy -s /bin/bash
$ cat /mnt/nfs/etc/dhcp/dhcpd.conf
$ cat /mnt/nfs/var/lib/dhcpd/dhcpd.leases
$ exit</pre>
</div>
</div>
</li>
<li>
<p>Enter the <code>satellite-installer</code> command to make the following persistent changes to the <code>/etc/foreman-proxy/settings.d/dhcp.yml</code> file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer \
--enable-foreman-proxy-plugin-dhcp-remote-isc \
--foreman-proxy-dhcp-provider=remote_isc \
--foreman-proxy-dhcp-server=<em>My_DHCP_Server_FQDN</em> \
--foreman-proxy-dhcp=true \
--foreman-proxy-plugin-dhcp-remote-isc-dhcp-config /mnt/nfs/etc/dhcp/dhcpd.conf \
--foreman-proxy-plugin-dhcp-remote-isc-dhcp-leases /mnt/nfs/var/lib/dhcpd/dhcpd.leases \
--foreman-proxy-plugin-dhcp-remote-isc-key-name=omapi_key \
--foreman-proxy-plugin-dhcp-remote-isc-key-secret=<em>My_Secret</em> \
--foreman-proxy-plugin-dhcp-remote-isc-omapi-port=7911</pre>
</div>
</div>
</li>
<li>
<p>Associate the DHCP service with the appropriate subnets and domain.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuring-external-tftp_satellite"><a class="anchor" href="#configuring-external-tftp_satellite"></a>4.3. Configuring Satellite&#160;Server with external TFTP</h3>
<div class="paragraph">
<p>You can configure Satellite&#160;Server with external TFTP services.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create the TFTP directory for NFS:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir -p /mnt/nfs/var/lib/tftpboot</pre>
</div>
</div>
</li>
<li>
<p>In the <code>/etc/fstab</code> file, add the following line:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"><em>TFTP_Server_IP_Address</em>:/exports/var/lib/tftpboot /mnt/nfs/var/lib/tftpboot nfs rw,vers=3,auto,nosharecache,context="system_u:object_r:tftpdir_rw_t:s0" 0 0</pre>
</div>
</div>
</li>
<li>
<p>Mount the file systems in <code>/etc/fstab</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mount -a</pre>
</div>
</div>
</li>
<li>
<p>Enter the <code>satellite-installer</code> command to make the following persistent changes to the <code>/etc/foreman-proxy/settings.d/tftp.yml</code> file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer \
--foreman-proxy-tftp-root /mnt/nfs/var/lib/tftpboot \
--foreman-proxy-tftp=true</pre>
</div>
</div>
</li>
<li>
<p>If the TFTP service is running on a different server than the DHCP service, update the <code>tftp_servername</code> setting with the FQDN or IP address of the server that the TFTP service is running on:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer --foreman-proxy-tftp-servername=<em>TFTP_Server_FQDN</em></pre>
</div>
</div>
</li>
<li>
<p>In the Satellite web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Capsules</strong>.</p>
</li>
<li>
<p>Locate the Satellite&#160;Server and select <strong>Refresh</strong> from the list in the <strong>Actions</strong> column.</p>
</li>
<li>
<p>Associate the TFTP service with the appropriate subnets and domain.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="configuring-external-idm-dns_satellite"><a class="anchor" href="#configuring-external-idm-dns_satellite"></a>4.4. Configuring Satellite&#160;Server with external IdM DNS</h3>
<div class="paragraph">
<p>When Satellite&#160;Server adds a DNS record for a host, it first determines which Capsule is providing DNS for that domain.
It then communicates with the Capsule that is configured to provide DNS service for your deployment and adds the record.
The hosts are not involved in this process.
Therefore, you must install and configure the IdM client on the Satellite or Capsule that is currently configured to provide a DNS service for the domain you want to manage using the IdM server.</p>
</div>
<div class="paragraph">
<p>Satellite&#160;Server can be configured to use a Red&#160;Hat Identity Management (IdM) server to provide DNS service.
For more information about Red&#160;Hat Identity Management, see the <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/linux_domain_identity_authentication_and_policy_guide/">Linux Domain Identity, Authentication, and Policy Guide</a>.</p>
</div>
<div class="paragraph">
<p>To configure Satellite&#160;Server to use a Red&#160;Hat Identity Management (IdM) server to provide DNS service, use one of the following procedures:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#configuring-dynamic-dns-update-with-gss-tsig-authentication_satellite">Configuring dynamic DNS update with GSS-TSIG authentication</a></p>
</li>
<li>
<p><a href="#configuring-dynamic-dns-update-with-tsig-authentication_satellite">Configuring dynamic DNS update with TSIG authentication</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To revert to internal DNS service, use the following procedure:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#reverting-to-internal-dns-service_satellite">Reverting to internal DNS service</a></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You are not required to use Satellite&#160;Server to manage DNS.
When you are using the realm enrollment feature of Satellite, where provisioned hosts are enrolled automatically to IdM, the <code>ipa-client-install</code> script creates DNS records for the client.
Configuring Satellite&#160;Server with external IdM DNS and realm enrollment are mutually exclusive.
For more information about configuring realm enrollment, see
<a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.15/html-single/installing_satellite_server_in_a_connected_network_environment/index#External_Authentication_for_Provisioned_Hosts_satellite">External Authentication for Provisioned Hosts</a> in <em>Installing Satellite&#160;Server in a connected network environment</em>.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="configuring-dynamic-dns-update-with-gss-tsig-authentication_satellite"><a class="anchor" href="#configuring-dynamic-dns-update-with-gss-tsig-authentication_satellite"></a>4.4.1. Configuring dynamic DNS update with GSS-TSIG authentication</h4>
<div class="paragraph">
<p>You can configure the IdM server to use the generic security service algorithm for secret key transaction (GSS-TSIG) technology defined in <a href="https://tools.ietf.org/html/rfc3645">RFC3645</a>.
To configure the IdM server to use the GSS-TSIG technology, you must install the IdM client on the Satellite&#160;Server base operating system.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must ensure the IdM server is deployed and the host-based firewall is configured correctly.
For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/preparing-the-system-for-ipa-server-installation_installing-identity-management#port-requirements-for-idm_preparing-the-system-for-ipa-server-installation">Port requirements for IdM</a> in <em>Red&#160;Hat Enterprise Linux 9 guide</em> or <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/installing_identity_management/preparing-the-system-for-ipa-server-installation_installing-identity-management#port-requirements-for-idm_preparing-the-system-for-ipa-server-installation">Port requirements for IdM</a> in <em>Red&#160;Hat Enterprise Linux 8 guide</em>.</p>
</li>
<li>
<p>You must contact the IdM server administrator to ensure that you obtain an account on the IdM server with permissions to create zones on the IdM server.</p>
</li>
<li>
<p>You should create a backup of the answer file.
You can use the backup to restore the answer file to its original state if it becomes corrupted.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.15/html-single/installing_satellite_server_in_a_connected_network_environment/index#configuring-server_satellite">Configuring Satellite&#160;Server</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>To configure dynamic DNS update with GSS-TSIG authentication, complete the following steps:</p>
</div>
<div class="olist arabic">
<div class="title">Creating a Kerberos principal on the IdM server</div>
<ol class="arabic">
<li>
<p>Obtain a Kerberos ticket for the account obtained from the IdM administrator:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># kinit <em>idm_user</em></pre>
</div>
</div>
</li>
<li>
<p>Create a new Kerberos principal for Satellite&#160;Server to use to authenticate on the IdM server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ipa service-add <em>capsule/satellite.example.com</em></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Installing and configuring the idM client</div>
<ol class="arabic">
<li>
<p>On the base operating system of either the Satellite or Capsule that is managing the DNS service for your deployment, install the <code>ipa-client</code> package:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-maintain packages install ipa-client</pre>
</div>
</div>
</li>
<li>
<p>Configure the IdM client by running the installation script and following the on-screen prompts:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ipa-client-install</pre>
</div>
</div>
</li>
<li>
<p>Obtain a Kerberos ticket:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># kinit admin</pre>
</div>
</div>
</li>
<li>
<p>Remove any preexisting <code>keytab</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># rm /etc/foreman-proxy/dns.keytab</pre>
</div>
</div>
</li>
<li>
<p>Obtain the <code>keytab</code> for this system:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ipa-getkeytab -p capsule/<em>satellite.example.com@EXAMPLE.COM</em> \
-s <em>idm1.example.com</em> -k /etc/foreman-proxy/dns.keytab</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>When adding a keytab to a standby system with the same host name as the original system in service, add the <code>r</code> option to prevent generating new credentials and rendering the credentials on the original system invalid.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>For the <code>dns.keytab</code> file, set the group and owner to <code>foreman-proxy</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># chown foreman-proxy:foreman-proxy /etc/foreman-proxy/dns.keytab</pre>
</div>
</div>
</li>
<li>
<p>Optional: To verify that the <code>keytab</code> file is valid, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># kinit -kt /etc/foreman-proxy/dns.keytab \
capsule/<em>satellite.example.com@EXAMPLE.COM</em></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Configuring DNS zones in the IdM web UI</div>
<ol class="arabic">
<li>
<p>Create and configure the zone that you want to manage:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Navigate to <strong>Network Services</strong> &gt; <strong>DNS</strong> &gt; <strong>DNS Zones</strong>.</p>
</li>
<li>
<p>Select <strong>Add</strong> and enter the zone name.
For example, <code>example.com</code>.</p>
</li>
<li>
<p>Click <strong>Add and Edit</strong>.</p>
</li>
<li>
<p>Click the Settings tab and in the <strong>BIND update policy</strong> box, add the following to the semi-colon separated list:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">grant capsule\047<em>satellite.example.com@EXAMPLE.COM</em> wildcard * ANY;</pre>
</div>
</div>
</li>
<li>
<p>Set <strong>Dynamic update</strong> to <strong>True</strong>.</p>
</li>
<li>
<p>Enable <strong>Allow PTR sync</strong>.</p>
</li>
<li>
<p>Click <strong>Save</strong> to save the changes.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Create and configure the reverse zone:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Navigate to <strong>Network Services</strong> &gt; <strong>DNS</strong> &gt; <strong>DNS Zones</strong>.</p>
</li>
<li>
<p>Click <strong>Add</strong>.</p>
</li>
<li>
<p>Select <strong>Reverse zone IP network</strong> and add the network address in CIDR format to enable reverse lookups.</p>
</li>
<li>
<p>Click <strong>Add and Edit</strong>.</p>
</li>
<li>
<p>Click the <strong>Settings</strong> tab and in the <strong>BIND update policy</strong> box, add the following to the semi-colon separated list:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">grant capsule\047<em>satellite.example.com@EXAMPLE.COM</em> wildcard * ANY;</pre>
</div>
</div>
</li>
<li>
<p>Set <strong>Dynamic update</strong> to <strong>True</strong>.</p>
</li>
<li>
<p>Click <strong>Save</strong> to save the changes.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Configuring the Satellite or Capsule&#160;Server that manages the DNS service for the domain</div>
<ol class="arabic">
<li>
<p>Configure your Satellite&#160;Server or Capsule&#160;Server to connect to your DNS service:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer \
--foreman-proxy-dns-managed=false \
--foreman-proxy-dns-provider=nsupdate_gss \
--foreman-proxy-dns-server="<em>idm1.example.com</em>" \
--foreman-proxy-dns-tsig-keytab=/etc/foreman-proxy/dns.keytab \
--foreman-proxy-dns-tsig-principal="capsule/<em>satellite.example.com@EXAMPLE.COM</em>" \
--foreman-proxy-dns=true</pre>
</div>
</div>
</li>
<li>
<p>For each affected Capsule, update the configuration of that Capsule in the Satellite web UI:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Satellite web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Capsules</strong>, locate the Satellite&#160;Server, and from the list in the <strong>Actions</strong> column, select <strong>Refresh</strong>.</p>
</li>
<li>
<p>Configure the domain:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>In the Satellite web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Domains</strong> and select the domain name.</p>
</li>
<li>
<p>In the <strong>Domain</strong> tab, ensure <strong>DNS Capsule</strong> is set to the Capsule where the subnet is connected.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Configure the subnet:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>In the Satellite web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Subnets</strong> and select the subnet name.</p>
</li>
<li>
<p>In the <strong>Subnet</strong> tab, set <strong>IPAM</strong> to <strong>None</strong>.</p>
</li>
<li>
<p>In the <strong>Domains</strong> tab, select the domain that you want to manage using the IdM server.</p>
</li>
<li>
<p>In the <strong>Capsules</strong> tab, ensure <strong>Reverse DNS Capsule</strong> is set to the Capsule where the subnet is connected.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to save the changes.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="configuring-dynamic-dns-update-with-tsig-authentication_satellite"><a class="anchor" href="#configuring-dynamic-dns-update-with-tsig-authentication_satellite"></a>4.4.2. Configuring dynamic DNS update with TSIG authentication</h4>
<div class="paragraph">
<p>You can configure an IdM server to use the secret key transaction authentication for DNS (TSIG) technology that uses the <code>rndc.key</code> key file for authentication.
The TSIG protocol is defined in <a href="https://tools.ietf.org/html/rfc2845">RFC2845</a>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must ensure the IdM server is deployed and the host-based firewall is configured correctly.
For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/linux_domain_identity_authentication_and_policy_guide/installing-ipa#prereq-ports">Port Requirements</a> in the <em>Linux Domain Identity, Authentication, and Policy Guide</em>.</p>
</li>
<li>
<p>You must obtain <code>root</code> user access on the IdM server.</p>
</li>
<li>
<p>You must confirm whether Satellite&#160;Server or Capsule&#160;Server is configured to provide DNS service for your deployment.</p>
</li>
<li>
<p>You must configure DNS, DHCP and TFTP services on the base operating system of either the Satellite or Capsule that is managing the DNS service for your deployment.</p>
</li>
<li>
<p>You must create a backup of the answer file.
You can use the backup to restore the answer file to its original state if it becomes corrupted.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.15/html-single/installing_satellite_server_in_a_connected_network_environment/index#configuring-server_satellite">Configuring Satellite&#160;Server</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>To configure dynamic DNS update with TSIG authentication, complete the following steps:</p>
</div>
<div class="olist arabic">
<div class="title">Enabling external updates to the DNS zone in the IdM server</div>
<ol class="arabic">
<li>
<p>On the IdM Server, add the following to the top of the <code>/etc/named.conf</code> file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">########################################################################

include "/etc/rndc.key";
controls  {
inet _IdM_Server_IP_Address_ port 953 allow { _Satellite_IP_Address_; } keys { "rndc-key"; };
};
########################################################################</pre>
</div>
</div>
</li>
<li>
<p>Reload the <code>named</code> service to make the changes take effect:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># systemctl reload named</pre>
</div>
</div>
</li>
<li>
<p>In the IdM web UI, navigate to <strong>Network Services</strong> &gt; <strong>DNS</strong> &gt; <strong>DNS Zones</strong> and click the name of the zone.
In the <strong>Settings</strong> tab, apply the following changes:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Add the following in the <code>BIND update policy</code> box:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">grant "rndc-key" zonesub ANY;</pre>
</div>
</div>
</li>
<li>
<p>Set <strong>Dynamic update</strong> to <strong>True</strong>.</p>
</li>
<li>
<p>Click <strong>Update</strong> to save the changes.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Copy the <code>/etc/rndc.key</code> file from the IdM server to the base operating system of your Satellite&#160;Server.
Enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># scp /etc/rndc.key root@<em>satellite.example.com</em>:/etc/rndc.key</pre>
</div>
</div>
</li>
<li>
<p>To set the correct ownership, permissions, and SELinux context for the <code>rndc.key</code> file, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># restorecon -v /etc/rndc.key
# chown -v root:named /etc/rndc.key
# chmod -v 640 /etc/rndc.key</pre>
</div>
</div>
</li>
<li>
<p>Assign the <code>foreman-proxy</code> user to the <code>named</code> group manually.
Normally, satellite-installer ensures that the <code>foreman-proxy</code> user belongs to the <code>named</code> UNIX group, however, in this scenario Satellite does not manage users and groups, therefore you need to assign the <code>foreman-proxy</code> user to the <code>named</code> group manually.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># usermod -a -G named foreman-proxy</pre>
</div>
</div>
</li>
<li>
<p>On Satellite&#160;Server, enter the following <code>satellite-installer</code> command to configure Satellite to use the external DNS server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer \
--foreman-proxy-dns-managed=false \
--foreman-proxy-dns-provider=nsupdate \
--foreman-proxy-dns-server="<em>IdM_Server_IP_Address</em>" \
--foreman-proxy-dns-ttl=86400 \
--foreman-proxy-dns=true \
--foreman-proxy-keyfile=/etc/rndc.key</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Testing external updates to the DNS zone in the IdM server</div>
<ol class="arabic">
<li>
<p>Ensure that the key in the <code>/etc/rndc.key</code> file on Satellite&#160;Server is the same key file that is used on the IdM server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">key "rndc-key" {
        algorithm hmac-md5;
        secret "<em>secret-key</em>==";
};</pre>
</div>
</div>
</li>
<li>
<p>On Satellite&#160;Server, create a test DNS entry for a host.
For example, host <code><em>test.example.com</em></code> with an A record of <code>192.168.25.20</code> on the IdM server at <code>192.168.25.1</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># echo -e "server 192.168.25.1\n \
update add <em>test.example.com</em> 3600 IN A 192.168.25.20\n \
send\n" | nsupdate -k /etc/rndc.key</pre>
</div>
</div>
</li>
<li>
<p>On Satellite&#160;Server, test the DNS entry:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># nslookup <em>test.example.com</em> 192.168.25.1
Server:		192.168.25.1
Address:	192.168.25.1#53

Name:	test.example.com
Address: 192.168.25.20</pre>
</div>
</div>
</li>
<li>
<p>To view the entry in the IdM web UI, navigate to <strong>Network Services</strong> &gt; <strong>DNS</strong> &gt; <strong>DNS Zones</strong>.
Click the name of the zone and search for the host by name.</p>
</li>
<li>
<p>If resolved successfully, remove the test DNS entry:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># echo -e "server 192.168.25.1\n \
update delete <em>test.example.com</em> 3600 IN A 192.168.25.20\n \
send\n" | nsupdate -k /etc/rndc.key</pre>
</div>
</div>
</li>
<li>
<p>Confirm that the DNS entry was removed:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># nslookup <em>test.example.com</em> 192.168.25.1</pre>
</div>
</div>
<div class="paragraph">
<p>The above <code>nslookup</code> command fails and returns the <code>SERVFAIL</code> error message if the record was successfully deleted.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="reverting-to-internal-dns-service_satellite"><a class="anchor" href="#reverting-to-internal-dns-service_satellite"></a>4.4.3. Reverting to internal DNS service</h4>
<div class="paragraph">
<p>You can revert to using Satellite&#160;Server and Capsule&#160;Server as your DNS providers.
You can use a backup of the answer file that was created before configuring external DNS, or you can create a backup of the answer file.
For more information about answer files, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.15/html-single/installing_satellite_server_in_a_connected_network_environment/index#configuring-server_satellite">Configuring Satellite&#160;Server</a>.</p>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>On the Satellite or Capsule&#160;Server that you want to configure to manage DNS service for the domain, complete the following steps:</p>
</div>
<div class="ulist">
<div class="title">Configuring Satellite or Capsule as a DNS server</div>
<ul>
<li>
<p>If you have created a backup of the answer file before configuring external DNS, restore the answer file and then enter the <code>satellite-installer</code> command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer</pre>
</div>
</div>
</li>
<li>
<p>If you do not have a suitable backup of the answer file, create a backup of the answer file now.
To configure Satellite or Capsule as DNS server without using an answer file, enter the following <code>satellite-installer</code> command on Satellite or Capsule:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer \
--foreman-proxy-dns-managed=true \
--foreman-proxy-dns-provider=nsupdate \
--foreman-proxy-dns-server="127.0.0.1" \
--foreman-proxy-dns=true</pre>
</div>
</div>
<div class="paragraph">
<p>For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.15/html-single/installing_capsule_server/index#configuring-dns-dhcp-and-tftp_capsule">Configuring DNS, DHCP, and TFTP on Capsule&#160;Server</a>.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>After you run the <code>satellite-installer</code> command to make any changes to your Capsule configuration, you must update the configuration of each affected Capsule in the Satellite web UI.</p>
</div>
<div class="olist arabic">
<div class="title">Updating the configuration in the Satellite web UI</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Capsules</strong>.</p>
</li>
<li>
<p>For each Capsule that you want to update, from the <strong>Actions</strong> list, select <strong>Refresh</strong>.</p>
</li>
<li>
<p>Configure the domain:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Satellite web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Domains</strong> and click the domain name that you want to configure.</p>
</li>
<li>
<p>In the <strong>Domain</strong> tab, set <strong>DNS Capsule</strong> to the Capsule where the subnet is connected.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Configure the subnet:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Satellite web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Subnets</strong> and select the subnet name.</p>
</li>
<li>
<p>In the <strong>Subnet</strong> tab, set <strong>IPAM</strong> to <strong>DHCP</strong> or <strong>Internal DB</strong>.</p>
</li>
<li>
<p>In the <strong>Domains</strong> tab, select the domain that you want to manage using Satellite or Capsule.</p>
</li>
<li>
<p>In the <strong>Capsules</strong> tab, set <strong>Reverse DNS Capsule</strong> to the Capsule where the subnet is connected.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to save the changes.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="applying-custom-configuration_satellite"><a class="anchor" href="#applying-custom-configuration_satellite"></a>Appendix A: Applying custom configuration to Red&#160;Hat Satellite</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you install and configure Satellite for the first time using <code>satellite-installer</code>, you can specify that the DNS and DHCP configuration files are not to be managed by Puppet using the installer flags <code>--foreman-proxy-dns-managed=false</code> and <code>--foreman-proxy-dhcp-managed=false</code>.
If these flags are not specified during the initial installer run, rerunning of the installer overwrites all manual changes, for example, rerun for upgrade purposes.
If changes are overwritten, you must run the restore procedure to restore the manual changes.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.15/html-single/installing_satellite_server_in_a_connected_network_environment/index#restoring-manual-changes-overwritten-by-a-puppet-run_satellite">Restoring Manual Changes Overwritten by a Puppet Run</a>.</p>
</div>
<div class="paragraph">
<p>To view all installer flags available for custom configuration, run <code>satellite-installer --scenario satellite --full-help</code>.
Some Puppet classes are not exposed to the Satellite installer.
To manage them manually and prevent the installer from overwriting their values, specify the configuration values by adding entries to configuration file <code>/etc/foreman-installer/custom-hiera.yaml</code>.
This configuration file is in YAML format, consisting of one entry per line in the format of <code>&lt;puppet class&gt;::&lt;parameter name&gt;: &lt;value&gt;</code>.
Configuration values specified in this file persist across installer reruns.</p>
</div>
<div class="paragraph">
<p>Common examples include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For Apache, to set the ServerTokens directive to only return the Product name:</p>
<div class="listingblock">
<div class="content">
<pre>apache::server_tokens: Prod</pre>
</div>
</div>
</li>
<li>
<p>To turn off the Apache server signature entirely:</p>
<div class="listingblock">
<div class="content">
<pre>apache::server_signature: Off</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Puppet modules for the Satellite installer are stored under <code>/usr/share/foreman-installer/modules</code>.
Check the <code>.pp</code> files (for example: <em>moduleName</em>/manifests/<em>example</em>.pp) to look up the classes, parameters, and values.
Alternatively, use the <code>grep</code> command to do keyword searches.</p>
</div>
<div class="paragraph">
<p>Setting some values may have unintended consequences that affect the performance or functionality of Red&#160;Hat Satellite.
Consider the impact of the changes before you apply them, and test the changes in a non-production environment first.
If you do not have a non-production Satellite environment, run the Satellite installer with the <code>--noop</code> and <code>--verbose</code> options.
If your changes cause problems, remove the offending lines from <code>custom-hiera.yaml</code> and rerun the Satellite installer.
If you have any specific questions about whether a particular value is safe to alter, contact Red Hat support.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="restoring-manual-changes-overwritten-by-a-puppet-run_satellite"><a class="anchor" href="#restoring-manual-changes-overwritten-by-a-puppet-run_satellite"></a>Appendix B: Restoring manual changes overwritten by a Puppet run</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If your manual configuration has been overwritten by a Puppet run, you can restore the files to the previous state.
The following example shows you how to restore a DHCP configuration file overwritten by a Puppet run.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Copy the file you intend to restore.
This allows you to compare the files to check for any mandatory changes required by the upgrade.
This is not common for DNS or DHCP services.</p>
<div class="listingblock">
<div class="content">
<pre># cp /etc/dhcp/dhcpd.conf /etc/dhcp/dhcpd.backup</pre>
</div>
</div>
</li>
<li>
<p>Check the log files to note down the md5sum of the overwritten file.
For example:</p>
<div class="listingblock">
<div class="content">
<pre># journalctl -xe
...
/Stage[main]/Dhcp/File[/etc/dhcp/dhcpd.conf]: Filebucketed /etc/dhcp/dhcpd.conf to puppet with sum 622d9820b8e764ab124367c68f5fa3a1
...</pre>
</div>
</div>
</li>
<li>
<p>Restore the overwritten file:</p>
<div class="listingblock">
<div class="content">
<pre># puppet filebucket restore --local --bucket \
/var/lib/puppet/clientbucket /etc/dhcp/dhcpd.conf \ 622d9820b8e764ab124367c68f5fa3a1</pre>
</div>
</div>
</li>
<li>
<p>Compare the backup file and the restored file, and edit the restored file to include any mandatory changes required by the upgrade.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Reverting_Server_to_Download_Content_from_Red_Hat_CDN_satellite"><a class="anchor" href="#Reverting_Server_to_Download_Content_from_Red_Hat_CDN_satellite"></a>Appendix C: Reverting Satellite&#160;Server to download content from Red Hat CDN</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If your environment changes from disconnected to connected, you can reconfigure a disconnected Satellite&#160;Server to download content directly from the Red Hat CDN.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Content</strong> &gt; <strong>Subscriptions</strong>.</p>
</li>
<li>
<p>Click <strong>Manage Manifest</strong>.</p>
</li>
<li>
<p>Switch to the <strong>CDN Configuration</strong> tab.</p>
</li>
<li>
<p>Select <strong>Red Hat CDN</strong>.</p>
</li>
<li>
<p>Edit the <strong>URL</strong> field to point to the Red Hat CDN URL:</p>
<div class="paragraph">
<p><code><a href="https://cdn.redhat.com" class="bare">https://cdn.redhat.com</a></code></p>
</div>
</li>
<li>
<p>Click <strong>Update</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Satellite&#160;Server is now configured to download content from the Red Hat CDN the next time that it synchronizes repositories.</p>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Log in to the Satellite&#160;Server using SSH.</p>
</li>
<li>
<p>Use Hammer to reconfigure the CDN:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer organization configure-cdn --name="<em>My_Organization</em>" --type=redhat_cdn</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated Oct 2025
</div>
</div>
</body>
</html>