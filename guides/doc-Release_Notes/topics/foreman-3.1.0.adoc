= Foreman 3.1.0

A full list of changes is available via https://projects.theforeman.org/issues?set_filter=1&sort=id%3Adesc&status_id=closed&f%5B%5D=cf_12&op%5Bcf_12%5D=%3D&v%5Bcf_12%5D%5B%5D=1488[Redmine]

== Foreman

=== Users, Roles and Permissions

* Authorizer cache loads all permitted resources to memory - https://projects.theforeman.org/issues/34093[#34093]
* Unable to assign ansible roles to a host group via hammer/api with non-admin user - https://projects.theforeman.org/issues/33727[#33727]
* Drop view_tasks permission in core - https://projects.theforeman.org/issues/33387[#33387]
* Non-admin users can not list their Personal Access Tokens - https://projects.theforeman.org/issues/33371[#33371]

=== Templates

* Rename enable-puppetlabs-puppetX-repo to enable-puppetofficial-puppetX-repo - https://projects.theforeman.org/issues/34088[#34088]
* Add current date macro - https://projects.theforeman.org/issues/33907[#33907]
* Job Invocation - demodulize resource type for permission - https://projects.theforeman.org/issues/33853[#33853]
* Package manager snippet - https://projects.theforeman.org/issues/33695[#33695]
* Remove CentOS 8 AppStream kickstart workaround - https://projects.theforeman.org/issues/33680[#33680]
* Optionally use ignoredisk in kickstart default partition template - https://projects.theforeman.org/issues/33666[#33666]
* Rename UNDI iPXE filename to end with zero - https://projects.theforeman.org/issues/33584[#33584]
* Unlocking a locked template does nothing - https://projects.theforeman.org/issues/33570[#33570]
* Prepare Kickstart for RHEL 9 provisioning - https://projects.theforeman.org/issues/33566[#33566]
* Provisioning of EL no longer writes to tty3 - https://projects.theforeman.org/issues/33426[#33426]
* Add support for all RHEL derivatives in Content Host Registration - https://projects.theforeman.org/issues/33408[#33408]
* service network restart on EL8 doesnt workt work - https://projects.theforeman.org/issues/33092[#33092]
* Provide a description for shipped provisioning templates - https://projects.theforeman.org/issues/33034[#33034]
* AutoYaST iPXE should support static networking - https://projects.theforeman.org/issues/32937[#32937]
* Resource template input for job templates - https://projects.theforeman.org/issues/32822[#32822]
* include repo support for puppet 7 in provisioning snippets - https://projects.theforeman.org/issues/32602[#32602]
* save_to_file() in templates cuts off last end of line - https://projects.theforeman.org/issues/32461[#32461]
* Add ksvalidator and grub2 script checks to jenkins suite - https://projects.theforeman.org/issues/31947[#31947]
* Extract Environment from TemplateCombination model - https://projects.theforeman.org/issues/31732[#31732]
* Add eject cdrom snippet and call it from preseed finish script - https://projects.theforeman.org/issues/31454[#31454]

=== JavaScript stack

* Webpack cant find loaders for plugins in productiont find loaders for plugins in production - https://projects.theforeman.org/issues/34086[#34086]
* Host details active tab not set correctly when tab name contains spaces - https://projects.theforeman.org/issues/33894[#33894]
* The new host detail page allows me to build the host even if I have view only permissions - https://projects.theforeman.org/issues/33872[#33872]
* Host details page needs some integration tests - https://projects.theforeman.org/issues/33833[#33833]
* foreman-develop-package-release fails after removing react-intl - https://projects.theforeman.org/issues/33800[#33800]
* Update pf4 to 4.162.2 - https://projects.theforeman.org/issues/33758[#33758]
* Rename the link to old UI of Host detail - https://projects.theforeman.org/issues/33742[#33742]
* Refactor ToastsList to use slice pattern - https://projects.theforeman.org/issues/33690[#33690]
* remove snapshot testing from pf4 bookmarks - https://projects.theforeman.org/issues/33675[#33675]
* update Audits and Models pages buttons to pf4 after searchbar styles changed to PF4 - https://projects.theforeman.org/issues/33635[#33635]
* Toast type in errorToast is incorrect - https://projects.theforeman.org/issues/33514[#33514]
* Use gray background only for overview tab on Host detail page - https://projects.theforeman.org/issues/33423[#33423]
* Simplify ForemanSwitcher - https://projects.theforeman.org/issues/33416[#33416]
* Slot&Fill reducer doesnt remove a fill from the store after unregisteringt remove a fill from the store after unregistering - https://projects.theforeman.org/issues/33405[#33405]
* Toast message is hidden - https://projects.theforeman.org/issues/33316[#33316]
* Fix Nightly React test failures - https://projects.theforeman.org/issues/33265[#33265]
* Add React error boundaries - https://projects.theforeman.org/issues/33026[#33026]
* Add confirmation modal service - https://projects.theforeman.org/issues/32880[#32880]
* Add PF4 Searchbar - https://projects.theforeman.org/issues/32750[#32750]
* Make tabs on new Host detail page routable - https://projects.theforeman.org/issues/32398[#32398]
* Add action items dropdown extension mechanism in host details page - https://projects.theforeman.org/issues/30981[#30981]
* Add PF4 icons in empty state - https://projects.theforeman.org/issues/30865[#30865]

=== Web Interface

* Audit cards 'All audits' link doesn't filter the hosts All audits' link doesn't filter the hostAll audits link doesn't filter the host link doesnt filter the hostt filter the host - https://projects.theforeman.org/issues/34085[#34085]
* New Host detail page - small screen cant see build modalt see build modal - https://projects.theforeman.org/issues/33955[#33955]
* Host details tabs arent clickablet clickable - https://projects.theforeman.org/issues/33805[#33805]
* Add report and facts to host details kebab dropdown - https://projects.theforeman.org/issues/33714[#33714]
* Add build review modal in the new host details page - https://projects.theforeman.org/issues/33696[#33696]
* After creating new host group from help page, page doesnt redirect to main landing page.t redirect to main landing page. - https://projects.theforeman.org/issues/33637[#33637]
* Remove experimental host wizard page - https://projects.theforeman.org/issues/33621[#33621]
* "All audits" link in host details page doesnt workt work - https://projects.theforeman.org/issues/33617[#33617]
* Adding a banner for the experimental host details page - https://projects.theforeman.org/issues/33597[#33597]
* There should be buttons to link in between the old host page and the new host detail page - https://projects.theforeman.org/issues/33507[#33507]
* The new host detail page audits card gets misaligned - https://projects.theforeman.org/issues/33505[#33505]
* The new host detail page hostname should never be split to two lines - https://projects.theforeman.org/issues/33504[#33504]
* Mac Address label should have capital letters in the word MAC on the new host detail page - https://projects.theforeman.org/issues/33503[#33503]
* The host owner name should be expanded to the full width as it typically takes more than a one line - https://projects.theforeman.org/issues/33502[#33502]
* New host detail page MAC should remain on one line if theres a long host group next to its a long host group next to it - https://projects.theforeman.org/issues/33501[#33501]
* Experimental host page kebab menu buttons do nothing - https://projects.theforeman.org/issues/33491[#33491]
* Edit button in experimental host page doesnt workt work - https://projects.theforeman.org/issues/33490[#33490]
* Add setting for redirecting to the new host details page  - https://projects.theforeman.org/issues/33484[#33484]
* "Login Page Footer Text" Blocking Login Button on Foreman UI - https://projects.theforeman.org/issues/33481[#33481]
* Use the new confirm modal in the host status clear - https://projects.theforeman.org/issues/33473[#33473]
* Host details page tabs re-render continuously - https://projects.theforeman.org/issues/33324[#33324]
* broken Documentation button in search for react pages  - https://projects.theforeman.org/issues/33323[#33323]
* Add power options dropdown to details card - https://projects.theforeman.org/issues/33268[#33268]
* After creating new host group or Http proxy, page doesnt redirect to main landing page.t redirect to main landing page. - https://projects.theforeman.org/issues/33177[#33177]
* Host details tabs titles arent translatedt translated - https://projects.theforeman.org/issues/33151[#33151]
* Add console to the host details page - https://projects.theforeman.org/issues/32999[#32999]
* Add manageBookmarks to pf4 bookmarks - https://projects.theforeman.org/issues/32656[#32656]
* Move the host status page from foreman_wreckingball to core - https://projects.theforeman.org/issues/31638[#31638]
* The time ago  creation line is not translated in the new host details page - https://projects.theforeman.org/issues/30984[#30984]

=== Parameters

* Cannot search by organization or location parameter - https://projects.theforeman.org/issues/34008[#34008]

=== Host registration

* Fix name & path to OS host_init_config template - https://projects.theforeman.org/issues/33979[#33979]
* In UI form show proxies that have enabled Registration and templates features only - https://projects.theforeman.org/issues/33697[#33697]
* Run subscription-manager clean' when force=truesubscription-manager clean when force=true when force=true - https://projects.theforeman.org/issues/33540[#33540]
* Use PF4 styling for warning in registration form - https://projects.theforeman.org/issues/33390[#33390]
* Make the registration form more compact - https://projects.theforeman.org/issues/33389[#33389]
* The katello-ca-consumer is not being removed when the force option is checked in the Advanced' tab under Hosts -&gt; Register Host Advanced tab under Hosts -&gt; Register Host  tab under Hosts -&gt; Register Host  - https://projects.theforeman.org/issues/33305[#33305]
* Remove hard-coded link to documentation - https://projects.theforeman.org/issues/33215[#33215]
* Move katello_ca_consumer to registration template - https://projects.theforeman.org/issues/32678[#32678]

=== Settings

* Speed up settings index page - https://projects.theforeman.org/issues/33935[#33935]
* Foreman wont start with old settings in DB - https://projects.theforeman.org/issues/33861[#33861]
* Settings defined in settings.yaml do not take precedence in the new DSL - https://projects.theforeman.org/issues/33791[#33791]
* Setting DSL does not use the explicit initial values - https://projects.theforeman.org/issues/33740[#33740]
* SettingRegistry fails on older categories if setting table is not ready - https://projects.theforeman.org/issues/33706[#33706]
* Improve caching of SettingRegistry#load_values - https://projects.theforeman.org/issues/33640[#33640]
* Use new DSL to define Puppet settings - https://projects.theforeman.org/issues/33607[#33607]
* Use new DSL to define Provisioning settings - https://projects.theforeman.org/issues/33601[#33601]
* Use new DSL to define Notification settings - https://projects.theforeman.org/issues/33596[#33596]
* Use new DSL to define Email settings - https://projects.theforeman.org/issues/33595[#33595]
* Use new DSL to define Authentication settings - https://projects.theforeman.org/issues/33589[#33589]
* "OAuth map users" setting has a bad explanation - https://projects.theforeman.org/issues/33440[#33440]
* Settings search is broken in hammer - https://projects.theforeman.org/issues/33347[#33347]
* Mark Settings defined by DSL as special category in DB - https://projects.theforeman.org/issues/33280[#33280]
* Use new DSL to define General settings - https://projects.theforeman.org/issues/32893[#32893]
* Add custom validations to new setting DSL - https://projects.theforeman.org/issues/32403[#32403]
* Extract Puppet setting - https://projects.theforeman.org/issues/32064[#32064]
* Add more reliable way to detect Foreman CA certificate - https://projects.theforeman.org/issues/31049[#31049]
* Reorder settings - https://projects.theforeman.org/issues/29288[#29288]

=== DHCP

* Provide a meaningful report when a subnet has an invalid address - https://projects.theforeman.org/issues/33929[#33929]

=== Organizations and Locations

* Mismatch report fails with uninitialized constant Environment'uninitialized constant Environment - https://projects.theforeman.org/issues/33897[#33897]

=== Monitoring

* forget_status doesnt update the global host's statet update the global hosts states state - https://projects.theforeman.org/issues/33882[#33882]

=== Rails

* Cleanup Bullet config - https://projects.theforeman.org/issues/33851[#33851]
* Create proper HttpUrl validator - https://projects.theforeman.org/issues/32892[#32892]

=== BMC

* bmc_credentials_accessible hides BMC information in host view - https://projects.theforeman.org/issues/33826[#33826]

=== Statistics

* Unused leftover methods in core - https://projects.theforeman.org/issues/33802[#33802]

=== Host creation

* ipv4/6 auto-suggested address should be removed when the different domain and subnet with ipv6/4 are selected - https://projects.theforeman.org/issues/33794[#33794]
* Template is written twice when resolving provisioning templates for a host - https://projects.theforeman.org/issues/33793[#33793]
* The edit interface view (in interface tab) is too narrow for vmware network names - https://projects.theforeman.org/issues/33574[#33574]

=== API

* Drop non-standard compliant way of selecting api version - https://projects.theforeman.org/issues/33787[#33787]
* The default password in settings is not encoded - https://projects.theforeman.org/issues/33732[#33732]
* GraphQL response should return valid attribute values - https://projects.theforeman.org/issues/33647[#33647]
* please expose capabilities in the smart_proxies show API - https://projects.theforeman.org/issues/33611[#33611]
* Undefined method error when calling Api::V2::SmartProxiesController#import_puppetclasses - https://projects.theforeman.org/issues/33539[#33539]
* Host creation API "overwrite" parameter is not documented - https://projects.theforeman.org/issues/32541[#32541]
* Register query fields with custom resolvers - https://projects.theforeman.org/issues/32214[#32214]

=== Performance

* Drop Ruby pre-2.5 compatibility in Host#parse_ip_address - https://projects.theforeman.org/issues/33784[#33784]

=== Facts

* Ignore unstable legacy Facter facts  - https://projects.theforeman.org/issues/33778[#33778]
* RHSM IPv6 fact is not being parsed for foreman hosts. - https://projects.theforeman.org/issues/33776[#33776]
* Cloned viewer role cannot view facts - https://projects.theforeman.org/issues/33656[#33656]
* Reduce allocations in FactImporter#update_facts - https://projects.theforeman.org/issues/33639[#33639]
* Add fact parser registry - https://projects.theforeman.org/issues/33419[#33419]
* foreman-rake facts:clean fails with foreign key constraint violation - https://projects.theforeman.org/issues/30028[#30028]
* Ansible Windows network facts fail to import - https://projects.theforeman.org/issues/23936[#23936]

=== Inventory

* Handle different Windows installation types - https://projects.theforeman.org/issues/33769[#33769]
* Distinguish between "regular" hosts and hosts on which Foreman and/or smart proxy runs - models and fact processing - https://projects.theforeman.org/issues/32328[#32328]

=== Reporting

* Show warning on old Reports page - https://projects.theforeman.org/issues/33757[#33757]
* Rename the Report template button - https://projects.theforeman.org/issues/33432[#33432]
* Improve job invocation report template - https://projects.theforeman.org/issues/33223[#33223]

=== Search

* User shouldnt have a login current_usert have a login current_user - https://projects.theforeman.org/issues/33724[#33724]
* Add scoped search definition for arf reports that finds reports for hosts owned by current user - https://projects.theforeman.org/issues/33025[#33025]

=== Packaging

* Make dynflow-sidekiq@\* services part of foreman.service - https://projects.theforeman.org/issues/33723[#33723]

=== Rake tasks

* dont warn about apipie cache when using "rake config"t warn about apipie cache when using "rake config" - https://projects.theforeman.org/issues/33671[#33671]
* Add task to purge puppet data - https://projects.theforeman.org/issues/32652[#32652]

=== Plugin integration

* Allow foreman plugins to use webpack - https://projects.theforeman.org/issues/33626[#33626]
* Improve Facets registration - https://projects.theforeman.org/issues/31372[#31372]

=== Tests

* Fix test failures in plugins - https://projects.theforeman.org/issues/33560[#33560]
* Introduce skip pattern for ACL tests - https://projects.theforeman.org/issues/33122[#33122]
* capybara 3.32.1 breaks ReportTemplateJSIntegrationTest - https://projects.theforeman.org/issues/29481[#29481]

=== Audit Log

* Audits should be searchable by the current user so a role with filter to "see my audits" can be created - https://projects.theforeman.org/issues/33551[#33551]
* Audits cleanup - https://projects.theforeman.org/issues/27024[#27024]

=== Puppet integration

* Remove Puppet API endpoints - https://projects.theforeman.org/issues/33550[#33550]
* Extract Puppetclass migrations - https://projects.theforeman.org/issues/33541[#33541]
* Extract ConfigGroup migrations - https://projects.theforeman.org/issues/31096[#31096]
* Extract Environments migrations - https://projects.theforeman.org/issues/31060[#31060]

=== TFTP

* TFTP Unable to download Flatcar OS - https://projects.theforeman.org/issues/33469[#33469]

=== Compute resources - VMware

* Compute Resource cannot list the VMs if any VMs in the datacenter has config.instanceUuid set to ' - https://projects.theforeman.org/issues/33396[#33396]
* Compute profile references wrong datacenter path after changing datacenter name - https://projects.theforeman.org/issues/32792[#32792]
* app/models/concerns/orchestration/compute.rb:93 rescue ends up with error (ArgumentError): too few arguments - https://projects.theforeman.org/issues/32273[#32273]

=== Authentication

* Appropriate error message to be shown when creating authsource with same name as existing authsource.
 - https://projects.theforeman.org/issues/33248[#33248]

=== Compute resources - oVirt

* Foreman error on retrieving networks/vnics from oVirt if description contains non ascii characters - https://projects.theforeman.org/issues/32908[#32908]

=== Proxy gateway

* Drop unwanted URI parsing from NetHttpExtension - https://projects.theforeman.org/issues/32837[#32837]

=== Compute resources

* Associate a VM via API  to a compute resource - https://projects.theforeman.org/issues/32769[#32769]

=== Smart Proxy

* Add information about proxy status - https://projects.theforeman.org/issues/32727[#32727]

=== Internationalization

* [Foreman 2.3] [zh_CN/ja_JP] Localized string broken into two separate lines, at &lt;Administer - Locations page&gt;, at &lt;Administer - Organizations page&gt; and at &lt;Infrastructure - Domains&gt;. - https://projects.theforeman.org/issues/31338[#31338]

=== Trends

* Remove statistics & trends API endpoints - https://projects.theforeman.org/issues/30504[#30504]

=== Compute resources - libvirt

* Libvirt connection leaks - https://projects.theforeman.org/issues/14854[#14854]

== Installer

* disable registration module on smart proxies by default - https://projects.theforeman.org/issues/33864[#33864]
* Drop content type settings from katello module - https://projects.theforeman.org/issues/33830[#33830]
* Add host_reports to the installer - https://projects.theforeman.org/issues/33760[#33760]
* For Katello scenario, do not deploy Puppet by default - https://projects.theforeman.org/issues/33337[#33337]
* Foreman client certificates should be used to set up qpid queues - https://projects.theforeman.org/issues/33233[#33233]
* potential memory leak in puma
 - https://projects.theforeman.org/issues/33214[#33214]

=== Foreman modules

* Allow registration through content proxy via port 443 - https://projects.theforeman.org/issues/33863[#33863]
* Foreman Proxy Templates feature only listens to https by default - https://projects.theforeman.org/issues/33808[#33808]
*  Mark host where the installer is running as smart-proxy when deploying smart-proxy - https://projects.theforeman.org/issues/33790[#33790]
* Mark host where the installer is running as foreman when deploying foreman - https://projects.theforeman.org/issues/33789[#33789]
* Support Pulp 3.15 - https://projects.theforeman.org/issues/33766[#33766]
* Support OSTree & Python content enablement - https://projects.theforeman.org/issues/33751[#33751]
* workaround for pulpcore-content PostgreSQL connection issue - https://projects.theforeman.org/issues/33744[#33744]
* need to generate private db key for pulpcore 3.15 - https://projects.theforeman.org/issues/33733[#33733]
* dynflow workers started before redis - https://projects.theforeman.org/issues/33511[#33511]
* Use OpenSSL Ruby to ensure Apache certificate bundle is in the proper format on FIPS machines - https://projects.theforeman.org/issues/33431[#33431]
* Candlepin.conf refers to incorrect job schedule options - https://projects.theforeman.org/issues/33321[#33321]
* Refer to FQDN instead of "Foreman server" in SmartProxy registration error messages - https://projects.theforeman.org/issues/33320[#33320]

=== foreman-installer script

* Foreman Puppet plugin is enabled in the migration even if Foreman is disabled - https://projects.theforeman.org/issues/33577[#33577]
* Date used by katello-certs-check should be formatted correctly by program - https://projects.theforeman.org/issues/33109[#33109]

== Packaging

* clean up packaged plugins - https://projects.theforeman.org/issues/33867[#33867]
* Add cron to audits cleanup - https://projects.theforeman.org/issues/33623[#33623]

=== RPMs

* drop obsolete plugin from RPM packaging: digitalocean - https://projects.theforeman.org/issues/33880[#33880]
* drop obsolete plugin from RPM packaging: xen - https://projects.theforeman.org/issues/33879[#33879]
* katello-change-hostname should conditionally mention updating puppet-foreman-server-url - https://projects.theforeman.org/issues/33743[#33743]
* change hostname suggests dropped parameter foreman-proxy-content-parent-fqdn - https://projects.theforeman.org/issues/33719[#33719]
* Hostname change script should suggest new --puppet-server-foreman-url - https://projects.theforeman.org/issues/33580[#33580]

=== Debian/Ubuntu

* drop obsolete plugin from Debian packaging: xen - https://projects.theforeman.org/issues/33871[#33871]
* drop obsolete plugin from Debian packaging: cockpit - https://projects.theforeman.org/issues/33870[#33870]
* drop obsolete plugin from Debian packaging: digitalocean - https://projects.theforeman.org/issues/33869[#33869]
* drop obsolete plugin from Debian packaging: azure - https://projects.theforeman.org/issues/33868[#33868]
* Drop Ubuntu 18.04 support - https://projects.theforeman.org/issues/33785[#33785]

== Smart Proxy

* Require templates for Registration module - https://projects.theforeman.org/issues/33756[#33756]
* bundler warns /usr/share/foreman-proxy is not writable - https://projects.theforeman.org/issues/33520[#33520]

=== Security

* Disable Webrick client initiated renegotiation - https://projects.theforeman.org/issues/33452[#33452]
* native_ms/dnscmd providers should use shell escaping when running commands - https://projects.theforeman.org/issues/4026[#4026]

=== Templates

* Do not pass proxy in x-forwarded-for - https://projects.theforeman.org/issues/32607[#32607]

=== DHCP

* Add ip and mac address validations to api endpoints in dhcp api controller - https://projects.theforeman.org/issues/18069[#18069]

=== TFTP

* Smartproxy TFTP using wget -c to pull new PXE defaults produces errors while booting - https://projects.theforeman.org/issues/2412[#2412]
