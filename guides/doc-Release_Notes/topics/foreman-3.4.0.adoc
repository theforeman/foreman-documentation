= Foreman 3.4.0

A full list of changes is available via https://projects.theforeman.org/issues?set_filter=1&sort=id%3Adesc&status_id=closed&f%5B%5D=cf_12&op%5Bcf_12%5D=%3D&v%5Bcf_12%5D%5B%5D=1599[Redmine]

== Foreman

* Deprecated use of ERB.new with positional arguments - https://projects.theforeman.org/issues/35298[#35298]
* Wrong search props with new TableIndexPage - https://projects.theforeman.org/issues/35072[#35072]
* Scheduled job "Create RSS notifications" does not use proxy - https://projects.theforeman.org/issues/35015[#35015]
* Extension to inject global http proxy into net/http requests does not set the proxy correctly - https://projects.theforeman.org/issues/35014[#35014]
* Overview tab - Correct card order on host detail page - https://projects.theforeman.org/issues/35001[#35001]
* Turn off apipie_dsl cache in production - https://projects.theforeman.org/issues/34978[#34978]
* Broken inline help for validator type for puppet/ansible variables - https://projects.theforeman.org/issues/34971[#34971]
* New host details - Move expansion carat to right side for Details tab cards - https://projects.theforeman.org/issues/34961[#34961]
* Ubuntu Autoinstall PXELinux template does not reference Smart Proxy correctly - https://projects.theforeman.org/issues/34941[#34941]
* Update grub2 chainboot templates for scsi - https://projects.theforeman.org/issues/34702[#34702]
* Job report template enhancements - https://projects.theforeman.org/issues/34396[#34396]
* air gapped kickstart are slow down by impossible subscription-manager installation - https://projects.theforeman.org/issues/33565[#33565]
* Add some extra metadata to the default kickstart - https://projects.theforeman.org/issues/32612[#32612]
* Users email is not mandatory on creation but it is on update - https://projects.theforeman.org/issues/4007[#4007]

=== Compute resources

* Can't assign different networks on 2+ NICs with vNIC profiles selected - https://projects.theforeman.org/issues/35346[#35346]

=== Templates

* host_puppet_\* template macros ignores host_param - https://projects.theforeman.org/issues/35306[#35306]
* SLES 15 SP4 needs changes in the provisioning templates for deployments to work correctly - https://projects.theforeman.org/issues/35239[#35239]
* Permit puppet settings when puppet-plugins are not loaded - https://projects.theforeman.org/issues/35187[#35187]
* Rocky Linux UEFI grub2 chainloading is broken - https://projects.theforeman.org/issues/35182[#35182]
* Expose foreman short version as a macro to be used in templates - https://projects.theforeman.org/issues/35174[#35174]
* Puppet enablement flags are inconsistent - https://projects.theforeman.org/issues/35066[#35066]
* ks= kernel parameter in Kickstart default iPXE causes RHEL9 Anaconda failure to start - https://projects.theforeman.org/issues/34975[#34975]
* Allow setting up rex pull during provisioning and registration - https://projects.theforeman.org/issues/34969[#34969]
* Ubuntu Autoinstall netplan template fails on network identifier - https://projects.theforeman.org/issues/34718[#34718]
* Ubuntu Autoinstall template doesnt create root usert create root user - https://projects.theforeman.org/issues/34700[#34700]
* Expose previous application record revision through safemode - https://projects.theforeman.org/issues/32881[#32881]

=== Tests

* minitest raises deprecation warnings about global use - https://projects.theforeman.org/issues/35301[#35301]
* Redundant mocha/setup in bmc_test.rb - https://projects.theforeman.org/issues/35299[#35299]
* Use assert_equal in rendered template snapshots - https://projects.theforeman.org/issues/35196[#35196]
* friendly_id gem version 5.4.0 contains backward-incompatible change - https://projects.theforeman.org/issues/30659[#30659]

=== Rails

* Setting kwarks are ambigous in validation - https://projects.theforeman.org/issues/35293[#35293]
* Allow symbols in YAML columns - https://projects.theforeman.org/issues/35210[#35210]
* ApplicationRecord.&lt;=&gt; undefined method name'name - https://projects.theforeman.org/issues/35069[#35069]
* Allow rabl 0.15.0 - https://projects.theforeman.org/issues/34939[#34939]
* Switch Rails version to 6.1 - https://projects.theforeman.org/issues/34526[#34526]

=== Settings

* Ignore calico interfaces from Foreman - https://projects.theforeman.org/issues/35289[#35289]
* Refactor config rake to use Setting DSL - https://projects.theforeman.org/issues/35013[#35013]
* Fix the SettingValueException error message - https://projects.theforeman.org/issues/34921[#34921]
* Stop creating settings in the DB - https://projects.theforeman.org/issues/34305[#34305]
* root_pass setting does not enforce minimum length of 8 characters as the host and hostgroups forms do - https://projects.theforeman.org/issues/32925[#32925]

=== Development tools

* Add debugging with pry to the development setup guide - https://projects.theforeman.org/issues/35288[#35288]
* Use Ruby 2.7 for Rubocop GitHub Action - https://projects.theforeman.org/issues/35179[#35179]
* Adding a development installation guide for Foreman - https://projects.theforeman.org/issues/35160[#35160]
* Tests are broken after rack-test upgrade to 2.0.0+ - https://projects.theforeman.org/issues/35146[#35146]

=== Host registration

* Install katello-host-tools and tracer during host registration - https://projects.theforeman.org/issues/35280[#35280]
* SLES support for host registration - https://projects.theforeman.org/issues/35279[#35279]

=== Inventory

* Make columns on host index page selectable - https://projects.theforeman.org/issues/35274[#35274]
* Hide reports "Origin" column when table is already filtered by origin - https://projects.theforeman.org/issues/35126[#35126]
* Host's power status ping is limited to three seconds - https://projects.theforeman.org/issues/35083[#35083]

=== Compute resources - GCE

* Pin faraday to version 1.x - https://projects.theforeman.org/issues/35244[#35244]
* Update fog-google to a Ruby 3 compatible version - https://projects.theforeman.org/issues/32686[#32686]

=== API

* Add options for table preferences to the API - https://projects.theforeman.org/issues/35212[#35212]

=== JavaScript stack

* Failing integration tests  - https://projects.theforeman.org/issues/35173[#35173]
* Details tab - Add Tracer to System properties' cardSystem properties card card - https://projects.theforeman.org/issues/35017[#35017]
* Clean up MountingService - https://projects.theforeman.org/issues/34881[#34881]
* remove pf3 bookmarks - https://projects.theforeman.org/issues/34791[#34791]

=== Host groups

* Ansible plugin overrides the drop-down menu on the Hostgroups page  - https://projects.theforeman.org/issues/35167[#35167]

=== Unattended installations

* Add installation medium for Stream 9 - https://projects.theforeman.org/issues/35151[#35151]
* GPG key import should use https - https://projects.theforeman.org/issues/35135[#35135]
* userdata controller should be able to look up host by MAC address - https://projects.theforeman.org/issues/34887[#34887]

=== Audit Log

* Audit page shows "auditable id / Host2" for "Host1" but Host2 does not exist or deleted from the all hosts - https://projects.theforeman.org/issues/35132[#35132]

=== TFTP

* Migrate discovery and bootdisk templates to Foreman - https://projects.theforeman.org/issues/35127[#35127]

=== Internationalization

* Add Georgian (ka), Polish (pl) and Catalan (ca) langauges as those are having more than 40% translation rate - https://projects.theforeman.org/issues/35098[#35098]
* 'No matches found' text is untranslated in search bar - https://projects.theforeman.org/issues/32476[#32476]

=== Web Interface

* Copy to clipboard react component should allow copy icon - https://projects.theforeman.org/issues/35047[#35047]
* long breadcrumb switcher is out of view - https://projects.theforeman.org/issues/34998[#34998]
* Models index page does 3 same API requests  - https://projects.theforeman.org/issues/34987[#34987]
* update screenshots in readme file - https://projects.theforeman.org/issues/26853[#26853]

=== Compute resources - libvirt

* VM creation is broken with libvirt &gt;= 8.0.0 due to VNC password length - https://projects.theforeman.org/issues/35035[#35035]

=== Smart Proxy

* Smart Proxy upgrade/install fails due to proxy configuration in 'HTTP(S) proxy' in settings - https://projects.theforeman.org/issues/34996[#34996]

=== Database

* "ERROR:  relation "application_records" does not exist" when using models inside migrations - https://projects.theforeman.org/issues/34994[#34994]
* Remove updated_at from taxable_taxonomies table - https://projects.theforeman.org/issues/33672[#33672]

=== Search

* [BUG] The != and ~ search params does not work with os_minor parameter in Satellite 6.9 - https://projects.theforeman.org/issues/34989[#34989]

=== Monitoring

* new host details Details tab - Add Recent communication' cardRecent communication card card - https://projects.theforeman.org/issues/34981[#34981]

=== Notifications

* Drop the notification for hosts without an owner - https://projects.theforeman.org/issues/34948[#34948]

=== Host creation

* Ubuntu 20.04.3 new installation media path - https://projects.theforeman.org/issues/34942[#34942]
* Ubuntu Autoinstall hostname is not set correctly before finish template execution - https://projects.theforeman.org/issues/34908[#34908]
* as a user, I would like to create a new host from the hostgroup page - https://projects.theforeman.org/issues/9770[#9770]

=== Reporting

* don't re-evaluate TemplateInputs on every loop iteration - https://projects.theforeman.org/issues/34938[#34938]

=== Facts

* Details tab - System properties card updates - https://projects.theforeman.org/issues/34901[#34901]

=== Organizations and Locations

* It is possible to create taxonomies named 'Any Organization' and 'Any Location' - https://projects.theforeman.org/issues/28810[#28810]

== Installer

* /etc/pki/katello/certs/katello-server-ca.crt deployed with too strict permissions - https://projects.theforeman.org/issues/35335[#35335]
* Move puppet certs exist hook to hooks/ - https://projects.theforeman.org/issues/35208[#35208]
* Remove \`--disable-system-checks\` option - https://projects.theforeman.org/issues/35149[#35149]
* Drop umask check from Katello hooks - https://projects.theforeman.org/issues/35138[#35138]
* Introduce a development tuning profile - https://projects.theforeman.org/issues/35134[#35134]
* Remove VM overcommit hook - https://projects.theforeman.org/issues/35133[#35133]
* Starting or Restarting foreman.socket will raise a harmless "TCP_NODELAY failed: Operation not supported" error in Red Hat Satellite 6.9/6.10/6.11
 - https://projects.theforeman.org/issues/35089[#35089]
* Drop use of pulp_client certificates - https://projects.theforeman.org/issues/35005[#35005]
* Drop apipie_dsl:cache generation - https://projects.theforeman.org/issues/34977[#34977]
* Allow configuring cockpit with multiple origins through satellite-installer' - https://projects.theforeman.org/issues/34943[#34943]
* Option --certs-regenerate is stored and thus causes certificate regeneration to happen every run - https://projects.theforeman.org/issues/34875[#34875]
* Missing smart-proxy-salt parameters in foreman-proxy scenario - https://projects.theforeman.org/issues/31502[#31502]

=== Foreman modules

* Insights client traffic through a Satellite 6.11 Capsule fails - https://projects.theforeman.org/issues/35278[#35278]
* Autoindexing on /pub is broken because apache mod_autoindex is not loaded - https://projects.theforeman.org/issues/35227[#35227]

=== External modules

* cache-enabled setting for proxy content module isn't migrated to 'true' properly - https://projects.theforeman.org/issues/35157[#35157]

=== foreman-installer script

* Capsule certs regeneration fails with an error if the organization has a \`\` in the name\` in the name - https://projects.theforeman.org/issues/34906[#34906]

== Packaging

* Leapp upgrade requires foreman-selinux and katello-selinux to be reinstalled - https://projects.theforeman.org/issues/35198[#35198]
* Package foreman-maintain for Debian - https://projects.theforeman.org/issues/35139[#35139]
* Have a foreman-release package for Debian releases - https://projects.theforeman.org/issues/35113[#35113]
* satellite-change-hostname on capsule runs deprecated capsule-installer - https://projects.theforeman.org/issues/34896[#34896]

=== Debian/Ubuntu

* Have the foreman-release.deb rpm symlinked to latest version - https://projects.theforeman.org/issues/35349[#35349]
* Update sinatra to 2.2.1 to match rack-protection in core - https://projects.theforeman.org/issues/35258[#35258]
* Remove postinst script duplication across OS packages - https://projects.theforeman.org/issues/7988[#7988]

=== RPMs

* Katello cron job needed to run the alternate content source refresh rake task on a schedule - https://projects.theforeman.org/issues/34898[#34898]

=== Tests

* BmcTest requires ipmitool to be installed - https://projects.theforeman.org/issues/35185[#35185]

=== PuppetCA

* Drop puppetca_puppet_cert provider - https://projects.theforeman.org/issues/35184[#35184]

=== DNS

* dns_dnscmd_main uses timeout as a global method - https://projects.theforeman.org/issues/35183[#35183]
