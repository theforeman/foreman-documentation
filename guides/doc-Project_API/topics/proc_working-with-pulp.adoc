[id="working-with-pulp"]
= Working with Pulp

When sending API requests to Pulp integrated with {Project}, use certificate-based authentication.

The following examples of Pulp API requests include examples of how to use the Pulp CLI as an alternative.
When you run `pulp` commands as root, Pulp CLI uses system certificates configured in `/root/.config/pulp/cli.toml`.

.Listing repositories
The endpoint to list all repositories is `/pulp/api/v3/repositories/`.
The following query obtains a list of repositories from _{foreman-example-com}_ while supplying the certificates necessary to issue a request from a {ProjectServer}.

Example request:

[options="nowrap", subs="+quotes,attributes"]
----
curl --cacert /etc/pki/katello/certs/katello-server-ca.crt \
--cert /etc/foreman/client_cert.pem --key /etc/foreman/client_key.pem \
https://_<{foreman-example-com}>_/pulp/api/v3/repositories/ \
| python3 -m json.tool
----

Example response:

[options="nowrap", subs="+quotes,attributes"]
----
{
    "count": 1,
    "next": null,
    "previous": null,
    "results": [
        {
            "pulp_href": "/pulp/api/v3/repositories/rpm/rpm/018cd05a-4b83-73db-b71c-587c6181d89b/",
            "pulp_created": "2024-01-03T17:23:47.715882Z",
            "versions_href": "/pulp/api/v3/repositories/rpm/rpm/018cd05a-4b83-73db-b71c-587c6181d89b/versions/",
            "pulp_labels": {},
            "latest_version_href": "/pulp/api/v3/repositories/rpm/rpm/018cd05a-4b83-73db-b71c-587c6181d89b/versions/1/",
            "name": "Red_Hat_Enterprise_Linux_8_for_x86_64_-_BaseOS_Kickstart_8_9-49838",
            "description": null,
            "retain_repo_versions": null,
            "remote": null
        }
    ]
}
----

Alternatively, use the Pulp CLI to list repositories:

[options="nowrap", subs="+quotes,attributes"]
----
# pulp repository list
[
  {
    "pulp_href": "/pulp/api/v3/repositories/rpm/rpm/018cd025-c6ef-7237-a99e-70bab3d30941/",
    "pulp_created": "2024-01-03T16:26:25.904682Z",
    "versions_href": "/pulp/api/v3/repositories/rpm/rpm/018cd025-c6ef-7237-a99e-70bab3d30941/versions/",
    "pulp_labels": {},
    "latest_version_href": "/pulp/api/v3/repositories/rpm/rpm/018cd025-c6ef-7237-a99e-70bab3d30941/versions/1/",
    "name": "Red_Hat_Enterprise_Linux_8_for_x86_64_-_AppStream_RPMs_8-2875",
    "description": null,
    "retain_repo_versions": null,
    "remote": null
  }
]
----

.Inspecting Pulp status
The endpoint to return status information about Pulp is `/pulp/api/v3/status/`.
Requests for Pulp Status do not require authentication.

Example request:

[options="nowrap", subs="+quotes,attributes"]
----
curl https://_<{foreman-example-com}>_/pulp/api/v3/status/ \
| python3 -m json.tool
----

Example response:

[options="nowrap", subs="+quotes,attributes"]
----
{
    "versions": [
        {
            "component": "core",
            "version": "3.39.4",
            "package": "pulpcore",
            "domain_compatible": true
        },
        {
            "component": "rpm",
            "version": "3.23.0",
            "package": "pulp-rpm",
            "domain_compatible": true
        },
. ..
----

Alternatively, use the Pulp CLI to retrieve Pulp status:

[options="nowrap", subs="+quotes,attributes"]
----
# pulp status
{
  "versions": [
    {
      "component": "core",
      "version": "3.39.4",
      "package": "pulpcore",
      "domain_compatible": true
    },
    {
      "component": "rpm",
      "version": "3.23.0",
      "package": "pulp-rpm",
      "domain_compatible": true
    },
. ..
----

[role="_additional-resources"]
.Additional resources

* Run `pulp --help` for details on how to use the Pulp CLI.
* The full API reference for Pulp is available on your {ProjectServer} at `https://_<{foreman-example-com}>_/pulp/api/v3/docs/`.
