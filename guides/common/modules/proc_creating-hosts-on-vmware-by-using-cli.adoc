:_mod-docs-content-type: PROCEDURE

[id="creating-hosts-on-vmware-by-using-cli_{context}"]
= Creating hosts on VMware by using the Hammer CLI

[role="_abstract"]
The VMware vSphere provisioning process provides the option to create hosts over a network connection or using an existing image.

For network-based provisioning, you must create a host to access either {ProjectServer} or {SmartProxyServers} on a VMware vSphere virtual network, so that the host has access to PXE provisioning services.
The new host entry triggers the VMware vSphere server to create the virtual machine.
If the virtual machine detects the defined {SmartProxy} through the virtual network, the virtual machine boots to PXE and begins to install the chosen operating system.

For more information about additional host creation parameters for this compute resource, enter the `hammer host create --help` command.

.Prerequisites
* If you use a virtual network on the VMware vSphere server for provisioning, ensure that you select a virtual network that does not provide DHCP assignments.
This causes DHCP conflicts with {ProjectServer} when booting new hosts.

* For image-based provisioning, use the pre-existing image as a basis for the new volume.

.Procedure

* Create the host by using one of the following methods:

** Create the host from a network with the `hammer host create` command and include `--provision-method build` to use network-based provisioning:
+
[options="nowrap" subs="+quotes,attributes"]
----
$ hammer host create \
--build true \
--compute-attributes="cpus=1,corespersocket=2,memory_mb=1024,cluster=MyCluster,path=MyVMs,start=true" \
--compute-resource "_My_VMware_" \
--enabled true \
--hostgroup "_My_Host_Group_" \
--interface "managed=true,primary=true,provision=true,compute_type=VirtualE1000,compute_network=mynetwork" \
--location "_My_Location_" \
--managed true \
--name "_My_Host_" \
--organization "_My_Organization_" \
--provision-method build \
--volume="size_gb=20G,datastore=Data,name=myharddisk,thin=true"
----
** Create the host from an image with the `hammer host create` command and include `--provision-method image` to use image-based provisioning:
+
[options="nowrap" subs="+quotes,attributes"]
----
$ hammer host create \
--compute-attributes="cpus=1,corespersocket=2,memory_mb=1024,cluster=MyCluster,path=MyVMs,start=true" \
--compute-resource "_My_VMware_" \
--enabled true \
--hostgroup "_My_Host_Group_" \
--image "_My_VMware_Image_" \
--interface "managed=true,primary=true,provision=true,compute_type=VirtualE1000,compute_network=mynetwork" \
--location "_My_Location_" \
--managed true \
--name "_My_Host_" \
--organization "_My_Organization_" \
--provision-method image \
--volume="size_gb=20G,datastore=Data,name=myharddisk,thin=true"
----
