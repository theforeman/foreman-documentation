[id="adding-life-cycle-environments_{context}"]

= Adding Life Cycle Environments to Capsule Servers

If your Capsule Server has the content functionality enabled, you must add an environment so that Capsule can synchronize content from Satellite Server and provide content to host systems.

Do not assign the _Library_ lifecycle environment to your Capsule Server because it triggers an automated Capsule sync every time the CDN updates a repository. This might consume multiple system resources on Capsules, network bandwidth between Satellite and Capsules, and available disk space on Capsules.

You can use Hammer CLI on Satellite Server or the Satellite web UI.

.Procedure

To add a life cycle environment to Capsule Server, complete the following steps:

. In the Satellite web UI, navigate to *Infrastructure* > *Capsules*, and select the Capsule that you want to add a life cycle to.
. Click *Edit* and click the *Life Cycle Environments* tab.
. From the left menu, select the life cycle environments that you want to add to Capsule and click *Submit*.
. To synchronize the content on the Capsule, click the *Overview* tab and click *Synchronize*.
. Select either *Optimized Sync* or *Complete Sync*.

.For CLI Users

. To display a list of all Capsule Servers, on Satellite Server, enter the following command:
+
[options="nowrap"]
----
# hammer capsule list
----
+
Note the Capsule ID of the Capsule that you want to add a life cycle to.
+
. Using the ID, verify the details of your Capsule:
+
[options="nowrap" subs="+quotes"]
----
# hammer capsule info --id _capsule_id_
----
+
. Display the life cycle environments that are available and note the environment ID:
+
[options="nowrap" subs="+quotes"]
----
# hammer capsule content available-lifecycle-environments \
--id _capsule_id_
----
+
. To view the life cycle environments available for your Capsule Server, enter the following command and note the ID and the organization name:
+
[options="nowrap" subs="+quotes"]
----
# hammer capsule content available-lifecycle-environments --id _capsule_id_
----
+
. Add the life cycle environment to your Capsule Server:
+
[options="nowrap" subs="+quotes"]
----
# hammer capsule content add-lifecycle-environment \
--id _capsule_id_ --organization "_My_Organization_" \
--environment-id _environment_id_
----
+
Repeat for each life cycle environment you want to add to Capsule Server.
+
. Synchronize the content from Satellite to Capsule.
+
* To synchronize all content from your Satellite Server environment to Capsule Server, enter the following command:
+
[options="nowrap" subs="+quotes"]
----
# hammer capsule content synchronize --id _capsule_id_
----
+
* To synchronize a specific life cycle environment from your Satellite Server to Capsule Server, enter the following command:
+
[options="nowrap" subs="+quotes"]
----
# hammer capsule content synchronize --id _external_capsule_id_ \
--environment-id _environment_id_
----
