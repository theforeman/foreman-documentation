[id="Installing_the_Discovery_Service_{context}"]
= Installing the Discovery service

ifdef::satellite,orcharhino[]
The Discovery service is enabled by default on {ProjectServer}.
endif::[]
ifndef::satellite,orcharhino[]
Enable the Discovery service on {ProjectServer}.
endif::[]
Additionally, you can enable the Discovery service on any {SmartProxyServers} that provide the TFTP service.

.Procedure
ifndef::satellite,orcharhino[]
. Install the Discovery plugin on {ProjectServer}:
+
[options="nowrap" subs="+quotes,attributes"]
----
# {foreman-installer} \
--enable-foreman-plugin-discovery \
--enable-foreman-proxy-plugin-discovery \
--foreman-proxy-plugin-discovery-install-images=true
----
+
This command downloads the latest Discovery ISO.
If you require another version, add the following argument: `--foreman-proxy-plugin-discovery-source-url=https://downloads.theforeman.org/discovery/releases/_x.y_/`
endif::[]
ifdef::satellite,orcharhino[]
. Install `{fdi-package-name}` on {ProjectServer}:
+
[options="nowrap" subs="+quotes,attributes"]
----
# {project-package-install} {fdi-package-name}
----
+
The `{fdi-package-name}` package installs the Discovery ISO to the `/usr/share/foreman-discovery-image/` directory.
ifndef::satellite[]
+
You can also build a custom Discovery image.
For more information, see xref:Building_a_Discovery_Image_{context}[].
endif::[]
endif::[]
. If you want to use {SmartProxyServer}, install the Discovery plugin on {SmartProxyServer}:
+
ifdef::satellite,orcharhino[]
[options="nowrap" subs="+quotes,attributes"]
----
# {foreman-installer} \
--enable-foreman-proxy-plugin-discovery
----
endif::[]
ifndef::satellite,orcharhino[]
[options="nowrap" subs="+quotes,attributes"]
----
# {foreman-installer} \
--enable-foreman-proxy-plugin-discovery \
--foreman-proxy-plugin-discovery-install-images=true
----
+
This command downloads the latest Discovery image.
If you require another version, add the following argument: `--foreman-proxy-plugin-discovery-source-url=https://downloads.theforeman.org/discovery/releases/_x.y_/`
endif::[]
ifdef::satellite,orcharhino[]
. If you want to use {SmartProxyServer}, install `{fdi-package-name}` on {SmartProxyServer}:
+
[options="nowrap" subs="+quotes,attributes"]
----
# {project-package-install} {fdi-package-name}
----
endif::[]
. Configure the Discovery {SmartProxy} for the subnet with discoverable hosts.
.. In the {ProjectWebUI}, navigate to *Infrastructure* > *Subnets*.
.. Select a subnet.
ifdef::satellite[]
.. Click the *{SmartProxies}* tab.
.. Select the *Discovery {SmartProxy}* that you want to use.
endif::[]
ifndef::satellite[]
.. Click the *Proxies* tab.
.. Select the *Discovery Proxy* that you want to use.
endif::[]

+
Perform this for each subnet that you want to use.

[NOTE]
====
ifdef::satellite[]
The Foreman Discovery image provided with {Project} is based on {EL} 8.
endif::[]
ifdef::orcharhino[]
The Foreman Discovery image provided with {Project} is based on CentOS Stream 8.
endif::[]
ifndef::satellite,orcharhino[]
{Project} provides link:https://downloads.theforeman.org/discovery/releases/[multiple versions] of the Foreman Discovery image (FDI):

* FDI version 4.0 and newer are based on CentOS Stream 8.
* FDI versions older than 4.0 are based on CentOS Stream 7.
endif::[]
====
