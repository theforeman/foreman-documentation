:_mod-docs-content-type: PROCEDURE

[id="creating-discovery-rules-by-using-cli"]
= Creating Discovery rules by using Hammer CLI

[role="_abstract"]
As a method of automating the provisioning process for discovered hosts, {Project} provides a feature to create Discovery rules.
These rules define how discovered hosts automatically provision themselves, based on the assigned host group.
For example, you can automatically provision hosts with a high CPU count as hypervisors.
Likewise, you can provision hosts with large hard disks as storage servers.

[NOTE]
====
Auto provisioning does not currently allow configuring network interface cards (NICs).
All systems are being provisioned with the NIC configuration that was detected during discovery.
However, you can set the NIC in the `{provision-script}` scriptlet, by using a script, or by using configuration management at a later stage.
====

.Procedure

. Create the rule by using Hammer:
+
[options="nowrap" subs="+quotes"]
----
$ hammer discovery-rule create \
--enabled true \
--hostgroup "_My_Host_Group_" \
--hostname "hypervisor-<%= rand(99999) %>" \
--hosts-limit 5 \
--name "_My_Hypervisor_" \
--priority 5 \
--search "cpu_count  > 8"
----
. Automatically provision a host with the `hammer discovery auto-provision` command:
+
----
$ hammer discovery auto-provision --name "macabcdef123456"
----
