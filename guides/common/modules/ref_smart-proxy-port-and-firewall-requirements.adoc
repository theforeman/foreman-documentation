:_mod-docs-content-type: REFERENCE

[id="{smart-proxy-context}-port-and-firewall-requirements"]
= {SmartProxy} port and firewall requirements

[role="_abstract"]
The following tables indicate the destination port and the direction of incoming and outgoing traffic for {SmartProxyServers}.

[NOTE]
====
ICMP to Port 7 UDP and TCP must not be rejected, but can be dropped.
The DHCP {SmartProxy} sends an ECHO REQUEST to the Client network to verify that an IP address is free.
A response prevents IP addresses from being allocated.
====

.{SmartProxy} incoming traffic
[cols="15%,15%,15%,15%,20%,20%",options="header"]
|====
| Destination Port | Protocol | Service |Source| Required For | Description
| 53 | TCP and UDP | DNS | DNS Servers and clients | Name resolution | DNS (optional)
| 67 | UDP | DHCP | Client | Dynamic IP | DHCP (optional)
| 69 | UDP | TFTP | Client | TFTP Server (optional) |
ifdef::katello,satellite,orcharhino[]
| 443, 80 | TCP | HTTPS, HTTP | Client | Content Retrieval | Content
| 443, 80 | TCP | HTTPS, HTTP| Client | Content Host Registration | {SmartProxy} CA RPM installation
| 443 | TCP | HTTPS | {ProjectName} | Content Mirroring | Management
| 443 | TCP | HTTPS | {ProjectName} | {SmartProxy} API | Smart Proxy functionality
| 443 | TCP | HTTPS | Client | Content Host registration | Initiation

Uploading facts

Sending installed packages and traces
| 1883 | TCP | MQTT | Client | Pull based REX (optional) | Hosts for REX job notification (optional)
endif::[]
| 8000 | TCP | HTTP | Client | Provisioning templates | Template retrieval for client installers, iPXE or UEFI HTTP Boot
| 8000 | TCP | HTTP | Client | PXE Boot | Installation
| 8140 | TCP | HTTPS | Client | Puppet agent | Client updates (optional)
ifdef::katello,satellite,orcharhino[]
| 8443 | TCP | HTTPS | Client | Content Host registration | Deprecated and only needed for Client hosts deployed before upgrades
endif::[]
| {smartproxy_port} | TCP | HTTPS | {ProjectName} | {SmartProxy} API | {SmartProxy} functionality
| {smartproxy_port} | TCP | HTTPS | Client | Register Endpoint | Client registration with {SmartProxyServers}
| {smartproxy_port} | TCP | HTTPS | Client | OpenSCAP | Configure Client (if the OpenSCAP plugin is installed)
| {smartproxy_port} | TCP | HTTPS | Discovered Node|Discovery |Host discovery and provisioning (if the discovery plugin is installed)
ifdef::katello,satellite,orcharhino[]
| {smartproxy_port} | TCP | HTTPS | Client | Pull based REX (optional) | Hosts for REX job notification (optional)
endif::[]
|====

.{SmartProxy} outgoing traffic
[cols="15%,15%,15%,15%,20%,20%",options="header"]

|====
| Destination Port | Protocol | Service | Destination | Required For | Description
| | ICMP | ping  | Client | DHCP | Free IP checking (optional)
| 7 | TCP | echo | Client | DHCP |Free IP checking (optional)
| 22 | TCP | SSH | Target host | Remote execution | Run jobs
| 53 | TCP and UDP | DNS | DNS Servers on the internet | DNS Server | Resolve DNS records (optional)
| 53 | TCP and UDP | DNS | DNS Server | {SmartProxy} DNS | Validation of DNS conflicts (optional)
| 68 | UDP | DHCP | Client | Dynamic IP | DHCP (optional)
| 443 | TCP | HTTPS | {Project} | {SmartProxy} | {SmartProxy}

Configuration management

Template retrieval

OpenSCAP

Remote Execution result upload
ifdef::satellite[]
| 443 | TCP | HTTPS | Red{nbsp}Hat Portal | SOS report | Assisting support cases (optional)
endif::[]
ifdef::katello,satellite,orcharhino[]
| 443 | TCP | HTTPS | {Project} | Content | Sync
| 443 | TCP | HTTPS | {Project} | Client communication | Forward requests from Client to {Project}
endif::[]
| 443 | TCP | HTTPS | Infoblox DHCP Server| DHCP management | When using Infoblox for DHCP, management of the DHCP leases (optional)
| 623 |  |  | Client | Power management | BMC On/Off/Cycle/Status
| 7911 | TCP | DHCP, OMAPI | DHCP Server| DHCP | The DHCP target is configured using `--foreman-proxy-dhcp-server` and defaults to localhost

ISC and `remote_isc` use a configurable port that defaults to 7911 and uses OMAPI
| 8443 | TCP | HTTPS | Client | Discovery | {SmartProxy} sends reboot command to the discovered host (optional)
|====
