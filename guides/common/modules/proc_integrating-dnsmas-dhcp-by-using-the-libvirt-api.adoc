[id="integrating-dnsmas-dhcp-by-using-the-libvirt-api_{context}"]
= Integrating dnsmasq DHCP by using the libvirt API

The _dhcp_libvirt_ plugin manages IP reservations and leases using `dnsmasq` through the libvirt API.
It uses `ruby-libvirt` to connect to the local or remote instance of libvirt daemon.

.Procedure
. You can use `{foreman-installer}` to configure `dhcp_libvirt`:
+
[options="nowrap", subs="+quotes,verbatim,attributes"]
----
foreman-installer \
--foreman-proxy-dhcp true \
--foreman-proxy-dhcp-provider libvirt \
--foreman-proxy-libvirt-network default \
--foreman-proxy-libvirt-network qemu:///system
----

. For each affected {SmartProxy}, update the configuration of that {SmartProxy} in the {ProjectWebUI}. See xref:associating-the-dhcp-service-with-a-subnet_admin-network[].

