:_mod-docs-content-type: REFERENCE

[id="http-capable-boot-loaders"]
= HTTP-capable boot loaders

[role="_abstract"]
In addition to the TFTP-based PXE mechanism, {Project} supports boot methods that use HTTP.
These methods use the *HTTPBoot* module of {SmartProxy} to deliver boot loaders and installation files.
HTTP-capable boot methods in {Project} are *iPXE*, *iPXE chainloading*, *Grub2*, and *UEFI HTTP Boot*.
Each method offers advantages depending on the firmware type and network environment.

The *HTTPBoot* feature exposes the same files that are available via TFTP, but over the HTTP or HTTPS protocol.
This can improve boot reliability in environments where TFTP is blocked, unreliable, or slow.

The boot methods in {Project} use the following boot workflows:

iPXE chainloading (PXE to HTTP)::

The boot process starts with a traditional PXE (TFTP) stage and then switches to HTTP for improved performance and flexibility.
With this hybrid approach, existing PXE infrastructure can use HTTP for the later boot stages without requiring firmware-level HTTP support.
+
iPXE chainloading uses the following workflow:
+
. The firmware downloads the appropriate iPXE loader via TFTP.
  * BIOS downloads `undionly-ipxe.0`.
  * UEFI downloads `ipxe.efi`.
. iPXE initializes the network and switches to HTTP, requesting an iPXE script such as `menu.ipxe`.

iPXE, Grub2, and UEFI HTTP(S) boot::

UEFI firmware directly loads boot loaders by using HTTP or HTTPS without any TFTP step.
+
iPXE, Grub2, and UEFI HTTP(S) Boot use the following workflow:
+
. UEFI firmware requests boot loader files from the {SmartProxy} via HTTP or HTTPS, for example, `ipxe-_My_Architecture_.efi`.
. Grub2 loads `grub.cfg` and starts the OS installer.

The {SmartProxy}’s *HTTPBoot* module and *TFTP* service share the same root directory. 
By default, this directory is `/var/lib/tftpboot/`.

[options="nowrap", subs="+quotes,verbatim,attributes"]
----
URL path:   http://__{smartproxy-example-com}__/httpboot/
Filesystem: /var/lib/tftpboot/
----

This mapping means that the `/httpboot/` HTTP URL path directly corresponds to the local filesystem under `/var/lib/tftpboot/`.
For example, a file located at `/var/lib/tftpboot/pxegrub2/grubx64.efi` is available over HTTP at `http://_{smartproxy-example-com}_/httpboot/pxegrub2/grubx64.efi`.

This shared structure simplifies management by ensuring that both PXE (TFTP) and HTTP clients use the same set of boot loader binaries and configuration files.

.iPXE and HTTPBoot-related directory layout
====
----
# tree /var/lib/tftpboot/
/var/lib/tftpboot/
 ├── undionly-ipxe.0
 ├── ipxe.efi
 ├── ipxe-x64.efi
 └── grub2/
      ├── grubx64.efi
      └── shimx64.efi
----
====

.Default boot loader files

[cols="1,1,1", options="header"]
|===
| Default path
| Purpose
| User action

| `/var/lib/tftpboot/undionly-ipxe.0`
| iPXE boot loader for **iPXE Chain BIOS**.
Used in BIOS environments as the first-stage loader that transitions from TFTP-based PXE to HTTP-based iPXE boot.
| *Place the `undionly-ipxe.0` binary in this directory.*

| `/var/lib/tftpboot/ipxe.efi`
| iPXE boot loader for **iPXE Chain UEFI**.
Used in UEFI environments to chainload into iPXE for HTTP-capable provisioning.
| *Place the `ipxe.efi` binary in this directory.*

| `/var/lib/tftpboot/ipxe-x64.efi`
| Architecture-specific iPXE binary for **iPXE UEFI HTTP** boot.
Used for direct iPXE boot via HTTP without TFTP chainloading.
| *Place the architecture-matched file, for example, `ipxe-x64.efi`, in this directory.*

| `/var/lib/tftpboot/grub2/grubx64.efi`
| Grub2 UEFI boot loader for **Grub2**, **UEFI HTTP**, or **HTTPS Boot**.
Used to start UEFI installations via the {SmartProxy}’s HTTPBoot module.
| *Place the corresponding architecture-specific file, for example, `grubx64.efi`, in this directory.*

| `/var/lib/tftpboot/grub2/shimx64.efi`
| Secure Boot shim loader for Grub2.
Used when **Grub2 UEFI SecureBoot**, **Grub2**, or **UEFI HTTPS SecureBoot** is selected.
| *Place the matching shim binary, for example, `shimx64.efi`, in this directory.*
|===

[NOTE]
====
Grub2 and UEFI HTTPS Boot relies on the {SmartProxy}’s HTTPS service to securely deliver the `boot.efi`, `shimx64.efi`, and similar boot loader binaries to UEFI clients. 
The configuration for this HTTPS service is defined in the {SmartProxy}’s main settings file 
`/etc/foreman-proxy/settings.yml`.
====
