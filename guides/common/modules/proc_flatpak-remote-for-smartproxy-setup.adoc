[id="Flatpak_Remote_for_Smartproxy_{context}"]
= Flatpak remote for {SmartProxy} setup

This procedure configures {SmartProxy} servers to synchronize and distribute Flatpak repositories to managed hosts. 

.Prerequisites
* Ensure the Flatpak repositories are synced to the {SmartProxy} as they are for any other repository.

.Procedure
. Run the following command on the managed host to add the {SmartProxy} as a Flatpak remote:
+
[options="nowrap", subs="+quotes,verbatim,attributes"]
----
$ flatpak remote-add --authenticator-name=org.flatpak.Authenticator.Oci katello oci+https://capsule.example.com/pulpcore_registry/
----
. Log in using podman:
+
[options="nowrap", subs="+quotes,verbatim,attributes"]
----
$ podman login
----
For more information about logging in using podman, see xref:Configuring_podman_to_trust_the_CA_{context}[Configuring Podman and Docker to trust the certificate authority].
+
[NOTE]
====
Users may need to log in to the registry again if they have not saved their credentials.
====

. Optional: Save your credentials permanently using one of the following options:
* To save the credentials for the current user, run:
+
[options="nowrap", subs="+quotes,verbatim,attributes"]
----
$ cp $XDG_RUNTIME_DIR/containers/auth.json \
   $HOME/.config/flatpak/oci-auth.json
----
* To save the credentials system-wide, run:
+
[options="nowrap", subs="+quotes,verbatim,attributes"]
----
$ cp $XDG_RUNTIME_DIR/containers/auth.json \
   /etc/flatpak/oci-auth.json
----
. Install the Mozilla Firefox Flatpak:
+
[options="nowrap", subs="+quotes,verbatim,attributes"]
----
$ flatpak install firefox
----

