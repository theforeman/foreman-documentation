[id="Increasing_host_limit_for_pull_based_REX_transport_{context}"]
= Increasing host limit for pull-based REX transport

You can tune the `mosquitto` MQTT server and increase the maximum number of hosts connected to it.
By default, {SmartProxies} support a maximum of 1014 connected hosts.

This example configures the `mosquitto` service on your {SmartProxy} to handle up to 5000 hosts.

.Prerequisites
* You have enabled pull-based remote execution on your {SmartProxy}.
For more information, see {InstallingSmartProxyDocURL}configuring-pull-based-transport-for-remote-execution_{smart-proxy-context}[Configuring pull-based transport for remote execution] in _{InstallingSmartProxyDocTitle}_.

.Procedure
. On your {SmartProxy}, set the upper limit of connected hosts for pull-based remote execution in `/etc/foreman-installer/custom-hiera.yaml`:
+
[options="nowrap", subs="+quotes,verbatim,attributes"]
----
systemd::dropin_files:
  limits.conf:
    unit: mosquitto.service
    content: "[Service]\nLimitNOFILE=5000\n"
----
. Re-run the installer for the changes to take effect:
+
[source, yaml, options="nowrap", subs="+quotes,verbatim,attributes"]
----
# {foreman-installer}
----
