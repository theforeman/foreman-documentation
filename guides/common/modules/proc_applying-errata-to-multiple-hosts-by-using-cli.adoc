:_mod-docs-content-type: PROCEDURE

[id="applying-errata-to-multiple-hosts-by-using-cli"]
= Applying errata to multiple hosts by using CLI

You can use Hammer CLI to review and apply errata to multiple hosts.

.Procedure
. List all installable errata:
+
[options="nowrap" subs="+quotes"]
----
$ hammer erratum list \
--errata-restrict-installable true \
--organization "_My_Organization_"
----
. Apply one of the errata to multiple hosts.
+
Using `Remote Execution`:
+
[options="nowrap", subs="+quotes,verbatim,attributes"]
----
$ hammer job-invocation create \
--feature katello_errata_install \
--inputs errata=_My_Erratum_ID_ \
--search-query "applicable_errata = _My_Erratum_ID_"
----
+
Using a Bash script that applies an erratum to each host for which this erratum is available:
+
[source,terminal,subs="+quotes"]
----
for HOST in `hammer --csv --csv-separator "|" host list --search "applicable_errata = _My_Erratum_ID_" --organization "_My_Organization_" | tail -n+2 | awk -F "|" '{ print $2 }'` ;
do
  echo "== Applying to $HOST ==" ; hammer job-invocation create --feature katello_errata_install --host $HOST --errata-ids _My_Erratum_ID_1_,_My_Erratum_ID_2_ ;
done
----
+
This command identifies all hosts with _My_Erratum_ID_ as an applicable erratum and then applies the erratum to each host.

.Verification
. To see if an erratum is applied successfully, find the corresponding task in the output of the following command:
+
[options="nowrap" subs="verbatim,quotes"]
----
$ hammer task list
----
. View the state of a selected task:
+
[options="nowrap" subs="+quotes"]
----
$ hammer task progress --id _My_Task_ID_
----
