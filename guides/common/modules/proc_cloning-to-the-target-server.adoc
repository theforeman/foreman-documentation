:_mod-docs-content-type: PROCEDURE

[id="cloning-to-the-target-server"]
= Cloning to the target server

[role="_abstract"]
You prepare the target server with backup files, register it with Red{nbsp}Hat, install the cloning tool, run the restoration process, and then reconfigure services, subscriptions, and network settings to complete the cloning.

.Procedure
. The `satellite-clone` tool defaults to using `/backup/` as the backup folder.
If you copy to a different folder, update the `backup_dir` variable in the `/etc/satellite-clone/satellite-clone-vars.yml` file.
. Place the backup files from the source {Project} in the `/backup/` folder on the target server.
You can either mount the shared storage or copy the backup files to the `/backup/` folder on the target server.
. Power off the source server.
. Register your instance to the Red Hat Customer Portal and enable only the required repositories:
+
[options="nowrap" subs="quotes,attributes"]
----
# subscription-manager register
# subscription-manager repos --disable=*
# subscription-manager repos --enable={RepoRHEL9AppStream} \
--enable={RepoRHEL9BaseOS} \
--enable={RepoRHEL9ServerSatelliteMaintenanceProjectVersion}
----
. Install the `satellite-clone` package:
+
[options="nowrap" subs="attributes"]
----
# {package-install} satellite-clone
----
+
After you install the `satellite-clone` tool, you can adjust any configuration to suit your own deployment in the `/etc/satellite-clone/satellite-clone-vars.yml` file.
. Run the `satellite-clone` tool:
+
[options="nowrap" subs="attributes"]
----
# satellite-clone
----
. Reconfigure DHCP, DNS, TFTP, and remote execution services.
The cloning process disables these services on the target {ProjectServer} to avoid conflict with the source {ProjectServer}.
. Reconfigure and enable DHCP, DNS, and TFTP in the {ProjectWebUI}.
For more information, see {IntegratingProvisioningInfrastructureServicesDocURL}[{IntegratingProvisioningInfrastructureServicesDocTitle}]..
. Log in to the {ProjectWebUI}, with the username `admin` and the password `changeme`.
Immediately update the admin password to secure credentials.
. Ensure that the correct organization is selected.
. In the {ProjectWebUI}, navigate to *Content* > *Subscriptions*.
. Click *Manage Manifest*.
. Click *Refresh* and then click *Close* to return to the list of subscriptions.
. Verify that the available subscriptions are correct.
. Follow the instructions in the `/usr/share/satellite-clone/logs/reassociate_capsules.txt` file to restore the associations between {SmartProxies} and their lifecycle environments.
. Update your network configuration, for example, DNS, to match the IP address of the target server with its new host name.
The `satellite-clone` tool changes the host name to the source server's host name.
If you want to change the host name to something different, you can use the `satellite-change-hostname` tool.
For more information, see {AdministeringDocURL}renaming-{project-context}_admin[Renaming {ProjectServer}] in _{AdministeringDocTitle}_.
. If the source server uses the `virt-who` daemon, install and configure it on the target server.
Copy all the `virt-who` configuration files in the `/etc/virt-who.d/` directory from the source server to the same directory on the target server.
For more information, see {ConfiguringVMSubscriptionsDocURL}[_{ConfiguringVMSubscriptionsDocTitle}_].
After you perform an upgrade using the following chapters, you can safely decommission the source server.
