[id="backing-up-custom-{project-context}-server-configuration-before-upgrading"]
= Backing up custom {ProjectServer} configuration before upgrading

If you are using any custom configuration on your {ProjectServer}, {Project} might override it during the upgrade.
Back up your custom configuration so that you can restore it after the upgrade.

.Procedure

* If you have edited any of the default templates, back up the files either by cloning or exporting them.
** To confirm if a template has been edited, view its *History* before you upgrade.
Alternatively, view the changes in the audit log after you upgrade.
In the {ProjectWebUI}, navigate to *Monitor* > *Audits* and search for the template to see a record of changes made.
** The recommended template backup method is cloning.
Cloning prevents templates from being overwritten in future updates or upgrades.
** If you use the export backup method, restore your changes by comparing the exported template and the default template, and then manually apply your changes.
ifdef::katello,orcharhino,satellite[]
* If you implemented custom certificates, you must retain the content of both the `/root/ssl-build` directory and the directory in which you created any source files associated with your custom certificates.
+
[WARNING]
====
Failure to retain these files during an upgrade causes the upgrade to fail.
If these files have been deleted, they must be restored from a backup in order for the upgrade to proceed.
====
endif::[]
. If you made manual edits to you DNS or DHCP configuration in the `/etc/zones.conf` or `/etc/dhcp/dhcpd.conf` files, ensure that {Project} does not overwrite your configuration during the upgrade.
Choose one of the following options:
** Create a backup of the configuration files manually.
After you finish upgrading, you will restore the files from the backup.
** Disable DNS and DHCP configuration management in {Project}:
+
[options="nowrap" subs="attributes"]
----
# {foreman-installer} \
--foreman-proxy-dhcp-managed=false \
--foreman-proxy-dns-managed=false
----
+
After you finish upgrading, you will be able to revert this to enable {Project} to manage the configuration again.
