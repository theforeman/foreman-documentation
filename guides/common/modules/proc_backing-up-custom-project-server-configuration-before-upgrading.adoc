[id="backing-up-custom-{project-context}-server-configuration-before-upgrading"]
= Backing up custom {ProjectServer} configuration before upgrading

If you are using any custom configuration on your {ProjectServer}, {Project} might override it during the upgrade.
Back up your custom configuration so that you can restore it after the upgrade.

.Procedure

. If you have edited any of the default templates, back up the template files.
You can choose one of the following options:
** Back up the templates by cloning them.
This is the recommended method.
If you back up the templates by cloning, the upgrade process will not overwrite them.
** Back up the templates by exporting them.
After you finish upgrading, you will be able to compare the exported and default templates, and then manually apply your changes.
+
[NOTE]
====
To confirm if a template has been edited, view its *History* before you upgrade.
Alternatively, view the changes in the audit log after you upgrade.
In the {ProjectWebUI}, navigate to *Monitor* > *Audits* and search for the template to see a record of changes made.
====
+
ifdef::katello,orcharhino,satellite[]
. If you implemented custom certificates, retain the content of both the `/root/ssl-build` directory and the directory in which you created any source files associated with your custom certificates.
+
[WARNING]
====
Failure to retain these files during an upgrade causes the upgrade to fail.
If these files have been deleted, they must be restored from a backup in order for the upgrade to proceed.
====
endif::[]
. If you made manual edits to you DNS or DHCP configuration in the `/etc/zones.conf` or `/etc/dhcp/dhcpd.conf` files, back up the files or configure {Project} to ensure it does not overwrite the configuration during the upgrade.
Choose one of the following options:
** Create a backup of the configuration files manually.
After you finish upgrading, you will restore the files from the backup.
** Disable DNS and DHCP configuration management in {Project}:
+
[options="nowrap" subs="attributes"]
----
# {foreman-installer} \
--foreman-proxy-dhcp-managed=false \
--foreman-proxy-dns-managed=false
----
+
After you finish upgrading, you can revert this action to enable {Project} to manage the configuration again.
