:_mod-docs-content-type: PROCEDURE

[id="enabling-connections-to-capsule_{context}"]
= Enabling connections from {ProjectServer} and clients to a {SmartProxyServer}

On the base operating system on which you want to install {SmartProxy}, you must enable incoming connections from {ProjectServer} and clients to {SmartProxyServer} and make these rules persistent across reboots.
For the components of {Project} architecture to communicate, ensure that the required network ports are open and free on the base operating system.
You must also ensure that the required network ports are open on any network-based firewalls.

The installation of a {SmartProxyServer} fails if the ports between {ProjectServer} and {SmartProxyServer} are not open before installation starts.

Note that some cloud solutions must be specifically configured to allow communications between machines because they isolate machines similarly to network-based firewalls.
If you use an application-based firewall, ensure that the application-based firewall permits all applications that are listed in the tables and known to your firewall.
If possible, disable the application checking and allow open port communication based on the protocol.

include::snip_firewalld.adoc[]

.Procedure
ifdef::katello,satellite,orcharhino[]
. Open the ports for clients on {SmartProxyServer}:
+
[options="nowrap"]
----
# firewall-cmd \
--add-port="8000/tcp" \
--add-port="9090/tcp"
----
endif::[]
. Allow access to services on {SmartProxyServer}:
+
[options="nowrap"]
----
# firewall-cmd \
--add-service=dns \
--add-service=dhcp \
--add-service=tftp \
ifdef::katello,satellite,orcharhino[]
--add-service=http \
--add-service=https \
endif::[]
ifndef::katello,satellite,orcharhino[]
--add-service=foreman-proxy \
endif::[]
--add-service=puppetmaster
----
include::snip_make-firewall-settings-persistent.adoc[]

include::snip_verify-firewall-settings.adoc[]
