[id="Creating_Image_Based_Hosts_on_Amazon_EC2_{context}"]
= Creating Image-Based Hosts on Amazon EC2

The Amazon EC2 provisioning process creates hosts from existing images on the Amazon EC2 server.
To use the CLI instead of the {ProjectWebUI}, see the xref:cli-creating-hosts-on-amazon-ec2_{context}[].

.Procedure
. In the {ProjectWebUI}, navigate to *Hosts*{nbsp}>{nbsp}*Create Host*.
. In the *Name* field, enter a name for the host.
. From the *Host Group* list, you can select a host group to populate most of the new host's fields.
. From the *Deploy on* list, select the EC2 connection.
. From the *Compute Profile* list, select a profile to use to automatically populate virtual machine-based settings.
. Click the *Interface* tab, and then click *Edit* on the host's interface, and verify that the fields are populated with values.
Leave the *Mac Address* field blank.
{ProjectServer} automatically selects and IP address and the *Managed*, *Primary*, and *Provision* options for the first interface on the host.
. Click the *Operating System* tab and confirm that all fields are populated with values.
. Click the *Virtual Machine* tab and confirm that all fields are populated with values.
ifdef::foreman-el,katello[]
. If you use the Katello plugin, click the *Parameters* tab, and ensure that a parameter exists that provides an activation key.
If not, add an activation key.
endif::[]
ifdef::satellite,orcharhino[]
. Click the *Parameters* tab, and ensure that a parameter exists that provides an activation key.
If not, add an activation key.
endif::[]
. Click *Submit* to save your changes.

This new host entry triggers the Amazon EC2 server to create the instance, using the pre-existing image as a basis for the new volume.

[id="cli-creating-hosts-on-amazon-ec2_{context}"]
.CLI procedure
* Create the host with the `hammer host create` command and include `--provision-method image` to use image-based provisioning.
+
[options="nowrap" subs="+quotes"]
----
# hammer host create \
--compute-attributes="flavor_id=m1.small,image_id=TestImage,availability_zones=us-east-1a,security_group_ids=Default,managed_ip=Public" \
--compute-resource "_My_EC2_Compute_Resource_" \
--enabled true \
--hostgroup "_My_Host_Group_" \
--image "_My_Amazon_EC2_Image_" \
--interface "managed=true,primary=true,provision=true,subnet_id=EC2" \
--location "_My_Location_" \
--managed true \
--name "My_Amazon_EC2_Host_" \
--organization "_My_Organization_" \
--provision-method image
----

For more information about additional host creation parameters for this compute resource, enter the `hammer host create --help` command.
