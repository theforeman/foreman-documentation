[id="Puma_Workers_and_Threads_Auto_Tuning_{context}"]
= Puma Workers and Threads Auto-Tuning

If you do not provide any Puma workers and thread values with `{foreman-installer}` or they are not present in your {Project} configuration, the `{foreman-installer}` configures a balanced number of workers.
It follows this formula:

----
min(CPU_COUNT * 1.5, RAM_IN_GB - 1.5)
----

This should be fine for most cases, but with some usage patterns tuning is needed to either limit the amount of resources dedicated to Puma (so other {Project} components can use these) or for any other reason.
Each Puma worker consumes around 1 GiB of RAM.

.View your current {ProjectServer} settings
----
# cat /etc/systemd/system/foreman.service.d/installer.conf
----

.View the currently active Puma workers
----
# systemctl status foreman.service
----

== Manually tuning Puma workers and threads count
If you decide not to rely on xref:Puma_Workers_and_Threads_Auto_Tuning_{context}[], you can apply custom numbers for these tunables. In the example below we are using 2 workers, 5 and 5 threads:

[options="nowrap", subs="+attributes"]
----
# {foreman-installer} \
--foreman-foreman-service-puma-workers=2 \
--foreman-foreman-service-puma-threads-min=5 \
--foreman-foreman-service-puma-threads-max=5
----

Please follow xref:Applying_configurations_{context}[] section to apply the change.
