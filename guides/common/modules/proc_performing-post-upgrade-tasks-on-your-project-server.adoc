[id="performing-post-upgrade-tasks-on-your-{project-context}-server_{context}"]
= Performing post-upgrade tasks on your {ProjectServer}

After upgrading your {ProjectServer}, perform the following tasks to ensure your environment is adjusted to any changes made during the upgrade.
Some tasks might be optional depending on your specific configuration.

ifdef::orcharhino,satellite[]
[NOTE]
====
After the {ProjectServer} upgrade finishes, container manifest data is migrated to the {Project} API.
This data enables Katello to display manifest labels, annotations, and information about the manifest type, such as if it is bootable or represents Flatpak content.
This action helps reduce future upgrade downtime.

While the migration is running, the upgraded server is fully functional but uses more hardware resources.
====
endif::[]

.Procedure
. If any of the templates you are using were created by cloning the default {Project} templates, verify whether the default templates changed during the upgrade.
If the default templates have changed, consider updating your custom templates as well to reflect these changes.
+
[NOTE]
====
If the default provisioning templates changed during the upgrade and your custom code is executed before or after the provisioning process, you can use custom provisioning snippets to avoid recreating cloned templates.
For more information about configuring custom provisioning snippets, see {ProvisioningDocURL}Creating_Custom_Provisioning_Snippets_provisioning[Creating Custom Provisioning Snippets] in _{ProvisioningDocTitle}_.
====
. If your {Project} shows any discovered hosts, reboot them:
.. In the {ProjectWebUI}, navigate to *Hosts* > *Discovered hosts*.
.. Select *Any Organization* to display all discovered hosts.
.. Reboot all discovered hosts.
ifdef::katello[]
. Optional: If you depend on container content, consider migrating container manifest data to the {Project} API.
+
[NOTE]
====
This data enables Katello to display manifest labels, annotations, and information about the manifest type, such as if it is bootable or represents Flatpak content.
Performing this action after upgrading your {ProjectServer} to {ProjectVersion} helps reduce future upgrade time.
====
+
.. Start the data migration.
+
[NOTE]
====
The migration takes time.
Consider using a utility such as `tmux` for flexible session management.
====
+
[options="nowrap" subs="attributes"]
----
# {foreman-maintain} advanced procedure run pulpcore-container-handle-image-metadata
----
.. If the manifest represents bootable or flatpak content, allow the container image API to display manifest labels:
+
[options="nowrap" subs="attributes"]
----
# foreman-rake katello:import_container_manifest_labels
----
endif::[]
