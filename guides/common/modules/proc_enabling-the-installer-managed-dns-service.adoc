[id="enabling-the-installer-managed-dns-service_{context}"]
= Enabling the installer-managed DNS service

You can revert to using {ProjectServer} and {SmartProxyServer} as your DNS providers.
You can use a backup of the answer file that was created before configuring external DNS, or you can create a backup of the answer file.
ifndef::orcharhino[]
For more information about answer files, see {InstallingServerDocURL}configuring-server_{project-context}[Configuring {ProjectServer}].
endif::[]

Complete the steps on the {Project} or {SmartProxyServer} that you want to configure to manage DNS service for the domain.


.Procedure

. Configure {Project} or {SmartProxy} as a DNS server:

** If you have a backup of the answer file that was created before configuring a non-installer-managed DNS service:

... Restore the answer file.

... Re-apply the answer file:
+
[options="nowrap",subs="+quotes,attributes"]
....
# {foreman-installer}
....

** If you do not have a backup answer file that was created before configuring a non-installer-managed DNS service:

... Create a backup of the answer file now.

... Configure {Project} or {SmartProxy} as DNS server:
+
[options="nowrap",subs="+quotes,attributes"]
....
# {foreman-installer} \
--foreman-proxy-dns-managed=true \
--foreman-proxy-dns-provider=nsupdate \
--foreman-proxy-dns-server="127.0.0.1" \
--foreman-proxy-dns=true
....
+
ifeval::["{context}" == "{smart-proxy-context}"]
For more information, see xref:configuring-dns-dhcp-and-tftp-on-productname_{smart-proxy-context}[].
endif::[]
ifeval::["{context}" == "{project-context}"]
For more information, see {InstallingSmartProxyDocURL}configuring-dns-dhcp-and-tftp-on-productname_{smart-proxy-context}[Configuring DNS, DHCP, and TFTP on {SmartProxyServer}].
endif::[]

. Update the configuration of each affected {SmartProxy} in the {ProjectWebUI}:

.. Navigate to *Infrastructure* > *{SmartProxies}*.

.. For each {SmartProxy} that you want to update, select *Refresh* in the *Actions* list.

.. Configure the domain:

... Navigate to *Infrastructure* > *Domains*
... Click the domain name that you want to configure.
... In the *Domain* tab, set *DNS {SmartProxy}* to the {SmartProxy} where the subnet is connected.

.. Configure the subnet:

... Navigate to *Infrastructure* > *Subnets*.
... Select the subnet name.
... In the *Subnet* tab, set *IPAM* to *DHCP* or *Internal DB*.
... In the *Domains* tab, select the domain that you want to manage using {Project} or {SmartProxy}.
... In the *{SmartProxies}* tab, set *Reverse DNS {SmartProxy}* to the {SmartProxy} where the subnet is connected.
... Click *Submit* to save the changes.

