[id="synchronizing-content-over-a-network_{context}"]
= Synchronizing Content Over a Network

Configure a downstream {ProjectServer} to synchronize repositories from a connected upstream {ProjectServer} over HTTPS.

.Prerequisites
* A network connection exists between the upstream {ProjectServer} and the downstream {ProjectServer}.
* You have imported the subscriptions manifest on both the upstream and downstream {ProjectServer}.
* The required repositories are enabled for the organization on the upstream {ProjectServer}.
* You have user permissions to create product repositories and organizations on the downstream {ProjectServer}.

.Procedure
. Navigate to *Content* > *Subscriptions*.
. Click the *Manage Manifest* button.
. Navigate to the *CDN Configuration* tab.
. Select the *Upstream {ProjectServer}* tab.
. In the *URL* field, enter the address of the upstream {ProjectServer}.
. In the *Username*, enter your username for upstream login.
. In the *Password*, enter your password or personal access token for upstream login.
. In the *Organization label* field, enter the label of the upstream organization.
. Optional: In the *Lifecycle Environment Label* field, enter the label of the upstream lifecycle environment.
Default is `Library`.
. Optional: In the *Content view label* field, enter the label of the upstream Content View.
Default is `Default_Organization_View`.
. From the *SSL CA Content Credential* menu, select a CA certificate used by the upstream {ProjectServer}.
. Click *Update*.
. Navigate to *Content* > *Products*.
. Select repositories to synchronize.
. Click *Sync Now*.

You can also create a synchronization plan to ensure updates on a regular basis. For more information, see xref:Creating_a_Sync_Plan_{context}[].

.CLI Procedure
. Show some related info under the "CDN Configuration" section in the output // TODO
+
[options="nowrap" subs="+quotes"]
----
# hammer organization show --id=1
----
. Update CDN config to an upstream server
+
[options="nowrap" subs="+quotes"]
----
# hammer organization configure-cdn --id=11 --type=network_sync \
--username _upstream_username_ --password _upstream_password_ \
--ssl-ca-credential-id 8 \
--upstream-organization-label="_My_Organization_" \
[--upstream-lifecycle-environment-label="_My_Lifecycle_Environment_"] \
[--upstream-content-view-label="_My_Content_View_"]
----

////

. Update cdn config to Red Hat CDN:
# hammer -u admin -p changeme organization configure-cdn --id=11 --type=redhat_cdn

. Update to airgapped mode:
# hammer -u admin -p changeme organization configure-cdn --id=11 --type=export_sync

It occurs to me that the type values of upstream_server and airgapped should be changed to network_sync and export_sync respectively. I'll file a bug for it

Usage:
    hammer organization configure-cdn [OPTIONS]

Options:
 --id VALUE                                   Id of the Organization
 --label VALUE                                Organization label to search by
 --name VALUE                                 Organization name to search by

 --password, -p VALUE                             Password for authentication. Relevant only for ‘upstream_server’ type.
 --ssl-ca-credential-id NUMBER                Content Credential to use for SSL CA. Relevant only for ‘upstream_server’ type.
 --title VALUE                                Organization title
 --type VALUE                                 CDN configuration type. One of redhat_cdn, upstream_server, airgapped.
 --upstream-content-view-label VALUE          Upstream Content View Label, default: Default_Organization_View. Relevant only
                                              for ‘upstream_server’ type.
 --upstream-lifecycle-environment-label VALUE Upstream Lifecycle Environment, default: Library. Relevant only for
                                              ‘upstream_server’ type.
 --upstream-organization-label VALUE          Upstream organization to sync CDN content from. Relevant only for
                                              ‘upstream_server’ type.
 --url VALUE                                  Upstream foreman server to sync CDN content from. Relevant only for
                                              ‘upstream_server’ type.
 --username, -u VALUE                             Username for authentication. Relevant only for ‘upstream_server’ type.
 -h, --help                                   Print help

////
