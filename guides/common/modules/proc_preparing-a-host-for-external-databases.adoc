[id="preparing-a-host-for-external-databases_{context}"]
= Preparing a Host for External Databases

ifndef::orcharhino[]
Install a freshly provisioned system with the latest {EL} 7 server to host the external databases.
endif::[]
ifdef::orcharhino[]
Install a freshly provisioned system with the latest CentOS 7, Oracle Linux 7, or {EL} 7 to host the external databases.
endif::[]

ifdef::satellite[]
Subscriptions for Red{nbsp}Hat Software Collections and {RHEL} do not provide the correct service level agreement for using {Project} with external databases.
You must also attach a {Project} subscription to the base operating system that you want to use for the external databases.
endif::[]

.Prerequisites
* The prepared host must meet {Project}'s {InstallingServerDocURL}storage-requirements_{project-context}[Storage Requirements].

.Procedure
ifndef::orcharhino[]
. Use the instructions in {InstallingServerDocURL}attaching-infrastructure-subscription_{project-context}[Attaching the {Project} Infrastructure Subscription] to attach a {Project} subscription to your server.
. Disable all repositories and enable only the following repositories:
* For {EL} 7:
+
[options="nowrap" subs="+quotes,attributes"]
----
# subscription-manager repos --disable '*'
ifdef::satellite[]
# subscription-manager repos --enable={RepoRHEL7ServerSoftwareCollections} \
--enable={RepoRHEL7Server} --enable={RepoRHEL7ServerSatelliteServerProductVersion}
endif::[]
ifdef::foreman-el,katello[]
# subscription-manager repos --enable={RepoRHEL7ServerSoftwareCollections} \
--enable={RepoRHEL7Server}
endif::[]
----
endif::[]

ifdef::satellite,katello[]
* For {EL} 8:
+
[options="nowrap" subs="+quotes,attributes"]
----
# subscription-manager repos --disable '*'
# subscription-manager repos \
ifdef::satellite[]
--enable={RepoRHEL8ServerSatelliteServerProductVersion} \
endif::[]
--enable={RepoRHEL8BaseOS} \
--enable={RepoRHEL8AppStream}
----
ifdef::katello[]
+
. Install the `katello-repos-latest.rpm` package
+
* For {EL} 8:
+
[options="nowrap" subs="+quotes,attributes"]
----
# dnf localinstall https://yum.theforeman.org/releases/{ProjectVersion}/el8/x86_64/foreman-release.rpm
# dnf localinstall https://yum.theforeman.org/katello/{KatelloVersion}/katello/el8/x86_64/katello-repos-latest.rpm
----

* For {EL} 7:
+
[options="nowrap" subs="+quotes,attributes"]
----
# yum localinstall https://yum.theforeman.org/releases/{ProjectVersion}/el7/x86_64/foreman-release.rpm
# yum localinstall https://yum.theforeman.org/katello/{KatelloVersion}/katello/el7/x86_64/katello-repos-latest.rpm
----
endif::[]
+
. On {EL} 8, enable the following modules:
+
[options="nowrap" subs="+quotes,attributes"]
----
ifdef::satellite[]
# dnf module enable satellite:el8
endif::[]
ifdef::katello[]
# dnf module enable katello:el8 pulpcore:el8
endif::[]
----
endif::[]
ifdef::orcharhino[]
. Ensure the prepared host has the same content available as your {ProjectServer}.
endif::[]
