[id="Puppet_architecture_{context}"]
= Puppet Architecture

Puppet uses a server-client architecture.
The Puppet server is the central component, where the configuration definitions live.
{ProjectServer} or any {SmartProxies} are typically deployed with the Puppet server and {Project} acts as an https://puppet.com/docs/puppet/7/nodes_external.html[External Node Classifier (ENC)] for such Puppet server.
Managed hosts run the Puppet agent as a client that communicates with the Puppet server.

The Puppet agent collects _facts_ about a host and reports them to the Puppet server on each run.
You can display the Puppet _facts_ in JSON format by running `puppet facts` on a host.

The Puppet server forwards _facts_ to {Project} and {Project} stores them for later use.
Based on the _facts_ and other definitions, {Project} constructs the ENC answer to the Puppet server.
The Puppet server compiles a _catalog_ based on the ENC answer and sends the _catalog_ to the Puppet agent.

The Puppet agent evaluates the system state on the host.
If the Puppet agent finds differences, known as _drifts_, between the defined state in the _catalog_ and the actual state, it enforces correction of the host's state.
The Puppet agent then reports correction results back to the Puppet server, which reports them to {Project}.

.Puppet modules
The system state of a host is defined in a _catalog_.
The _catalog_ is compiled from Puppet manifests of one or more Puppet modules assigned to the host.
A Puppet module is a collection of classes, manifests, resources, files, and templates.
The Puppet modules work as components of host configuration definitions.

.Smart Class parameters
You can parametrize a Puppet module using Smart Class parameters if the module supports the use of parameters.
You can define the parameters in your {Project} as _key-value_ pairs, which behave similar to host parameters or Ansible variables.

.Puppet environments
You can also create multiple Puppet environments to control versions of configuration definitions or to manage variants of the definitions, and to test the definitions before you deploy them on production.

The following procedures outline how to use a Puppet module to install, configure, and manage the _ntp_ service to provide examples.
