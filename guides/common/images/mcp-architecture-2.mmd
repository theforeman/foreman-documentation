---
config:
    theme: default
---
architecture-beta
    service user(mdi:account)[User 1]
    group mcp-host[AI application 1]
       service mcp-client(mdi:checkbox-intermediate)[MCP client 1] in mcp-host
    user:R <--> L:mcp-client{group}
    service mcp-server(mdi:checkbox-intermediate)[MCP server 1]
    mcp-client:R <--> L:mcp-server

    service foreman-server(mdi:server)[Foreman server]
    group foreman-deployment[Foreman deployment]
        service hosts(mdi:monitor-multiple)[Hosts] in foreman-deployment
    foreman-server:R <-- L:hosts{group}

    service user-2(mdi:account)[User 2]
    group mcp-host-2[AI application 2]
       service mcp-client-2(mdi:checkbox-intermediate)[MCP client 2] in mcp-host-2
    user-2:R <--> L:mcp-client-2{group}
    service mcp-server-2(mdi:checkbox-intermediate)[MCP server 2]
    mcp-client-2:R <--> L:mcp-server-2

    junction junction-top
    junction junction-top-center
    junction junction-bottom
    junction junction-bottom-center

    mcp-server:R <-- L:junction-top-center
    junction-top-center:R <-- L:junction-top
    mcp-server-2:R <-- L:junction-bottom
    junction-top:B --> T:foreman-server
    junction-bottom:T --> B:foreman-server
