= Katello 4.5.0

== Features

=== Web UI
 * ACS UI - Refresh action from UI and show last refresh on index (https://projects.theforeman.org/issues/34916[#34916])
 * Set up lab routes for ACS UI and land on read-only index page for ACS (https://projects.theforeman.org/issues/34783[#34783], https://github.com/Katello/katello/commit/2a10b1eb15f0dab79630aeba832b67b8ef043767[2a10b1eb])
 * Hosts UI - Module streams - Filter by state & installation status (https://projects.theforeman.org/issues/34663[#34663], https://github.com/Katello/katello/commit/91dd495a2b04d8c54411b2be7ef9967b1cbb467e[91dd495a])
 * Add table sorting by column (https://projects.theforeman.org/issues/34461[#34461], https://github.com/Katello/katello/commit/f609171fd2bdc2372a88af85087efc3b018e1ea0[f609171f])

=== Hosts
 * New host detail - Change content source (https://projects.theforeman.org/issues/34865[#34865], https://github.com/Katello/katello/commit/0dd6dadd3fe8913e29a7b6f3d1b105101f9fa098[0dd6dadd])
 * Show loading state during tracer install (https://projects.theforeman.org/issues/34856[#34856])
 * New host detail page - 'Installed products' card (https://projects.theforeman.org/issues/34816[#34816], https://github.com/Katello/katello/commit/a26097ce0a1502e17c782063f5fba8c4837ee5a9[a26097ce])
 * New host details - Add happy empty states (https://projects.theforeman.org/issues/34805[#34805], https://github.com/Katello/katello/commit/08694c96b227473ab4ecb942a2368357e86705bf[08694c96])
 * Hosts UI - Module streams - Add module stream actions (https://projects.theforeman.org/issues/34784[#34784], https://github.com/Katello/katello/commit/ffda83fef64e878b4d0f8c5d6748278f0fc3a1dc[ffda83fe])
 * Content view details card - Change a host's content view (https://projects.theforeman.org/issues/34698[#34698], https://github.com/Katello/katello/commit/fdbc7f2057ddf7dec1b6aacc564875d88fd494b7[fdbc7f20])
 * New host details - Host collections Add & Remove modals (https://projects.theforeman.org/issues/34548[#34548], https://github.com/Katello/katello/commit/fa97fa6337eaa8895aecca3a1adf34dbbf5c7551[fa97fa63])
 * Add Host collections overview card (https://projects.theforeman.org/issues/34527[#34527], https://github.com/Katello/katello/commit/f76031a723d8a31b2e5f2bbf8b89d838ec3993c8[f76031a7])

=== Repositories
 * Extend info box in release field of Deb repository create page in Katello GUI (https://projects.theforeman.org/issues/34795[#34795], https://github.com/Katello/katello/commit/7b1bd0e30815355bb8439364d854511e2f56aaef[7b1bd0e3])
 * Report that lists all the hosts on which a particular repository is enabled (https://projects.theforeman.org/issues/34711[#34711], https://github.com/Katello/katello/commit/d6d9b712f3cdae45823431a0b786b975bbbcdced[d6d9b712])
 * As a user, I can CRUD custom ACSs via the API (https://projects.theforeman.org/issues/34034[#34034], https://github.com/Katello/katello/commit/71f9e497bc63aeb53902718dc842e8e7cf39862b[71f9e497])
 * As a user, I can CRUD custom ACSs via hammer (https://projects.theforeman.org/issues/34033[#34033])

=== Subscriptions
 * - add ouia-ID prop to all fields in CDN configuration (https://projects.theforeman.org/issues/34754[#34754], https://github.com/Katello/katello/commit/b18916be101b65b3326580561ce4d6cf3540c76d[b18916be], https://github.com/Katello/katello/commit/dc4790d3cf4960d27544d5eca3ad65bbe83436d3[dc4790d3])
 * - add ouia-ID prop to update buttons in CDN configuration (https://projects.theforeman.org/issues/34753[#34753], https://github.com/Katello/katello/commit/418b6a9c895215397a6557c50f939b1652be7f6f[418b6a9c])

=== Content Views
 * RFE - add ouia-ID for buttons on a cv (https://projects.theforeman.org/issues/34749[#34749], https://github.com/Katello/katello/commit/07d59d076fead2f98b6ec96475ed33986345a0fd[07d59d07], https://github.com/Katello/katello/commit/f67131e5bf3a5b52d90247da1b812201607295cc[f67131e5])
 * Report template support: list enabled repositories and RPM counts for content hosts (https://projects.theforeman.org/issues/34695[#34695], https://github.com/Katello/katello/commit/688869a59f30523b486798039cfcb350ee2aa441[688869a5])
 * Content view filter should suggest architectures parameters in RPM rule (https://projects.theforeman.org/issues/34586[#34586], https://github.com/Katello/katello/commit/961250253da90741e2db976676a39fb82e042837[96125025])
 * Publish new version should redirect to "Version" tab (https://projects.theforeman.org/issues/34496[#34496], https://github.com/Katello/katello/commit/e4c3cc063cf13ed691a2776ca38713fe8207bc32[e4c3cc06])
 * Allow bulk selections on CV UI to support bulk removing versions (https://projects.theforeman.org/issues/34169[#34169], https://github.com/Katello/katello/commit/197688c0c7a95cc8cdc382bb9881e767bd147eef[197688c0])

=== Foreman Proxy Content
 * SmartProxy Content download-policy Streamed (https://projects.theforeman.org/issues/34582[#34582], https://github.com/Katello/katello/commit/78884edb4fdb0912fd27d23796409553e8592a5c[78884edb])

=== Other
 * New host details - Add Subscription UUID to System Properties card (https://projects.theforeman.org/issues/34814[#34814], https://github.com/Katello/katello/commit/0839a91389dfe015d727821d2978ee5880dbd66a[0839a913])
 * Properly translate plurals (https://projects.theforeman.org/issues/34628[#34628], https://github.com/Katello/katello/commit/87ad581ad025cae794642956fda635776c5b1a22[87ad581a])
 * [RFE] add option to export and import just repository for hammer content-export  (https://projects.theforeman.org/issues/34374[#34374], https://github.com/Katello/hammer-cli-katello/commit/dd11271239cddc5f78255b1f6f6f726cba736665[dd112712], https://github.com/Katello/katello/commit/4c1e72119659be50dd60682b1ef10e13c3ab682a[4c1e7211])
 * As a user, I can create custom ACSs via the UI (https://projects.theforeman.org/issues/33462[#33462])

== Bug Fixes

=== Upgrades
 * DB seeds fails on NoMethodError: undefined method `update!` for nil:NilClass (https://projects.theforeman.org/issues/34974[#34974])
 * default_location_puppet_content setting and others not cleaned up (https://projects.theforeman.org/issues/34587[#34587], https://github.com/Katello/katello/commit/24d0ba8817d621db157c98f1bde7b6bf23e5ec23[24d0ba88])

=== Subscriptions
 * Manifest refresh randomly fails with "No such file or directory" when having multile dynflow workers (https://projects.theforeman.org/issues/34957[#34957])
 * "Subscription - Entitlement Report" does not show correct number of subscriptions attached/consumed (https://projects.theforeman.org/issues/34609[#34609], https://github.com/Katello/katello/commit/cf82cbbc769199c6642abfaeefdad9ddf0959b5a[cf82cbbc])
 * [Bug] Custom subscriptions consumed and available quantity not correct in the CSV file (https://projects.theforeman.org/issues/34578[#34578], https://github.com/Katello/katello/commit/ad4c50a737d3c67592b45e96f525dd2b05122436[ad4c50a7])
 * Add deprecation banners for traditional (non-SCA) subscription management (https://projects.theforeman.org/issues/34522[#34522], https://github.com/Katello/katello/commit/ad0cc6f8edfb77765644c93829bd5a1e7d401071[ad0cc6f8])

=== Errata Management
 * Upgrade to Satellite 6.10.5.1 fails with error message "PG::NotNullViolation: ERROR: null value in column "erratum_package_id" violates not-null constraint" (https://projects.theforeman.org/issues/34944[#34944])
 * Errata icons are the wrong colors (https://projects.theforeman.org/issues/34425[#34425], https://github.com/Katello/katello/commit/6f39ec6a90515fff171bef01c2a4fb0bc1444fa6[6f39ec6a])

=== Web UI
 * Activation key overriding broke parameters table (https://projects.theforeman.org/issues/34934[#34934])
 * [SAT-5692] Details tab - Registration details card (https://projects.theforeman.org/issues/34836[#34836], https://github.com/Katello/katello/commit/b5eaf76f71c20a1f7b1126f08f44a3bdd2da1930[b5eaf76f])
 * New host detail page - sentence case fixes (https://projects.theforeman.org/issues/34797[#34797], https://github.com/Katello/katello/commit/b997a2f01d7f14844f75c0085a00e6f7d1762b55[b997a2f0])
 * Use split button dropdown for Traces & Errata REX actions (https://projects.theforeman.org/issues/34721[#34721])
 * Katello bookmark icon should be consistent with Foreman's (https://projects.theforeman.org/issues/34659[#34659])
 * [SAT-5692] Add Bookmarks to all host detail tables (https://projects.theforeman.org/issues/34632[#34632], https://github.com/Katello/katello/commit/0daa8c99b1e67bd26a368faef3f64e2842f79837[0daa8c99])
 * [RFE] CV UI -  Errata Filter Date doesn't show "Start Date" & "End Date" (https://projects.theforeman.org/issues/34630[#34630], https://github.com/Katello/katello/commit/057986082ebf268478db94dfb35cd0eee3e4070c[05798608])
 * CV UI -  Wizard bug fixes (https://projects.theforeman.org/issues/34599[#34599], https://github.com/Katello/katello/commit/d2497425e3a75a7a7df41fb1a547aa565cfd4f10[d2497425])
 * CV UI - Patternfly update causes tabs to navigate twice on click (https://projects.theforeman.org/issues/34559[#34559], https://github.com/Katello/katello/commit/acf477e24a52ed85d0b89511475e399b75192898[acf477e2])
 * CV UI - Status value translations should only translate the user facing text, not params etc sent to API. (https://projects.theforeman.org/issues/34158[#34158], https://github.com/Katello/katello/commit/aa9592eec9d4ff47506c3d7b316098b14768d9f4[aa9592ee])
 * Table row selection is slow when per_page is high (https://projects.theforeman.org/issues/34072[#34072], https://github.com/Katello/katello/commit/99d0567c3e4af2d8c3b95639a986cf44cde6496c[99d0567c])

=== Repositories
 * Web elements are not localized Available Button (https://projects.theforeman.org/issues/34933[#34933])
 * Fix upstream authentication autofill issue for Katello repositories (https://projects.theforeman.org/issues/34818[#34818], https://github.com/Katello/katello/commit/ea78e2682b6305db0f453b7df624345b3c890b7c[ea78e268])
 * Bring back 0 package counts!  (https://projects.theforeman.org/issues/34803[#34803], https://github.com/Katello/katello/commit/b82bfb5a3970639372cc19d1ae843afef87ee94e[b82bfb5a])
 * Sync Status page does not show syncing progress bar under "Result" column when syncing a repo (https://projects.theforeman.org/issues/34766[#34766], https://github.com/Katello/katello/commit/f81724544d3cc7a27e03a903ff34d05b8f878846[f8172454])
 * Add 'republish repository metadata' to Hammer (https://projects.theforeman.org/issues/34762[#34762], https://github.com/Katello/hammer-cli-katello/commit/114b12ad9094a16da2ff7867c6517d6591c9b496[114b12ad])
 * Repositories/import_uploads API endpoint do require two mandatory parameters (https://projects.theforeman.org/issues/34729[#34729], https://github.com/Katello/katello/commit/2d288ff1a6ae471119d6810c9abe9ce555f97971[2d288ff1])
 * A failed CV promote during publish or repo sync causes ISE (https://projects.theforeman.org/issues/34680[#34680], https://github.com/Katello/katello/commit/f0c69a1bf7799807e2238998f7b54e230aa5fa36[f0c69a1b])
 * Cannot upload a package to a repository if the same package already exists in another repository, but is not downloaded  (https://projects.theforeman.org/issues/34635[#34635], https://github.com/Katello/katello/commit/a3a856e896823dd70510c197070199b013a434b4[a3a856e8])
 * Remotes should have username and password cleared out if a user sets them to be blank (https://projects.theforeman.org/issues/34619[#34619], https://github.com/Katello/katello/commit/17a12869397c56d556a38784ac88380713873866[17a12869])
 * The "Serve via HTTP" and "Verify SSL" options in Repo Discovery page does not functions at all in Satellite 7.0 (https://projects.theforeman.org/issues/34617[#34617], https://github.com/Katello/katello/commit/8f76e5e98e97ff138884e2d0a6db2b7ff6610543[8f76e5e9])
 * Satellite/capsule 6.10 and tools 6.10 repos are listed in the Recommended Repositories for Sat 7.0 (https://projects.theforeman.org/issues/34577[#34577], https://github.com/Katello/katello/commit/c0cb3e25f3abdd14af5d3e0b9a4739345252b015[c0cb3e25])
 * Deletion of Custom repo deletes it from all versions of CV where it is included but the behavior is different for Red Hat based repos in Satellite 7.0 (https://projects.theforeman.org/issues/34576[#34576], https://github.com/Katello/katello/commit/05d1d71017ea839409bb84b8d74262bcb0bce1a3[05d1d710])
 * Red Hat Repositories have weird behavior if arch setting is changed (https://projects.theforeman.org/issues/34490[#34490], https://github.com/Katello/katello/commit/77f6193f8c1e59e067f8df29917b136001223a0c[77f6193f])
 * After upgrade products with repositories that had Ignorable Content = drpm can no longer be modified (https://projects.theforeman.org/issues/34432[#34432], https://github.com/Katello/katello/commit/2859ec678d2ce3e1d92cbc9d5daa9b8b32a361bf[2859ec67])

=== Tooling
 * Upgrade to Pulpcore 3.18 (https://projects.theforeman.org/issues/34926[#34926])
 * Rails 6.1 upgrade raising errors on server startup (https://projects.theforeman.org/issues/34862[#34862], https://github.com/Katello/katello/commit/7fa2de58861c68c446033a5828dbe0e756ec46aa[7fa2de58])
 * Pin pulp_rpm_client to <3.17.5 (https://projects.theforeman.org/issues/34770[#34770], https://github.com/Katello/katello/commit/5125b763841ac5baf929e959affe810c8c43bff5[5125b763])
 *  Update Pulpcore to 3.17 (https://projects.theforeman.org/issues/34697[#34697], https://github.com/Katello/katello/commit/ad46cb3ee5c57a9b1d3f4b4a5678b875a1a27dde[ad46cb3e])

=== Hammer
 * Hammer is not showing gpg key in repo info (https://projects.theforeman.org/issues/34924[#34924])
 * hammer repo update  fails on when providing docker info (https://projects.theforeman.org/issues/34817[#34817])
 * Mirror on sync still shows up in 'hammer repository info', while mirroring policy does not (https://projects.theforeman.org/issues/34594[#34594], https://github.com/Katello/hammer-cli-katello/commit/75bac351da07bb1d5b5488f60a5c46a00505aa5f[75bac351])

=== Content Views
 * override_components don't make it to composite CV publish step (https://projects.theforeman.org/issues/34905[#34905])
 * Incremental CV update does not auto-publish CCV (https://projects.theforeman.org/issues/34676[#34676], https://github.com/Katello/katello/commit/7424532df4e8165703b03ae8c77fcf3310c9dabe[7424532d])
 * Multi-page listing when adding repositories to Content Views confuses the number of repositories to add (https://projects.theforeman.org/issues/34670[#34670], https://github.com/Katello/katello/commit/29bf01ba5bee9199872f485ad9c2e6ebf8dd8850[29bf01ba])
 * Epoch version is missing from rpm Packages tab of Content View Version (https://projects.theforeman.org/issues/34633[#34633], https://github.com/Katello/katello/commit/066d693ebf03336b543db6a90ae49ef0c78a2f32[066d693e])
 * Exclude filter may exclude errata and packages that are needed (https://projects.theforeman.org/issues/34437[#34437], https://github.com/Katello/katello/commit/f5a42e785bf95a2b183e66ab06242d867176c20b[f5a42e78])
 * Incremental update with --propagate-all-composites makes new CVV but with no new content (https://projects.theforeman.org/issues/34383[#34383], https://github.com/Katello/katello/commit/2b908d44276c3fc05b8ee236a80d801bf92354e4[2b908d44])

=== API
 * Don't expose "label" param in PUT /organizations/:id API (https://projects.theforeman.org/issues/34859[#34859], https://github.com/Katello/katello/commit/56e5b3862f12325b32a83efecc2fb70930f13721[56e5b386])

=== Hosts
 * Repository Sets - Filter by status (https://projects.theforeman.org/issues/34808[#34808], https://github.com/Katello/katello/commit/bd142604d182d1559ca817784675b44e86a19823[bd142604])
 * Updating packages from the Content host's page always tries to use katello-agent even when remote_execution_by_default set to true (https://projects.theforeman.org/issues/34743[#34743], https://github.com/Katello/katello/commit/2b824a86dde492b726fa14e0d62de4872a289145[2b824a86])
 * Rename SSH to script provider (https://projects.theforeman.org/issues/34696[#34696], https://github.com/Katello/katello/commit/6014c4b6b2feb4f1636d5df96e9ffc64ddb751ed[6014c4b6])
 * New host details tables should link to REX job page, not Foreman Tasks (https://projects.theforeman.org/issues/34620[#34620], https://github.com/Katello/katello/commit/a0f9140b6313e31a3eff848826d781d7d9c4cefd[a0f9140b])
 * Repository Sets - Add Select All & bulk actions (https://projects.theforeman.org/issues/34421[#34421], https://github.com/Katello/katello/commit/70a71857af0649cc942b398faf8411aa7dec5ba8[70a71857])

=== Inter Server Sync
 * Repository set not showing repos after importing library and creating an ak in a disconnected satellite (https://projects.theforeman.org/issues/34733[#34733], https://github.com/Katello/katello/commit/13dba28d9724cfab41458dbab14d70554df3c500[13dba28d])
 * On content import failure for a repository the created version should be cleaned up (https://projects.theforeman.org/issues/34518[#34518], https://github.com/Katello/katello/commit/dfacc81503e66aab70bb2131a25297f50ba611b6[dfacc815])
 * Fail to import contents when the connected and disconnected servers have different product labels for the same product (https://projects.theforeman.org/issues/34501[#34501], https://github.com/Katello/katello/commit/c90c4bd2722437463a3e9532bc54d3dac4c4342d[c90c4bd2])
 * Misleading error message when incorrect org label is entered (https://projects.theforeman.org/issues/34464[#34464], https://github.com/Katello/katello/commit/cf5f9c87fad2abeddad31f63e507e5e4b6f65bd5[cf5f9c87])

=== Tests
 * Transient test failure test_yum_copy_all_no_filter_rules   (https://projects.theforeman.org/issues/34679[#34679], https://github.com/Katello/katello/commit/694c6bcd20ba153c8924c0d6b44898b497268030[694c6bcd])

=== Foreman Proxy Content
 * UI suddenly shows  "Connection refused - connect(2) for 10.74.xxx.yyy:443 (Errno::ECONNREFUSED) Plus 6 more errors" for a smart proxy even if there are no connectivity issue present (https://projects.theforeman.org/issues/34671[#34671], https://github.com/Katello/katello/commit/2a19fa75374c098798f51fe6e4f194a5dc85acea[2a19fa75])

=== Lifecycle Environments
 * Lifecycle Environment tab flash OSTree & Docker details for a second then shows actual content path. (https://projects.theforeman.org/issues/34470[#34470], https://github.com/Katello/katello/commit/8089232c5f8bd84f3d54a0dc6693aeb7c478d45f[8089232c])

=== Container
 * docker-ce fails to pull docker images (https://projects.theforeman.org/issues/32830[#32830])

=== Other
 * Un-break Katello after Foreman settings change (https://projects.theforeman.org/issues/34902[#34902])
 * Update terminology for ISS (https://projects.theforeman.org/issues/34734[#34734], https://github.com/Katello/katello/commit/92980096784151ed88072bdb0c49e96cf8d70682[92980096], https://github.com/Katello/hammer-cli-katello/commit/4f334235ae64bba279c78ae97540184e7b637bf8[4f334235])
 * Recurring logic does not clean up sync plan relationship when unset  (https://projects.theforeman.org/issues/34660[#34660], https://github.com/Katello/katello/commit/828e4f05e7facca2bdf9506c7885a86ae462723d[828e4f05])
 * Job invocation installs all the installable errata if incorrect `Job Template` is used (https://projects.theforeman.org/issues/34638[#34638], https://github.com/Katello/katello/commit/bbecd8d788fc8c872d396d45e956b62785485639[bbecd8d7])
 * rake katello:correct_repositories will try to re-create content in katello (https://projects.theforeman.org/issues/34540[#34540], https://github.com/Katello/katello/commit/1aa4945f530bc32fa1c89e74504a5caa5312ee39[1aa4945f])
 * Failed to docker pull image with "Error: image <image name> not found" error (https://projects.theforeman.org/issues/34530[#34530], https://github.com/Katello/katello/commit/3963952ea3a76f9ce62ec37d020e48e3d3ead99b[3963952e])
