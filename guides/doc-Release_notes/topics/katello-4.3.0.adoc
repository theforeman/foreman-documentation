= Katello 4.3.0

A full list of changes is available via https://projects.theforeman.org/issues?set_filter=1&sort=id%3Adesc&status_id=closed&f%5B%5D=cf_12&op%5Bcf_12%5D=%3D&v%5Bcf_12%5D%5B%5D=1473[Redmine]

== Katello

* CV UI - Bug - Content View Version Task polling doesnt stop. t stop.  - https://projects.theforeman.org/issues/34060[#34060]
* CV UI - UX Review - Spacing - https://projects.theforeman.org/issues/34046[#34046]
* Fix Katello GUI issues and add debian constraints - https://projects.theforeman.org/issues/33702[#33702]
* Import/Export Permission Upgrade task not deleting duplicate entries - https://projects.theforeman.org/issues/33678[#33678]
* Add filename attribute to python packages - https://projects.theforeman.org/issues/33650[#33650]
* Add Github action that watches when we change dependencies - https://projects.theforeman.org/issues/33649[#33649]
* Unknown subscription status on Katello webui after successful host registration.  - https://projects.theforeman.org/issues/33572[#33572]
* support dynflow 1.6.1 - https://projects.theforeman.org/issues/33562[#33562]
* Remove migration adding column to environments - https://projects.theforeman.org/issues/33561[#33561]
* As a user I can create an OSTree repository - https://projects.theforeman.org/issues/33557[#33557]
* Generic Content Browsing UI: Details/Repositories Tabs - https://projects.theforeman.org/issues/33524[#33524]
* Sync Plan Start Date Always null - https://projects.theforeman.org/issues/33523[#33523]
* Tooltip stays visible after clicking on next page button - https://projects.theforeman.org/issues/33498[#33498]
* Add component view count to versions API results - https://projects.theforeman.org/issues/33467[#33467]
* Foreman setting has wrong description for a couple of parameters under Content Tab on the Foreman WebUI - https://projects.theforeman.org/issues/33439[#33439]
* Landing page UI for browsing generic content units - https://projects.theforeman.org/issues/33435[#33435]
* Inject consumer uuid into REX jobs - https://projects.theforeman.org/issues/33410[#33410]
* Package dependency ui incorrectly displays dependency values - https://projects.theforeman.org/issues/33407[#33407]
* If/else statement have equal code  - https://projects.theforeman.org/issues/33395[#33395]
* custom confirm modal is broken - https://projects.theforeman.org/issues/33393[#33393]
* Bad inheritance of Architecture property is causing Grayed out media selections for child hostgroup - https://projects.theforeman.org/issues/33385[#33385]
* Package groups that have empty package names are copied incorrectly during CV version publcation - https://projects.theforeman.org/issues/33365[#33365]
* Pulp-ansible binding is outdated - https://projects.theforeman.org/issues/33349[#33349]
* Pulp3 Dynflow Step Statuses are Inaccurate - https://projects.theforeman.org/issues/33315[#33315]
* Content -&gt; Errata -&gt; Select Hosts -&gt; Confirm generates an exception in remote_execution controller - https://projects.theforeman.org/issues/33314[#33314]
* As a user I can sync an OSTree repository with the UI - https://projects.theforeman.org/issues/33295[#33295]
* As a user I can sync an OSTree repository with the CLI/API - https://projects.theforeman.org/issues/33294[#33294]
* [SAT-1790] Extend TableWrapper and MainTable to allow using PF TableComposable - https://projects.theforeman.org/issues/33238[#33238]
* UI Remote Options Support for Generic Content Types - https://projects.theforeman.org/issues/33166[#33166]
* bump pulp-rpm requires to allow 3.14.0 - https://projects.theforeman.org/issues/33148[#33148]
* Content View Publish for Generic Types - https://projects.theforeman.org/issues/33103[#33103]
* [SAT-1790] New Host details overview - Content view details card - https://projects.theforeman.org/issues/33084[#33084]
* [SAT-4231] Traces - Restart via remote execution - https://projects.theforeman.org/issues/33081[#33081]
* [SAT-4231] Traces - Bulk select & restart - https://projects.theforeman.org/issues/33078[#33078]
* [SAT-4231] Traces - Enable Tracer button - https://projects.theforeman.org/issues/33077[#33077]
* apipie cache out of date because repo_create param content_type relies on creatable_repository_types instead of defined_repository_types - https://projects.theforeman.org/issues/33057[#33057]
* Inheritance does not work for child hostgroups Content view, Content Source and Lifecycle environment - https://projects.theforeman.org/issues/33054[#33054]
* RHEL8 re-registration error shows the information about foreman rather satellite - https://projects.theforeman.org/issues/33031[#33031]
* Refactor DockerTag cleanup in 20200402130013_add_repsository_docker_meta_tag_f_key - https://projects.theforeman.org/issues/33012[#33012]
* [global registration] - Global Registration is not working w.r.t. Life Cycle Environment - https://projects.theforeman.org/issues/33005[#33005]
* verify if katello host tools and tracer are installed on debian / ubuntu - https://projects.theforeman.org/issues/32993[#32993]
* CV UI - Add Promote workflow to new CV UI (Component CVs) - https://projects.theforeman.org/issues/32509[#32509]

=== Content Views

* undefined local variable or method \`cv for Katello::ComponentViewPresenter:Class for Katello::ComponentViewPresenter:Class - https://projects.theforeman.org/issues/34147[#34147]
* CV UI - Add permissions to new CV UI workflows - https://projects.theforeman.org/issues/33668[#33668]
* CV UI - Support bulk adding component CVs to composite CVs - https://projects.theforeman.org/issues/33667[#33667]
* Composite CV publishing is broken - https://projects.theforeman.org/issues/33510[#33510]
* RPM include filter includes extraneous packages from package groups having only type="default" packagereqs - https://projects.theforeman.org/issues/33358[#33358]
* Repository Clear failed - https://projects.theforeman.org/issues/33354[#33354]
* Enter key doesnt work when creating a content view filtert work when creating a content view filter - https://projects.theforeman.org/issues/33288[#33288]
* CV Package count ok, but Errata count (huge) mismatches with pulp2 - https://projects.theforeman.org/issues/33254[#33254]
* Destroying tasks causes content views to disappear from new and old UI pages - https://projects.theforeman.org/issues/33230[#33230]
* [pulp3] CV with filter by id with empty rules fails with undefined method \`start_date for nil:NilClass for nil:NilClass - https://projects.theforeman.org/issues/33213[#33213]
* Remove old EnvironmentCreate action - https://projects.theforeman.org/issues/33020[#33020]
* Introduce a valid solution to fix the error "Katello::Errors::CandlepinError: Environment with id XXXX could not be found" - https://projects.theforeman.org/issues/33019[#33019]
* Capsule syncing is not triggered by CV promotion - https://projects.theforeman.org/issues/33014[#33014]
* Fix wording on new CV page empty state - https://projects.theforeman.org/issues/32788[#32788]
* CV Promotion/Composite cv publish failed with NoMethodError: undefined method \`get_status for nil:NilClass for nil:NilClass - https://projects.theforeman.org/issues/32556[#32556]
* improve speed of content view publish with filters - https://projects.theforeman.org/issues/32460[#32460]
* Excluding packages from EPEL 7 (at least) causes all errata to disappear - https://projects.theforeman.org/issues/32435[#32435]
* New Content View Page - Add Added/Available/All to the content view filter details page - https://projects.theforeman.org/issues/31970[#31970]

=== Web UI

* CV UI - UX Review 3 - Empty States - Tooltips - Assorted UI tweaks - https://projects.theforeman.org/issues/33969[#33969]
* Katello - Nightly failures due to package availability - https://projects.theforeman.org/issues/33953[#33953]
* CV UI - Add search filters with chips to errata filter page  - https://projects.theforeman.org/issues/33638[#33638]
* Hide not finished host redesign tabs from UI - https://projects.theforeman.org/issues/33628[#33628]
* UI for listing generic content units at repository level + removal support - https://projects.theforeman.org/issues/33616[#33616]
* CV UI -  Version Details - Files Tab for Table View - https://projects.theforeman.org/issues/33594[#33594]
* [CV UI]  Version details repository drop-down selection for all associated tables - https://projects.theforeman.org/issues/33555[#33555]
* CV UI - Breadcrumbs for all CV Pages - https://projects.theforeman.org/issues/33552[#33552]
* CV UI - Switch new and old UI urls - https://projects.theforeman.org/issues/33547[#33547]
* CV UI - Allow editing filters (name, description) inline on Filter details page - https://projects.theforeman.org/issues/33546[#33546]
* [CV UI] Allow creating Errata Filter by Id and Date type - https://projects.theforeman.org/issues/33545[#33545]
* Add Include all Module Streams with no errata checkbox to Module Stream Filter details page. - https://projects.theforeman.org/issues/33537[#33537]
* Remove jQuery UI dependency - https://projects.theforeman.org/issues/33477[#33477]
* CV UI -  ComponentView routing overhaul (hashrouter) - https://projects.theforeman.org/issues/33404[#33404]
* CV UI - Delete Content View - https://projects.theforeman.org/issues/33402[#33402]
* CV UI - Add errata filter rule by ID to CV filter - https://projects.theforeman.org/issues/33400[#33400]
* CV UI - Add errata filter rule by Data range to CV filter - https://projects.theforeman.org/issues/33399[#33399]
* Secondary tabs should be routable in the new host details - https://projects.theforeman.org/issues/33350[#33350]
* CV UI - Add affected repository tab to Filter details page - https://projects.theforeman.org/issues/33336[#33336]
* Updating per_page on table sends the page into infinite loops - https://projects.theforeman.org/issues/33276[#33276]
* CV UI - CV Version remove from environment - https://projects.theforeman.org/issues/33262[#33262]
* New Content View Page - Add module stream filter detail page - https://projects.theforeman.org/issues/33252[#33252]
* Add pagination component to the bottom of the table for tablewrapper - https://projects.theforeman.org/issues/33181[#33181]
* CV UI - Task progress bar with details to poll and track Publish/Promote tasks - https://projects.theforeman.org/issues/33118[#33118]
* CV UI - Implement Matching content modal for RPM Filter rules - https://projects.theforeman.org/issues/33117[#33117]
* CV UI - Add/Remove Package Group Filter rules to Package Group Filters - https://projects.theforeman.org/issues/33116[#33116]
* CV UI - Delete RPM Filter rules from RPM Filters - https://projects.theforeman.org/issues/33114[#33114]
* CV UI - Add RPM Filter rules to RPM Filters - https://projects.theforeman.org/issues/33113[#33113]
* [SAT-4231] Traces - Basic read-only table - https://projects.theforeman.org/issues/33076[#33076]
* Component content view &gt; repositories checkbox selection doesnt work for bulk actions.t work for bulk actions. - https://projects.theforeman.org/issues/32956[#32956]
* CV UI - Delete filters from CV - https://projects.theforeman.org/issues/32931[#32931]
* New Content View Page - Add container tag filter detail page - https://projects.theforeman.org/issues/32638[#32638]

=== Tests

* Upgrading to vendor v8.16.0 cause testing to fail - https://projects.theforeman.org/issues/33761[#33761]
* Increase nock timeout for longer running tests and possibly slow CI - https://projects.theforeman.org/issues/33692[#33692]
* mailer test failures - https://projects.theforeman.org/issues/33412[#33412]
* transient kt_environment  audit test failure - https://projects.theforeman.org/issues/33380[#33380]
* react failure in master - https://projects.theforeman.org/issues/33372[#33372]
* Intermittent Pipeline katello-master-source-release failure on contentViewDetailRepos.test.js - https://projects.theforeman.org/issues/33199[#33199]
* spacing issue with rubocop disablement - https://projects.theforeman.org/issues/33167[#33167]
* Use eslint react-hooks rules - https://projects.theforeman.org/issues/32221[#32221]

=== Errata Management

* Host filter on load_errata_applications macro is reverted - https://projects.theforeman.org/issues/33684[#33684]
* When applying an applicable errata on a host that is using a CV it does not generate a incremental CV version with REX turned on - https://projects.theforeman.org/issues/33382[#33382]
* Bulk generate applicability for hosts task fails with Duplicate Key error  - https://projects.theforeman.org/issues/33287[#33287]
* bulk hosts apply errata affected count doesnt open in new tab/windowt open in new tab/window - https://projects.theforeman.org/issues/33237[#33237]
* Warnings should be improved for hammer host errata apply, when not passing errata_ids - https://projects.theforeman.org/issues/33182[#33182]
* Incorrect applicablity in katello 4 - https://projects.theforeman.org/issues/32739[#32739]

=== Hosts

* bThe link "here" in tabs of a content host (/content_hosts/1/...) is not opening any page'The link "here" in tabs of a content host (/content_hosts/1/...) is not opening any page - https://projects.theforeman.org/issues/33677[#33677]
* Edit hosts page not reflecting correct selections. - https://projects.theforeman.org/issues/33581[#33581]
* [SAT-4229] Content - Errata - Recalculate - https://projects.theforeman.org/issues/33516[#33516]
* Add Errata - Bulk select & apply - https://projects.theforeman.org/issues/33515[#33515]
* [SAT-4229] New host details Content - Errata - Table row expansion - https://projects.theforeman.org/issues/33485[#33485]
* Old Registration URL doesnt redirect to the new URLt redirect to the new URL - https://projects.theforeman.org/issues/33442[#33442]
* Katello-nightly missing content view environment attributes on Hostgroups page - https://projects.theforeman.org/issues/33374[#33374]
* Host Redesign - Basic Errata table - https://projects.theforeman.org/issues/33361[#33361]
* Noticed "event_queue_error: type=delete_host_agent_queue, object_id=XX" error logging during concurrent host build/rebuild/re-registration/deletion in Satellite 6.10 - https://projects.theforeman.org/issues/33348[#33348]
* Change of auto-attach' preference via subscription-manager doesn't get reflected in Satellite WebUIauto-attach preference via subscription-manager doesn't get reflected in Satellite WebUI preference via subscription-manager doesnt get reflected in Satellite WebUIt get reflected in Satellite WebUI - https://projects.theforeman.org/issues/33285[#33285]
* Incorrect search link from packages view for applicable or upgradable hosts - https://projects.theforeman.org/issues/33256[#33256]
* Installation source in hostgroup cannot be changed from "synced content" to local medium - https://projects.theforeman.org/issues/33144[#33144]
* hammer host package upgrade-all doesnt update all packagest update all packages - https://projects.theforeman.org/issues/33040[#33040]
* Unable to interact with appstream actions in content host &gt; host &gt; appstream, leads to an oops - https://projects.theforeman.org/issues/32943[#32943]
* Move Actions::Katello::Host::UploadPackageProfile out of dynflow - https://projects.theforeman.org/issues/32889[#32889]

=== Repositories

* support pulp 3.15 - https://projects.theforeman.org/issues/33652[#33652]
* Errata changing in the upstream repo is not being reflected in the Katello DB - https://projects.theforeman.org/issues/33648[#33648]
* In Katello 4.1 upgrade, installer failed with exit status 6 in the db:migrate stage. - https://projects.theforeman.org/issues/33629[#33629]
* bUpdate recommended repos for Satellite & Tools from 6.9 to 6.10'Update recommended repos for Satellite & Tools from 6.9 to 6.10 - https://projects.theforeman.org/issues/33627[#33627]
* Generic repository types dont work properly with multiple generic typest work properly with multiple generic types - https://projects.theforeman.org/issues/33625[#33625]
* Add download_policy setting for Deb-repositories - https://projects.theforeman.org/issues/33578[#33578]
* clear pulp3s checksum values on its yum repository objectss checksum values on its yum repository objects - https://projects.theforeman.org/issues/33567[#33567]
* Selecting certain products in "Red Hat Repositories" page renders a Blank Page in Satellite 6.10 - https://projects.theforeman.org/issues/33544[#33544]
* Update of the Registry Name Pattern fails - https://projects.theforeman.org/issues/33534[#33534]
* Make force repo/capsule sync better handle mirrored metadata - https://projects.theforeman.org/issues/33518[#33518]
* make metadata regeneration harder - https://projects.theforeman.org/issues/33517[#33517]
* show new content counts as part of sync task status - https://projects.theforeman.org/issues/33509[#33509]
* Selected yum metadata checksum type on is not reflected in repomd.xml on a repo creation - https://projects.theforeman.org/issues/33495[#33495]
* Remove OSTree filter from Red Hat Repositories drop down list - https://projects.theforeman.org/issues/33493[#33493]
* Total steps: 0/0 in sync status - https://projects.theforeman.org/issues/33472[#33472]
* Background download policy is still referenced in a number of areas - https://projects.theforeman.org/issues/33468[#33468]
* Add repositories node to generic content unit rabl - https://projects.theforeman.org/issues/33454[#33454]
* Drop rake task katello:refresh_sync_schedule - https://projects.theforeman.org/issues/33450[#33450]
* UI shows 0 packages\\errata\\package_groups after a bad sync followed by a successful sync for the same repo - https://projects.theforeman.org/issues/33443[#33443]
* Sync overview' Widget  in 'Dashboard' is not showing any dataSync overview Widget  in 'Dashboard' is not showing any data Widget  in Dashboard' is not showing any dataDashboard is not showing any data is not showing any data - https://projects.theforeman.org/issues/33413[#33413]
* catch specific error  from pulp and throw a better one that is katello specific - https://projects.theforeman.org/issues/33376[#33376]
* Could not update repository with URL (ISE 500 in logs) when url was not previously set - https://projects.theforeman.org/issues/33370[#33370]
* reduce code duplication by making client_module controlled entirely by the repo type class - https://projects.theforeman.org/issues/33359[#33359]
* "NoMethodError: undefined method \`id\' for nil:NilClass" error while creating a repository.'"NoMethodError: undefined method \`id\ for nil:NilClass" error while creating a repository.' for nil:NilClass" error while creating a repository. - https://projects.theforeman.org/issues/33286[#33286]
* orphan cleanup should remove orphaned root repositories - https://projects.theforeman.org/issues/33279[#33279]
* Integrate Pulp3 ULN support into Katello - https://projects.theforeman.org/issues/33250[#33250]
* Not all files are uploaded to a repository, no error is shown - https://projects.theforeman.org/issues/33235[#33235]
* ansible collection file upload fails with Error during upload: undefined method \`label for nil:NilClass for nil:NilClass - https://projects.theforeman.org/issues/33221[#33221]
* foreman-rake katello:correct_repositories is failing to create the repositories. - https://projects.theforeman.org/issues/33212[#33212]
* Show rhel-6-server-els-rpms under recommended repositories instead of rhel-6-server-rpms - https://projects.theforeman.org/issues/33189[#33189]
* Do not display Red Hat Enterprise Linux 5 Server - Extended Life Cycle Support (RPMs) repository under recommended repositories - https://projects.theforeman.org/issues/33188[#33188]
* unable to set SSL certs when creating Ansible Collection repository - https://projects.theforeman.org/issues/33171[#33171]
* attempting to delete a user name and password for "Upstream Authorization" fails - https://projects.theforeman.org/issues/33164[#33164]
* Ansible collection repo validate both auth url and token are supplied - https://projects.theforeman.org/issues/33147[#33147]
* Capsule sync failed after upgrade with missing repository type error. - https://projects.theforeman.org/issues/33058[#33058]
* Katello saves publication as a repos version_href at sync time if Pulp auto-creates publicationss version_href at sync time if Pulp auto-creates publications - https://projects.theforeman.org/issues/33044[#33044]
* Katello 4.1 journal: warning: URI.escape is obsolete - https://projects.theforeman.org/issues/32995[#32995]
*  Sync of content from an authenticated yum repository fails - https://projects.theforeman.org/issues/32994[#32994]
* Sync/index python repository and handle remote options - https://projects.theforeman.org/issues/32802[#32802]
* Product sync-status of all repo-syncs - https://projects.theforeman.org/issues/32798[#32798]
* katello assumes GET params in repo url are SLES auth tokens, but may not be - https://projects.theforeman.org/issues/32660[#32660]
* repository details should include last changed timestamp - https://projects.theforeman.org/issues/31590[#31590]
* Applicability for deb packages - https://projects.theforeman.org/issues/27625[#27625]

=== Subscriptions

*  Satellite doesnt forward the "If-Modified-Since" header for /accessible_content endpoint to Candlepint forward the "If-Modified-Since" header for /accessible_content endpoint to Candlepin - https://projects.theforeman.org/issues/33618[#33618]
* Navigating to Admin, Organization, and selecting an organization gives 404 - https://projects.theforeman.org/issues/33573[#33573]

=== Tooling

* pulpcore-resource-manager gets started after rake katello:reset - https://projects.theforeman.org/issues/33609[#33609]
* Add PR template to remind contributors to add context and testing steps - https://projects.theforeman.org/issues/33571[#33571]
* Cleanup unused methods in Candlepin Consumer resource - https://projects.theforeman.org/issues/33508[#33508]
* remove 4.2 deprecated functionality - https://projects.theforeman.org/issues/33234[#33234]
* gem build includes .edit.po files in locale - https://projects.theforeman.org/issues/33200[#33200]

=== Inter Server Sync

* Import/Export Permission Upgrade task not getting run  - https://projects.theforeman.org/issues/33527[#33527]
* File units not indexed correctly on import - https://projects.theforeman.org/issues/33394[#33394]
* Can"t import "paid" content in disconnected mode - https://projects.theforeman.org/issues/33102[#33102]

=== Foreman Proxy Content

* Capsule content page shows content views as empty when they arentt - https://projects.theforeman.org/issues/33466[#33466]
* Default Organization View showing status as  {{ historyText(version) }}  when you check through Infrastructure --&gt; Smart Proxies --&gt; proxy --&gt; content --&gt; Library --&gt; Default Organization View - https://projects.theforeman.org/issues/33465[#33465]
* Pulp 3 check fails if only running a single worker - https://projects.theforeman.org/issues/33430[#33430]
* Smart Proxy Syncing debian repositories fails with \`Response body: {"distributions":["This field is required."]} (PulpDebClient::ApiError)\` - https://projects.theforeman.org/issues/33377[#33377]
* incorrect pulp version number after upgrade to pulp 3 - https://projects.theforeman.org/issues/33211[#33211]
* Cancel button should be enabled in the capsule sync until the job completions - https://projects.theforeman.org/issues/33037[#33037]
* container gateway updates that fail cause the entire smart proxy sync to fail - https://projects.theforeman.org/issues/32816[#32816]

=== Ansible Collections

* Add repository type count to cv version API and fix ansible collection cv publish - https://projects.theforeman.org/issues/33386[#33386]
* usability issues with updating a repository with invalid data - https://projects.theforeman.org/issues/33251[#33251]
* Ansible Collection - auth_token should be allowed without providing auth_url - https://projects.theforeman.org/issues/33208[#33208]

=== Container

* Adding ansible collection repos or debian repos to content views with filters causes failures - https://projects.theforeman.org/issues/33375[#33375]

=== Roles and Permissions

* Some of the "filters" permission changed after the upgrade. - https://projects.theforeman.org/issues/33146[#33146]

=== API

* Host registration API - activation_key & activation_keys fields - https://projects.theforeman.org/issues/33141[#33141]
* Expose on the Katello API the ability to sync only an individual Content View or Repository to a Smart Proxy - https://projects.theforeman.org/issues/33120[#33120]
* Generic content units should be uploadable, deletable, and browsable via the API - https://projects.theforeman.org/issues/32912[#32912]

=== Client/Agent

* No option via Katello-agent in errata installation of host-collections in UI only - https://projects.theforeman.org/issues/33086[#33086]
* via Katello-agent option is not clickable on content host errata page - https://projects.theforeman.org/issues/33036[#33036]

=== Activation Key

* ignore 404/missing id on activation key delete - https://projects.theforeman.org/issues/32664[#32664]

== Packaging

* change hostname tries to unconditionally restart puppetserver - https://projects.theforeman.org/issues/34099[#34099]
