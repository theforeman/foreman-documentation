= Foreman 3.2.0

A full list of changes is available via https://projects.theforeman.org/issues?set_filter=1&sort=id%3Adesc&status_id=closed&f%5B%5D=cf_12&op%5Bcf_12%5D=%3D&v%5Bcf_12%5D%5B%5D=1512[Redmine]

== Foreman

* Add Safemode jail definition for ActiveSupport::TimeWithZone - https://projects.theforeman.org/issues/34571[#34571]
* Helper logging method how_long - https://projects.theforeman.org/issues/34091[#34091]

=== Security

* Settings defined by DSL are not properly encrypted - https://projects.theforeman.org/issues/34573[#34573]
* The login page exposes version of the foreman - https://projects.theforeman.org/issues/33417[#33417]

=== Inventory

* The Submit button on a host form redirects to an invalid page - https://projects.theforeman.org/issues/34572[#34572]

=== Web Interface

* Add pagelet mountpoints for hosts list table - https://projects.theforeman.org/issues/34543[#34543]
* default variant prop is missing from pagination component - https://projects.theforeman.org/issues/34410[#34410]
* remove experimental banner in new host page - https://projects.theforeman.org/issues/34293[#34293]
* Ignore URL query params when setting active tab - https://projects.theforeman.org/issues/34271[#34271]
* Add slot for rex dropdown in new host page - https://projects.theforeman.org/issues/34259[#34259]
* New host details link should be removed from hosts index page - https://projects.theforeman.org/issues/34254[#34254]
* use PF4 pagination - https://projects.theforeman.org/issues/34185[#34185]
* Opt in new host page by default - https://projects.theforeman.org/issues/34166[#34166]
* Core cards in overview tab should be arrangeable - https://projects.theforeman.org/issues/34142[#34142]
* Hosts UI - UX Review - Spacing - https://projects.theforeman.org/issues/34129[#34129]
* New Host detail page - small screen cant see build modalt see build modal - https://projects.theforeman.org/issues/33955[#33955]
* New host detail page shows IP address over multiple lines - https://projects.theforeman.org/issues/33948[#33948]
* new host page lacks empty state - https://projects.theforeman.org/issues/33862[#33862]
* delete unused  react_pagination_props - https://projects.theforeman.org/issues/33681[#33681]
* Host Detail Graphs VERY slow to load after upgrade to 3.0.0-rc1 - https://projects.theforeman.org/issues/33310[#33310]

=== Templates

* Ensure that the insights snippet is being called by honoring the value of host_registration_insights parameter - https://projects.theforeman.org/issues/34525[#34525]
* Allow puppet setup to be skipped even if you set a puppet master - https://projects.theforeman.org/issues/34388[#34388]
* Update examples for truthy? and falsy? macros - https://projects.theforeman.org/issues/34365[#34365]
* Associate redhat templates with CentOS_Stream OS name - https://projects.theforeman.org/issues/34302[#34302]
* upgrade fails during db:seed with ActiveRecord::RecordNotDestroyed: Failed to destroy the record - https://projects.theforeman.org/issues/34299[#34299]
* pxe_kernel_options are not handled in Preseed PXE templates - https://projects.theforeman.org/issues/34292[#34292]
* More Anaconda kernel boot parameters without inst.' prefix template changesinst. prefix template changes prefix template changes - https://projects.theforeman.org/issues/34265[#34265]
* Puppet aio detection is broken in Foreman 3.1 provisioning templates, PR#8899 is full of typos - https://projects.theforeman.org/issues/34214[#34214]
* is_true? & is_false? template helpers - https://projects.theforeman.org/issues/34213[#34213]
* Rename enable-puppetlabs-puppetX-repo to enable-puppetofficial-puppetX-repo - https://projects.theforeman.org/issues/34088[#34088]
* Rename Job Invocation template - https://projects.theforeman.org/issues/34068[#34068]
* Include Tower extra vars feature when calling the API callback - https://projects.theforeman.org/issues/33942[#33942]
* Add current date macro - https://projects.theforeman.org/issues/33907[#33907]
* include repo support for puppet 7 in provisioning snippets - https://projects.theforeman.org/issues/32602[#32602]

=== Users, Roles and Permissions

* Infer of permission name for isolated namespace controllers doesnt work - https://projects.theforeman.org/issues/34506[#34506]
* b"Mail enabled' setting cannot be switched with the hammer user command."Mail enabled setting cannot be switched with the hammer user command." setting cannot be switched with the hammer user command." - https://projects.theforeman.org/issues/34123[#34123]

=== Compute resources - VMware

* Latest Hardware version for VMware vSphere 7.0 U2 and U3 is not available - https://projects.theforeman.org/issues/34499[#34499]
* CentOS9 and RHEL9 Guest OS are missing  - https://projects.theforeman.org/issues/34498[#34498]
* Unable to create compute profile for specific vmware compute resource - https://projects.theforeman.org/issues/30550[#30550]
* Cannot view Compute-Profiles from a specific Compute-Resource - https://projects.theforeman.org/issues/28155[#28155]

=== Facts

* Normalize fact parsers to use CentOS instead of centos - https://projects.theforeman.org/issues/34450[#34450]
* Identifying CentOS Stream as CentOS_Stream breaks in upgrades - https://projects.theforeman.org/issues/34409[#34409]
* Fix IPv6 support in rhsm fact facter - https://projects.theforeman.org/issues/34330[#34330]
* Add Oracle hypervisor virtual interface naming pattern to the ignore list - https://projects.theforeman.org/issues/34315[#34315]
* fact_values api performance issues when loading a large number of facts - https://projects.theforeman.org/issues/34160[#34160]
* remove deprecated Host#import_facts method - https://projects.theforeman.org/issues/34063[#34063]
* New OS created due to facts mismatch for operatingsystem for RHSM, Puppet and Ansible - https://projects.theforeman.org/issues/33981[#33981]
* Support ? for setting wildcards - https://projects.theforeman.org/issues/33775[#33775]
* Cloned viewer role cannot view facts - https://projects.theforeman.org/issues/33656[#33656]
* Support CentOS Stream 8 detection based on all facts - https://projects.theforeman.org/issues/33470[#33470]
* Use modern Facter 3 facts - https://projects.theforeman.org/issues/27906[#27906]

=== Organizations and Locations

* Organization context fails to change in web UI - https://projects.theforeman.org/issues/34416[#34416]

=== API

* Change example for --order - https://projects.theforeman.org/issues/34381[#34381]

=== Plugin integration

* Facets do not allow emptying their relations through mass assignment - https://projects.theforeman.org/issues/34375[#34375]
* GraphQL types touch database in migration rakes - https://projects.theforeman.org/issues/34366[#34366]
* Allow Site manager role to be extended from plugins - https://projects.theforeman.org/issues/34351[#34351]
* Allow specific permissions to be excluded from being added to default roles - https://projects.theforeman.org/issues/34329[#34329]
* Add medium_providers_registry instance method - https://projects.theforeman.org/issues/34002[#34002]
* clean up deprecated methods for foreman 3.2 - https://projects.theforeman.org/issues/33996[#33996]
* Enable Salt Autosign via Grains for Provisioning Template - https://projects.theforeman.org/issues/32919[#32919]

=== Host creation

* Host form redirect does not work for unmanaged host - https://projects.theforeman.org/issues/34371[#34371]
* Host form redirect relies on the primary interface being the first interface - https://projects.theforeman.org/issues/34300[#34300]
* Remove workaround for root_password encoding - https://projects.theforeman.org/issues/34289[#34289]
* Ubuntu Autoinstall support - https://projects.theforeman.org/issues/32632[#32632]

=== Tests

* Improve api/settings_controller test coverage - https://projects.theforeman.org/issues/34349[#34349]
* ParameterFilterTest accidentally modifies Mocha::Mock - https://projects.theforeman.org/issues/34064[#34064]
* Update minitest plugin for junit-XML generation - https://projects.theforeman.org/issues/26968[#26968]
* Update minitest to &gt; 5.10 - https://projects.theforeman.org/issues/22110[#22110]

=== Host registration

* Insights snippet - remove connection test - https://projects.theforeman.org/issues/34340[#34340]
* Missing example for "Install packages" field - https://projects.theforeman.org/issues/34252[#34252]
* Grammatical errors with Insecure help text at Host Registration - https://projects.theforeman.org/issues/34250[#34250]
* Host facts are not uploaded to Foreman when host is registered with global registration - https://projects.theforeman.org/issues/34249[#34249]
* Fix bool params in global registration template - https://projects.theforeman.org/issues/34206[#34206]
* Preview of registration and host_init_config templates - https://projects.theforeman.org/issues/34198[#34198]
* Fix name & path to OS host_init_config template - https://projects.theforeman.org/issues/33979[#33979]

=== Settings

* The Setting defaults are never updated
 - https://projects.theforeman.org/issues/34323[#34323]
* Speed up settings index page - https://projects.theforeman.org/issues/33935[#33935]
* drop fix_db_cache setting - https://projects.theforeman.org/issues/33906[#33906]
* Deprecate old setting definitions without \`default_settings\` - https://projects.theforeman.org/issues/33781[#33781]

=== Network

* Add \`ip_include?\` method to IPAM::Base that uses \`IPAddr#include?\` method - https://projects.theforeman.org/issues/34280[#34280]

=== Smart Proxy

* Drop require_ssl_smart_proxies setting - https://projects.theforeman.org/issues/34236[#34236]
* Do not warn on HTTP connection from Smart proxy - https://projects.theforeman.org/issues/34234[#34234]

=== Audit Log

* Recent audits card in new host page is missing username - https://projects.theforeman.org/issues/34223[#34223]

=== Packaging

* Pin psych &lt; 4 - https://projects.theforeman.org/issues/34212[#34212]

=== Rails

* Require code from lib folder - https://projects.theforeman.org/issues/34165[#34165]
* Audit human class name is translated twice - https://projects.theforeman.org/issues/34151[#34151]
* Move services from lib/foreman to app/services/foreman - https://projects.theforeman.org/issues/34146[#34146]
* Move Foreman::Renderer from lib/ to app/services - https://projects.theforeman.org/issues/34139[#34139]
* Autoload ProxyAPI files from /app/services - https://projects.theforeman.org/issues/34138[#34138]
* Add initialization method to RbacRegistry - https://projects.theforeman.org/issues/34010[#34010]
* Add plugin after_initialize hook - https://projects.theforeman.org/issues/34009[#34009]
* Plugin and its rbac_support are using Role and Permission models too early - https://projects.theforeman.org/issues/34006[#34006]
* drop truncate_bytes method - https://projects.theforeman.org/issues/33992[#33992]
* Require /lib dependencies in initializers/foreman.rb  - https://projects.theforeman.org/issues/33991[#33991]
* Delay Initialization of ApiPie that depends on Model classes - https://projects.theforeman.org/issues/33989[#33989]
* Hostmix to use class_methods - https://projects.theforeman.org/issues/33987[#33987]
* Move Callback classes to separate files - https://projects.theforeman.org/issues/33986[#33986]
* Move identification methods to ApplicationRecord - https://projects.theforeman.org/issues/33985[#33985]
* Remove custom update methods - https://projects.theforeman.org/issues/33984[#33984]
* Fix loading of Foreman::Telemetry in initializers - https://projects.theforeman.org/issues/33968[#33968]
* Move basic ActiveRecord::Base custom extensions to ApplicationRecord - https://projects.theforeman.org/issues/33967[#33967]
* Load Menu::Loader in to_prepare'to_prepare - https://projects.theforeman.org/issues/33964[#33964]
* Require Foreman::Util in initializers - https://projects.theforeman.org/issues/33957[#33957]
* Fix early load of ForemanInternal in initializer - https://projects.theforeman.org/issues/33950[#33950]
* Fix early load of plugin fact parsers - https://projects.theforeman.org/issues/33949[#33949]
* Postpone setting validations to to_prepare - https://projects.theforeman.org/issues/33892[#33892]
* Require foreman/gettext directly - https://projects.theforeman.org/issues/33890[#33890]
* move away from record_tag_helper - https://projects.theforeman.org/issues/28571[#28571]
* Do not use string interpolation when composing SQL queries. - https://projects.theforeman.org/issues/23300[#23300]

=== JavaScript stack

* Use PF4 pagination as default - https://projects.theforeman.org/issues/34133[#34133]
* use FormattedMessage instead of dangerouslySetInnerHTML  - https://projects.theforeman.org/issues/33946[#33946]
* Allow 2 search with bookmark in one page  - https://projects.theforeman.org/issues/33736[#33736]

=== Monitoring

* Report disallowed metric labels as "other" - https://projects.theforeman.org/issues/34122[#34122]
* forget_status doesnt update the global host's statet update the global hosts states state - https://projects.theforeman.org/issues/33882[#33882]

=== Rake tasks

* Remove legacy models:consolidate task - https://projects.theforeman.org/issues/34117[#34117]

=== TFTP

* Misspelled word in tooltip "Toggel" instead of "Toggle"
 - https://projects.theforeman.org/issues/34062[#34062]

=== Internationalization

* Strings with enter dont get extracted for translationt get extracted for translation - https://projects.theforeman.org/issues/34058[#34058]
* Drop translations for languages with low translation rate - https://projects.theforeman.org/issues/33920[#33920]

=== Reporting

* Importing puppet report via the API does not authorize - https://projects.theforeman.org/issues/34026[#34026]
* Report Template "Applicable Errata" fails for large numbers of Content Hosts - https://projects.theforeman.org/issues/29970[#29970]

=== DB migrations

* Clean up old data migrations from Foreman &lt; 2.0 - https://projects.theforeman.org/issues/33909[#33909]

=== Development tools

* API Development Guidelines - https://projects.theforeman.org/issues/33865[#33865]

=== Search

* Make ordering by id possible for more models - https://projects.theforeman.org/issues/33842[#33842]

=== Host groups

* Reprovisioning a host using new HostGroup does not inherit root password from the new HostGroup - https://projects.theforeman.org/issues/33811[#33811]

=== Unattended installations

* Ruby warning: URI.escape is obsolete after the host is provisioned - https://projects.theforeman.org/issues/33801[#33801]
* Add ct/fcct transpiler macro support - https://projects.theforeman.org/issues/31027[#31027]

=== Authentication

* Support ADFS-style JWTs - https://projects.theforeman.org/issues/33055[#33055]

== Installer

* katello-rhsm-consumer script subscription-manager version detection depends on subscription-manager rpm being installed
 - https://projects.theforeman.org/issues/34406[#34406]
* installer does not restart foreman.service when changing puma configuration - https://projects.theforeman.org/issues/33973[#33973]
* Add iPXE bootstrap to the dhcpd.conf - https://projects.theforeman.org/issues/33549[#33549]

=== foreman-installer script

* run foreman-rake upgrade:run only conditionally - https://projects.theforeman.org/issues/34440[#34440]

=== Foreman modules

* Dynflow doesnt properly come back if the DB is unavailable for a brief period of timet properly come back if the DB is unavailable for a brief period of time - https://projects.theforeman.org/issues/34394[#34394]
* Create the Pulp group as system group - https://projects.theforeman.org/issues/34379[#34379]
* enable redis cache for pulp content server by default - https://projects.theforeman.org/issues/34325[#34325]
* [Custom Certs] - Failed to install the custom certs on Katello 4.3, works on 4.1 - https://projects.theforeman.org/issues/34317[#34317]
* Seed may not be triggered after migration - https://projects.theforeman.org/issues/34308[#34308]
* support KEEP_CHANGELOG_LIMIT option with pulpcore - https://projects.theforeman.org/issues/34298[#34298]
* Candlepin errors when using an encrypted key generated with genpkey or on a FIPS enabled machine - https://projects.theforeman.org/issues/34189[#34189]
* Katello 4.2 to 4.3 upgrade doesnt trigger apipie:cache:index, breaking some new hammer commandst trigger apipie:cache:index, breaking some new hammer commands - https://projects.theforeman.org/issues/34161[#34161]
* foreman-proxy-content-enable-ostree true doesnt refresh the proxy features, leading to ostree being unavailablet refresh the proxy features, leading to ostree being unavailable - https://projects.theforeman.org/issues/34154[#34154]
* Puppet module puppet-foreman missing parameter for :trusted_proxies: - https://projects.theforeman.org/issues/34089[#34089]
* Set permissions on Candlepin config files to be owned by root:tomcat - https://projects.theforeman.org/issues/30366[#30366]

== Smart Proxy

* Bump version to 3.2.0-develop - https://projects.theforeman.org/issues/33915[#33915]

=== DHCP

* DHCP error with wrong number of arguments for validate_supported_address - https://projects.theforeman.org/issues/34359[#34359]
* Improve expired lease parser tests - https://projects.theforeman.org/issues/33772[#33772]

=== DNS

* Windows DNSCMD no implicit conversion of nil into String - https://projects.theforeman.org/issues/34226[#34226]

=== Plugins

* Add an enum plugin validator - https://projects.theforeman.org/issues/34164[#34164]
* validate_presence and validate_readable with predicate broken - https://projects.theforeman.org/issues/34141[#34141]
