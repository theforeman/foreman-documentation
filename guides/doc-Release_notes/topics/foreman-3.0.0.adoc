= Foreman 3.0.0

A full list of changes is available via https://projects.theforeman.org/issues?set_filter=1&sort=id%3Adesc&status_id=closed&f%5B%5D=cf_12&op%5Bcf_12%5D=%3D&v%5Bcf_12%5D%5B%5D=1408[Redmine]

== Foreman

* provide a list of JavaScript dependencies that can be ignored during package building - https://projects.theforeman.org/issues/33318[#33318]

=== JavaScript stack

* don't run npm-fix-foreman-stories.sh on every npm install - https://projects.theforeman.org/issues/33319[#33319]
* Toast message is hidden - https://projects.theforeman.org/issues/33316[#33316]
* Add useCallback to RegistrationCommandsPage - https://projects.theforeman.org/issues/33161[#33161]
* Slot registry isn't singleton  - https://projects.theforeman.org/issues/33153[#33153]
* Refactor FactChart to use slice pattern - https://projects.theforeman.org/issues/33003[#33003]
* Slot warning is not explicit  - https://projects.theforeman.org/issues/32948[#32948]
* update js vendor to 8.6 - https://projects.theforeman.org/issues/32904[#32904]
* Add Redux toolkit  - https://projects.theforeman.org/issues/32899[#32899]
* trigger toast notification from the root of the app - https://projects.theforeman.org/issues/32860[#32860]
* PF4 Toast alerts - https://projects.theforeman.org/issues/32756[#32756]
* Drop flot charts - https://projects.theforeman.org/issues/32584[#32584]
* storybook failed to compile - https://projects.theforeman.org/issues/32505[#32505]
* API redux's store cannot be altered - https://projects.theforeman.org/issues/31781[#31781]
* Implement timseries area chart in React - https://projects.theforeman.org/issues/31596[#31596]
* deprecate flot_chart (timeseries area chart) - https://projects.theforeman.org/issues/31595[#31595]
* CSS files need optimizations (removing duplicates, minifying)  - https://projects.theforeman.org/issues/31277[#31277]
* Use Patternfly charts in Runtime - https://projects.theforeman.org/issues/23665[#23665]

=== Web Interface

* host details overview cards grid isn't aligned nor responsive  - https://projects.theforeman.org/issues/33311[#33311]
* Host details page - react warnings should be cleaned  - https://projects.theforeman.org/issues/33110[#33110]
* Menu::Item doesn't use the ':if' option - https://projects.theforeman.org/issues/32883[#32883]
* The new host details page should support secondary tabs - https://projects.theforeman.org/issues/32828[#32828]
* Recent audits card needs a design  - https://projects.theforeman.org/issues/32820[#32820]
* Update all freenode references to point to https://theforeman.org/support.html#IRClivechat or libera.chat - https://projects.theforeman.org/issues/32809[#32809]
* Host details cards should support  dropdown menu - https://projects.theforeman.org/issues/32692[#32692]
* card props in host details page should be overridable   - https://projects.theforeman.org/issues/32691[#32691]
* Webpack DEV server minimal logs - https://projects.theforeman.org/issues/32499[#32499]
* Host Add-Parameter button should not float down page as new params are added. - https://projects.theforeman.org/issues/32013[#32013]
* Documentation Button on the Error Page needs correct alignment - https://projects.theforeman.org/issues/31915[#31915]
* Add host's statuses including sub-statuses to the host details page  - https://projects.theforeman.org/issues/31444[#31444]
* Replace the new host details properties card with pf4 extension component - https://projects.theforeman.org/issues/31128[#31128]
* Create PF4 Bookmarks dropdown - https://projects.theforeman.org/issues/31100[#31100]
* Drop jquery-ui spinners in favor of React imlementation - https://projects.theforeman.org/issues/21641[#21641]

=== Host registration

* The katello-ca-consumer is not being removed when the force option is checked in the 'Advanced' tab under Hosts -&gt; Register Host  - https://projects.theforeman.org/issues/33305[#33305]
* Hammer --setup-insights false | no|0 is not working - https://projects.theforeman.org/issues/33121[#33121]
* Content host registration using command generated from global registration form fails if activation key name contains ' (single quote) in it. - https://projects.theforeman.org/issues/33033[#33033]
* Refresh subscription data - https://projects.theforeman.org/issues/33004[#33004]
* Registration migration - Unassign OS from registration templates - https://projects.theforeman.org/issues/32959[#32959]
* Update packages - https://projects.theforeman.org/issues/32918[#32918]
* Default packages are overridden by host package even if not specified registration form - https://projects.theforeman.org/issues/32780[#32780]
* Missing validation in API for OS & host_init_config template when creating command - https://projects.theforeman.org/issues/32625[#32625]
* Support Oracle Linux registration - https://projects.theforeman.org/issues/32589[#32589]
* Normally Inherited fields are not inherited upon host registreation - https://projects.theforeman.org/issues/32457[#32457]
* Parent host groups are not respected in the registration form - https://projects.theforeman.org/issues/32456[#32456]
* The host registration form uses host group names which don't contain parent names - https://projects.theforeman.org/issues/32452[#32452]
* Global Registration: Build status gets set to Pending installation when running script from Registration Tab - https://projects.theforeman.org/issues/32322[#32322]
* Add support for AlmaLinux 8 as a client - https://projects.theforeman.org/issues/31787[#31787]

=== BMC

* undefined method `bmc' for nil:NilClass - https://projects.theforeman.org/issues/33229[#33229]

=== Compute resources - VMware

* Creating compute resource (VMware) with incorrect credentials claims successfull test connection - https://projects.theforeman.org/issues/33197[#33197]
* API available_networks by cluster no longer working - https://projects.theforeman.org/issues/32855[#32855]
* MAC Adress gets removed when using VM Import - https://projects.theforeman.org/issues/32842[#32842]
* Can not modify associated hosts if connection to vCenter is down - https://projects.theforeman.org/issues/31307[#31307]

=== Puppet integration

* Add task to set host parameters from Puppet data - https://projects.theforeman.org/issues/33180[#33180]
* Drop puppet_host_overview_fields - https://projects.theforeman.org/issues/32091[#32091]
* Extract Puppet Classes tab to a plugin - https://projects.theforeman.org/issues/31160[#31160]
* Extract Environments change multiple host action - https://projects.theforeman.org/issues/31136[#31136]
* Extract Puppetclass parameter filter - https://projects.theforeman.org/issues/31130[#31130]
* Extract Puppetclass API - https://projects.theforeman.org/issues/31129[#31129]
* Extract Environment parameters filter - https://projects.theforeman.org/issues/31114[#31114]
* Extract ConfigGroup Controllers - https://projects.theforeman.org/issues/31106[#31106]
* Extract ConfigGroup API - https://projects.theforeman.org/issues/31094[#31094]
* Extract ConfigGroup UI - https://projects.theforeman.org/issues/31093[#31093]
* Extract Puppetclass UI controllers - https://projects.theforeman.org/issues/31092[#31092]
* Extract Puppetclass views+helpers - https://projects.theforeman.org/issues/31089[#31089]
* Remove puppet bits from non puppet related tests - https://projects.theforeman.org/issues/31073[#31073]
* Extract Environments API - https://projects.theforeman.org/issues/31062[#31062]
* Extract Environments UI view+helpers - https://projects.theforeman.org/issues/31058[#31058]
* Extract Environments UI logic - https://projects.theforeman.org/issues/31057[#31057]
* Extract puppet from SmartProxy integration - https://projects.theforeman.org/issues/31056[#31056]
* Extract LookupValue puppet extension - https://projects.theforeman.org/issues/31013[#31013]
* Extract PuppetLookupKey UI - https://projects.theforeman.org/issues/31009[#31009]
* Extract SmartClassParameters API - https://projects.theforeman.org/issues/31007[#31007]
* Extract puppet from Host(group) form and details - https://projects.theforeman.org/issues/30913[#30913]

=== Compute resources

* Drop Spice XPI support - https://projects.theforeman.org/issues/33155[#33155]
* Add Associate VM to virtual machine dropdown - https://projects.theforeman.org/issues/33048[#33048]
* Spice connection with websockets encryption - https://projects.theforeman.org/issues/22801[#22801]

=== API

* Add GraphQL type and queries for permissions - https://projects.theforeman.org/issues/33123[#33123]
* bmc_avialable should be visible in API host show   - https://projects.theforeman.org/issues/33038[#33038]
* Add graphql types for permissions - https://projects.theforeman.org/issues/32825[#32825]
* Add types and queries for Lookup Values - https://projects.theforeman.org/issues/32782[#32782]
* Correctly resolve global id when primary key is not integer - https://projects.theforeman.org/issues/32767[#32767]
* hammer user list --help has invalid --order example - https://projects.theforeman.org/issues/32703[#32703]
* API has inconsistent behavior with taxable parameters - https://projects.theforeman.org/issues/32695[#32695]
* Add 'resource_type' for the role filter in API - https://projects.theforeman.org/issues/32650[#32650]
* Add descendants field to hostgroup graphql type - https://projects.theforeman.org/issues/32645[#32645]
* Wrong error message when one attempts to create second primary/provision interface via API - https://projects.theforeman.org/issues/10236[#10236]

=== Packaging

* Update fog-libvirt to 0.9.0 - https://projects.theforeman.org/issues/33098[#33098]
* bundler warns /usr/share/foreman is not writable - https://projects.theforeman.org/issues/33013[#33013]

=== Development tools

* container builds are broken - https://projects.theforeman.org/issues/33093[#33093]
* JS sprintf mock does not correctly handle string interpolation - https://projects.theforeman.org/issues/32843[#32843]
* Webpack-dev-server doesn't support http2 - https://projects.theforeman.org/issues/32437[#32437]

=== Templates

* AIX PXE attributes loading does not work - https://projects.theforeman.org/issues/33090[#33090]
* Install salt-minion is done twice - https://projects.theforeman.org/issues/33042[#33042]
*  Latest preseed_networking_setup template snippet does not work Ubuntu 18.04+ with multiple nics  - https://projects.theforeman.org/issues/32981[#32981]
* Allow templates to hide preview button - https://projects.theforeman.org/issues/32928[#32928]
* Allow using host comment in the safe mode - https://projects.theforeman.org/issues/32858[#32858]
* Add parameter to provisioning templates to run attach --auto after registering - https://projects.theforeman.org/issues/32852[#32852]
* Add the ability to add custom steps to the Default Finish template at early and late stages - https://projects.theforeman.org/issues/32715[#32715]
* Avoid echo statements without quotes in Grub - https://projects.theforeman.org/issues/32681[#32681]
* Link to templates_doc  - https://projects.theforeman.org/issues/32674[#32674]
* Clean up host_param_(true|false)? - https://projects.theforeman.org/issues/32540[#32540]
* kickstart_kernel_options doesn't handle properly tagged vlan over bond device - https://projects.theforeman.org/issues/32497[#32497]
* Ansible callback doesn't run because the file is not executable - https://projects.theforeman.org/issues/32490[#32490]
* Fedora 34 / RHEL 9 - Ignore Anaconda kernel boot parameters without 'inst.' prefix - https://projects.theforeman.org/issues/32486[#32486]
* Do not use upstream repos for Ubuntu and Debian hosts that use Katello for content - https://projects.theforeman.org/issues/32290[#32290]
* Automated Fedora provisioning fails with Kickstart default due to the missing redhat-lsb-core - https://projects.theforeman.org/issues/31978[#31978]
* The default kickstart template installs EPEL by default - https://projects.theforeman.org/issues/31751[#31751]
* Remove spaces from snapshot tests - https://projects.theforeman.org/issues/31407[#31407]
* Template snapshot multi-host render tests - https://projects.theforeman.org/issues/31370[#31370]
* Foreman doesn't support Netplan on Ubuntu - https://projects.theforeman.org/issues/30748[#30748]
* Search in Template editor doesn't work at all - https://projects.theforeman.org/issues/29614[#29614]
* Snippet template may render incorrect result when non-default scope class is used to render the main template - https://projects.theforeman.org/issues/28221[#28221]

=== Inventory

* Make name_column helper defensive with displaying statuses - https://projects.theforeman.org/issues/33049[#33049]
* Add visual Amazon support - https://projects.theforeman.org/issues/32808[#32808]
* Host api request fails when thin=true and per_page=all - https://projects.theforeman.org/issues/32776[#32776]
* API - ISE when using invalid status type - https://projects.theforeman.org/issues/32536[#32536]
* Add Rocky Linux support to Foreman - https://projects.theforeman.org/issues/32516[#32516]
* Interface modal - incorrect alignment for error message
 - https://projects.theforeman.org/issues/32391[#32391]

=== Users, Roles and Permissions

* Navigation doesn't display Host Wizard (within Lab Features) without admin rights - https://projects.theforeman.org/issues/33011[#33011]
* wrong error message when failing to create an external user - https://projects.theforeman.org/issues/32942[#32942]
* Non-admin user can not revoke user access token, attempt ends with 404  - https://projects.theforeman.org/issues/32826[#32826]
* Revoking Personal Access token should ask for confirmation - https://projects.theforeman.org/issues/32770[#32770]
* The /api/usergroups/:usergroup_id/external_usergroups API is not accepting 1-group as the name of usergroup - https://projects.theforeman.org/issues/32704[#32704]
* 50/50 chance to create role filter with non-admin user and enough permissions - https://projects.theforeman.org/issues/30394[#30394]
* User can view bookmarks without assigning view_bookmarks permission in a role - https://projects.theforeman.org/issues/30387[#30387]

=== Database

* switch to sql schema in order to better support custom types - https://projects.theforeman.org/issues/33008[#33008]
* PG::AmbiguousColumn when listing domains - https://projects.theforeman.org/issues/32641[#32641]

=== Settings

* Load only core setting values the first time we load them - https://projects.theforeman.org/issues/32963[#32963]
* Fix the creation of missing settings - https://projects.theforeman.org/issues/32953[#32953]
* Add strong typing to Setting DSL - https://projects.theforeman.org/issues/32894[#32894]
* Setting values have duplicate tooltips in Firefox - https://projects.theforeman.org/issues/32840[#32840]
* Overwrite outofsync_interval in host parameters - https://projects.theforeman.org/issues/32805[#32805]
* CVE-2021-3584: Remote code execution through Sendmail configuration - https://projects.theforeman.org/issues/32753[#32753]
* clicking on a read-only setting still opens an edit dialog - https://projects.theforeman.org/issues/32752[#32752]
* Setting registry doesn't reload properly on autoreload - https://projects.theforeman.org/issues/32489[#32489]
* Use only SettingRegistry to read and update the settings - https://projects.theforeman.org/issues/32415[#32415]
* Load Setting index page from memory registry - https://projects.theforeman.org/issues/32287[#32287]
* Create a new setting definition DSL - https://projects.theforeman.org/issues/32286[#32286]

=== Tests

* setting lower version of rake to avoid test failures - https://projects.theforeman.org/issues/32952[#32952]

=== Host groups

* It is possible to specify a compute profile without any attributes in a hostgroup - https://projects.theforeman.org/issues/32924[#32924]

=== TFTP

* DHCP next-server option is "false" when tftp-servername was not provided - https://projects.theforeman.org/issues/32921[#32921]

=== Proxy gateway

* Drop unwanted URI parsing from NetHttpExtension - https://projects.theforeman.org/issues/32837[#32837]

=== Facts

* reported.virtual in scoped search not working properly - https://projects.theforeman.org/issues/32833[#32833]
* Move Chef parser to core - https://projects.theforeman.org/issues/32558[#32558]
* Move Salt parser to Core - https://projects.theforeman.org/issues/32548[#32548]
* Move Ansible Parser to Core - https://projects.theforeman.org/issues/32518[#32518]
* Move RHSM parser to Core - https://projects.theforeman.org/issues/32517[#32517]
* Unify excluded_facts and ignored_interface_identifiers - https://projects.theforeman.org/issues/32166[#32166]
* puppet facts exclude filter star wildcard not working as expected - https://projects.theforeman.org/issues/29681[#29681]

=== Audit Log

* Documentation button on Audits page opens in same tab - https://projects.theforeman.org/issues/32821[#32821]

=== Parameters

* add merge-option for variables of type "yaml" (Ansible/Salt/Puppet) - https://projects.theforeman.org/issues/32741[#32741]

=== DB migrations

* Migrations fail with 'could not create unique index "index_lookup_values_on_lookup_key_id_and_match"' error - https://projects.theforeman.org/issues/32673[#32673]

=== Search

* Editing an existing bookmark should respect the current visibility - https://projects.theforeman.org/issues/32662[#32662]
* Allow searching hosts by attributes of the reported data facet - https://projects.theforeman.org/issues/32140[#32140]

=== Logging

* Allow relative values in filename log setting - https://projects.theforeman.org/issues/32636[#32636]
* Warning message during startup: already initialized constant Facets::SUPPORTED_CORE_OBJECTS - https://projects.theforeman.org/issues/32635[#32635]

=== Internationalization

* The Settings page tooltip texts are untranslated - https://projects.theforeman.org/issues/32484[#32484]
* FastGettext initialization is slow - https://projects.theforeman.org/issues/31717[#31717]
* Localized string broken into two separate lines, at Hosts -&gt; All Hosts. - https://projects.theforeman.org/issues/30047[#30047]

=== Host creation

* Confirming interface modal by enter causes whole Host form to get confirmed - https://projects.theforeman.org/issues/32397[#32397]
* MAC address should be normalized - https://projects.theforeman.org/issues/31132[#31132]
* Create Host password field should indicate if a password is already set globally or in a Hostgroup - https://projects.theforeman.org/issues/27812[#27812]

=== Network

* When creating a HTTP proxy the username and password is used verbatim, leading to issues if they contain special characters - https://projects.theforeman.org/issues/32192[#32192]

=== Reporting

* As a user I should receive a notification after a report generation is complete - https://projects.theforeman.org/issues/32141[#32141]

=== E-Mail

* Add instance title to the subject and body of the email notifications - https://projects.theforeman.org/issues/32139[#32139]

=== Unattended installations

* Support RedHat CoreOS and Fedora CoreOS as operating systems - https://projects.theforeman.org/issues/27604[#27604]

=== Compute resources - EC2

* Add support for ec2 tags during instance creation - https://projects.theforeman.org/issues/2170[#2170]

== Installer

* Determine if puppet user should be in foreman user groups dynamically - https://projects.theforeman.org/issues/32885[#32885]
* Support Puppet 7 - https://projects.theforeman.org/issues/32659[#32659]
* Add puppet provider and types in puppet-certs - https://projects.theforeman.org/issues/32506[#32506]
* Use Foreman client certificates for communication with Artemis broker in Candlepin - https://projects.theforeman.org/issues/32382[#32382]

=== Foreman modules

* Change Puma defaults to match recommendations from Puma documentation - https://projects.theforeman.org/issues/33277[#33277]
* Roles imported from a collection installed to /etc/ansible/collections are not found when run on hosts - https://projects.theforeman.org/issues/33162[#33162]
* Move more variables from in puppet-foreman to globals.pp - https://projects.theforeman.org/issues/33106[#33106]
* Don't store plugin_prefix (and hammer_plugin_prefix) in answers - https://projects.theforeman.org/issues/33089[#33089]
* support remove_old_repodata options in yum_distributor for puppet-pulp - https://projects.theforeman.org/issues/32966[#32966]
* IPA Authentication is not properly deployed on Debian - https://projects.theforeman.org/issues/32947[#32947]
* Provide ability to configure content caching in Pulpcore - https://projects.theforeman.org/issues/32910[#32910]
* puppet-pulpcore should support enabling and disabling the new tasking system - https://projects.theforeman.org/issues/32891[#32891]
* Set sendmail location and arguments via puppet/installer - https://projects.theforeman.org/issues/32827[#32827]
* Disable SSLInsecureRenegotiation by default - https://projects.theforeman.org/issues/32762[#32762]
* Tftp support for Rocky Linux and AlmaLinux - https://projects.theforeman.org/issues/32710[#32710]
* Additional RPMs in /pub directory break latest symlink - https://projects.theforeman.org/issues/32700[#32700]
* Password diffs from puppet-certs should not show up in Puppet logs - https://projects.theforeman.org/issues/32647[#32647]
* Add Puppet provider to manage a truststore - https://projects.theforeman.org/issues/32637[#32637]
* Add keystore certificate puppet provider - https://projects.theforeman.org/issues/32631[#32631]
* Add a function to extract the certificate subject DN to determine artemis client DN programmatically - https://projects.theforeman.org/issues/32585[#32585]
* If bootstrap RPM symlink is removed the installer does not repair it - https://projects.theforeman.org/issues/32567[#32567]
* remove md5 from allowed content types for pulpcore - https://projects.theforeman.org/issues/32553[#32553]
* The installer does not update the katello-ca-consumer-latest symlink to the latest RPM once the bootstrap RPM's release is greater than 9. - https://projects.theforeman.org/issues/32529[#32529]
* Add puppet type to manage an nssdb - https://projects.theforeman.org/issues/32511[#32511]
* Use Foreman client certificates to communicate with Pulp - https://projects.theforeman.org/issues/32383[#32383]
* mod_auth_kerb has been replaced by mod_auth_gssapi - https://projects.theforeman.org/issues/32352[#32352]
* The system does not seem to be IPA-enrolled - https://projects.theforeman.org/issues/29649[#29649]

=== foreman-installer script

* Support automatic reinstallation of puppet-agent-oauth on Debian - https://projects.theforeman.org/issues/33191[#33191]
* Add puppet plugin to answer files - https://projects.theforeman.org/issues/32914[#32914]
* Drop Puppet 5 from version check - https://projects.theforeman.org/issues/32610[#32610]

== Packaging

=== RPMs

* Add a logrotate entry for /var/log/foreman-maintain - https://projects.theforeman.org/issues/33193[#33193]
* katello-change-hostname assumes answers file location - https://projects.theforeman.org/issues/32743[#32743]
* katello-change-hostname should handle --no-enable-puppet properly - https://projects.theforeman.org/issues/32725[#32725]

== Smart Proxy

* Trusted hosts test fails with IPv6 address with interface - https://projects.theforeman.org/issues/32164[#32164]

=== TFTP

* Download of OS specific kernel and initrd files should verify certificates - https://projects.theforeman.org/issues/18936[#18936]
