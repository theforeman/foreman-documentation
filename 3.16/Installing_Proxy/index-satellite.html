<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>Installing Capsule Server</title>
<style>
﻿*,::before,::after{box-sizing:border-box}html{font-size:100%;-webkit-text-size-adjust:100%}body{background:#fff;color:rgba(0,0,0,0.8);padding:0;margin:0;font-family:"Noto Serif", "DejaVu Serif", serif;font-size:inherit;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,p,blockquote,th,td{margin:0;padding:0}a{background:none;color:#2156a5;text-decoration:underline;line-height:inherit}a:active,a:hover{cursor:pointer;outline:0}a:focus{outline:thin dotted}a:hover,a:focus{color:#1d4b8f}abbr{font-size:0.9em}abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}b,strong{font-weight:bold;line-height:inherit}strong strong{font-weight:400}code,kbd,pre{font-family:"Droid Sans Mono", "DejaVu Sans Mono", monospace;font-size:1em}code{font-weight:400;color:rgba(0,0,0,0.9)}pre{color:rgba(0,0,0,0.9);line-height:1.45;text-rendering:optimizeSpeed;white-space:pre-wrap}dfn{font-style:italic}em,i{font-style:italic;line-height:inherit}em em{font-style:normal}hr{border:solid #dddddf;border-width:1px 0 0;clear:both;height:0;margin:1.25em 0 1.1875em}mark{background:#ff0;color:#000}p{line-height:1.6;margin-bottom:1.25rem;text-rendering:optimizeLegibility}q{quotes:"“" "”" "‘" "’"}small{font-size:60%;line-height:inherit}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-0.5em}sub{bottom:-0.25em}img,object[type^="image/"],svg{display:inline-block;height:auto;max-width:100%;vertical-align:middle}img{border:0;-ms-interpolation-mode:bicubic}object{max-width:100%}svg:not(:root){overflow:hidden}figure{margin:0}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}.left{float:left !important}.right{float:right !important}.text-left{text-align:left !important}.text-right{text-align:right !important}.text-center{text-align:center !important}.text-justify{text-align:justify !important}.hide{display:none}.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:0.25em}p aside{font-size:.875em;line-height:1.35;font-style:italic}h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans", "DejaVu Sans", sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.2;word-spacing:-0.05em}h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{color:#e99b8f;line-height:0}h1{font-size:2.125em}h2{font-size:1.6875em}h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}h4,h5{font-size:1.125em}h6{font-size:1em}ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}ul,ol{margin-left:1.5em}ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}ul.square{list-style-type:square}ul.circle{list-style-type:circle}ul.disc{list-style-type:disc}ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}dl dt{margin-bottom:.3125em;font-weight:bold}dl dd{margin-bottom:1.25em;margin-left:1.125em}blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,0.85)}@media screen and (min-width: 768px){h1{font-size:2.75em}h2{font-size:2.3125em}h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}h4{font-size:1.4375em}}table{background:#fff;border:1px solid #dedede;border-collapse:collapse;border-spacing:0;margin-bottom:1.25em;word-wrap:normal}table thead,table tfoot{background:#f7f8f7}table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,0.8);text-align:left}table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,0.8)}table tr.even,table tr.alt{background:#f8f8f7}table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}.center{margin-left:auto;margin-right:auto}.stretch{width:100%}.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:"";display:table}.clearfix::after,.float-group::after{clear:both}:not(pre).nobreak{word-wrap:normal}:not(pre).nowrap{white-space:nowrap}:not(pre).pre-wrap{white-space:pre-wrap}:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal !important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}pre>code{display:block}pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}.keyseq{color:rgba(51,51,51,0.8)}kbd{display:inline-block;color:rgba(0,0,0,0.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,0.2),inset 0 0 0 0.1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}.keyseq kbd:first-child{margin-left:0}.keyseq kbd:last-child{margin-right:0}.menuseq,.menuref{color:#000}.menuseq b:not(.caret),.menuref{font-weight:inherit}.menuseq{word-spacing:-0.02em}.menuseq b.caret{font-size:1.25em;line-height:0.8}.menuseq i.caret{font-weight:bold;text-align:center;width:0.45em}b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}b.button::before{content:"[";padding:0 3px 0 2px}b.button::after{content:"]";padding:0 2px 0 3px}p a>code:hover{color:rgba(0,0,0,0.9)}body>div[id]{margin:0 auto;max-width:62.5em;position:relative;padding-left:.9375em;padding-right:0.9375em}body>div[id]::before,body>div[id]::after,#content #footnotes::before{content:"";display:table;clear:both}#content{margin-top:1.25em;margin-bottom:0.625em}#content::before{content:none}#header>h1:first-child{color:rgba(0,0,0,0.85);margin-top:2.25rem;margin-bottom:0}#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,0.6);display:flex;flex-flow:row wrap}#header .details span:first-child{margin-left:-0.125em}#header .details span.email a{color:rgba(0,0,0,0.85)}#header .details br{display:none}#header .details br+span::before{content:" – "}#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,0.85)}#header .details br+span#revremark::before{content:" | "}#header #revnumber{text-transform:capitalize}#header #revnumber::after{content:" "}#content>h1:first-child:not([class]){color:rgba(0,0,0,0.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}#toc{border-bottom:1px solid #e7e7e9;padding-bottom:0.5em}#toc>ul{margin-left:0.125em}#toc ul.sectlevel0>li>a{font-style:italic}#toc ul.sectlevel0 ul.sectlevel1{margin:0.5em 0}#toc ul{font-family:"Open Sans", "DejaVu Sans", sans-serif;list-style-type:none}#toc li{line-height:1.3334;margin-top:0.3334em}#toc a{text-decoration:none}#toc a:active{text-decoration:underline}#toctitle{color:#7a2518;font-size:1.2em}@media screen and (min-width: 768px){#toctitle{font-size:1.375em}body.toc2{padding-left:15em;padding-right:0}#toc.toc2{margin-top:0 !important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0 !important;border-bottom-width:0 !important;z-index:1000;padding:1.25em 1em;height:calc(100% - (70px + 2.5em));overflow:auto}#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}#toc.toc2>ul{font-size:.9em;margin-bottom:0}#toc.toc2 ul ul{margin-left:0;padding-left:1em}#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:0.5em}body.toc2.toc-right{padding-left:0;padding-right:15em}body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}@media screen and (min-width: 1280px){body.toc2{padding-left:20em;padding-right:0}#toc.toc2{width:20em}#toc.toc2 #toctitle{font-size:1.375em}#toc.toc2>ul{font-size:0.95em}#toc.toc2 ul ul{padding-left:1.25em}body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}#content #toc>:first-child{margin-top:0}#content #toc>:last-child{margin-bottom:0}#footer{max-width:none;background:#025d8c;padding:1.25em;margin-left:2em}#footer-text{color:rgba(255,255,255,0.8);line-height:1.44}h1:before,h2:before,h3:before,h4:before,h5:before,h6:before,div.title:before{display:block;content:" ";height:90px;margin-top:-90px;visibility:hidden}.sect1{padding-bottom:0.625em}@media screen and (min-width: 768px){#content{margin-bottom:1.25em}.sect1{padding-bottom:1.25em}}.sect1:last-child{padding-bottom:0}.sect1+.sect1{border-top:1px solid #e7e7e9}#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none !important;visibility:hidden;text-align:center;font-weight:400}#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:0.1em}#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}details{margin-left:1.25rem}details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}details>summary::-webkit-details-marker{display:none}details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif", "DejaVu Serif", serif;font-size:1rem;font-style:italic}table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,0.85)}.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}.admonitionblock>table td.icon{text-align:center;width:80px}.admonitionblock>table td.icon img{max-width:none}.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans", "DejaVu Sans", sans-serif;text-transform:uppercase}.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,0.6);word-wrap:anywhere}.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}.exampleblock>.content{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#fffef7;border-radius:4px;box-shadow:0 1px 4px #e0e0dc}.exampleblock>.content>:first-child{margin-top:0}.exampleblock>.content>:last-child{margin-bottom:0}.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}.sidebarblock>:first-child{margin-top:0}.sidebarblock>:last-child{margin-bottom:0}.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:0.8125em}@media screen and (min-width: 768px){.literalblock pre,.listingblock>.content>pre{font-size:0.90625em}}@media screen and (min-width: 1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,0.9)}.listingblock>.content{position:relative}.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:0.5}.listingblock:hover code[data-lang]::before{display:block}.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:0.5}.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}.listingblock pre.highlightjs{padding:0}.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}.listingblock pre.prettyprint{border-width:0}.prettyprint{background:#f7f7f8}pre.prettyprint .linenums{line-height:1.45;margin-left:2em}pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}pre.prettyprint li code[data-lang]::before{opacity:1}pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}table.linenotable td.code{padding-left:0.75em}table.linenotable td.linenos{width:0.01%}table.linenotable td.linenos,pre.pygments .linenos,pre.rouge .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}pre.pygments span.linenos,pre.rouge span.linenos{display:inline-block;margin-right:0.75em}.quoteblock{margin:0 1em 1.25em 1.5em;display:table}.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:0.75em}.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,0.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}.quoteblock blockquote{margin:0;padding:0;border:0}.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,0.1)}.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}.verseblock{margin:0 1em 1.25em}.verseblock pre{font-family:"Open Sans", "DejaVu Sans", sans-serif;font-size:1.15rem;color:rgba(0,0,0,0.85);font-weight:300;text-rendering:optimizeLegibility}.verseblock pre strong{font-weight:400}.verseblock .attribution{margin-top:1.25rem;margin-left:0.5ex}.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}.quoteblock .attribution br,.verseblock .attribution br{display:none}.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,0.6)}.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}.quoteblock.abstract{margin:0 1em 1.25em;display:block}.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:0.25em solid #dddddf}.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}p.tableblock:last-child{margin-bottom:0}td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}td.tableblock>.content>:last-child{margin-bottom:-1.25em}table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}table.grid-all>*>tr>*{border-width:1px}table.grid-cols>*>tr>*{border-width:0 1px}table.grid-rows>*>tr>*{border-width:1px 0}table.frame-all{border-width:1px}table.frame-ends{border-width:1px 0}table.frame-sides{border-width:0 1px}table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}th.halign-left,td.halign-left{text-align:left}th.halign-right,td.halign-right{text-align:right}th.halign-center,td.halign-center{text-align:center}th.valign-top,td.valign-top{vertical-align:top}th.valign-bottom,td.valign-bottom{vertical-align:bottom}th.valign-middle,td.valign-middle{vertical-align:middle}table thead th,table tfoot th{font-weight:bold}tbody tr th{background:#f7f8f7}tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,0.8);font-weight:bold}p.tableblock>code:only-child{background:none;padding:0}p.tableblock{font-size:1em}ol{margin-left:1.75em}ul li ol{margin-left:1.5em}dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:0.625em}ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:0.625em}ul.unstyled,ol.unstyled{margin-left:0}li>p:empty:only-child::before{content:"";display:inline-block}ul.checklist>li>p:first-child{margin-left:-1em}ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:0.125em}ul.checklist>li>p:first-child>input[type=checkbox]:first-child{font:inherit;margin:0 .25em 0 0;padding:0}ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 0.625em -1.25em}ul.inline>li{margin-left:1.25em}.unstyled dl dt{font-weight:400;font-style:normal}ol.arabic{list-style-type:decimal}ol.decimal{list-style-type:decimal-leading-zero}ol.loweralpha{list-style-type:lower-alpha}ol.upperalpha{list-style-type:upper-alpha}ol.lowerroman{list-style-type:lower-roman}ol.upperroman{list-style-type:upper-roman}ol.lowergreek{list-style-type:lower-greek}.hdlist>table,.colist>table{border:0;background:none}.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}td.hdlist1,td.hdlist2{vertical-align:top;padding:0 0.625em}td.hdlist1{font-weight:bold;padding-bottom:1.25em}td.hdlist2{word-wrap:anywhere}.literalblock+.colist,.listingblock+.colist{margin-top:-0.5em}.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}.colist td:not([class]):first-child img{max-width:none}.colist td:not([class]):last-child{padding:0.25em 0}.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}.imageblock.left{margin:0.25em 0.625em 1.25em 0}.imageblock.right{margin:0.25em 0 1.25em 0.625em}.imageblock>.title{margin-bottom:0}.imageblock.thumb,.imageblock.th{border-width:6px}.imageblock.thumb>.title,.imageblock.th>.title{padding:0 0.125em}.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}.image.left{margin-right:0.625em}.image.right{margin-left:0.625em}a.image{text-decoration:none;display:inline-block}a.image object{pointer-events:none}sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}sup.footnote a,sup.footnoteref a{text-decoration:none}sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:0.625em}#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:0.2em}#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}#footnotes .footnote:last-of-type{margin-bottom:0}#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:0.75em 0}div.page-break{display:none}div.unbreakable{page-break-inside:avoid}.big{font-size:larger}.small{font-size:smaller}.underline{text-decoration:underline}.overline{text-decoration:overline}.line-through{text-decoration:line-through}.aqua{color:#00bfbf}.aqua-background{background:#00fafa}.black{color:#000}.black-background{background:#000}.blue{color:#0000bf}.blue-background{background:#0000fa}.fuchsia{color:#bf00bf}.fuchsia-background{background:#fa00fa}.gray{color:#606060}.gray-background{background:#7d7d7d}.green{color:#006000}.green-background{background:#007d00}.lime{color:#00bf00}.lime-background{background:#00fa00}.maroon{color:#600000}.maroon-background{background:#7d0000}.navy{color:#000060}.navy-background{background:#00007d}.olive{color:#606000}.olive-background{background:#7d7d00}.purple{color:#600060}.purple-background{background:#7d007d}.red{color:#bf0000}.red-background{background:#fa0000}.silver{color:#909090}.silver-background{background:#bcbcbc}.teal{color:#006060}.teal-background{background:#007d7d}.white{color:#bfbfbf}.white-background{background:#fafafa}.yellow{color:#bfbf00}.yellow-background{background:#fafa00}span.icon>.fa{cursor:default}a span.icon>.fa{cursor:inherit}.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,0.5);cursor:default}.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,0.8);color:#111}.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}.conum[data-value]{display:inline-block;color:#fff !important;background:rgba(0,0,0,0.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans", "DejaVu Sans", sans-serif;font-style:normal;font-weight:bold}.conum[data-value] *{color:#fff !important}.conum[data-value]+b{display:none}.conum[data-value]::after{content:attr(data-value)}pre .conum[data-value]{position:relative;top:-0.125em}b.conum *{color:inherit !important}.conum:not([data-value]):empty{display:none}dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}h1,h2,p,td.content,span.alt,summary{letter-spacing:-0.01em}p strong,td.content strong,div.footnote strong{letter-spacing:-0.005em}p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}.print-only{display:none !important}@page{margin:1.25cm 0.75cm}@media print{*{box-shadow:none !important;text-shadow:none !important}html{font-size:80%}a{color:inherit !important;text-decoration:underline !important}a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none !important}a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:0.25em}abbr[title]{border-bottom:1px dotted}abbr[title]::after{content:" (" attr(title) ")"}pre,blockquote,tr,img,object,svg{page-break-inside:avoid}thead{display:table-header-group}p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}body>div[id]{max-width:none}#toc,.sidebarblock,.exampleblock>.content{background:none !important}#toc{border-bottom:1px solid #dddddf !important;padding-bottom:0 !important}body.book #header{text-align:center}body.book #header>h1:first-child{border:0 !important;margin:2.5em 0 1em}body.book #header .details{border:0 !important;display:block;padding:0 !important}body.book #header .details span:first-child{margin-left:0 !important}body.book #header .details br{display:block}body.book #header .details br+span::before{content:none !important}body.book #toc{border:0 !important;text-align:left !important;padding:0 !important;margin:0 !important}body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}.listingblock code[data-lang]::before{display:block}div.page-break{display:block;page-break-after:always}#footer{padding:0 0.9375em}.hide-on-print{display:none !important}.print-only{display:block !important}.hide-for-print{display:none !important}.show-for-print{display:inherit !important}}@media amzn-kf8, print{#header>h1:first-child{margin-top:1.25rem}.sect1{padding:0 !important}.sect1+.sect1{border:0}#footer{background:none}#footer-text{color:rgba(0,0,0,0.6);font-size:0.9em}}@media amzn-kf8{body>div[id]{padding:0}}body{padding:0;margin:0;margin-top:70px !important}.container{position:relative;z-index:1;padding-top:50px;min-height:100%}.container p{font-family:sans-serif;font-size:1.2em}nav{position:fixed;z-index:9999;left:0;right:0;top:0;height:70px;padding:0 1.5em;background-color:#025d8c;font-family:sans-serif;line-height:70px}nav .logo{width:50px}nav .nav-heading{color:#fff;font-family:ostrich-black;font-size:1.8em;padding:0.5em;vertical-align:sub}nav .nav-logo-heading{text-decoration:none}nav .nav-menu{position:absolute;right:0.3em;top:0;padding:0;margin:0;list-style:none}nav .nav-item{display:inline-block}nav .nav-item>a{display:inline-block;padding:0 2.5em;line-height:70px;color:#fff;text-decoration:none}nav .dropdown{position:relative}nav .dropdown a::after{content:"";display:inline-block;margin-left:0.5em;vertical-align:middle;border-top:0.3em solid #fff;border-right:0.3em solid transparent;border-left:0.3em solid transparent}nav .dropdown.show a::after{transform:rotate(180deg)}nav .dropdown-menu{display:none;position:absolute;left:0;right:0;top:100%;padding:0.5em 0;margin-top:-0.5em;border:1px solid rgba(0,0,0,0.3);border-radius:0.5em;background-color:#fff;width:max-content;max-height:80vh;overflow:scroll}nav .dropdown-menu-left{left:auto;right:0}nav .dropdown.show .dropdown-menu{display:block}nav .dropdown-div{display:block;padding:0.4em 0;line-height:4em}nav .dropdown-div a::after{content:none;margin-left:0;border-top:0;border-right:0;border-left:0}nav .dropdown-item{display:block;padding:0 1.5em;font-size:0.875em;color:#000;line-height:1.6em;text-decoration:none}nav .btn-hamburger{display:none;position:absolute;right:1.5em;top:50%;background-color:transparent;border:0;cursor:pointer;outline:none;transform:translateY(-50%)}nav .btn-hamburger span{display:block;width:30px;height:4px;background-color:#fff;margin:6px;border-radius:2px;transition:0.3s ease-in-out}nav .btn-hamburger span:nth-child(4),nav .btn-hamburger span:nth-child(5){position:absolute;top:10px;opacity:0.5}nav .btn-hamburger span:nth-child(4){transform:rotate(45deg) scale(0)}nav .btn-hamburger span:nth-child(5){transform:rotate(-45deg) scale(0)}nav.opened .btn-hamburger span:nth-child(4){opacity:1;transform:rotate(45deg) scale(1)}nav.opened .btn-hamburger span:nth-child(5){opacity:1;transform:rotate(-45deg) scale(1)}nav.opened .btn-hamburger span:nth-child(1),nav.opened .btn-hamburger span:nth-child(2),nav.opened .btn-hamburger span:nth-child(3){opacity:0}@media screen and (max-width: 768px){nav .nav-menu{position:fixed;left:0;right:0;top:70px;bottom:100%;display:flex;flex-direction:column;justify-content:start;background-color:#363d4e;transition:bottom 0.5s ease-in-out;overflow:hidden}nav.opened .nav-menu{bottom:0}nav .nav-item>a{display:block}nav .dropdown-menu{position:relative;top:0;margin:0 1.5em}nav .btn-hamburger{display:block}}@font-face{font-family:ostrich-black;src:url("../ostrich-black.ttf") format("truetype")}/*!
* "Fork me on GitHub" CSS ribbon v0.2.3 | MIT License
* https://github.com/simonwhitaker/github-fork-ribbon-css

The MIT License (MIT)

Copyright (c) 2013 Simon Whitaker

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/.github-fork-ribbon,.release-ribbon,.issue-ribbon{width:12.1em;height:12.1em;position:absolute;overflow:hidden;top:70px;right:0;z-index:9998;pointer-events:none;font-size:13px;text-decoration:none;text-indent:-999999px}.github-fork-ribbon.fixed,.fixed.release-ribbon,.fixed.issue-ribbon{position:fixed}.github-fork-ribbon:hover,.release-ribbon:hover,.issue-ribbon:hover,.github-fork-ribbon:active,.release-ribbon:active,.issue-ribbon:active{background-color:transparent}.github-fork-ribbon:before,.release-ribbon:before,.issue-ribbon:before,.github-fork-ribbon:after,.release-ribbon:after,.issue-ribbon:after{position:absolute;display:block;width:15.38em;height:1.54em;top:3.23em;right:-3.23em;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.github-fork-ribbon:before,.release-ribbon:before,.issue-ribbon:before{content:"";padding:.38em 0;background-color:#a00;background-image:-webkit-gradient(linear, left top, left bottom, from(transparent), to(rgba(0,0,0,0.15)));background-image:-webkit-linear-gradient(top, transparent, rgba(0,0,0,0.15));background-image:-moz-linear-gradient(top, transparent, rgba(0,0,0,0.15));background-image:-ms-linear-gradient(top, transparent, rgba(0,0,0,0.15));background-image:-o-linear-gradient(top, transparent, rgba(0,0,0,0.15));background-image:linear-gradient(to bottom, transparent, rgba(0,0,0,0.15));-webkit-box-shadow:0 0.15em 0.23em 0 rgba(0,0,0,0.5);-moz-box-shadow:0 0.15em 0.23em 0 rgba(0,0,0,0.5);box-shadow:0 0.15em 0.23em 0 rgba(0,0,0,0.5);pointer-events:auto}.github-fork-ribbon:after,.release-ribbon:after,.issue-ribbon:after{content:attr(data-ribbon);color:#fff;font:700 1em "Helvetica Neue", Helvetica, Arial, sans-serif;line-height:1.54em;text-decoration:none;text-shadow:0 -0.08em rgba(0,0,0,0.5);text-align:center;text-indent:0;padding:.15em 0;margin:.15em 0;border-width:.08em 0;border-style:dotted;border-color:#fff;border-color:rgba(255,255,255,0.7)}.github-fork-ribbon.left-top,.left-top.release-ribbon,.left-top.issue-ribbon,.github-fork-ribbon.left-bottom,.left-bottom.release-ribbon,.left-bottom.issue-ribbon{right:auto;left:0}.github-fork-ribbon.left-bottom,.left-bottom.release-ribbon,.left-bottom.issue-ribbon,.github-fork-ribbon.right-bottom,.right-bottom.release-ribbon,.right-bottom.issue-ribbon{top:auto;bottom:0}.github-fork-ribbon.left-top:before,.left-top.release-ribbon:before,.left-top.issue-ribbon:before,.github-fork-ribbon.left-top:after,.left-top.release-ribbon:after,.left-top.issue-ribbon:after,.github-fork-ribbon.left-bottom:before,.left-bottom.release-ribbon:before,.left-bottom.issue-ribbon:before,.github-fork-ribbon.left-bottom:after,.left-bottom.release-ribbon:after,.left-bottom.issue-ribbon:after{right:auto;left:-3.23em}.github-fork-ribbon.left-bottom:before,.left-bottom.release-ribbon:before,.left-bottom.issue-ribbon:before,.github-fork-ribbon.left-bottom:after,.left-bottom.release-ribbon:after,.left-bottom.issue-ribbon:after,.github-fork-ribbon.right-bottom:before,.right-bottom.release-ribbon:before,.right-bottom.issue-ribbon:before,.github-fork-ribbon.right-bottom:after,.right-bottom.release-ribbon:after,.right-bottom.issue-ribbon:after{top:auto;bottom:3.23em}.github-fork-ribbon.left-top:before,.left-top.release-ribbon:before,.left-top.issue-ribbon:before,.github-fork-ribbon.left-top:after,.left-top.release-ribbon:after,.left-top.issue-ribbon:after,.github-fork-ribbon.right-bottom:before,.right-bottom.release-ribbon:before,.right-bottom.issue-ribbon:before,.github-fork-ribbon.right-bottom:after,.right-bottom.release-ribbon:after,.right-bottom.issue-ribbon:after{-webkit-transform:rotate(-45deg);-moz-transform:rotate(-45deg);-ms-transform:rotate(-45deg);-o-transform:rotate(-45deg);transform:rotate(-45deg)}.release-ribbon:before{background-color:#a00}.issue-ribbon:before{background-color:#025d8c}@media screen{div.narrow{max-width:1080px;margin:0 auto !important;margin-top:70px auto !important;float:none !important}#toc.toc2{margin-top:70px !important}}

</style>
<!-- Generate a nice TOC -->
<script src="/js/jquery-1.11.3.min.js"></script>
<script src="/js/jquery-ui.min.js"></script>
<script src="/js/jquery.tocify.min.js"></script>
<!-- We do not need the tocify CSS because the asciidoc CSS already provides most of what we need -->

<style>
.tocify-header {
    /* font-style: italic; */
}

.tocify-subheader {
    font-style: normal;
    font-size: 95%;
}

.tocify ul {
    margin: 0;
 }

.tocify-focus {
    /* background-color: rgba(0, 0, 0, 0.05);*/
}

.tocify-focus > a {
    color: #ba3925;
}
</style>

<script type="text/javascript">
    $(function () {
        // Add a new container for the tocify toc into the existing toc so we can re-use its
        // styling
        $("#toc").append("<div id='generated-toc'></div>");
        $("#generated-toc").tocify({
            extendPage: true,
            context: "#content",
            highlightOnScroll: true,
            hideEffect: "slideUp",
            // Use the IDs that asciidoc already provides so that TOC links and intra-document
            // links are the same. Anything else might confuse users when they create bookmarks.
            hashGenerator: function(text, element) {
                return $(element).attr("id");
            },
            // Smooth scrolling doesn't work properly if we use the asciidoc IDs
            smoothScroll: false,
            // Set to 'none' to use the tocify classes
            theme: "none",
            // Handle book (may contain h1) and article (only h2 deeper)
            selectors: $( "#content" ).has( "h1" ).size() > 0 ? "h1,h2,h3,h4,h5" : "h2,h3,h4,h5",
            ignoreSelector: ".discrete"
        });

        // Switch between static asciidoc toc and dynamic tocify toc based on browser size
        // This is set to match the media selectors in the asciidoc CSS
        // Without this, we keep the dynamic toc even if it is moved from the side to preamble
        // position which will cause odd scrolling behavior
        var handleTocOnResize = function() {
            if ($(document).width() < 768) {
                $("#generated-toc").hide();
                $(".sectlevel0").show();
                $(".sectlevel1").show();
            }
            else {
                $("#generated-toc").show();
                $(".sectlevel0").hide();
                $(".sectlevel1").hide();
            }
        }

        $(window).resize(handleTocOnResize);
        handleTocOnResize();
    });
</script>
<style>
/*! Asciidoctor Tabs | Copyright (c) 2018-present Dan Allen | MIT License */
.tabs {
  margin-bottom: 1.25em;
}

.tablist > ul {
  display: flex;
  flex-wrap: wrap;
  list-style: none;
  margin: 0;
  padding: 0;
}

.tablist > ul li {
  align-items: center;
  background-color: #fff;
  cursor: pointer;
  display: flex;
  font-weight: bold;
  line-height: 1.5;
  padding: 0.25em 1em;
  position: relative;
}

.tablist > ul li:focus-visible {
  outline: none;
}

.tablist.ulist,
.tablist.ulist > ul li {
  margin: 0;
}

.tablist.ulist > ul li + li {
  margin-left: 0.25em;
}

.tabs .tablist li::after {
  content: "";
  display: block;
  height: 1px;
  position: absolute;
  bottom: -1px;
  left: 0;
  right: 0;
}

.tabs.is-loading .tablist li:not(:first-child),
.tabs:not(.is-loading) .tablist li:not(.is-selected) {
  background-color: #f5f5f5;
}

.tabs.is-loading .tablist li:first-child::after,
.tabs:not(.is-loading) .tablist li.is-selected::after {
  background-color: #fff;
}

/*
.tabs:not(.is-loading) .tablist li,
.tabs:not(.is-loading) .tablist li::after {
  transition: background-color 200ms ease-in-out;
}
*/

.tablist > ul p {
  line-height: inherit;
  margin: 0;
}

.tabpanel {
  background-color: #fff;
  padding: 1.25em;
}

.tablist > ul li,
.tabpanel {
  border: 1px solid #dcdcdc;
}

.tablist > ul li {
  border-bottom: 0;
}

.tabs.is-loading .tabpanel + .tabpanel,
.tabs:not(.is-loading) .tabpanel.is-hidden {
  display: none;
}

.tabpanel > :first-child {
  margin-top: 0;
}

/* #content is a signature of the Asciidoctor standalone HTML output */
#content .tabpanel > :last-child,
#content .tabpanel > :last-child > :last-child,
#content .tabpanel > :last-child > :last-child > li:last-child > :last-child {
  margin-bottom: 0;
}

.tablecontainer {
  overflow-x: auto;
}

#content .tablecontainer {
  margin-bottom: 1.25em;
}

#content .tablecontainer > table.tableblock {
  margin-bottom: 0;
}
</style>
</head>
<body class="book toc2 toc-left">
    <div id="wrap">
      <script src="/js/versions.js"></script>
      <script src="/js/nav.js"></script>
      <script>
        document.open();
        document.write(buildNavigation());
        addNavbarListeners();
        document.close();
      </script>
    </div>
<div id="header">
<h1>Installing Capsule Server</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#providing-feedback-on-red-hat-documentation_capsule">Providing feedback on Red Hat documentation</a></li>
<li><a href="#_redhat_satellite_installation_helper_app">1. Red&#160;Hat Satellite Installation Helper app</a></li>
<li><a href="#preparing-environment-for-capsule-installation">2. Preparing your environment for installation</a>
<ul class="sectlevel2">
<li><a href="#operating-system-requirements">2.1. Operating system requirements</a></li>
<li><a href="#system-requirements_capsule">2.2. System requirements</a></li>
<li><a href="#capsule-storage-requirements_capsule">2.3. Storage requirements</a></li>
<li><a href="#best-practices-for-optimizing-storage">2.4. Best practices for optimizing storage</a></li>
<li><a href="#opening-required-ports">2.5. Opening required ports</a></li>
</ul>
</li>
<li><a href="#installing-capsule-server">3. Installing Capsule&#160;Server</a>
<ul class="sectlevel2">
<li><a href="#Registering_Proxy_to_Server_capsule">3.1. Registering to Satellite&#160;Server</a></li>
<li><a href="#configuring-repositories-proxy_capsule">3.2. Configuring repositories</a></li>
<li><a href="#installing-capsule-server-packages">3.3. Installing Capsule&#160;Server packages</a></li>
<li><a href="#configuring-capsule-server-with-ssl-certificates">3.4. Configuring Capsule&#160;Server with SSL certificates</a>
<ul class="sectlevel3">
<li><a href="#configuring-capsule-default-certificate_capsule">3.4.1. Configuring Capsule&#160;Server with a default SSL certificate</a></li>
<li><a href="#configuring-capsule-custom-server-certificate_capsule">3.4.2. Configuring Capsule&#160;Server with a custom SSL certificate</a></li>
</ul>
</li>
<li><a href="#resetting-custom-ssl-certificate-to-default-self-signed-certificate-on-capsule_capsule">3.5. Resetting custom SSL certificate to default self-signed certificate on Capsule&#160;Server</a></li>
<li><a href="#assigning-organization-location-capsule-server_capsule">3.6. Assigning the correct organization and location to Capsule&#160;Server in the Satellite web UI</a></li>
</ul>
</li>
<li><a href="#performing-additional-configuration-on-capsule-server_capsule">4. Performing additional configuration on Capsule&#160;Server</a>
<ul class="sectlevel2">
<li><a href="#configuring-capsule-for-host-registration-and-provisioning_capsule">4.1. Configuring Capsule for host registration and provisioning</a></li>
<li><a href="#configuring-pull-based-transport-for-remote-execution_capsule">4.2. Configuring pull-based transport for remote execution</a></li>
<li><a href="#Adding_Lifecycle_Environments_capsule">4.3. Adding lifecycle environments to Capsule&#160;Servers</a></li>
<li><a href="#enabling-power-management-on-hosts_capsule">4.4. Enabling power management on hosts</a></li>
</ul>
</li>
<li><a href="#capsule-server-scalability-considerations_capsule">Appendix A: Capsule&#160;Server scalability considerations when managing Puppet clients</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="providing-feedback-on-red-hat-documentation_capsule"><a class="anchor" href="#providing-feedback-on-red-hat-documentation_capsule"></a>Providing feedback on Red Hat documentation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We appreciate your feedback on our documentation.
Let us know how we can improve it.</p>
</div>
<div class="paragraph">
<p>Use the <strong>Create Issue</strong> form in Red Hat Jira to provide your feedback.
The Jira issue is created in the Red Hat Satellite Jira project, where you can track its progress.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure you have registered a <a href="https://access.redhat.com/">Red Hat account</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Click the following link: <a href="https://issues.redhat.com/secure/CreateIssueDetails!init.jspa?pid=12324223&amp;summary=Documentation%20feedback:%20%3CAdd%20summary%20here%3E&amp;issuetype=1&amp;components=12347630&amp;priority=10300"><strong>Create Issue</strong></a>.
If Jira displays a login error, log in and proceed after you are redirected to the form.</p>
</li>
<li>
<p>Complete the <strong>Summary</strong> and <strong>Description</strong> fields.
In the <strong>Description</strong> field, include the documentation URL, chapter or section number, and a detailed description of the issue.
Do not modify any other fields in the form.</p>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_redhat_satellite_installation_helper_app"><a class="anchor" href="#_redhat_satellite_installation_helper_app"></a>1. Red&#160;Hat Satellite Installation Helper app</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For interactive instructions for performing the installation, you can use the Red&#160;Hat Satellite Installation Helper on the Red&#160;Hat Customer Portal.
This application provides you with an interactive way to prepare installation instructions customized for your required Satellite version number and configuration.
For more information, see <a href="https://access.redhat.com/labs/rhsih/">Red&#160;Hat Satellite Installation Helper</a> on the Red&#160;Hat Customer Portal.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="preparing-environment-for-capsule-installation"><a class="anchor" href="#preparing-environment-for-capsule-installation"></a>2. Preparing your environment for installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Review the following prerequisites before you install Capsule&#160;Server.</p>
</div>
<div class="sect2">
<h3 id="operating-system-requirements"><a class="anchor" href="#operating-system-requirements"></a>2.1. Operating system requirements</h3>
<div class="paragraph">
<p>The following operating system is supported for deploying Satellite:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Red&#160;Hat Enterprise Linux 9 (x86_64)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can install the operating system from a disc, local ISO image, Kickstart, or any other method that Red&#160;Hat supports.</p>
</div>
<div class="paragraph">
<p>Red&#160;Hat Capsule&#160;Server is supported on the latest version of Red&#160;Hat Enterprise Linux 9 available at the time of installation.
Previous versions of Red&#160;Hat Enterprise Linux including EUS or z-stream are not supported.</p>
</div>
<div class="paragraph">
<p>Red&#160;Hat Capsule&#160;Server requires a Red&#160;Hat Enterprise Linux installation with the <code>@Base</code> package group with no other package-set modifications, and without third-party configurations or software not directly necessary for the direct operation of the server.
This restriction includes hardening and other non-Red&#160;Hat security software.
If you require such software in your infrastructure, install and verify a complete working Capsule&#160;Server first, then create a backup of the system before adding any non-Red&#160;Hat software.</p>
</div>
<div class="paragraph">
<p>Do not register Capsule&#160;Server to the Red&#160;Hat Content Delivery Network (CDN).</p>
</div>
</div>
<div class="sect2">
<h3 id="system-requirements_capsule"><a class="anchor" href="#system-requirements_capsule"></a>2.2. System requirements</h3>
<div class="paragraph">
<p>Capsule&#160;Server is fully supported on both physical systems and virtual machines that run on hypervisors that are supported to run Red&#160;Hat Enterprise Linux.
For more information about certified hypervisors, see <a href="https://access.redhat.com/articles/certified-hypervisors">Certified Guest Operating Systems in Red Hat OpenStack Platform, Red Hat Virtualization, Red Hat OpenShift Virtualization and Red Hat Enterprise Linux with KVM</a>.</p>
</div>
<div class="paragraph">
<p>Follow these system requirements when installing Capsule&#160;Server:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Install Capsule&#160;Server on a freshly provisioned system that serves no other function except to run Capsule&#160;Server.
Do not use an existing system because the Satellite installer will affect the configuration of several components.</p>
</li>
<li>
<p>Ensure you have administrative user (root) access to the system.</p>
</li>
<li>
<p>Ensure the system meets the following requirements:</p>
<div class="ulist">
<ul>
<li>
<p>4 CPU cores</p>
</li>
<li>
<p>12 GB or higher</p>
</li>
<li>
<p>4 GB RAM of swap space or higher</p>
</li>
<li>
<p>A unique host name, which can contain lower-case letters, numbers, dots (.) and hyphens (-)</p>
</li>
</ul>
</div>
</li>
<li>
<p>If you use custom certificates, ensure that the Common Name (CN) of the custom certificate is a fully qualified domain name (FQDN).
Satellite&#160;Server and Capsule&#160;Server do not support shortnames in the hostnames.</p>
</li>
<li>
<p>Ensure SELinux is enabled, either in enforcing or permissive mode.
Installation with disabled SELinux is not supported.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/overview_concepts_and_deployment_considerations/index#security-considerations">Security considerations</a> in <em>Overview, concepts, and deployment considerations</em>.</p>
</li>
<li>
<p>Ensure the system clock on the system is synchronized across the network.
If the system clock is not synchronized, SSL certificate verification might fail.
For example, you can use the Chrony suite for timekeeping.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/configuring_basic_system_settings/configuring-time-synchronization_configuring-basic-system-settings">Configuring time synchronization</a> in <em>Red&#160;Hat Enterprise Linux&#160;9 Configuring basic system settings</em></p>
</li>
<li>
<p>Ensure the system uses the <code>UTF-8</code> encoding.
If your territory is USA and your language is English, set <code>en_US.utf-8</code> as the system-wide locale settings.
For more information about configuring system locale in Red&#160;Hat Enterprise Linux, see <a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/configuring_basic_system_settings/assembly_changing-basic-environment-settings_configuring-basic-system-settings#proc_configuring-the-system-locale_assembly_changing-basic-environment-settings">Configuring the system locale</a> in <em>Red&#160;Hat Enterprise Linux&#160;9 Configuring basic system settings</em>.</p>
</li>
<li>
<p>If you use an external identity provider in your deployment, ensure the provider did not create the following user accounts on the system.
These user accounts can cause conflicts with the local users that Capsule&#160;Server creates:</p>
<div class="ulist">
<ul>
<li>
<p>apache</p>
</li>
<li>
<p>foreman-proxy</p>
</li>
<li>
<p>postgres</p>
</li>
<li>
<p>pulp</p>
</li>
<li>
<p>puppet</p>
</li>
<li>
<p>redis</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>The version of Capsule must match the version of Satellite installed.
For example, the Capsule version 6.18 cannot be registered with the Satellite version 6.17.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For more information on scaling your Capsule&#160;Servers, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/installing_capsule_server/index#capsule-server-scalability-considerations_capsule">Capsule&#160;Server scalability considerations</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="capsule-storage-requirements_capsule"><a class="anchor" href="#capsule-storage-requirements_capsule"></a>2.3. Storage requirements</h3>
<div class="paragraph">
<p>The following table details storage requirements for specific directories.
These values are based on expected use case scenarios and can vary according to individual environments.</p>
</div>
<div class="paragraph">
<p>The runtime size was measured with Red&#160;Hat Enterprise Linux 7, 8, and 9 repositories synchronized.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Storage requirements for Capsule&#160;Server installation</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Directory</th>
<th class="tableblock halign-left valign-top">Installation Size</th>
<th class="tableblock halign-left valign-top">Runtime Size</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/var/lib/pulp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">300 GB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/var/lib/pgsql</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100 MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 GB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/usr</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3 GB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not Applicable</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/opt/puppetlabs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">500 MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not Applicable</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The size of the PostgreSQL database on your Capsule&#160;Server can grow significantly with an increasing number of lifecycle environments, content views, or repositories that are synchronized from your Satellite&#160;Server.
In the largest Satellite environments, the size of <code>/var/lib/pgsql</code> on Capsule&#160;Server can grow to double or triple the size of <code>/var/lib/pgsql</code> on your Satellite&#160;Server.</p>
</div>
</div>
<div class="sect2">
<h3 id="best-practices-for-optimizing-storage"><a class="anchor" href="#best-practices-for-optimizing-storage"></a>2.4. Best practices for optimizing storage</h3>
<div class="paragraph">
<p>Consider the following storage guidelines for increased storage efficiency:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The exact amount of storage you require for log messages depends on your installation and setup.
You can manage the size of the log files by using <strong>logrotate</strong>.</p>
</li>
<li>
<p>Consider mounting <code>/var</code> on LVM storage.
This can help the system to scale because most Capsule&#160;Server data is stored in the <code>/var</code> directory.</p>
</li>
<li>
<p>Use high-bandwidth, low-latency storage for the <code>/var/lib/pulp/</code> and <code>/var/lib/pgsql</code> directories.
Using high latency, low-bandwidth storage causes performance degradation because Red&#160;Hat Satellite has many operations that are I/O intensive.</p>
</li>
<li>
<p>Use a file system with low input-output latency.
Do not use the GFS2 file system because the input-output latency is too high.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://access.redhat.com/solutions/1294">How to use logrotate utility to rotate log files</a></p>
</li>
<li>
<p><a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/administering_red_hat_satellite/index#Logging_and_Reporting_Problems_admin">Logging and reporting problems in <em>Administering Red&#160;Hat Satellite</em></a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="opening-required-ports"><a class="anchor" href="#opening-required-ports"></a>2.5. Opening required ports</h3>
<div class="paragraph">
<p>By opening the required ports, you ensure that the components of Satellite architecture can communicate.
You must also ensure that the required network ports are open on any network-based firewalls.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Some cloud solutions must be specifically configured to allow communications between machines because they isolate machines similarly to network-based firewalls.
If you use an application-based firewall, ensure that the application-based firewall permits all applications that are listed in the tables and known to your firewall.
If possible, disable the application checking and allow open port communication based on the protocol.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>If you need to prevent the DHCP Capsule from pinging hosts to check for available IP addresses, disable DHCP IP address pinging:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer --foreman-proxy-dhcp-ping-free-ip false</pre>
</div>
</div>
<div class="paragraph">
<p>By default, a DHCP Capsule performs ICMP ping and TCP echo connection attempts to hosts in subnets with DHCP IPAM set to find out if an IP address considered for use is free.</p>
</div>
</li>
<li>
<p>Open the ports for clients on Capsule&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd \
--add-port="8000/tcp" \
--add-port="9090/tcp"</pre>
</div>
</div>
</li>
<li>
<p>Allow access to services on Capsule&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd \
--add-service=dns \
--add-service=dhcp \
--add-service=tftp \
--add-service=http \
--add-service=https \
--add-service=puppetmaster</pre>
</div>
</div>
</li>
<li>
<p>Make the changes persistent:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd --runtime-to-permanent</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>View all firewall zones and allowed services:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd --list-all</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/overview_concepts_and_deployment_considerations/index#networking-considerations-in-satellite">Networking considerations in Satellite</a></p>
</li>
<li>
<p><a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/configuring_firewalls_and_packet_filters/using-and-configuring-firewalld_firewall-packet-filters">Using and configuring firewalld in <em>Red&#160;Hat Enterprise Linux&#160;9 Configuring firewalls and packet filters</em></a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installing-capsule-server"><a class="anchor" href="#installing-capsule-server"></a>3. Installing Capsule&#160;Server</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before you install Capsule&#160;Server, you must ensure that your environment meets the requirements for installation.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/installing_capsule_server/index#preparing-environment-for-capsule-installation">Preparing your Environment for Installation</a>.</p>
</div>
<div class="sect2">
<h3 id="Registering_Proxy_to_Server_capsule"><a class="anchor" href="#Registering_Proxy_to_Server_capsule"></a>3.1. Registering to Satellite&#160;Server</h3>
<div class="paragraph _abstract">
<p>Register the base operating system on which you want to install Capsule&#160;Server to Satellite&#160;Server.
This enables you to download the installation packages from your synchronized repositories.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Prerequisites for Red&#160;Hat subscription manifest:</p>
<div class="ulist">
<ul>
<li>
<p>On Satellite&#160;Server, a manifest must be installed and it must contain the appropriate repositories for the organization you want Capsule to belong to.</p>
</li>
<li>
<p>The manifest must contain repositories for the base operating system on which you want to install Capsule, as well as any clients that you want to connect to Capsule.</p>
</li>
<li>
<p>The repositories must be synchronized.</p>
<div class="paragraph">
<p>For more information on manifests and repositories, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/managing_content/index#Managing_Red_Hat_Subscriptions_content-management">Managing Red Hat Subscriptions</a> in <em>Managing content</em>.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Prerequisites for HTTP proxy and network:</p>
<div class="ulist">
<ul>
<li>
<p>The Satellite&#160;Server base operating system must be able to resolve the host name of the Capsule base operating system and vice versa.</p>
</li>
<li>
<p>Ensure HTTPS connection using client certificate authentication is possible between Capsule&#160;Server and Satellite&#160;Server.
HTTP proxies between Capsule&#160;Server and Satellite&#160;Server are not supported.</p>
</li>
<li>
<p>You must configure the host and network-based firewalls accordingly.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can register hosts with Satellite using the host registration feature in the Satellite web UI, Hammer CLI, or the Satellite API.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/managing_hosts/index#registering-hosts-and-setting-up-host-integration_managing-hosts">Registering hosts and setting up host integration</a> in <em>Managing hosts</em>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>Register Host</strong>.</p>
</li>
<li>
<p>From the <strong>Activation Keys</strong> list, select the activation keys to assign to your host.</p>
</li>
<li>
<p>Click <strong>Generate</strong> to create the registration command.</p>
</li>
<li>
<p>Click on the <em>files</em> icon to copy the command to your clipboard.</p>
</li>
<li>
<p>Connect to your host using SSH and run the registration command.</p>
</li>
<li>
<p>Check the <code>/etc/yum.repos.d/redhat.repo</code> file and ensure that the appropriate repositories have been enabled.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Generate the host registration command using the Hammer CLI:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer host-registration generate-command \
--activation-keys "<em>My_Activation_Key</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>If your hosts do not trust the SSL certificate of Satellite&#160;Server, you can disable SSL validation by adding the <code>--insecure</code> flag to the registration command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer host-registration generate-command \
--activation-keys "<em>My_Activation_Key</em>" \
--insecure true</pre>
</div>
</div>
</li>
<li>
<p>Connect to your host using SSH and run the registration command.</p>
</li>
<li>
<p>Check the <code>/etc/yum.repos.d/redhat.repo</code> file and ensure that the appropriate repositories have been enabled.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">API procedure</div>
<ol class="arabic">
<li>
<p>Generate the host registration command using the Satellite API:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl -X POST https://satellite.example.com/api/registration_commands \
--user "<em>My_User_Name</em>" \
-H 'Content-Type: application/json' \
-d '{ "registration_command": { "activation_keys": ["<em>My_Activation_Key_1</em>, <em>My_Activation_Key_2</em>"] }}'</pre>
</div>
</div>
<div class="paragraph">
<p>If your hosts do not trust the SSL certificate of Satellite&#160;Server, you can disable SSL validation by adding the <code>--insecure</code> flag to the registration command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl -X POST https://satellite.example.com/api/registration_commands \
--user "<em>My_User_Name</em>" \
-H 'Content-Type: application/json' \
-d '{ "registration_command": { "activation_keys": ["<em>My_Activation_Key_1</em>, <em>My_Activation_Key_2</em>"], "insecure": true }}'</pre>
</div>
</div>
<div class="paragraph">
<p>Use an activation key to simplify specifying the environments.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/managing_content/index#Managing_Activation_Keys_content-management">Managing Activation Keys</a> in <em>Managing content</em>.</p>
</div>
<div class="paragraph">
<p>To enter a password as a command line argument, use <code>username:password</code> syntax.
Keep in mind this can save the password in the shell history.
Alternatively, you can use a temporary personal access token instead of a password.
To generate a token in the Satellite web UI, navigate to <strong>My Account</strong> &gt; <strong>Personal Access Tokens</strong>.</p>
</div>
</li>
<li>
<p>Connect to your host using SSH and run the registration command.</p>
</li>
<li>
<p>Check the <code>/etc/yum.repos.d/redhat.repo</code> file and ensure that the appropriate repositories have been enabled.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="configuring-repositories-proxy_capsule"><a class="anchor" href="#configuring-repositories-proxy_capsule"></a>3.2. Configuring repositories</h3>
<div class="paragraph _abstract">
<p>Configure repositories to install your Capsule&#160;Server.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Disable all repositories:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># subscription-manager repos --disable "*"</pre>
</div>
</div>
</li>
<li>
<p>Enable the following repositories:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># subscription-manager repos \
--enable=rhel-9-for-x86_64-baseos-rpms \
--enable=rhel-9-for-x86_64-appstream-rpms \
--enable=satellite-capsule-6.18-for-rhel-9-x86_64-rpms \
--enable=satellite-maintenance-6.18-for-rhel-9-x86_64-rpms</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>Verify that the required repositories are enabled:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf repolist enabled</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="installing-capsule-server-packages"><a class="anchor" href="#installing-capsule-server-packages"></a>3.3. Installing Capsule&#160;Server packages</h3>
<div class="paragraph _abstract">
<p>Before installing Capsule&#160;Server packages, you must upgrade all packages that are installed on the base operating system.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Upgrade all packages:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf upgrade</pre>
</div>
</div>
</li>
<li>
<p>Install the packages:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf install satellite-capsule</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="configuring-capsule-server-with-ssl-certificates"><a class="anchor" href="#configuring-capsule-server-with-ssl-certificates"></a>3.4. Configuring Capsule&#160;Server with SSL certificates</h3>
<div class="paragraph">
<p>Red&#160;Hat Satellite uses SSL certificates to enable encrypted communications between Satellite&#160;Server, Capsule&#160;Servers, and all hosts.
Depending on the requirements of your organization, you must configure your Capsule&#160;Server with a default or custom certificate.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If you use a default SSL certificate, you must also configure each Capsule&#160;Server with a distinct default SSL certificate.
For more information, see <a href="#configuring-capsule-default-certificate_capsule">Configuring Capsule&#160;Server with a default SSL certificate</a>.</p>
</li>
<li>
<p>If you use a custom SSL certificate, you must also configure each Capsule&#160;Server with a distinct custom SSL certificate.
For more information, see <a href="#configuring-capsule-custom-server-certificate_capsule">Configuring Capsule&#160;Server with a custom SSL certificate</a>.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="configuring-capsule-default-certificate_capsule"><a class="anchor" href="#configuring-capsule-default-certificate_capsule"></a>3.4.1. Configuring Capsule&#160;Server with a default SSL certificate</h4>
<div class="paragraph">
<p>Use this section to configure Capsule&#160;Server with an SSL certificate that is signed by Satellite&#160;Server default Certificate Authority (CA).</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Capsule&#160;Server is registered to Satellite&#160;Server.
For more information, see <a href="#Registering_Proxy_to_Server_capsule">Registering to Satellite&#160;Server</a>.</p>
</li>
<li>
<p>Capsule&#160;Server packages are installed.
For more information, see <a href="#installing-capsule-server-packages">Installing Capsule&#160;Server packages</a>.</p>
</li>
<li>
<p>The required ports are open.
For more information, see <a href="#opening-required-ports">Opening required ports</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>On Satellite&#160;Server, to store all the source certificate files for your Capsule&#160;Server, create a directory that is accessible only to the <code>root</code> user, for example <code>/root/capsule_cert</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir /root/<em>capsule_cert</em></pre>
</div>
</div>
</li>
<li>
<p>On Satellite&#160;Server, generate the <code>/root/capsule_cert/<em>capsule.example.com</em>-certs.tar</code> certificate archive for your Capsule&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># capsule-certs-generate \
--foreman-proxy-fqdn <em>capsule.example.com</em> \
--certs-tar /root/capsule_cert/<em>capsule.example.com</em>-certs.tar</pre>
</div>
</div>
<div class="paragraph">
<p>Retain a copy of the <code>satellite-installer</code> command that the <code>capsule-certs-generate</code> command returns for deploying the certificate to your Capsule&#160;Server.</p>
</div>
<div class="listingblock">
<div class="title">Example output of <code>capsule-certs-generate</code></div>
<div class="content">
<pre class="nowrap"><em>output omitted</em>
satellite-installer --scenario capsule \
--certs-tar-file "/root/capsule_cert/<em>capsule.example.com</em>-certs.tar" \
--foreman-proxy-foreman-base-url "https://<em>satellite.example.com</em>" \
--foreman-proxy-trusted-hosts "<em>satellite.example.com</em>" \
--foreman-proxy-trusted-hosts "<em>capsule.example.com</em>" \
--foreman-proxy-oauth-consumer-key "<em>s97QxvUAgFNAQZNGg4F9zLq2biDsxM7f</em>" \
--foreman-proxy-oauth-consumer-secret "<em>6bpzAdMpRAfYaVZtaepYetomgBVQ6ehY</em>"</pre>
</div>
</div>
</li>
<li>
<p>On Satellite&#160;Server, copy the certificate archive file to your Capsule&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># scp /root/capsule_cert/<em>capsule.example.com</em>-certs.tar \
root@<em>capsule.example.com</em>:/root/<em>capsule.example.com</em>-certs.tar</pre>
</div>
</div>
</li>
<li>
<p>On Capsule&#160;Server, to deploy the certificate, enter the <code>satellite-installer</code> command that the <code>capsule-certs-generate</code> command returns.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>Do not delete the certificate archive file after you deploy the certificate.
It is required, for example, when upgrading Capsule&#160;Server.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="configuring-capsule-custom-server-certificate_capsule"><a class="anchor" href="#configuring-capsule-custom-server-certificate_capsule"></a>3.4.2. Configuring Capsule&#160;Server with a custom SSL certificate</h4>
<div class="paragraph">
<p>If you configure Satellite&#160;Server to use a custom SSL certificate, you must also configure each of your Capsule&#160;Servers with a distinct custom SSL certificate.</p>
</div>
<div class="paragraph">
<p>To configure your Capsule&#160;Server with a custom certificate, complete the following procedures on each Capsule&#160;Server:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#creating-a-custom-ssl-certificate_capsule">Creating a custom SSL certificate for Capsule&#160;Server</a></p>
</li>
<li>
<p><a href="#deploying-a-custom-ssl-certificate-to-capsule-server_capsule">Deploying a custom SSL certificate to Capsule&#160;Server</a></p>
</li>
<li>
<p><a href="#deploying-a-custom-ssl-certificate-to-hosts_capsule">Deploying a custom SSL certificate to hosts</a></p>
</li>
</ol>
</div>
<div class="sect4">
<h5 id="creating-a-custom-ssl-certificate_capsule"><a class="anchor" href="#creating-a-custom-ssl-certificate_capsule"></a>Creating a custom SSL certificate for Capsule&#160;Server</h5>
<div class="paragraph _abstract">
<p>On Satellite&#160;Server, create a custom certificate for your Capsule&#160;Server.
If you already have a custom SSL certificate for Capsule&#160;Server, skip this procedure.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>To store all the source certificate files, create a directory that is accessible only to the <code>root</code> user:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir /root/capsule_cert</pre>
</div>
</div>
</li>
<li>
<p>Create a private key with which to sign the certificate signing request (CSR).</p>
<div class="paragraph">
<p>Note that the private key must be unencrypted.
If you use a password-protected private key, remove the private key password.</p>
</div>
<div class="paragraph">
<p>If you already have a private key for this Capsule&#160;Server, skip this step.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># openssl genrsa -out <code>/root/capsule_cert/capsule_cert_key.pem</code> 4096</pre>
</div>
</div>
</li>
<li>
<p>Create the <code>/root/capsule_cert/openssl.cnf</code> configuration file for the CSR and include the following content:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">[ req ]
req_extensions = v3_req
distinguished_name = req_distinguished_name
prompt = no

[ req_distinguished_name ]
commonName = <em>capsule.example.com</em>

[ v3_req ]
basicConstraints = CA:FALSE
keyUsage = digitalSignature, keyEncipherment
extendedKeyUsage = serverAuth, clientAuth
subjectAltName = @alt_names

[ alt_names ]
DNS.1 = <em>capsule.example.com</em></pre>
</div>
</div>
<div class="paragraph">
<p>For more information about the <code>[ v3_req ]</code> parameters and their purpose, see <a href="https://www.rfc-editor.org/rfc/rfc5280">RFC 5280: Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile</a>.</p>
</div>
</li>
<li>
<p>Optional: If you want to add Distinguished Name (DN) details to the CSR, add the following information to the <code>[ req_distinguished_name ]</code> section:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">[req_distinguished_name]
CN = <em>capsule.example.com</em>
countryName = <em>My_Country_Name</em>
stateOrProvinceName = <em>My_State_Or_Province_Name</em>
localityName = <em>My_Locality_Name</em>
organizationName = <em>My_Organization_Or_Company_Name</em>
organizationalUnitName = <em>My_Organizational_Unit_Name</em></pre>
</div>
</div>
<div class="paragraph">
<p>The options used in the configuration file include the following:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>countryName</code></dt>
<dd>
<p>The country represented by a two-letter code</p>
</dd>
<dt class="hdlist1"><code>stateOrProvinceName</code></dt>
<dd>
<p>Full name of the state or province</p>
</dd>
<dt class="hdlist1"><code>localityName</code></dt>
<dd>
<p>Full name of the locality (example: New York)</p>
</dd>
<dt class="hdlist1"><code>organizationalUnitName</code></dt>
<dd>
<p>Division responsible for the certificate (example: IT department)</p>
</dd>
</dl>
</div>
</li>
<li>
<p>Generate CSR:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># openssl req -new \
-key <em>/root/capsule_cert/capsule_cert_key.pem</em> \
-config <em>/root/capsule_cert/openssl.cnf</em> \
-out <em>/root/capsule_cert/capsule_cert_csr.pem</em></pre>
</div>
</div>
<div class="paragraph">
<p>The options used in the configuration file include the following:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>-key</code></dt>
<dd>
<p>Path to the private key</p>
</dd>
<dt class="hdlist1"><code>-config</code></dt>
<dd>
<p>Path to the configuration file</p>
</dd>
<dt class="hdlist1"><code>-out</code></dt>
<dd>
<p>Path to the CSR to generate</p>
</dd>
</dl>
</div>
</li>
<li>
<p>Send the certificate signing request to the certificate authority (CA).
The same CA must sign certificates for Satellite&#160;Server and Capsule&#160;Server.</p>
<div class="paragraph">
<p>When you submit the request, specify the lifespan of the certificate.
The method for sending the certificate request varies, so consult the CA for the preferred method.
In response to the request, you can expect to receive a CA bundle and a signed certificate, in separate files.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="deploying-a-custom-ssl-certificate-to-capsule-server_capsule"><a class="anchor" href="#deploying-a-custom-ssl-certificate-to-capsule-server_capsule"></a>Deploying a custom SSL certificate to Capsule&#160;Server</h5>
<div class="paragraph">
<p>Use this procedure to configure your Capsule&#160;Server with a custom SSL certificate signed by a Certificate Authority.
The <code>satellite-installer</code> command, which the <code>capsule-certs-generate</code> command returns, is unique to each Capsule&#160;Server.
Do not use the same command on more than one Capsule&#160;Server.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Satellite&#160;Server is configured with a custom certificate.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/installing_satellite_server_in_a_connected_network_environment/index#configuring-satellite-server-with-a-custom-ssl-certificate">Configuring Satellite&#160;Server with a custom SSL certificate</a> in <em>Installing Satellite&#160;Server in a connected network environment</em>.</p>
</li>
<li>
<p>Capsule&#160;Server is registered to Satellite&#160;Server.
For more information, see <a href="#Registering_Proxy_to_Server_capsule">Registering to Satellite&#160;Server</a>.</p>
</li>
<li>
<p>Capsule&#160;Server packages are installed.
For more information, see <a href="#installing-capsule-server-packages">Installing Capsule&#160;Server packages</a>.</p>
</li>
<li>
<p>The required ports are open.
For more information, see <a href="#opening-required-ports">Opening required ports</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>On your Satellite&#160;Server, generate a certificate bundle:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># capsule-certs-generate \
--foreman-proxy-fqdn <em>capsule.example.com</em> \
--certs-tar ~/<em>capsule.example.com</em>-certs.tar \
--server-cert /root/<em>capsule_cert/capsule_cert.pem</em> \ <b class="conum">(1)</b>
--server-key /root/<em>capsule_cert/capsule_cert_key.pem</em> \ <b class="conum">(2)</b>
--server-ca-cert /root/<em>capsule_cert/ca_cert_bundle.pem</em> <b class="conum">(3)</b></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Path to Capsule&#160;Server certificate file that is signed by a Certificate Authority.</p>
</li>
<li>
<p>Path to the private key that was used to sign Capsule&#160;Server certificate.</p>
</li>
<li>
<p>Path to the Certificate Authority bundle.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Retain a copy of the <code>satellite-installer</code> command that the <code>capsule-certs-generate</code> command returns for deploying the certificate to your Capsule&#160;Server.</p>
<div class="listingblock">
<div class="title">Example output of <code>capsule-certs-generate</code></div>
<div class="content">
<pre class="nowrap"><em>output omitted</em>
satellite-installer --scenario capsule \
--certs-tar-file "/root/<em>capsule.example.com</em>-certs.tar" \
--foreman-proxy-foreman-base-url "https://<em>satellite.example.com</em>" \
--foreman-proxy-trusted-hosts "<em>satellite.example.com</em>" \
--foreman-proxy-trusted-hosts "<em>capsule.example.com</em>" \
--foreman-proxy-oauth-consumer-key "<em>My_OAuth_Consumer_Key</em>" \
--foreman-proxy-oauth-consumer-secret "<em>My_OAuth_Consumer_Secret</em>"</pre>
</div>
</div>
</li>
<li>
<p>On your Satellite&#160;Server, copy the certificate archive file to your Capsule&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># scp ~/<em>capsule.example.com</em>-certs.tar \
root@<em>capsule.example.com</em>:/root/<em>capsule.example.com</em>-certs.tar</pre>
</div>
</div>
</li>
<li>
<p>On your Capsule&#160;Server, to deploy the certificate, enter the <code>satellite-installer</code> command that the <code>capsule-certs-generate</code> command returns.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>Do not delete the certificate archive file after you deploy the certificate.
It is required, for example, when upgrading Capsule&#160;Server.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="deploying-a-custom-ssl-certificate-to-hosts_capsule"><a class="anchor" href="#deploying-a-custom-ssl-certificate-to-hosts_capsule"></a>Deploying a custom SSL certificate to hosts</h5>
<div class="paragraph">
<p>After you configure Satellite to use a custom SSL certificate, you must deploy the certificate to hosts registered to Satellite.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Update the SSL certificate on each host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf install http://<em>capsule.example.com</em>/pub/katello-ca-consumer-latest.noarch.rpm</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resetting-custom-ssl-certificate-to-default-self-signed-certificate-on-capsule_capsule"><a class="anchor" href="#resetting-custom-ssl-certificate-to-default-self-signed-certificate-on-capsule_capsule"></a>3.5. Resetting custom SSL certificate to default self-signed certificate on Capsule&#160;Server</h3>
<div class="paragraph">
<p>To reset the custom SSL certificate to default self-signed certificate on your Capsule&#160;Server, you must re-register your Capsule&#160;Server through <strong>Global Registration</strong>.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/managing_hosts/index#Registering_Hosts_by_Using_Global_Registration_managing-hosts">Registering hosts by using global registration</a> in <em>Managing hosts</em>.</p>
</div>
<div class="olist arabic">
<div class="title">Verification</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Capsules</strong> and select any Capsule&#160;Server.</p>
</li>
<li>
<p>On the <strong>Overview</strong> tab, click <strong>Refresh features</strong>.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional Resources</div>
<ul>
<li>
<p><a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/installing_satellite_server_in_a_connected_network_environment/index#resetting-custom-ssl-certificate-to-default-self-signed-certificate-on-satellite_satellite">Reset custom SSL certificate to default self-signed certificate on Satellite&#160;Server</a> in <em>Installing Satellite&#160;Server in a connected network environment</em>.</p>
</li>
<li>
<p><a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/managing_hosts/index#resetting-custom-ssl-certificate-to-default-self-signed-certificate-on-hosts_managing-hosts">Reset custom SSL certificate to default self-signed certificate on hosts</a> in <em>Managing hosts</em>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="assigning-organization-location-capsule-server_capsule"><a class="anchor" href="#assigning-organization-location-capsule-server_capsule"></a>3.6. Assigning the correct organization and location to Capsule&#160;Server in the Satellite web UI</h3>
<div class="paragraph">
<p>After installing Capsule&#160;Server packages, if there is more than one organization or location, you must assign the correct organization and location to Capsule to make Capsule visible in the Satellite web UI.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Assigning a Capsule to the same location as your Satellite&#160;Server with an embedded Capsule prevents Red&#160;Hat Lightspeed from uploading the Red&#160;Hat Lightspeed inventory.
To enable the inventory upload, synchronize SSH keys for both Capsules.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log into the Satellite web UI.</p>
</li>
<li>
<p>From the <strong>Organization</strong> list in the upper-left of the screen, select <strong>Any Organization</strong>.</p>
</li>
<li>
<p>From the <strong>Location</strong> list in the upper-left of the screen, select <strong>Any Location</strong>.</p>
</li>
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong> and select Capsule&#160;Server.</p>
</li>
<li>
<p>From the <strong>Select Actions</strong> list, select <strong>Assign Organization</strong>.</p>
</li>
<li>
<p>From the <strong>Organization</strong> list, select the organization where you want to assign this Capsule.</p>
</li>
<li>
<p>Click <strong>Fix Organization on Mismatch</strong>.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
<li>
<p>Select Capsule&#160;Server. From the <strong>Select Actions</strong> list, select <strong>Assign Location</strong>.</p>
</li>
<li>
<p>From the <strong>Location</strong> list, select the location where you want to assign this Capsule.</p>
</li>
<li>
<p>Click <strong>Fix Location on Mismatch</strong>.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
<li>
<p>In the Satellite web UI, navigate to <strong>Administer</strong> &gt; <strong>Organizations</strong> and click the organization to which you have assigned Capsule.</p>
</li>
<li>
<p>Click <strong>Capsules</strong> tab and ensure that Capsule&#160;Server is listed under the <strong>Selected items</strong> list, then click <strong>Submit</strong>.</p>
</li>
<li>
<p>In the Satellite web UI, navigate to <strong>Administer</strong> &gt; <strong>Locations</strong> and click the location to which you have assigned Capsule.</p>
</li>
<li>
<p>Click <strong>Capsules</strong> tab and ensure that Capsule&#160;Server is listed under the <strong>Selected items</strong> list, then click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Verification</div>
<p>Optionally, you can verify if Capsule&#160;Server is correctly listed in the Satellite web UI.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select the organization from the <strong>Organization</strong> list.</p>
</li>
<li>
<p>Select the location from the <strong>Location</strong> list.</p>
</li>
<li>
<p>In the Satellite web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>.</p>
</li>
<li>
<p>In the Satellite web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Capsules</strong>.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="performing-additional-configuration-on-capsule-server_capsule"><a class="anchor" href="#performing-additional-configuration-on-capsule-server_capsule"></a>4. Performing additional configuration on Capsule&#160;Server</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After installation, you can configure additional settings on your Capsule&#160;Server.</p>
</div>
<div class="sect2">
<h3 id="configuring-capsule-for-host-registration-and-provisioning_capsule"><a class="anchor" href="#configuring-capsule-for-host-registration-and-provisioning_capsule"></a>4.1. Configuring Capsule for host registration and provisioning</h3>
<div class="paragraph">
<p>Use this procedure to configure Capsule so that you can register and provision hosts using your Capsule&#160;Server instead of your Satellite&#160;Server.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>On Satellite&#160;Server, add the Capsule to the list of trusted proxies.</p>
<div class="paragraph">
<p>This is required for Satellite to recognize hosts' IP addresses forwarded over the <code>X-Forwarded-For</code> HTTP header set by Capsule.
For security reasons, Satellite recognizes this HTTP header only from localhost by default.
You can enter trusted proxies as valid IPv4 or IPv6 addresses of Capsules, or network ranges.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>Do not use a network range that is too broad because that might cause a security risk.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Enter the following command.
Note that the command overwrites the list that is currently stored in Satellite.
Therefore, if you have set any trusted proxies previously, you must include them in the command as well:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer \
--foreman-trusted-proxies "127.0.0.1/8" \
--foreman-trusted-proxies "::1" \
--foreman-trusted-proxies "<em>My_IP_address</em>" \
--foreman-trusted-proxies "<em>My_IP_range</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>The localhost entries are required, do not omit them.</p>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Verification</div>
<ol class="arabic">
<li>
<p>List the current trusted proxies using the full help of Satellite installer:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer --full-help | grep -A 2 "trusted-proxies"</pre>
</div>
</div>
</li>
<li>
<p>The current listing contains all trusted proxies you require.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="configuring-pull-based-transport-for-remote-execution_capsule"><a class="anchor" href="#configuring-pull-based-transport-for-remote-execution_capsule"></a>4.2. Configuring pull-based transport for remote execution</h3>
<div class="paragraph">
<p>By default, remote execution uses push-based SSH as the transport mechanism for the Script provider.
If your infrastructure prohibits outgoing connections from Capsule&#160;Server to hosts, you can use remote execution with pull-based transport instead, because the host initiates the connection to Capsule&#160;Server.
The use of pull-based transport is not limited to those infrastructures.</p>
</div>
<div class="paragraph">
<p>The pull-based transport comprises <code>pull-mqtt</code> mode on Capsules in combination with a pull client running on hosts.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>pull-mqtt</code> mode works only with the Script provider.
Ansible and other providers will continue to use their default transport settings.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The mode is configured per Capsule&#160;Server.
Some Capsule&#160;Servers can be configured to use <code>pull-mqtt</code> mode while others use SSH.
If this is the case, it is possible that one remote job on a given host will use the pull client and the next job on the same host will use SSH.
If you wish to avoid this scenario, configure all Capsule&#160;Servers to use the same mode.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Enable the pull-based transport on your Capsule&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer --foreman-proxy-plugin-remote-execution-script-mode pull-mqtt</pre>
</div>
</div>
</li>
<li>
<p>Configure the firewall to allow the MQTT service on port 1883:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd --add-service=mqtt</pre>
</div>
</div>
</li>
<li>
<p>Make the changes persistent:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd --runtime-to-permanent</pre>
</div>
</div>
</li>
<li>
<p>In <code>pull-mqtt</code> mode, hosts subscribe for job notifications to either your Satellite&#160;Server or any Capsule&#160;Server through which they are registered.
Ensure that Satellite&#160;Server sends remote execution jobs to that same Satellite&#160;Server or Capsule&#160;Server:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Satellite web UI, navigate to <strong>Administer</strong> &gt; <strong>Settings</strong>.</p>
</li>
<li>
<p>On the <strong>Content</strong> tab, set the value of <strong>Prefer registered through Capsule for remote execution</strong> to <strong>Yes</strong>.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Next steps</div>
<ul>
<li>
<p>Configure your hosts for the pull-based transport.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/managing_hosts/index#transport-modes-for-remote-execution_managing-hosts">Transport modes for remote execution</a> in <em>Managing hosts</em>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Adding_Lifecycle_Environments_capsule"><a class="anchor" href="#Adding_Lifecycle_Environments_capsule"></a>4.3. Adding lifecycle environments to Capsule&#160;Servers</h3>
<div class="paragraph">
<p>If your Capsule&#160;Server has the content functionality enabled, you must add an environment so that Capsule can synchronize content from Satellite&#160;Server and provide content to host systems.</p>
</div>
<div class="paragraph">
<p>Do not assign the <em>Library</em> lifecycle environment to your Capsule&#160;Server because it triggers an automated Capsule sync every time the CDN updates a repository.
This might consume multiple system resources on Capsules, network bandwidth between Satellite and Capsules, and available disk space on Capsules.</p>
</div>
<div class="paragraph">
<p>You can use Hammer CLI on Satellite&#160;Server or the Satellite web UI.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Capsules</strong>, and select the Capsule that you want to add a lifecycle to.</p>
</li>
<li>
<p>Click <strong>Edit</strong> and click the <strong>Lifecycle Environments</strong> tab.</p>
</li>
<li>
<p>From the left menu, select the lifecycle environments that you want to add to Capsule and click <strong>Submit</strong>.</p>
</li>
<li>
<p>To synchronize the content on the Capsule, click the <strong>Overview</strong> tab and click <strong>Synchronize</strong>.</p>
</li>
<li>
<p>Select either <strong>Optimized Sync</strong> or <strong>Complete Sync</strong>.</p>
<div class="paragraph">
<p>For definitions of each synchronization type, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/managing_content/index#Recovering_a_Corrupted_Repository_content-management">Recovering a Repository</a>.</p>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>To display a list of all Capsule&#160;Servers, on Satellite&#160;Server, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer capsule list</pre>
</div>
</div>
<div class="paragraph">
<p>Note the Capsule ID of the Capsule to which you want to add a lifecycle.</p>
</div>
</li>
<li>
<p>Using the ID, verify the details of your Capsule:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer capsule info \
--id <em>My_Capsule_ID</em></pre>
</div>
</div>
</li>
<li>
<p>To view the lifecycle environments available for your Capsule&#160;Server, enter the following command and note the ID and the organization name:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer capsule content available-lifecycle-environments \
--id <em>My_Capsule_ID</em></pre>
</div>
</div>
</li>
<li>
<p>Add the lifecycle environment to your Capsule&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer capsule content add-lifecycle-environment \
--id <em>My_Capsule_ID</em> \
--lifecycle-environment-id <em>My_Lifecycle_Environment_ID</em> \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>Repeat for each lifecycle environment you want to add to Capsule&#160;Server.</p>
</div>
</li>
<li>
<p>Synchronize the content from Satellite to Capsule.</p>
<div class="ulist">
<ul>
<li>
<p>To synchronize all content from your Satellite&#160;Server environment to Capsule&#160;Server, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer capsule content synchronize \
--id <em>My_Capsule_ID</em></pre>
</div>
</div>
</li>
<li>
<p>To synchronize a specific lifecycle environment from your Satellite&#160;Server to Capsule&#160;Server, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer capsule content synchronize \
--id <em>My_Capsule_ID</em> \
--lifecycle-environment-id <em>My_Lifecycle_Environment_ID</em></pre>
</div>
</div>
</li>
<li>
<p>To synchronize all content from your Satellite&#160;Server to your Capsule&#160;Server without checking metadata:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer capsule content synchronize \
--id <em>My_Capsule_ID</em> \
--skip-metadata-check true</pre>
</div>
</div>
<div class="paragraph">
<p>This equals selecting <strong>Complete Sync</strong> in the Satellite web UI.</p>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="enabling-power-management-on-hosts_capsule"><a class="anchor" href="#enabling-power-management-on-hosts_capsule"></a>4.4. Enabling power management on hosts</h3>
<div class="paragraph">
<p>To perform power management tasks on hosts using the intelligent platform management interface (IPMI) or a similar protocol, you must enable the baseboard management controller (BMC) module on Capsule&#160;Server.</p>
</div>
<div class="paragraph">
<p>Red&#160;Hat Satellite supports the following BMC providers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>freeipmi</code></p>
</li>
<li>
<p><code>ipmitool</code></p>
</li>
<li>
<p><code>redfish</code></p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Your host has a network interface of the BMC type.
Capsule&#160;Server uses this NIC to pass credentials to the host.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Enable the BMC module and select the default provider:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer \
--foreman-proxy-bmc "true" \
--foreman-proxy-bmc-default-provider "<em>freeipmi</em>"</pre>
</div>
</div>
</li>
<li>
<p>In the Satellite web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Subnets</strong>.</p>
</li>
<li>
<p>Select the subnet of your host.</p>
</li>
<li>
<p>On the <strong>Capsules</strong> tab, select your Capsule&#160;Server as <strong>BMC Capsule</strong>.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Next steps</div>
<ul>
<li>
<p>Configure a BMC interface on your host.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/managing_hosts/index#configuring-a-baseboard-management-controller-interface">Configuring a baseboard management controller (BMC) interface</a> in <em>Managing hosts</em>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="capsule-server-scalability-considerations_capsule"><a class="anchor" href="#capsule-server-scalability-considerations_capsule"></a>Appendix A: Capsule&#160;Server scalability considerations when managing Puppet clients</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Capsule&#160;Server scalability when managing Puppet clients depends on the number of CPUs, the run-interval distribution, and the number of Puppet managed resources.
Capsule&#160;Server has a limitation of 100 concurrent Puppet agents running at any single point in time.
Running more than 100 concurrent Puppet agents results in a 503 HTTP error.</p>
</div>
<div class="paragraph">
<p>For example, assuming that Puppet agent runs are evenly distributed with less than 100 concurrent Puppet agents running at any single point during a run-interval, a Capsule&#160;Server with 4 CPUs has a maximum of 1250&#8202;&#8211;&#8202;1600 Puppet clients with a moderate workload of 10 Puppet classes assigned to each Puppet client.
Depending on the number of Puppet clients required, the Satellite installation can scale out the number of Capsule&#160;Servers to support them.</p>
</div>
<div class="paragraph">
<p>If you want to scale your Capsule&#160;Server when managing Puppet clients, the following assumptions are made:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>There are no external Puppet clients reporting directly to your Satellite&#160;Server.</p>
</li>
<li>
<p>All other Puppet clients report directly to Capsule&#160;Servers.</p>
</li>
<li>
<p>There is an evenly distributed run-interval of all Puppet agents.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Deviating from the even distribution increases the risk of overloading Satellite&#160;Server.
The limit of 100 concurrent requests applies.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following table describes the scalability limits using the recommended 4 CPUs.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Puppet scalability using 4 CPUs</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Puppet Managed Resources per Host</th>
<th class="tableblock halign-left valign-top">Run-Interval Distribution</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3000&#8202;&#8211;&#8202;2500</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2400&#8202;&#8211;&#8202;2000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1700&#8202;&#8211;&#8202;1400</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The following table describes the scalability limits using the minimum 2 CPUs.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Puppet scalability using 2 CPUs</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Puppet Managed Resources per Host</th>
<th class="tableblock halign-left valign-top">Run-Interval Distribution</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1700&#8202;&#8211;&#8202;1450</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1500&#8202;&#8211;&#8202;1250</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">850&#8202;&#8211;&#8202;700</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated Sep 2025
</div>
</div>
<script>
;(function () { /*! Asciidoctor Tabs | Copyright (c) 2018-present Dan Allen | MIT License */
  'use strict'

  var config = (document.currentScript || {}).dataset || {}
  var forEach = Array.prototype.forEach

  init(document.querySelectorAll('.tabs'))

  function init (tabsBlocks) {
    if (!tabsBlocks.length) return
    forEach.call(tabsBlocks, function (tabs) {
      var syncIds = tabs.classList.contains('is-sync') ? {} : undefined
      var tablist = tabs.querySelector('.tablist ul')
      tablist.setAttribute('role', 'tablist')
      var start
      forEach.call(tablist.querySelectorAll('li'), function (tab, idx) {
        tab.tabIndex = -1
        tab.setAttribute('role', tab.classList.add('tab') || 'tab')
        var id, anchor, syncId
        if (!(id = tab.id) && (anchor = tab.querySelector('a[id]'))) {
          id = tab.id = anchor.parentNode.removeChild(anchor).id
        }
        var panel = id && tabs.querySelector('.tabpanel[aria-labelledby~="' + id + '"]')
        if (!panel) return idx ? undefined : toggleSelected(tab, true) // invalid state
        syncIds && (((syncId = tab.textContent.trim()) in syncIds) ? (syncId = undefined) : true) &&
          (syncIds[(tab.dataset.syncId = syncId)] = tab)
        idx || (syncIds && (start = { tab: tab, panel: panel })) ? toggleHidden(panel, true) : toggleSelected(tab, true)
        tab.setAttribute('aria-controls', panel.id)
        panel.setAttribute('role', 'tabpanel')
        var onClick = syncId === undefined ? activateTab : activateTabSync
        tab.addEventListener('click', onClick.bind({ tabs: tabs, tab: tab, panel: panel }))
      })
      if (!tabs.closest('.tabpanel')) {
        forEach.call(tabs.querySelectorAll('.tabpanel table.tableblock'), function (table) {
          var container = Object.assign(document.createElement('div'), { className: 'tablecontainer' })
          table.parentNode.insertBefore(container, table).appendChild(table)
        })
      }
      if (start) {
        var syncGroupId
        for (var i = 0, lst = tabs.classList, len = lst.length, className; i !== len; i++) {
          if (!(className = lst.item(i)).startsWith('data-sync-group-id=')) continue
          tabs.dataset.syncGroupId = syncGroupId = lst.remove(className) || className.slice(19).replace(/\u00a0/g, ' ')
          break
        }
        if (syncGroupId === undefined) tabs.dataset.syncGroupId = syncGroupId = Object.keys(syncIds).sort().join('|')
        var preferredSyncId = 'syncStorageKey' in config &&
          window[(config.syncStorageScope || 'local') + 'Storage'].getItem(config.syncStorageKey + '-' + syncGroupId)
        var tab = preferredSyncId && syncIds[preferredSyncId]
        tab && Object.assign(start, { tab: tab, panel: document.getElementById(tab.getAttribute('aria-controls')) })
        toggleSelected(start.tab, true) || toggleHidden(start.panel, false)
      }
    })
    onHashChange()
    toggleClassOnEach(tabsBlocks, 'is-loading', 'remove')
    window.setTimeout(toggleClassOnEach.bind(null, tabsBlocks, 'is-loaded', 'add'), 0)
    window.addEventListener('hashchange', onHashChange)
  }

  function activateTab (e) {
    var tab = this.tab
    var tabs = this.tabs || (this.tabs = tab.closest('.tabs'))
    var panel = this.panel || (this.panel = document.getElementById(tab.getAttribute('aria-controls')))
    querySelectorWithSiblings(tabs, '.tablist .tab', 'tab').forEach(function (el) {
      toggleSelected(el, el === tab)
    })
    querySelectorWithSiblings(tabs, '.tabpanel', 'tabpanel').forEach(function (el) {
      toggleHidden(el, el !== panel)
    })
    if (!this.isSync && 'syncStorageKey' in config && 'syncGroupId' in tabs.dataset) {
      var storageKey = config.syncStorageKey + '-' + tabs.dataset.syncGroupId
      window[(config.syncStorageScope || 'local') + 'Storage'].setItem(storageKey, tab.dataset.syncId)
    }
    if (!e) return
    var loc = window.location
    var hashIdx = loc.hash ? loc.href.indexOf('#') : -1
    if (~hashIdx) window.history.replaceState(null, '', loc.href.slice(0, hashIdx))
    e.preventDefault()
  }

  function activateTabSync (e) {
    activateTab.call(this, e)
    var thisTabs = this.tabs
    var thisTab = this.tab
    var initialY = thisTabs.getBoundingClientRect().y
    forEach.call(document.querySelectorAll('.tabs'), function (tabs) {
      if (tabs === thisTabs || tabs.dataset.syncGroupId !== thisTabs.dataset.syncGroupId) return
      querySelectorWithSiblings(tabs, '.tablist .tab', 'tab').forEach(function (tab) {
        if (tab.dataset.syncId === thisTab.dataset.syncId) activateTab.call({ tabs: tabs, tab: tab, isSync: true })
      })
    })
    var shiftedBy = thisTabs.getBoundingClientRect().y - initialY
    if (shiftedBy && (shiftedBy = Math.round(shiftedBy))) window.scrollBy({ top: shiftedBy, behavior: 'instant' })
  }

  function querySelectorWithSiblings (scope, selector, siblingClass) {
    var el = scope.querySelector(selector)
    if (!el) return []
    var result = [el]
    while ((el = el.nextElementSibling) && el.classList.contains(siblingClass)) result.push(el)
    return result
  }

  function toggleClassOnEach (elements, className, method) {
    forEach.call(elements, function (el) {
      el.classList[method](className)
    })
  }

  function toggleHidden (el, state) {
    el.classList[(el.hidden = state) ? 'add' : 'remove']('is-hidden')
  }

  function toggleSelected (el, state) {
    el.setAttribute('aria-selected', '' + state)
    el.classList[state ? 'add' : 'remove']('is-selected')
    el.tabIndex = state ? 0 : -1
  }

  function onHashChange () {
    var id = window.location.hash.slice(1)
    if (!id) return
    var tab = document.getElementById(~id.indexOf('%') ? decodeURIComponent(id) : id)
    if (!(tab && tab.classList.contains('tab'))) return
    'syncId' in tab.dataset ? activateTabSync.call({ tab: tab }) : activateTab.call({ tab: tab })
  }
})()
</script>
</body>
</html>