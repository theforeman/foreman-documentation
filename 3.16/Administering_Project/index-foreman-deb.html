<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.24">
<title>Administering Foreman</title>
<style>
﻿*,::before,::after{box-sizing:border-box}html{font-size:100%;-webkit-text-size-adjust:100%}body{background:#fff;color:rgba(0,0,0,0.8);padding:0;margin:0;font-family:"Noto Serif", "DejaVu Serif", serif;font-size:inherit;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,p,blockquote,th,td{margin:0;padding:0}a{background:none;color:#2156a5;text-decoration:underline;line-height:inherit}a:active,a:hover{cursor:pointer;outline:0}a:focus{outline:thin dotted}a:hover,a:focus{color:#1d4b8f}abbr{font-size:0.9em}abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}b,strong{font-weight:bold;line-height:inherit}strong strong{font-weight:400}code,kbd,pre{font-family:"Droid Sans Mono", "DejaVu Sans Mono", monospace;font-size:1em}code{font-weight:400;color:rgba(0,0,0,0.9)}pre{color:rgba(0,0,0,0.9);line-height:1.45;text-rendering:optimizeSpeed;white-space:pre-wrap}dfn{font-style:italic}em,i{font-style:italic;line-height:inherit}em em{font-style:normal}hr{border:solid #dddddf;border-width:1px 0 0;clear:both;height:0;margin:1.25em 0 1.1875em}mark{background:#ff0;color:#000}p{line-height:1.6;margin-bottom:1.25rem;text-rendering:optimizeLegibility}q{quotes:"“" "”" "‘" "’"}small{font-size:60%;line-height:inherit}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-0.5em}sub{bottom:-0.25em}img,object[type^="image/"],svg{display:inline-block;height:auto;max-width:100%;vertical-align:middle}img{border:0;-ms-interpolation-mode:bicubic}object{max-width:100%}svg:not(:root){overflow:hidden}figure{margin:0}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}.left{float:left !important}.right{float:right !important}.text-left{text-align:left !important}.text-right{text-align:right !important}.text-center{text-align:center !important}.text-justify{text-align:justify !important}.hide{display:none}.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:0.25em}p aside{font-size:.875em;line-height:1.35;font-style:italic}h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans", "DejaVu Sans", sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.2;word-spacing:-0.05em}h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{color:#e99b8f;line-height:0}h1{font-size:2.125em}h2{font-size:1.6875em}h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}h4,h5{font-size:1.125em}h6{font-size:1em}ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}ul,ol{margin-left:1.5em}ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}ul.square{list-style-type:square}ul.circle{list-style-type:circle}ul.disc{list-style-type:disc}ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}dl dt{margin-bottom:.3125em;font-weight:bold}dl dd{margin-bottom:1.25em;margin-left:1.125em}blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,0.85)}@media screen and (min-width: 768px){h1{font-size:2.75em}h2{font-size:2.3125em}h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}h4{font-size:1.4375em}}table{background:#fff;border:1px solid #dedede;border-collapse:collapse;border-spacing:0;margin-bottom:1.25em;word-wrap:normal}table thead,table tfoot{background:#f7f8f7}table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,0.8);text-align:left}table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,0.8)}table tr.even,table tr.alt{background:#f8f8f7}table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}.center{margin-left:auto;margin-right:auto}.stretch{width:100%}.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:"";display:table}.clearfix::after,.float-group::after{clear:both}:not(pre).nobreak{word-wrap:normal}:not(pre).nowrap{white-space:nowrap}:not(pre).pre-wrap{white-space:pre-wrap}:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal !important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}pre>code{display:block}pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}.keyseq{color:rgba(51,51,51,0.8)}kbd{display:inline-block;color:rgba(0,0,0,0.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,0.2),inset 0 0 0 0.1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}.keyseq kbd:first-child{margin-left:0}.keyseq kbd:last-child{margin-right:0}.menuseq,.menuref{color:#000}.menuseq b:not(.caret),.menuref{font-weight:inherit}.menuseq{word-spacing:-0.02em}.menuseq b.caret{font-size:1.25em;line-height:0.8}.menuseq i.caret{font-weight:bold;text-align:center;width:0.45em}b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}b.button::before{content:"[";padding:0 3px 0 2px}b.button::after{content:"]";padding:0 2px 0 3px}p a>code:hover{color:rgba(0,0,0,0.9)}body>div[id]{margin:0 auto;max-width:62.5em;position:relative;padding-left:.9375em;padding-right:0.9375em}body>div[id]::before,body>div[id]::after,#content #footnotes::before{content:"";display:table;clear:both}#content{margin-top:1.25em;margin-bottom:0.625em}#content::before{content:none}#header>h1:first-child{color:rgba(0,0,0,0.85);margin-top:2.25rem;margin-bottom:0}#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,0.6);display:flex;flex-flow:row wrap}#header .details span:first-child{margin-left:-0.125em}#header .details span.email a{color:rgba(0,0,0,0.85)}#header .details br{display:none}#header .details br+span::before{content:" – "}#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,0.85)}#header .details br+span#revremark::before{content:" | "}#header #revnumber{text-transform:capitalize}#header #revnumber::after{content:" "}#content>h1:first-child:not([class]){color:rgba(0,0,0,0.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}#toc{border-bottom:1px solid #e7e7e9;padding-bottom:0.5em}#toc>ul{margin-left:0.125em}#toc ul.sectlevel0>li>a{font-style:italic}#toc ul.sectlevel0 ul.sectlevel1{margin:0.5em 0}#toc ul{font-family:"Open Sans", "DejaVu Sans", sans-serif;list-style-type:none}#toc li{line-height:1.3334;margin-top:0.3334em}#toc a{text-decoration:none}#toc a:active{text-decoration:underline}#toctitle{color:#7a2518;font-size:1.2em}@media screen and (min-width: 768px){#toctitle{font-size:1.375em}body.toc2{padding-left:15em;padding-right:0}#toc.toc2{margin-top:0 !important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0 !important;border-bottom-width:0 !important;z-index:1000;padding:1.25em 1em;height:calc(100% - (70px + 2.5em));overflow:auto}#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}#toc.toc2>ul{font-size:.9em;margin-bottom:0}#toc.toc2 ul ul{margin-left:0;padding-left:1em}#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:0.5em}body.toc2.toc-right{padding-left:0;padding-right:15em}body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}@media screen and (min-width: 1280px){body.toc2{padding-left:20em;padding-right:0}#toc.toc2{width:20em}#toc.toc2 #toctitle{font-size:1.375em}#toc.toc2>ul{font-size:0.95em}#toc.toc2 ul ul{padding-left:1.25em}body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}#content #toc>:first-child{margin-top:0}#content #toc>:last-child{margin-bottom:0}#footer{max-width:none;background:#025d8c;padding:1.25em;margin-left:2em}#footer-text{color:rgba(255,255,255,0.8);line-height:1.44}h1:before,h2:before,h3:before,h4:before,h5:before,h6:before,div.title:before{display:block;content:" ";height:90px;margin-top:-90px;visibility:hidden}.sect1{padding-bottom:0.625em}@media screen and (min-width: 768px){#content{margin-bottom:1.25em}.sect1{padding-bottom:1.25em}}.sect1:last-child{padding-bottom:0}.sect1+.sect1{border-top:1px solid #e7e7e9}#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none !important;visibility:hidden;text-align:center;font-weight:400}#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:0.1em}#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}details{margin-left:1.25rem}details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}details>summary::-webkit-details-marker{display:none}details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif", "DejaVu Serif", serif;font-size:1rem;font-style:italic}table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,0.85)}.admonitionblock>table{border-collapse:separate;border:1;background:none;width:100%}.admonitionblock>table td.icon{text-align:center;width:80px}.admonitionblock>table td.icon img{max-width:none}.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans", "DejaVu Sans", sans-serif;text-transform:uppercase}.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,0.6);word-wrap:anywhere}.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}.exampleblock>.content{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#fffef7;border-radius:4px;box-shadow:0 1px 4px #e0e0dc}.exampleblock>.content>:first-child{margin-top:0}.exampleblock>.content>:last-child{margin-bottom:0}.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}.sidebarblock>:first-child{margin-top:0}.sidebarblock>:last-child{margin-bottom:0}.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:0.8125em}@media screen and (min-width: 768px){.literalblock pre,.listingblock>.content>pre{font-size:0.90625em}}@media screen and (min-width: 1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,0.9)}.listingblock>.content{position:relative}.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:0.5}.listingblock:hover code[data-lang]::before{display:block}.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:0.5}.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}.listingblock pre.highlightjs{padding:0}.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}.listingblock pre.prettyprint{border-width:0}.prettyprint{background:#f7f7f8}pre.prettyprint .linenums{line-height:1.45;margin-left:2em}pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}pre.prettyprint li code[data-lang]::before{opacity:1}pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}table.linenotable td.code{padding-left:0.75em}table.linenotable td.linenos{width:0.01%}table.linenotable td.linenos,pre.pygments .linenos,pre.rouge .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}pre.pygments span.linenos,pre.rouge span.linenos{display:inline-block;margin-right:0.75em}.quoteblock{margin:0 1em 1.25em 1.5em;display:table}.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:0.75em}.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,0.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}.quoteblock blockquote{margin:0;padding:0;border:0}.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,0.1)}.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}.verseblock{margin:0 1em 1.25em}.verseblock pre{font-family:"Open Sans", "DejaVu Sans", sans-serif;font-size:1.15rem;color:rgba(0,0,0,0.85);font-weight:300;text-rendering:optimizeLegibility}.verseblock pre strong{font-weight:400}.verseblock .attribution{margin-top:1.25rem;margin-left:0.5ex}.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}.quoteblock .attribution br,.verseblock .attribution br{display:none}.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,0.6)}.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}.quoteblock.abstract{margin:0 1em 1.25em;display:block}.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:0.25em solid #dddddf}.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}p.tableblock:last-child{margin-bottom:0}td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}td.tableblock>.content>:last-child{margin-bottom:-1.25em}table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}table.grid-all>*>tr>*{border-width:1px}table.grid-cols>*>tr>*{border-width:0 1px}table.grid-rows>*>tr>*{border-width:1px 0}table.frame-all{border-width:1px}table.frame-ends{border-width:1px 0}table.frame-sides{border-width:0 1px}table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}th.halign-left,td.halign-left{text-align:left}th.halign-right,td.halign-right{text-align:right}th.halign-center,td.halign-center{text-align:center}th.valign-top,td.valign-top{vertical-align:top}th.valign-bottom,td.valign-bottom{vertical-align:bottom}th.valign-middle,td.valign-middle{vertical-align:middle}table thead th,table tfoot th{font-weight:bold}tbody tr th{background:#f7f8f7}tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,0.8);font-weight:bold}p.tableblock>code:only-child{background:none;padding:0}p.tableblock{font-size:1em}ol{margin-left:1.75em}ul li ol{margin-left:1.5em}dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:0.625em}ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:0.625em}ul.unstyled,ol.unstyled{margin-left:0}li>p:empty:only-child::before{content:"";display:inline-block}ul.checklist>li>p:first-child{margin-left:-1em}ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:0.125em}ul.checklist>li>p:first-child>input[type=checkbox]:first-child{font:inherit;margin:0 .25em 0 0;padding:0}ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 0.625em -1.25em}ul.inline>li{margin-left:1.25em}.unstyled dl dt{font-weight:400;font-style:normal}ol.arabic{list-style-type:decimal}ol.decimal{list-style-type:decimal-leading-zero}ol.loweralpha{list-style-type:lower-alpha}ol.upperalpha{list-style-type:upper-alpha}ol.lowerroman{list-style-type:lower-roman}ol.upperroman{list-style-type:upper-roman}ol.lowergreek{list-style-type:lower-greek}.hdlist>table,.colist>table{border:0;background:none}.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}td.hdlist1,td.hdlist2{vertical-align:top;padding:0 0.625em}td.hdlist1{font-weight:bold;padding-bottom:1.25em}td.hdlist2{word-wrap:anywhere}.literalblock+.colist,.listingblock+.colist{margin-top:-0.5em}.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}.colist td:not([class]):first-child img{max-width:none}.colist td:not([class]):last-child{padding:0.25em 0}.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}.imageblock.left{margin:0.25em 0.625em 1.25em 0}.imageblock.right{margin:0.25em 0 1.25em 0.625em}.imageblock>.title{margin-bottom:0}.imageblock.thumb,.imageblock.th{border-width:6px}.imageblock.thumb>.title,.imageblock.th>.title{padding:0 0.125em}.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}.image.left{margin-right:0.625em}.image.right{margin-left:0.625em}a.image{text-decoration:none;display:inline-block}a.image object{pointer-events:none}sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}sup.footnote a,sup.footnoteref a{text-decoration:none}sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:0.625em}#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:0.2em}#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}#footnotes .footnote:last-of-type{margin-bottom:0}#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:0.75em 0}div.page-break{display:none}div.unbreakable{page-break-inside:avoid}.big{font-size:larger}.small{font-size:smaller}.underline{text-decoration:underline}.overline{text-decoration:overline}.line-through{text-decoration:line-through}.aqua{color:#00bfbf}.aqua-background{background:#00fafa}.black{color:#000}.black-background{background:#000}.blue{color:#0000bf}.blue-background{background:#0000fa}.fuchsia{color:#bf00bf}.fuchsia-background{background:#fa00fa}.gray{color:#606060}.gray-background{background:#7d7d7d}.green{color:#006000}.green-background{background:#007d00}.lime{color:#00bf00}.lime-background{background:#00fa00}.maroon{color:#600000}.maroon-background{background:#7d0000}.navy{color:#000060}.navy-background{background:#00007d}.olive{color:#606000}.olive-background{background:#7d7d00}.purple{color:#600060}.purple-background{background:#7d007d}.red{color:#bf0000}.red-background{background:#fa0000}.silver{color:#909090}.silver-background{background:#bcbcbc}.teal{color:#006060}.teal-background{background:#007d7d}.white{color:#bfbfbf}.white-background{background:#fafafa}.yellow{color:#bfbf00}.yellow-background{background:#fafa00}span.icon>.fa{cursor:default}a span.icon>.fa{cursor:inherit}.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,0.5);cursor:default}.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,0.8);color:#111}.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}.conum[data-value]{display:inline-block;color:#fff !important;background:rgba(0,0,0,0.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans", "DejaVu Sans", sans-serif;font-style:normal;font-weight:bold}.conum[data-value] *{color:#fff !important}.conum[data-value]+b{display:none}.conum[data-value]::after{content:attr(data-value)}pre .conum[data-value]{position:relative;top:-0.125em}b.conum *{color:inherit !important}.conum:not([data-value]):empty{display:none}dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}h1,h2,p,td.content,span.alt,summary{letter-spacing:-0.01em}p strong,td.content strong,div.footnote strong{letter-spacing:-0.005em}p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}.print-only{display:none !important}@page{margin:1.25cm 0.75cm}@media print{*{box-shadow:none !important;text-shadow:none !important}html{font-size:80%}a{color:inherit !important;text-decoration:underline !important}a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none !important}a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:0.25em}abbr[title]{border-bottom:1px dotted}abbr[title]::after{content:" (" attr(title) ")"}pre,blockquote,tr,img,object,svg{page-break-inside:avoid}thead{display:table-header-group}p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}body>div[id]{max-width:none}#toc,.sidebarblock,.exampleblock>.content{background:none !important}#toc{border-bottom:1px solid #dddddf !important;padding-bottom:0 !important}body.book #header{text-align:center}body.book #header>h1:first-child{border:0 !important;margin:2.5em 0 1em}body.book #header .details{border:0 !important;display:block;padding:0 !important}body.book #header .details span:first-child{margin-left:0 !important}body.book #header .details br{display:block}body.book #header .details br+span::before{content:none !important}body.book #toc{border:0 !important;text-align:left !important;padding:0 !important;margin:0 !important}body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}.listingblock code[data-lang]::before{display:block}div.page-break{display:block;page-break-after:always}#footer{padding:0 0.9375em}.hide-on-print{display:none !important}.print-only{display:block !important}.hide-for-print{display:none !important}.show-for-print{display:inherit !important}}@media amzn-kf8, print{#header>h1:first-child{margin-top:1.25rem}.sect1{padding:0 !important}.sect1+.sect1{border:0}#footer{background:none}#footer-text{color:rgba(0,0,0,0.6);font-size:0.9em}}@media amzn-kf8{body>div[id]{padding:0}}body{padding:0;margin:0;margin-top:70px !important}.container{position:relative;z-index:1;padding-top:50px;min-height:100%}.container p{font-family:sans-serif;font-size:1.2em}nav{position:fixed;z-index:9999;left:0;right:0;top:0;height:70px;padding:0 1.5em;background-color:#025d8c;font-family:sans-serif;line-height:70px}nav .logo{width:50px}nav .nav-heading{color:#fff;font-family:ostrich-black;font-size:1.8em;padding:0.5em;vertical-align:sub}nav .nav-logo-heading{text-decoration:none}nav .nav-menu{position:absolute;right:0.3em;top:0;padding:0;margin:0;list-style:none}nav .nav-item{display:inline-block}nav .nav-item>a{display:inline-block;padding:0 2.5em;line-height:70px;color:#fff;text-decoration:none}nav .dropdown{position:relative}nav .dropdown a::after{content:"";display:inline-block;margin-left:0.5em;vertical-align:middle;border-top:0.3em solid #fff;border-right:0.3em solid transparent;border-left:0.3em solid transparent}nav .dropdown.show a::after{transform:rotate(180deg)}nav .dropdown-menu{display:none;position:absolute;left:0;right:0;top:100%;padding:0.5em 0;margin-top:-0.5em;border:1px solid rgba(0,0,0,0.3);border-radius:0.5em;background-color:#fff;width:max-content;max-height:80vh;overflow:scroll}nav .dropdown-menu-left{left:auto;right:0}nav .dropdown.show .dropdown-menu{display:block}nav .dropdown-div{display:block;padding:0.4em 0;line-height:4em}nav .dropdown-div a::after{content:none;margin-left:0;border-top:0;border-right:0;border-left:0}nav .dropdown-item{display:block;padding:0 1.5em;font-size:0.875em;color:#000;line-height:1.6em;text-decoration:none}nav .btn-hamburger{display:none;position:absolute;right:1.5em;top:50%;background-color:transparent;border:0;cursor:pointer;outline:none;transform:translateY(-50%)}nav .btn-hamburger span{display:block;width:30px;height:4px;background-color:#fff;margin:6px;border-radius:2px;transition:0.3s ease-in-out}nav .btn-hamburger span:nth-child(4),nav .btn-hamburger span:nth-child(5){position:absolute;top:10px;opacity:0.5}nav .btn-hamburger span:nth-child(4){transform:rotate(45deg) scale(0)}nav .btn-hamburger span:nth-child(5){transform:rotate(-45deg) scale(0)}nav.opened .btn-hamburger span:nth-child(4){opacity:1;transform:rotate(45deg) scale(1)}nav.opened .btn-hamburger span:nth-child(5){opacity:1;transform:rotate(-45deg) scale(1)}nav.opened .btn-hamburger span:nth-child(1),nav.opened .btn-hamburger span:nth-child(2),nav.opened .btn-hamburger span:nth-child(3){opacity:0}@media screen and (max-width: 768px){nav .nav-menu{position:fixed;left:0;right:0;top:70px;bottom:100%;display:flex;flex-direction:column;justify-content:start;background-color:#363d4e;transition:bottom 0.5s ease-in-out;overflow:hidden}nav.opened .nav-menu{bottom:0}nav .nav-item>a{display:block}nav .dropdown-menu{position:relative;top:0;margin:0 1.5em}nav .btn-hamburger{display:block}}@font-face{font-family:ostrich-black;src:url("../ostrich-black.ttf") format("truetype")}/*!
* "Fork me on GitHub" CSS ribbon v0.2.3 | MIT License
* https://github.com/simonwhitaker/github-fork-ribbon-css

The MIT License (MIT)

Copyright (c) 2013 Simon Whitaker

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/.github-fork-ribbon,.release-ribbon,.issue-ribbon{width:12.1em;height:12.1em;position:absolute;overflow:hidden;top:70px;right:0;z-index:9998;pointer-events:none;font-size:13px;text-decoration:none;text-indent:-999999px}.github-fork-ribbon.fixed,.fixed.release-ribbon,.fixed.issue-ribbon{position:fixed}.github-fork-ribbon:hover,.release-ribbon:hover,.issue-ribbon:hover,.github-fork-ribbon:active,.release-ribbon:active,.issue-ribbon:active{background-color:transparent}.github-fork-ribbon:before,.release-ribbon:before,.issue-ribbon:before,.github-fork-ribbon:after,.release-ribbon:after,.issue-ribbon:after{position:absolute;display:block;width:15.38em;height:1.54em;top:3.23em;right:-3.23em;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.github-fork-ribbon:before,.release-ribbon:before,.issue-ribbon:before{content:"";padding:.38em 0;background-color:#a00;background-image:-webkit-gradient(linear, left top, left bottom, from(transparent), to(rgba(0,0,0,0.15)));background-image:-webkit-linear-gradient(top, transparent, rgba(0,0,0,0.15));background-image:-moz-linear-gradient(top, transparent, rgba(0,0,0,0.15));background-image:-ms-linear-gradient(top, transparent, rgba(0,0,0,0.15));background-image:-o-linear-gradient(top, transparent, rgba(0,0,0,0.15));background-image:linear-gradient(to bottom, transparent, rgba(0,0,0,0.15));-webkit-box-shadow:0 0.15em 0.23em 0 rgba(0,0,0,0.5);-moz-box-shadow:0 0.15em 0.23em 0 rgba(0,0,0,0.5);box-shadow:0 0.15em 0.23em 0 rgba(0,0,0,0.5);pointer-events:auto}.github-fork-ribbon:after,.release-ribbon:after,.issue-ribbon:after{content:attr(data-ribbon);color:#fff;font:700 1em "Helvetica Neue", Helvetica, Arial, sans-serif;line-height:1.54em;text-decoration:none;text-shadow:0 -0.08em rgba(0,0,0,0.5);text-align:center;text-indent:0;padding:.15em 0;margin:.15em 0;border-width:.08em 0;border-style:dotted;border-color:#fff;border-color:rgba(255,255,255,0.7)}.github-fork-ribbon.left-top,.left-top.release-ribbon,.left-top.issue-ribbon,.github-fork-ribbon.left-bottom,.left-bottom.release-ribbon,.left-bottom.issue-ribbon{right:auto;left:0}.github-fork-ribbon.left-bottom,.left-bottom.release-ribbon,.left-bottom.issue-ribbon,.github-fork-ribbon.right-bottom,.right-bottom.release-ribbon,.right-bottom.issue-ribbon{top:auto;bottom:0}.github-fork-ribbon.left-top:before,.left-top.release-ribbon:before,.left-top.issue-ribbon:before,.github-fork-ribbon.left-top:after,.left-top.release-ribbon:after,.left-top.issue-ribbon:after,.github-fork-ribbon.left-bottom:before,.left-bottom.release-ribbon:before,.left-bottom.issue-ribbon:before,.github-fork-ribbon.left-bottom:after,.left-bottom.release-ribbon:after,.left-bottom.issue-ribbon:after{right:auto;left:-3.23em}.github-fork-ribbon.left-bottom:before,.left-bottom.release-ribbon:before,.left-bottom.issue-ribbon:before,.github-fork-ribbon.left-bottom:after,.left-bottom.release-ribbon:after,.left-bottom.issue-ribbon:after,.github-fork-ribbon.right-bottom:before,.right-bottom.release-ribbon:before,.right-bottom.issue-ribbon:before,.github-fork-ribbon.right-bottom:after,.right-bottom.release-ribbon:after,.right-bottom.issue-ribbon:after{top:auto;bottom:3.23em}.github-fork-ribbon.left-top:before,.left-top.release-ribbon:before,.left-top.issue-ribbon:before,.github-fork-ribbon.left-top:after,.left-top.release-ribbon:after,.left-top.issue-ribbon:after,.github-fork-ribbon.right-bottom:before,.right-bottom.release-ribbon:before,.right-bottom.issue-ribbon:before,.github-fork-ribbon.right-bottom:after,.right-bottom.release-ribbon:after,.right-bottom.issue-ribbon:after{-webkit-transform:rotate(-45deg);-moz-transform:rotate(-45deg);-ms-transform:rotate(-45deg);-o-transform:rotate(-45deg);transform:rotate(-45deg)}.release-ribbon:before{background-color:#a00}.issue-ribbon:before{background-color:#025d8c}@media screen{div.narrow{max-width:1080px;margin:0 auto !important;margin-top:70px auto !important;float:none !important}#toc.toc2{margin-top:70px !important}}

</style>
<!-- Generate a nice TOC -->
<script src="/js/jquery-1.11.3.min.js"></script>
<script src="/js/jquery-ui.min.js"></script>
<script src="/js/jquery.tocify.min.js"></script>
<!-- We do not need the tocify CSS because the asciidoc CSS already provides most of what we need -->

<style>
.tocify-header {
    /* font-style: italic; */
}

.tocify-subheader {
    font-style: normal;
    font-size: 95%;
}

.tocify ul {
    margin: 0;
 }

.tocify-focus {
    /* background-color: rgba(0, 0, 0, 0.05);*/
}

.tocify-focus > a {
    color: #ba3925;
}
</style>

<script type="text/javascript">
    $(function () {
        // Add a new container for the tocify toc into the existing toc so we can re-use its
        // styling
        $("#toc").append("<div id='generated-toc'></div>");
        $("#generated-toc").tocify({
            extendPage: true,
            context: "#content",
            highlightOnScroll: true,
            hideEffect: "slideUp",
            // Use the IDs that asciidoc already provides so that TOC links and intra-document
            // links are the same. Anything else might confuse users when they create bookmarks.
            hashGenerator: function(text, element) {
                return $(element).attr("id");
            },
            // Smooth scrolling doesn't work properly if we use the asciidoc IDs
            smoothScroll: false,
            // Set to 'none' to use the tocify classes
            theme: "none",
            // Handle book (may contain h1) and article (only h2 deeper)
            selectors: $( "#content" ).has( "h1" ).size() > 0 ? "h1,h2,h3,h4,h5" : "h2,h3,h4,h5",
            ignoreSelector: ".discrete"
        });

        // Switch between static asciidoc toc and dynamic tocify toc based on browser size
        // This is set to match the media selectors in the asciidoc CSS
        // Without this, we keep the dynamic toc even if it is moved from the side to preamble
        // position which will cause odd scrolling behavior
        var handleTocOnResize = function() {
            if ($(document).width() < 768) {
                $("#generated-toc").hide();
                $(".sectlevel0").show();
                $(".sectlevel1").show();
            }
            else {
                $("#generated-toc").show();
                $(".sectlevel0").hide();
                $(".sectlevel1").hide();
            }
        }

        $(window).resize(handleTocOnResize);
        handleTocOnResize();
    });
</script>
<style>
/*! Asciidoctor Tabs | Copyright (c) 2018-present Dan Allen | MIT License */
.tabs {
  margin-bottom: 1.25em;
}

.tablist > ul {
  display: flex;
  flex-wrap: wrap;
  list-style: none;
  margin: 0;
  padding: 0;
}

.tablist > ul li {
  align-items: center;
  background-color: #fff;
  cursor: pointer;
  display: flex;
  font-weight: bold;
  line-height: 1.5;
  padding: 0.25em 1em;
  position: relative;
}

.tablist > ul li:focus-visible {
  outline: none;
}

.tablist.ulist,
.tablist.ulist > ul li {
  margin: 0;
}

.tablist.ulist > ul li + li {
  margin-left: 0.25em;
}

.tabs .tablist li::after {
  content: "";
  display: block;
  height: 1px;
  position: absolute;
  bottom: -1px;
  left: 0;
  right: 0;
}

.tabs.is-loading .tablist li:not(:first-child),
.tabs:not(.is-loading) .tablist li:not(.is-selected) {
  background-color: #f5f5f5;
}

.tabs.is-loading .tablist li:first-child::after,
.tabs:not(.is-loading) .tablist li.is-selected::after {
  background-color: #fff;
}

/*
.tabs:not(.is-loading) .tablist li,
.tabs:not(.is-loading) .tablist li::after {
  transition: background-color 200ms ease-in-out;
}
*/

.tablist > ul p {
  line-height: inherit;
  margin: 0;
}

.tabpanel {
  background-color: #fff;
  padding: 1.25em;
}

.tablist > ul li,
.tabpanel {
  border: 1px solid #dcdcdc;
}

.tablist > ul li {
  border-bottom: 0;
}

.tabs.is-loading .tabpanel + .tabpanel,
.tabs:not(.is-loading) .tabpanel.is-hidden {
  display: none;
}

.tabpanel > :first-child {
  margin-top: 0;
}

/* #content is a signature of the Asciidoctor standalone HTML output */
#content .tabpanel > :last-child,
#content .tabpanel > :last-child > :last-child,
#content .tabpanel > :last-child > :last-child > li:last-child > :last-child {
  margin-bottom: 0;
}

.tablecontainer {
  overflow-x: auto;
}

#content .tablecontainer {
  margin-bottom: 1.25em;
}

#content .tablecontainer > table.tableblock {
  margin-bottom: 0;
}
</style>
</head>
<body class="book toc2 toc-left">
    <div id="wrap">
      <script src="/js/versions.js"></script>
      <script src="/js/nav.js"></script>
      <script>
        document.open();
        document.write(buildNavigation());
        addNavbarListeners();
        document.close();
      </script>
    </div>
<div id="header">
<h1>Administering Foreman</h1>
<div class="details">
<span id="revnumber">version 3.16,</span>
<span id="revdate">published Oct 16 2025</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#Starting_and_Stopping_Server_admin">1. Starting and stopping Foreman</a></li>
<li><a href="#Migrating_from_Internal_Databases_to_External_Databases_admin">2. Migrating from internal Foreman databases to external databases</a>
<ul class="sectlevel2">
<li><a href="#postgresql-as-an-external-database-considerations_admin">2.1. PostgreSQL as an external database considerations</a></li>
<li><a href="#installing-postgresql_admin">2.2. Installing PostgreSQL</a></li>
<li><a href="#migrating-to-external-databases_admin">2.3. Migrating to external databases</a></li>
</ul>
</li>
<li><a href="#preparing-for-disaster-recovery-and-recovering-from-data-loss">3. Preparing for disaster recovery and recovering from data loss</a>
<ul class="sectlevel2">
<li><a href="#overview-of-recommended-disaster-recovery-plans">3.1. Overview of recommended disaster recovery plans</a></li>
<li><a href="#disaster-recovery-by-virtualizing-your-foreman-server">3.2. Disaster recovery by virtualizing your Foreman&#160;server</a>
<ul class="sectlevel3">
<li><a href="#prerequisites-disaster-recovery-by-virtualizing-foreman-server">3.2.1. Prerequisites</a></li>
<li><a href="#preparing-for-disaster-recovery-by-virtualizing-your-foreman-server">3.2.2. Preparing for disaster recovery by virtualizing your Foreman&#160;server</a></li>
<li><a href="#recovering-from-disaster-by-restoring-a-vm-snapshot-of-foreman-server">3.2.3. Recovering from disaster by restoring a VM snapshot of Foreman&#160;server</a></li>
<li><a href="#Retrieving_the_Status_of_Services_dr-virt">3.2.4. Retrieving the status of services</a></li>
</ul>
</li>
<li><a href="#disaster-recovery-for-active-and-passive-foreman-server-with-external-storage">3.3. Disaster recovery for active and passive Foreman&#160;server with external storage</a>
<ul class="sectlevel3">
<li><a href="#prerequisites-disaster-recovery-with-active-and-passive-project-server-and-external-storage">3.3.1. Prerequisites</a></li>
<li><a href="#preparing-for-disaster-recovery-with-active-and-passive-project-server-with-external-storage">3.3.2. Preparing for disaster recovery with active and passive Foreman&#160;server with external storage</a></li>
<li><a href="#recovering-from-disaster-with-active-and-passive-server-with-external-storage">3.3.3. Recovering from disaster with active and passive server with external storage</a></li>
<li><a href="#Retrieving_the_Status_of_Services_dr-storage">3.3.4. Retrieving the status of services</a></li>
</ul>
</li>
<li><a href="#disaster-recovery-for-active-and-passive-foreman-server-with-backup-and-restore">3.4. Disaster recovery for active and passive Foreman&#160;server with backup and restore</a>
<ul class="sectlevel3">
<li><a href="#prerequisites-disaster-recovery-with-active-and-passive-project-server-and-backup-and-restore">3.4.1. Prerequisites</a></li>
<li><a href="#preparing-for-disaster-recovery-with-active-and-passive-project-server-and-backup-and-restore">3.4.2. Preparing for disaster recovery with active and passive Foreman&#160;server and backup and restore</a></li>
<li><a href="#recovering-from-disaster-with-active-and-passive-server-and-backup-and-restore">3.4.3. Recovering from disaster with active and passive server and backup and restore</a></li>
<li><a href="#Retrieving_the_Status_of_Services_dr-backup-restore">3.4.4. Retrieving the status of services</a></li>
<li><a href="#Example_of_a_Weekly_Full_Backup_Followed_by_Daily_Incremental_Backups_dr-backup-restore">3.4.5. Example of a weekly full backup followed by daily incremental backups</a></li>
</ul>
</li>
<li><a href="#disaster-recovery-with-two-active-foreman-servers">3.5. Disaster recovery with two active Foreman&#160;servers</a>
<ul class="sectlevel3">
<li><a href="#prerequisites-disaster-recovery-with-two-active-project-servers">3.5.1. Prerequisites</a></li>
<li><a href="#preparing-for-disaster-recovery-with-two-active-project-servers">3.5.2. Preparing for disaster recovery with two active Foreman&#160;servers</a></li>
<li><a href="#recovering-from-disaster-with-two-active-project-servers">3.5.3. Recovering from disaster with two active Foreman&#160;servers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#Managing_Users_and_Roles_admin">4. Managing users and roles</a>
<ul class="sectlevel2">
<li><a href="#Managing_Users_admin">4.1. Managing users</a>
<ul class="sectlevel3">
<li><a href="#Creating_a_User_admin">4.1.1. Creating a user</a></li>
<li><a href="#Assigning_Roles_to_a_User_admin">4.1.2. Assigning roles to a user</a></li>
<li><a href="#Impersonating_a_Different_User_Account_admin">4.1.3. Impersonating a different user account</a></li>
<li><a href="#Creating_an_API_Only_User_admin">4.1.4. Creating an API-only user</a></li>
</ul>
</li>
<li><a href="#Managing_SSH_Keys_admin">4.2. Managing SSH keys</a>
<ul class="sectlevel3">
<li><a href="#Managing_SSH_Keys_for_a_User_admin">4.2.1. Managing SSH keys for a user</a></li>
</ul>
</li>
<li><a href="#managing-personal-access-tokens_admin">4.3. Managing Personal Access Tokens</a>
<ul class="sectlevel3">
<li><a href="#creating-a-personal-access-token_admin">4.3.1. Creating a Personal Access Token</a></li>
<li><a href="#revoking-a-personal-access-token_admin">4.3.2. Revoking a Personal Access Token</a></li>
</ul>
</li>
<li><a href="#Creating_and_Managing_User_Groups_admin">4.4. Creating and managing user groups</a>
<ul class="sectlevel3">
<li><a href="#User_Groups_admin">4.4.1. User groups</a></li>
<li><a href="#Creating_a_User_Group_admin">4.4.2. Creating a user group</a></li>
<li><a href="#Removing_a_User_Group_admin">4.4.3. Removing a user group</a></li>
</ul>
</li>
<li><a href="#creating-and-managing-roles">4.5. Creating and managing roles</a>
<ul class="sectlevel3">
<li><a href="#Creating_a_Role_admin">4.5.1. Creating a role</a></li>
<li><a href="#Cloning_a_Role_admin">4.5.2. Cloning a role</a></li>
<li><a href="#Adding_Permissions_to_a_Role_admin">4.5.3. Adding permissions to a role</a></li>
<li><a href="#Viewing_Permissions_of_a_Role_admin">4.5.4. Viewing permissions of a role</a></li>
<li><a href="#Creating_a_Complete_Permission_Table_admin">4.5.5. Creating a complete permission table</a></li>
<li><a href="#Removing_a_Role_admin">4.5.6. Removing a role</a></li>
</ul>
</li>
<li><a href="#predefined-roles-available-in-foreman">4.6. Predefined roles available in Foreman</a></li>
<li><a href="#Granular_Permission_Filtering_admin">4.7. Granular permission filtering</a>
<ul class="sectlevel3">
<li><a href="#Creating_a_Granular_Permission_Filter_admin">4.7.1. Creating a granular permission filter</a></li>
<li><a href="#Examples_of_Using_Granular_Permission_Filters_admin">4.7.2. Examples of using granular permission filters</a></li>
<li><a href="#Supported_Operators_for_Granular_Search_admin">4.7.3. Supported operators for granular search</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#Configuring_Email_Notifications_admin">5. Configuring email notifications</a>
<ul class="sectlevel2">
<li><a href="#Email_Notification_Types_admin">5.1. Email notification types</a></li>
<li><a href="#Configuring_Email_Notification_Preferences_admin">5.2. Configuring email notification preferences</a></li>
<li><a href="#Testing_Email_Delivery_admin">5.3. Testing email delivery</a></li>
<li><a href="#Testing_Email_Notifications_admin">5.4. Testing email notifications</a></li>
<li><a href="#Changing_Email_Notifications_for_a_Host_admin">5.5. Changing email notification settings for a host</a></li>
</ul>
</li>
<li><a href="#backing-up-foreman-server-and-smart-proxy_admin">6. Backing up Foreman&#160;server and Smart&#160;Proxy&#160;server</a>
<ul class="sectlevel2">
<li><a href="#Performing_a_Full_Backup_admin">6.1. Performing a full backup of Foreman&#160;server or Smart&#160;Proxy&#160;server</a></li>
<li><a href="#Performing_an_Incremental_Backup_admin">6.2. Performing an incremental backup</a></li>
<li><a href="#Example_of_a_Weekly_Full_Backup_Followed_by_Daily_Incremental_Backups_admin">6.3. Example of a weekly full backup followed by daily incremental backups</a></li>
<li><a href="#Performing_an_Online_Backup_admin">6.4. Performing an online backup</a></li>
</ul>
</li>
<li><a href="#restoring-foreman-server-or-smart-proxy-from-a-backup_admin">7. Restoring Foreman&#160;server or Smart&#160;Proxy&#160;server from a backup</a>
<ul class="sectlevel2">
<li><a href="#Restoring_from_a_Full_Backup_admin">7.1. Restoring from a full backup</a></li>
<li><a href="#Restoring_from_Incremental_Backups_admin">7.2. Restoring from incremental backups</a></li>
<li><a href="#backup-and-restore-smart-proxy-server-by-using-a-virtual-machine-snapshot">7.3. Backup and restore Smart&#160;Proxy&#160;server by using a virtual machine snapshot</a></li>
</ul>
</li>
<li><a href="#maintaining-foreman-server_admin">8. Maintaining Foreman&#160;server</a>
<ul class="sectlevel2">
<li><a href="#deleting-audit-records-manually_admin">8.1. Deleting audit records manually</a></li>
<li><a href="#Deleting_Audit_Records_Automatically_admin">8.2. Deleting audit records automatically</a></li>
<li><a href="#Anonymizing_Audit_Records_admin">8.3. Anonymizing audit records</a></li>
<li><a href="#Deleting_Report_Records_admin">8.4. Deleting report records</a></li>
<li><a href="#Configuring_the_Cleaning_Unused_Tasks_Feature_admin">8.5. Configuring the cleaning unused tasks feature</a></li>
<li><a href="#Deleting_Task_Records_admin">8.6. Deleting task records</a></li>
<li><a href="#Deleting_a_Task_by_ID_admin">8.7. Deleting a task by ID</a></li>
</ul>
</li>
<li><a href="#synchronizing-template-repositories">9. Synchronizing template repositories</a>
<ul class="sectlevel2">
<li><a href="#Enabling_the_Template_Sync_plugin_admin">9.1. Enabling the Template Sync plugin</a></li>
<li><a href="#synchronizing-templates-with-an-existing-repository_admin">9.2. Synchronizing templates with an existing repository</a></li>
<li><a href="#Synchronizing_Templates_with_a_Local_Directory_admin">9.3. Synchronizing templates with a local directory</a></li>
<li><a href="#Importing_Templates_admin">9.4. Importing templates</a></li>
<li><a href="#Exporting_Templates_admin">9.5. Exporting templates</a></li>
<li><a href="#Uninstalling_the_Foreman_Templates_plugin_admin">9.6. Uninstalling the Foreman templates plugin</a></li>
</ul>
</li>
<li><a href="#Logging_and_Reporting_Problems_admin">10. Logging and reporting problems</a>
<ul class="sectlevel2">
<li><a href="#logging-levels-of-foreman-components">10.1. Logging levels of Foreman components</a>
<ul class="sectlevel3">
<li><a href="#increasing-the-logging-level-for-foreman">10.1.1. Increasing the logging level for Foreman</a></li>
<li><a href="#increasing-the-logging-level-for-hammer">10.1.2. Increasing the logging level for Hammer</a></li>
<li><a href="#increasing-the-logging-level-for-smart-proxy">10.1.3. Increasing the logging level for Smart&#160;Proxy</a></li>
<li><a href="#increasing-the-logging-level-for-redis">10.1.4. Increasing the logging level for Redis</a></li>
<li><a href="#increasing-the-logging-level-for-foreman-installer">10.1.5. Increasing the logging level for foreman-installer</a></li>
<li><a href="#increasing-the-logging-level-for-puppet-agent">10.1.6. Increasing the logging level for Puppet agent</a></li>
<li><a href="#increasing-the-logging-level-for-puppet-server">10.1.7. Increasing the logging level for Puppet server</a></li>
<li><a href="#increasing-the-logging-level-for-salt">10.1.8. Increasing the logging level for Salt</a></li>
</ul>
</li>
<li><a href="#configuring-logging-type-and-layout_admin">10.2. Configuring logging type and layout</a></li>
<li><a href="#Selective_Debugging_with_Individual_Loggers_admin">10.3. Selective debugging with individual loggers</a></li>
<li><a href="#Overview_of_Individual_Loggers_admin">10.4. Overview of individual loggers</a></li>
<li><a href="#Retrieving_the_Status_of_Services_admin">10.5. Retrieving the status of services</a></li>
<li><a href="#Restarting_Services_admin">10.6. Restarting services</a></li>
<li><a href="#Utilities_for_Processing_Log_Information_admin">10.7. Utilities for processing log information</a></li>
<li><a href="#Log_File_Directories_admin">10.8. Log file directories</a></li>
<li><a href="#system-journal-metadata_admin">10.9. System journal metadata</a></li>
</ul>
</li>
<li><a href="#monitoring-foreman-resources">11. Monitoring Foreman resources</a>
<ul class="sectlevel2">
<li><a href="#Using_the_Project_Content_Dashboard_admin">11.1. Using the Foreman content dashboard</a>
<ul class="sectlevel3">
<li><a href="#Managing_Tasks_admin">11.1.1. Managing tasks</a></li>
</ul>
</li>
<li><a href="#Configuring_RSS_Notifications_admin">11.2. Configuring RSS notifications</a></li>
<li><a href="#monitoring-foreman-server_admin">11.3. Monitoring Foreman&#160;server</a></li>
<li><a href="#monitoring-smart-proxy-server_admin">11.4. Monitoring Smart&#160;Proxy&#160;server</a>
<ul class="sectlevel3">
<li><a href="#viewing-general-smart-proxy-information_admin">11.4.1. Viewing general Smart&#160;Proxy information</a></li>
<li><a href="#Monitoring_Services_admin">11.4.2. Monitoring services</a></li>
<li><a href="#Monitoring_Puppet_admin">11.4.3. Monitoring Puppet</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#limiting-host-resources">12. Limiting host resources</a>
<ul class="sectlevel2">
<li><a href="#installing-the-resource-quota-plugin">12.1. Installing the Resource Quota plugin</a></li>
<li><a href="#managing-resource-quotas">12.2. Managing resource quotas</a>
<ul class="sectlevel3">
<li><a href="#creating-a-resource-quota">12.2.1. Creating a resource quota</a></li>
<li><a href="#editing-a-resource-quota">12.2.2. Editing a resource quota</a></li>
<li><a href="#deleting-a-resource-quota">12.2.3. Deleting a resource quota</a></li>
</ul>
</li>
<li><a href="#assigning-resource-quotas-to-users">12.3. Assigning resource quotas to users</a>
<ul class="sectlevel3">
<li><a href="#assigning-resource-quotas-to-a-user">12.3.1. Assigning resource quotas to a user</a></li>
<li><a href="#assigning-resource-quotas-to-a-user-group">12.3.2. Assigning resource quotas to a user group</a></li>
</ul>
</li>
<li><a href="#viewing-resource-quotas">12.4. Viewing resource quotas</a></li>
<li><a href="#resource-quota-settings">12.5. Resource Quota settings</a></li>
</ul>
</li>
<li><a href="#Using_Webhooks_admin">13. Using webhooks</a>
<ul class="sectlevel2">
<li><a href="#installing-webhooks-plugin_admin">13.1. Installing the webhooks plugin</a></li>
<li><a href="#creating-a-webhook-template_admin">13.2. Creating a webhook template</a></li>
<li><a href="#creating-a-webhook_admin">13.3. Creating a webhook</a></li>
<li><a href="#webhooks-available-events_admin">13.4. Available webhook events</a></li>
<li><a href="#shellhooks_admin">13.5. Shellhooks</a></li>
<li><a href="#installing-shellhooks-plugin_admin">13.6. Installing the shellhooks plugin</a></li>
<li><a href="#passing-arguments-to-shellhook-script-using-webhooks_admin">13.7. Passing arguments to shellhook script using webhooks</a></li>
<li><a href="#passing-arguments-to-shellhook-script-using-curl_admin">13.8. Passing arguments to shellhook script using curl</a></li>
<li><a href="#creating-a-shellhook-to-print-arguments_admin">13.9. Creating a shellhook to print arguments</a></li>
</ul>
</li>
<li><a href="#Searching_and_Bookmarking_admin">14. Searching and bookmarking</a>
<ul class="sectlevel2">
<li><a href="#Building_Search_Queries_admin">14.1. Building search queries</a>
<ul class="sectlevel3">
<li><a href="#Query_Syntax_admin">14.1.1. Query syntax</a></li>
<li><a href="#Query_Operators_admin">14.1.2. Query operators</a></li>
<li><a href="#Query_Values_admin">14.1.3. Query values</a></li>
</ul>
</li>
<li><a href="#Using_Free_Text_Search_admin">14.2. Using free text search</a></li>
<li><a href="#Managing_Bookmarks_admin">14.3. Managing bookmarks</a>
<ul class="sectlevel3">
<li><a href="#Creating_Bookmarks_admin">14.3.1. Creating bookmarks</a></li>
<li><a href="#Deleting_Bookmarks_admin">14.3.2. Deleting bookmarks</a></li>
</ul>
</li>
<li><a href="#using-keyboard-shortcuts_admin">14.4. Using keyboard shortcuts</a></li>
</ul>
</li>
<li><a href="#Administration_Settings_admin">Appendix A: Administration settings</a>
<ul class="sectlevel2">
<li><a href="#general_settings_information_admin">A.1. General settings</a></li>
<li><a href="#foreman_tasks_admin">A.2. Task settings</a></li>
<li><a href="#template_sync_settings_admin">A.3. Template sync settings</a></li>
<li><a href="#discovery-settings">A.4. Discovery settings</a></li>
<li><a href="#boot_disk_settings_admin">A.5. Boot disk settings</a></li>
<li><a href="#authentication_settings_admin">A.6. Authentication settings</a></li>
<li><a href="#email_settings_admin">A.7. Email settings</a></li>
<li><a href="#notifications_settings_admin">A.8. Notifications settings</a></li>
<li><a href="#provisioning_settings_admin">A.9. Provisioning settings</a></li>
<li><a href="#facts_settings_admin">A.10. Facts settings</a></li>
<li><a href="#config_management_settings_admin">A.11. Configuration management settings</a></li>
<li><a href="#remote_execution_settings_admin">A.12. Remote execution settings</a></li>
<li><a href="#ansible_settings_admin">A.13. Ansible settings</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="Starting_and_Stopping_Server_admin"><a class="anchor" href="#Starting_and_Stopping_Server_admin"></a>1. Starting and stopping Foreman</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Foreman provides the <code>foreman-maintain service</code> command to manage Foreman services from the command line.
This is useful when creating a backup of Foreman.
For more information on creating backups, see <a href="#backing-up-foreman-server-and-smart-proxy_admin">Backing up Foreman&#160;server and Smart&#160;Proxy&#160;server</a>.</p>
</div>
<div class="paragraph">
<p>After installing Foreman with the <code>foreman-installer</code> command, all Foreman services are started and enabled automatically.
View the list of these services by executing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain service list</pre>
</div>
</div>
<div class="paragraph">
<p>To see the status of running services, execute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain service status</pre>
</div>
</div>
<div class="paragraph">
<p>To stop Foreman services, execute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain service stop</pre>
</div>
</div>
<div class="paragraph">
<p>To start Foreman services, execute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain service start</pre>
</div>
</div>
<div class="paragraph">
<p>To restart Foreman services, execute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain service restart</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Migrating_from_Internal_Databases_to_External_Databases_admin"><a class="anchor" href="#Migrating_from_Internal_Databases_to_External_Databases_admin"></a>2. Migrating from internal Foreman databases to external databases</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you install Foreman, the <strong>foreman-installer</strong> command installs PostgreSQL databases on the same server as Foreman.
If you are using the default internal databases but want to start using external databases to help with the server load, you can migrate your internal databases to external databases.</p>
</div>
<div class="paragraph">
<p>To confirm whether your Foreman&#160;server has internal or external databases, you can query the status of your databases:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain service status --only postgresql</pre>
</div>
</div>
<div class="paragraph">
<p>To migrate from the default internal databases to external databases, you must complete the following procedures:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#installing-postgresql_admin">Installing PostgreSQL</a>.
Prepare PostgreSQL with a database for Foreman with a dedicated user owning it.</p>
</li>
<li>
<p><a href="#migrating-to-external-databases_admin">Migrating to external databases</a>.
Edit the parameters of <code>foreman-installer</code> to point to the new databases, and run <code>foreman-installer</code>.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="postgresql-as-an-external-database-considerations_admin"><a class="anchor" href="#postgresql-as-an-external-database-considerations_admin"></a>2.1. PostgreSQL as an external database considerations</h3>
<div class="paragraph">
<p>Foreman uses the PostgreSQL database.
If you want to use PostgreSQL as an external database, the following information can help you decide if this option is right for your Foreman configuration.
Foreman requires PostgreSQL version 13 or later.
Foreman community recommends that you use the PostgreSQL version that is part of the default operating system repositories.</p>
</div>
<div class="ulist">
<div class="title">Advantages of external PostgreSQL</div>
<ul>
<li>
<p>Increase in free memory and free CPU on Foreman</p>
</li>
<li>
<p>Flexibility to set <code>shared_buffers</code> on the PostgreSQL database to a high number without the risk of interfering with other services on Foreman</p>
</li>
<li>
<p>Flexibility to tune the PostgreSQL server&#8217;s system without adversely affecting Foreman operations</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Disadvantages of external PostgreSQL</div>
<ul>
<li>
<p>Increase in deployment complexity that can make troubleshooting more difficult</p>
</li>
<li>
<p>The external PostgreSQL server is an additional system to patch and maintain</p>
</li>
<li>
<p>If either Foreman or the PostgreSQL database server suffers a hardware or storage failure, Foreman is not operational</p>
</li>
<li>
<p>If there is latency between the Foreman server and database server, performance can suffer</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="installing-postgresql_admin"><a class="anchor" href="#installing-postgresql_admin"></a>2.2. Installing PostgreSQL</h3>
<div class="paragraph">
<p>Foreman requires PostgreSQL version 13 or later.
Foreman community recommends that you use the PostgreSQL version that is part of the default operating system repositories.
The examples below assume PostgreSQL 14 as used on Ubuntu 22.04.
If you run Foreman&#160;server on Debian 12, you have to adjust the paths of PostgreSQL config and data directories which depend on the PostgreSQL version.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The prepared host has base operating system repositories enabled.</p>
</li>
<li>
<p>The prepared host has sufficient disk space available for the <code>/var/lib/postgresql</code> directory.
The expected installation size is 100 MB and the expected runtime size is 20 GB.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>On your new database server, install PostgreSQL:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># apt install postgresql</pre>
</div>
</div>
</li>
<li>
<p>Edit the <code>/etc/postgresql/14/main/postgresql.conf</code> file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># vi /etc/postgresql/14/main/postgresql.conf</pre>
</div>
</div>
<div class="paragraph">
<p>Note that the default configuration of external PostgreSQL needs to be adjusted to work with Foreman.
The base recommended external database configuration adjustments are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>checkpoint_completion_target: 0.9</p>
</li>
<li>
<p>max_connections: 500</p>
</li>
<li>
<p>shared_buffers: 512MB</p>
</li>
<li>
<p>work_mem: 4MB</p>
</li>
</ul>
</div>
</li>
<li>
<p>Remove the <code>#</code> and edit to listen to inbound connections:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">listen_addresses = '*'</pre>
</div>
</div>
</li>
<li>
<p>Add the following line to the end of the file to use SCRAM for authentication:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">password_encryption=scram-sha-256</pre>
</div>
</div>
</li>
<li>
<p>Edit the <code>/etc/postgresql/14/main/pg_hba.conf</code> file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># vi /etc/postgresql/14/main/pg_hba.conf</pre>
</div>
</div>
</li>
<li>
<p>Add the following line to the file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">  host  all   all   <em>Foreman_ip</em>/32   scram-sha-256</pre>
</div>
</div>
</li>
<li>
<p>Start and enable the PostgreSQL service:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># systemctl enable --now postgresql</pre>
</div>
</div>
</li>
<li>
<p>Update the firewall configuration.
For example, using the <code>firewall-cmd</code> command:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Open the <strong>postgresql</strong> port:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd --add-service=postgresql</pre>
</div>
</div>
</li>
<li>
<p>Make the changes persistent:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd --runtime-to-permanent</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Switch to the <code>postgres</code> user and start the PostgreSQL client:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ su - postgres -c psql</pre>
</div>
</div>
</li>
<li>
<p>Create the Foreman database and dedicated role:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">CREATE USER "foreman" WITH PASSWORD '<em>Foreman_Password</em>';
CREATE DATABASE foreman OWNER foreman;</pre>
</div>
</div>
</li>
<li>
<p>Exit the <code>postgres</code> user:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># \q</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>From Foreman&#160;server, test that you can access the database:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># PGPASSWORD='<em>Foreman_Password</em>' pg_isready -h <em>postgres.example.com</em> -p 5432 -U foreman -d foreman -c</pre>
</div>
</div>
<div class="paragraph">
<p>If the connection succeeded, this displays an <code>accepting connections</code> message.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="migrating-to-external-databases_admin"><a class="anchor" href="#migrating-to-external-databases_admin"></a>2.3. Migrating to external databases</h3>
<div class="paragraph">
<p>Back up and transfer existing data, then use the <code>foreman-installer</code> command to configure Foreman to connect to an external PostgreSQL database server.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have installed and configured a PostgreSQL server on an external server.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>On Foreman&#160;server, stop all Foreman services except for PostgreSQL:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain service stop --exclude postgresql</pre>
</div>
</div>
</li>
<li>
<p>Create your target directory for the Foreman backup:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir /var/<em>My_Migration_Backup_Directory</em></pre>
</div>
</div>
</li>
<li>
<p>Back up the internal databases:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain backup online \
--preserve-directory \
/var/<em>My_Migration_Backup_Directory</em></pre>
</div>
</div>
</li>
<li>
<p>Transfer the data to the new external databases:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">PGPASSWORD='<em>Foreman_Password</em>' pg_restore -h <em>postgres.example.com</em> -U foreman -d foreman &lt; /var/<em>My_Migration_Backup_Directory</em>/foreman.dump</pre>
</div>
</div>
</li>
<li>
<p>Use the <code>foreman-installer</code> command to update Foreman to point to the new
database:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer \
--foreman-db-manage false \
--foreman-db-host <em>postgres.example.com</em> \
--foreman-db-database foreman \
--foreman-db-username foreman \
--foreman-db-password <em>Foreman_Password</em></pre>
</div>
</div>
</li>
<li>
<p>Remove the PostgreSQL package on Foreman&#160;server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># apt remove postgresql</pre>
</div>
</div>
</li>
<li>
<p>Remove the PostgreSQL data directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># rm -fr /var/lib/postgresql/14/main</pre>
</div>
</div>
<div class="paragraph">
<p>If you run Foreman&#160;server on Debian 12, you have to adjust the paths of PostgreSQL config and data directories which depend on the PostgreSQL version.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="preparing-for-disaster-recovery-and-recovering-from-data-loss"><a class="anchor" href="#preparing-for-disaster-recovery-and-recovering-from-data-loss"></a>3. Preparing for disaster recovery and recovering from data loss</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Foreman community recommends preparing a disaster recovery plan to ensure the continuity of Foreman services in case of a disruptive event.
These guidelines help ensure that you will be able to restore your Foreman deployment to an operational state after an incident.</p>
</div>
<div class="sect2">
<h3 id="overview-of-recommended-disaster-recovery-plans"><a class="anchor" href="#overview-of-recommended-disaster-recovery-plans"></a>3.1. Overview of recommended disaster recovery plans</h3>
<div class="paragraph">
<p>Choose a disaster recovery plan that best helps ensure the continuity of Foreman services in your deployment.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Snapshots of virtualized Foreman&#160;server</dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">How do I back up?</dt>
<dd>
<p>Virtualize your Foreman&#160;server and use the hypervisor tools to take virtual machine snapshots of the server.
This method is suitable if you can run Foreman in a virtual machine.</p>
</dd>
<dt class="hdlist1">How will I recover in case of a disruptive event?</dt>
<dd>
<p>To recover Foreman services, restore a virtual machine snapshot.</p>
</dd>
<dt class="hdlist1">Disadvantages and expected impact</dt>
<dd>
<p>Expect some amount of data inconsistency after recovery, based on how old your last snapshot is.
You will lose data changes that have occurred since the snapshot you are using to recover was taken.</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1">Active and passive Foreman&#160;server, with external storage</dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">How do I back up?</dt>
<dd>
<p>Store the following critical data on network attached storage:
database in <code>/var/lib/pgsql</code>.
Replicate this storage into a different data center.
Attach the storage to a Foreman&#160;server that is a clone of the primary Foreman&#160;server but runs passively.</p>
</dd>
<dt class="hdlist1">How will I recover in case of a disruptive event?</dt>
<dd>
<p>To recover Foreman services, switch DNS records of the active Foreman&#160;server with the passive Foreman&#160;server.
This ensures that the passive server becomes the active server.
All hosts remain connected without configuration updates.</p>
</dd>
<dt class="hdlist1">Disadvantages and expected impact</dt>
<dd>
<p>If the network attached storage is replicated to another location, expect some amount of data inconsistency after recovery based on the synchronization interval.</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1">Active and passive Foreman&#160;server, with backup and restore</dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">How do I back up?</dt>
<dd>
<p>Ensure periodic backups of your Foreman&#160;server.
Copy this backup to a passive Foreman&#160;server and restore it on the passive server.</p>
</dd>
<dt class="hdlist1">How will I recover in case of a disruptive event?</dt>
<dd>
<p>To recover Foreman services, switch DNS records of the active Foreman&#160;server with the passive Foreman&#160;server.
This ensures that the passive server becomes the active server.
All hosts remain connected without configuration updates.</p>
</dd>
<dt class="hdlist1">Disadvantages and expected impact</dt>
<dd>
<p>Expect some amount of data inconsistency after recovery, based on how often you took and restored backups and on how long it takes to complete the restore process.</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1">Dual active Foreman&#160;server</dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">How do I back up?</dt>
<dd>
<p>Operate an active, independent Foreman&#160;server per data center.
Hosts from each data center are registered to the Foreman&#160;server in that data center.
Then configure automation to ensure recovery in case of a disruptive event.
For example, you can periodically run a health check and if the health check discovers that the current Foreman&#160;server a host is registered to does not resolve, the host is re-registered to the other Foreman&#160;server.</p>
<div class="paragraph">
<p>To minimize downtime, you can automate the recovery in various ways.
For example, you can use the Foreman Ansible collection.
For more information, see <a href="https://docs.theforeman.org/3.16/Project_Ansible_Collection/index-foreman-deb.html#"><em>Using the Foreman Ansible Collection</em></a>.</p>
</div>
</dd>
<dt class="hdlist1">How will I recover in case of a disruptive event?</dt>
<dd>
<p>To recover Foreman services, re-register all hosts to the Foreman&#160;server in the other data center.</p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="disaster-recovery-by-virtualizing-your-foreman-server"><a class="anchor" href="#disaster-recovery-by-virtualizing-your-foreman-server"></a>3.2. Disaster recovery by virtualizing your Foreman&#160;server</h3>
<div class="paragraph">
<p>If you virtualize your Foreman&#160;server and ensure that you take regular snapshots of the virtual machine (VM), you can respond to various disaster scenarios by restoring your Foreman deployment from one of your snapshots.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The details for how to implement this scenario depend on your choice of a virtualization platform.
Due to the variety of different hypervisors and their capabilities, Foreman community does not provide detailed instructions for any specific virtualization platform.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="prerequisites-disaster-recovery-by-virtualizing-foreman-server"><a class="anchor" href="#prerequisites-disaster-recovery-by-virtualizing-foreman-server"></a>3.2.1. Prerequisites</h4>
<div class="ulist">
<ul>
<li>
<p>Review <a href="#overview-of-recommended-disaster-recovery-plans">Overview of recommended disaster recovery plans</a> to make sure that this disaster recovery plan works for you.</p>
</li>
<li>
<p>Your Foreman&#160;server is deployed as a VM.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="preparing-for-disaster-recovery-by-virtualizing-your-foreman-server"><a class="anchor" href="#preparing-for-disaster-recovery-by-virtualizing-your-foreman-server"></a>3.2.2. Preparing for disaster recovery by virtualizing your Foreman&#160;server</h4>
<div class="paragraph">
<p>Implement a reliable process for regularly taking VM snapshots of your virtualized Foreman&#160;server and for backing up your snapshots for long-term storage.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Define a schedule for taking periodic snapshots of your virtualized Foreman&#160;server.
Consider your tolerance for potential data loss:
Taking snapshots frequently will result in smaller amounts of data loss in case of a disaster.
However, creating a snapshot takes time, and the snapshots also require storage space.</p>
</li>
<li>
<p>Define your snapshot retention policy.
Consider how many snapshots you want to store: Regularly removing outdated snapshots helps optimize storage usage.</p>
</li>
<li>
<p>Using your hypervisor, schedule periodic snapshots of your Foreman&#160;server.</p>
</li>
<li>
<p>Schedule periodic backups of the snapshots to prevent data loss in case of hypervisor failure.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>While snapshots provide quick recovery points, backing up your snapshots gives you the ability for long-term storage and provides extra safety in case of a disaster on the side of your hypervisor.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>If you are using an external database that runs on a different machine than your Foreman&#160;server, create snapshots and backups on the same schedule as your Foreman&#160;server.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Verification</div>
<ol class="arabic">
<li>
<p>Verify that your hypervisor takes the snapshots according to the schedule that you defined.</p>
</li>
<li>
<p>Use the latest snapshot of your Foreman&#160;server and restore it in an isolated environment.</p>
</li>
<li>
<p>To verify that you will be able to restore Foreman services in case of a disaster, assess the functionality of the test Foreman&#160;server.
See <a href="#Retrieving_the_Status_of_Services_dr-virt">Retrieving the status of services</a>.</p>
</li>
<li>
<p>Perform these verification checks regularly.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="recovering-from-disaster-by-restoring-a-vm-snapshot-of-foreman-server"><a class="anchor" href="#recovering-from-disaster-by-restoring-a-vm-snapshot-of-foreman-server"></a>3.2.3. Recovering from disaster by restoring a VM snapshot of Foreman&#160;server</h4>
<div class="paragraph">
<p>In case of a disaster, use a virtual machine (VM) snapshot of your Foreman&#160;server to restore Foreman services.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>Ensure that the hostname of your Foreman&#160;server does not change during recovery.
The IP address can change.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Identify the snapshot from which you want to recover.</p>
</li>
<li>
<p>Use hypervisor tools to restore from the selected snapshot.</p>
</li>
<li>
<p>If you are using an external database that runs on a different machine than your Foreman&#160;server, ensure that you restore the database from a snapshot taken at the same time as or before the Foreman&#160;server snapshot.</p>
</li>
<li>
<p>Update DNS records so that the Foreman&#160;server hostname resolves to the new IP address.
This redirects traffic from the old server to the new server and you will not need to re-register your hosts.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>Assess the functionality of your restored Foreman&#160;server.
See <a href="#Retrieving_the_Status_of_Services_dr-virt">Retrieving the status of services</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Retrieving_the_Status_of_Services_dr-virt"><a class="anchor" href="#Retrieving_the_Status_of_Services_dr-virt"></a>3.2.4. Retrieving the status of services</h4>
<div class="paragraph">
<p>Foreman uses a set of back-end services.
When troubleshooting, you can check the status of Foreman services.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>About</strong>.</p>
<div class="ulist">
<ul>
<li>
<p>On the <strong>Smart Proxies</strong> tab, view the status of all Smart&#160;Proxies.</p>
</li>
<li>
<p>On the <strong>Compute Resources</strong> tab, view the status of attached compute resource providers.</p>
</li>
<li>
<p>In the <strong>Backend System Status</strong> table, view the status of all back-end services.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Get information from the database and Foreman services:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer ping</pre>
</div>
</div>
</li>
<li>
<p>Check the status of the services running in systemd:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain service status</pre>
</div>
</div>
<div class="paragraph">
<p>Run <code>foreman-maintain service --help</code> for more information.</p>
</div>
</li>
<li>
<p>Perform a health check:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ foreman-maintain health check</pre>
</div>
</div>
<div class="paragraph">
<p>Run <code>foreman-maintain health --help</code> for more information.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="disaster-recovery-for-active-and-passive-foreman-server-with-external-storage"><a class="anchor" href="#disaster-recovery-for-active-and-passive-foreman-server-with-external-storage"></a>3.3. Disaster recovery for active and passive Foreman&#160;server with external storage</h3>
<div class="paragraph">
<p>To prepare for disaster recovery, you can configure two Foreman&#160;servers and store critical data externally on shared storage.
The primary server is active while the secondary server remains passive.
If the primary server fails, the shared storage is attached to your secondary server, which turns the secondary server into your new primary server.</p>
</div>
<div class="sect3">
<h4 id="prerequisites-disaster-recovery-with-active-and-passive-project-server-and-external-storage"><a class="anchor" href="#prerequisites-disaster-recovery-with-active-and-passive-project-server-and-external-storage"></a>3.3.1. Prerequisites</h4>
<div class="ulist">
<ul>
<li>
<p>Review <a href="#overview-of-recommended-disaster-recovery-plans">Overview of recommended disaster recovery plans</a> to ensure that this disaster recovery plan works for you.</p>
</li>
<li>
<p>Review <a href="https://docs.theforeman.org/3.16/Installing_Server/index-foreman-deb.html#storage-requirements_foreman">Storage requirements</a> and <a href="https://docs.theforeman.org/3.16/Installing_Server/index-foreman-deb.html#storage-guidelines_foreman">Storage guidelines</a> in <em>Installing Foreman&#160;Server 3.16 on Debian/Ubuntu</em>.
Ensure that your shared storage meets the requirements of holding the contents of <code>/var/lib/pulp</code> and <code>/var/lib/postgresql</code>.</p>
</li>
<li>
<p>You have configured your Foreman&#160;server to use external databases.
For more information, see <a href="https://docs.theforeman.org/3.16/Installing_Server/index-foreman-deb.html#using-external-databases_foreman">Using external databases</a> in <em>Installing Foreman&#160;Server 3.16 on Debian/Ubuntu</em>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="preparing-for-disaster-recovery-with-active-and-passive-project-server-with-external-storage"><a class="anchor" href="#preparing-for-disaster-recovery-with-active-and-passive-project-server-with-external-storage"></a>3.3.2. Preparing for disaster recovery with active and passive Foreman&#160;server with external storage</h4>
<div class="paragraph">
<p>Create your passive Foreman&#160;server as a backup of your active Foreman&#160;server.
Ensure that the <code>/var/lib/pulp</code> and <code>/var/lib/postgresql</code> directories on your shared storage are available to both servers.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Replicate the <code>/var/lib/pulp</code> and <code>/var/lib/postgresql</code> directories from the active Foreman&#160;server to your shared storage.</p>
</li>
<li>
<p>Back up your active Foreman&#160;server and restore it on a system that will serve as your passive Foreman&#160;server.
For more information, see <a href="#backing-up-foreman-server-and-smart-proxy_admin">Backing up Foreman&#160;server and Smart&#160;Proxy&#160;server</a> and <a href="#restoring-foreman-server-or-smart-proxy-from-a-backup_admin">Restoring Foreman&#160;server or Smart&#160;Proxy&#160;server from a backup</a>.</p>
</li>
<li>
<p>Keep the source server powered on.
Power off the new server.</p>
<div class="paragraph">
<p>The source server remains your active primary server, while the new server becomes the passive secondary server.</p>
</div>
</li>
<li>
<p>Determine how you want to attach the database content on the shared storage to your passive server:</p>
<div class="ulist">
<ul>
<li>
<p>If you mount the storage directly on both your active and passive server, the servers will always see the same, up-to-date content.</p>
</li>
<li>
<p>If you mount the storage only on your active server, the passive server will access the data only if it takes over as the active server.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Verification</div>
<p>Perform this test in an isolated staging environment:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Mimic a full outage on the active server.
To make sure the active server is inaccessible, you can turn the machine off, halt the virtual machine (VM) if your server runs on a VM, or isolate the machine by using a firewall.</p>
</li>
<li>
<p>Switch DNS records of the active server with the DNS records of the passive server.</p>
</li>
<li>
<p>Verify that your passive server can access the data stored on your shared storage.</p>
</li>
<li>
<p>Assess the functionality of the test Foreman&#160;server.
For more information, see <a href="#Retrieving_the_Status_of_Services_dr-storage">Retrieving the status of services</a>.</p>
</li>
<li>
<p>Perform these verification checks regularly.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="recovering-from-disaster-with-active-and-passive-server-with-external-storage"><a class="anchor" href="#recovering-from-disaster-with-active-and-passive-server-with-external-storage"></a>3.3.3. Recovering from disaster with active and passive server with external storage</h4>
<div class="paragraph">
<p>If your active Foreman&#160;server fails, detach it from the shared storage and make sure your passive server can access the data stored on the shared storage.
This turns the passive server into your new active server.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Verify that the failed active server is powered off or fully detached from the shared storage.
This ensures that the failed server cannot keep writing to the shared storage.</p>
</li>
<li>
<p>Switch DNS records of the active server with the DNS records of the passive server.
This ensures that hosts remain connected and you do not need to re-register them.</p>
</li>
<li>
<p>If your shared storage was mounted on both your active and passive servers, your passive server can already access the data.</p>
</li>
<li>
<p>If your shared storage was mounted only on your active server, re-mount it on your passive server.</p>
</li>
<li>
<p>Assess the functionality of your new active Foreman&#160;server.
For more information, see <a href="#Retrieving_the_Status_of_Services_dr-storage">Retrieving the status of services</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Retrieving_the_Status_of_Services_dr-storage"><a class="anchor" href="#Retrieving_the_Status_of_Services_dr-storage"></a>3.3.4. Retrieving the status of services</h4>
<div class="paragraph">
<p>Foreman uses a set of back-end services.
When troubleshooting, you can check the status of Foreman services.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>About</strong>.</p>
<div class="ulist">
<ul>
<li>
<p>On the <strong>Smart Proxies</strong> tab, view the status of all Smart&#160;Proxies.</p>
</li>
<li>
<p>On the <strong>Compute Resources</strong> tab, view the status of attached compute resource providers.</p>
</li>
<li>
<p>In the <strong>Backend System Status</strong> table, view the status of all back-end services.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Get information from the database and Foreman services:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer ping</pre>
</div>
</div>
</li>
<li>
<p>Check the status of the services running in systemd:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain service status</pre>
</div>
</div>
<div class="paragraph">
<p>Run <code>foreman-maintain service --help</code> for more information.</p>
</div>
</li>
<li>
<p>Perform a health check:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ foreman-maintain health check</pre>
</div>
</div>
<div class="paragraph">
<p>Run <code>foreman-maintain health --help</code> for more information.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="disaster-recovery-for-active-and-passive-foreman-server-with-backup-and-restore"><a class="anchor" href="#disaster-recovery-for-active-and-passive-foreman-server-with-backup-and-restore"></a>3.4. Disaster recovery for active and passive Foreman&#160;server with backup and restore</h3>
<div class="paragraph">
<p>To prepare for disaster recovery, you can configure two Foreman&#160;servers: an active primary server and a passive secondary server.
You configure periodic backups of the primary server.
If the primary server fails, you can restore a backup on the secondary server to turn it into your new primary server.</p>
</div>
<div class="sect3">
<h4 id="prerequisites-disaster-recovery-with-active-and-passive-project-server-and-backup-and-restore"><a class="anchor" href="#prerequisites-disaster-recovery-with-active-and-passive-project-server-and-backup-and-restore"></a>3.4.1. Prerequisites</h4>
<div class="ulist">
<ul>
<li>
<p>Review <a href="#overview-of-recommended-disaster-recovery-plans">Overview of recommended disaster recovery plans</a> to ensure that this disaster recovery plan works for you.</p>
</li>
<li>
<p>You have a Foreman&#160;server installed.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="preparing-for-disaster-recovery-with-active-and-passive-project-server-and-backup-and-restore"><a class="anchor" href="#preparing-for-disaster-recovery-with-active-and-passive-project-server-and-backup-and-restore"></a>3.4.2. Preparing for disaster recovery with active and passive Foreman&#160;server and backup and restore</h4>
<div class="paragraph">
<p>Create your passive Foreman&#160;server by restoring a backup of your active Foreman&#160;server.
Configure periodic backups of the active server.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Define a schedule for periodic offline backups of your active Foreman&#160;server.
Consider your tolerance for potential data loss and your storage options: Taking backups frequently will result in smaller amounts of data loss in case of a disaster, but backups require a significant amount of storage space.</p>
<div class="paragraph">
<p>You can combine full backups with incremental backups.
For an example of a <code>cron</code> job that ensures regular backups, see <a href="#Example_of_a_Weekly_Full_Backup_Followed_by_Daily_Incremental_Backups_dr-backup-restore">Example of a weekly full backup followed by daily incremental backups</a>.</p>
</div>
</li>
<li>
<p>Schedule periodic offline backups of your active Foreman&#160;server to be taken according to the schedule you defined.
For information about performing backups, see <a href="#backing-up-foreman-server-and-smart-proxy_admin">Backing up Foreman&#160;server and Smart&#160;Proxy&#160;server</a>.</p>
</li>
<li>
<p>Ensure that the backup directories are encrypted and regularly synchronized to a secure location.
By default, Foreman stores the backups in the <code><em>/var/foreman-backup</em></code> directory.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>Encrypting or moving the backups to a secure location helps minimize the risk of damage or unauthorized access to the hosts.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Restore the most recent backup on a system that will serve as your passive Foreman&#160;server.
For information about restoring backups, see <a href="#restoring-foreman-server-or-smart-proxy-from-a-backup_admin">Restoring Foreman&#160;server or Smart&#160;Proxy&#160;server from a backup</a>.</p>
</li>
<li>
<p>Optional: Automate backup restoration to keep the passive server periodically updated with the latest backup.
A regularly restored passive server helps reduce switchover time if the active server fails.</p>
<div class="paragraph">
<p>Consider how often you want the backups to be restored: More frequent updates reduce potential data loss but increase infrastructure and automation costs.</p>
</div>
</li>
<li>
<p>Power off the passive server.
Keep the active server powered on.</p>
</li>
<li>
<p>Define your backup retention policy.
Consider how many backups you want to store: Regularly removing outdated backups helps optimize storage usage.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Verification</div>
<ol class="arabic">
<li>
<p>Verify that Foreman takes backups according to the schedule you defined.</p>
</li>
<li>
<p>Perform further testing steps in an isolated staging environment:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Mimic a full outage on the active server.
To make sure the active server is inaccessible, you can turn the machine off, halt the virtual machine (VM) if your server runs on a VM, or isolate the machine by using a firewall.</p>
</li>
<li>
<p>Switch DNS records of the active server with the DNS records of the passive server.</p>
</li>
<li>
<p>Assess the functionality of the test Foreman&#160;server.
For more information, see <a href="#Retrieving_the_Status_of_Services_dr-backup-restore">Retrieving the status of services</a>.</p>
</li>
<li>
<p>Perform these verification checks regularly.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="recovering-from-disaster-with-active-and-passive-server-and-backup-and-restore"><a class="anchor" href="#recovering-from-disaster-with-active-and-passive-server-and-backup-and-restore"></a>3.4.3. Recovering from disaster with active and passive server and backup and restore</h4>
<div class="paragraph">
<p>If your active Foreman&#160;server fails, activate your passive secondary server.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Verify that the failed active server is powered off and that backups are no longer being synchronized to your passive server.</p>
</li>
<li>
<p>Switch DNS records of the active server with the DNS records of the passive server.
This ensures that hosts remain connected and you do not need to re-register them.</p>
</li>
<li>
<p>Assess the functionality of your new active Foreman&#160;server.
For more information, see <a href="#Retrieving_the_Status_of_Services_dr-backup-restore">Retrieving the status of services</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Retrieving_the_Status_of_Services_dr-backup-restore"><a class="anchor" href="#Retrieving_the_Status_of_Services_dr-backup-restore"></a>3.4.4. Retrieving the status of services</h4>
<div class="paragraph">
<p>Foreman uses a set of back-end services.
When troubleshooting, you can check the status of Foreman services.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>About</strong>.</p>
<div class="ulist">
<ul>
<li>
<p>On the <strong>Smart Proxies</strong> tab, view the status of all Smart&#160;Proxies.</p>
</li>
<li>
<p>On the <strong>Compute Resources</strong> tab, view the status of attached compute resource providers.</p>
</li>
<li>
<p>In the <strong>Backend System Status</strong> table, view the status of all back-end services.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Get information from the database and Foreman services:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer ping</pre>
</div>
</div>
</li>
<li>
<p>Check the status of the services running in systemd:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain service status</pre>
</div>
</div>
<div class="paragraph">
<p>Run <code>foreman-maintain service --help</code> for more information.</p>
</div>
</li>
<li>
<p>Perform a health check:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ foreman-maintain health check</pre>
</div>
</div>
<div class="paragraph">
<p>Run <code>foreman-maintain health --help</code> for more information.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Example_of_a_Weekly_Full_Backup_Followed_by_Daily_Incremental_Backups_dr-backup-restore"><a class="anchor" href="#Example_of_a_Weekly_Full_Backup_Followed_by_Daily_Incremental_Backups_dr-backup-restore"></a>3.4.5. Example of a weekly full backup followed by daily incremental backups</h4>
<div class="paragraph">
<p>The following script performs a full backup on a Sunday followed by incremental backups for each of the following days.
A new subdirectory is created for each day that an incremental backup is performed.
The script requires a daily cron job.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-bash" data-lang="bash">#!/bin/bash -e
PATH=/sbin:/bin:/usr/sbin:/usr/bin
DESTINATION=/var/backup_directory
if [[ $(date +%w) == 0 ]]; then
  foreman-maintain backup offline --assumeyes $DESTINATION
else
  LAST=$(ls -td -- $DESTINATION/*/ | head -n 1)
  foreman-maintain backup offline --assumeyes --incremental "$LAST" $DESTINATION
fi
exit 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the <code>foreman-maintain backup</code> command requires <code>/sbin</code> and <code>/usr/sbin</code> directories to be in <code>PATH</code> and the <code>--assumeyes</code> option is used to skip the confirmation prompt.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="disaster-recovery-with-two-active-foreman-servers"><a class="anchor" href="#disaster-recovery-with-two-active-foreman-servers"></a>3.5. Disaster recovery with two active Foreman&#160;servers</h3>
<div class="paragraph">
<p>To prepare for disaster recovery, you can configure two Foreman&#160;servers and operate each server in a different data center.
If one of the servers fails, you can re-register all hosts from the failed server to the other server.</p>
</div>
<div class="sect3">
<h4 id="prerequisites-disaster-recovery-with-two-active-project-servers"><a class="anchor" href="#prerequisites-disaster-recovery-with-two-active-project-servers"></a>3.5.1. Prerequisites</h4>
<div class="ulist">
<ul>
<li>
<p>Review <a href="#overview-of-recommended-disaster-recovery-plans">Overview of recommended disaster recovery plans</a> to ensure that this disaster recovery plan works for you.</p>
</li>
<li>
<p>You have a Foreman&#160;server installed.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="preparing-for-disaster-recovery-with-two-active-project-servers"><a class="anchor" href="#preparing-for-disaster-recovery-with-two-active-project-servers"></a>3.5.2. Preparing for disaster recovery with two active Foreman&#160;servers</h4>
<div class="paragraph">
<p>Create a second Foreman&#160;server by restoring a backup of your first Foreman&#160;server.
Configure both servers to operate independently in their respective data centers, but ensure that their content does not drift apart over time.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Back up your Foreman&#160;server.
For more information, see <a href="#backing-up-foreman-server-and-smart-proxy_admin">Backing up Foreman&#160;server and Smart&#160;Proxy&#160;server</a>.</p>
</li>
<li>
<p>Restore the backup on a system that will serve as your other Foreman&#160;server.
For more information, see <a href="#restoring-foreman-server-or-smart-proxy-from-a-backup_admin">Restoring Foreman&#160;server or Smart&#160;Proxy&#160;server from a backup</a>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Each server must have a distinct hostname and IP address.
This enables you to re-register hosts if one of the servers fails.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Ensure that content on your servers remains consistent:</p>
<div class="ulist">
<ul>
<li>
<p>If you want both servers to manage content synchronization and content view creation, follow these guidelines to prevent content drift:</p>
<div class="ulist">
<ul>
<li>
<p>Regularly synchronize repositories on both servers.
You can use the following Ansible modules to automate repository synchronization: <code>theforeman.foreman.repository_sync</code> and <code>theforeman.foreman.sync_plan</code>.</p>
</li>
<li>
<p>Ensure that content views on both servers match.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If you want one server to manage content synchronization and content view creation, use one of these features to prevent content drift:</p>
<div class="ulist">
<ul>
<li>
<p>If your disaster recovery site has network access to your primary site, use Inter-Server Synchronization (ISS) to ensure your disaster recovery server synchronizes its content from the primary server.</p>
</li>
<li>
<p>If your disaster recovery site does not have network access to your primary site, synchronize content by using export and import.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If you want one server to manage only content view creation but not content synchronization, you can configure the other server or multiple other servers to import content views from the first server but synchronize content from repositories.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Register hosts to your servers so that each server manages hosts in its respective data center.
For example, register all hosts in <em>My_Data_Center_1</em> to one Foreman&#160;server and all hosts in <em>My_Data_Center_2</em> to the other Foreman&#160;server.</p>
</li>
<li>
<p>Automate running the <code>foreman-maintain health check</code> command on both servers.
The health check verifies whether the servers remain fully operational.</p>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Verification</div>
<p>Perform this test in an isolated staging environment:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Mimic a full outage on one of your servers.
To verify that the server is inaccessible, you can turn the machine off, halt the virtual machine (VM) if your server runs on a VM, or isolate the machine by using a firewall.</p>
</li>
<li>
<p>Verify that your <code>foreman-maintain health check</code> automation reported an error.</p>
</li>
<li>
<p>Re-register all hosts from the inaccessible server to the accessible server.</p>
</li>
<li>
<p>Verify that hosts have been properly re-registered to the accessible server.</p>
</li>
<li>
<p>Perform these verification checks regularly.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>Ansible playbooks can help you automate failover, re-registration, and synchronization.
For more information, see <a href="https://docs.theforeman.org/3.16/Project_Ansible_Collection/index-foreman-deb.html#"><em>Using the Foreman Ansible Collection</em></a>.</p>
</li>
<li>
<p>For more information on synchronizing repositories, see <a href="https://docs.theforeman.org/3.16/Managing_Content/index-foreman-deb.html#Synchronizing_Repositories_content-management">Synchronizing repositories</a> in <em>Managing content</em>.</p>
</li>
<li>
<p>For more information on synchronizing content between Foreman&#160;servers, including ISS, export, and import, see <a href="https://docs.theforeman.org/3.16/Managing_Content/index-foreman-deb.html#Synchronizing_Content_Between_Servers_content-management">Synchronizing content between Foreman&#160;servers</a> in <em>Managing content</em>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="recovering-from-disaster-with-two-active-project-servers"><a class="anchor" href="#recovering-from-disaster-with-two-active-project-servers"></a>3.5.3. Recovering from disaster with two active Foreman&#160;servers</h4>
<div class="paragraph">
<p>If the health checks implemented in <a href="#preparing-for-disaster-recovery-with-two-active-project-servers">Preparing for disaster recovery with two active Foreman&#160;servers</a> report an issue on one of your Foreman&#160;servers, it might mean that the server has failed.
If the server is down, you must re-register hosts to the other server.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Verify the status of the server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain health check</pre>
</div>
</div>
</li>
<li>
<p>If <code>foreman-maintain health check</code> reported a problem, ensure that the server is powered off.</p>
</li>
<li>
<p>Re-register all hosts from the data center managed by the failed server to the other, functional server.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>Verify that hosts have been properly re-registered.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>Ansible playbooks can help you automate failover, re-registration, and synchronization.
For more information, see <a href="https://docs.theforeman.org/3.16/Project_Ansible_Collection/index-foreman-deb.html#"><em>Using the Foreman Ansible Collection</em></a>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Managing_Users_and_Roles_admin"><a class="anchor" href="#Managing_Users_and_Roles_admin"></a>4. Managing users and roles</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A User defines a set of details for individuals who use the system.
Users can be associated with organizations and environments, so that when they create new entities, the default settings are automatically used.
Users can also have one or more <em>roles</em> attached, which grants them rights to view and manage organizations and environments.
See <a href="#Managing_Users_admin">Managing users</a> for more information on working with users.</p>
</div>
<div class="paragraph">
<p>You can manage permissions of several users at once by organizing them into user groups.
User groups themselves can be further grouped to create a hierarchy of permissions.
For more information on creating user groups, see <a href="#Creating_and_Managing_User_Groups_admin">Creating and managing user groups</a>.</p>
</div>
<div class="paragraph">
<p>Roles define a set of permissions and access levels.
Each role contains one on more <em>permission filters</em> that specify the actions allowed for the role.
Actions are grouped according to the <em>Resource type</em>.
Once a role has been created, users and user groups can be associated with that role.
This way, you can assign the same set of permissions to large groups of users.
Foreman provides a set of predefined roles and also enables creating custom roles and permission filters as described in <a href="#creating-and-managing-roles">Creating and managing roles</a>.</p>
</div>
<div class="sect2">
<h3 id="Managing_Users_admin"><a class="anchor" href="#Managing_Users_admin"></a>4.1. Managing users</h3>
<div class="paragraph">
<p>As an administrator, you can create, modify and remove Foreman users.
You can also configure access permissions for a user or a group of users by assigning them different <em>roles</em>.</p>
</div>
<div class="sect3">
<h4 id="Creating_a_User_admin"><a class="anchor" href="#Creating_a_User_admin"></a>4.1.1. Creating a user</h4>
<div class="paragraph">
<p>Use this procedure to create a user.
To use the CLI instead of the Foreman web UI, see the <a href="#cli-creating-a-user_admin">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Users</strong>.</p>
</li>
<li>
<p>Click <strong>Create User</strong>.</p>
</li>
<li>
<p>Enter the account details for the new user.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to create the user.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The user account details that you can specify include the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>On the <strong>User</strong> tab, select an authentication source from the <strong>Authorized by</strong> list:</p>
<div class="ulist">
<ul>
<li>
<p><strong>INTERNAL</strong>: to manage the user inside Foreman&#160;server.</p>
</li>
<li>
<p><strong>EXTERNAL</strong>: to manage the user with external authentication.
For more information, see <a href="https://docs.theforeman.org/3.16/Configuring_User_Authentication/index-foreman-deb.html#"><em>Configuring authentication for Foreman users</em></a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>On the <strong>Organizations</strong> tab, select an organization for the user.
Specify the default organization Foreman selects for the user after login from the <strong>Default on login</strong> list.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>If a user is not assigned to an organization, their access is limited.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div id="cli-creating-a-user_admin" class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Create a user:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer user create \
--auth-source-id <em>My_Authentication_Source</em> \
--login <em>My_User_Name</em> \
--mail <em>My_User_Mail</em> \
--organization-ids <em>My_Organization_ID_1</em>,<em>My_Organization_ID_2</em> \
--password <em>My_User_Password</em></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>--auth-source-id 1</code> setting means that the user is authenticated internally, you can specify an external authentication source as an alternative.
Add the <code>--admin</code> option to grant administrator privileges to the user.
Specifying organization IDs is not required.</p>
</div>
<div class="paragraph">
<p>You can modify the user details later by using the <code>hammer user update</code> command.</p>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>For more information about creating user accounts by using Hammer, enter <code>hammer user create --help</code>.</p>
</li>
</ul>
</div>
<div id="api-creating-a-user" class="listingblock">
<div class="title">API request</div>
<div class="content">
<pre class="nowrap">$ curl \
--header "Accept:application/json" \
--header "Content-Type:application/json" \
--request POST \
--user <em>My_User_Name</em>:<em>My_Password</em> \
--data "{\"firstname\":\"<em>Test Name</em>\",\"mail\":\"<em>test@example.com</em>\",\"login\":\"<em>test_user</em>\",\"password\":\"<em>password123</em>\",\"auth_source_id\":<em>1</em>}" \
https://<em>foreman.example.com</em>/api/users \
| python3 -m json.tool</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Assigning_Roles_to_a_User_admin"><a class="anchor" href="#Assigning_Roles_to_a_User_admin"></a>4.1.2. Assigning roles to a user</h4>
<div class="paragraph">
<p>Use this procedure to assign roles to a user.
To use the CLI instead of the Foreman web UI, see the <a href="#cli-assigning-roles-to-a-user_admin">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Users</strong>.</p>
</li>
<li>
<p>Click the <strong>username</strong> of the user to be assigned one or more roles.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If a user account is not listed, check that you are currently viewing the correct organization.
To list all the users in Foreman, click <strong>Default Organization</strong> and then <strong>Any Organization</strong>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click the <strong>Locations</strong> tab, and select a location if none is assigned.</p>
</li>
<li>
<p>Click the <strong>Organizations</strong> tab, and check that an organization is assigned.</p>
</li>
<li>
<p>Click the <strong>Roles</strong> tab to display the list of available roles.</p>
</li>
<li>
<p>Select the roles to assign from the <strong>Roles</strong> list.</p>
<div class="paragraph">
<p>To grant all the available permissions, select the <strong>Administrator</strong> checkbox.</p>
</div>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To view the roles assigned to a user, click the <strong>Roles</strong> tab; the assigned roles are listed under <strong>Selected items</strong>.
To remove an assigned role, click the role name in <strong>Selected items</strong>.</p>
</div>
<div id="cli-assigning-roles-to-a-user_admin" class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Assign roles to a user:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer user add-role \
--id <em>My_User_ID</em> \
--role <em>My_Role_Name</em></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Impersonating_a_Different_User_Account_admin"><a class="anchor" href="#Impersonating_a_Different_User_Account_admin"></a>4.1.3. Impersonating a different user account</h4>
<div class="paragraph">
<p>Administrators can impersonate other authenticated users for testing and troubleshooting purposes by temporarily logging on to the Foreman web UI as a different user.
When impersonating another user, the administrator has permissions to access exactly what the impersonated user can access in the system, including the same menus.</p>
</div>
<div class="paragraph">
<p>Audits are created to record the actions that the administrator performs while impersonating another user.
However, all actions that an administrator performs while impersonating another user are recorded as having been performed by the impersonated user.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure that you are logged on to the Foreman web UI as a user with administrator privileges for Foreman.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Users</strong>.</p>
</li>
<li>
<p>To the right of the user that you want to impersonate, from the list in the <strong>Actions</strong> column, select <strong>Impersonate</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When you want to stop the impersonation session, in the upper right of the main menu, click the impersonation icon.</p>
</div>
</div>
<div class="sect3">
<h4 id="Creating_an_API_Only_User_admin"><a class="anchor" href="#Creating_an_API_Only_User_admin"></a>4.1.4. Creating an API-only user</h4>
<div class="paragraph">
<p>You can create users that can interact only with the Foreman API.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have created a user and assigned roles to them.
Note that this user must be authorized internally.
For more information, see the following sections:</p>
<div class="ulist">
<ul>
<li>
<p><a href="#Creating_a_User_admin">Creating a user</a></p>
</li>
<li>
<p><a href="#Assigning_Roles_to_a_User_admin">Assigning roles to a user</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in to your Foreman as admin.</p>
</li>
<li>
<p>Navigate to <strong>Administer &gt; Users</strong> and select a user.</p>
</li>
<li>
<p>On the <strong>User</strong> tab, set a password.
Do not save or communicate this password with others.
You can create pseudo-random strings on your console:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># openssl rand -hex 32</pre>
</div>
</div>
</li>
<li>
<p>Create a Personal Access Token for the user.
For more information, see <a href="#creating-a-personal-access-token_admin">Creating a Personal Access Token</a>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Managing_SSH_Keys_admin"><a class="anchor" href="#Managing_SSH_Keys_admin"></a>4.2. Managing SSH keys</h3>
<div class="paragraph">
<p>Adding SSH keys to a user allows deployment of SSH keys during provisioning.
For information on deploying SSH keys during provisioning, see <a href="https://docs.theforeman.org/3.16/Provisioning_Hosts/index-foreman-deb.html#Deploying_SSH_Keys_During_Provisioning_provisioning">Deploying SSH Keys during Provisioning</a> in <em>Provisioning hosts</em>.</p>
</div>
<div class="paragraph">
<p>For information on SSH keys and SSH key creation, see <a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html-single/configuring_basic_system_settings/index#assembly_using-secure-communications-between-two-systems-with-openssh_configuring-basic-system-settings">Using secure communications between two systems with OpenSSH</a> in <em>Red&#160;Hat Enterprise Linux&#160;9 Configuring basic system settings</em>.</p>
</div>
<div class="sect3">
<h4 id="Managing_SSH_Keys_for_a_User_admin"><a class="anchor" href="#Managing_SSH_Keys_for_a_User_admin"></a>4.2.1. Managing SSH keys for a user</h4>
<div class="paragraph">
<p>Use this procedure to add or remove SSH keys for a user.
To use the CLI instead of the Foreman web UI, see the <a href="#cli-managing-ssh-keys-for-a-user_admin">CLI procedure</a>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure that you are logged in to the Foreman web UI as an Admin user of Foreman or a user with the <em>create_ssh_key</em> permission enabled for adding SSH key and <em>destroy_ssh_key</em> permission for removing a key.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Users</strong>.</p>
</li>
<li>
<p>From the <strong>Username</strong> column, click on the username of the required user.</p>
</li>
<li>
<p>Click on the <strong>SSH Keys</strong> tab.</p>
<div class="ulist">
<ul>
<li>
<p>To Add SSH key</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Prepare the content of the public SSH key in a clipboard.</p>
</li>
<li>
<p>Click <strong>Add SSH Key</strong>.</p>
</li>
<li>
<p>In the <strong>Key</strong> field, paste the public SSH key content from the clipboard.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for the SSH key.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>To Remove SSH key</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Click <strong>Delete</strong> on the row of the SSH key to be deleted.</p>
</li>
<li>
<p>Click <strong>OK</strong> in the confirmation prompt.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="cli-managing-ssh-keys-for-a-user_admin" class="paragraph">
<div class="title">CLI procedure</div>
<p>To add an SSH key to a user, you must specify either the path to the public SSH key file, or the content of the public SSH key copied to the clipboard.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If you have the public SSH key file, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer user ssh-keys add \
--user-id <em>user_id</em> \
--name <em>key_name</em> \
--key-file <em>~/.ssh/id_rsa.pub</em></pre>
</div>
</div>
</li>
<li>
<p>If you have the content of the public SSH key, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer user ssh-keys add \
--user-id <em>user_id</em> \
--name <em>key_name</em> \
--key <em>ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNtYAAABBBHHS2KmNyIYa27Qaa7EHp+2l99ucGStx4P77e03ZvE3yVRJEFikpoP3MJtYYfIe8k 1/46MTIZo9CPTX4CYUHeN8= host@user</em></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>To delete an SSH key from a user, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer user ssh-keys delete --id <em>key_id</em> --user-id <em>user_id</em></pre>
</div>
</div>
<div class="paragraph">
<p>To view an SSH key attached to a user, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer user ssh-keys info --id <em>key_id</em> --user-id <em>user_id</em></pre>
</div>
</div>
<div class="paragraph">
<p>To list SSH keys attached to a user, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer user ssh-keys list --user-id <em>user_id</em></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="managing-personal-access-tokens_admin"><a class="anchor" href="#managing-personal-access-tokens_admin"></a>4.3. Managing Personal Access Tokens</h3>
<div class="paragraph">
<p>Personal Access Tokens allow you to authenticate API requests without using your password.
You can set an expiration date for your Personal Access Token and you can revoke it if you decide it should expire before the expiration date.</p>
</div>
<div class="sect3">
<h4 id="creating-a-personal-access-token_admin"><a class="anchor" href="#creating-a-personal-access-token_admin"></a>4.3.1. Creating a Personal Access Token</h4>
<div class="paragraph">
<p>Use this procedure to create a Personal Access Token.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Users</strong>.</p>
</li>
<li>
<p>Select a user for which you want to create a Personal Access Token.</p>
</li>
<li>
<p>On the <strong>Personal Access Tokens</strong> tab, click <strong>Add Personal Access Token</strong>.</p>
</li>
<li>
<p>Enter a <strong>Name</strong> for you Personal Access Token.</p>
</li>
<li>
<p>Optional: Select the <strong>Expires</strong> date to set an expiration date.
If you do not set an expiration date, your Personal Access Token will never expire unless revoked.</p>
</li>
<li>
<p>Click Submit.
You now have the Personal Access Token available to you on the <strong>Personal Access Tokens</strong> tab.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>Ensure to store your Personal Access Token as you will not be able to access it again after you leave the page or create a new Personal Access Token.
You can click <strong>Copy to clipboard</strong> to copy your Personal Access Token.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Verification</div>
<ol class="arabic">
<li>
<p>Make an API request to your Foreman&#160;server and authenticate with your Personal Access Token:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ curl \
--user <em>My_Username</em>:<em>My_Personal_Access_Token</em> \
https://<em>foreman.example.com</em>/api/status</pre>
</div>
</div>
</li>
<li>
<p>You should receive a response with status <code>200</code>, for example:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-none" data-lang="none">{"foreman_version":"3.16.0","result":"ok","status":200,"version":"3.5.1.10","api_version":2}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you go back to <strong>Personal Access Tokens</strong> tab, you can see the updated <strong>Last Used</strong> time next to your Personal Access Token.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="revoking-a-personal-access-token_admin"><a class="anchor" href="#revoking-a-personal-access-token_admin"></a>4.3.2. Revoking a Personal Access Token</h4>
<div class="paragraph">
<p>Use this procedure to revoke a Personal Access Token before its expiration date.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Users</strong>.</p>
</li>
<li>
<p>Select a user for which you want to revoke the Personal Access Token.</p>
</li>
<li>
<p>On the <strong>Personal Access Tokens</strong> tab, locate the Personal Access Token you want to revoke.</p>
</li>
<li>
<p>Click <strong>Revoke</strong> in the <strong>Actions</strong> column next to the Personal Access Token you want to revoke.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Verification</div>
<ol class="arabic">
<li>
<p>Make an API request to your Foreman&#160;server and try to authenticate with the revoked Personal Access Token:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ curl \
--user <em>My_Username</em>:<em>My_Personal_Access_Token</em> \
https://<em>foreman.example.com</em>/api/status</pre>
</div>
</div>
</li>
<li>
<p>You receive the following error message:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-none" data-lang="none">{
  "error": {"message":"Unable to authenticate user <em>My_Username</em>"}
}</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Creating_and_Managing_User_Groups_admin"><a class="anchor" href="#Creating_and_Managing_User_Groups_admin"></a>4.4. Creating and managing user groups</h3>
<div class="sect3">
<h4 id="User_Groups_admin"><a class="anchor" href="#User_Groups_admin"></a>4.4.1. User groups</h4>
<div class="paragraph">
<p>With Foreman, you can assign permissions to groups of users.
You can also create user groups as collections of other user groups.
If you use an external authentication source, you can map Foreman user groups to external user groups as described in <a href="https://docs.theforeman.org/3.16/Configuring_User_Authentication/index-foreman-deb.html#Configuring_External_User_Groups_authentication">Configuring external user groups</a> in <em>Configuring authentication for Foreman users</em>.</p>
</div>
<div class="paragraph">
<p>User groups are defined in an organizational context, meaning that you must select an organization before you can access user groups.</p>
</div>
</div>
<div class="sect3">
<h4 id="Creating_a_User_Group_admin"><a class="anchor" href="#Creating_a_User_Group_admin"></a>4.4.2. Creating a user group</h4>
<div class="paragraph">
<p>Use this procedure to create a user group.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>User Groups</strong>.</p>
</li>
<li>
<p>Click <strong>Create User group</strong>.</p>
</li>
<li>
<p>On the <strong>User Group</strong> tab, specify the name of the new user group and select group members:</p>
<div class="ulist">
<ul>
<li>
<p>Select the previously created user groups from the <strong>User Groups</strong> list.</p>
</li>
<li>
<p>Select users from the <strong>Users</strong> list.</p>
</li>
</ul>
</div>
</li>
<li>
<p>On the <strong>Roles</strong> tab, select the roles you want to assign to the user group.
Alternatively, select the <strong>Admin</strong> checkbox to assign all available permissions.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Create a user group:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer user-group create \
--name <em>My_User_Group_Name</em> \
--role-ids <em>My_Role_ID_1</em>,<em>My_Role_ID_2</em> \
--user-ids <em>My_User_ID_1</em>,<em>My_User_ID_2</em></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Removing_a_User_Group_admin"><a class="anchor" href="#Removing_a_User_Group_admin"></a>4.4.3. Removing a user group</h4>
<div class="paragraph">
<p>Use the following procedure to remove a user group from Foreman.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>User Groups</strong>.</p>
</li>
<li>
<p>Click <strong>Delete</strong> to the right of the user group you want to delete.</p>
</li>
<li>
<p>Click <strong>Confirm</strong> to delete the user group.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="creating-and-managing-roles"><a class="anchor" href="#creating-and-managing-roles"></a>4.5. Creating and managing roles</h3>
<div class="paragraph">
<p>Users in Foreman can have one or more roles assigned.
These roles are associated with permissions that enable users to perform specified administrative actions in Foreman.
Permission filters define the actions allowed for a certain resource type.</p>
</div>
<div class="paragraph">
<p>Foreman provides a set of predefined roles with permissions sufficient for standard tasks.
You can also configure custom roles.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>One of the predefined roles is the <strong>Default role</strong>.
Foreman assigns the <strong>Default role</strong> to every user in the system.
By default, the <strong>Default role</strong> grants only a limited set of permissions.
Be aware that if you add a permission to the <strong>Default role</strong>, every Foreman users will gain that permission.
Assigning a different role to a user does not remove the <strong>Default role</strong> from the user.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following types of roles are commonly defined within various Foreman deployments:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Roles related to applications or parts of infrastructure</dt>
<dd>
<p>For example, roles for owners of Enterprise Linux as the operating system as opposed to roles for owners of application servers and database servers.</p>
</dd>
<dt class="hdlist1">Roles related to a particular stage of the software lifecycle</dt>
<dd>
<p>For example, roles divided among the development, testing, and production phases, where each phase has one or more owners.</p>
</dd>
<dt class="hdlist1">Roles related to specific tasks</dt>
<dd>
<p>For example, you can create a role for security managers and a role for license managers, depending on the specific tasks users need to be able to perform within your organization.</p>
</dd>
</dl>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>For a list of these roles, see <a href="#predefined-roles-available-in-foreman">Predefined roles available in Foreman</a>.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="Creating_a_Role_admin"><a class="anchor" href="#Creating_a_Role_admin"></a>4.5.1. Creating a role</h4>
<div class="paragraph">
<p>Use this procedure to create a role.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Roles</strong>.</p>
</li>
<li>
<p>Click <strong>Create Role</strong>.</p>
</li>
<li>
<p>Provide a <strong>Name</strong> for the role.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to save your new role.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Create a role:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer role create --name <em>My_Role_Name</em></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>To serve its purpose, a role must contain permissions.
After creating a role, proceed to <a href="#Adding_Permissions_to_a_Role_admin">Adding permissions to a role</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="Cloning_a_Role_admin"><a class="anchor" href="#Cloning_a_Role_admin"></a>4.5.2. Cloning a role</h4>
<div class="paragraph">
<p>Use the Foreman web UI to clone a role.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Roles</strong> and select <strong>Clone</strong> from the drop-down menu to the right of the required role.</p>
</li>
<li>
<p>Provide a <strong>Name</strong> for the role.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to clone the role.</p>
</li>
<li>
<p>Click the name of the cloned role and navigate to <strong>Filters</strong>.</p>
</li>
<li>
<p>Edit the permissions as required.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to save your new role.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Adding_Permissions_to_a_Role_admin"><a class="anchor" href="#Adding_Permissions_to_a_Role_admin"></a>4.5.3. Adding permissions to a role</h4>
<div class="paragraph">
<p>Use this procedure to add permissions to a role.
To use the CLI instead of the Foreman web UI, see the <a href="#cli-adding-permissions-to-a-role_admin">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Roles</strong>.</p>
</li>
<li>
<p>Select <strong>Add Filter</strong> from the drop-down list to the right of the required role.</p>
</li>
<li>
<p>Select the <strong>Resource type</strong> from the drop-down list.
The <em>(Miscellaneous)</em> group gathers permissions that are not associated with any resource group.</p>
</li>
<li>
<p>Click the permissions you want to select from the <strong>Permission</strong> list.</p>
</li>
<li>
<p>Depending on the <strong>Resource type</strong> selected, you can select or deselect the <strong>Unlimited</strong> and <strong>Override</strong> checkbox.
The <strong>Unlimited</strong> checkbox is selected by default, which means that the permission is applied on all resources of the selected type.
When you disable the <strong>Unlimited</strong> checkbox, the <strong>Search</strong> field activates.
In this field you can specify further filtering with use of the Foreman search syntax.
For more information, see <a href="#Granular_Permission_Filtering_admin">Granular permission filtering</a>.
When you enable the <strong>Override</strong> checkbox, you can add additional locations and organizations to allow the role to access the resource type in the additional locations and organizations; you can also remove an already associated location and organization from the resource type to restrict access.</p>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to save changes.</p>
</li>
</ol>
</div>
<div id="cli-adding-permissions-to-a-role_admin" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all available permissions:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer filter available-permissions</pre>
</div>
</div>
</li>
<li>
<p>Add permissions to a role:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer filter create \
--permission-ids <em>My_Permission_ID_1</em>,<em>My_Permission_ID_2</em> \
--role <em>My_Role_Name</em></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>For more information about roles and permissions parameters, enter the <code>hammer role --help</code> and <code>hammer filter --help</code> commands.</p>
</div>
</div>
<div class="sect3">
<h4 id="Viewing_Permissions_of_a_Role_admin"><a class="anchor" href="#Viewing_Permissions_of_a_Role_admin"></a>4.5.4. Viewing permissions of a role</h4>
<div class="paragraph">
<p>Use the Foreman web UI to view the permissions of a role.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Roles</strong>.</p>
</li>
<li>
<p>Click <strong>Filters</strong> to the right of the required role to get to the <strong>Filters</strong> page.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The <strong>Filters</strong> page contains a table of permissions assigned to a role grouped by the resource type.
It is also possible to generate a complete table of permissions and actions that you can use on your Foreman system.
For more information, see <a href="#Creating_a_Complete_Permission_Table_admin">Creating a complete permission table</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="Creating_a_Complete_Permission_Table_admin"><a class="anchor" href="#Creating_a_Complete_Permission_Table_admin"></a>4.5.5. Creating a complete permission table</h4>
<div class="paragraph">
<p>Use the Foreman CLI to create a permission table.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure that the <code>foreman-console</code> package is installed on Foreman&#160;server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># apt install foreman-console</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Start the Foreman console:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-rake console</pre>
</div>
</div>
</li>
<li>
<p>Insert the following code into the console:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-none" data-lang="none">f = File.open('/tmp/table.html', 'w')

result = Foreman::AccessControl.permissions {|a,b| a.security_block &lt;=&gt; b.security_block}.collect do |p|
      actions = p.actions.collect { |a| "&lt;li&gt;#{a}&lt;/li&gt;" }
      "&lt;tr&gt;&lt;td&gt;#{p.name}&lt;/td&gt;&lt;td&gt;&lt;ul&gt;#{actions.join('')}&lt;/ul&gt;&lt;/td&gt;&lt;td&gt;#{p.resource_type}&lt;/td&gt;&lt;/tr&gt;"
end.join("\n")

f.write(result)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above syntax creates a table of permissions and saves it to the <code>/tmp/table.html</code> file.</p>
</div>
</li>
<li>
<p>Press <code><strong>Ctrl</strong></code> + <code><strong>D</strong></code> to exit the Foreman console.</p>
</li>
<li>
<p>Insert the following text at the first line of <code>/tmp/table.html</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-none" data-lang="none">&lt;table border="1"&gt;&lt;tr&gt;&lt;td&gt;Permission name&lt;/td&gt;&lt;td&gt;Actions&lt;/td&gt;&lt;td&gt;Resource type&lt;/td&gt;&lt;/tr&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Append the following text at the end of <code>/tmp/table.html</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-none" data-lang="none">&lt;/table&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Open <code>/tmp/table.html</code> in a web browser to view the table.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Removing_a_Role_admin"><a class="anchor" href="#Removing_a_Role_admin"></a>4.5.6. Removing a role</h4>
<div class="paragraph">
<p>Use the following procedure to remove a role from Foreman.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Roles</strong>.</p>
</li>
<li>
<p>Select <strong>Delete</strong> from the drop-down list to the right of the role to be deleted.</p>
</li>
<li>
<p>Click <strong>Confirm</strong> to delete the role.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="predefined-roles-available-in-foreman"><a class="anchor" href="#predefined-roles-available-in-foreman"></a>4.6. Predefined roles available in Foreman</h3>
<div class="paragraph">
<p>The following table provides an overview of permissions that predefined roles in Foreman grant to a user.</p>
</div>
<div class="paragraph">
<p>For a complete set of predefined roles and the permissions they grant, log in to Foreman web UI as the privileged user and navigate to <strong>Administer</strong> &gt; <strong>Roles</strong>.
For more information, see <a href="#Viewing_Permissions_of_a_Role_admin">Viewing permissions of a role</a>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 23.0769%;">
<col style="width: 38.4615%;">
<col style="width: 38.4616%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Predefined role</th>
<th class="tableblock halign-left valign-top">Permissions the role provides</th>
<th class="tableblock halign-left valign-top">Additional information</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Auditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">View the Audit log.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default role</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The permissions this role provides depend on whether the remote execution and tasks plugins are enabled.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman automatically assigns this role to every user in the system.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manager</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">View and edit global settings.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Organization admin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All permissions except permissions for managing organizations.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An administrator role defined per organization.
The role has no visibility into resources in other organizations.</p>
<p class="tableblock">By cloning this role and assigning an organization, you can delegate administration of that organization to a user.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Site manager</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">View permissions for various items.</p>
<p class="tableblock">Permissions to manage hosts in the infrastructure.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A restrained version of the Manager role.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">System admin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Edit global settings in <strong>Administer</strong> &gt; <strong>Settings</strong>.</p>
<p class="tableblock">View, create, edit, and destroy users, user groups, and roles.</p>
<p class="tableblock">View, create, edit, destroy, and assign organizations and locations but not view resources within them.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Users with this role can create users and assign all roles to them.
Give this role only to trusted users.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Viewer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">View the configuration of every element of the Foreman structure, logs, reports, and statistics.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="Granular_Permission_Filtering_admin"><a class="anchor" href="#Granular_Permission_Filtering_admin"></a>4.7. Granular permission filtering</h3>
<div class="paragraph">
<p>As mentioned in <a href="#Adding_Permissions_to_a_Role_admin">Adding permissions to a role</a>, Foreman provides the ability to limit the configured user permissions to selected instances of a resource type.
These granular filters are queries to the Foreman database and are supported by the majority of resource types.</p>
</div>
<div class="sect3">
<h4 id="Creating_a_Granular_Permission_Filter_admin"><a class="anchor" href="#Creating_a_Granular_Permission_Filter_admin"></a>4.7.1. Creating a granular permission filter</h4>
<div class="paragraph">
<p>Use this procedure to create a granular filter.
To use the CLI instead of the Foreman web UI, see the <a href="#cli-creating-a-granular-permission-filter_admin">CLI procedure</a>.</p>
</div>
<div class="paragraph">
<p>Foreman does not apply search conditions to create actions.
For example, limiting the <em>create_locations</em> action with <em>name = "Default Location"</em> expression in the search field does not prevent the user from assigning a custom name to the newly created location.</p>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>Specify a query in the <strong>Search</strong> field on the <strong>Edit Filter</strong> page.
Deselect the <strong>Unlimited</strong> checkbox for the field to be active.
Queries have the following form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"><em>field_name</em> <em>operator</em> <em>value</em></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><em>field_name</em> marks the field to be queried.
The range of available field names depends on the resource type.
For example, the <em>Partition Table</em> resource type offers <em>family</em>, <em>layout</em>, and <em>name</em> as query parameters.</p>
</li>
<li>
<p><em>operator</em> specifies the type of comparison between <em>field_name</em> and <em>value</em>.
See <a href="#Supported_Operators_for_Granular_Search_admin">Supported operators for granular search</a> for an overview of applicable operators.</p>
</li>
<li>
<p><em>value</em> is the value used for filtering.
This can be for example a name of an organization.
Two types of wildcard characters are supported: underscore (_) provides single character replacement, while percent sign (%) replaces zero or more characters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For most resource types, the <strong>Search</strong> field provides a drop-down list suggesting the available parameters.
This list appears after placing the cursor in the search field.
For many resource types, you can combine queries using logical operators such as <em>and</em>, <em>not</em> and <em>has</em> operators.</p>
</div>
<div id="cli-creating-a-granular-permission-filter_admin" class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>To create a granular filter, enter the <code>hammer filter create</code> command with the <code>--search</code> option to limit permission filters, for example:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer filter create \
--permission-ids 91 \
--search "name ~ ccv*" \
--role qa-user</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command adds to the <strong>qa-user</strong> role a permission to view, create, edit, and destroy content views that only applies to content views with name starting with <code>ccv</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="Examples_of_Using_Granular_Permission_Filters_admin"><a class="anchor" href="#Examples_of_Using_Granular_Permission_Filters_admin"></a>4.7.2. Examples of using granular permission filters</h4>
<div class="paragraph">
<p>As an administrator, you can allow selected users to make changes in a certain part of the environment path.
The following filter allows you to work with content while it is in the development stage of the application lifecycle, but the content becomes inaccessible once is pushed to production.</p>
</div>
<div class="sect4">
<h5 id="Applying_Permissions_for_the_Host_Resource_Type_admin"><a class="anchor" href="#Applying_Permissions_for_the_Host_Resource_Type_admin"></a>Applying permissions for the host resource type</h5>
<div class="paragraph">
<p>The following query applies any permissions specified for the Host resource type only to hosts in the group named host-editors.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">hostgroup = host-editors</pre>
</div>
</div>
<div class="paragraph">
<p>The following query returns records where the name matches <em>XXXX</em>, <em>Yyyy</em>, or <em>zzzz</em> example strings:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">name ^ (XXXX, Yyyy, zzzz)</pre>
</div>
</div>
<div class="paragraph">
<p>You can also limit permissions to a selected environment.
To do so, specify the environment name in the <strong>Search</strong> field, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">Dev</pre>
</div>
</div>
<div class="paragraph">
<p>You can limit user permissions to a certain organization or location with the use of the granular permission filter in the <strong>Search</strong> field.
However, some resource types provide a GUI alternative, an <strong>Override</strong> checkbox that provides the <strong>Locations</strong> and <strong>Organizations</strong> tabs.
On these tabs, you can select from the list of available organizations and locations.
For more information, see <a href="#Creating_an_Organization_Specific_Manager_Role_admin">Creating an organization-specific manager role</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="Creating_an_Organization_Specific_Manager_Role_admin"><a class="anchor" href="#Creating_an_Organization_Specific_Manager_Role_admin"></a>Creating an organization-specific manager role</h5>
<div class="paragraph">
<p>Use the Foreman web UI to create an administrative role restricted to a single organization named <em>org-1</em>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Roles</strong>.</p>
</li>
<li>
<p>Clone the existing <strong>Organization admin</strong> role.
Select <strong>Clone</strong> from the drop-down list next to the <strong>Filters</strong> button.
You are then prompted to insert a name for the cloned role, for example <em>org-1 admin</em>.</p>
</li>
<li>
<p>Click the desired locations and organizations to associate them with the role.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to create the role.</p>
</li>
<li>
<p>Click <em>org-1 admin</em>, and click <strong>Filters</strong> to view all associated filters.
The default filters work for most use cases.
However, you can optionally click <strong>Edit</strong> to change the properties for each filter.
For some filters, you can enable the <strong>Override</strong> option if you want the role to be able to access resources in additional locations and organizations.
For example, by selecting the <strong>Domain</strong> resource type, the <strong>Override</strong> option, and then additional locations and organizations using the <strong>Locations</strong> and <strong>Organizations</strong> tabs, you allow this role to access domains in the additional locations and organizations that is not associated with this role.
You can also click <strong>New filter</strong> to associate new filters with this role.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Supported_Operators_for_Granular_Search_admin"><a class="anchor" href="#Supported_Operators_for_Granular_Search_admin"></a>4.7.3. Supported operators for granular search</h4>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Logical operators</caption>
<colgroup>
<col style="width: 22.2222%;">
<col style="width: 77.7778%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">and</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Combines search criteria.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Negates an expression.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">has</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object must have a specified property.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Symbolic operators</caption>
<colgroup>
<col style="width: 22.2222%;">
<col style="width: 77.7778%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Is equal to</em>.
An equality comparison that is case-sensitive for text fields.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">!=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Is not equal to</em>.
An inversion of the = operator.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">~</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Like</em>.
A case-insensitive occurrence search for text fields.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">!~</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Not like</em>.
An inversion of the ~ operator.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">^</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>In</em>.
An equality comparison that is case-sensitive search for text fields.
This generates a different SQL query to the <em>Is equal to</em> comparison, and is more efficient for multiple value comparison.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">!^</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Not in</em>.
An inversion of the ^ operator.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;, &gt;=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Greater than</em>, <em>greater than or equal to</em>.
Supported for numerical fields only.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;, &#8656;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Less than</em>, <em>less than or equal to</em>.
Supported for numerical fields only.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Configuring_Email_Notifications_admin"><a class="anchor" href="#Configuring_Email_Notifications_admin"></a>5. Configuring email notifications</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Email notifications are created by Foreman&#160;server periodically or after completion of certain events.
The periodic notifications can be sent daily, weekly or monthly.</p>
</div>
<div class="paragraph">
<p>For an overview of available notification types, see <a href="#Email_Notification_Types_admin">Email notification types</a>.</p>
</div>
<div class="paragraph">
<p>Users do not receive any email notifications by default.
An administrator can configure users to receive notifications based on criteria such as the type of notification, and frequency.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>Foreman&#160;server does not enable outgoing emails by default, therefore you must review your email configuration.
For more information, see <a href="https://docs.theforeman.org/3.16/Installing_Server/index-foreman-deb.html#Configuring_Server_for_Outgoing_Emails_foreman">Configuring Foreman&#160;server for Outgoing Emails</a> in <em>Installing Foreman&#160;Server 3.16 on Debian/Ubuntu</em>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="Email_Notification_Types_admin"><a class="anchor" href="#Email_Notification_Types_admin"></a>5.1. Email notification types</h3>
<div class="paragraph">
<p>Foreman can create the following email notifications:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Audit summary</dt>
<dd>
<p>A summary of all activity audited by Foreman&#160;server.</p>
</dd>
<dt class="hdlist1">Compliance policy summary</dt>
<dd>
<p>A summary of OpenSCAP policy reports and their results.</p>
</dd>
<dt class="hdlist1">Host built</dt>
<dd>
<p>A notification sent after a host is built.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For a complete list of email notification types, navigate to <strong>Administer</strong> &gt; <strong>Users</strong> in the Foreman web UI, click the <strong>Username</strong> of the required user, and select the <strong>Email Preferences</strong> tab.</p>
</div>
</div>
<div class="sect2">
<h3 id="Configuring_Email_Notification_Preferences_admin"><a class="anchor" href="#Configuring_Email_Notification_Preferences_admin"></a>5.2. Configuring email notification preferences</h3>
<div class="paragraph">
<p>You can configure Foreman to send email messages to individual users registered to Foreman.
Foreman sends the email to the email address that has been added to the account, if present.
Users can edit the email address by clicking on their name in the top-right of the Foreman web UI and selecting <strong>My account</strong>.</p>
</div>
<div class="paragraph">
<p>Configure email notifications for a user from the Foreman web UI.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you want to send email notifications to a group email address instead of an individual email address, create a user account with the group email address and minimal Foreman permissions, then subscribe the user account to the desired notification types.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The user you are configuring to receive email notifications has a role with this permission: <code>view_mail_notifications</code>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Users</strong>.</p>
</li>
<li>
<p>Click the <strong>Username</strong> of the user you want to edit.</p>
</li>
<li>
<p>On the <strong>User</strong> tab, verify the value of the <strong>Mail</strong> field.
Email notifications will be sent to the address in this field.</p>
</li>
<li>
<p>On the <strong>Email Preferences</strong> tab, select <strong>Mail Enabled</strong>.</p>
</li>
<li>
<p>Select the notifications you want the user to receive using the drop-down menus next to the notification types.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The <strong>Audit Summary</strong> notification can be filtered by entering the required query in the <strong>Mail Query</strong> text box.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
<div class="paragraph">
<p>The user will start receiving the notification emails.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Testing_Email_Delivery_admin"><a class="anchor" href="#Testing_Email_Delivery_admin"></a>5.3. Testing email delivery</h3>
<div class="paragraph">
<p>To verify the delivery of emails, send a test email to a user.
If the email gets delivered, the settings are correct.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Users</strong>.</p>
</li>
<li>
<p>Click on the username.</p>
</li>
<li>
<p>On the <strong>Email Preferences</strong> tab, click <strong>Test email</strong>.</p>
<div class="paragraph">
<p>A test email message is sent immediately to the user&#8217;s email address.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>If the email is delivered, the verification is complete.
Otherwise, you must perform the following diagnostic steps:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Verify the user&#8217;s email address.</p>
</li>
<li>
<p>Verify Foreman&#160;server&#8217;s email configuration.</p>
</li>
<li>
<p>Examine firewall and mail server logs.</p>
</li>
<li>
<p>If your Foreman&#160;server uses the Postfix service for email delivery, the test email might be held in the queue.
To verify, enter the <code>mailq</code> command to list the current mail queue.
If the test email is held in the queue, <code>mailq</code> displays the following message:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">postqueue: warning: Mail system is down -- accessing queue directly
-Queue ID-  --Size-- ----Arrival Time---- -Sender/Recipient-------
BE68482A783    1922 Thu Oct  3 05:13:36  foreman-noreply@example.com</pre>
</div>
</div>
<div class="paragraph">
<p>To fix the problem, start the Postfix service on your Foreman&#160;server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># systemctl start postfix</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Testing_Email_Notifications_admin"><a class="anchor" href="#Testing_Email_Notifications_admin"></a>5.4. Testing email notifications</h3>
<div class="paragraph">
<p>To verify that users are correctly subscribed to notifications, trigger the notifications manually.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Trigger email notifications:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-rake reports:_My_Frequency_</pre>
</div>
</div>
<div class="paragraph">
<p>Replace <em>My_Frequency</em> with one of the following:</p>
</div>
</li>
<li>
<p>daily</p>
</li>
<li>
<p>weekly</p>
</li>
<li>
<p>monthly</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This triggers all notifications scheduled for the specified frequency for all the subscribed users.
If every subscribed user receives the notifications, the verification succeeds.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Sending manually triggered notifications to individual users is currently not supported.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="Changing_Email_Notifications_for_a_Host_admin"><a class="anchor" href="#Changing_Email_Notifications_for_a_Host_admin"></a>5.5. Changing email notification settings for a host</h3>
<div class="paragraph">
<p>Foreman can send event notifications for a host to the host&#8217;s registered owner.
You can configure Foreman to send email notifications either to an individual user or a user group.
When set to a user group, all group members who are subscribed to the email type receive a message.</p>
</div>
<div class="paragraph">
<p>Receiving email notifications for a host can be useful, but also overwhelming if you are expecting to receive frequent errors, for example, because of a known issue or error you are working around.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>, locate the host that you want to view, and click <strong>Edit</strong> in the <strong>Actions</strong> column.</p>
</li>
<li>
<p>Go to the <strong>Additional Information</strong> tab.
If the checkbox <strong>Include this host within Foreman reporting</strong> is checked, then the email notifications are enabled on that host.</p>
</li>
<li>
<p>Optional: Toggle the checkbox to enable or disable the email notifications.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you want to receive email notifications, ensure that you have an email address set in your user settings.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="backing-up-foreman-server-and-smart-proxy_admin"><a class="anchor" href="#backing-up-foreman-server-and-smart-proxy_admin"></a>6. Backing up Foreman&#160;server and Smart&#160;Proxy&#160;server</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can back up your Foreman deployment to ensure the continuity of your Foreman deployment and associated data in the event of a disaster.
If your deployment uses custom configurations, you must consider how to handle these custom configurations when you plan your backup and disaster recovery policy.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you create a new instance of the Foreman&#160;server, decommission the old instances after restoring the backup.
Cloned instances are not supposed to run in parallel in a production environment.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To create a backup of your Foreman&#160;server or Smart&#160;Proxy&#160;server and all associated data, use the <code>foreman-maintain backup</code> command.
Backing up to a separate storage device on a separate system is highly recommended.</p>
</div>
<div class="paragraph">
<p>Foreman services are unavailable during the backup.
Therefore, you must ensure that no other tasks are scheduled by other administrators.
You can schedule a backup by using <code>cron</code>.
For more information, see the <a href="#Example_of_a_Weekly_Full_Backup_Followed_by_Daily_Incremental_Backups_admin">Example of a weekly full backup followed by daily incremental backups</a>.</p>
</div>
<div class="paragraph">
<p>During offline backups, the services are inactive and Foreman is in a maintenance mode.
All the traffic from outside on port 443 is rejected by a firewall to ensure there are no modifications triggered.</p>
</div>
<div class="paragraph">
<p>You must encrypt or move the backup to a secure location to minimize the risk of damage or unauthorized access to the hosts.</p>
</div>
<div class="paragraph">
<div class="title">Conventional backup methods</div>
<p>You can also use conventional backup methods.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you plan to use the <code>foreman-maintain backup</code> command to create a backup, do not stop Foreman services.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>When creating a snapshot or conventional backup, you must stop all services as follows:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain service stop</pre>
</div>
</div>
</li>
<li>
<p>Start the services after creating a snapshot or conventional backup:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain service start</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="Performing_a_Full_Backup_admin"><a class="anchor" href="#Performing_a_Full_Backup_admin"></a>6.1. Performing a full backup of Foreman&#160;server or Smart&#160;Proxy&#160;server</h3>
<div class="paragraph">
<p>Foreman uses the <code>foreman-maintain backup</code> command to make backups.</p>
</div>
<div class="paragraph">
<p>There are two main methods of backing up Foreman&#160;server:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Offline backup</p>
<div class="paragraph">
<p>All Foreman services are shut down during an offline backup.</p>
</div>
</li>
<li>
<p>Online backup</p>
<div class="paragraph">
<p>Only Foreman services that affect the consistency of the backup, including all background workers, are shut down while the backup process is running.
Online backups check for consistency and require more time than offline backups.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information about each of these methods, you can view the usage statements for each backup method.</p>
</div>
<div class="listingblock">
<div class="title">Offline backups</div>
<div class="content">
<pre class="nowrap"># foreman-maintain backup offline --help</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Online backups</div>
<div class="content">
<pre class="nowrap"># foreman-maintain backup online --help</pre>
</div>
</div>
<div class="paragraph">
<div class="title">Directory creation</div>
<p>The <code>foreman-maintain backup</code> command creates a time-stamped subdirectory in the backup directory that you specify.
The <code>foreman-maintain backup</code> command does not overwrite backups, therefore you must select the correct directory or subdirectory when restoring from a backup or an incremental backup.
The <code>foreman-maintain backup</code> command stops and restarts services as required.</p>
</div>
<div class="paragraph">
<p>When you run the <code>foreman-maintain backup offline</code> command, the following default backup directories are created:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>foreman-backup</code> on Foreman</p>
</li>
<li>
<p><code>foreman-proxy-backup</code> on Smart&#160;Proxy</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you want to set a custom directory name, add the <code>--preserve-directory</code> option and add a directory name.
The backup is then stored in the directory you provide in the command line.
If you use the <code>--preserve-directory</code> option, no data is removed if the backup fails.</p>
</div>
<div class="paragraph">
<div class="title">Remote databases</div>
<p>You can use the <code>foreman-maintain backup</code> command to back up remote databases.</p>
</div>
<div class="paragraph">
<div class="title">Backing up to a remote NFS share</div>
<p>To enable Foreman to save the backup to an NFS share, ensure that the <code>root</code> user of your Foreman&#160;server or Smart&#160;Proxy&#160;server can write to the NFS share.
NFS export options such as <code>root_squash</code> and <code>all_squash</code> are known to prevent this.</p>
</div>
<div class="paragraph">
<p>For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/configuring_and_using_network_file_services/deploying-an-nfs-server_configuring-and-using-network-file-services">Red&#160;Hat Enterprise Linux <em>Configuring and using network files services</em></a> and <a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/securing_networks/securing-network-services_securing-networks#export-options-for-securing-an-nfs-server_securing-the-nfs-service">Red&#160;Hat Enterprise Linux <em>Securing network services</em></a>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure that your backup location has sufficient available disk space to store the backup.</p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>Request other users of Foreman&#160;server or Smart&#160;Proxy&#160;server to save any changes and warn them that Foreman services are unavailable for the duration of the backup.
Ensure no other tasks are scheduled for the same time as the backup.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>On Foreman&#160;server, perform a full backup:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain backup offline <em>/var/foreman-backup</em></pre>
</div>
</div>
</li>
<li>
<p>On Smart&#160;Proxy&#160;server, perform a full backup:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain backup offline <em>/var/foreman-proxy-backup</em></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Performing_an_Incremental_Backup_admin"><a class="anchor" href="#Performing_an_Incremental_Backup_admin"></a>6.2. Performing an incremental backup</h3>
<div class="paragraph">
<p>Use this procedure to perform an offline backup of any changes since a previous backup.</p>
</div>
<div class="paragraph">
<p>To perform incremental backups, you must perform a full backup as a reference to create the first incremental backup of a sequence.
Keep the most recent full backup and a complete sequence of incremental backups to restore from.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>Request other users of Foreman&#160;server or Smart&#160;Proxy&#160;server to save any changes and warn them that Foreman services are unavailable for the duration of the backup.
Ensure no other tasks are scheduled for the same time as the backup.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure that your backup location has sufficient available disk space to store the backup.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Perform a full offline backup:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain backup offline <em>/var/backup_directory</em></pre>
</div>
</div>
</li>
<li>
<p>Create a directory within your backup directory to store the first incremental backup:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain backup offline --incremental <em>/var/backup_directory/full_backup</em> <em>/var/backup_directory</em></pre>
</div>
</div>
</li>
<li>
<p>Create the second incremental backup by including the path to the first incremental backup to indicate the starting point for the next increment.
This creates a directory for the second incremental backup in your backup directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain backup offline --incremental <em>/var/backup_directory/first_incremental_backup</em> <em>/var/backup_directory</em></pre>
</div>
</div>
</li>
<li>
<p>Optional: If you want to point to a different version of the backup, and make a series of increments with that version of the backup as the starting point, you can do this at any time.
For example, if you want to make a new incremental backup from the full backup rather than the first or second incremental backup, point to the full backup directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain backup offline --incremental <em>/var/backup_directory/full_backup</em> <em>/var/backup_directory</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Example_of_a_Weekly_Full_Backup_Followed_by_Daily_Incremental_Backups_admin"><a class="anchor" href="#Example_of_a_Weekly_Full_Backup_Followed_by_Daily_Incremental_Backups_admin"></a>6.3. Example of a weekly full backup followed by daily incremental backups</h3>
<div class="paragraph">
<p>The following script performs a full backup on a Sunday followed by incremental backups for each of the following days.
A new subdirectory is created for each day that an incremental backup is performed.
The script requires a daily cron job.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-bash" data-lang="bash">#!/bin/bash -e
PATH=/sbin:/bin:/usr/sbin:/usr/bin
DESTINATION=/var/backup_directory
if [[ $(date +%w) == 0 ]]; then
  foreman-maintain backup offline --assumeyes $DESTINATION
else
  LAST=$(ls -td -- $DESTINATION/*/ | head -n 1)
  foreman-maintain backup offline --assumeyes --incremental "$LAST" $DESTINATION
fi
exit 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the <code>foreman-maintain backup</code> command requires <code>/sbin</code> and <code>/usr/sbin</code> directories to be in <code>PATH</code> and the <code>--assumeyes</code> option is used to skip the confirmation prompt.</p>
</div>
</div>
<div class="sect2">
<h3 id="Performing_an_Online_Backup_admin"><a class="anchor" href="#Performing_an_Online_Backup_admin"></a>6.4. Performing an online backup</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>Request other users of Foreman&#160;server or Smart&#160;Proxy&#160;server to save any changes and warn them that some Foreman services may be unavailable for the duration of the backup.
Ensure no other tasks are scheduled for the same time as the backup.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure that your backup location has sufficient available disk space to store the backup.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>On your Foreman&#160;server, perform an online backup:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain backup online <em>/var/backup_directory</em></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="restoring-foreman-server-or-smart-proxy-from-a-backup_admin"><a class="anchor" href="#restoring-foreman-server-or-smart-proxy-from-a-backup_admin"></a>7. Restoring Foreman&#160;server or Smart&#160;Proxy&#160;server from a backup</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can restore Foreman&#160;server or Smart&#160;Proxy&#160;server from the backup data that you create as part of <a href="#backing-up-foreman-server-and-smart-proxy_admin">Backing up Foreman&#160;server and Smart&#160;Proxy&#160;server</a>.
This process outlines how to restore the backup on the same server that generated the backup, and all data covered by the backup is deleted on the target system.
If the original system is unavailable, provision a system with the same configuration settings and host name.</p>
</div>
<div class="sect2">
<h3 id="Restoring_from_a_Full_Backup_admin"><a class="anchor" href="#Restoring_from_a_Full_Backup_admin"></a>7.1. Restoring from a full backup</h3>
<div class="paragraph">
<p>Use this procedure to restore Foreman or Smart&#160;Proxy&#160;server from a full backup.
When the restore process completes, all processes are online, and all databases and system configuration revert to the state at the time of the backup.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure that you are restoring to the correct instance.
The Foreman instance must have the same host name, configuration, and be the same minor version (X.Y) as the original system.</p>
</li>
<li>
<p>Ensure that you have an existing target directory.
The target directory is read from the configuration files contained within the archive.</p>
</li>
<li>
<p>Ensure that you have enough space to store this data on the base system of Foreman&#160;server or Smart&#160;Proxy&#160;server as well as enough space after the restoration to contain all the data in the <code>/etc/</code> and <code>/var/</code> directories contained within the backup.</p>
<div class="paragraph">
<p>To check the space used by a directory, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># du -sh <em>/var/backup_directory</em></pre>
</div>
</div>
<div class="paragraph">
<p>To check for free space, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># df -h <em>/var/backup_directory</em></pre>
</div>
</div>
<div class="paragraph">
<p>Add the <code>--total</code> option to get a total of the results from more than one directory.</p>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Choose the appropriate method to install Foreman or Smart&#160;Proxy:</p>
<div class="ulist">
<ul>
<li>
<p>To install Foreman&#160;server from a connected network, follow the procedures in <a href="https://docs.theforeman.org/3.16/Installing_Server/index-foreman-deb.html#">Installing Foreman&#160;Server 3.16 on Debian/Ubuntu</a>.</p>
</li>
<li>
<p>To install a Smart&#160;Proxy&#160;server, follow the procedures in <a href="https://docs.theforeman.org/3.16/Installing_Proxy/index-foreman-deb.html#">Installing a Smart&#160;Proxy&#160;Server 3.16 on Debian/Ubuntu</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Copy the backup data to the local file system on Foreman&#160;server.
Use <code>/var/</code> or <code>/var/tmp/</code>.</p>
</li>
<li>
<p>Run the restoration script.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain restore <em>/var/backup_directory</em></pre>
</div>
</div>
<div class="paragraph">
<p>Where <em>backup_directory</em> is the time-stamped directory or subdirectory containing the backed-up data.</p>
</div>
<div class="paragraph">
<p>The restore process can take a long time to complete, because of the amount of data to copy.</p>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>For troubleshooting, you can check <code>/var/log/foreman/production.log</code> and <code>/var/log/messages</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Restoring_from_Incremental_Backups_admin"><a class="anchor" href="#Restoring_from_Incremental_Backups_admin"></a>7.2. Restoring from incremental backups</h3>
<div class="paragraph">
<p>Use this procedure to restore Foreman or Smart&#160;Proxy&#160;server from incremental backups.
If you have multiple branches of incremental backups, select your full backup and each incremental backup for the <em>branch</em> you want to restore, in chronological order.</p>
</div>
<div class="paragraph">
<p>When the restore process completes, all processes are online, and all databases and system configuration revert to the state at the time of the backup.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Restore the last full backup using the instructions in <a href="#Restoring_from_a_Full_Backup_admin">Restoring from a full backup</a>.</p>
</li>
<li>
<p>Remove the full backup data from the local file system on Foreman&#160;server, for example, <code>/var/</code> or <code>/var/tmp/</code>.</p>
</li>
<li>
<p>Copy the incremental backup data to the local file system on Foreman&#160;server, for example, <code>/var/</code> or <code>/var/tmp/</code>.</p>
</li>
<li>
<p>Restore the incremental backups in the same sequence that they are made:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain restore <em>/var/backup_directory</em>/FIRST_INCREMENTAL
# foreman-maintain restore <em>/var/backup_directory</em>/SECOND_INCREMENTAL</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>For troubleshooting, you can check <code>/var/log/foreman/production.log</code> and <code>/var/log/messages</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="backup-and-restore-smart-proxy-server-by-using-a-virtual-machine-snapshot"><a class="anchor" href="#backup-and-restore-smart-proxy-server-by-using-a-virtual-machine-snapshot"></a>7.3. Backup and restore Smart&#160;Proxy&#160;server by using a virtual machine snapshot</h3>
<div class="paragraph">
<p>If your Smart&#160;Proxy&#160;server is a virtual machine, you can restore it from a snapshot.
Creating weekly snapshots to restore from is recommended.
In the event of failure, you can install or configure a new Smart&#160;Proxy&#160;server.</p>
</div>
<div class="paragraph">
<p>If required, deploy a new Smart&#160;Proxy&#160;server, ensuring the host name is the same as before, and then install the Smart&#160;Proxy certificates.
You may still have them, alternately create new ones.
Follow the procedures in <a href="https://docs.theforeman.org/3.16/Installing_Proxy/index-foreman-deb.html#">Installing Smart&#160;Proxy&#160;server</a> until you can confirm, in the Foreman web UI, that Smart&#160;Proxy&#160;server is connected to Foreman&#160;server.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="maintaining-foreman-server_admin"><a class="anchor" href="#maintaining-foreman-server_admin"></a>8. Maintaining Foreman&#160;server</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter provides information on how to maintain Foreman&#160;server, including information on
how to work with audit records and how to clean unused tasks.</p>
</div>
<div class="sect2">
<h3 id="deleting-audit-records-manually_admin"><a class="anchor" href="#deleting-audit-records-manually_admin"></a>8.1. Deleting audit records manually</h3>
<div class="paragraph">
<p>You can use the <code>foreman-rake audits:expire</code> command to remove audit records at any time.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Delete the audit records using the <code>foreman-rake audits:expire</code> command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-rake audits:expire days=<em>Number_Of_Days</em></pre>
</div>
</div>
<div class="paragraph">
<p>This command deletes all audit records older than <code><em>Number_Of_Days</em></code>.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Deleting_Audit_Records_Automatically_admin"><a class="anchor" href="#Deleting_Audit_Records_Automatically_admin"></a>8.2. Deleting audit records automatically</h3>
<div class="paragraph">
<p>You can automatically delete audit records using the <code>Saved audits interval</code> setting.
This setting is empty by default, meaning Foreman does not automatically delete the audit records.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Settings</strong>.</p>
</li>
<li>
<p>On the <strong>General</strong> tab, find the <strong>Saved audits interval</strong> setting.</p>
</li>
<li>
<p>Set the value of the setting to the number of days after which you want Foreman to delete the audit records.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Anonymizing_Audit_Records_admin"><a class="anchor" href="#Anonymizing_Audit_Records_admin"></a>8.3. Anonymizing audit records</h3>
<div class="paragraph">
<p>You can use the <code>foreman-rake audits:anonymize</code> command to remove any user account or IP information while maintaining the audit records in the database.
You can also use a cron job to schedule anonymizing the audit records at the set interval that you want.</p>
</div>
<div class="paragraph">
<p>By default, using the <code>foreman-rake audits:anonymize</code> command anonymizes audit records that are older than 90 days.
You can specify the number of days to keep the audit records by adding the <strong>days</strong> option and add the number of days.</p>
</div>
<div class="paragraph">
<p>For example, you can anonymize audit records that are older than seven days:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># foreman-rake audits:anonymize days=7</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Deleting_Report_Records_admin"><a class="anchor" href="#Deleting_Report_Records_admin"></a>8.4. Deleting report records</h3>
<div class="paragraph">
<p>Report records are created automatically in Foreman.
You can use the <code>foreman-rake reports:expire</code> command to remove reports at any time.
You can also use a cron job to schedule report record deletions at the set interval that you want.</p>
</div>
<div class="paragraph">
<p>By default, using the <code>foreman-rake reports:expire</code> command removes report records that are older than 90 days.
You can specify the number of days to keep the report records by adding the <strong>days</strong> option and add the number of days.</p>
</div>
<div class="paragraph">
<p>For example, you can delete report records that are older than seven days:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># foreman-rake reports:expire days=7</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Configuring_the_Cleaning_Unused_Tasks_Feature_admin"><a class="anchor" href="#Configuring_the_Cleaning_Unused_Tasks_Feature_admin"></a>8.5. Configuring the cleaning unused tasks feature</h3>
<div class="paragraph">
<p>Foreman performs regular cleaning to reduce disc space in the database and limit the rate of disk growth.
As a result, Foreman backup completes faster and overall performance is higher.</p>
</div>
<div class="paragraph">
<p>By default, Foreman executes a cron job that cleans tasks every day at 19:45.
Foreman removes the following tasks during the cleaning:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Tasks that have run successfully and are older than thirty days</p>
</li>
<li>
<p>All tasks that are older than a year</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can configure the cleaning unused tasks feature using these options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To configure the time at which Foreman runs the cron job, set the <code>--foreman-plugin-tasks-cron-line</code> parameter to the time you want in cron format.
For example, to schedule the cron job to run every day at 15:00, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --foreman-plugin-tasks-cron-line "00 15 * * *"</pre>
</div>
</div>
</li>
<li>
<p>To configure the period after which Foreman deletes the tasks, edit the <code>:rules:</code> section in the <code>/etc/foreman/plugins/foreman-tasks.yaml</code> file.</p>
</li>
<li>
<p>To disable regular task cleanup on Foreman, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --foreman-plugin-tasks-automatic-cleanup false</pre>
</div>
</div>
</li>
<li>
<p>To reenable regular task cleanup on Foreman, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --foreman-plugin-tasks-automatic-cleanup true</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Deleting_Task_Records_admin"><a class="anchor" href="#Deleting_Task_Records_admin"></a>8.6. Deleting task records</h3>
<div class="paragraph">
<p>Task records are created automatically in Foreman.
You can use the <code>foreman-rake foreman_tasks:cleanup</code> command to remove tasks at any time.
You can also use a cron job to schedule Task record deletions at the set interval that you want.</p>
</div>
<div class="paragraph">
<p>For example, you can delete task records from successful repository synchronizations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># foreman-rake foreman_tasks:cleanup TASK_SEARCH='label = Actions::Katello::Repository::Sync' STATES='stopped'</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Deleting_a_Task_by_ID_admin"><a class="anchor" href="#Deleting_a_Task_by_ID_admin"></a>8.7. Deleting a task by ID</h3>
<div class="paragraph">
<p>You can delete tasks by ID, for example if you have submitted confidential data by mistake.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Connect to your Foreman&#160;server using SSH:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ssh root@foreman.example.com</pre>
</div>
</div>
</li>
<li>
<p>Optional: View the task:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer task info --id <em>My_Task_ID</em></pre>
</div>
</div>
</li>
<li>
<p>Delete the task:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-rake foreman_tasks:cleanup TASK_SEARCH="id=<em>My_Task_ID</em>"</pre>
</div>
</div>
</li>
<li>
<p>Optional: Ensure the task has been removed from Foreman&#160;server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer task info --id <em>My_Task_ID</em></pre>
</div>
</div>
<div class="paragraph">
<p>Note that because the task is deleted, this command returns a non-zero exit code.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="synchronizing-template-repositories"><a class="anchor" href="#synchronizing-template-repositories"></a>9. Synchronizing template repositories</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In Foreman, you can synchronize repositories of job templates, provisioning templates, report templates, and partition table templates between Foreman&#160;server and a version control system or local directory.</p>
</div>
<div class="paragraph">
<p>This section details the workflow for installing and configuring the Template Sync plugin and performing exporting and importing tasks.</p>
</div>
<div class="sect2">
<h3 id="Enabling_the_Template_Sync_plugin_admin"><a class="anchor" href="#Enabling_the_Template_Sync_plugin_admin"></a>9.1. Enabling the Template Sync plugin</h3>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Enable the plugin on your Foreman&#160;server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --enable-foreman-plugin-templates</pre>
</div>
</div>
</li>
<li>
<p>Optional: Enable the Hammer CLI plugin on your Foreman&#160;server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --enable-foreman-cli-templates</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Verification</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>About</strong>.</p>
</li>
<li>
<p>On the <strong>Plugins</strong> tab, ensure that the page includes the <strong>Template Sync</strong> plugin.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Next steps</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Settings</strong> &gt; <strong>Template Sync</strong> to configure the plugin.
For more information, see <a href="#template_sync_settings_admin">Template sync settings</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="synchronizing-templates-with-an-existing-repository_admin"><a class="anchor" href="#synchronizing-templates-with-an-existing-repository_admin"></a>9.2. Synchronizing templates with an existing repository</h3>
<div class="paragraph">
<p>If you store templates in a repository under a version control system, you can synchronize the templates between your Foreman&#160;server and the repository.</p>
</div>
<div class="paragraph">
<p>In this procedure, a Git repository is used for demonstration purposes.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>If you want to use HTTPS to connect to the repository and you use a self-signed certificate authority (CA) on your Git server:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Create a new directory under the <code>/usr/share/foreman/</code> directory to store the Git configuration for the certificate:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir --parents /usr/share/foreman/.config/git</pre>
</div>
</div>
</li>
<li>
<p>Create a file named <code>config</code> in the new directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># touch /usr/share/foreman/.config/git/config</pre>
</div>
</div>
</li>
<li>
<p>Allow the <code>foreman</code> user access to the <code>.config</code> directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># chown --recursive foreman /usr/share/foreman/.config</pre>
</div>
</div>
</li>
<li>
<p>Update the Git global configuration for the <code>foreman</code> user with the path to your self-signed CA certificate:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># sudo --user foreman git config --global http.sslCAPath <em>Path_To_CA_Certificate</em></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>If you want to use SSH to connect to the repository:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Create an SSH key pair if you do not already have it.
Do not specify a passphrase.</p>
<div class="listingblock">
<div class="content">
<pre># sudo --user foreman ssh-keygen</pre>
</div>
</div>
</li>
<li>
<p>Configure your version control server with the public key from your Foreman, which resides in <code>/usr/share/foreman/.ssh/id_rsa.pub</code>.</p>
</li>
<li>
<p>Accept the Git SSH host key as the <code>foreman</code> user:</p>
<div class="listingblock">
<div class="content">
<pre># sudo --user foreman ssh <em>git.example.com</em></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>In the Foreman web UI, provide details for your Git repository:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Navigate to <strong>Administer</strong> &gt; <strong>Settings</strong>.</p>
</li>
<li>
<p>Click the <strong>Template Sync</strong> tab.</p>
</li>
<li>
<p>Change the <strong>Branch</strong> setting to define the target branch of the repository.</p>
</li>
<li>
<p>Change the <strong>Repo</strong> setting to define the repository URL.</p>
</li>
<li>
<p>If you want to use an HTTP proxy to connect to the repository, change the <strong>HTTP proxy policy</strong> setting to <code>Global default HTTP proxy</code> or <code>Custom HTTP proxy</code>.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Next steps</div>
<ul>
<li>
<p>To import templates from your repository, continue with <a href="#Importing_Templates_admin">Importing templates</a>.</p>
</li>
<li>
<p>To export templates to your repository, continue with <a href="#Exporting_Templates_admin">Exporting templates</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Synchronizing_Templates_with_a_Local_Directory_admin"><a class="anchor" href="#Synchronizing_Templates_with_a_Local_Directory_admin"></a>9.3. Synchronizing templates with a local directory</h3>
<div class="paragraph">
<p>If you store templates in a local directory that is tracked under a version control system, you can synchronize the templates between your Foreman&#160;server and the local directory.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Each template must contain the location and organization that the template belongs to.
This applies to all template types.
Before you import a template, ensure that you add the following section to the template:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">&lt;%#
kind: provision
name: <em>My_Provisioning_Template</em>
oses:
- <em>My_first_Operating_System</em>
- <em>My_second_Operating_System</em>
locations:
- <em>My_first_Location</em>
- <em>My_second_Location</em>
organizations:
- <em>My_first_Organization</em>
- <em>My_second_Organization</em>
%&gt;</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>On your Foreman&#160;server, in <code>/var/lib/foreman</code>, create a directory for storing templates:</p>
<div class="listingblock">
<div class="content">
<pre># mkdir /var/lib/foreman/<em>My_Templates_Dir</em></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>You can place your templates to a custom directory outside <code>/var/lib/foreman</code>, but you have to ensure that the <code>Foreman</code> service can read its contents.
The directory must have the correct file permissions and the <code>foreman_lib_t</code> SELinux label.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Change the owner of the new templates directory to the <code>foreman</code> user:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># chown foreman /var/lib/foreman/<em>My_Templates_Dir</em></pre>
</div>
</div>
</li>
<li>
<p>Change the <strong>Repo</strong> setting on the <strong>Template Sync</strong> tab to match the <code>/var/lib/foreman/<em>My_Templates_Dir</em>/</code> directory.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Importing_Templates_admin"><a class="anchor" href="#Importing_Templates_admin"></a>9.4. Importing templates</h3>
<div class="paragraph">
<p>You can import templates from a repository of your choice.
You can use different protocols to point to your repository, for example <code>/tmp/dir</code>, <code>git://example.com</code>, <code>https://example.com</code>, and <code>ssh://example.com</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The templates provided by Foreman are locked and you cannot import them by default.
To overwrite this behavior, change the <code>Force import</code> setting in the <strong>Template Sync</strong> menu to <code>yes</code> or add the <code>force</code> parameter <code>-d '{ "force": "true" }'</code> to the import command.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Each template must contain the location and organization that the template belongs to.
This applies to all template types.
Before you import a template, ensure that you add the following section to the template:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">&lt;%#
kind: provision
name: <em>My_Provisioning_Template</em>
oses:
- <em>My_first_Operating_System</em>
- <em>My_second_Operating_System</em>
locations:
- <em>My_first_Location</em>
- <em>My_second_Location</em>
organizations:
- <em>My_first_Organization</em>
- <em>My_second_Organization</em>
%&gt;</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Foreman web UI, see the <a href="#cli_Importing_Templates_admin">CLI procedure</a>.</p>
</div>
<div class="paragraph">
<p>To use the API, see the <a href="#api_Importing_Templates_admin">API procedure</a>.</p>
</div>
<div class="paragraph">
<p>To use Ansible, see the <a href="#ansible_Importing_Templates_admin">Ansible procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Hosts</strong> &gt; <strong>Templates</strong> &gt; <strong>Sync Templates</strong>.</p>
</li>
<li>
<p>Click <strong>Import</strong>.</p>
</li>
<li>
<p>Each field is populated with values configured in <strong>Administer</strong> &gt; <strong>Settings</strong> &gt; <strong>Template Sync</strong>.
Change the values as required for the templates you want to import.
For more information about each field, see <a href="#template_sync_settings_admin">Template sync settings</a>.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The Foreman web UI displays the status of the import.
The status is not persistent; if you leave the status page, you cannot return to it.</p>
</div>
<div id="cli_Importing_Templates_admin" class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Import a template from a repository:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer import-templates \
--branch "<em>My_Branch</em>" \
--filter '.*<em>Template Name$</em>' \
--organization "<em>My_Organization</em>" \
--prefix "[<em>Custom Index</em>] " \
--repo "<em>https://git.example.com/path/to/repository</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>For better indexing and management of your templates, use <code>--prefix</code> to set a category for your templates.
To select certain templates from a large repository, use <code>--filter</code> to define the title of the templates that you want to import.
For example <code>--filter '.*Ansible Default$'</code> imports various Ansible Default templates.</p>
</div>
</li>
</ul>
</div>
<div id="api_Importing_Templates_admin" class="olist arabic">
<div class="title">API procedure</div>
<ol class="arabic">
<li>
<p>Send a <code>POST</code> request to <code>api/v2/templates/import</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl -H "Accept:application/json" \
-H "Content-Type:application/json" \
-u <em>login</em>:<em>password</em> \
-k https://<em>foreman.example.com</em>/api/v2/templates/import \
-X POST</pre>
</div>
</div>
<div class="paragraph">
<p>If the import is successful, you receive <code>{"message":"Success"}</code>.</p>
</div>
</li>
</ol>
</div>
<div id="ansible_Importing_Templates_admin" class="ulist">
<div class="title">Ansible procedure</div>
<ul>
<li>
<p>Use the <code>theforeman.foreman.templates_import</code> module.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information, see the Ansible module documentation with <code>ansible-doc theforeman.foreman.templates_import</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Exporting_Templates_admin"><a class="anchor" href="#Exporting_Templates_admin"></a>9.5. Exporting templates</h3>
<div class="paragraph">
<p>You can export templates to an existing repository.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Foreman web UI, see the <a href="#cli_Exporting_Templates_admin">CLI procedure</a>.</p>
</div>
<div class="paragraph">
<p>To use the API, see the <a href="#api_Exporting_Templates_admin">API procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Hosts</strong> &gt; <strong>Templates</strong> &gt; <strong>Sync Templates</strong>.</p>
</li>
<li>
<p>Click <strong>Export</strong>.</p>
</li>
<li>
<p>Each field is populated with values configured in <strong>Administer</strong> &gt; <strong>Settings</strong> &gt; <strong>Template Sync</strong>.
Change the values as required for the templates you want to export.
For more information about each field, see <a href="#template_sync_settings_admin">Template sync settings</a>.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The Foreman web UI displays the status of the export.
The status is not persistent; if you leave the status page, you cannot return to it.</p>
</div>
<div id="cli_Exporting_Templates_admin" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>To export the templates to a repository, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer export-templates \
--organization "<em>My_Organization</em>" \
--repo "<em>https://git.example.com/path/to/repository</em>"</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>This command clones the repository, makes changes in a commit, and pushes back to the repository.
You can use the <code>--branch "<em>My_Branch</em>"</code> option to export the templates to a specific branch.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
<div id="api_Exporting_Templates_admin" class="olist arabic">
<div class="title">API procedure</div>
<ol class="arabic">
<li>
<p>Send a <code>POST</code> request to <code>api/v2/templates/export</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl -H "Accept:application/json" \
-H "Content-Type:application/json" \
-u <em>login</em>:<em>password</em> \
-k https://<em>foreman.example.com</em>/api/v2/templates/export \
-X POST</pre>
</div>
</div>
<div class="paragraph">
<p>If the export is successful, you receive <code>{"message":"Success"}</code>.</p>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>You can override default API settings by specifying them in the request with the <code>-d</code> parameter.
The following example exports templates to the <code>git.example.com/templates</code> repository:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl -H "Accept:application/json" \
-H "Content-Type:application/json" \
-u login:password \
-k https://<em>foreman.example.com</em>/api/v2/templates/export \
-X POST \
-d "{\"repo\":\"git.example.com/templates\"}"</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="Uninstalling_the_Foreman_Templates_plugin_admin"><a class="anchor" href="#Uninstalling_the_Foreman_Templates_plugin_admin"></a>9.6. Uninstalling the Foreman templates plugin</h3>
<div class="paragraph">
<p>Use the following procedure to avoid errors after removing the Templates plugin.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Disable the plugin using the Foreman installer:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --no-enable-foreman-plugin-templates</pre>
</div>
</div>
</li>
<li>
<p>Clean custom data of the plugin.
The command does not affect any templates that you created.</p>
<div class="listingblock">
<div class="content">
<pre># foreman-rake templates:cleanup</pre>
</div>
</div>
</li>
<li>
<p>Uninstall the plugin:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># apt remove foreman-plugin-templates</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Logging_and_Reporting_Problems_admin"><a class="anchor" href="#Logging_and_Reporting_Problems_admin"></a>10. Logging and reporting problems</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following sections describe the most commonly used log files and debugging tools available in Foreman.</p>
</div>
<div class="sect2">
<h3 id="logging-levels-of-foreman-components"><a class="anchor" href="#logging-levels-of-foreman-components"></a>10.1. Logging levels of Foreman components</h3>
<div class="paragraph">
<p>You can set logging levels for individual Foreman components.
The default logging level is <code>info</code>.
You can increase the logging level of Foreman components to troubleshoot Foreman.
Increasing the logging level to <code>debug</code> provides the most detailed information.</p>
</div>
<div class="sect3">
<h4 id="increasing-the-logging-level-for-foreman"><a class="anchor" href="#increasing-the-logging-level-for-foreman"></a>10.1.1. Increasing the logging level for Foreman</h4>
<div class="paragraph">
<p>By default, you can find the log in <code>/var/log/foreman/production.log</code>.
For more information, see <a href="#configuring-logging-type-and-layout_admin">Configuring logging type and layout</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Set the logging level to <code>debug</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --foreman-logging-level debug</pre>
</div>
</div>
</li>
<li>
<p>After you complete debugging, reset the logging level to the default value:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --reset-foreman-logging-level</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Additional resources</div>
<p>For more information about Foreman logging settings, use <code>foreman-installer</code> with the <code>--full-help</code> option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --full-help | grep logging</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="increasing-the-logging-level-for-hammer"><a class="anchor" href="#increasing-the-logging-level-for-hammer"></a>10.1.2. Increasing the logging level for Hammer</h4>
<div class="paragraph _abstract">
<p>You can find the log in <code>~/.hammer/log/hammer.log</code>.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>In <code>/etc/hammer/cli_config.yml</code>, set the <code>:log_level:</code> option to <code>debug</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">:log_level: 'debug'</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="increasing-the-logging-level-for-smart-proxy"><a class="anchor" href="#increasing-the-logging-level-for-smart-proxy"></a>10.1.3. Increasing the logging level for Smart&#160;Proxy</h4>
<div class="paragraph">
<p>By default, you can find the log in <code>/var/log/foreman-proxy/proxy.log</code>.
For more information, see <a href="#configuring-logging-type-and-layout_admin">Configuring logging type and layout</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Set the logging level to <code>debug</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --foreman-proxy-log-level DEBUG</pre>
</div>
</div>
</li>
<li>
<p>After you complete debugging, reset the logging level to the default value:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --reset-foreman-proxy-log-level</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="increasing-the-logging-level-for-redis"><a class="anchor" href="#increasing-the-logging-level-for-redis"></a>10.1.4. Increasing the logging level for Redis</h4>
<div class="paragraph">
<p>You can find the log for Redis in <code>/var/log/redis/redis.log</code>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In <code>/etc/redis/redis.conf</code>, set the logging level to <code>debug</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-none" data-lang="none">loglevel debug</code></pre>
</div>
</div>
</li>
<li>
<p>Restart the Redis service:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># systemctl restart redis</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Running <code>foreman-installer</code> will revert the setting to default.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="increasing-the-logging-level-for-foreman-installer"><a class="anchor" href="#increasing-the-logging-level-for-foreman-installer"></a>10.1.5. Increasing the logging level for foreman-installer</h4>
<div class="paragraph">
<p><code>foreman-installer</code> writes logs to <code>/var/log/foreman-installer/</code>.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Increase the logging level of the <code>foreman-installer</code> utility:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --verbose-log-level debug</pre>
</div>
</div>
<div class="paragraph">
<p>Note that this only affects standard output but not any log files written to disk.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="increasing-the-logging-level-for-puppet-agent"><a class="anchor" href="#increasing-the-logging-level-for-puppet-agent"></a>10.1.6. Increasing the logging level for Puppet agent</h4>
<div class="paragraph">
<p>You can find the logs in <code>/var/log/puppetlabs/puppet/</code>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have enabled Puppet on your Foreman.
For more information, see <a href="https://docs.theforeman.org/3.16/Managing_Configurations_Puppet/index-foreman-deb.html#Enabling_Puppet_Integration_managing-configurations-puppet">Enabling Puppet Integration with Foreman</a> in <em>Configuring hosts by using Puppet</em>.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Set the logging level to <code>debug</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --puppet-agent-additional-settings log_level:debug</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="increasing-the-logging-level-for-puppet-server"><a class="anchor" href="#increasing-the-logging-level-for-puppet-server"></a>10.1.7. Increasing the logging level for Puppet server</h4>
<div class="paragraph">
<p>You can find the logs in <code>/var/log/puppetlabs/puppetserver/</code>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have enabled Puppet on your Foreman.
For more information, see <a href="https://docs.theforeman.org/3.16/Managing_Configurations_Puppet/index-foreman-deb.html#Enabling_Puppet_Integration_managing-configurations-puppet">Enabling Puppet Integration with Foreman</a> in <em>Configuring hosts by using Puppet</em>.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Set the logging level to <code>debug</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --puppet-server-additional-settings log_level:debug</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="increasing-the-logging-level-for-salt"><a class="anchor" href="#increasing-the-logging-level-for-salt"></a>10.1.8. Increasing the logging level for Salt</h4>
<div class="paragraph">
<p>Salt Master logs to <code>/var/log/salt/master</code>.
Salt Minions log to <code>/var/log/salt/minion</code>.</p>
</div>
<div class="paragraph">
<p>You can increase the logging level for Salt Master or Salt Minion:</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>In <code>/etc/salt/master</code> or <code>/etc/salt/minion</code>, set the logging level to <code>debug</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-none" data-lang="none">log_level: debug</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuring-logging-type-and-layout_admin"><a class="anchor" href="#configuring-logging-type-and-layout_admin"></a>10.2. Configuring logging type and layout</h3>
<div class="paragraph">
<p>By default, Foreman uses file-based logging.
You can use <code>foreman-installer</code> to change the logging type and logging layout.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure for configuring logging with journal</div>
<ol class="arabic">
<li>
<p>Enter the following <code>foreman-installer</code> command to configure logging to the <code>journald</code> service:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer \
--foreman-logging-type journald \
--foreman-proxy-log JOURNAL</pre>
</div>
</div>
</li>
<li>
<p>Optional: To inspect the log messages, use the <code>journalctl</code> utility.
For example:</p>
<div class="ulist">
<ul>
<li>
<p><code>journalctl --unit foreman</code> and <code>journalctl --unit foreman-proxy</code> show messages for the <code>foreman</code> and <code>foreman-proxy</code> units</p>
</li>
<li>
<p><code>journalctl REQUEST=<em>request_ID</em></code> shows messages for a specified request</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Procedure for configuring file-based logging</div>
<ol class="arabic">
<li>
<p>Enter the following <code>foreman-installer</code> command to configure file-based logging:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer \
--reset-foreman-logging-type \
--reset-foreman-proxy-log</pre>
</div>
</div>
</li>
<li>
<p>Optional: To inspect the log messages, view these files:</p>
<div class="ulist">
<ul>
<li>
<p><code>/var/log/foreman/production.log</code></p>
</li>
<li>
<p><code>/var/log/foreman-proxy.log</code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Procedure for configuring logging to JSON output</div>
<ol class="arabic">
<li>
<p>On your Foreman&#160;server, enable logging to JSON output for <code>foreman-installer</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer \
--foreman-logging-layout json \
--foreman-logging-type file</pre>
</div>
</div>
</li>
<li>
<p>Optional: Inspect the log messages using <code>jq</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># cat /var/log/foreman/production.log | jq</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Selective_Debugging_with_Individual_Loggers_admin"><a class="anchor" href="#Selective_Debugging_with_Individual_Loggers_admin"></a>10.3. Selective debugging with individual loggers</h3>
<div class="paragraph">
<p>You can enable individual loggers for selective debugging.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Enable the required individual loggers.
For example, to enable <code>sql</code> and <code>ldap</code> loggers, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer \
--foreman-loggers ldap:true \
--foreman-loggers sql:true</pre>
</div>
</div>
</li>
<li>
<p>Optional: Reset all loggers to their default values:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --reset-foreman-loggers</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Overview_of_Individual_Loggers_admin"><a class="anchor" href="#Overview_of_Individual_Loggers_admin"></a>10.4. Overview of individual loggers</h3>
<div class="paragraph">
<p>The following list provides an overview of selected loggers.
You can find the complete list of loggers with their default values in
<a href="https://github.com/theforeman/foreman/blob/55b0a9f1b1b2871976c5ea7b7874f18afcf1a8ab/config/application.rb#L279-L294:"><code>/usr/share/foreman/config/application.rb</code> under <code>Foreman::Logging.add_loggers</code></a>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>app</code></dt>
<dd>
<p>Logs web requests and all general application messages.</p>
<div class="paragraph">
<p>Default value: true.</p>
</div>
</dd>
<dt class="hdlist1"><code>audit</code></dt>
<dd>
<p>Logs additional fact statistics, numbers of added, updated, and removed facts.</p>
<div class="paragraph">
<p>Default value: true.</p>
</div>
</dd>
<dt class="hdlist1"><code>background</code></dt>
<dd>
<p>Logs information from the background processing component.</p>
</dd>
<dt class="hdlist1"><code>blob</code></dt>
<dd>
<p>Logs contents of rendered templates for auditing purposes.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>blob</code> logger might contain sensitive data.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1"><code>dynflow</code></dt>
<dd>
<p>Logs information from the Dynflow process.</p>
</dd>
<dt class="hdlist1"><code>ldap</code></dt>
<dd>
<p>Logs high level LDAP queries and LDAP operations.</p>
<div class="paragraph">
<p>Default value: false.</p>
</div>
</dd>
<dt class="hdlist1"><code>notifications</code></dt>
<dd>
<p>Logs information from the notifications component.</p>
</dd>
<dt class="hdlist1"><code>permissions</code></dt>
<dd>
<p>Logs queries to user roles, filters, and permissions when loading pages.</p>
<div class="paragraph">
<p>Default value: false.</p>
</div>
</dd>
<dt class="hdlist1"><code>sql</code></dt>
<dd>
<p>Logs SQL queries made through Rails ActiveRecord.</p>
<div class="paragraph">
<p>Default value: false.</p>
</div>
</dd>
<dt class="hdlist1"><code>telemetry</code></dt>
<dd>
<p>Logs debugging information from telemetry.</p>
</dd>
<dt class="hdlist1"><code>templates</code></dt>
<dd>
<p>Logs information from the template renderer component.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="Retrieving_the_Status_of_Services_admin"><a class="anchor" href="#Retrieving_the_Status_of_Services_admin"></a>10.5. Retrieving the status of services</h3>
<div class="paragraph">
<p>Foreman uses a set of back-end services.
When troubleshooting, you can check the status of Foreman services.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>About</strong>.</p>
<div class="ulist">
<ul>
<li>
<p>On the <strong>Smart Proxies</strong> tab, view the status of all Smart&#160;Proxies.</p>
</li>
<li>
<p>On the <strong>Compute Resources</strong> tab, view the status of attached compute resource providers.</p>
</li>
<li>
<p>In the <strong>Backend System Status</strong> table, view the status of all back-end services.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Get information from the database and Foreman services:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer ping</pre>
</div>
</div>
</li>
<li>
<p>Check the status of the services running in systemd:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain service status</pre>
</div>
</div>
<div class="paragraph">
<p>Run <code>foreman-maintain service --help</code> for more information.</p>
</div>
</li>
<li>
<p>Perform a health check:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ foreman-maintain health check</pre>
</div>
</div>
<div class="paragraph">
<p>Run <code>foreman-maintain health --help</code> for more information.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Restarting_Services_admin"><a class="anchor" href="#Restarting_Services_admin"></a>10.6. Restarting services</h3>
<div class="paragraph">
<p>Foreman uses a set of back-end services.
When troubleshooting, you can restart the services if needed.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Restart Foreman services:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain service restart</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Utilities_for_Processing_Log_Information_admin"><a class="anchor" href="#Utilities_for_Processing_Log_Information_admin"></a>10.7. Utilities for processing log information</h3>
<div class="paragraph">
<p>You can collect information from log files to troubleshoot Foreman.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">sosreport</dt>
<dd>
<p>The <code>sos report</code> command collects configuration and diagnostic information from a Linux system, such as the running kernel version, loaded modules, running services, and system and service configuration files.
Additionally, it collects information about Foreman, such as its back-end services and tasks.
This output is stored in a tar file located at <code>/var/tmp/<em>sosreport-XXX-20171002230919.tar.xz</em></code>.</p>
<div class="paragraph">
<p>For more information, run <code>sos report --help</code> or see
<a href="https://github.com/sosreport/sos/wiki#for-users"><em>SOS user documentation</em></a>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>sos report</code> command removes security information such as passwords, tokens, and keys while collecting information.
However, the tar files can still contain sensitive information about the Foreman&#160;server.
Send the tar files directly to the intended recipient and not to a public target.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1">foreman-tail</dt>
<dd>
<p>The <code>foreman-tail</code> command displays Foreman logs in real time.</p>
<div class="paragraph">
<p>For more information, see the <code>foreman-tail(8)</code> man page.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="Log_File_Directories_admin"><a class="anchor" href="#Log_File_Directories_admin"></a>10.8. Log file directories</h3>
<div class="paragraph">
<p>The following table provides an overview of selected log directories on Foreman&#160;server:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Log file directory</th>
<th class="tableblock halign-left valign-top">Description of log file content</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/log/foreman-installer/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Installer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/log/foreman-maintain/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman maintain</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/log/foreman-proxy/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman proxy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/log/foreman/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/log/apache2/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Apache HTTP server</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/log/messages/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Various other log messages</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/log/puppetlabs/puppet/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Puppet</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="system-journal-metadata_admin"><a class="anchor" href="#system-journal-metadata_admin"></a>10.9. System journal metadata</h3>
<div class="paragraph">
<p>The following table lists metadata that the <code>journald</code> service uses in Foreman.
You can use this metadata to filter your queries.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">AUDIT_ACTION</dt>
<dd>
<p>Audit action performed</p>
<div class="paragraph">
<p>Example: Create, update, or delete</p>
</div>
</dd>
<dt class="hdlist1">AUDIT_TYPE</dt>
<dd>
<p>Audit resource type</p>
<div class="paragraph">
<p>Example: Host, Subnet, or ContentView</p>
</div>
</dd>
<dt class="hdlist1">AUDIT_ID</dt>
<dd>
<p>Audit resource database ID as a number</p>
</dd>
<dt class="hdlist1">AUDIT_ATTRIBUTE</dt>
<dd>
<p>Audit resource field or an updated database column</p>
</dd>
<dt class="hdlist1">AUDIT_FIELD_OLD</dt>
<dd>
<p>Old audit value of an update action</p>
</dd>
<dt class="hdlist1">AUDIT_FIELD_NEW</dt>
<dd>
<p>New audit value of an update action</p>
</dd>
<dt class="hdlist1">AUDIT_ID</dt>
<dd>
<p>Record database ID of the audit subject</p>
</dd>
<dt class="hdlist1">AUDIT_ATTRIBUTE</dt>
<dd>
<p>Attribute name or column on which an action was performed</p>
<div class="paragraph">
<p>Example: Name or description</p>
</div>
</dd>
<dt class="hdlist1">EXCEPTION_MESSAGE</dt>
<dd>
<p>Exception message when error is logged</p>
</dd>
<dt class="hdlist1">EXCEPTION_CLASS</dt>
<dd>
<p>Exception Ruby class when error is logged</p>
</dd>
<dt class="hdlist1">EXCEPTION_BACKTRACE</dt>
<dd>
<p>Exception backtrace as a multiline string when error is logged</p>
</dd>
<dt class="hdlist1">LOC_ID</dt>
<dd>
<p>Location database ID</p>
</dd>
<dt class="hdlist1">LOC_NAME</dt>
<dd>
<p>Location name</p>
</dd>
<dt class="hdlist1">LOC_LABEL</dt>
<dd>
<p>Location label</p>
</dd>
<dt class="hdlist1">LOGGER</dt>
<dd>
<p>Logger name</p>
<div class="paragraph">
<p>To see the current list of loggers enabled by default, enter this command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># awk '/add_loggers/,/^$/' /usr/share/foreman/config/application.rb</pre>
</div>
</div>
</dd>
<dt class="hdlist1">ORG_ID</dt>
<dd>
<p>Organization database ID</p>
</dd>
<dt class="hdlist1">ORG_NAME</dt>
<dd>
<p>Organization name</p>
</dd>
<dt class="hdlist1">ORG_LABEL</dt>
<dd>
<p>Organization label</p>
</dd>
<dt class="hdlist1">REMOTE_IP</dt>
<dd>
<p>Remote IP address of a client</p>
</dd>
<dt class="hdlist1">REQUEST</dt>
<dd>
<p>Request ID generated by the Action Dispatch module</p>
</dd>
<dt class="hdlist1">SESSION</dt>
<dd>
<p>Random ID generated per session or a request for a sessionless request</p>
</dd>
<dt class="hdlist1">TEMPLATE_NAME</dt>
<dd>
<p>Template name</p>
</dd>
<dt class="hdlist1">TEMPLATE_DIGEST</dt>
<dd>
<p>Digest (SHA256) of rendered template contents</p>
</dd>
<dt class="hdlist1">TEMPLATE_HOST_NAME</dt>
<dd>
<p>Host name for a rendered template if present</p>
</dd>
<dt class="hdlist1">TEMPLATE_HOST_ID</dt>
<dd>
<p>Host database ID for a rendered template if present</p>
</dd>
<dt class="hdlist1">USER_LOGIN</dt>
<dd>
<p>User login name</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="monitoring-foreman-resources"><a class="anchor" href="#monitoring-foreman-resources"></a>11. Monitoring Foreman resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use Foreman web UI to monitor your Foreman environment and hosts.
This includes details of hosts, such as configuration or compliance, and information about
Smart&#160;Proxies.</p>
</div>
<div class="sect2">
<h3 id="Using_the_Project_Content_Dashboard_admin"><a class="anchor" href="#Using_the_Project_Content_Dashboard_admin"></a>11.1. Using the Foreman content dashboard</h3>
<div class="paragraph">
<p>The Foreman content dashboard contains various widgets which provide an overview of the host configuration, content views, compliance reports, and hosts currently registered, promotions and synchronization, and a list of the latest notifications.</p>
</div>
<div class="paragraph">
<p>In the Foreman web UI, navigate to <strong>Monitor</strong> &gt; <strong>Dashboard</strong> to access the content dashboard.
The dashboard can be rearranged by clicking on a widget and dragging it to a different position.
The following widgets are available:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Host Configuration Status</strong></dt>
<dd>
<p>An overview of the configuration states and the number of hosts associated with it during the last reporting interval.
The following table shows the descriptions of the possible configuration states.</p>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Host configuration states</caption>
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Icon</th>
<th class="tableblock halign-left valign-top">State</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/common/host-state-config-okay.png" alt="host state config okay"></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Hosts that had performed modifications without error</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Host that successfully performed modifications during the last reporting interval.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/common/host-state-config-error.png" alt="host state config error"></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Hosts in error state</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hosts on which an error was detected during the last reporting interval.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/common/host-state-config-report.png" alt="host state config report"></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Good host reports in the last 35 minutes</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hosts without error that did not perform any modifications in the last 35 minutes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/common/host-state-config-pending.png" alt="host state config pending"></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Hosts that had pending changes</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hosts on which some resources would be applied but Puppet was configured to run in the <code>noop</code> mode.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/common/host-state-config-outofsync.png" alt="host state config outofsync"></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Out of sync hosts</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hosts that were not synchronized and the report was not received during the last reporting interval.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/common/host-state-config-noreport.png" alt="host state config noreport"></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Hosts with no reports</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hosts for which no reports were collected during the last reporting interval.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/common/host-state-config-noalert.png" alt="host state config noalert"></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Hosts with alerts disabled</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hosts which are not being monitored.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Click the particular configuration status to view hosts associated with it.</p>
</div>
</dd>
<dt class="hdlist1"><strong>Host Configuration Chart</strong></dt>
<dd>
<p>A pie chart shows the proportion of the configuration status and the percentage of all hosts associated with it.</p>
</dd>
<dt class="hdlist1"><strong>Latest Events</strong></dt>
<dd>
<p>A list of messages produced by hosts including administration information, product changes, and any errors.</p>
<div class="paragraph">
<p>Monitor this section for global notifications sent to all users and to detect any unusual activity or errors.</p>
</div>
</dd>
<dt class="hdlist1"><strong>Run Distribution (last 30 minutes)</strong></dt>
<dd>
<p>A graph shows the distribution of the running Puppet agents during the last puppet interval which is 30 minutes by default.
In this case, each column represents several reports received from clients during 3 minutes.</p>
</dd>
<dt class="hdlist1"><strong>New Hosts</strong></dt>
<dd>
<p>A list of the recently created hosts.
Click the host for more details.</p>
</dd>
<dt class="hdlist1"><strong>Task Status</strong></dt>
<dd>
<p>A summary of all current tasks, grouped by their state and result.
Click the number to see the list of corresponding tasks.</p>
</dd>
<dt class="hdlist1"><strong>Latest Warning/Error Tasks</strong></dt>
<dd>
<p>A list of the latest tasks that have been stopped due to a warning or error.
Click a task to see more details.</p>
</dd>
<dt class="hdlist1"><strong>Discovered Hosts</strong></dt>
<dd>
<p>A list of all bare-metal hosts detected on the provisioning network by the Discovery plugin.</p>
</dd>
<dt class="hdlist1"><strong>Latest Errata</strong></dt>
<dd>
<p>A list of all errata available for hosts registered to Foreman.</p>
</dd>
<dt class="hdlist1"><strong>Content Views</strong></dt>
<dd>
<p>A list of all content views in Foreman and their publish status.</p>
</dd>
<dt class="hdlist1"><strong>Sync Overview</strong></dt>
<dd>
<p>An overview of all products or repositories enabled in Foreman and their synchronization status.
All products that are in the queue for synchronization, are unsynchronized or have been previously synchronized are listed in this section.</p>
</dd>
<dt class="hdlist1"><strong>Host Collections</strong></dt>
<dd>
<p>A list of all host collections in Foreman and their status, including the number of content hosts in each host collection.</p>
</dd>
<dt class="hdlist1"><strong>Virt-who Configuration Status</strong></dt>
<dd>
<p>An overview of the status of reports received from the <code>virt-who</code> daemon running on hosts in the environment.
The following table shows the possible states.</p>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. virt-who configuration states</caption>
<colgroup>
<col style="width: 22.2222%;">
<col style="width: 77.7778%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">State</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>No Reports</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No report has been received because either an error occurred during the virt-who configuration deployment, or the configuration has not been deployed yet, or virt-who cannot connect to Foreman during the scheduled interval.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>No Change</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No report has been received because hypervisor did not detect any changes on the virtual machines, or virt-who failed to upload the reports during the scheduled interval.
If you added a virtual machine but the configuration is in the <strong>No Change</strong> state, check that virt-who is running.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>OK</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The report has been received without any errors during the scheduled interval.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Total Configurations</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A total number of virt-who configurations.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Click the configuration status to see all configurations in this state.</p>
</div>
<div class="paragraph">
<p>The widget also lists the three latest configurations in the <strong>No Change</strong> state under <strong>Latest Configurations Without Change</strong>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>Latest Compliance Reports</strong></dt>
<dd>
<p>A list of the latest compliance reports.
Each compliance report shows several rules passed (P), failed (F), or othered (O).
Click the host for the detailed compliance report.
Click the policy for more details on that policy.</p>
</dd>
<dt class="hdlist1"><strong>Compliance Reports Breakdown</strong></dt>
<dd>
<p>A pie chart shows the distribution of compliance reports according to their status.</p>
</dd>
<dt class="hdlist1"><strong>Insights Actions</strong></dt>
<dd>
<p>Insights is a tool embedded in Foreman that checks the environment and suggests actions you can take.
The actions are divided into 4 categories: Availability, Stability, Performance, and Security.</p>
</dd>
<dt class="hdlist1"><strong>Insights Risk Summary</strong></dt>
<dd>
<p>A table shows the distribution of the actions according to the risk levels.
Risk level represents how critical the action is and how likely it is to cause an actual issue.
The possible risk levels are: Low, Medium, High, and Critical.</p>
</dd>
</dl>
</div>
<div class="sect3">
<h4 id="Managing_Tasks_admin"><a class="anchor" href="#Managing_Tasks_admin"></a>11.1.1. Managing tasks</h4>
<div class="paragraph">
<p>Foreman keeps a complete log of all planned or performed tasks, such as repositories synchronised, errata applied, and content views published.
To review the log, navigate to <strong>Monitor</strong> &gt; <strong>Foreman Tasks</strong> &gt; <strong>Tasks</strong>.</p>
</div>
<div class="paragraph">
<p>In the Task window, you can search for specific tasks, view their status, details, and elapsed time since they started.
You can also cancel and resume one or more tasks.</p>
</div>
<div class="paragraph">
<p>The tasks are managed using the Dynflow engine.
Remote tasks have a timeout which can be adjusted as needed.</p>
</div>
<div class="olist arabic">
<div class="title">To adjust timeout settings</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Settings</strong>.</p>
</li>
<li>
<p>Enter <em>%_timeout</em> in the search box and click <strong>Search</strong>.
The search should return four settings, including a description.</p>
</li>
<li>
<p>In the <strong>Value</strong> column, click the icon next to a number to edit it.</p>
</li>
<li>
<p>Enter the desired value in seconds, and click <strong>Save</strong>.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Adjusting the <em>%_finish_timeout</em> values might help in case of low bandwidth.
Adjusting the <em>%_accept_timeout</em> values might help in case of high latency.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">To disable checking for services</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Settings</strong>.</p>
</li>
<li>
<p>Enter <em>check_services_before_actions</em> in the search box and click <strong>Search</strong>.</p>
</li>
<li>
<p>In the <strong>Value</strong> column, click the icon to edit the value.</p>
</li>
<li>
<p>From the drop-down menu, select <strong>false</strong>.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Configuring_RSS_Notifications_admin"><a class="anchor" href="#Configuring_RSS_Notifications_admin"></a>11.2. Configuring RSS notifications</h3>
<div class="paragraph">
<p>To view Foreman event notification alerts, click the <strong>Notifications</strong> icon in the upper right of the screen.</p>
</div>
<div class="paragraph">
<p>By default, the Notifications area displays RSS feed events published in the <a href="https://theforeman.org/blog/">Foreman Blog</a>.</p>
</div>
<div class="paragraph">
<p>The feed is refreshed every 12 hours and the Notifications area is updated whenever new events become available.</p>
</div>
<div class="paragraph">
<p>You can configure the RSS feed notifications by changing the URL feed.
The supported feed format is RSS 2.0 and Atom.
For an example of the RSS 2.0 feed structure, see the <a href="https://access.redhat.com/blogs/1169563/feed">Foreman Blog feed</a>.
For an example of the Atom feed structure, see the <a href="https://theforeman.org/feed.xml">Foreman blog feed</a>.</p>
</div>
<div class="olist arabic">
<div class="title">To configure RSS feed notifications</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Settings</strong> and select the <strong>Notifications</strong> tab.</p>
</li>
<li>
<p>In the RSS URL row, click the edit icon in the <strong>Value</strong> column and type the required URL.</p>
</li>
<li>
<p>In the RSS enable row, click the edit icon in the <strong>Value</strong> column to enable or disable this feature.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="monitoring-foreman-server_admin"><a class="anchor" href="#monitoring-foreman-server_admin"></a>11.3. Monitoring Foreman&#160;server</h3>
<div class="paragraph">
<p>Audit records list the changes made by all users on Foreman.
This information can be used for maintenance and troubleshooting.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Monitor</strong> &gt; <strong>Audits</strong> to view the audit records.</p>
</li>
<li>
<p>Obtain a list of all audit attributes:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-rake audits:list_attributes</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="monitoring-smart-proxy-server_admin"><a class="anchor" href="#monitoring-smart-proxy-server_admin"></a>11.4. Monitoring Smart&#160;Proxy&#160;server</h3>
<div class="paragraph">
<p>The following section shows how to use the Foreman web UI to find Smart&#160;Proxy information valuable for maintenance and troubleshooting.</p>
</div>
<div class="sect3">
<h4 id="viewing-general-smart-proxy-information_admin"><a class="anchor" href="#viewing-general-smart-proxy-information_admin"></a>11.4.1. Viewing general Smart&#160;Proxy information</h4>
<div class="paragraph">
<p>In the Foreman web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Smart&#160;Proxies</strong> to view a table of Smart&#160;Proxy&#160;servers registered to Foreman&#160;server.
The information contained in the table answers the following questions:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Is Smart&#160;Proxy&#160;server running?</strong></dt>
<dd>
<p>This is indicated by a green icon in the <strong>Status</strong> column.
A red icon indicates an inactive Smart&#160;Proxy, use the <code>service foreman-proxy restart</code> command on Smart&#160;Proxy&#160;server to activate it.</p>
</dd>
<dt class="hdlist1"><strong>What services are enabled on Smart&#160;Proxy&#160;server?</strong></dt>
<dd>
<p>In the <strong>Features</strong> column, you can verify if, for example, your Smart&#160;Proxy provides a DHCP service.
Smart&#160;Proxy features can be enabled during installation or configured in addition.
For more information, see <a href="https://docs.theforeman.org/3.16/Installing_Proxy/index-foreman-deb.html#">Installing Smart&#160;Proxy&#160;server</a>.</p>
</dd>
<dt class="hdlist1"><strong>What organizations and locations is Smart&#160;Proxy&#160;server assigned to?</strong></dt>
<dd>
<p>A Smart&#160;Proxy&#160;server can be assigned to multiple organizations and locations, but only Smart&#160;Proxies belonging to the currently selected organization are displayed.
To list all Smart&#160;Proxies, select <strong>Any Organization</strong> from the context menu in the top left corner.</p>
<div class="paragraph">
<p>After changing the Smart&#160;Proxy configuration, select <strong>Refresh</strong> from the drop-down menu in the <strong>Actions</strong> column to ensure the Smart&#160;Proxy table is up to date.</p>
</div>
<div class="paragraph">
<p>Click the Smart&#160;Proxy name to view further details.
At the <strong>Overview</strong> tab, you can find the same information as in the Smart&#160;Proxy table.
In addition, you can answer to the following questions:</p>
</div>
</dd>
<dt class="hdlist1"><strong>Which hosts are managed by Smart&#160;Proxy&#160;server?</strong></dt>
<dd>
<p>The number of associated hosts is displayed next to the <strong>Hosts managed</strong> label.
Click the number to view the details of associated hosts.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="Monitoring_Services_admin"><a class="anchor" href="#Monitoring_Services_admin"></a>11.4.2. Monitoring services</h4>
<div class="paragraph">
<p>In the Foreman web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Smart&#160;Proxies</strong> and click the name of the selected Smart&#160;Proxy.
At the <strong>Services</strong> tab, you can find basic information on Smart&#160;Proxy services,
for example, the list of DNS domains.
The appearance of the page depends on what services are enabled on Smart&#160;Proxy&#160;server.
Services providing more detailed status information can have dedicated tabs at the Smart&#160;Proxy page.
For more information, see <a href="#Monitoring_Puppet_admin">Monitoring Puppet</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="Monitoring_Puppet_admin"><a class="anchor" href="#Monitoring_Puppet_admin"></a>11.4.3. Monitoring Puppet</h4>
<div class="paragraph">
<p>In the Foreman web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Smart&#160;Proxies</strong> and click the name of the selected Smart&#160;Proxy.
At the <strong>Puppet</strong> tab you can find the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A summary of Puppet events, an overview of latest Puppet runs, and the synchronization status of associated hosts at the <strong>General</strong> sub-tab.</p>
</li>
<li>
<p>A list of Puppet environments at the <strong>Environments</strong> sub-tab.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>At the <strong>Puppet CA</strong> tab you can find the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A certificate status overview and the number of autosign entries at the <strong>General</strong> sub-tab.</p>
</li>
<li>
<p>A table of CA certificates associated with the Smart&#160;Proxy at the <strong>Certificates</strong> sub-tab.
Here you can inspect the certificate expiry data, or cancel the certificate by clicking <strong>Revoke</strong>.</p>
</li>
<li>
<p>A list of autosign entries at the <strong>Autosign entries</strong> sub-tab.
Here you can create an entry by clicking <strong>New</strong> or delete one by clicking <strong>Delete</strong>.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The <strong>Puppet</strong> and <strong>Puppet CA</strong> tabs are available only if you have Puppet enabled in your Foreman.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>For more information, see <a href="https://docs.theforeman.org/3.16/Managing_Configurations_Puppet/index-foreman-deb.html#Enabling_Puppet_Integration_managing-configurations-puppet">Enabling Puppet Integration with Foreman</a> in <em>Configuring hosts by using Puppet</em>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="limiting-host-resources"><a class="anchor" href="#limiting-host-resources"></a>12. Limiting host resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use the Resource Quota plugin to limit users' access to host resources during host provisioning.
Each host is assigned to exactly one resource quota.
By default, Foreman assigns the <code>Unassigned</code> resource quota to hosts during global registration.
This means that the host is not assigned to a specific pool of resources.</p>
</div>
<div class="paragraph">
<p>In a typical usage scenario, Foreman manages multiple compute resources for multiple departments.
To share managed resources in a fair and predictable way, administrators can assign resource quotas to users and user groups.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported resource types</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>CPU cores</p>
</li>
<li>
<p>Memory</p>
</li>
<li>
<p>Disk space</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Supported compute resources</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>VMware</p>
</li>
<li>
<p>libvirt</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>For more information, see <a href="#resource-quota-settings">Resource Quota settings</a>.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="installing-the-resource-quota-plugin"><a class="anchor" href="#installing-the-resource-quota-plugin"></a>12.1. Installing the Resource Quota plugin</h3>
<div class="paragraph">
<p>To limit host resources for your Foreman users, install the Resource Quota plugin.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Install the plugin on your Foreman&#160;server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --enable-foreman-plugin-resource-quota</pre>
</div>
</div>
</li>
<li>
<p>Optional: Install the Hammer CLI plugin on your Foreman&#160;server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --enable-foreman-cli-resource-quota</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="managing-resource-quotas"><a class="anchor" href="#managing-resource-quotas"></a>12.2. Managing resource quotas</h3>
<div class="paragraph">
<p>You can create, edit, and delete resource quotas in Foreman web UI.
All resource quotas are listed on <strong>Configure</strong> &gt; <strong>Resource Quotas</strong>.</p>
</div>
<div class="sect3">
<h4 id="creating-a-resource-quota"><a class="anchor" href="#creating-a-resource-quota"></a>12.2.1. Creating a resource quota</h4>
<div class="paragraph">
<p>Create a resource quota to limit the resource consumption of Foreman users.
To use the CLI instead of the Foreman web UI, see the <a href="#cli-creating-a-resource-quota">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Configure</strong> &gt; <strong>Resource Quotas</strong>.</p>
</li>
<li>
<p>Click <strong>Create resource quota</strong>.</p>
</li>
<li>
<p>Specify the name, CPU cores, memory, and disk space.</p>
</li>
<li>
<p>Click <strong>Create resource quota</strong> to submit the resource quota to Foreman.</p>
</li>
</ol>
</div>
<div id="cli-creating-a-resource-quota" class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Create a resource quota:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer resource-quota create \
--cpu-cores <em>My_CPU_Cores</em> \
--description <em>My_Resource_Quota_Description</em> \
--disk-space <em>My_Disk_Space_in_GiB</em> \
--memory <em>My_Memory_in_MiB</em> \
--name "<em>My_Resource_Quota_Name</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>For all options, see <code>hammer resource-quota create --help</code>.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="editing-a-resource-quota"><a class="anchor" href="#editing-a-resource-quota"></a>12.2.2. Editing a resource quota</h4>
<div class="paragraph">
<p>You can edit a resource quota to adjust available resources to Foreman users.
To use the CLI instead of the Foreman web UI, see the <a href="#cli-editing-a-resource-quota">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Configure</strong> &gt; <strong>Resource Quotas</strong>.</p>
</li>
<li>
<p>Select your resource quota.</p>
</li>
<li>
<p>Adjust the <strong>CPU cores</strong>, <strong>Memory</strong>, or <strong>Disk space</strong> and click <strong>Apply</strong> to submit your changes to Foreman.</p>
</li>
<li>
<p>Click <strong>Create resource quota</strong> to submit the resource quota to Foreman.</p>
</li>
</ol>
</div>
<div id="cli-editing-a-resource-quota" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Optional: List all resource quotas:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer resource-quota list --fields id,name</pre>
</div>
</div>
</li>
<li>
<p>Edit a resource quota:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer resource-quota update \
--cpu-cores <em>My_CPU_Cores</em> \
--description <em>My_Resource_Quota_Description</em> \
--disk-space <em>My_Disk_Space_in_GiB</em> \
--id <em>My_Resource_Quota_ID</em> \
--memory <em>My_Memory_in_MiB</em> \
--name "<em>My_Resource_Quota_Name</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>If you set the value to <code>0</code>, users cannot consume any resource at all.
To reset resource quotas, you can use <code>--remove-cpu-cores-limit</code>, <code>--remove-disk-space-limit</code>, and <code>--remove-memory-limit</code>.</p>
</div>
<div class="paragraph">
<p>For all options, see <code>hammer resource-quota update --help</code>.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="deleting-a-resource-quota"><a class="anchor" href="#deleting-a-resource-quota"></a>12.2.3. Deleting a resource quota</h4>
<div class="paragraph">
<p>You can delete a resource quota from Foreman.
To use the CLI instead of the Foreman web UI, see the <a href="#cli-deleting-a-resource-quota">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Configure</strong> &gt; <strong>Resource Quotas</strong>.</p>
</li>
<li>
<p>In the <strong>Actions</strong> column, click <strong>Delete</strong> for your resource quota.</p>
</li>
</ol>
</div>
<div id="cli-deleting-a-resource-quota" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Optional: List all resource quotas:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer resource-quota list --fields id,name</pre>
</div>
</div>
</li>
<li>
<p>Delete a resource quota:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer resource-quota delete --id <em>My_Resource_Quota_ID</em></pre>
</div>
</div>
<div class="paragraph">
<p>For all options, see <code>hammer resource-quota delete --help</code>.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="assigning-resource-quotas-to-users"><a class="anchor" href="#assigning-resource-quotas-to-users"></a>12.3. Assigning resource quotas to users</h3>
<div class="paragraph">
<p>You can assign resource quotas to users or user groups.
A user can select one of their assigned resource quotas during host provisioning.
If <code>Resource Quota optional assignment</code> is set to <strong>No</strong>, a user does not have to assign a resource quota.
You can use the <code>resource_quota</code> filter in the Foreman web UI to view users or user groups with assigned resource quotas.</p>
</div>
<div class="paragraph">
<p>If you want to introduce resource quotas to your organization, set <code>Global Resource Quota no action</code> to <strong>Yes</strong> to allow users to provision hosts even if they exceed their resource quotas.</p>
</div>
<div class="sect3">
<h4 id="assigning-resource-quotas-to-a-user"><a class="anchor" href="#assigning-resource-quotas-to-a-user"></a>12.3.1. Assigning resource quotas to a user</h4>
<div class="paragraph">
<p>You can assign resource quotas to a user to limit the resource consumption of that Foreman user.
To use the CLI instead of the Foreman web UI, see the <a href="#cli-assigning-resource-quotas-to-a-user">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Users</strong>.</p>
</li>
<li>
<p>Select a user.</p>
</li>
<li>
<p>On the <strong>Resource Quota</strong> tab, assign resource quotas to the user.</p>
</li>
<li>
<p>If you want to make the usage of resource quotas optional, select the <strong>Optional Assignment</strong> checkbox.</p>
<div class="paragraph">
<p>This means that Foreman will not prevent users from consuming more resources than their assigned quota.</p>
</div>
</li>
<li>
<p>Click <strong>Submit</strong> to assign resource quotas to a user.</p>
</li>
</ol>
</div>
<div id="cli-assigning-resource-quotas-to-a-user" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Optional: List all Foreman users:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer user list --fields id,login</pre>
</div>
</div>
</li>
<li>
<p>Optional: List all resource quotas:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer resource-quota list --fields id,name</pre>
</div>
</div>
</li>
<li>
<p>Assign resource quotas to a user:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer user update \
--id <em>My_User_ID</em> \
--resource-quota-ids <em>My_Resource_Quota_IDs</em></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to make resource quota optional, add the <code>--resource-quota-is-optional true</code> option.</p>
</div>
<div class="paragraph">
<p>For all options, see <code>hammer user update --help</code>.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="assigning-resource-quotas-to-a-user-group"><a class="anchor" href="#assigning-resource-quotas-to-a-user-group"></a>12.3.2. Assigning resource quotas to a user group</h4>
<div class="paragraph">
<p>You can assign resource quotas to a user group to limit the resource consumption of that Foreman user group.
All users of the user group share the pool of resources.
To use the CLI instead of the Foreman web UI, see the <a href="#cli-assigning-resource-quotas-to-a-user-group">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>User Groups</strong>.</p>
</li>
<li>
<p>On the <strong>Resource Quota</strong> tab, assign resource quotas to the user group.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to assign resource quotas to a user group.</p>
</li>
</ol>
</div>
<div id="cli-assigning-resource-quotas-to-a-user-group" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Optional: List all Foreman user groups:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer user-group list --fields id,name</pre>
</div>
</div>
</li>
<li>
<p>Optional: List all resource quotas:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer resource-quota list --fields id,name</pre>
</div>
</div>
</li>
<li>
<p>Assign resource quotas to a user group:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer user-group update \
--id <em>My_User_Group_ID</em> \
--resource-quota-ids <em>My_Resource_Quota_IDs</em></pre>
</div>
</div>
<div class="paragraph">
<p>For all options, see <code>hammer user-group update --help</code>.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="viewing-resource-quotas"><a class="anchor" href="#viewing-resource-quotas"></a>12.4. Viewing resource quotas</h3>
<div class="paragraph">
<p>You can use Foreman web UI and Hammer CLI to view the resource quota of hosts.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>.</p>
</li>
<li>
<p>In the search bar, filter your hosts.
For example, <code>resource_quota = Unassigned</code>.</p>
<div class="paragraph">
<p>For more information, see <a href="#Building_Search_Queries_admin">Building search queries</a>.</p>
</div>
</li>
</ol>
</div>
<div id="cli-viewing-resource-quotas" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Optional: Retrieve the ID of your host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer host list</pre>
</div>
</div>
</li>
<li>
<p>Display the resource quota assigned to your host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer host info \
--fields "Id,Name,Resource quota id" \
--id <em>My_Host_ID</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="resource-quota-settings"><a class="anchor" href="#resource-quota-settings"></a>12.5. Resource Quota settings</h3>
<div class="paragraph">
<p>You can configure the following global Foreman settings for the Resource Quota plugin:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Global Resource Quota no action</dt>
<dd>
<p>Foreman will not limit the resource consumption if a resource quota is exceeded.</p>
</dd>
<dt class="hdlist1">Resource Quota optional assignment</dt>
<dd>
<p>Foreman will not enforce selecting a resource quota during host provisioning.
The global setting overwrites user-specific and user group-specific configuration options.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>You can find the Resource Quota settings by navigating to <strong>Administer</strong> &gt; <strong>Settings</strong> &gt; <strong>Provisioning</strong>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Using_Webhooks_admin"><a class="anchor" href="#Using_Webhooks_admin"></a>13. Using webhooks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A webhook is a way for a web page or web application to provide other applications with information in real time.
Webhooks are only triggered after an event occurs.
The request usually contains details of the event.
An event triggers callbacks, such as sending an e-mail confirming a host has been provisioned.
You can use webhooks to define a call to an external API based on Foreman internal event by using a fire-and-forget message exchange pattern.
The application sending the request does not wait for the response, or ignores it.</p>
</div>
<div class="paragraph">
<p>Payload of a webhook is created from webhook templates.
Webhook templates use the same ERB syntax as Provisioning templates.
Available variables:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@event_name</code>: Name of an event.</p>
</li>
<li>
<p><code>@webhook_id</code>: Unique event ID.</p>
</li>
<li>
<p><code>@payload</code>: Payload data, different for each event type. To access individual fields, use <code>@payload[:key_name]</code> Ruby hash syntax.</p>
</li>
<li>
<p><code>@payload[:object]</code>: Database object for events triggered by database actions (create, update, delete). Not available for custom events.</p>
</li>
<li>
<p><code>@payload[:context]</code>: Additional information as hash like request and session UUID, remote IP address, user, organization and location.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Because webhooks use HTTP, no new infrastructure needs be added to existing web services.</p>
</div>
<div class="paragraph">
<p>The typical use case for webhooks in Foreman is making a call to a monitoring system when a host is created or deleted.</p>
</div>
<div class="paragraph">
<p>Webhooks are useful where the action you want to perform in the external system can be achieved through its API.
Where it is necessary to run additional commands or edit files, the shellhooks plugin for Smart&#160;Proxies is available.
The shellhooks plugin enables you to define a shell script on the Smart&#160;Proxy that can be executed through the API.</p>
</div>
<div class="paragraph">
<p>You can use webhooks successfully without installing the shellhooks plugin.</p>
</div>
<div class="paragraph">
<p>For a list of available events, see <a href="#webhooks-available-events_admin">Available webhook events</a>.</p>
</div>
<div class="sect2">
<h3 id="installing-webhooks-plugin_admin"><a class="anchor" href="#installing-webhooks-plugin_admin"></a>13.1. Installing the webhooks plugin</h3>
<div class="paragraph">
<p>Use the following procedure to install the webhooks plugin.
Then, you can configure Foreman&#160;server to send webhook requests.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>On your Foreman&#160;server, install the webhooks plugin:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --enable-foreman-plugin-webhooks</pre>
</div>
</div>
</li>
<li>
<p>Optional: Install the webhooks CLI plugin:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --enable-foreman-cli-webhooks</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="creating-a-webhook-template_admin"><a class="anchor" href="#creating-a-webhook-template_admin"></a>13.2. Creating a webhook template</h3>
<div class="paragraph">
<p>Webhook templates are used to generate the body of HTTP request to a configured target when a webhook is triggered.
Use the following procedure to create a webhook template in the Foreman web UI.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Webhook</strong> &gt; <strong>Webhook Templates</strong>.</p>
</li>
<li>
<p>Click <strong>Clone an existing template</strong> or <strong>Create Template</strong>.</p>
</li>
<li>
<p>Enter a name for the template.</p>
</li>
<li>
<p>Use the editor to make changes to the template payload.</p>
<div class="paragraph">
<p>A webhook HTTP payload must be created using Foreman template syntax.
The webhook template can use a special variable called <code>@object</code> that can represent the main object of the event.
<code>@object</code> can be missing in case of certain events.
You can determine what data are actually available with the <code>@payload</code> variable.</p>
</div>
<div class="paragraph">
<p>For more information, see <a href="https://docs.theforeman.org/3.16/Managing_Hosts/index-foreman-deb.html#Template_Writing_Reference_managing-hosts">Template Writing Reference</a> in <em>Managing hosts</em> and for available template macros and methods, visit <code>/templates_doc</code> on Foreman&#160;server.</p>
</div>
</li>
<li>
<p>Optional: Enter the description and audit comment.</p>
</li>
<li>
<p>Assign organizations and locations.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>When creating a webhook template, you must follow the format of the target application for which the template is intended.
For example, an application can expect a <code>"text"</code> field with the webhook message.
Refer to the documentation of your target application to find more about how your webhook template format should look like.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Running remote execution jobs</dt>
<dd>
<p>This webhook template defines a message with the ID and result of a remote execution job.
The webhook which uses this template can be subscribed to events such as <code>Actions Remote Execution Run Host Job Succeeded</code> or <code>Actions Remote Execution Run Host Job Failed</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">{
    "text": "job invocation &lt;%= @object.job_invocation_id %&gt; finished with result &lt;%= @object.task.result %&gt;"
}</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Creating users</dt>
<dd>
<p>This webhook template defines a message with the login and email of a created user.
The webhook which uses this template should be subscribed to the <code>User Created</code> event.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">{
    "text": "user with login &lt;%= @object.login %&gt; and email &lt;%= @object.mail %&gt; created"
}</pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="creating-a-webhook_admin"><a class="anchor" href="#creating-a-webhook_admin"></a>13.3. Creating a webhook</h3>
<div class="paragraph">
<p>You can customize events, payloads, HTTP authentication, content type, and headers through the Foreman web UI.</p>
</div>
<div class="paragraph">
<p>Use the following procedure to create a webhook in the Foreman web UI.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Webhook</strong> &gt; <strong>Webhooks</strong>.</p>
</li>
<li>
<p>Click <strong>Create new</strong>.</p>
</li>
<li>
<p>From the <strong>Subscribe to</strong> list, select an event.</p>
</li>
<li>
<p>Enter a <strong>Name</strong> for your webhook.</p>
</li>
<li>
<p>Enter a <strong>Target URL</strong>.
Webhooks make HTTP requests to pre-configured URLs.
The target URL can be a dynamic URL.</p>
</li>
<li>
<p>Click <strong>Template</strong> to select a template.
Webhook templates are used to generate the body of the HTTP request to Foreman&#160;server when a webhook is triggered.</p>
</li>
<li>
<p>Enter an HTTP method.</p>
</li>
<li>
<p>Optional: If you do not want activate the webhook when you create it, uncheck the <strong>Enabled</strong> flag.</p>
</li>
<li>
<p>Click the <strong>Credentials</strong> tab.</p>
</li>
<li>
<p>Optional: If HTTP authentication is required, enter <strong>User</strong> and <strong>Password</strong>.</p>
</li>
<li>
<p>Optional: Uncheck <strong>Verify SSL</strong> if you do not want to verify the server certificate against the system certificate store or Foreman CA.</p>
</li>
<li>
<p>On the <strong>Additional</strong> tab, enter the <strong>HTTP Content Type</strong>.
For example, <code>application/json</code>, <code>application/xml</code> or <code>text/plain</code> on the payload you define.
The application does not attempt to convert the content to match the specified content type.</p>
</li>
<li>
<p>Optional: Provide HTTP headers as JSON.
ERB is also allowed.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="webhooks-available-events_admin"><a class="anchor" href="#webhooks-available-events_admin"></a>13.4. Available webhook events</h3>
<div class="paragraph">
<p>The following table contains a list of webhook events that are available from the Foreman web UI.
<code>Action</code> events trigger webhooks only on <code>success</code>, so if an action fails, a webhook is not triggered.</p>
</div>
<div class="paragraph">
<p>For more information about payload, go to <strong>Administer</strong> &gt; <strong>About</strong> &gt; <strong>Support</strong> &gt; <strong>Templates DSL</strong>.
A list of available types is provided in the following table.
Some events are marked as <strong>custom</strong>, in that case, the payload is an object object but a Ruby hash (key-value data structure) so syntax is different.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 40%;">
<col style="width: 30%;">
<col style="width: 30%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Event name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Payload</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Remote Execution Run Host Job Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A generic remote execution job succeeded for a host. This event is emitted for all Remote Execution jobs, when complete.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::RemoteExecution::RunHostJob</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Remote Execution Run Host Job Foreman OpenSCAP Run Scans Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Run OpenSCAP scan.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::RemoteExecution::RunHostJob</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Remote Execution Run Host Job Ansible Run Host Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Runs an Ansible Playbook containing all the roles defined for a host.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::RemoteExecution::RunHostJob</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Remote Execution Run Host Job Ansible Run Smart&#160;Proxy Upgrade Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Upgrade Smart&#160;Proxies on given Smart&#160;Proxy&#160;servers.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::RemoteExecution::RunHostJob</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Remote Execution Run Host Job Ansible Configure Cloud Connector Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configure Cloud Connector on given hosts.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::RemoteExecution::RunHostJob</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Remote Execution Run Host Job Ansible Run Playbook Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Run an Ansible Playbook against given hosts.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::RemoteExecution::RunHostJob</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Remote Execution Run Host Job Ansible Enable Web Console Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Run an Ansible Playbook to enable the web console on given hosts.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::RemoteExecution::RunHostJob</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Remote Execution Run Host Job Puppet Run Host Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Perform a single Puppet run.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::RemoteExecution::RunHostJob</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Remote Execution Run Host Job Leapp Pre-upgrade Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Upgradeability check for RHEL 7 host.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::RemoteExecution::RunHostJob</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Remote Execution Run Host Job Leapp Remediation Plan Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Run Remediation plan with Leapp.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::RemoteExecution::RunHostJob</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions Remote Execution Run Host Job Leapp Upgrade Succeeded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Run Leapp upgrade job for RHEL 7 host.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions::RemoteExecution::RunHostJob</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Build Entered</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A host entered the build mode.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom event: <code>@payload[:id]</code> (host id), <code>@payload[:hostname]</code> (host name).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Build Exited</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A host build mode was canceled, either it was successfully provisioned or the user canceled the build manually.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom event: <code>@payload[:id]</code> (host id), <code>@payload[:hostname]</code> (host name).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Domain Created/Updated/Destroyed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Common database operations on a domain.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Domain</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Host Created/Updated/Destroyed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Common database operations on a host.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Host</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hostgroup Created/Updated/Destroyed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Common database operations on a hostgroup.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hostgroup</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Model Created/Updated/Destroyed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Common database operations on a model.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Model</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status Changed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Global host status of a host changed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom event: <code>@payload[:id]</code> (host id), <code>@payload[:hostname]</code>, <code>@payload[:global_status]</code> (hash)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subnet Created/Updated/Destroyed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Common database operations on a subnet.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subnet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Template Render Performed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A report template was rendered.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Template</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Created/Updated/Destroyed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Common database operations on a user.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="shellhooks_admin"><a class="anchor" href="#shellhooks_admin"></a>13.5. Shellhooks</h3>
<div class="paragraph">
<p>With webhooks, you can only map one Foreman event to one API call.
For advanced integrations, where a single shell script can contain multiple commands, you can install a Smart&#160;Proxy shellhooks plugin that exposes executables by using a REST HTTP API.</p>
</div>
<div class="paragraph">
<p>You can then configure a webhook to reach out to a Smart&#160;Proxy API to run a predefined shellhook.
A shellhook is an executable script that can be written in any language provided that it can be executed.
The shellhook can for example contain commands or edit files.</p>
</div>
<div class="paragraph">
<p>You must place your executable scripts in <code>/var/lib/foreman-proxy/shellhooks</code> with only alphanumeric characters and underscores in their name.</p>
</div>
<div class="paragraph">
<p>You can pass input to shellhook script through the webhook payload.
This input is redirected to standard input of the shellhook script.
You can pass arguments to shellhook script by using HTTP headers in format <code>X-Shellhook-Arg-1</code> to <code>X-Shellhook-Arg-99</code>.
For more information on passing arguments to shellhook script, see:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#passing-arguments-to-shellhook-script-using-webhooks_admin">Passing arguments to shellhook script using webhooks</a></p>
</li>
<li>
<p><a href="#passing-arguments-to-shellhook-script-using-curl_admin">Passing arguments to shellhook script using curl</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The HTTP method must be POST.
An example URL would be: <code>https://smartproxy.example.com:8443/shellhook/My_Script</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Unlike the <code>shellhooks</code> directory, the URL must contain <code>/shellhook/</code> in singular to be valid.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You must enable <strong>Smart&#160;Proxy Authorization</strong> for each webhook connected to a shellhook to enable it to authorize a call.</p>
</div>
<div class="paragraph">
<p>Standard output and standard error output are redirected to the Smart&#160;Proxy logs as messages with debug or warning levels respectively.</p>
</div>
<div class="paragraph">
<p>The shellhook HTTPS calls do not return a value.</p>
</div>
<div class="paragraph">
<p>For an example on creating a shellhook script, see <a href="#creating-a-shellhook-to-print-arguments_admin">Creating a shellhook to print arguments</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="installing-shellhooks-plugin_admin"><a class="anchor" href="#installing-shellhooks-plugin_admin"></a>13.6. Installing the shellhooks plugin</h3>
<div class="paragraph">
<p>Optionally, you can install and enable the shellhooks plugin on each Smart&#160;Proxy used for shellhooks.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Install the shellhooks plugin on your Smart&#160;Proxy:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --enable-foreman-proxy-plugin-shellhooks</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="passing-arguments-to-shellhook-script-using-webhooks_admin"><a class="anchor" href="#passing-arguments-to-shellhook-script-using-webhooks_admin"></a>13.7. Passing arguments to shellhook script using webhooks</h3>
<div class="paragraph">
<p>Use this procedure to pass arguments to a shellhook script using webhooks.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>When creating a webhook, on the <strong>Additional</strong> tab, create HTTP headers in the following format:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">{
  "X-Shellhook-Arg-1": "<em>VALUE</em>",
  "X-Shellhook-Arg-2": "<em>VALUE</em>"
}</pre>
</div>
</div>
<div class="paragraph">
<p>Ensure that the headers have a valid JSON or ERB format.
Only pass safe fields like database ID, name, or labels that do not include new lines or quote characters.</p>
</div>
<div class="paragraph">
<p>For more information, see <a href="#creating-a-webhook_admin">Creating a webhook</a>.</p>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="nowrap">{
  "X-Shellhook-Arg-1": "&lt;%= @object.content_view_version_id %&gt;",
  "X-Shellhook-Arg-2": "&lt;%= @object.content_view_name %&gt;"
}</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="passing-arguments-to-shellhook-script-using-curl_admin"><a class="anchor" href="#passing-arguments-to-shellhook-script-using-curl_admin"></a>13.8. Passing arguments to shellhook script using curl</h3>
<div class="paragraph">
<p>Use this procedure to pass arguments to a shellhook script using curl.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>When executing a shellhook script using <code>curl</code>, create HTTP headers in the following format:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-none" data-lang="none">"X-Shellhook-Arg-1: <em>VALUE</em>"
"X-Shellhook-Arg-2: <em>VALUE</em>"</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="nowrap">$ curl \
--data "" \
--header "Content-Type: text/plain" \
--header "X-Shellhook-Arg-1: Version 1.0" \
--header "X-Shellhook-Arg-2: My content view" \
--request POST \
--show-error \
--silent \
https://smartproxy.example.com:8443/shellhook/My_Script</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="creating-a-shellhook-to-print-arguments_admin"><a class="anchor" href="#creating-a-shellhook-to-print-arguments_admin"></a>13.9. Creating a shellhook to print arguments</h3>
<div class="paragraph">
<p>Create a simple shellhook script that prints <code>Hello World!</code> when you run a remote execution job.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have the webhooks and shellhooks plugins installed.
For more information, see:</p>
<div class="ulist">
<ul>
<li>
<p><a href="#installing-webhooks-plugin_admin">Installing the webhooks plugin</a></p>
</li>
<li>
<p><a href="#installing-shellhooks-plugin_admin">Installing the shellhooks plugin</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Modify the <code>/var/lib/foreman-proxy/shellhooks/print_args</code> script to print arguments to standard error output so you can see them in the Smart&#160;Proxy logs:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-bash" data-lang="bash">#!/bin/sh
#
# Prints all arguments to stderr
#
echo "$@" &gt;&amp;2</code></pre>
</div>
</div>
</li>
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Webhook</strong> &gt; <strong>Webhooks</strong>.</p>
</li>
<li>
<p>Click <strong>Create new</strong>.</p>
</li>
<li>
<p>From the <strong>Subscribe to</strong> list, select <strong>Actions Remote Execution Run Host Job Succeeded</strong>.</p>
</li>
<li>
<p>Enter a <strong>Name</strong> for your webhook.</p>
</li>
<li>
<p>In the <strong>Target URL</strong> field, enter the URL of your Smart&#160;Proxy&#160;server followed by <code>:8443/shellhook/print_args</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">https://<em>smartproxy.example.com</em>:8443/shellhook/print_args</pre>
</div>
</div>
<div class="paragraph">
<p>Note that <code>shellhook</code> in the URL is singular, unlike the <code>shellhooks</code> directory.</p>
</div>
</li>
<li>
<p>From the <strong>Template</strong> list, select <strong>Empty Payload</strong>.</p>
</li>
<li>
<p>On the <strong>Credentials</strong> tab, check <strong>Smart&#160;Proxy Authorization</strong>.</p>
</li>
<li>
<p>On the <strong>Additional</strong> tab, enter the following text in the <strong>Optional HTTP headers</strong> field:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">{
    "X-Shellhook-Arg-1": "Hello",
    "X-Shellhook-Arg-2": "World!"
}</pre>
</div>
</div>
</li>
<li>
<p>Click <strong>Submit</strong>.
You now have successfully created a shellhook that prints "Hello World!" to Smart&#160;Proxy logs every time you a remote execution job succeeds.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Verification</div>
<ol class="arabic">
<li>
<p>Run a remote execution job on any host.
You can use <code>time</code> as a command.
For more information, see <a href="https://docs.theforeman.org/3.16/Managing_Hosts/index-foreman-deb.html#executing-a-remote-job_managing-hosts">Executing a Remote Job</a> in <em>Managing hosts</em>.</p>
</li>
<li>
<p>Verify that the shellhook script was triggered and printed "Hello World!" to Smart&#160;Proxy&#160;server logs:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># tail /var/log/foreman-proxy/proxy.log</pre>
</div>
</div>
<div class="paragraph">
<p>You should find the following lines at the end of the log:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">[I] Started POST /shellhook/print_args
[I] Finished POST /shellhook/print_args with 200 (0.33 ms)
[I] [3520] Started task /var/lib/foreman-proxy/shellhooks/print_args\ Hello\ World\!
[W] [3520] Hello World!</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Searching_and_Bookmarking_admin"><a class="anchor" href="#Searching_and_Bookmarking_admin"></a>14. Searching and bookmarking</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Foreman features powerful search functionality on most pages of the Foreman web UI.
It enables you to search all kinds of resources that Foreman manages.
Searches accept both free text and syntax-based queries, which can be built by using input prediction.
Search queries can be saved as bookmarks for future reuse.</p>
</div>
<div class="sect2">
<h3 id="Building_Search_Queries_admin"><a class="anchor" href="#Building_Search_Queries_admin"></a>14.1. Building search queries</h3>
<div class="paragraph">
<p>As you start typing a search query, a list of valid options to complete the current part of the query appears.
You can either select an option from the list and keep building the query by using the prediction, or continue typing.
To learn how free text is interpreted by the search engine, see <a href="#Using_Free_Text_Search_admin">Using free text search</a>.</p>
</div>
<div class="sect3">
<h4 id="Query_Syntax_admin"><a class="anchor" href="#Query_Syntax_admin"></a>14.1.1. Query syntax</h4>
<div class="listingblock">
<div class="content">
<pre class="nowrap"><em>parameter</em> <em>operator</em> <em>value</em></pre>
</div>
</div>
<div class="paragraph">
<p>Available fields, resources to search, and the way the query is interpreted all depend on context, that is, the page where you perform the search.
For example, the field "hostgroup" on the Hosts page is equivalent to the field "name" on the Host Groups page.
The field type also determines available operators and accepted values.</p>
</div>
<div class="paragraph">
<p>For a list of all operators, see <a href="#Query_Operators_admin">Operators</a>.
For descriptions of value formats, see <a href="#Query_Values_admin">Values</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="Query_Operators_admin"><a class="anchor" href="#Query_Operators_admin"></a>14.1.2. Query operators</h4>
<div class="paragraph">
<p>All operators that can be used between <em>parameter</em> and <em>value</em> are listed in the following table.
Other symbols and special characters that might appear in a prediction-built query, such as colons, do not have special meaning and are treated as free text.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Comparison operators accepted by search</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 33.3335%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operator</th>
<th class="tableblock halign-left valign-top">Short Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EQUALS</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Accepts numerical, temporal, or text values.
For text, exact case sensitive matches are returned.</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><div class="content"><div class="paragraph">
<p><code>hostgroup = RHEL7</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">!=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOT EQUALS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">~</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LIKE</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Accepts text or temporal values.
Returns case insensitive matches.
Accepts the following wildcards: _ for a single character, % or * for any number of characters including zero.
If no wildcard is specified, the string is treated as if surrounded by wildcards: %rhel7%</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><div class="content"><div class="paragraph">
<p><code>hostgroup ~ rhel%</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">!~</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOT LIKE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GREATER THAN</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Accepts numerical or temporal values.
For temporal values, the operator &gt; is interpreted as "later than", and &lt; as "earlier than".
Both operators can be combined with EQUALS: &gt;= &lt;=</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><div class="content"><div class="paragraph">
<p><code>registered_at &gt; 10-January-2017</code>
<br>
The search will return hosts that have been registered after the given date, that is, between 10th January 2017 and now.</p>
</div>
<div class="paragraph">
<p><code>registered_at &lt;= Yesterday</code>
<br>
The search will return hosts that have been registered yesterday or earlier.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LESS THAN</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">^</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IN</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Compares an expression against a list of values, as in SQL.
Returns matches that contain or not contain the values, respectively.</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><div class="content"><div class="paragraph">
<p><code>release_version !^ 7</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">!^</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOT IN</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HAS or set?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Returns values that are present or not present, respectively.</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><div class="content"><div class="paragraph">
<p><code>has hostgroup</code> or <code>set? hostgroup</code>
<br>
On the Puppet Classes page, the search will return classes that are assigned to at least one host group.</p>
</div>
<div class="paragraph">
<p><code>not has hostgroup</code> or <code>null? hostgroup</code>
<br>
On the Dashboard with an overview of hosts, the search will return all hosts that have no assigned host group.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOT HAS or null?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#160;</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Simple queries that follow the described syntax can be combined into more complex ones using logical operators AND, OR, and NOT.
Alternative notations of the operators are also accepted:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Logical operators accepted by search</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operator</th>
<th class="tableblock halign-left valign-top" colspan="3">Alternative Notations</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">and</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&amp;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&amp;&amp;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;whitespace&gt;</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>class = motd AND environment ~ production</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">or</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">|</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">||</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>errata_status = errata_needed || errata_status = security_needed</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">–</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">!</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>hostgroup ~ rhel7 not status.failed</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="Query_Values_admin"><a class="anchor" href="#Query_Values_admin"></a>14.1.3. Query values</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Text Values</strong></dt>
<dd>
<p>Text containing whitespaces must be enclosed in quotes.
A whitespace is otherwise interpreted as the AND operator.</p>
<div class="paragraph">
<p><strong>Examples:</strong></p>
</div>
<div class="paragraph">
<p><code>hostgroup = "Web servers"</code></p>
</div>
<div class="paragraph">
<p>The search will return hosts with assigned host group named "Web servers".</p>
</div>
<div class="paragraph">
<p><code>hostgroup = Web servers</code></p>
</div>
<div class="paragraph">
<p>The search will return hosts in the host group Web with any field matching %servers%.</p>
</div>
</dd>
<dt class="hdlist1"><strong>Temporal Values</strong></dt>
<dd>
<p>Many date and time formats are accepted, including the following:</p>
<div class="ulist">
<ul>
<li>
<p>"10 January 2017"</p>
</li>
<li>
<p>"10 Jan 2017"</p>
</li>
<li>
<p>10-January-2017</p>
</li>
<li>
<p>10/January/2017</p>
</li>
<li>
<p>"January 10, 2017"</p>
</li>
<li>
<p>Today, Yesterday, and the like.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>Avoid ambiguous date formats, such as 02/10/2017 or 10-02-2017.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Using_Free_Text_Search_admin"><a class="anchor" href="#Using_Free_Text_Search_admin"></a>14.2. Using free text search</h3>
<div class="paragraph">
<p>When you enter free text, it will be searched for across multiple fields.
For example, if you type "64", the search will return all hosts that have that number in their name, IP address, MAC address, and architecture.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Multi-word queries must be enclosed in quotes, otherwise the whitespace is interpreted as the AND operator.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Because of searching across all fields, free text search results are not very accurate and searching can be slow, especially on a large number of hosts.
For this reason, we recommend that you avoid free text and use more specific, syntax-based queries whenever possible.</p>
</div>
</div>
<div class="sect2">
<h3 id="Managing_Bookmarks_admin"><a class="anchor" href="#Managing_Bookmarks_admin"></a>14.3. Managing bookmarks</h3>
<div class="paragraph">
<p>You can save search queries as bookmarks for reuse.
You can also delete or modify a bookmark.</p>
</div>
<div class="paragraph">
<p>Bookmarks appear only on the page on which they were created.
On some pages, there are default bookmarks available for the common searches, for example, all <code>active</code> or <code>disabled</code> hosts.</p>
</div>
<div class="sect3">
<h4 id="Creating_Bookmarks_admin"><a class="anchor" href="#Creating_Bookmarks_admin"></a>14.3.1. Creating bookmarks</h4>
<div class="paragraph">
<p>This section details how to save a search query as a bookmark.
You must save the search query on the relevant page to create a bookmark for that page, for example, saving a host related search query on the Hosts page.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to the page where you want to create a bookmark.</p>
</li>
<li>
<p>In the <strong>Search</strong> field, enter the search query you want to save.</p>
</li>
<li>
<p>Select the arrow to the right of the <strong>Search</strong> button and then select <strong>Bookmark this search</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for the new bookmark.</p>
</li>
<li>
<p>In the <strong>Search query</strong> field, ensure your search query is correct.</p>
</li>
<li>
<p>Ensure the <strong>Public</strong> checkbox is set correctly:</p>
<div class="ulist">
<ul>
<li>
<p>Select the <strong>Public</strong> checkbox to set the bookmark as public and visible to all users.</p>
</li>
<li>
<p>Clear the <strong>Public</strong> checkbox to set the bookmark as private and only visible to the user who created it.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To confirm the creation, either select the arrow to the right of the <strong>Search</strong> button to display the list of bookmarks, or navigate to <strong>Administer</strong> &gt; <strong>Bookmarks</strong> and then check the <strong>Bookmarks</strong> list for the name of the bookmark.</p>
</div>
</div>
<div class="sect3">
<h4 id="Deleting_Bookmarks_admin"><a class="anchor" href="#Deleting_Bookmarks_admin"></a>14.3.2. Deleting bookmarks</h4>
<div class="paragraph">
<p>You can delete bookmarks on the Bookmarks page.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Bookmarks</strong>.</p>
</li>
<li>
<p>On the Bookmarks page, click <strong>Delete</strong> for the Bookmark you want to delete.</p>
</li>
<li>
<p>When the confirmation window opens, click <strong>OK</strong> to confirm the deletion.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To confirm the deletion, check the <strong>Bookmarks</strong> list for the name of the bookmark.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="using-keyboard-shortcuts_admin"><a class="anchor" href="#using-keyboard-shortcuts_admin"></a>14.4. Using keyboard shortcuts</h3>
<div class="paragraph">
<p>You can use keyboard shortcuts to quickly focus search bars.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To focus the vertical navigation search bar, press <code>Ctrl + Shift + F</code>.</p>
</li>
<li>
<p>To focus the page search bar, press <code>/</code>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Administration_Settings_admin"><a class="anchor" href="#Administration_Settings_admin"></a>Appendix A: Administration settings</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section contains information about settings that you can edit in the Foreman web UI by navigating to <strong>Administer</strong> &gt; <strong>Settings</strong>.</p>
</div>
<div class="sect2">
<h3 id="general_settings_information_admin"><a class="anchor" href="#general_settings_information_admin"></a>A.1. General settings</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Administrator email address</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The default administrator email address</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Foreman URL</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL where your Foreman instance is reachable.
See also <strong>Provisioning &gt; Unattended URL</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Entries per page</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of records shown per page in Foreman</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Fix DB cache</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman maintains a cache of permissions and roles.
When set to <code>Yes</code>, Foreman recreates this cache on the next restart.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>DB pending seed</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should the <code>foreman-rake db:seed</code> be executed on the next run of the installer modules?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Smart&#160;Proxy request timeout</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Open and read timeout for HTTP requests from Foreman to Smart&#160;Proxy (in seconds).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Login page footer text</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Text to be shown in the login-page footer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>HTTP(S) proxy</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set a proxy for outgoing HTTP(S) connections from the Foreman product.
System-wide proxies must be configured at the operating system level.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>HTTP(S) proxy except hosts</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set hostnames to which requests are not to be proxied.
Requests to the local host are excluded by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Show Experimental Labs</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether or not to show a menu to access experimental lab features (requires reload of page).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Display FQDN for hosts</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If set to <code>Yes</code>, Foreman displays names of hosts as fully qualified domain names (FQDNs).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Out of sync interval</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hosts report periodically, and if the time between reports exceeds this duration in minutes, hosts are considered out of sync.
You can override this on your hosts by adding the <code>outofsync_interval</code> parameter, per host, at <strong>Hosts &gt; All hosts &gt; $host &gt; Edit &gt; Parameters &gt; Add Parameter</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Foreman UUID</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman instance ID.
Uniquely identifies a Foreman instance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default language</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The UI for new users uses this language.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default timezone</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The timezone to use for new users.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Instance title</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The instance title is shown on the top navigation bar (requires a page reload).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Saved audits interval</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Duration in days to preserve audit data.
Leave empty to disable the audits cleanup.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>New host details UI</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman loads the new UI for host details.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="foreman_tasks_admin"><a class="anchor" href="#foreman_tasks_admin"></a>A.2. Task settings</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Sync task timeout</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">120</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of seconds to wait for a synchronous task to finish before an exception is raised.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Enable dynflow console</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable the dynflow console (<code>/foreman_tasks/dynflow</code>) for debugging.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Require auth for dynflow console</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The user must be authenticated as having administrative rights before accessing the dynflow console.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Proxy action retry count</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of attempts permitted to start a task on the Smart&#160;Proxy before failing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Proxy action retry interval</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time in seconds between retries.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Allow proxy batch tasks</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allow triggering tasks on the Smart&#160;Proxy in batches.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Proxy tasks batch size</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of tasks included in one request to the Smart&#160;Proxy if <code>foreman_tasks_proxy_batch_trigger</code> is enabled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Tasks troubleshooting URL</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL pointing to the task troubleshooting documentation.
It should contain a <code>%{label}</code> placeholder that is replaced with a normalized task label (restricted to only alphanumeric characters)).
A <code>%{version}</code> placeholder is also available.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Polling intervals multiplier</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Polling multiplier used to multiply the default polling intervals.
You can use this to prevent polling too frequently for long running tasks.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="template_sync_settings_admin"><a class="anchor" href="#template_sync_settings_admin"></a>A.3. Template sync settings</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Associate</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">New</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Associate templates with operating system, organization, and location.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Branch</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default branch in Git repo.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Commit message</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Templates export made by a Foreman user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom commit message for exported templates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Dirname</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The directory within the Git repo containing the templates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Filter</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Import or export of names matching this regex.
Case-insensitive.
Snippets are not filtered.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Force import</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If set to <code>Yes</code>, locked templates are overwritten during an import.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>HTTP proxy policy</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Global default HTTP proxy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to use an HTTP proxy to synchronize templates.</p>
<p class="tableblock">The <code>Custom HTTP proxy</code> value is available only if an HTTP proxy is configured under the selected organization and location and if your account has the <strong>view_http_proxies</strong> permission assigned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Lock templates</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Keep, do not lock new</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How to handle lock for imported templates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Metadata export mode</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Refresh</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default metadata export mode.</p>
<p class="tableblock">Possible options:</p>
<p class="tableblock"><code>refresh</code> re-renders metadata.</p>
<p class="tableblock"><code>keep</code> keeps existing metadata.</p>
<p class="tableblock"><code>remove</code> exports the template without metadata.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Negate</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Negate the filter for import or export.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Prefix</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A string added as a prefix to imported templates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Repo</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Target path from where to import or export templates.
Different protocols can be used, for example:</p>
<p class="tableblock"><code>/tmp/dir</code></p>
<p class="tableblock"><code>git://example.com</code></p>
<p class="tableblock"><code>https://example.com</code></p>
<p class="tableblock"><code>ssh://example.com</code></p>
<p class="tableblock">When exporting to <code>/tmp</code>, note that production deployments may be configured to use <code>private tmp</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Verbosity</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Choose verbosity for Rake task importing templates.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="discovery-settings"><a class="anchor" href="#discovery-settings"></a>A.4. Discovery settings</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Discovery location</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the default location to place discovered hosts in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Discovery organization</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the default organization to which discovered hosts are added.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Interface fact</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">discovery_bootif</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fact name to use for primary interface detection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Create bond interfaces</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Automatically create a bond interface if another interface is detected on the same VLAN using LLDP.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Clean all facts</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clean all reported facts (except discovery facts) during provisioning.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Hostname facts</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">discovery_bootif</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of facts to use for the hostname (comma separated, first wins).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Auto provisioning</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use the provisioning rules to automatically provision newly discovered hosts.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reboot</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Automatically reboot or kexec discovered hosts during provisioning.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Hostname prefix</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">mac</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The default prefix to use for the hostname.
Must start with a letter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Fact columns</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extra facter columns to show in host lists (comma separated).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Highlighted facts</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Regex to organize facts for highlights section &#8211; e.g. <code>^(abc|cde)$</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Storage facts</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Regex to organize facts for the storage section.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Software facts</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Regex to organize facts for the software section.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Hardware facts</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Regex to organize facts for the hardware section.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Network facts</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Regex to organize facts for the network section.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>IPMI facts</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Regex to organize facts for the <em>Intelligent Platform Management Interface</em> (IPMI) section.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Lock PXE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Automatically generate a <em>Preboot Execution Environment</em> (PXE) configuration to pin a newly discovered host to discovery.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Locked PXELinux template name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pxelinux_discovery</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PXELinux template to be used when pinning a host to discovery.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Locked PXEGrub template name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pxegrub_discovery</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PXEGrub template to be used when pinning a host to discovery.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Locked PXEGrub2 template name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pxegrub2_discovery</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PXEGrub2 template to be used when pinning a host to discovery.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Force DNS</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Force the creation of DNS entries when provisioning a discovered host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Error on existing NIC</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Do not permit to discover an existing host matching the MAC of a provisioning <em>Network Interface Card</em> (NIC) (errors out early).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Type of name generator</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fact + prefix</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Discovery hostname naming pattern.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Prefer IPv6</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prefer IPv6 to IPv4 when calling discovered nodes.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="boot_disk_settings_admin"><a class="anchor" href="#boot_disk_settings_admin"></a>A.5. Boot disk settings</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>iPXE directory</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/usr/share/ipxe</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to directory containing iPXE images.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ISOLINUX directory</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/usr/share/syslinux</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to directory containing ISOLINUX images.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SYSLINUX directory</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/usr/share/syslinux</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to directory containing SYSLINUX images.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Grub2 directory</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/lib/tftpboot/grub2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to directory containing <code>grubx64.efi</code> and <code>shimx64.efi</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Host image template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boot disk iPXE - host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">iPXE template to use for host-specific boot disks.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Generic image template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boot disk iPXE - generic host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">iPXE template to use for generic host boot disks.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Generic Grub2 EFI image template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boot disk Grub2 EFI - generic host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Grub2 template to use for generic <em>Extensible Firmware Interface</em> (EFI) host boot disks.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ISO generation command</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">genisoimage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command to generate ISO image, use <code>genisoimage</code> or <code>mkisofs</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Installation media caching</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Installation media files are cached for full host images.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Allowed bootdisk types</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[generic, host, full_host, subnet]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of permitted bootdisk types.
Leave blank to disable it.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="authentication_settings_admin"><a class="anchor" href="#authentication_settings_admin"></a>A.6. Authentication settings</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>OAuth active</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman will use OAuth for API authorization.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>OAuth consumer key</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">*****</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OAuth consumer key.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>OAuth consumer secret</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">*****</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OAuth consumer secret.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>OAuth map users</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman maps users by username in the request-header.
If this is disabled, OAuth requests have administrator rights.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Failed login attempts limit</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman blocks user logins from an incoming IP address for 5 minutes after the specified number of failed login attempts.
Set to 0 to disable brute force protection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Restrict registered Smart&#160;Proxies</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only known Smart&#160;Proxies can access features that use Smart&#160;Proxy authentication.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Trusted hosts</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of hostnames, IPv4, IPv6 addresses or subnets to be trusted in addition to Smart&#160;Proxies for access to fact/report importers and ENC output.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SSL certificate</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/etc/foreman/client_cert.pem</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SSL Certificate path that Foreman uses to communicate with its proxies.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SSL CA file</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/etc/foreman/proxy_ca.pem</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SSL CA file path that Foreman uses to communicate with its proxies.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SSL private key</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/etc/foreman/client_key.pem</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SSL Private Key path that Foreman uses to communicate with its proxies.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SSL client DN env</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTP_SSL_CLIENT_S_DN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Environment variable containing the subject DN from a client SSL certificate.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SSL client verify env</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTP_SSL_CLIENT_VERIFY</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Environment variable containing the verification status of a client SSL certificate.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SSL client cert env</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTP_SSL_CLIENT_CERT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Environment variable containing a client&#8217;s SSL certificate.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Server CA file</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SSL CA file path used in templates to verify the connection to Foreman.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Websockets encryption</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VNC/SPICE websocket proxy console access encryption (<code>websockets_ssl_key/cert</code> setting required).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Login delegation logout URL</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redirect your users to this URL on logout.
Enable <strong>Authorize login delegation</strong> also.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Authorize login delegation auth source user autocreate</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">External</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the external authentication source where unknown externally authenticated users (see <strong>Authorize login delegation</strong>) are created.
Empty means no autocreation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Authorize login delegation</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Authorize login delegation with <code>REMOTE_USER HTTP</code> header.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Authorize login delegation API</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Authorize login delegation with <code>REMOTE_USER HTTP</code> header for API calls too.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Idle timeout</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Log out idle users after the specified number of minutes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>BCrypt password cost</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cost value of bcrypt password hash function for internal auth-sources (4&#8202;&#8211;&#8202;30).
A higher value is safer but verification is slower, particularly for stateless API calls and UI logins.
A password change is needed to affect existing passwords.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>BMC credentials access</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Permits access to BMC interface passwords through ENC YAML output and in templates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>OIDC JWKs URL</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenID Connect <em>JSON Web Key Set</em> (JWKS) URL.
Typically <code>https://keycloak.example.com/auth/realms/&lt;realm name&gt;/protocol/openid-connect/certs</code> when using Keycloak as an OpenID provider.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>OIDC Audience</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the OpenID Connect Audience that is being used for authentication.
In the case of Keycloak this is the Client ID.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>OIDC Issuer</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The issuer claim identifies the principal that issued the <em>JSON Web tokens</em> (JWT), which exists at a <code>/.well-known/openid-configuration</code> in case of most of the OpenID providers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>OIDC Algorithm</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The algorithm used to encode the JWT in the OpenID provider.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="email_settings_admin"><a class="anchor" href="#email_settings_admin"></a>A.7. Email settings</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Email reply address</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Email reply address for emails that Foreman is sending.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Email subject prefix</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prefix to add to all outgoing email.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Send welcome email</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Send a welcome email including username and URL to new users.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Delivery method</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sendmail</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Method used to deliver email.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SMTP enable StartTLS auto</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP automatically enables StartTLS.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SMTP OpenSSL verify mode</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default verification mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When using TLS, you can set how OpenSSL checks the certificate.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SMTP address</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP address to connect to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SMTP port</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP port to connect to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SMTP HELO/EHLO domain</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HELO/EHLO domain.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SMTP username</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username to use to authenticate, if required.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SMTP password</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">*****</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password to use to authenticate, if required.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SMTP authentication</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specify authentication type, if required.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Sendmail arguments</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-i</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specify additional options to sendmail.
Only used when the delivery method is set to sendmail.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Sendmail location</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/usr/sbin/sendmail</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The location of the sendmail executable.
Only used when the delivery method is set to sendmail.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="notifications_settings_admin"><a class="anchor" href="#notifications_settings_admin"></a>A.8. Notifications settings</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>RSS enable</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pull RSS notifications.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>RSS URL</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://theforeman.org/feed.xml" class="bare">https://theforeman.org/feed.xml</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL from which to fetch RSS notifications.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="provisioning_settings_admin"><a class="anchor" href="#provisioning_settings_admin"></a>A.9. Provisioning settings</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Host owner</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default owner on provisioned hosts, if empty Foreman uses the current user.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Root password</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">*****</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default encrypted root password on provisioned hosts.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Unattended URL</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL that hosts retrieve templates from during the build.
When it starts with https, unattended, or userdata, controllers cannot be accessed using HTTP.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Safemode rendering</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Yes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables safe mode rendering of provisioning templates.
The default and recommended option <code>Yes</code> denies access to variables and any object that is not listed in Foreman.</p>
<p class="tableblock">When set to <code>No</code>, any object may be accessed by a user with permission to use templating features, either by editing templates, parameters or smart variables.
This permits users full remote code execution on Foreman&#160;server, effectively disabling all authorization.
This is not a safe option, especially in larger companies.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Access unattended without build</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable access to unattended URLs without build mode being used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Query local nameservers</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman queries the locally configured resolver instead of the SOA/NS authorities.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Installation token lifetime</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">360</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time in minutes that installation tokens should be valid for.
Set to 0 to disable the token.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SSH timeout</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">120</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time in seconds before SSH provisioning times out.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Libvirt default console address</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.0.0.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IP address that should be used for the console listen address when provisioning new virtual machines using libvirt.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Update IP from built request</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman updates the host IP with the IP that made the build request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Use short name for VMs</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman uses the short hostname instead of the FQDN for creating new virtual machines.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>DNS timeout</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[5, 10, 15, 20]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of timeouts (in seconds) for DNS lookup attempts such as the <code>dns_lookup</code> macro and DNS record conflict validation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Clean up failed deployment</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman deletes the virtual machine if the provisioning script ends with a non-zero exit code.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Type of name generator</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Random-based</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the method used to generate a hostname when creating a new host.</p>
<p class="tableblock">The default <code>Random-based</code> option generates a unique random hostname which you can but do not have to use.
This is useful for users who create many hosts and do not know how to name them.</p>
<p class="tableblock">The <code>MAC-based</code> option is for bare-metal hosts only.
If you delete a host and create it later on, it receives the same hostname based on the MAC address.
This can be useful for users who recycle servers and want them to always get the same hostname.</p>
<p class="tableblock">The <code>Off</code> option disables the name generator function and leaves the hostname field blank.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default PXE global template entry</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default PXE menu item in a global template &#8211; <code>local</code>, <code>discovery</code> or custom, use blank for template default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default PXE local template entry</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default PXE menu item in local template &#8211; <code>local</code>, <code>local_chain_hd0</code>, or custom, use blank for template default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>iPXE intermediate script</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">iPXE intermediate script</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intermediate iPXE script for unattended installations.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Destroy associated VM on host delete</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Destroy associated VM on host delete.
When enabled, VMs linked to hosts are deleted on Compute Resource.
When disabled, VMs are unlinked when the host is deleted, meaning they remain on Compute Resource and can be re-associated or imported back to Foreman again.
This does not automatically power off the VM</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Maximum structured facts</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of keys in structured subtree, statistics stored in <code>foreman::dropped_subtree_facts</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default Global registration template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Global Registration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Global Registration template.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default 'Host initial configuration' template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Linux host_init_config default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default 'Host initial configuration' template, automatically assigned when a new operating system is created.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CoreOS Transpiler Command</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<code>false</code>, <code>--pretty</code>, <code>--files-dir</code>, <code>/usr/share/foreman/config/ct</code>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full path to CoreOS transpiler (ct) with arguments as an comma-separated array</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Fedora CoreOS Transpiler Command</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[false</code>, <code>--pretty</code>, <code>--files-dir</code>, <code>/usr/share/foreman/config/ct</code>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full path to Fedora CoreOS transpiler (fcct) with arguments as an comma-separated array</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Global default PXEGrub2 template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PXEGrub2 global default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Global default PXEGrub2 template.
This template is deployed to all configured TFTP servers.
It is not affected by upgrades.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Global default PXELinux template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PXELinux global default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Global default PXELinux template.
This template is deployed to all configured TFTP servers.
It is not affected by upgrades.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Global default PXEGrub template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PXEGrub global default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Global default PXEGrub template.
This template is deployed to all configured TFTP servers.
It is not affected by upgrades.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Global default iPXE template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">iPXE global default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Global default iPXE template.
This template is deployed to all configured TFTP servers.
It is not affected by upgrades.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Local boot PXEGrub2 template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PXEGrub2 default local boot</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Template that is selected as PXEGrub2 default for local boot.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Local boot PXELinux template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PXELinux default local boot</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Template that is selected as PXELinux default for local boot.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Local boot PXEGrub template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PXEGrub default local boot</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Template that is selected as PXEGrub default for local boot.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Local boot iPXE template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">iPXE default local boot</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Template that is selected as iPXE default for local boot.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Manage PuppetCA</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman automates certificate signing upon provision of a new host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Use UUID for certificates</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman uses random UUIDs for certificate signing instead of hostnames.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="facts_settings_admin"><a class="anchor" href="#facts_settings_admin"></a>A.10. Facts settings</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Create new host when facts are uploaded</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman creates the host when new facts are received.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Location fact</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">foreman_location</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hosts created after a Puppet run are placed in the location specified by this fact.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Organization fact</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">foreman_organization</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hosts created after a Puppet run are placed in the organization specified by this fact.
The content of this fact should be the full label of the organization.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default location</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default Location</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hosts created after a Puppet run that did not send a location fact are placed in this location.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default organization</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default Organization</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hosts created after a Puppet run that did not send an organization fact are placed in this organization.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Update hostgroup from facts</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman updates a host&#8217;s hostgroup from its facts.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Ignore facts for operating system</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Stop updating operating system from facts.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Ignore facts for domain</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Stop updating domain values from facts.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Update subnets from facts</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">None</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman updates a host&#8217;s subnet from its facts.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Ignore interfaces facts for provisioning</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Stop updating IP and MAC address values from facts (affects all interfaces).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Ignore interfaces with matching identifier</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<code>lo</code>, <code>en*v*</code>, <code>usb*</code>, <code>vnet*</code>, <code>macvtap*</code>, <code>;vdsmdummy;</code>, <code>veth*</code>, <code>tap*</code>, <code>qbr*</code>, <code>qvb*</code>, <code>qvo*</code>, <code>qr-*</code>, <code>qg-*</code>, <code>vlinuxbr*</code>, <code>vovsbr*</code>, <code>br-int</code>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Skip creating or updating host network interfaces objects with identifiers matching these values from incoming facts.
You can use a * wildcard to match identifiers with indexes, e.g. <code>macvtap*</code>.
The ignored interface raw facts are still stored in the database, see the <strong>Exclude pattern</strong> setting for more details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Exclude pattern for facts stored in Foreman</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<code>lo</code>, <code>en*v*</code>, <code>usb*</code>, <code>vnet*</code>, <code>macvtap*</code>, <code>;vdsmdummy;</code>, <code>veth*</code>, <code>tap*</code>, <code>qbr*</code>, <code>qvb*</code>, <code>qvo*</code>, <code>qr-*</code>, <code>qg-*</code>, <code>vlinuxbr*</code>, <code>vovsbr*</code>, <code>br-int</code>, <code>load_averages::*</code>, <code>memory::swap::available*</code>, <code>memory::swap::capacity</code>, <code>memory::swap::used*</code>, <code>memory::system::available*</code>, <code>memory::system::capacity</code>, <code>memory::system::used*</code>, <code>memoryfree</code>, <code>memoryfree_mb</code>, <code>swapfree</code>, <code>swapfree_mb</code>, <code>uptime_hours</code>, <code>uptime_days</code>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exclude pattern for all types of imported facts (Puppet, Ansible, rhsm).
Those facts are not stored in the foreman database.
You can use a * wildcard to match names with indexes, e.g. <code>ignore*</code> filters out ignore, ignore123 as well as a::ignore or even a::ignore123::b.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default Puppet environment</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">production</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman defaults to this puppet environment if it cannot auto detect one.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ENC environment</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman explicitly sets the puppet environment in the ENC yaml output.
This avoids conflicts between the environment in <code>puppet.conf</code> and the environment set in Foreman.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Update environment from facts</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman updates a host&#8217;s environment from its facts.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="config_management_settings_admin"><a class="anchor" href="#config_management_settings_admin"></a>A.11. Configuration management settings</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Create new host when report is uploaded</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman creates the host when a report is received.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Matchers inheritance</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman matchers are inherited by children when evaluating smart class parameters for hostgroups, organizations, and locations.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default parameters lookup path</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<code>fqdn</code>, <code>hostgroup</code>, <code>os</code>, <code>domain</code>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman evaluates host smart class parameters in this order by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Interpolate ERB in parameters</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman parses ERB in parameters value in the ENC output.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Always show configuration status</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All hosts show a configuration status even when a Puppet Smart&#160;Proxy is not assigned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Puppet interval</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">35</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Duration in minutes after servers reporting using Puppet are classed as out of sync.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Puppet out of sync disabled</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disable host configuration status turning to out of sync for Puppet after report does not arrive within configured interval.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="remote_execution_settings_admin"><a class="anchor" href="#remote_execution_settings_admin"></a>A.12. Remote execution settings</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Fallback to Any Proxy</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search the host for any proxy with Remote Execution.
This is useful when the host has no subnet or the subnet does not have an execution proxy.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Enable Global Proxy</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search for Remote Execution proxy outside of the proxies assigned to the host.
The search is limited to the host&#8217;s organization and location.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SSH User</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">root</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default user to use for SSH.
You can override per host by setting the <code>remote_execution_ssh_user</code> parameter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Effective User</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">root</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default user to use for executing the script.
If the user differs from the SSH user, su or sudo is used to switch the user.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Effective User Method</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">sudo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The command used to switch to the effective user.
One of [<code>sudo</code>, <code>dzdo</code>, <code>su</code>]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Effective user password</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">*****</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Effective user password. See <strong>Effective User</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Sync Job Templates</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to sync templates from disk when running <code>db:seed</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SSH Port</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">22</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port to use for SSH communication.
Default port 22.
You can override per host by setting the <code>remote_execution_ssh_port</code> parameter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Connect by IP</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether the IP addresses on host interfaces are preferred over the FQDN.
It is useful when the DNS is not resolving the FQDNs properly.
You can override this per host by setting the <code>remote_execution_connect_by_ip</code> parameter.
For dual-stacked hosts, consider the <code>remote_execution_connect_by_ip_prefer_ipv6</code> setting.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Prefer IPv6 over IPv4</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When connecting using an IP address, are IPv6 addresses preferred?
If no IPv6 address is set, it falls back to IPv4 automatically.
You can override this per host by setting the <code>remote_execution_connect_by_ip_prefer_ipv6</code> parameter.
By default and for compatibility, IPv4 is preferred over IPv6.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default SSH password</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">*****</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default password to use for SSH.
You can override per host by setting the <code>remote_execution_ssh_password</code> parameter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default SSH key passphrase</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">*****</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default key passphrase to use for SSH.
You can override per host by setting the <code>remote_execution_ssh_key_passphrase</code> parameter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Workers pool size</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of workers in the pool to handle the execution of the remote execution jobs.
Restart of the <code>dynflowd/foreman-tasks</code> service is required.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Cleanup working directories</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether working directories are removed after task completion.
You can override this per host by setting the <code>remote_execution_cleanup_working_dirs</code> parameter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Cockpit URL</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where to find the Cockpit instance for the Web Console button.
By default, no button is shown.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Form Job Template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Run Command - SSH Default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Choose a job template that is pre-selected in job invocation form.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Job Invocation Report Template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jobs - Invocation report template</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Select a report template used for generating a report for a particular remote execution job.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Time to pickup</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">86400</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time in seconds within which the host has to pick up a job.
If the job is not picked up within this limit, the job will be cancelled.
Applies only to pull-mqtt based jobs.
Defaults to one day.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="ansible_settings_admin"><a class="anchor" href="#ansible_settings_admin"></a>A.13. Ansible settings</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Private Key Path</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use this to supply a path to an SSH Private Key that Ansible uses instead of a password.
 Override with the <code>ansible_ssh_private_key_file</code> host parameter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Connection type</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ssh</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use this connection type by default when running Ansible Playbooks.
You can override this on hosts by adding the <code>ansible_connection</code> parameter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>WinRM cert Validation</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">validate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable or disable WinRM server certificate validation when running Ansible Playbooks.
You can override this on hosts by adding the <code>ansible_winrm_server_cert_validation</code> parameter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default verbosity level</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman adds this level of verbosity for additional debugging output when running Ansible Playbooks.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Post-provision timeout</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">360</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timeout (in seconds) to set when Foreman triggers an Ansible roles task playbook after a host is fully provisioned.
Set this to the maximum time you expect a host to take until it is ready after a reboot.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Ansible report timeout</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timeout (in minutes) when hosts should have reported.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Ansible out of sync disabled</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disable host configuration status turning to out of sync for Ansible after a report does not arrive within the configured interval.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default Ansible inventory report template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ansible - Ansible Inventory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreman uses this template to schedule the report with Ansible inventory.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Ansible roles to ignore</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The roles to exclude when importing roles from Smart&#160;Proxy.
The expected input is comma separated values and you can use * wildcard metacharacters.
For example: <code>foo*</code>, <code>*b*</code>, <code>*bar</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Proxy tasks batch size for Ansible</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of tasks which should be sent to the Smart&#160;Proxy in one request if <code>foreman_tasks_proxy_batch_trigger</code> is enabled.
If set, it overrides the foreman_tasks_proxy_batch_size setting for Ansible jobs.</p></td>
</tr>
</tbody>
</table>
<!-- "Fork me on GitHub" CSS ribbon v0.2.3 | MIT License -->
<!-- https://github.com/simonwhitaker/github-fork-ribbon-css -->
<a class="issue-ribbon right-bottom fixed" href="https://github.com/theforeman/foreman-documentation/issues/new?template=report-issue.md" data-ribbon="Report issue" title="Report issue">
Report issue
</a>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 3.16<br>
Last updated Oct 2025
</div>
</div>
<script>
;(function () { /*! Asciidoctor Tabs | Copyright (c) 2018-present Dan Allen | MIT License */
  'use strict'

  var config = (document.currentScript || {}).dataset || {}
  var forEach = Array.prototype.forEach

  init(document.querySelectorAll('.tabs'))

  function init (tabsBlocks) {
    if (!tabsBlocks.length) return
    forEach.call(tabsBlocks, function (tabs) {
      var syncIds = tabs.classList.contains('is-sync') ? {} : undefined
      var tablist = tabs.querySelector('.tablist ul')
      tablist.setAttribute('role', 'tablist')
      var start
      forEach.call(tablist.querySelectorAll('li'), function (tab, idx) {
        tab.tabIndex = -1
        tab.setAttribute('role', tab.classList.add('tab') || 'tab')
        var id, anchor, syncId
        if (!(id = tab.id) && (anchor = tab.querySelector('a[id]'))) {
          id = tab.id = anchor.parentNode.removeChild(anchor).id
        }
        var panel = id && tabs.querySelector('.tabpanel[aria-labelledby~="' + id + '"]')
        if (!panel) return idx ? undefined : toggleSelected(tab, true) // invalid state
        syncIds && (((syncId = tab.textContent.trim()) in syncIds) ? (syncId = undefined) : true) &&
          (syncIds[(tab.dataset.syncId = syncId)] = tab)
        idx || (syncIds && (start = { tab: tab, panel: panel })) ? toggleHidden(panel, true) : toggleSelected(tab, true)
        tab.setAttribute('aria-controls', panel.id)
        panel.setAttribute('role', 'tabpanel')
        var onClick = syncId === undefined ? activateTab : activateTabSync
        tab.addEventListener('click', onClick.bind({ tabs: tabs, tab: tab, panel: panel }))
      })
      if (!tabs.closest('.tabpanel')) {
        forEach.call(tabs.querySelectorAll('.tabpanel table.tableblock'), function (table) {
          var container = Object.assign(document.createElement('div'), { className: 'tablecontainer' })
          table.parentNode.insertBefore(container, table).appendChild(table)
        })
      }
      if (start) {
        var syncGroupId
        for (var i = 0, lst = tabs.classList, len = lst.length, className; i !== len; i++) {
          if (!(className = lst.item(i)).startsWith('data-sync-group-id=')) continue
          tabs.dataset.syncGroupId = syncGroupId = lst.remove(className) || className.slice(19).replace(/\u00a0/g, ' ')
          break
        }
        if (syncGroupId === undefined) tabs.dataset.syncGroupId = syncGroupId = Object.keys(syncIds).sort().join('|')
        var preferredSyncId = 'syncStorageKey' in config &&
          window[(config.syncStorageScope || 'local') + 'Storage'].getItem(config.syncStorageKey + '-' + syncGroupId)
        var tab = preferredSyncId && syncIds[preferredSyncId]
        tab && Object.assign(start, { tab: tab, panel: document.getElementById(tab.getAttribute('aria-controls')) })
        toggleSelected(start.tab, true) || toggleHidden(start.panel, false)
      }
    })
    onHashChange()
    toggleClassOnEach(tabsBlocks, 'is-loading', 'remove')
    window.setTimeout(toggleClassOnEach.bind(null, tabsBlocks, 'is-loaded', 'add'), 0)
    window.addEventListener('hashchange', onHashChange)
  }

  function activateTab (e) {
    var tab = this.tab
    var tabs = this.tabs || (this.tabs = tab.closest('.tabs'))
    var panel = this.panel || (this.panel = document.getElementById(tab.getAttribute('aria-controls')))
    querySelectorWithSiblings(tabs, '.tablist .tab', 'tab').forEach(function (el) {
      toggleSelected(el, el === tab)
    })
    querySelectorWithSiblings(tabs, '.tabpanel', 'tabpanel').forEach(function (el) {
      toggleHidden(el, el !== panel)
    })
    if (!this.isSync && 'syncStorageKey' in config && 'syncGroupId' in tabs.dataset) {
      var storageKey = config.syncStorageKey + '-' + tabs.dataset.syncGroupId
      window[(config.syncStorageScope || 'local') + 'Storage'].setItem(storageKey, tab.dataset.syncId)
    }
    if (!e) return
    var loc = window.location
    var hashIdx = loc.hash ? loc.href.indexOf('#') : -1
    if (~hashIdx) window.history.replaceState(null, '', loc.href.slice(0, hashIdx))
    e.preventDefault()
  }

  function activateTabSync (e) {
    activateTab.call(this, e)
    var thisTabs = this.tabs
    var thisTab = this.tab
    var initialY = thisTabs.getBoundingClientRect().y
    forEach.call(document.querySelectorAll('.tabs'), function (tabs) {
      if (tabs === thisTabs || tabs.dataset.syncGroupId !== thisTabs.dataset.syncGroupId) return
      querySelectorWithSiblings(tabs, '.tablist .tab', 'tab').forEach(function (tab) {
        if (tab.dataset.syncId === thisTab.dataset.syncId) activateTab.call({ tabs: tabs, tab: tab, isSync: true })
      })
    })
    var shiftedBy = thisTabs.getBoundingClientRect().y - initialY
    if (shiftedBy && (shiftedBy = Math.round(shiftedBy))) window.scrollBy({ top: shiftedBy, behavior: 'instant' })
  }

  function querySelectorWithSiblings (scope, selector, siblingClass) {
    var el = scope.querySelector(selector)
    if (!el) return []
    var result = [el]
    while ((el = el.nextElementSibling) && el.classList.contains(siblingClass)) result.push(el)
    return result
  }

  function toggleClassOnEach (elements, className, method) {
    forEach.call(elements, function (el) {
      el.classList[method](className)
    })
  }

  function toggleHidden (el, state) {
    el.classList[(el.hidden = state) ? 'add' : 'remove']('is-hidden')
  }

  function toggleSelected (el, state) {
    el.setAttribute('aria-selected', '' + state)
    el.classList[state ? 'add' : 'remove']('is-selected')
    el.tabIndex = state ? 0 : -1
  }

  function onHashChange () {
    var id = window.location.hash.slice(1)
    if (!id) return
    var tab = document.getElementById(~id.indexOf('%') ? decodeURIComponent(id) : id)
    if (!(tab && tab.classList.contains('tab'))) return
    'syncId' in tab.dataset ? activateTabSync.call({ tab: tab }) : activateTab.call({ tab: tab })
  }
})()
</script>
</body>
</html>