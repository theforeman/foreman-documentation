<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>Installing Satellite&#160;Server in a connected network environment</title>
<style>
﻿*,::before,::after{box-sizing:border-box}html{font-size:100%;-webkit-text-size-adjust:100%}body{background:#fff;color:rgba(0,0,0,0.8);padding:0;margin:0;font-family:"Noto Serif", "DejaVu Serif", serif;font-size:inherit;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,p,blockquote,th,td{margin:0;padding:0}a{background:none;color:#2156a5;text-decoration:underline;line-height:inherit}a:active,a:hover{cursor:pointer;outline:0}a:focus{outline:thin dotted}a:hover,a:focus{color:#1d4b8f}abbr{font-size:0.9em}abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}b,strong{font-weight:bold;line-height:inherit}strong strong{font-weight:400}code,kbd,pre{font-family:"Droid Sans Mono", "DejaVu Sans Mono", monospace;font-size:1em}code{font-weight:400;color:rgba(0,0,0,0.9)}pre{color:rgba(0,0,0,0.9);line-height:1.45;text-rendering:optimizeSpeed;white-space:pre-wrap}dfn{font-style:italic}em,i{font-style:italic;line-height:inherit}em em{font-style:normal}hr{border:solid #dddddf;border-width:1px 0 0;clear:both;height:0;margin:1.25em 0 1.1875em}mark{background:#ff0;color:#000}p{line-height:1.6;margin-bottom:1.25rem;text-rendering:optimizeLegibility}q{quotes:"“" "”" "‘" "’"}small{font-size:60%;line-height:inherit}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-0.5em}sub{bottom:-0.25em}img,object[type^="image/"],svg{display:inline-block;height:auto;max-width:100%;vertical-align:middle}img{border:0;-ms-interpolation-mode:bicubic}object{max-width:100%}svg:not(:root){overflow:hidden}figure{margin:0}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}.left{float:left !important}.right{float:right !important}.text-left{text-align:left !important}.text-right{text-align:right !important}.text-center{text-align:center !important}.text-justify{text-align:justify !important}.hide{display:none}.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:0.25em}p aside{font-size:.875em;line-height:1.35;font-style:italic}h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans", "DejaVu Sans", sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.2;word-spacing:-0.05em}h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{color:#e99b8f;line-height:0}h1{font-size:2.125em}h2{font-size:1.6875em}h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}h4,h5{font-size:1.125em}h6{font-size:1em}ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}ul,ol{margin-left:1.5em}ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}ul.square{list-style-type:square}ul.circle{list-style-type:circle}ul.disc{list-style-type:disc}ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}dl dt{margin-bottom:.3125em;font-weight:bold}dl dd{margin-bottom:1.25em;margin-left:1.125em}blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,0.85)}@media screen and (min-width: 768px){h1{font-size:2.75em}h2{font-size:2.3125em}h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}h4{font-size:1.4375em}}table{background:#fff;border:1px solid #dedede;border-collapse:collapse;border-spacing:0;margin-bottom:1.25em;word-wrap:normal}table thead,table tfoot{background:#f7f8f7}table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,0.8);text-align:left}table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,0.8)}table tr.even,table tr.alt{background:#f8f8f7}table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}.center{margin-left:auto;margin-right:auto}.stretch{width:100%}.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:"";display:table}.clearfix::after,.float-group::after{clear:both}:not(pre).nobreak{word-wrap:normal}:not(pre).nowrap{white-space:nowrap}:not(pre).pre-wrap{white-space:pre-wrap}:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal !important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}pre>code{display:block}pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}.keyseq{color:rgba(51,51,51,0.8)}kbd{display:inline-block;color:rgba(0,0,0,0.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,0.2),inset 0 0 0 0.1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}.keyseq kbd:first-child{margin-left:0}.keyseq kbd:last-child{margin-right:0}.menuseq,.menuref{color:#000}.menuseq b:not(.caret),.menuref{font-weight:inherit}.menuseq{word-spacing:-0.02em}.menuseq b.caret{font-size:1.25em;line-height:0.8}.menuseq i.caret{font-weight:bold;text-align:center;width:0.45em}b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}b.button::before{content:"[";padding:0 3px 0 2px}b.button::after{content:"]";padding:0 2px 0 3px}p a>code:hover{color:rgba(0,0,0,0.9)}body>div[id]{margin:0 auto;max-width:62.5em;position:relative;padding-left:.9375em;padding-right:0.9375em}body>div[id]::before,body>div[id]::after,#content #footnotes::before{content:"";display:table;clear:both}#content{margin-top:1.25em;margin-bottom:0.625em}#content::before{content:none}#header>h1:first-child{color:rgba(0,0,0,0.85);margin-top:2.25rem;margin-bottom:0}#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,0.6);display:flex;flex-flow:row wrap}#header .details span:first-child{margin-left:-0.125em}#header .details span.email a{color:rgba(0,0,0,0.85)}#header .details br{display:none}#header .details br+span::before{content:" – "}#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,0.85)}#header .details br+span#revremark::before{content:" | "}#header #revnumber{text-transform:capitalize}#header #revnumber::after{content:" "}#content>h1:first-child:not([class]){color:rgba(0,0,0,0.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}#toc{border-bottom:1px solid #e7e7e9;padding-bottom:0.5em}#toc>ul{margin-left:0.125em}#toc ul.sectlevel0>li>a{font-style:italic}#toc ul.sectlevel0 ul.sectlevel1{margin:0.5em 0}#toc ul{font-family:"Open Sans", "DejaVu Sans", sans-serif;list-style-type:none}#toc li{line-height:1.3334;margin-top:0.3334em}#toc a{text-decoration:none}#toc a:active{text-decoration:underline}#toctitle{color:#7a2518;font-size:1.2em}@media screen and (min-width: 768px){#toctitle{font-size:1.375em}body.toc2{padding-left:15em;padding-right:0}#toc.toc2{margin-top:0 !important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0 !important;border-bottom-width:0 !important;z-index:1000;padding:1.25em 1em;height:calc(100% - (70px + 2.5em));overflow:auto}#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}#toc.toc2>ul{font-size:.9em;margin-bottom:0}#toc.toc2 ul ul{margin-left:0;padding-left:1em}#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:0.5em}body.toc2.toc-right{padding-left:0;padding-right:15em}body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}@media screen and (min-width: 1280px){body.toc2{padding-left:20em;padding-right:0}#toc.toc2{width:20em}#toc.toc2 #toctitle{font-size:1.375em}#toc.toc2>ul{font-size:0.95em}#toc.toc2 ul ul{padding-left:1.25em}body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}#content #toc>:first-child{margin-top:0}#content #toc>:last-child{margin-bottom:0}#footer{max-width:none;background:#025d8c;padding:1.25em;margin-left:2em}#footer-text{color:rgba(255,255,255,0.8);line-height:1.44}h1:before,h2:before,h3:before,h4:before,h5:before,h6:before,div.title:before{display:block;content:" ";height:90px;margin-top:-90px;visibility:hidden}.sect1{padding-bottom:0.625em}@media screen and (min-width: 768px){#content{margin-bottom:1.25em}.sect1{padding-bottom:1.25em}}.sect1:last-child{padding-bottom:0}.sect1+.sect1{border-top:1px solid #e7e7e9}#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none !important;visibility:hidden;text-align:center;font-weight:400}#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:0.1em}#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}details{margin-left:1.25rem}details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}details>summary::-webkit-details-marker{display:none}details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif", "DejaVu Serif", serif;font-size:1rem;font-style:italic}table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,0.85)}.admonitionblock>table{border-collapse:separate;border:1;background:none;width:100%}.admonitionblock>table td.icon{text-align:center;width:80px}.admonitionblock>table td.icon img{max-width:none}.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans", "DejaVu Sans", sans-serif;text-transform:uppercase}.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,0.6);word-wrap:anywhere}.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}.exampleblock>.content{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#fffef7;border-radius:4px;box-shadow:0 1px 4px #e0e0dc}.exampleblock>.content>:first-child{margin-top:0}.exampleblock>.content>:last-child{margin-bottom:0}.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}.sidebarblock>:first-child{margin-top:0}.sidebarblock>:last-child{margin-bottom:0}.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:0.8125em}@media screen and (min-width: 768px){.literalblock pre,.listingblock>.content>pre{font-size:0.90625em}}@media screen and (min-width: 1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,0.9)}.listingblock>.content{position:relative}.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:0.5}.listingblock:hover code[data-lang]::before{display:block}.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:0.5}.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}.listingblock pre.highlightjs{padding:0}.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}.listingblock pre.prettyprint{border-width:0}.prettyprint{background:#f7f7f8}pre.prettyprint .linenums{line-height:1.45;margin-left:2em}pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}pre.prettyprint li code[data-lang]::before{opacity:1}pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}table.linenotable td.code{padding-left:0.75em}table.linenotable td.linenos{width:0.01%}table.linenotable td.linenos,pre.pygments .linenos,pre.rouge .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}pre.pygments span.linenos,pre.rouge span.linenos{display:inline-block;margin-right:0.75em}.quoteblock{margin:0 1em 1.25em 1.5em;display:table}.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:0.75em}.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,0.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}.quoteblock blockquote{margin:0;padding:0;border:0}.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,0.1)}.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}.verseblock{margin:0 1em 1.25em}.verseblock pre{font-family:"Open Sans", "DejaVu Sans", sans-serif;font-size:1.15rem;color:rgba(0,0,0,0.85);font-weight:300;text-rendering:optimizeLegibility}.verseblock pre strong{font-weight:400}.verseblock .attribution{margin-top:1.25rem;margin-left:0.5ex}.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}.quoteblock .attribution br,.verseblock .attribution br{display:none}.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,0.6)}.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}.quoteblock.abstract{margin:0 1em 1.25em;display:block}.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:0.25em solid #dddddf}.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}p.tableblock:last-child{margin-bottom:0}td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}td.tableblock>.content>:last-child{margin-bottom:-1.25em}table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}table.grid-all>*>tr>*{border-width:1px}table.grid-cols>*>tr>*{border-width:0 1px}table.grid-rows>*>tr>*{border-width:1px 0}table.frame-all{border-width:1px}table.frame-ends{border-width:1px 0}table.frame-sides{border-width:0 1px}table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}th.halign-left,td.halign-left{text-align:left}th.halign-right,td.halign-right{text-align:right}th.halign-center,td.halign-center{text-align:center}th.valign-top,td.valign-top{vertical-align:top}th.valign-bottom,td.valign-bottom{vertical-align:bottom}th.valign-middle,td.valign-middle{vertical-align:middle}table thead th,table tfoot th{font-weight:bold}tbody tr th{background:#f7f8f7}tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,0.8);font-weight:bold}p.tableblock>code:only-child{background:none;padding:0}p.tableblock{font-size:1em}ol{margin-left:1.75em}ul li ol{margin-left:1.5em}dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:0.625em}ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:0.625em}ul.unstyled,ol.unstyled{margin-left:0}li>p:empty:only-child::before{content:"";display:inline-block}ul.checklist>li>p:first-child{margin-left:-1em}ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:0.125em}ul.checklist>li>p:first-child>input[type=checkbox]:first-child{font:inherit;margin:0 .25em 0 0;padding:0}ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 0.625em -1.25em}ul.inline>li{margin-left:1.25em}.unstyled dl dt{font-weight:400;font-style:normal}ol.arabic{list-style-type:decimal}ol.decimal{list-style-type:decimal-leading-zero}ol.loweralpha{list-style-type:lower-alpha}ol.upperalpha{list-style-type:upper-alpha}ol.lowerroman{list-style-type:lower-roman}ol.upperroman{list-style-type:upper-roman}ol.lowergreek{list-style-type:lower-greek}.hdlist>table,.colist>table{border:0;background:none}.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}td.hdlist1,td.hdlist2{vertical-align:top;padding:0 0.625em}td.hdlist1{font-weight:bold;padding-bottom:1.25em}td.hdlist2{word-wrap:anywhere}.literalblock+.colist,.listingblock+.colist{margin-top:-0.5em}.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}.colist td:not([class]):first-child img{max-width:none}.colist td:not([class]):last-child{padding:0.25em 0}.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}.imageblock.left{margin:0.25em 0.625em 1.25em 0}.imageblock.right{margin:0.25em 0 1.25em 0.625em}.imageblock>.title{margin-bottom:0}.imageblock.thumb,.imageblock.th{border-width:6px}.imageblock.thumb>.title,.imageblock.th>.title{padding:0 0.125em}.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}.image.left{margin-right:0.625em}.image.right{margin-left:0.625em}a.image{text-decoration:none;display:inline-block}a.image object{pointer-events:none}sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}sup.footnote a,sup.footnoteref a{text-decoration:none}sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:0.625em}#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:0.2em}#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}#footnotes .footnote:last-of-type{margin-bottom:0}#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:0.75em 0}div.page-break{display:none}div.unbreakable{page-break-inside:avoid}.big{font-size:larger}.small{font-size:smaller}.underline{text-decoration:underline}.overline{text-decoration:overline}.line-through{text-decoration:line-through}.aqua{color:#00bfbf}.aqua-background{background:#00fafa}.black{color:#000}.black-background{background:#000}.blue{color:#0000bf}.blue-background{background:#0000fa}.fuchsia{color:#bf00bf}.fuchsia-background{background:#fa00fa}.gray{color:#606060}.gray-background{background:#7d7d7d}.green{color:#006000}.green-background{background:#007d00}.lime{color:#00bf00}.lime-background{background:#00fa00}.maroon{color:#600000}.maroon-background{background:#7d0000}.navy{color:#000060}.navy-background{background:#00007d}.olive{color:#606000}.olive-background{background:#7d7d00}.purple{color:#600060}.purple-background{background:#7d007d}.red{color:#bf0000}.red-background{background:#fa0000}.silver{color:#909090}.silver-background{background:#bcbcbc}.teal{color:#006060}.teal-background{background:#007d7d}.white{color:#bfbfbf}.white-background{background:#fafafa}.yellow{color:#bfbf00}.yellow-background{background:#fafa00}span.icon>.fa{cursor:default}a span.icon>.fa{cursor:inherit}.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,0.5);cursor:default}.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,0.8);color:#111}.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}.conum[data-value]{display:inline-block;color:#fff !important;background:rgba(0,0,0,0.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans", "DejaVu Sans", sans-serif;font-style:normal;font-weight:bold}.conum[data-value] *{color:#fff !important}.conum[data-value]+b{display:none}.conum[data-value]::after{content:attr(data-value)}pre .conum[data-value]{position:relative;top:-0.125em}b.conum *{color:inherit !important}.conum:not([data-value]):empty{display:none}dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}h1,h2,p,td.content,span.alt,summary{letter-spacing:-0.01em}p strong,td.content strong,div.footnote strong{letter-spacing:-0.005em}p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}.print-only{display:none !important}@page{margin:1.25cm 0.75cm}@media print{*{box-shadow:none !important;text-shadow:none !important}html{font-size:80%}a{color:inherit !important;text-decoration:underline !important}a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none !important}a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:0.25em}abbr[title]{border-bottom:1px dotted}abbr[title]::after{content:" (" attr(title) ")"}pre,blockquote,tr,img,object,svg{page-break-inside:avoid}thead{display:table-header-group}p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}body>div[id]{max-width:none}#toc,.sidebarblock,.exampleblock>.content{background:none !important}#toc{border-bottom:1px solid #dddddf !important;padding-bottom:0 !important}body.book #header{text-align:center}body.book #header>h1:first-child{border:0 !important;margin:2.5em 0 1em}body.book #header .details{border:0 !important;display:block;padding:0 !important}body.book #header .details span:first-child{margin-left:0 !important}body.book #header .details br{display:block}body.book #header .details br+span::before{content:none !important}body.book #toc{border:0 !important;text-align:left !important;padding:0 !important;margin:0 !important}body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}.listingblock code[data-lang]::before{display:block}div.page-break{display:block;page-break-after:always}#footer{padding:0 0.9375em}.hide-on-print{display:none !important}.print-only{display:block !important}.hide-for-print{display:none !important}.show-for-print{display:inherit !important}}@media amzn-kf8, print{#header>h1:first-child{margin-top:1.25rem}.sect1{padding:0 !important}.sect1+.sect1{border:0}#footer{background:none}#footer-text{color:rgba(0,0,0,0.6);font-size:0.9em}}@media amzn-kf8{body>div[id]{padding:0}}body{padding:0;margin:0;margin-top:70px !important}.container{position:relative;z-index:1;padding-top:50px;min-height:100%}.container p{font-family:sans-serif;font-size:1.2em}nav{position:fixed;z-index:9999;left:0;right:0;top:0;height:70px;padding:0 1.5em;background-color:#025d8c;font-family:sans-serif;line-height:70px}nav .logo{width:50px}nav .nav-heading{color:#fff;font-family:ostrich-black;font-size:1.8em;padding:0.5em;vertical-align:sub}nav .nav-logo-heading{text-decoration:none}nav .nav-menu{position:absolute;right:0.3em;top:0;padding:0;margin:0;list-style:none}nav .nav-item{display:inline-block}nav .nav-item>a{display:inline-block;padding:0 2.5em;line-height:70px;color:#fff;text-decoration:none}nav .dropdown{position:relative}nav .dropdown a::after{content:"";display:inline-block;margin-left:0.5em;vertical-align:middle;border-top:0.3em solid #fff;border-right:0.3em solid transparent;border-left:0.3em solid transparent}nav .dropdown.show a::after{transform:rotate(180deg)}nav .dropdown-menu{display:none;position:absolute;left:0;right:0;top:100%;padding:0.5em 0;margin-top:-0.5em;border:1px solid rgba(0,0,0,0.3);border-radius:0.5em;background-color:#fff;width:max-content;max-height:80vh;overflow:scroll}nav .dropdown-menu-left{left:auto;right:0}nav .dropdown.show .dropdown-menu{display:block}nav .dropdown-div{display:block;padding:0.4em 0;line-height:4em}nav .dropdown-div a::after{content:none;margin-left:0;border-top:0;border-right:0;border-left:0}nav .dropdown-item{display:block;padding:0 1.5em;font-size:0.875em;color:#000;line-height:1.6em;text-decoration:none}nav .btn-hamburger{display:none;position:absolute;right:1.5em;top:50%;background-color:transparent;border:0;cursor:pointer;outline:none;transform:translateY(-50%)}nav .btn-hamburger span{display:block;width:30px;height:4px;background-color:#fff;margin:6px;border-radius:2px;transition:0.3s ease-in-out}nav .btn-hamburger span:nth-child(4),nav .btn-hamburger span:nth-child(5){position:absolute;top:10px;opacity:0.5}nav .btn-hamburger span:nth-child(4){transform:rotate(45deg) scale(0)}nav .btn-hamburger span:nth-child(5){transform:rotate(-45deg) scale(0)}nav.opened .btn-hamburger span:nth-child(4){opacity:1;transform:rotate(45deg) scale(1)}nav.opened .btn-hamburger span:nth-child(5){opacity:1;transform:rotate(-45deg) scale(1)}nav.opened .btn-hamburger span:nth-child(1),nav.opened .btn-hamburger span:nth-child(2),nav.opened .btn-hamburger span:nth-child(3){opacity:0}@media screen and (max-width: 768px){nav .nav-menu{position:fixed;left:0;right:0;top:70px;bottom:100%;display:flex;flex-direction:column;justify-content:start;background-color:#363d4e;transition:bottom 0.5s ease-in-out;overflow:hidden}nav.opened .nav-menu{bottom:0}nav .nav-item>a{display:block}nav .dropdown-menu{position:relative;top:0;margin:0 1.5em}nav .btn-hamburger{display:block}}@font-face{font-family:ostrich-black;src:url("../ostrich-black.ttf") format("truetype")}/*!
* "Fork me on GitHub" CSS ribbon v0.2.3 | MIT License
* https://github.com/simonwhitaker/github-fork-ribbon-css

The MIT License (MIT)

Copyright (c) 2013 Simon Whitaker

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/.github-fork-ribbon,.release-ribbon,.issue-ribbon{width:12.1em;height:12.1em;position:absolute;overflow:hidden;top:70px;right:0;z-index:9998;pointer-events:none;font-size:13px;text-decoration:none;text-indent:-999999px}.github-fork-ribbon.fixed,.fixed.release-ribbon,.fixed.issue-ribbon{position:fixed}.github-fork-ribbon:hover,.release-ribbon:hover,.issue-ribbon:hover,.github-fork-ribbon:active,.release-ribbon:active,.issue-ribbon:active{background-color:transparent}.github-fork-ribbon:before,.release-ribbon:before,.issue-ribbon:before,.github-fork-ribbon:after,.release-ribbon:after,.issue-ribbon:after{position:absolute;display:block;width:15.38em;height:1.54em;top:3.23em;right:-3.23em;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.github-fork-ribbon:before,.release-ribbon:before,.issue-ribbon:before{content:"";padding:.38em 0;background-color:#a00;background-image:-webkit-gradient(linear, left top, left bottom, from(transparent), to(rgba(0,0,0,0.15)));background-image:-webkit-linear-gradient(top, transparent, rgba(0,0,0,0.15));background-image:-moz-linear-gradient(top, transparent, rgba(0,0,0,0.15));background-image:-ms-linear-gradient(top, transparent, rgba(0,0,0,0.15));background-image:-o-linear-gradient(top, transparent, rgba(0,0,0,0.15));background-image:linear-gradient(to bottom, transparent, rgba(0,0,0,0.15));-webkit-box-shadow:0 0.15em 0.23em 0 rgba(0,0,0,0.5);-moz-box-shadow:0 0.15em 0.23em 0 rgba(0,0,0,0.5);box-shadow:0 0.15em 0.23em 0 rgba(0,0,0,0.5);pointer-events:auto}.github-fork-ribbon:after,.release-ribbon:after,.issue-ribbon:after{content:attr(data-ribbon);color:#fff;font:700 1em "Helvetica Neue", Helvetica, Arial, sans-serif;line-height:1.54em;text-decoration:none;text-shadow:0 -0.08em rgba(0,0,0,0.5);text-align:center;text-indent:0;padding:.15em 0;margin:.15em 0;border-width:.08em 0;border-style:dotted;border-color:#fff;border-color:rgba(255,255,255,0.7)}.github-fork-ribbon.left-top,.left-top.release-ribbon,.left-top.issue-ribbon,.github-fork-ribbon.left-bottom,.left-bottom.release-ribbon,.left-bottom.issue-ribbon{right:auto;left:0}.github-fork-ribbon.left-bottom,.left-bottom.release-ribbon,.left-bottom.issue-ribbon,.github-fork-ribbon.right-bottom,.right-bottom.release-ribbon,.right-bottom.issue-ribbon{top:auto;bottom:0}.github-fork-ribbon.left-top:before,.left-top.release-ribbon:before,.left-top.issue-ribbon:before,.github-fork-ribbon.left-top:after,.left-top.release-ribbon:after,.left-top.issue-ribbon:after,.github-fork-ribbon.left-bottom:before,.left-bottom.release-ribbon:before,.left-bottom.issue-ribbon:before,.github-fork-ribbon.left-bottom:after,.left-bottom.release-ribbon:after,.left-bottom.issue-ribbon:after{right:auto;left:-3.23em}.github-fork-ribbon.left-bottom:before,.left-bottom.release-ribbon:before,.left-bottom.issue-ribbon:before,.github-fork-ribbon.left-bottom:after,.left-bottom.release-ribbon:after,.left-bottom.issue-ribbon:after,.github-fork-ribbon.right-bottom:before,.right-bottom.release-ribbon:before,.right-bottom.issue-ribbon:before,.github-fork-ribbon.right-bottom:after,.right-bottom.release-ribbon:after,.right-bottom.issue-ribbon:after{top:auto;bottom:3.23em}.github-fork-ribbon.left-top:before,.left-top.release-ribbon:before,.left-top.issue-ribbon:before,.github-fork-ribbon.left-top:after,.left-top.release-ribbon:after,.left-top.issue-ribbon:after,.github-fork-ribbon.right-bottom:before,.right-bottom.release-ribbon:before,.right-bottom.issue-ribbon:before,.github-fork-ribbon.right-bottom:after,.right-bottom.release-ribbon:after,.right-bottom.issue-ribbon:after{-webkit-transform:rotate(-45deg);-moz-transform:rotate(-45deg);-ms-transform:rotate(-45deg);-o-transform:rotate(-45deg);transform:rotate(-45deg)}.release-ribbon:before{background-color:#a00}.issue-ribbon:before{background-color:#025d8c}@media screen{div.narrow{max-width:1080px;margin:0 auto !important;margin-top:70px auto !important;float:none !important}#toc.toc2{margin-top:70px !important}}

</style>
<!-- Generate a nice TOC -->
<script src="/js/jquery-1.11.3.min.js"></script>
<script src="/js/jquery-ui.min.js"></script>
<script src="/js/jquery.tocify.min.js"></script>
<!-- We do not need the tocify CSS because the asciidoc CSS already provides most of what we need -->

<style>
.tocify-header {
    /* font-style: italic; */
}

.tocify-subheader {
    font-style: normal;
    font-size: 95%;
}

.tocify ul {
    margin: 0;
 }

.tocify-focus {
    /* background-color: rgba(0, 0, 0, 0.05);*/
}

.tocify-focus > a {
    color: #ba3925;
}
</style>

<script type="text/javascript">
    $(function () {
        // Add a new container for the tocify toc into the existing toc so we can re-use its
        // styling
        $("#toc").append("<div id='generated-toc'></div>");
        $("#generated-toc").tocify({
            extendPage: true,
            context: "#content",
            highlightOnScroll: true,
            hideEffect: "slideUp",
            // Use the IDs that asciidoc already provides so that TOC links and intra-document
            // links are the same. Anything else might confuse users when they create bookmarks.
            hashGenerator: function(text, element) {
                return $(element).attr("id");
            },
            // Smooth scrolling doesn't work properly if we use the asciidoc IDs
            smoothScroll: false,
            // Set to 'none' to use the tocify classes
            theme: "none",
            // Handle book (may contain h1) and article (only h2 deeper)
            selectors: $( "#content" ).has( "h1" ).size() > 0 ? "h1,h2,h3,h4,h5" : "h2,h3,h4,h5",
            ignoreSelector: ".discrete"
        });

        // Switch between static asciidoc toc and dynamic tocify toc based on browser size
        // This is set to match the media selectors in the asciidoc CSS
        // Without this, we keep the dynamic toc even if it is moved from the side to preamble
        // position which will cause odd scrolling behavior
        var handleTocOnResize = function() {
            if ($(document).width() < 768) {
                $("#generated-toc").hide();
                $(".sectlevel0").show();
                $(".sectlevel1").show();
            }
            else {
                $("#generated-toc").show();
                $(".sectlevel0").hide();
                $(".sectlevel1").hide();
            }
        }

        $(window).resize(handleTocOnResize);
        handleTocOnResize();
    });
</script>
<style>
/*! Asciidoctor Tabs | Copyright (c) 2018-present Dan Allen | MIT License */
.tabs {
  margin-bottom: 1.25em;
}

.tablist > ul {
  display: flex;
  flex-wrap: wrap;
  list-style: none;
  margin: 0;
  padding: 0;
}

.tablist > ul li {
  align-items: center;
  background-color: #fff;
  cursor: pointer;
  display: flex;
  font-weight: bold;
  line-height: 1.5;
  padding: 0.25em 1em;
  position: relative;
}

.tablist > ul li:focus-visible {
  outline: none;
}

.tablist.ulist,
.tablist.ulist > ul li {
  margin: 0;
}

.tablist.ulist > ul li + li {
  margin-left: 0.25em;
}

.tabs .tablist li::after {
  content: "";
  display: block;
  height: 1px;
  position: absolute;
  bottom: -1px;
  left: 0;
  right: 0;
}

.tabs.is-loading .tablist li:not(:first-child),
.tabs:not(.is-loading) .tablist li:not(.is-selected) {
  background-color: #f5f5f5;
}

.tabs.is-loading .tablist li:first-child::after,
.tabs:not(.is-loading) .tablist li.is-selected::after {
  background-color: #fff;
}

/*
.tabs:not(.is-loading) .tablist li,
.tabs:not(.is-loading) .tablist li::after {
  transition: background-color 200ms ease-in-out;
}
*/

.tablist > ul p {
  line-height: inherit;
  margin: 0;
}

.tabpanel {
  background-color: #fff;
  padding: 1.25em;
}

.tablist > ul li,
.tabpanel {
  border: 1px solid #dcdcdc;
}

.tablist > ul li {
  border-bottom: 0;
}

.tabs.is-loading .tabpanel + .tabpanel,
.tabs:not(.is-loading) .tabpanel.is-hidden {
  display: none;
}

.tabpanel > :first-child {
  margin-top: 0;
}

/* #content is a signature of the Asciidoctor standalone HTML output */
#content .tabpanel > :last-child,
#content .tabpanel > :last-child > :last-child,
#content .tabpanel > :last-child > :last-child > li:last-child > :last-child {
  margin-bottom: 0;
}

.tablecontainer {
  overflow-x: auto;
}

#content .tablecontainer {
  margin-bottom: 1.25em;
}

#content .tablecontainer > table.tableblock {
  margin-bottom: 0;
}
</style>
</head>
<body class="book toc2 toc-left">
    <div id="wrap">
      <script src="/js/versions.js"></script>
      <script src="/js/nav.js"></script>
      <script>
        document.open();
        document.write(buildNavigation());
        addNavbarListeners();
        document.close();
      </script>
    </div>
<div id="header">
<h1>Installing Satellite&#160;Server in a connected network environment</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#providing-feedback-on-red-hat-documentation_satellite">Providing feedback on Red Hat documentation</a></li>
<li><a href="#red-hat-satellite-helper-app">1. Red&#160;Hat Satellite Installation Helper app</a></li>
<li><a href="#planning-satellite-server-installation_satellite">2. Planning Satellite&#160;Server installation</a>
<ul class="sectlevel2">
<li><a href="#operating-system-requirements">2.1. Operating system requirements</a></li>
<li><a href="#system-requirements_satellite">2.2. System requirements</a></li>
<li><a href="#storage-requirements_satellite">2.3. Storage requirements</a></li>
<li><a href="#best-practices-for-optimizing-storage">2.4. Best practices for optimizing storage</a></li>
<li><a href="#ipv6-and-ipv4-requirements">2.5. IPv6 and IPv4 requirements</a></li>
<li><a href="#aws-requirements">2.6. AWS Requirements</a></li>
</ul>
</li>
<li><a href="#preparing-environment-for-satellite-server-installation_satellite">3. Preparing environment for Satellite&#160;Server installation</a>
<ul class="sectlevel2">
<li><a href="#opening-required-ports">3.1. Opening required ports</a></li>
<li><a href="#verifying-dns-resolution_satellite">3.2. Verifying DNS resolution</a></li>
<li><a href="#preparing-for-using-external-databases_satellite">3.3. Preparing Satellite for using external databases</a></li>
</ul>
</li>
<li><a href="#tuning-with-predefined-profiles_satellite">4. Tuning Satellite&#160;Server with predefined profiles</a></li>
<li><a href="#Installing_Server_Connected_satellite">5. Installing Satellite&#160;Server</a>
<ul class="sectlevel2">
<li><a href="#configuring-http-proxy-to-connect-to-cdn_satellite">5.1. Configuring the HTTP proxy to connect to Red Hat CDN</a></li>
<li><a href="#registering-to-red-hat-subscription-management_satellite">5.2. Registering to Red Hat Subscription Management</a></li>
<li><a href="#configuring-repositories_satellite">5.3. Configuring repositories</a></li>
<li><a href="#installing-satellite-server-packages">5.4. Installing Satellite&#160;Server packages</a></li>
<li><a href="#configuring-satellite-server">5.5. Configuring Satellite&#160;Server</a>
<ul class="sectlevel3">
<li><a href="#configuring-satellite-installation">5.5.1. Configuring Satellite installation</a></li>
</ul>
</li>
<li><a href="#Importing_a_Red_Hat_Subscription_Manifest_into_Server_satellite">5.6. Importing a Red&#160;Hat subscription manifest into Satellite&#160;Server</a></li>
</ul>
</li>
<li><a href="#performing-additional-configuration-on-server_satellite">6. Performing additional configuration on Satellite&#160;Server</a>
<ul class="sectlevel2">
<li><a href="#configuring-satellite-server-as-insights-client">6.1. Configuring Satellite&#160;Server as Red&#160;Hat Lightspeed client</a></li>
<li><a href="#installing-and-configuring-red-hat-lightspeed-in-satellite">6.2. Installing and configuring Red&#160;Hat Lightspeed in Satellite</a>
<ul class="sectlevel3">
<li><a href="#configuring-podman-to-use-an-http-proxy">6.2.1. Configuring Podman to use an HTTP proxy</a></li>
<li><a href="#installing-red-hat-lightspeed-in-satellite-on-a-connected-satellite-server">6.2.2. Installing Red&#160;Hat Lightspeed in Satellite on a connected Satellite&#160;Server</a></li>
</ul>
</li>
<li><a href="#importing-the-project-client-name-repository_satellite">6.3. Importing the Red Hat Satellite Client 6 repository</a>
<ul class="sectlevel3">
<li><a href="#enabling-the-project-client-name-repository_satellite">6.3.1. Enabling the Red Hat Satellite Client 6 repository</a></li>
<li><a href="#synchronizing-the-project-client-name-repository_satellite">6.3.2. Synchronizing the Red Hat Satellite Client 6 repository</a></li>
</ul>
</li>
<li><a href="#configuring-pull-based-transport-for-remote-execution_satellite">6.4. Configuring pull-based transport for remote execution</a></li>
<li><a href="#configuring-for-uefi-http-boot-provisioning-in-an-ipv6-network_satellite">6.5. Configuring Satellite for UEFI HTTP boot provisioning in an IPv6 network</a></li>
<li><a href="#Configuring_Server_with_an_HTTP_Proxy_satellite">6.6. Configuring Satellite&#160;Server with an HTTP proxy</a>
<ul class="sectlevel3">
<li><a href="#adding-a-default-http-proxy_satellite">6.6.1. Adding a default HTTP proxy to Satellite</a></li>
<li><a href="#configuring-selinux-to-ensure-access-on-custom-ports_satellite">6.6.2. Configuring SELinux to ensure access to Satellite on custom ports</a></li>
<li><a href="#using-an-http-proxy-for-all-http-requests_satellite">6.6.3. Using an HTTP proxy for all Satellite HTTP requests</a></li>
<li><a href="#excluding-hosts-from-receiving-proxied-requests_satellite">6.6.4. Excluding hosts from receiving proxied requests</a></li>
<li><a href="#resetting-the-http-proxy_satellite">6.6.5. Resetting the HTTP proxy</a></li>
</ul>
</li>
<li><a href="#enabling-power-management-on-hosts_satellite">6.7. Enabling power management on hosts</a></li>
<li><a href="#Configuring_Server_for_Outgoing_Emails_satellite">6.8. Configuring Satellite&#160;Server for outgoing emails</a></li>
<li><a href="#configuring-project-to-manage-the-lifecycle-of-a-host-registered-to-a-freeipa-realm_satellite">6.9. Configuring Satellite to manage the lifecycle of a host registered to a Identity&#160;Management realm</a></li>
<li><a href="#configuring-an-alternate-cname_satellite">6.10. Configuring an alternate CNAME for Satellite</a>
<ul class="sectlevel3">
<li><a href="#configuring-satellite-with-an-alternate-cname_satellite">6.10.1. Configuring Satellite with an alternate CNAME</a></li>
<li><a href="#configuring-hosts-to-use-an-alternate-cname-for-content-management_satellite">6.10.2. Configuring hosts to use an alternate Satellite CNAME for content management</a></li>
</ul>
</li>
<li><a href="#configuring-satellite-server-with-a-custom-ssl-certificate">6.11. Configuring Satellite&#160;Server with a custom SSL certificate</a>
<ul class="sectlevel3">
<li><a href="#creating-a-custom-ssl-certificate_satellite">6.11.1. Creating a custom SSL certificate for Satellite&#160;Server</a></li>
<li><a href="#Deploying_a_Custom_SSL_Certificate_to_Server_satellite">6.11.2. Deploying a custom SSL certificate to Satellite&#160;Server</a></li>
<li><a href="#deploying-a-custom-ssl-certificate-to-hosts_satellite">6.11.3. Deploying a custom SSL certificate to hosts</a></li>
</ul>
</li>
<li><a href="#resetting-custom-ssl-certificate-to-default-self-signed-certificate-on-satellite_satellite">6.12. Resetting custom SSL certificate to default self-signed certificate on Satellite&#160;Server</a></li>
</ul>
</li>
<li><a href="#restoring-manual-changes-overwritten-by-a-puppet-run_satellite">Appendix A: Restoring manual changes overwritten by a Puppet run</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="providing-feedback-on-red-hat-documentation_satellite"><a class="anchor" href="#providing-feedback-on-red-hat-documentation_satellite"></a>Providing feedback on Red Hat documentation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We appreciate your feedback on our documentation.
Let us know how we can improve it.</p>
</div>
<div class="paragraph">
<p>Use the <strong>Create Issue</strong> form in Red Hat Jira to provide your feedback.
The Jira issue is created in the Red Hat Satellite Jira project, where you can track its progress.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure you have registered a <a href="https://access.redhat.com/">Red Hat account</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Click the following link: <a href="https://issues.redhat.com/secure/CreateIssueDetails!init.jspa?pid=12324223&amp;summary=Documentation%20feedback:%20%3CAdd%20summary%20here%3E&amp;issuetype=1&amp;components=12347630&amp;priority=10300"><strong>Create Issue</strong></a>.
If Jira displays a login error, log in and proceed after you are redirected to the form.</p>
</li>
<li>
<p>Complete the <strong>Summary</strong> and <strong>Description</strong> fields.
In the <strong>Description</strong> field, include the documentation URL, chapter or section number, and a detailed description of the issue.
Do not modify any other fields in the form.</p>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="red-hat-satellite-helper-app"><a class="anchor" href="#red-hat-satellite-helper-app"></a>1. Red&#160;Hat Satellite Installation Helper app</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For interactive instructions for performing the installation, you can use the Red&#160;Hat Satellite Installation Helper on the Red&#160;Hat Customer Portal.
This application provides you with an interactive way to prepare installation instructions customized for your required Satellite version number and configuration.
For more information, see <a href="https://access.redhat.com/labs/rhsih/">Red&#160;Hat Satellite Installation Helper</a> on the Red&#160;Hat Customer Portal.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="planning-satellite-server-installation_satellite"><a class="anchor" href="#planning-satellite-server-installation_satellite"></a>2. Planning Satellite&#160;Server installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Review the following guidelines, requirements, and considerations before proceeding with the installation.</p>
</div>
<div class="sect2">
<h3 id="operating-system-requirements"><a class="anchor" href="#operating-system-requirements"></a>2.1. Operating system requirements</h3>
<div class="paragraph">
<p>The following operating system is supported for deploying Satellite:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Red&#160;Hat Enterprise Linux 9 (x86_64)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can install the operating system from a disc, local ISO image, Kickstart, or any other method that Red&#160;Hat supports.</p>
</div>
<div class="paragraph">
<p>Red&#160;Hat Satellite&#160;Server is supported on the latest version of Red&#160;Hat Enterprise Linux 9 available at the time of installation.
Previous versions of Red&#160;Hat Enterprise Linux including EUS or z-stream are not supported.</p>
</div>
<div class="paragraph">
<p>Red&#160;Hat Satellite&#160;Server requires a Red&#160;Hat Enterprise Linux installation with the <code>@Base</code> package group with no other package-set modifications, and without third-party configurations or software not directly necessary for the direct operation of the server.
This restriction includes hardening and other non-Red&#160;Hat security software.
If you require such software in your infrastructure, install and verify a complete working Satellite&#160;Server first, then create a backup of the system before adding any non-Red&#160;Hat software.</p>
</div>
</div>
<div class="sect2">
<h3 id="system-requirements_satellite"><a class="anchor" href="#system-requirements_satellite"></a>2.2. System requirements</h3>
<div class="paragraph">
<p>Satellite&#160;Server is fully supported on both physical systems and virtual machines that run on hypervisors that are supported to run Red&#160;Hat Enterprise Linux.
For more information about certified hypervisors, see <a href="https://access.redhat.com/articles/certified-hypervisors">Certified Guest Operating Systems in Red Hat OpenStack Platform, Red Hat Virtualization, Red Hat OpenShift Virtualization and Red Hat Enterprise Linux with KVM</a>.</p>
</div>
<div class="paragraph">
<p>Follow these system requirements when installing Satellite&#160;Server:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Install Satellite&#160;Server on a freshly provisioned system that serves no other function except to run Satellite&#160;Server.
Do not use an existing system because the Satellite installer will affect the configuration of several components.</p>
</li>
<li>
<p>Ensure you have administrative user (root) access to the system.</p>
</li>
<li>
<p>Ensure the system meets the following requirements:</p>
<div class="ulist">
<ul>
<li>
<p>4 CPU cores</p>
</li>
<li>
<p>20 GB RAM or higher</p>
</li>
<li>
<p>4 GB RAM of swap space or higher</p>
</li>
<li>
<p>A unique host name, which can contain lower-case letters, numbers, dots (.) and hyphens (-)</p>
</li>
</ul>
</div>
</li>
<li>
<p>If you use custom certificates, ensure that the Common Name (CN) of the custom certificate is a fully qualified domain name (FQDN).
Satellite&#160;Server and Capsule&#160;Server do not support shortnames in the hostnames.</p>
</li>
<li>
<p>Ensure SELinux is enabled, either in enforcing or permissive mode.
Installation with disabled SELinux is not supported.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/overview_concepts_and_deployment_considerations/index#security-considerations">Security considerations</a> in <em>Overview, concepts, and deployment considerations</em>.</p>
</li>
<li>
<p>Ensure the system clock on the system is synchronized across the network.
If the system clock is not synchronized, SSL certificate verification might fail.
For example, you can use the Chrony suite for timekeeping.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/configuring_basic_system_settings/configuring-time-synchronization_configuring-basic-system-settings">Configuring time synchronization</a> in <em>Red&#160;Hat Enterprise Linux&#160;9 Configuring basic system settings</em></p>
</li>
<li>
<p>If you are installing in an environment with air-gapped Satellite&#160;Servers, ensure that all your Satellite&#160;Servers are on the same Satellite version for ISS Export Sync to work.
ISS Network Sync works across all Satellite versions that support it.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/managing_content/index#Synchronizing_Content_Between_Servers_content-management">Synchronizing Content Between Satellite Servers</a> in <em>Managing content</em>.</p>
</li>
<li>
<p>Ensure the system uses the <code>UTF-8</code> encoding.
If your territory is USA and your language is English, set <code>en_US.utf-8</code> as the system-wide locale settings.
For more information about configuring system locale in Red&#160;Hat Enterprise Linux, see <a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/configuring_basic_system_settings/assembly_changing-basic-environment-settings_configuring-basic-system-settings#proc_configuring-the-system-locale_assembly_changing-basic-environment-settings">Configuring the system locale</a> in <em>Red&#160;Hat Enterprise Linux&#160;9 Configuring basic system settings</em>.</p>
</li>
<li>
<p>If you use an external identity provider in your deployment, ensure the provider did not create the following user accounts on the system.
These user accounts can cause conflicts with the local users that Satellite&#160;Server creates:</p>
<div class="ulist">
<ul>
<li>
<p>apache</p>
</li>
<li>
<p>foreman</p>
</li>
<li>
<p>foreman-proxy</p>
</li>
<li>
<p>postgres</p>
</li>
<li>
<p>pulp</p>
</li>
<li>
<p>puppet</p>
</li>
<li>
<p>redis</p>
</li>
<li>
<p>tomcat</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="storage-requirements_satellite"><a class="anchor" href="#storage-requirements_satellite"></a>2.3. Storage requirements</h3>
<div class="paragraph">
<p>Follow these storage requirements when installing Satellite&#160;Server:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ensure that the directories used by Satellite&#160;Server have sufficient disk space available:</p>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Storage requirements for a Satellite&#160;Server installation</caption>
<colgroup>
<col style="width: 60%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Directory</th>
<th class="tableblock halign-left valign-top">Installation Size</th>
<th class="tableblock halign-left valign-top">Runtime Size</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/var/log</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 GB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/var/lib/pgsql</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100 MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 GB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/usr</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 GB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not Applicable</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/opt/puppetlabs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">500 MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not Applicable</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/var/lib/pulp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">300 GB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/var/lib/containers if using Red&#160;Hat Lightspeed in Satellite</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 GB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15 GB</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>These values are based on expected use case scenarios and can vary according to individual environments.
The runtime size was measured with Red&#160;Hat Enterprise Linux 7, 8, and 9 repositories synchronized.</p>
</div>
</li>
<li>
<p>If you mount the <code>/tmp</code> directory as a separate file system, use the <code>exec</code> mount option in the <code>/etc/fstab</code> file.</p>
<div class="paragraph">
<p>If <code>/tmp</code> is already mounted with the <code>noexec</code> option, change the option to <code>exec</code> and remount the file system.
This is a requirement for the <code>puppetserver</code> service to work.</p>
</div>
</li>
<li>
<p>If you mount the <code>/var/lib/pulp</code> directory as an NFS share, specify the SELinux context of the <code>/var/lib/pulp</code> directory in the file system table.
Add the following lines to <code>/etc/fstab</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-none" data-lang="none">nfs.example.com:/nfsshare  /var/lib/pulp  nfs  context="system_u:object_r:pulpcore_var_lib_t:s0"  1 2</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the NFS share is already mounted, remount it using the above configuration and restore the SELinux context:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># restorecon -R /var/lib/pulp</pre>
</div>
</div>
</li>
<li>
<p>Do not use symbolic links for <code>/var/lib/pulp/</code>.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_storage_devices/disk-partitions_managing-storage-devices">Disk partitions in <em>Red&#160;Hat Enterprise Linux&#160;9 Managing storage devices</em></a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="best-practices-for-optimizing-storage"><a class="anchor" href="#best-practices-for-optimizing-storage"></a>2.4. Best practices for optimizing storage</h3>
<div class="paragraph">
<p>Consider the following storage guidelines for increased storage efficiency:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The exact amount of storage you require for log messages depends on your installation and setup.
You can manage the size of the log files by using <strong>logrotate</strong>.</p>
</li>
<li>
<p>Consider mounting <code>/var</code> on LVM storage.
This can help the system to scale because most Satellite&#160;Server data is stored in the <code>/var</code> directory.</p>
</li>
<li>
<p>Use high-bandwidth, low-latency storage for the <code>/var/lib/pulp/</code> and <code>/var/lib/pgsql</code> directories.
Using high latency, low-bandwidth storage causes performance degradation because Red&#160;Hat Satellite has many operations that are I/O intensive.</p>
</li>
<li>
<p>Use a file system with low input-output latency.
Do not use the GFS2 file system because the input-output latency is too high.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://access.redhat.com/solutions/1294">How to use logrotate utility to rotate log files</a></p>
</li>
<li>
<p><a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/administering_red_hat_satellite/index#Logging_and_Reporting_Problems_admin">Logging and reporting problems in <em>Administering Red&#160;Hat Satellite</em></a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="ipv6-and-ipv4-requirements"><a class="anchor" href="#ipv6-and-ipv4-requirements"></a>2.5. IPv6 and IPv4 requirements</h3>
<div class="paragraph">
<p>You can install Satellite in an IPv4 network or in an IPv6 network.
Dual-stack Satellite installations that use both IPv4 and IPv6 are not supported.</p>
</div>
<div class="paragraph">
<p>The following requirements apply to installations in an IPv4 network:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ensure an IPv6 loopback is configured on the base system.
The loopback is typically configured by default.
Do not disable it.
Using the <code>ipv6.disable=1</code> kernel parameter or the <code>net.ipv6.conf.lo.disable_ipv6 = 1</code> sysctl option will break the installation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following requirements apply to installations in an IPv6 network:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Deploy an external HTTP proxy server that supports both IPv4 and IPv6.
This is required because Red Hat Content Delivery Network distributes content only over IPv4 networks, therefore you must use this HTTP proxy to pull content into the Satellite on your IPv6 network.
You must configure Satellite to use this dual-stack (supporting both IPv4 and IPv6) HTTP proxy as the default HTTP proxy.</p>
</li>
<li>
<p>Satellite does not support configuring an HTTP proxy using a direct IPv6 address.
Instead, configure the HTTP proxy with a FQDN that resolves to the IPv6 address.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you intend to provision hosts in an IPv6 network, the following requirements also apply:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Deploy an external DHCPv6 server and configure it manually to communicate with the network boot process and to manage IP address assignment because Satellite cannot integrate with a DHCPv6 server and manage its configuration.
For more information about DHCPv6 server configuration, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/provisioning_hosts/index#options-in-unmanaged-dhcpv6">Options in unmanaged DHCPv6</a> in <em>Provisioning hosts</em>.</p>
</li>
<li>
<p>Configure Satellite for UEFI HTTP boot provisioning.
Although Satellite provisioning templates include IPv6 support for PXE and HTTP (iPXE) provisioning, the UEFI HTTP Boot provisioning is the only tested and certified provisioning workflow.
For more information, see <a href="#configuring-for-uefi-http-boot-provisioning-in-an-ipv6-network_satellite">Configuring Satellite for UEFI HTTP boot provisioning in an IPv6 network</a>.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://access.redhat.com/solutions/5045841"><em>How do I disable the IPv6 protocol on Red Hat Satellite and/or Red Hat Capsule server?</em> in Red Hat Knowledgebase</a></p>
</li>
<li>
<p><a href="#adding-a-default-http-proxy_satellite">Adding a default HTTP proxy to Satellite</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="aws-requirements"><a class="anchor" href="#aws-requirements"></a>2.6. AWS Requirements</h3>
<div class="paragraph">
<p>Installing and running Satellite&#160;Server and Capsule&#160;Servers on Amazon Web Services (AWS) has additional requirements to your environment.</p>
</div>
<div class="ulist">
<div class="title">Amazon Web Service requirements</div>
<ul>
<li>
<p>Use <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/installing_satellite_server_in_a_connected_network_environment/index#storage-requirements_satellite">Storage requirements</a> in <em>Installing Satellite&#160;Server in a connected network environment</em> to understand and assign the correct storage to your AWS EBS volumes.
See also an <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/storage-optimized-instances.html">AWS storage optimized instance</a> for further guidance.</p>
</li>
<li>
<p>Create EBS volumes for directories expected to contain larger amounts of data like <code>/var/lib/pulp</code> and ensure they are correctly mounted on start-up and before continuing the installation.</p>
</li>
<li>
<p>Optional: Store other data on a separate EBS volume.</p>
</li>
<li>
<p>If you want Satellite&#160;Server and Capsule&#160;Server to communicate using external DNS hostnames, open the required ports for communication in the AWS Security Group that is associated with the instance.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">AWS permission requirements</div>
<ul>
<li>
<p>Create and access Red&#160;Hat Enterprise Linux images in AWS</p>
</li>
<li>
<p>Edit network access in AWS Security</p>
</li>
<li>
<p>Create EC2 instances and EBS volumes</p>
</li>
<li>
<p>Launch EC2 instances</p>
</li>
<li>
<p>Import and export of virtual machines in AWS</p>
</li>
<li>
<p>Usage of AWS Direct Connect</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Satellite requirements</div>
<p>Ensure that your Amazon EC2 instance meets or exceeds requirements for Satellite:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For Satellite&#160;Server, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/installing_satellite_server_in_a_connected_network_environment/index#preparing-environment-for-satellite-server-installation_satellite">Preparing environment for Satellite&#160;Server installation</a> in <em>Installing Satellite&#160;Server in a connected network environment</em>.</p>
</li>
<li>
<p>For Capsule&#160;Servers, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/installing_capsule_server/index#preparing-environment-for-capsule-installation">Preparing your environment for installation</a> in <em>Installing Capsule Server</em>.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Red Hat Cloud prerequisites</div>
<ul>
<li>
<p>Register with Red Hat Cloud Access.</p>
</li>
<li>
<p>Migrate any Red Hat subscriptions that you want to use.</p>
</li>
<li>
<p>Create an AWS instance and deploy a virtual machine running Red&#160;Hat Enterprise Linux to the instance.
For more information about deploying Red&#160;Hat Enterprise Linux in AWS, see <a href="https://access.redhat.com/articles/2962171">How to Locate Red Hat Cloud Access Gold Images on AWS EC2</a>.</p>
</li>
<li>
<p>Ensure that your subscriptions are eligible for transfer to Red Hat Cloud.
For more information, see <a href="https://www.redhat.com/en/technologies/cloud-computing/cloud-access#program-details">Red Hat Cloud Access Program Details</a>.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>For more information about Amazon Web Services and terminology, see <a href="https://docs.aws.amazon.com/ec2/">Amazon Elastic Compute Cloud Documentation</a>.</p>
</li>
<li>
<p>For more information about Amazon Web Services Direct Connect, see <a href="https://docs.aws.amazon.com/directconnect/latest/UserGuide/Welcome.html">What is AWS Direct Connect?</a>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="preparing-environment-for-satellite-server-installation_satellite"><a class="anchor" href="#preparing-environment-for-satellite-server-installation_satellite"></a>3. Preparing environment for Satellite&#160;Server installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Ensure that your network environment is ready for the Satellite&#160;Server installation.</p>
</div>
<div class="sect2">
<h3 id="opening-required-ports"><a class="anchor" href="#opening-required-ports"></a>3.1. Opening required ports</h3>
<div class="paragraph">
<p>By opening the required ports, you ensure that the components of Satellite architecture can communicate.
You must also ensure that the required network ports are open on any network-based firewalls.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Some cloud solutions must be specifically configured to allow communications between machines because they isolate machines similarly to network-based firewalls.
If you use an application-based firewall, ensure that the application-based firewall permits all applications that are listed in the tables and known to your firewall.
If possible, disable the application checking and allow open port communication based on the protocol.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>If you need to prevent the DHCP Capsule from pinging hosts to check for available IP addresses, disable DHCP IP address pinging:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer --foreman-proxy-dhcp-ping-free-ip false</pre>
</div>
</div>
<div class="paragraph">
<p>By default, a DHCP Capsule performs ICMP ping and TCP echo connection attempts to hosts in subnets with DHCP IPAM set to find out if an IP address considered for use is free.</p>
</div>
</li>
<li>
<p>Open the ports for clients on Satellite&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd \
--add-port="8000/tcp" \
--add-port="9090/tcp"</pre>
</div>
</div>
</li>
<li>
<p>Allow access to services on Satellite&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd \
--add-service=dns \
--add-service=dhcp \
--add-service=tftp \
--add-service=http \
--add-service=https \
--add-service=puppetmaster</pre>
</div>
</div>
</li>
<li>
<p>Make the changes persistent:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd --runtime-to-permanent</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>View all firewall zones and allowed services:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd --list-all</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/overview_concepts_and_deployment_considerations/index#networking-considerations-in-satellite">Networking considerations in Satellite</a></p>
</li>
<li>
<p><a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/configuring_firewalls_and_packet_filters/using-and-configuring-firewalld_firewall-packet-filters">Using and configuring firewalld in <em>Red&#160;Hat Enterprise Linux&#160;9 Configuring firewalls and packet filters</em></a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="verifying-dns-resolution_satellite"><a class="anchor" href="#verifying-dns-resolution_satellite"></a>3.2. Verifying DNS resolution</h3>
<div class="paragraph">
<p>Verify the full forward and reverse DNS resolution using a fully-qualified domain name to prevent issues while installing Satellite.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Ensure that the host name and local host resolve correctly:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ping -c1 localhost
# ping -c1 `hostname -f` # my_system.domain.com</pre>
</div>
</div>
<div class="paragraph">
<p>Successful name resolution results in output similar to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ping -c1 localhost
PING localhost (127.0.0.1) 56(84) bytes of data.
64 bytes from localhost (127.0.0.1): icmp_seq=1 ttl=64 time=0.043 ms

--- localhost ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.043/0.043/0.043/0.000 ms

# ping -c1 `hostname -f`
PING hostname.gateway (XX.XX.XX.XX) 56(84) bytes of data.
64 bytes from hostname.gateway (XX.XX.XX.XX): icmp_seq=1 ttl=64 time=0.019 ms

--- localhost.gateway ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.019/0.019/0.019/0.000 ms</pre>
</div>
</div>
</li>
<li>
<p>To avoid discrepancies with static and transient host names, set all the host names on the system by entering the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hostnamectl set-hostname <em>name</em></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html-single/configuring_and_managing_networking/index#proc_changing-a-hostname-using-hostnamectl_assembly_changing-a-hostname">Changing a hostname using hostnamectl</a> in <em>Red&#160;Hat Enterprise Linux&#160;9 Configuring and managing networking</em>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>Name resolution is critical to the operation of Satellite.
If Satellite cannot properly resolve its fully qualified domain name, tasks such as content management, subscription management, and provisioning will fail.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="preparing-for-using-external-databases_satellite"><a class="anchor" href="#preparing-for-using-external-databases_satellite"></a>3.3. Preparing Satellite for using external databases</h3>
<div class="paragraph">
<p>By default, the Satellite installation process includes installing a PostgreSQL database on the same host as Satellite&#160;Server.
However, in certain Satellite deployments, using external databases instead of the default local databases can help with the server load or have other benefits.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have considered whether using an external database is beneficial for your use case.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/administering_red_hat_satellite/index#postgresql-as-an-external-database-considerations_admin">PostgreSQL as an external database considerations</a> in <em>Administering Red&#160;Hat Satellite</em>.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Install PostgreSQL on an external database host you prepared.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/administering_red_hat_satellite/index#installing-postgresql_admin">Installing PostgreSQL</a> in <em>Administering Red&#160;Hat Satellite</em>.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Next steps</div>
<ul>
<li>
<p>To set up an external database when installing Satellite, see <a href="#configuring-satellite-installation">Configuring Satellite installation</a>.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/administering_red_hat_satellite/index#Migrating_from_Internal_Databases_to_External_Databases_admin">Migrating an existing Satellite deployment to an external database</a> in <em>Administering Red&#160;Hat Satellite</em>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tuning-with-predefined-profiles_satellite"><a class="anchor" href="#tuning-with-predefined-profiles_satellite"></a>4. Tuning Satellite&#160;Server with predefined profiles</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If your Satellite deployment includes more than 5000 hosts, you can use predefined tuning profiles to improve performance of Satellite.</p>
</div>
<div class="paragraph">
<p>Note that you cannot use tuning profiles on Capsules.</p>
</div>
<div class="paragraph">
<p>You can choose one of the profiles depending on the number of hosts your Satellite manages and available hardware resources.</p>
</div>
<div class="paragraph">
<p>The tuning profiles are available in the <code>/usr/share/foreman-installer/config/foreman.hiera/tuning/sizes</code> directory.</p>
</div>
<div class="paragraph">
<p>When you run the <code>satellite-installer</code> command with the <code>--tuning</code> option, deployment configuration settings are applied to Satellite in the following order:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The default tuning profile defined in the <code>/usr/share/foreman-installer/config/foreman.hiera/tuning/common.yaml</code> file</p>
</li>
<li>
<p>The tuning profile that you want to apply to your deployment and is defined in the <code>/usr/share/foreman-installer/config/foreman.hiera/tuning/sizes/</code> directory</p>
</li>
<li>
<p>Optional: If you have configured a <code>/etc/foreman-installer/custom-hiera.yaml</code> file, Satellite applies these configuration settings.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Note that the configuration settings that are defined in the <code>/etc/foreman-installer/custom-hiera.yaml</code> file override the configuration settings that are defined in the tuning profiles.</p>
</div>
<div class="paragraph">
<p>Therefore, before applying a tuning profile, you must compare the configuration settings that are defined in the default tuning profile in <code>/usr/share/foreman-installer/config/foreman.hiera/tuning/common.yaml</code>, the tuning profile that you want to apply and your <code>/etc/foreman-installer/custom-hiera.yaml</code> file, and remove any duplicated configuration from the <code>/etc/foreman-installer/custom-hiera.yaml</code> file.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">default</dt>
<dd>
<p>Number of hosts: 0&#8202;&#8211;&#8202;5000</p>
<div class="paragraph">
<p>RAM: 20G</p>
</div>
<div class="paragraph">
<p>Number of CPU cores: 4</p>
</div>
</dd>
<dt class="hdlist1">medium</dt>
<dd>
<p>Number of hosts: 5001&#8202;&#8211;&#8202;10000</p>
<div class="paragraph">
<p>RAM: 32G</p>
</div>
<div class="paragraph">
<p>Number of CPU cores: 8</p>
</div>
</dd>
<dt class="hdlist1">large</dt>
<dd>
<p>Number of hosts: 10001&#8202;&#8211;&#8202;20000</p>
<div class="paragraph">
<p>RAM: 64G</p>
</div>
<div class="paragraph">
<p>Number of CPU cores: 16</p>
</div>
</dd>
<dt class="hdlist1">extra-large</dt>
<dd>
<p>Number of hosts: 20001&#8202;&#8211;&#8202;60000</p>
<div class="paragraph">
<p>RAM: 128G</p>
</div>
<div class="paragraph">
<p>Number of CPU cores: 32</p>
</div>
</dd>
<dt class="hdlist1">extra-extra-large</dt>
<dd>
<p>Number of hosts: 60000+</p>
<div class="paragraph">
<p>RAM: 256G</p>
</div>
<div class="paragraph">
<p>Number of CPU cores: 48+</p>
</div>
</dd>
</dl>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Optional: If you have configured the <code>custom-hiera.yaml</code> file on Satellite&#160;Server, back up the <code>/etc/foreman-installer/custom-hiera.yaml</code> file to <code>custom-hiera.original</code>.
You can use the backup file to restore the <code>/etc/foreman-installer/custom-hiera.yaml</code> file to its original state if it becomes corrupted:</p>
<div class="listingblock">
<div class="content">
<pre># cp /etc/foreman-installer/custom-hiera.yaml \
/etc/foreman-installer/custom-hiera.original</pre>
</div>
</div>
</li>
<li>
<p>Optional: If you have configured the <code>custom-hiera.yaml</code> file on Satellite&#160;Server, review the definitions of the default tuning profile in <code>/usr/share/foreman-installer/config/foreman.hiera/tuning/common.yaml</code> and the tuning profile that you want to apply in <code>/usr/share/foreman-installer/config/foreman.hiera/tuning/sizes/</code>.
Compare the configuration entries against the entries in your <code>/etc/foreman-installer/custom-hiera.yaml</code> file and remove any duplicated configuration settings in your <code>/etc/foreman-installer/custom-hiera.yaml</code> file.</p>
</li>
<li>
<p>Enter the <code>satellite-installer</code> command with the <code>--tuning</code> option for the profile that you want to apply.
For example, you can apply the medium tuning profile settings:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer --tuning medium</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Installing_Server_Connected_satellite"><a class="anchor" href="#Installing_Server_Connected_satellite"></a>5. Installing Satellite&#160;Server</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you install Satellite&#160;Server from a connected network, you can obtain packages and receive updates directly from the Red Hat Content Delivery Network.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>You cannot register Satellite&#160;Server to itself.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Use the following procedures to install Satellite&#160;Server, perform the initial configuration, and import subscription manifests.
For more information on subscription manifests, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/managing_content/index#Managing_Red_Hat_Subscriptions_content-management">Managing Red Hat Subscriptions</a> in <em>Managing content</em>.</p>
</div>
<div class="paragraph">
<p>Note that the Satellite installation script is based on Puppet, which means that if you run the installation script more than once, it might overwrite any manual configuration changes.
⁠
To avoid this and determine which future changes apply, use the <code>--noop</code> argument when you run the installation script.
This argument ensures that no actual changes are made.
Potential changes are written to <code>/var/log/foreman-installer/satellite.log</code>.</p>
</div>
<div class="paragraph">
<p>Files are always backed up and so you can revert any unwanted changes.
For example, in the logs of <code>foreman-installer</code>, you can see an entry similar to the following about Filebucket:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/Stage[main]/Dhcp/File[/etc/dhcp/dhcpd.conf]: Filebucketed /etc/dhcp/dhcpd.conf to puppet with sum 622d9820b8e764ab124367c68f5fa3a1</pre>
</div>
</div>
<div class="paragraph">
<p>You can restore the previous file as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># puppet filebucket -l \
restore /etc/dhcp/dhcpd.conf 622d9820b8e764ab124367c68f5fa3a1</pre>
</div>
</div>
<div class="sect2">
<h3 id="configuring-http-proxy-to-connect-to-cdn_satellite"><a class="anchor" href="#configuring-http-proxy-to-connect-to-cdn_satellite"></a>5.1. Configuring the HTTP proxy to connect to Red Hat CDN</h3>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Your network gateway and the HTTP proxy must allow access to the following hosts:</p>
<table id="host-names-for-http-proxy_satellite" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Host name</th>
<th class="tableblock halign-left valign-top">Port</th>
<th class="tableblock halign-left valign-top">Protocol</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subscription.rhsm.redhat.com</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cdn.redhat.com</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cert.console.redhat.com (if using Red&#160;Hat Lightspeed)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">api.access.redhat.com (if using Red&#160;Hat Lightspeed)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cert-api.access.redhat.com (if using Red&#160;Hat Lightspeed)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">console.redhat.com (if using Red&#160;Hat Lightspeed)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">connect.cloud.redhat.com (if using Red&#160;Hat Lightspeed)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
<div class="paragraph">
<p>Satellite&#160;Server uses SSL to communicate with the Red&#160;Hat CDN securely.
An SSL interception proxy interferes with this communication.
These hosts must be allowlisted on your HTTP proxy.</p>
</div>
<div class="paragraph">
<p>For a list of IP addresses used by the Red&#160;Hat CDN (cdn.redhat.com), see the Knowledgebase article <a href="https://access.redhat.com/articles/1525183">Public CIDR Lists for Red&#160;Hat</a> on the Red&#160;Hat Customer Portal.</p>
</div>
<div class="paragraph">
<p>To configure the Subscription Manager with the HTTP proxy, follow the procedure below.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>On Satellite&#160;Server, complete the following details in the <code>/etc/rhsm/rhsm.conf</code> file:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-none" data-lang="none"># an http proxy server to use (enter server FQDN)
proxy_hostname = <em>http-proxy.example.com</em>

# port for http proxy server
proxy_port = 8080

# user name for authenticating to an http proxy, if needed
proxy_user =

# password for basic http proxy auth, if needed
proxy_password =</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="registering-to-red-hat-subscription-management_satellite"><a class="anchor" href="#registering-to-red-hat-subscription-management_satellite"></a>5.2. Registering to Red Hat Subscription Management</h3>
<div class="paragraph">
<p>Registering the host to Red Hat Subscription Management enables the host to subscribe to and consume content for any subscriptions available to the user.
This includes content such as Red&#160;Hat Enterprise Linux and Red&#160;Hat Satellite.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Register your system with the Red Hat Content Delivery Network, entering your Customer Portal user name and password when prompted:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># subscription-manager register</pre>
</div>
</div>
<div class="paragraph">
<p>The command displays output similar to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-none" data-lang="none"># subscription-manager register
Username: user_name
Password:
The system has been registered with ID: 541084ff2-44cab-4eb1-9fa1-7683431bcf9a</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="configuring-repositories_satellite"><a class="anchor" href="#configuring-repositories_satellite"></a>5.3. Configuring repositories</h3>
<div class="paragraph _abstract">
<p>Configure the required repositories.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Disable all repositories:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># subscription-manager repos --disable "*"</pre>
</div>
</div>
</li>
<li>
<p>Enable the following repositories:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># subscription-manager repos \
--enable=rhel-9-for-x86_64-baseos-rpms \
--enable=rhel-9-for-x86_64-appstream-rpms \
--enable=satellite-6.18-for-rhel-9-x86_64-rpms \
--enable=satellite-maintenance-6.18-for-rhel-9-x86_64-rpms</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>Verify that the required repositories are enabled:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf repolist enabled</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="installing-satellite-server-packages"><a class="anchor" href="#installing-satellite-server-packages"></a>5.4. Installing Satellite&#160;Server packages</h3>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Upgrade all packages:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf upgrade</pre>
</div>
</div>
</li>
<li>
<p>Install the packages:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf install satellite</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="configuring-satellite-server"><a class="anchor" href="#configuring-satellite-server"></a>5.5. Configuring Satellite&#160;Server</h3>
<div class="paragraph">
<p>Install Satellite&#160;Server by using the <code>satellite-installer</code> installation script.</p>
</div>
<div class="paragraph">
<p>This method is performed by running the installation script with one or more command options.
The command options override the corresponding default initial configuration options and are recorded in the Satellite answer file.
You can run the script as often as needed to configure any necessary options.</p>
</div>
<div class="sect3">
<h4 id="configuring-satellite-installation"><a class="anchor" href="#configuring-satellite-installation"></a>5.5.1. Configuring Satellite installation</h4>
<div class="paragraph">
<p>This initial configuration procedure creates an organization, location, user name, and password.
After the initial configuration, you can create additional organizations and locations if required.
The initial configuration also installs PostgreSQL databases on the same server.</p>
</div>
<div class="paragraph">
<p>The installation process can take tens of minutes to complete.
If you are connecting remotely to the system, use a utility such as <code>tmux</code> that allows suspending and reattaching a communication session so that you can check the installation progress in case you become disconnected from the remote system.
If you lose connection to the shell where the installation command is running, see the log at <code>/var/log/foreman-installer/satellite.log</code> to determine if the process completed successfully.</p>
</div>
<div class="ulist">
<div class="title">Considerations</div>
<ul>
<li>
<p>Use the <code>satellite-installer --scenario satellite --help</code> command to display the most commonly used options and any default values.</p>
</li>
<li>
<p>Use the <code>satellite-installer --scenario satellite --full-help</code> command to display advanced options.</p>
</li>
<li>
<p>Specify a meaningful value for the option: <code>--foreman-initial-organization</code>.
This can be your company name.
An internal label that matches the value is also created and cannot be changed afterwards.
If you do not specify a value, an organization called <strong>Default Organization</strong> with the label <strong>Default_Organization</strong> is created.
You can rename the organization name but not the label.</p>
</li>
<li>
<p>By default, all configuration files configured by the installer are managed.
When <code>satellite-installer</code> runs, it overwrites any manual changes to the managed files with the intended values.
This means that running the installer on a broken system should restore it to working order, regardless of changes made.
For more information on how to apply custom configuration on other services, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/installing_satellite_server_in_a_connected_network_environment/index#applying-custom-configuration_satellite">Applying Custom Configuration to Satellite</a>.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>If you want to use an external PostgreSQL database for your Satellite&#160;Server, you must have a corresponding PostgreSQL access available, for example on a dedicated host.
For more information, see <a href="#preparing-for-using-external-databases_satellite">Preparing Satellite for using external databases</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Depending on what type of database you want to use on your Satellite deployment, do one of the following:</p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>To install Satellite&#160;Server with the default local database, enter the following command with any additional options that you want to use:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer --scenario satellite \
--foreman-initial-organization "<em>My_Organization</em>" \
--foreman-initial-location "<em>My_Location</em>" \
--foreman-initial-admin-username <em>admin_user_name</em> \
--foreman-initial-admin-password <em>admin_password</em></pre>
</div>
</div>
</li>
<li>
<p>To install Satellite&#160;Server with an external PostgreSQL server, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer --scenario satellite \
--foreman-initial-organization "<em>My_Organization</em>" \
--foreman-initial-location "<em>My_Location</em>" \
--foreman-initial-admin-username <em>admin_user_name</em> \
--foreman-initial-admin-password <em>admin_password</em> \
--katello-candlepin-manage-db false \
--katello-candlepin-db-host <em>postgres.example.com</em> \
--katello-candlepin-db-name <em>candlepin</em> \
--katello-candlepin-db-user <em>candlepin</em> \
--katello-candlepin-db-password <em>Candlepin_Password</em> \
--foreman-proxy-content-pulpcore-manage-postgresql false \
--foreman-proxy-content-pulpcore-postgresql-host <em>postgres.example.com</em> \
--foreman-proxy-content-pulpcore-postgresql-db-name pulpcore \
--foreman-proxy-content-pulpcore-postgresql-user pulp \
--foreman-proxy-content-pulpcore-postgresql-password <em>Pulpcore_Password</em> \
--foreman-db-manage false \
--foreman-db-host <em>postgres.example.com</em> \
--foreman-db-database <em>foreman</em> \
--foreman-db-username <em>foreman</em> \
--foreman-db-password <em>Foreman_Password&gt;*</em></pre>
</div>
</div>
<div class="paragraph">
<p>To also enable encrypted connections for these external databases, use the following command instead:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer --scenario satellite \
--foreman-initial-organization "<em>My_Organization</em>" \
--foreman-initial-location "<em>My_Location</em>" \
--foreman-initial-admin-username <em>admin_user_name</em> \
--foreman-initial-admin-password <em>admin_password</em> \
--katello-candlepin-manage-db false \
--katello-candlepin-db-host <em>postgres.example.com</em> \
--katello-candlepin-db-name <em>candlepin</em> \
--katello-candlepin-db-user <em>candlepin</em> \
--katello-candlepin-db-password <em>Candlepin_Password</em> \
--katello-candlepin-db-ssl true \
--katello-candlepin-db-ssl-ca <em>My_CA_Certificate</em> \
--katello-candlepin-db-ssl-verify true \
--foreman-proxy-content-pulpcore-manage-postgresql false \
--foreman-proxy-content-pulpcore-postgresql-host <em>postgres.example.com</em> \
--foreman-proxy-content-pulpcore-postgresql-db-name pulpcore \
--foreman-proxy-content-pulpcore-postgresql-user pulp \
--foreman-proxy-content-pulpcore-postgresql-password <em>Pulpcore_Password</em> \
--foreman-proxy-content-pulpcore-postgresql-ssl true \
--foreman-proxy-content-pulpcore-postgresql-ssl-root-ca <em>My_CA_Certificate</em> \
--foreman-db-manage false \
--foreman-db-host <em>postgres.example.com</em> \
--foreman-db-database <em>foreman</em> \
--foreman-db-username <em>foreman</em> \
--foreman-db-password <em>Foreman_Password</em>
--foreman-db-root-cert <em>My_CA_Certificate</em> \
--foreman-db-sslmode verify-full</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>The script displays its progress and writes logs to <code>/var/log/foreman-installer/satellite.log</code>.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Importing_a_Red_Hat_Subscription_Manifest_into_Server_satellite"><a class="anchor" href="#Importing_a_Red_Hat_Subscription_Manifest_into_Server_satellite"></a>5.6. Importing a Red&#160;Hat subscription manifest into Satellite&#160;Server</h3>
<div class="paragraph">
<p>Use the following procedure to import a Red&#160;Hat subscription manifest into Satellite&#160;Server.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Simple Content Access (SCA) is set on the organization, not the manifest.
Importing a manifest does not change your organization&#8217;s Simple Content Access status.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Simple Content Access simplifies the subscription experience for administrators.
For more information, see the <a href="https://access.redhat.com/subscription_mgmt_guide_for_RHEL">Subscription Management Administration Guide for Red Hat Enterprise Linux</a> on the Red Hat Customer Portal.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure you have a Red&#160;Hat subscription manifest exported from the Red&#160;Hat Hybrid Cloud Console.
For more information, see <a href="https://docs.redhat.com/en/documentation/subscription_central/1-latest/html-single/creating_and_managing_manifests_for_a_connected_satellite_server/index">Creating and managing manifests for a connected Satellite Server</a> in <em>Subscription Central</em>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, ensure the context is set to the organization you want to use.</p>
</li>
<li>
<p>In the Satellite web UI, navigate to <strong>Content</strong> &gt; <strong>Subscriptions</strong> and click <strong>Manage Manifest</strong>.</p>
</li>
<li>
<p>In the <strong>Manage Manifest</strong> window, click <strong>Choose File</strong>.</p>
</li>
<li>
<p>Navigate to the location that contains the Red&#160;Hat subscription manifest file, then click <strong>Open</strong>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Copy the Red&#160;Hat subscription manifest file from your local machine to Satellite&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre>$ scp ~/<em>manifest_file</em>.zip root@<em>satellite.example.com</em>:~/.</pre>
</div>
</div>
</li>
<li>
<p>Log in to Satellite&#160;Server as the <code>root</code> user and import the Red&#160;Hat subscription manifest file:</p>
<div class="listingblock">
<div class="content">
<pre>$ hammer subscription upload \
--file ~/<em>manifest_file</em>.zip \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can now enable repositories and import Red Hat content.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/managing_content/index#Importing_Content_content-management">Importing Content</a> in <em>Managing content</em>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="performing-additional-configuration-on-server_satellite"><a class="anchor" href="#performing-additional-configuration-on-server_satellite"></a>6. Performing additional configuration on Satellite&#160;Server</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="configuring-satellite-server-as-insights-client"><a class="anchor" href="#configuring-satellite-server-as-insights-client"></a>6.1. Configuring Satellite&#160;Server as Red&#160;Hat Lightspeed client</h3>
<div class="paragraph">
<p>You can use Red&#160;Hat Lightspeed to diagnose systems and downtime related to security exploits, performance degradation, and stability failures.
You can use the dashboard to quickly identify key risks to stability, security, and performance.
You can sort by category, view details of the impact and resolution, and then determine what systems are affected.</p>
</div>
<div class="paragraph">
<p>Note that you do not require a Red&#160;Hat Lightspeed entitlement in your subscription manifest.</p>
</div>
<div class="paragraph">
<p>To maintain your Satellite&#160;Server, and improve your ability to monitor and diagnose problems you might have with Satellite, install the <code>insights-client</code> tool on Satellite&#160;Server and register Satellite&#160;Server with Red&#160;Hat Lightspeed.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Register Satellite&#160;Server with Red&#160;Hat Lightspeed:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer --register-with-insights</pre>
</div>
</div>
</li>
<li>
<p>Optional: You can change the default schedule for running <code>insights-client</code> by updating the system systemd settings and the <code>insights-client.timer</code> file on your Satellite&#160;Server.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>Check that the system is registered with Red&#160;Hat Lightspeed:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># insights-client --status</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Next steps</div>
<ul>
<li>
<p>If you want to unregister the system from Red&#160;Hat Lightspeed:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># insights-client --unregister</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://access.redhat.com/products/red-hat-insights/">Red Hat Insights</a></p>
</li>
<li>
<p><a href="https://docs.redhat.com/en/documentation/red_hat_insights/1-latest/html/client_configuration_guide_for_red_hat_insights/assembly-client-configuring-insights-client#proc-registering-system-insights_insights-cg-configuring-client">Registering your system with Red Hat Insights</a></p>
</li>
<li>
<p><a href="https://docs.redhat.com/en/documentation/red_hat_insights/1-latest/html/client_configuration_guide_for_red_hat_insights/assembly-client-changing-schedule">Changing the insights-client schedule</a></p>
</li>
<li>
<p><a href="https://docs.redhat.com/en/documentation/red_hat_insights/1-latest/html/client_configuration_guide_for_red_hat_insights/assembly-client-configuring-insights-client#proc-unregistering-system-insights_insights-cg-configuring-client">Unregistering your system with Red Hat Insights</a></p>
</li>
<li>
<p><a href="https://docs.redhat.com/en/documentation/red_hat_insights/1-latest/html/client_configuration_guide_for_red_hat_insights/assembly-client-configuring-insights-client">Configuring insights-client</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="installing-and-configuring-red-hat-lightspeed-in-satellite"><a class="anchor" href="#installing-and-configuring-red-hat-lightspeed-in-satellite"></a>6.2. Installing and configuring Red&#160;Hat Lightspeed in Satellite</h3>
<div class="paragraph">
<p>Red&#160;Hat Lightspeed in Satellite analyzes system health and configuration by applying predefined rules to a small set of local data, such as installed packages, running services, and configuration settings.
When you install Red&#160;Hat Lightspeed in Satellite locally, you can generate Red&#160;Hat Lightspeed recommendations without sending system data to Red&#160;Hat services.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>With Red&#160;Hat Lightspeed in Satellite enabled, you cannot use the hosted Red&#160;Hat Lightspeed services for hosts registered to your Satellite.
Enabling Red&#160;Hat Lightspeed in Satellite prevents you from using any Red&#160;Hat Hybrid Cloud Console services on hosts registered to Satellite.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="configuring-podman-to-use-an-http-proxy"><a class="anchor" href="#configuring-podman-to-use-an-http-proxy"></a>6.2.1. Configuring Podman to use an HTTP proxy</h4>
<div class="paragraph">
<p>If your Satellite&#160;Server connects to the internet through an HTTP proxy, configure Podman for connections through the same HTTP proxy.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Podman is installed.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/building_running_and_managing_containers/assembly_starting-with-containers_building-running-and-managing-containers#proc_getting-container-tools_assembly_starting-with-containers">Getting container tools</a> in <em>Red&#160;Hat Enterprise Linux&#160;9 Building, running, and managing containers</em>.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Edit the <code>/etc/containers/containers.conf</code> file to include the following directive:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-ini" data-lang="ini">[engine]
env = ["http_proxy=http://<em>http-proxy.example.com:port</em>", "https_proxy=https://<em>http-proxy.example.com:port</em>"]</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="installing-red-hat-lightspeed-in-satellite-on-a-connected-satellite-server"><a class="anchor" href="#installing-red-hat-lightspeed-in-satellite-on-a-connected-satellite-server"></a>6.2.2. Installing Red&#160;Hat Lightspeed in Satellite on a connected Satellite&#160;Server</h4>
<div class="paragraph">
<p>You can pull the Red&#160;Hat Lightspeed in Satellite from the Red&#160;Hat container registry if your Satellite&#160;Server has access to the registry.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure that the Satellite&#160;Server has access to the Red&#160;Hat container registry.</p>
</li>
<li>
<p>Ensure that Podman is installed.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/building_running_and_managing_containers/assembly_starting-with-containers_building-running-and-managing-containers#proc_getting-container-tools_assembly_starting-with-containers">Getting container tools</a> in <em>Red&#160;Hat Enterprise Linux&#160;9 Building, running, and managing containers</em>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in to the Red Hat registry by using Podman:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># podman login --authfile /etc/foreman/registry-auth.json registry.redhat.io</pre>
</div>
</div>
</li>
<li>
<p>Pull the container image:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ podman pull registry.redhat.io/satellite/iop-advisor-engine-rhel9:6.18</pre>
</div>
</div>
</li>
<li>
<p>Enable the plugin:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer --enable-iop</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="importing-the-project-client-name-repository_satellite"><a class="anchor" href="#importing-the-project-client-name-repository_satellite"></a>6.3. Importing the Red Hat Satellite Client 6 repository</h3>
<div class="paragraph">
<p>The Red Hat Satellite Client 6 repository provides client integration tools, such as <code>katello-host-tools</code> or <code>puppet-agent</code> packages, for hosts registered to Satellite.
You must enable the repository, synchronize the repository to your Satellite&#160;Server, and enable the repository on your hosts.</p>
</div>
<div class="sect3">
<h4 id="enabling-the-project-client-name-repository_satellite"><a class="anchor" href="#enabling-the-project-client-name-repository_satellite"></a>6.3.1. Enabling the Red Hat Satellite Client 6 repository</h4>
<div class="paragraph">
<p>Enable the Red Hat Satellite Client 6 repository for every major version of Red&#160;Hat Enterprise Linux that you intend to run on your hosts.
After enabling a Red Hat repository, Satellite creates a product for this repository automatically.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure that a subscription manifest has been imported to your organization.
For more information, see <a href="#Importing_a_Red_Hat_Subscription_Manifest_into_Server_satellite">Importing a Red&#160;Hat subscription manifest into Satellite&#160;Server</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Content</strong> &gt; <strong>Red Hat Repositories</strong>.</p>
</li>
<li>
<p>Ensure that the <strong>RPM</strong> repository type is selected.</p>
</li>
<li>
<p>In the search field, type <code>name = "Red Hat Satellite Client 6"</code> and press <strong>Enter</strong>.
Optionally, enable the <strong>Recommended Repositories</strong> filter to limit the results.</p>
</li>
<li>
<p>Click the name of the required repository to expand the repository set.</p>
</li>
<li>
<p>For the required architecture, click the <strong>+</strong> icon to enable the repository.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="synchronizing-the-project-client-name-repository_satellite"><a class="anchor" href="#synchronizing-the-project-client-name-repository_satellite"></a>6.3.2. Synchronizing the Red Hat Satellite Client 6 repository</h4>
<div class="paragraph">
<p>Synchronize the Red Hat Satellite Client 6 repository to import the content to your Satellite&#160;Server.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have enabled the Red Hat Satellite Client 6 repository.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Content</strong> &gt; <strong>Sync Status</strong>.</p>
</li>
<li>
<p>Click the arrow next to the required product to view available repositories.</p>
</li>
<li>
<p>Select the repositories you want to synchronize.</p>
</li>
<li>
<p>Click <strong>Synchronize Now</strong>.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>You can create a sync plan to update the content regularly.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/managing_content/index#Creating_a_Sync_Plan_content-management">Creating a sync plan</a> in <em>Managing content</em>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuring-pull-based-transport-for-remote-execution_satellite"><a class="anchor" href="#configuring-pull-based-transport-for-remote-execution_satellite"></a>6.4. Configuring pull-based transport for remote execution</h3>
<div class="paragraph">
<p>By default, remote execution uses push-based SSH as the transport mechanism for the Script provider.
If your infrastructure prohibits outgoing connections from Satellite&#160;Server to hosts, you can use remote execution with pull-based transport instead, because the host initiates the connection to Satellite&#160;Server.
The use of pull-based transport is not limited to those infrastructures.</p>
</div>
<div class="paragraph">
<p>The pull-based transport comprises <code>pull-mqtt</code> mode on Capsules in combination with a pull client running on hosts.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>pull-mqtt</code> mode works only with the Script provider.
Ansible and other providers will continue to use their default transport settings.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Enable the pull-based transport on your Satellite&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer --foreman-proxy-plugin-remote-execution-script-mode pull-mqtt</pre>
</div>
</div>
</li>
<li>
<p>Configure the firewall to allow the MQTT service on port 1883:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd --add-service=mqtt</pre>
</div>
</div>
</li>
<li>
<p>Make the changes persistent:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd --runtime-to-permanent</pre>
</div>
</div>
</li>
<li>
<p>In <code>pull-mqtt</code> mode, hosts subscribe for job notifications to either your Satellite&#160;Server or any Capsule&#160;Server through which they are registered.
Ensure that Satellite&#160;Server sends remote execution jobs to that same Satellite&#160;Server or Capsule&#160;Server:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Satellite web UI, navigate to <strong>Administer</strong> &gt; <strong>Settings</strong>.</p>
</li>
<li>
<p>On the <strong>Content</strong> tab, set the value of <strong>Prefer registered through Capsule for remote execution</strong> to <strong>Yes</strong>.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Next steps</div>
<ul>
<li>
<p>Configure your hosts for the pull-based transport.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/managing_hosts/index#transport-modes-for-remote-execution_managing-hosts">Transport modes for remote execution</a> in <em>Managing hosts</em>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="configuring-for-uefi-http-boot-provisioning-in-an-ipv6-network_satellite"><a class="anchor" href="#configuring-for-uefi-http-boot-provisioning-in-an-ipv6-network_satellite"></a>6.5. Configuring Satellite for UEFI HTTP boot provisioning in an IPv6 network</h3>
<div class="paragraph">
<p>Use this procedure to configure Satellite to provision hosts in an IPv6 network with UEFI HTTP Boot provisioning.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure that your clients can access DHCP and HTTP servers.</p>
</li>
<li>
<p>Ensure that the UDP ports 67 and 68 are accessible by clients so clients can send DHCP requests and receive DHCP offers.</p>
</li>
<li>
<p>Ensure that the TCP port 8000 is open for clients to download files and Kickstart templates from Satellite and Capsules.</p>
</li>
<li>
<p>Ensure that the host provisioning interface subnet has an HTTP Boot Capsule, and Templates Capsule set.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/provisioning_hosts/index#Adding_a_Subnet_to_Server_provisioning">Adding a Subnet to Satellite&#160;Server</a> in <em>Provisioning hosts</em>.</p>
</li>
<li>
<p>In the Satellite web UI, navigate to <strong>Administer</strong> &gt; <strong>Settings</strong> &gt; <strong>Provisioning</strong> and ensure that the <strong>Token duration</strong> setting is not set to <strong>0</strong>.
Satellite cannot identify clients that are booting from the network by a remote IPv6 address because of unmanaged DHCPv6 service, therefore provisioning tokens must be enabled.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>You must disable DHCP management in the installer or not use it.</p>
</li>
<li>
<p>For all IPv6 subnets created in Satellite, set the <strong>DHCP Capsule</strong> to blank.</p>
</li>
<li>
<p>Optional: If the host and the DHCP server are separated by a router, configure the DHCP relay agent and point to the DHCP server.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Configuring_Server_with_an_HTTP_Proxy_satellite"><a class="anchor" href="#Configuring_Server_with_an_HTTP_Proxy_satellite"></a>6.6. Configuring Satellite&#160;Server with an HTTP proxy</h3>
<div class="paragraph">
<p>Use the following procedures to configure Satellite with an HTTP proxy.</p>
</div>
<div class="sect3">
<h4 id="adding-a-default-http-proxy_satellite"><a class="anchor" href="#adding-a-default-http-proxy_satellite"></a>6.6.1. Adding a default HTTP proxy to Satellite</h4>
<div class="paragraph">
<p>If your network uses an HTTP Proxy, you can configure Satellite&#160;Server to use an HTTP proxy for requests to the Red&#160;Hat Content Delivery Network (CDN) or another content source.
Use the FQDN instead of the IP address where possible to avoid losing connectivity because of network changes.</p>
</div>
<div class="paragraph">
<p>The following procedure configures a proxy only for downloading content for Satellite.
To use the CLI instead of the Satellite web UI, see the <a href="#cli-adding-a-default-http-proxy_satellite">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>HTTP Proxies</strong>.</p>
</li>
<li>
<p>Click <strong>New HTTP Proxy</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter the name for the HTTP proxy.</p>
</li>
<li>
<p>In the <strong>Url</strong> field, enter the URL of the HTTP proxy in the following format: <code>https://http-proxy.example.com:8080</code>.</p>
</li>
<li>
<p>Optional: If authentication is required, in the <strong>Username</strong> field, enter the username to authenticate with.</p>
</li>
<li>
<p>Optional: If authentication is required, in the <strong>Password</strong> field, enter the password to authenticate with.</p>
</li>
<li>
<p>To test connection to the proxy, click <strong>Test Connection</strong>.</p>
</li>
<li>
<p>Select the <strong>Default content HTTP proxy</strong> option to set the new HTTP proxy as default for content synchronization.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
<div id="cli-adding-a-default-http-proxy_satellite" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Verify that the <code>http_proxy</code>, <code>https_proxy</code>, and <code>no_proxy</code> variables are not set:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># unset http_proxy https_proxy no_proxy</pre>
</div>
</div>
</li>
<li>
<p>Add an HTTP proxy entry to Satellite and set the HTTP proxy as default for content synchronization:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer http-proxy create \
--name=<em>My_HTTP_Proxy</em> \
--username=<em>My_HTTP_Proxy_User_Name</em> \
--password=<em>My_HTTP_Proxy_Password</em> \
--url http://<em>http-proxy.example.com</em>:8080 \
--content-default-http-proxy true</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="configuring-selinux-to-ensure-access-on-custom-ports_satellite"><a class="anchor" href="#configuring-selinux-to-ensure-access-on-custom-ports_satellite"></a>6.6.2. Configuring SELinux to ensure access to Satellite on custom ports</h4>
<div class="paragraph">
<p>SELinux ensures access of Red&#160;Hat Satellite and Subscription Manager only to specific ports.
In the case of the HTTP cache, the TCP ports are 8080, 8118, 8123, and 10001&#8202;&#8211;&#8202;10010.
If you use a port that does not have SELinux type <code>http_cache_port_t</code>, complete the following steps.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>On Satellite, to verify the ports that are permitted by SELinux for the HTTP cache, enter a command as follows:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># semanage port -l | grep http_cache
http_cache_port_t       tcp    8080, 8118, 8123, 10001-10010
<em>[output truncated]</em></pre>
</div>
</div>
</li>
<li>
<p>To configure SELinux to permit a port for the HTTP cache, for example 8088, enter a command as follows:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># semanage port -a -t http_cache_port_t -p tcp 8088</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="using-an-http-proxy-for-all-http-requests_satellite"><a class="anchor" href="#using-an-http-proxy-for-all-http-requests_satellite"></a>6.6.3. Using an HTTP proxy for all Satellite HTTP requests</h4>
<div class="paragraph">
<p>If your Satellite&#160;Server must remain behind a firewall that blocks HTTP and HTTPS, you can configure a proxy for communication with external systems, including compute resources.</p>
</div>
<div class="paragraph">
<p>Note that if you are using compute resources for provisioning, and you want to use a different HTTP proxy with the compute resources, the proxy that you set for all Satellite communication takes precedence over the proxies that you set for compute resources.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Administer</strong> &gt; <strong>Settings</strong>.</p>
</li>
<li>
<p>In the <strong>HTTP(S) proxy</strong> row, select the adjacent <strong>Value</strong> column and enter the proxy URL.</p>
</li>
<li>
<p>Click the tick icon to save your changes.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer settings set --name=http_proxy --value=<em>Proxy_URL</em></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="excluding-hosts-from-receiving-proxied-requests_satellite"><a class="anchor" href="#excluding-hosts-from-receiving-proxied-requests_satellite"></a>6.6.4. Excluding hosts from receiving proxied requests</h4>
<div class="paragraph">
<p>If you use an HTTP Proxy for all Satellite HTTP or HTTPS requests, you can prevent certain hosts from communicating through the proxy.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Administer</strong> &gt; <strong>Settings</strong>.</p>
</li>
<li>
<p>In the <strong>HTTP(S) proxy except hosts</strong> row, select the adjacent <strong>Value</strong> column and enter the names of one or more hosts that you want to exclude from proxy requests.</p>
</li>
<li>
<p>Click the tick icon to save your changes.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer settings set --name=http_proxy_except_list --value=[<em>hostname1.hostname2...</em>]</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="resetting-the-http-proxy_satellite"><a class="anchor" href="#resetting-the-http-proxy_satellite"></a>6.6.5. Resetting the HTTP proxy</h4>
<div class="paragraph">
<p>If you want to reset the current HTTP proxy setting, unset the <strong>Default HTTP Proxy</strong> setting.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Administer</strong> &gt; <strong>Settings</strong>, and click the <strong>Content</strong> tab.</p>
</li>
<li>
<p>Set the <strong>Default HTTP Proxy</strong> setting to <strong>no global default</strong>.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Set the <code>content_default_http_proxy</code> setting to an empty string:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer settings set --name=content_default_http_proxy --value=""</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="enabling-power-management-on-hosts_satellite"><a class="anchor" href="#enabling-power-management-on-hosts_satellite"></a>6.7. Enabling power management on hosts</h3>
<div class="paragraph">
<p>To perform power management tasks on hosts using the intelligent platform management interface (IPMI) or a similar protocol, you must enable the baseboard management controller (BMC) module on Satellite&#160;Server.</p>
</div>
<div class="paragraph">
<p>Red&#160;Hat Satellite supports the following BMC providers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>freeipmi</code></p>
</li>
<li>
<p><code>ipmitool</code></p>
</li>
<li>
<p><code>redfish</code></p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Your host has a network interface of the BMC type.
Satellite&#160;Server uses this NIC to pass credentials to the host.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Enable the BMC module and select the default provider:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer \
--foreman-proxy-bmc "true" \
--foreman-proxy-bmc-default-provider "<em>freeipmi</em>"</pre>
</div>
</div>
</li>
<li>
<p>In the Satellite web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Subnets</strong>.</p>
</li>
<li>
<p>Select the subnet of your host.</p>
</li>
<li>
<p>On the <strong>Capsules</strong> tab, select your Satellite&#160;Server as <strong>BMC Capsule</strong>.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Next steps</div>
<ul>
<li>
<p>Configure a BMC interface on your host.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/managing_hosts/index#configuring-a-baseboard-management-controller-interface">Configuring a baseboard management controller (BMC) interface</a> in <em>Managing hosts</em>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Configuring_Server_for_Outgoing_Emails_satellite"><a class="anchor" href="#Configuring_Server_for_Outgoing_Emails_satellite"></a>6.8. Configuring Satellite&#160;Server for outgoing emails</h3>
<div class="paragraph">
<p>To send email messages from Satellite&#160;Server, you can use either an SMTP server, or the <code>sendmail</code> command.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Some SMTP servers with anti-spam protection or grey-listing features are known to cause problems.
To setup outgoing email with such a service either install and configure a vanilla SMTP service on Satellite&#160;Server for relay or use the <code>sendmail</code> command instead.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Administer</strong> &gt; <strong>Settings</strong>.</p>
</li>
<li>
<p>Click the <strong>Email</strong> tab and set the configuration options to match your preferred delivery method.
The changes have an immediate effect.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>The following example shows the configuration options for using an SMTP server:</p>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Using an SMTP server as a delivery method</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Example value</th>
<th class="tableblock halign-left valign-top">Additional information</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delivery method</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP address</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>smtp.example.com</em></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP authentication</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">login</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP HELO/EHLO domain</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example.com</em></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>password</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use the login credentials for the SMTP server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">25</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP username</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>user@example.com</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use the login credentials for the SMTP server.</p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>The following example uses <strong>gmail.com</strong> as an SMTP server:</p>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Using gmail.com as an SMTP server</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Example value</th>
<th class="tableblock halign-left valign-top">Additional information</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delivery method</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP address</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">smtp.gmail.com</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP authentication</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">plain</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP HELO/EHLO domain</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">smtp.gmail.com</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP enable StartTLS auto</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>app password</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use the Google app password.
For more information, see <a href="https://support.google.com/mail/answer/185833">Sign in with app passwords</a> in <em>Google Help Center</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">587</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP username</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>user</em>@gmail.com</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use the Google account name.</p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>The following example uses the <code>sendmail</code> command as a delivery method:</p>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Using sendmail as a delivery method</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Example value</th>
<th class="tableblock halign-left valign-top">Additional information</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delivery method</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sendmail</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sendmail location</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/usr/sbin/sendmail</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">For security reasons, both Sendmail location and Sendmail argument settings are read-only and can be only set in <code>/etc/foreman/settings.yaml</code>.
Both settings currently cannot be set via <code>satellite-installer</code>.
For more information see the <strong>sendmail 1</strong> man page.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sendmail arguments</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-i</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</li>
<li>
<p>If you decide to send email using an SMTP server which uses TLS authentication, also perform one of the following steps:</p>
<div class="ulist">
<ul>
<li>
<p>Mark the CA certificate of the SMTP server as trusted.
To do so, execute the following commands on Satellite&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># cp mailca.crt /etc/pki/ca-trust/source/anchors/
# update-ca-trust extract</pre>
</div>
</div>
<div class="paragraph">
<p>Where <code><em>mailca.crt</em></code> is the CA certificate of the SMTP server.</p>
</div>
</li>
<li>
<p>Alternatively, in the Satellite web UI, set the <code>SMTP enable StartTLS auto</code> option to <code>No</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Test email</strong> to send a test message to the user&#8217;s email address to confirm the configuration is working.
If a message fails to send, the Satellite web UI displays an error.
See the log at <code>/var/log/foreman/production.log</code> for further details.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>For information on configuring email notifications for individual users or user groups, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/administering_red_hat_satellite/index#Configuring_Email_Notification_Preferences_admin">Configuring Email Notification Preferences</a> in <em>Administering Red&#160;Hat Satellite</em>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="configuring-project-to-manage-the-lifecycle-of-a-host-registered-to-a-freeipa-realm_satellite"><a class="anchor" href="#configuring-project-to-manage-the-lifecycle-of-a-host-registered-to-a-freeipa-realm_satellite"></a>6.9. Configuring Satellite to manage the lifecycle of a host registered to a Identity&#160;Management realm</h3>
<div class="paragraph">
<p>As well as providing access to Satellite&#160;Server, hosts provisioned with Satellite can also be integrated with Identity&#160;Management realms.
Red&#160;Hat Satellite has a realm feature that automatically manages the lifecycle of any system registered to a realm or domain provider.</p>
</div>
<div class="paragraph">
<p>Use this section to configure Satellite&#160;Server or Capsule&#160;Server for Identity&#160;Management realm support, then add hosts to the Identity&#160;Management realm group.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>A deployed realm or domain provider such as Identity&#160;Management.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">To install and configure Identity&#160;Management packages on Satellite&#160;Server or Capsule&#160;Server:</div>
<p>To use Identity&#160;Management for provisioned hosts, complete the following steps to install and configure Identity&#160;Management packages on Satellite&#160;Server or Capsule&#160;Server:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install the <code>ipa-client</code> package on Satellite&#160;Server or Capsule&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-maintain packages install ipa-client</pre>
</div>
</div>
</li>
<li>
<p>Configure the server as a Identity&#160;Management client:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ipa-client-install</pre>
</div>
</div>
</li>
<li>
<p>Create a realm proxy user, <code>realm-capsule</code>, and the relevant roles in Identity&#160;Management:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-prepare-realm admin realm-capsule</pre>
</div>
</div>
<div class="paragraph">
<p>Note the principal name that returns and your Identity&#160;Management server configuration details because you require them for the following procedure.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">To configure Satellite&#160;Server or Capsule&#160;Server for Identity&#160;Management realm support:</div>
<p>Complete the following procedure on Satellite and every Capsule that you want to use:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Copy the <code>/root/freeipa.keytab</code> file to any Capsule&#160;Server that you want to include in the same principal and realm:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># scp /root/freeipa.keytab root@<em>capsule.example.com</em>:/etc/foreman-proxy/freeipa.keytab</pre>
</div>
</div>
</li>
<li>
<p>On your Satellite&#160;Server, move the <code>/root/freeipa.keytab</code> file to the <code>/etc/foreman-proxy</code> directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mv /root/freeipa.keytab /etc/foreman-proxy</pre>
</div>
</div>
</li>
<li>
<p>On your Satellite&#160;Server and Capsule&#160;Servers, set ownership to the <code>foreman-proxy</code> user and group:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># chown foreman-proxy:foreman-proxy /etc/foreman-proxy/freeipa.keytab</pre>
</div>
</div>
</li>
<li>
<p>Enter the following command on all Capsules that you want to include in the realm.
If you use the integrated Capsule on Satellite, enter this command on Satellite&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer --foreman-proxy-realm true \
--foreman-proxy-realm-keytab /etc/foreman-proxy/freeipa.keytab \
--foreman-proxy-realm-principal <em>realm-capsule@EXAMPLE.COM</em> \
--foreman-proxy-realm-provider freeipa</pre>
</div>
</div>
<div class="paragraph">
<p>You can also use these options when you first configure the Satellite&#160;Server.</p>
</div>
</li>
<li>
<p>Ensure that the most updated versions of the ca-certificates package is installed and trust the Identity&#160;Management Certificate Authority:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># cp /etc/ipa/ca.crt /etc/pki/ca-trust/source/anchors/ipa.crt
# update-ca-trust extract</pre>
</div>
</div>
</li>
<li>
<p>Optional: If you configure Identity&#160;Management on an existing Satellite&#160;Server or Capsule&#160;Server, complete the following steps to ensure that the configuration changes take effect:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Restart the <strong>foreman-proxy</strong> service:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># systemctl restart foreman-proxy</pre>
</div>
</div>
</li>
<li>
<p>In the Satellite web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Capsules</strong>.</p>
</li>
<li>
<p>Locate the Capsule you have configured for Identity&#160;Management and from the list in the <strong>Actions</strong> column, select <strong>Refresh</strong>.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">To create a realm for the Identity&#160;Management-enabled Capsule</div>
<p>After you configure your Capsule with Identity&#160;Management, you must create a realm and add the Identity&#160;Management-configured Capsule to the realm.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Realms</strong> and click <strong>Create Realm</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for the realm.</p>
</li>
<li>
<p>From the <strong>Realm Type</strong> list, select the type of realm.</p>
</li>
<li>
<p>From the <strong>Realm Capsule</strong> list, select Capsule&#160;Server where you have configured Identity&#160;Management.</p>
</li>
<li>
<p>Click the <strong>Locations</strong> tab and from the <strong>Locations</strong> list, select the location where you want to add the new realm.</p>
</li>
<li>
<p>Click the <strong>Organizations</strong> tab and from the <strong>Organizations</strong> list, select the organization where you want to add the new realm.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Updating host groups with realm information</div>
<p>You must update any host groups that you want to use with the new realm information.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Satellite web UI, navigate to <strong>Configure</strong> &gt; <strong>Host Groups</strong>, select the host group that you want to update, and click the <strong>Network</strong> tab.</p>
</li>
<li>
<p>From the <strong>Realm</strong> list, select the realm you create as part of this procedure, and then click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Adding hosts to a Identity&#160;Management host group</div>
<p>Identity&#160;Management supports the ability to set up automatic membership rules based on a system&#8217;s attributes.
Red&#160;Hat Satellite&#8217;s realm feature provides administrators with the ability to map the Red&#160;Hat Satellite host groups to the Identity&#160;Management parameter <code>userclass</code> which allow administrators to configure automembership.</p>
</div>
<div class="paragraph">
<p>When nested host groups are used, they are sent to the Identity&#160;Management server as they are displayed in the Red&#160;Hat Satellite User Interface.
For example, "Parent/Child/Child".</p>
</div>
<div class="paragraph">
<p>Satellite&#160;Server or Capsule&#160;Server sends updates to the Identity&#160;Management server, however automembership rules are only applied at initial registration.</p>
</div>
<div class="olist arabic">
<div class="title">To add hosts to a Identity&#160;Management host group:</div>
<ol class="arabic">
<li>
<p>On the Identity&#160;Management server, create a host group:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ipa hostgroup-add <em>hostgroup_name</em> --desc=<em>hostgroup_description</em></pre>
</div>
</div>
</li>
<li>
<p>Create an <code>automembership</code> rule:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ipa automember-add --type=hostgroup <em>hostgroup_name</em> <em>automember_rule</em></pre>
</div>
</div>
<div class="paragraph">
<p>Where you can use the following options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>automember-add</code> flags the group as an automember group.</p>
</li>
<li>
<p><code>--type=hostgroup</code> identifies that the target group is a host group, not a user group.</p>
</li>
<li>
<p><code><em>automember_rule</em></code> adds the name you want to identify the automember rule by.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Define an automembership condition based on the <code>userclass</code> attribute:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ipa automember-add-condition --key=userclass --type=hostgroup --inclusive-regex=<em>^webserver</em> <em>hostgroup_name</em>
----------------------------------
Added condition(s) to "<em>hostgroup_name</em>"
----------------------------------
Automember Rule: <em>automember_rule</em>
Inclusive Regex: userclass=<em>^webserver</em>
----------------------------
Number of conditions added 1
----------------------------</pre>
</div>
</div>
<div class="paragraph">
<p>Where you can use the following options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>automember-add-condition</code> adds regular expression conditions to identify group members.</p>
</li>
<li>
<p><code>--key=userclass</code> specifies the key attribute as <code>userclass</code>.</p>
</li>
<li>
<p><code>--type=hostgroup</code> identifies that the target group is a host group, not a user group.</p>
</li>
<li>
<p><code>--inclusive-regex=</code> <em>^webserver</em> identifies matching values with a regular expression pattern.</p>
</li>
<li>
<p><em>hostgroup_name</em> &#8211; identifies the target host group&#8217;s name.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>When a system is added to Satellite&#160;Server&#8217;s <em>hostgroup_name</em> host group, it is added automatically to the Identity&#160;Management server&#8217;s "<em>hostgroup_name</em>" host group.
Identity&#160;Management host groups allow for Host-Based Access Controls (HBAC), sudo policies and other Identity&#160;Management functions.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuring-an-alternate-cname_satellite"><a class="anchor" href="#configuring-an-alternate-cname_satellite"></a>6.10. Configuring an alternate CNAME for Satellite</h3>
<div class="paragraph">
<p>You can configure an alternate CNAME for Satellite.
This might be useful if you want to deploy the Satellite web interface on a different domain name than the one that is used by client systems to connect to Satellite.
You must plan the alternate CNAME configuration in advance prior to installing Capsules and registering hosts to Satellite to avoid redeploying new certificates to hosts.</p>
</div>
<div class="sect3">
<h4 id="configuring-satellite-with-an-alternate-cname_satellite"><a class="anchor" href="#configuring-satellite-with-an-alternate-cname_satellite"></a>6.10.1. Configuring Satellite with an alternate CNAME</h4>
<div class="paragraph">
<p>Use this procedure to configure Satellite with an alternate CNAME.
Note that the procedures for users of a default Satellite certificate and custom certificate differ.</p>
</div>
<div class="ulist">
<div class="title">For default Satellite certificate users</div>
<ul>
<li>
<p>If you have installed Satellite with a default Satellite certificate and want to configure Satellite with an alternate CNAME, generate a new default Satellite SSL certificate with an additional CNAME on Satellite&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer --certs-cname <em>alternate_fqdn</em> --certs-update-server</pre>
</div>
</div>
</li>
<li>
<p>If you have not installed Satellite, you can add the <code>--certs-cname <em>alternate_fqdn</em></code> option to the <code>satellite-installer</code> command to install Satellite with an alternate CNAME.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">For custom certificate users</div>
<p>If you use Satellite with a custom certificate, when creating a custom certificate, include the alternate CNAME records to the custom certificate.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/installing_satellite_server_in_a_connected_network_environment/index#creating-a-custom-ssl-certificate_satellite">Creating a Custom SSL Certificate for Satellite&#160;Server</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="configuring-hosts-to-use-an-alternate-cname-for-content-management_satellite"><a class="anchor" href="#configuring-hosts-to-use-an-alternate-cname-for-content-management_satellite"></a>6.10.2. Configuring hosts to use an alternate Satellite CNAME for content management</h4>
<div class="paragraph">
<p>If Satellite is configured with an alternate CNAME, you can configure hosts to use the alternate Satellite CNAME for content management.
To do this, you must point hosts to the alternate Satellite CNAME prior to registering the hosts to Satellite.
You can do this using the bootstrap script or manually.</p>
</div>
<div class="paragraph">
<div class="title">Configuring hosts with the bootstrap script</div>
<p>On the host, run the bootstrap script with the <code>--server <em>My-Alternate-FQDN.example.com</em></code> option to register the host to the alternate Satellite CNAME:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ./bootstrap.py --server <em>My-Alternate-FQDN.example.com</em></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Configuring hosts manually</div>
<p>On the host, edit the <code>/etc/rhsm/rhsm.conf</code> file to update <code>hostname</code> and <code>baseurl</code> settings to point to the alternate host name, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-none" data-lang="none">[server]
# Server hostname:
hostname = <em>My-Alternate-FQDN.example.com</em>

<em>content omitted</em>

[rhsm]
# Content base URL:
baseurl=https://<em>My-Alternate-FQDN.example.com</em>/pulp/content/</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now you can register the host with the <code>subscription-manager</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuring-satellite-server-with-a-custom-ssl-certificate"><a class="anchor" href="#configuring-satellite-server-with-a-custom-ssl-certificate"></a>6.11. Configuring Satellite&#160;Server with a custom SSL certificate</h3>
<div class="paragraph">
<p>By default, Red&#160;Hat Satellite uses a self-signed SSL certificate to enable encrypted communications between Satellite&#160;Server, Capsule&#160;Servers, and all hosts.
If you cannot use a Satellite self-signed certificate, you can configure Satellite&#160;Server to use an SSL certificate signed by an external certificate authority (CA).</p>
</div>
<div class="paragraph">
<p>When you configure Red&#160;Hat Satellite with custom SSL certificates, you must fulfill the following requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You must use the privacy-enhanced mail (PEM) encoding for the SSL certificates.</p>
</li>
<li>
<p>You must not use the same SSL certificate for both Satellite&#160;Server and Capsule&#160;Server.</p>
</li>
<li>
<p>The same CA must sign certificates for Satellite&#160;Server and Capsule&#160;Server.</p>
</li>
<li>
<p>An SSL certificate must not also be a CA certificate.</p>
</li>
<li>
<p>An SSL certificate must include a subject alt name (SAN) entry that matches the common name (CN).</p>
</li>
<li>
<p>An SSL certificate must be allowed for Key Encipherment using a Key Usage extension.</p>
</li>
<li>
<p>An SSL certificate must not have a shortname as the CN.</p>
</li>
<li>
<p>You must not set a passphrase for the private key.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To configure your Satellite&#160;Server with a custom certificate, complete the following procedures:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#creating-a-custom-ssl-certificate_satellite">Creating a custom SSL certificate for Satellite&#160;Server</a></p>
</li>
<li>
<p><a href="#Deploying_a_Custom_SSL_Certificate_to_Server_satellite">Deploying a custom SSL certificate to Satellite&#160;Server</a></p>
</li>
<li>
<p><a href="#deploying-a-custom-ssl-certificate-to-hosts_satellite">Deploying a custom SSL certificate to hosts</a></p>
</li>
<li>
<p>If you have Capsule&#160;Servers registered to Satellite&#160;Server, configure them with custom SSL certificates.
For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/installing_capsule_server/index#configuring-capsule-custom-server-certificate_capsule">Configuring Capsule&#160;Server with a Custom SSL Certificate</a> in <em>Installing Capsule Server</em>.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="creating-a-custom-ssl-certificate_satellite"><a class="anchor" href="#creating-a-custom-ssl-certificate_satellite"></a>6.11.1. Creating a custom SSL certificate for Satellite&#160;Server</h4>
<div class="paragraph _abstract">
<p>Use this procedure to create a custom SSL certificate for Satellite&#160;Server.
If you already have a custom SSL certificate for Satellite&#160;Server, skip this procedure.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>To store all the source certificate files, create a directory that is accessible only to the <code>root</code> user:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir /root/satellite_cert</pre>
</div>
</div>
</li>
<li>
<p>Create a private key with which to sign the certificate signing request (CSR).</p>
<div class="paragraph">
<p>Note that the private key must be unencrypted.
If you use a password-protected private key, remove the private key password.</p>
</div>
<div class="paragraph">
<p>If you already have a private key for this Satellite&#160;Server, skip this step.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># openssl genrsa -out <code>/root/satellite_cert/satellite_cert_key.pem</code> 4096</pre>
</div>
</div>
</li>
<li>
<p>Create the <code>/root/satellite_cert/openssl.cnf</code> configuration file for the CSR and include the following content:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">[ req ]
req_extensions = v3_req
distinguished_name = req_distinguished_name
prompt = no

[ req_distinguished_name ]
commonName = <em>satellite.example.com</em>

[ v3_req ]
basicConstraints = CA:FALSE
keyUsage = digitalSignature, keyEncipherment
extendedKeyUsage = serverAuth, clientAuth
subjectAltName = @alt_names

[ alt_names ]
DNS.1 = <em>satellite.example.com</em></pre>
</div>
</div>
<div class="paragraph">
<p>For more information about the <code>[ v3_req ]</code> parameters and their purpose, see <a href="https://www.rfc-editor.org/rfc/rfc5280">RFC 5280: Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile</a>.</p>
</div>
</li>
<li>
<p>Optional: If you want to add Distinguished Name (DN) details to the CSR, add the following information to the <code>[ req_distinguished_name ]</code> section:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">[req_distinguished_name]
CN = <em>satellite.example.com</em>
countryName = <em>My_Country_Name</em>
stateOrProvinceName = <em>My_State_Or_Province_Name</em>
localityName = <em>My_Locality_Name</em>
organizationName = <em>My_Organization_Or_Company_Name</em>
organizationalUnitName = <em>My_Organizational_Unit_Name</em></pre>
</div>
</div>
<div class="paragraph">
<p>The options used in the configuration file include the following:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>countryName</code></dt>
<dd>
<p>The country represented by a two-letter code</p>
</dd>
<dt class="hdlist1"><code>stateOrProvinceName</code></dt>
<dd>
<p>Full name of the state or province</p>
</dd>
<dt class="hdlist1"><code>localityName</code></dt>
<dd>
<p>Full name of the locality (example: New York)</p>
</dd>
<dt class="hdlist1"><code>organizationalUnitName</code></dt>
<dd>
<p>Division responsible for the certificate (example: IT department)</p>
</dd>
</dl>
</div>
</li>
<li>
<p>Generate CSR:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># openssl req -new \
-key <em>/root/satellite_cert/satellite_cert_key.pem</em> \
-config <em>/root/satellite_cert/openssl.cnf</em> \
-out <em>/root/satellite_cert/satellite_cert_csr.pem</em></pre>
</div>
</div>
<div class="paragraph">
<p>The options used in the configuration file include the following:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>-key</code></dt>
<dd>
<p>Path to the private key</p>
</dd>
<dt class="hdlist1"><code>-config</code></dt>
<dd>
<p>Path to the configuration file</p>
</dd>
<dt class="hdlist1"><code>-out</code></dt>
<dd>
<p>Path to the CSR to generate</p>
</dd>
</dl>
</div>
</li>
<li>
<p>Send the certificate signing request to the certificate authority (CA).
The same CA must sign certificates for Satellite&#160;Server and Capsule&#160;Server.</p>
<div class="paragraph">
<p>When you submit the request, specify the lifespan of the certificate.
The method for sending the certificate request varies, so consult the CA for the preferred method.
In response to the request, you can expect to receive a CA bundle and a signed certificate, in separate files.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Deploying_a_Custom_SSL_Certificate_to_Server_satellite"><a class="anchor" href="#Deploying_a_Custom_SSL_Certificate_to_Server_satellite"></a>6.11.2. Deploying a custom SSL certificate to Satellite&#160;Server</h4>
<div class="paragraph">
<p>Use this procedure to configure your Satellite&#160;Server to use a custom SSL certificate signed by a Certificate Authority.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>Do not store the SSL certificates or .tar bundles in <code>/tmp</code> or <code>/var/tmp</code> directory.
The operating system removes files from these directories periodically.
As a result, <code>satellite-installer</code> fails to execute while enabling features or upgrading Satellite&#160;Server.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Update certificates on your Satellite&#160;Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer \
--certs-server-cert "<em>/root/satellite_cert/satellite_cert.pem</em>" \ <b class="conum">(1)</b>
--certs-server-key "<em>/root/satellite_cert/satellite_cert_key.pem</em>" \ <b class="conum">(2)</b>
--certs-server-ca-cert "<em>/root/satellite_cert/ca_cert_bundle.pem</em>" \ <b class="conum">(3)</b>
--certs-update-server --certs-update-server-ca</pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Path to Satellite&#160;Server certificate file that is signed by a Certificate Authority.</p>
</li>
<li>
<p>Path to the private key that was used to sign Satellite&#160;Server certificate.</p>
</li>
<li>
<p>Path to the Certificate Authority bundle.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Verification</div>
<ol class="arabic">
<li>
<p>On a computer with network access to Satellite&#160;Server, navigate to the following URL: <code>https://satellite.example.com</code>.</p>
</li>
<li>
<p>In your browser, view the certificate details to verify the deployed certificate.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="deploying-a-custom-ssl-certificate-to-hosts_satellite"><a class="anchor" href="#deploying-a-custom-ssl-certificate-to-hosts_satellite"></a>6.11.3. Deploying a custom SSL certificate to hosts</h4>
<div class="paragraph">
<p>After you configure Satellite to use a custom SSL certificate, you must deploy the certificate to hosts registered to Satellite.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Update the SSL certificate on each host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf install http://<em>satellite.example.com</em>/pub/katello-ca-consumer-latest.noarch.rpm</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resetting-custom-ssl-certificate-to-default-self-signed-certificate-on-satellite_satellite"><a class="anchor" href="#resetting-custom-ssl-certificate-to-default-self-signed-certificate-on-satellite_satellite"></a>6.12. Resetting custom SSL certificate to default self-signed certificate on Satellite&#160;Server</h3>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Reset the custom SSL certificate to default self-signed certificate:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># satellite-installer --certs-reset</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Verification</div>
<p>Verify that the following parameters in <code>/etc/foreman-installer/scenarios.d/satellite-answers.yaml</code> have no values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>server_cert:</p>
</li>
<li>
<p>server_key:</p>
</li>
<li>
<p>server_cert_req:</p>
</li>
<li>
<p>server_ca_cert:</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/installing_capsule_server/index#resetting-custom-ssl-certificate-to-default-self-signed-certificate-on-capsule_capsule">Resetting custom SSL certificate to default self-signed certificate on Capsule&#160;Server</a> in <em>Installing Capsule Server</em>.</p>
</li>
<li>
<p><a href="https://docs.redhat.com/en/documentation/red_hat_satellite/6.18/html-single/managing_hosts/index#resetting-custom-ssl-certificate-to-default-self-signed-certificate-on-hosts_managing-hosts">Resetting custom SSL certificate to default self-signed certificate on hosts</a> in <em>Managing hosts</em>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="restoring-manual-changes-overwritten-by-a-puppet-run_satellite"><a class="anchor" href="#restoring-manual-changes-overwritten-by-a-puppet-run_satellite"></a>Appendix A: Restoring manual changes overwritten by a Puppet run</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If your manual configuration has been overwritten by a Puppet run, you can restore the files to the previous state.</p>
</div>
<div class="paragraph">
<p>For example, when you install and configure Satellite for the first time by using <code>satellite-installer</code>, you can use the <code>--foreman-proxy-dns-managed false</code> and <code>--foreman-proxy-dhcp-managed false</code> options to specify that the DNS and DHCP configuration files are not to be managed by Puppet.
If you do not use these options during the initial <code>satellite-installer</code> run, rerunning <code>satellite-installer</code> overwrites all manual changes.
The following example shows you how to restore a DHCP configuration file overwritten by a Puppet run.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Copy the file you intend to restore.
This allows you to compare the files to check for any mandatory changes required by the upgrade.
This is not common for DNS or DHCP services.</p>
<div class="listingblock">
<div class="content">
<pre># cp /etc/dhcp/dhcpd.conf /etc/dhcp/dhcpd.backup</pre>
</div>
</div>
</li>
<li>
<p>Check the log files to note down the md5sum of the overwritten file.
For example:</p>
<div class="listingblock">
<div class="content">
<pre># journalctl -xe
...
/Stage[main]/Dhcp/File[/etc/dhcp/dhcpd.conf]: Filebucketed /etc/dhcp/dhcpd.conf to puppet with sum 622d9820b8e764ab124367c68f5fa3a1
...</pre>
</div>
</div>
</li>
<li>
<p>Restore the overwritten file:</p>
<div class="listingblock">
<div class="content">
<pre># puppet filebucket restore --local --bucket \
/var/lib/puppet/clientbucket /etc/dhcp/dhcpd.conf \ 622d9820b8e764ab124367c68f5fa3a1</pre>
</div>
</div>
</li>
<li>
<p>Compare the backup file and the restored file, and edit the restored file to include any mandatory changes required by the upgrade.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated Oct 2025
</div>
</div>
<script>
;(function () { /*! Asciidoctor Tabs | Copyright (c) 2018-present Dan Allen | MIT License */
  'use strict'

  var config = (document.currentScript || {}).dataset || {}
  var forEach = Array.prototype.forEach

  init(document.querySelectorAll('.tabs'))

  function init (tabsBlocks) {
    if (!tabsBlocks.length) return
    forEach.call(tabsBlocks, function (tabs) {
      var syncIds = tabs.classList.contains('is-sync') ? {} : undefined
      var tablist = tabs.querySelector('.tablist ul')
      tablist.setAttribute('role', 'tablist')
      var start
      forEach.call(tablist.querySelectorAll('li'), function (tab, idx) {
        tab.tabIndex = -1
        tab.setAttribute('role', tab.classList.add('tab') || 'tab')
        var id, anchor, syncId
        if (!(id = tab.id) && (anchor = tab.querySelector('a[id]'))) {
          id = tab.id = anchor.parentNode.removeChild(anchor).id
        }
        var panel = id && tabs.querySelector('.tabpanel[aria-labelledby~="' + id + '"]')
        if (!panel) return idx ? undefined : toggleSelected(tab, true) // invalid state
        syncIds && (((syncId = tab.textContent.trim()) in syncIds) ? (syncId = undefined) : true) &&
          (syncIds[(tab.dataset.syncId = syncId)] = tab)
        idx || (syncIds && (start = { tab: tab, panel: panel })) ? toggleHidden(panel, true) : toggleSelected(tab, true)
        tab.setAttribute('aria-controls', panel.id)
        panel.setAttribute('role', 'tabpanel')
        var onClick = syncId === undefined ? activateTab : activateTabSync
        tab.addEventListener('click', onClick.bind({ tabs: tabs, tab: tab, panel: panel }))
      })
      if (!tabs.closest('.tabpanel')) {
        forEach.call(tabs.querySelectorAll('.tabpanel table.tableblock'), function (table) {
          var container = Object.assign(document.createElement('div'), { className: 'tablecontainer' })
          table.parentNode.insertBefore(container, table).appendChild(table)
        })
      }
      if (start) {
        var syncGroupId
        for (var i = 0, lst = tabs.classList, len = lst.length, className; i !== len; i++) {
          if (!(className = lst.item(i)).startsWith('data-sync-group-id=')) continue
          tabs.dataset.syncGroupId = syncGroupId = lst.remove(className) || className.slice(19).replace(/\u00a0/g, ' ')
          break
        }
        if (syncGroupId === undefined) tabs.dataset.syncGroupId = syncGroupId = Object.keys(syncIds).sort().join('|')
        var preferredSyncId = 'syncStorageKey' in config &&
          window[(config.syncStorageScope || 'local') + 'Storage'].getItem(config.syncStorageKey + '-' + syncGroupId)
        var tab = preferredSyncId && syncIds[preferredSyncId]
        tab && Object.assign(start, { tab: tab, panel: document.getElementById(tab.getAttribute('aria-controls')) })
        toggleSelected(start.tab, true) || toggleHidden(start.panel, false)
      }
    })
    onHashChange()
    toggleClassOnEach(tabsBlocks, 'is-loading', 'remove')
    window.setTimeout(toggleClassOnEach.bind(null, tabsBlocks, 'is-loaded', 'add'), 0)
    window.addEventListener('hashchange', onHashChange)
  }

  function activateTab (e) {
    var tab = this.tab
    var tabs = this.tabs || (this.tabs = tab.closest('.tabs'))
    var panel = this.panel || (this.panel = document.getElementById(tab.getAttribute('aria-controls')))
    querySelectorWithSiblings(tabs, '.tablist .tab', 'tab').forEach(function (el) {
      toggleSelected(el, el === tab)
    })
    querySelectorWithSiblings(tabs, '.tabpanel', 'tabpanel').forEach(function (el) {
      toggleHidden(el, el !== panel)
    })
    if (!this.isSync && 'syncStorageKey' in config && 'syncGroupId' in tabs.dataset) {
      var storageKey = config.syncStorageKey + '-' + tabs.dataset.syncGroupId
      window[(config.syncStorageScope || 'local') + 'Storage'].setItem(storageKey, tab.dataset.syncId)
    }
    if (!e) return
    var loc = window.location
    var hashIdx = loc.hash ? loc.href.indexOf('#') : -1
    if (~hashIdx) window.history.replaceState(null, '', loc.href.slice(0, hashIdx))
    e.preventDefault()
  }

  function activateTabSync (e) {
    activateTab.call(this, e)
    var thisTabs = this.tabs
    var thisTab = this.tab
    var initialY = thisTabs.getBoundingClientRect().y
    forEach.call(document.querySelectorAll('.tabs'), function (tabs) {
      if (tabs === thisTabs || tabs.dataset.syncGroupId !== thisTabs.dataset.syncGroupId) return
      querySelectorWithSiblings(tabs, '.tablist .tab', 'tab').forEach(function (tab) {
        if (tab.dataset.syncId === thisTab.dataset.syncId) activateTab.call({ tabs: tabs, tab: tab, isSync: true })
      })
    })
    var shiftedBy = thisTabs.getBoundingClientRect().y - initialY
    if (shiftedBy && (shiftedBy = Math.round(shiftedBy))) window.scrollBy({ top: shiftedBy, behavior: 'instant' })
  }

  function querySelectorWithSiblings (scope, selector, siblingClass) {
    var el = scope.querySelector(selector)
    if (!el) return []
    var result = [el]
    while ((el = el.nextElementSibling) && el.classList.contains(siblingClass)) result.push(el)
    return result
  }

  function toggleClassOnEach (elements, className, method) {
    forEach.call(elements, function (el) {
      el.classList[method](className)
    })
  }

  function toggleHidden (el, state) {
    el.classList[(el.hidden = state) ? 'add' : 'remove']('is-hidden')
  }

  function toggleSelected (el, state) {
    el.setAttribute('aria-selected', '' + state)
    el.classList[state ? 'add' : 'remove']('is-selected')
    el.tabIndex = state ? 0 : -1
  }

  function onHashChange () {
    var id = window.location.hash.slice(1)
    if (!id) return
    var tab = document.getElementById(~id.indexOf('%') ? decodeURIComponent(id) : id)
    if (!(tab && tab.classList.contains('tab'))) return
    'syncId' in tab.dataset ? activateTabSync.call({ tab: tab }) : activateTab.call({ tab: tab })
  }
})()
</script>
</body>
</html>