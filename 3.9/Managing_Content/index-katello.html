<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>Managing content</title>
<style>
﻿*,::before,::after{box-sizing:border-box}html{font-size:100%;-webkit-text-size-adjust:100%}body{background:#fff;color:rgba(0,0,0,0.8);padding:0;margin:0;font-family:"Noto Serif", "DejaVu Serif", serif;font-size:inherit;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,p,blockquote,th,td{margin:0;padding:0}a{background:none;color:#2156a5;text-decoration:underline;line-height:inherit}a:active,a:hover{cursor:pointer;outline:0}a:focus{outline:thin dotted}a:hover,a:focus{color:#1d4b8f}abbr{font-size:0.9em}abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}b,strong{font-weight:bold;line-height:inherit}strong strong{font-weight:400}code,kbd,pre{font-family:"Droid Sans Mono", "DejaVu Sans Mono", monospace;font-size:1em}code{font-weight:400;color:rgba(0,0,0,0.9)}pre{color:rgba(0,0,0,0.9);line-height:1.45;text-rendering:optimizeSpeed;white-space:pre-wrap}dfn{font-style:italic}em,i{font-style:italic;line-height:inherit}em em{font-style:normal}hr{border:solid #dddddf;border-width:1px 0 0;clear:both;height:0;margin:1.25em 0 1.1875em}mark{background:#ff0;color:#000}p{line-height:1.6;margin-bottom:1.25rem;text-rendering:optimizeLegibility}q{quotes:"“" "”" "‘" "’"}small{font-size:60%;line-height:inherit}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-0.5em}sub{bottom:-0.25em}img,object[type^="image/"],svg{display:inline-block;height:auto;max-width:100%;vertical-align:middle}img{border:0;-ms-interpolation-mode:bicubic}object{max-width:100%}svg:not(:root){overflow:hidden}figure{margin:0}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}.left{float:left !important}.right{float:right !important}.text-left{text-align:left !important}.text-right{text-align:right !important}.text-center{text-align:center !important}.text-justify{text-align:justify !important}.hide{display:none}.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:0.25em}p aside{font-size:.875em;line-height:1.35;font-style:italic}h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans", "DejaVu Sans", sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.2;word-spacing:-0.05em}h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{color:#e99b8f;line-height:0}h1{font-size:2.125em}h2{font-size:1.6875em}h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}h4,h5{font-size:1.125em}h6{font-size:1em}ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}ul,ol{margin-left:1.5em}ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}ul.square{list-style-type:square}ul.circle{list-style-type:circle}ul.disc{list-style-type:disc}ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}dl dt{margin-bottom:.3125em;font-weight:bold}dl dd{margin-bottom:1.25em;margin-left:1.125em}blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,0.85)}@media screen and (min-width: 768px){h1{font-size:2.75em}h2{font-size:2.3125em}h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}h4{font-size:1.4375em}}table{background:#fff;border:1px solid #dedede;border-collapse:collapse;border-spacing:0;margin-bottom:1.25em;word-wrap:normal}table thead,table tfoot{background:#f7f8f7}table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,0.8);text-align:left}table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,0.8)}table tr.even,table tr.alt{background:#f8f8f7}table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}.center{margin-left:auto;margin-right:auto}.stretch{width:100%}.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:"";display:table}.clearfix::after,.float-group::after{clear:both}:not(pre).nobreak{word-wrap:normal}:not(pre).nowrap{white-space:nowrap}:not(pre).pre-wrap{white-space:pre-wrap}:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal !important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}pre>code{display:block}pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}.keyseq{color:rgba(51,51,51,0.8)}kbd{display:inline-block;color:rgba(0,0,0,0.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,0.2),inset 0 0 0 0.1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}.keyseq kbd:first-child{margin-left:0}.keyseq kbd:last-child{margin-right:0}.menuseq,.menuref{color:#000}.menuseq b:not(.caret),.menuref{font-weight:inherit}.menuseq{word-spacing:-0.02em}.menuseq b.caret{font-size:1.25em;line-height:0.8}.menuseq i.caret{font-weight:bold;text-align:center;width:0.45em}b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}b.button::before{content:"[";padding:0 3px 0 2px}b.button::after{content:"]";padding:0 2px 0 3px}p a>code:hover{color:rgba(0,0,0,0.9)}body>div[id]{margin:0 auto;max-width:62.5em;position:relative;padding-left:.9375em;padding-right:0.9375em}body>div[id]::before,body>div[id]::after,#content #footnotes::before{content:"";display:table;clear:both}#content{margin-top:1.25em;margin-bottom:0.625em}#content::before{content:none}#header>h1:first-child{color:rgba(0,0,0,0.85);margin-top:2.25rem;margin-bottom:0}#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,0.6);display:flex;flex-flow:row wrap}#header .details span:first-child{margin-left:-0.125em}#header .details span.email a{color:rgba(0,0,0,0.85)}#header .details br{display:none}#header .details br+span::before{content:" – "}#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,0.85)}#header .details br+span#revremark::before{content:" | "}#header #revnumber{text-transform:capitalize}#header #revnumber::after{content:" "}#content>h1:first-child:not([class]){color:rgba(0,0,0,0.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}#toc{border-bottom:1px solid #e7e7e9;padding-bottom:0.5em}#toc>ul{margin-left:0.125em}#toc ul.sectlevel0>li>a{font-style:italic}#toc ul.sectlevel0 ul.sectlevel1{margin:0.5em 0}#toc ul{font-family:"Open Sans", "DejaVu Sans", sans-serif;list-style-type:none}#toc li{line-height:1.3334;margin-top:0.3334em}#toc a{text-decoration:none}#toc a:active{text-decoration:underline}#toctitle{color:#7a2518;font-size:1.2em}@media screen and (min-width: 768px){#toctitle{font-size:1.375em}body.toc2{padding-left:15em;padding-right:0}#toc.toc2{margin-top:0 !important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0 !important;border-bottom-width:0 !important;z-index:1000;padding:1.25em 1em;height:calc(100% - (70px + 2.5em));overflow:auto}#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}#toc.toc2>ul{font-size:.9em;margin-bottom:0}#toc.toc2 ul ul{margin-left:0;padding-left:1em}#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:0.5em}body.toc2.toc-right{padding-left:0;padding-right:15em}body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}@media screen and (min-width: 1280px){body.toc2{padding-left:20em;padding-right:0}#toc.toc2{width:20em}#toc.toc2 #toctitle{font-size:1.375em}#toc.toc2>ul{font-size:0.95em}#toc.toc2 ul ul{padding-left:1.25em}body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}#content #toc>:first-child{margin-top:0}#content #toc>:last-child{margin-bottom:0}#footer{max-width:none;background:#025d8c;padding:1.25em;margin-left:2em}#footer-text{color:rgba(255,255,255,0.8);line-height:1.44}.sect1{padding-bottom:0.625em}@media screen and (min-width: 768px){#content{margin-bottom:1.25em}.sect1{padding-bottom:1.25em}}.sect1:last-child{padding-bottom:0}.sect1+.sect1{border-top:1px solid #e7e7e9}#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none !important;visibility:hidden;text-align:center;font-weight:400}#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:0.1em}#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}details{margin-left:1.25rem}details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}details>summary::-webkit-details-marker{display:none}details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif", "DejaVu Serif", serif;font-size:1rem;font-style:italic}table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,0.85)}.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}.admonitionblock>table td.icon{text-align:center;width:80px}.admonitionblock>table td.icon img{max-width:none}.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans", "DejaVu Sans", sans-serif;text-transform:uppercase}.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,0.6);word-wrap:anywhere}.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}.exampleblock>.content{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#fffef7;border-radius:4px;box-shadow:0 1px 4px #e0e0dc}.exampleblock>.content>:first-child{margin-top:0}.exampleblock>.content>:last-child{margin-bottom:0}.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}.sidebarblock>:first-child{margin-top:0}.sidebarblock>:last-child{margin-bottom:0}.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:0.8125em}@media screen and (min-width: 768px){.literalblock pre,.listingblock>.content>pre{font-size:0.90625em}}@media screen and (min-width: 1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,0.9)}.listingblock>.content{position:relative}.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:0.5}.listingblock:hover code[data-lang]::before{display:block}.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:0.5}.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}.listingblock pre.highlightjs{padding:0}.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}.listingblock pre.prettyprint{border-width:0}.prettyprint{background:#f7f7f8}pre.prettyprint .linenums{line-height:1.45;margin-left:2em}pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}pre.prettyprint li code[data-lang]::before{opacity:1}pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}table.linenotable td.code{padding-left:0.75em}table.linenotable td.linenos{width:0.01%}table.linenotable td.linenos,pre.pygments .linenos,pre.rouge .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}pre.pygments span.linenos,pre.rouge span.linenos{display:inline-block;margin-right:0.75em}.quoteblock{margin:0 1em 1.25em 1.5em;display:table}.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:0.75em}.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,0.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}.quoteblock blockquote{margin:0;padding:0;border:0}.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,0.1)}.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}.verseblock{margin:0 1em 1.25em}.verseblock pre{font-family:"Open Sans", "DejaVu Sans", sans-serif;font-size:1.15rem;color:rgba(0,0,0,0.85);font-weight:300;text-rendering:optimizeLegibility}.verseblock pre strong{font-weight:400}.verseblock .attribution{margin-top:1.25rem;margin-left:0.5ex}.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}.quoteblock .attribution br,.verseblock .attribution br{display:none}.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,0.6)}.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}.quoteblock.abstract{margin:0 1em 1.25em;display:block}.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:0.25em solid #dddddf}.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}p.tableblock:last-child{margin-bottom:0}td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}td.tableblock>.content>:last-child{margin-bottom:-1.25em}table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}table.grid-all>*>tr>*{border-width:1px}table.grid-cols>*>tr>*{border-width:0 1px}table.grid-rows>*>tr>*{border-width:1px 0}table.frame-all{border-width:1px}table.frame-ends{border-width:1px 0}table.frame-sides{border-width:0 1px}table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}th.halign-left,td.halign-left{text-align:left}th.halign-right,td.halign-right{text-align:right}th.halign-center,td.halign-center{text-align:center}th.valign-top,td.valign-top{vertical-align:top}th.valign-bottom,td.valign-bottom{vertical-align:bottom}th.valign-middle,td.valign-middle{vertical-align:middle}table thead th,table tfoot th{font-weight:bold}tbody tr th{background:#f7f8f7}tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,0.8);font-weight:bold}p.tableblock>code:only-child{background:none;padding:0}p.tableblock{font-size:1em}ol{margin-left:1.75em}ul li ol{margin-left:1.5em}dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:0.625em}ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:0.625em}ul.unstyled,ol.unstyled{margin-left:0}li>p:empty:only-child::before{content:"";display:inline-block}ul.checklist>li>p:first-child{margin-left:-1em}ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:0.125em}ul.checklist>li>p:first-child>input[type=checkbox]:first-child{font:inherit;margin:0 .25em 0 0;padding:0}ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 0.625em -1.25em}ul.inline>li{margin-left:1.25em}.unstyled dl dt{font-weight:400;font-style:normal}ol.arabic{list-style-type:decimal}ol.decimal{list-style-type:decimal-leading-zero}ol.loweralpha{list-style-type:lower-alpha}ol.upperalpha{list-style-type:upper-alpha}ol.lowerroman{list-style-type:lower-roman}ol.upperroman{list-style-type:upper-roman}ol.lowergreek{list-style-type:lower-greek}.hdlist>table,.colist>table{border:0;background:none}.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}td.hdlist1,td.hdlist2{vertical-align:top;padding:0 0.625em}td.hdlist1{font-weight:bold;padding-bottom:1.25em}td.hdlist2{word-wrap:anywhere}.literalblock+.colist,.listingblock+.colist{margin-top:-0.5em}.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}.colist td:not([class]):first-child img{max-width:none}.colist td:not([class]):last-child{padding:0.25em 0}.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}.imageblock.left{margin:0.25em 0.625em 1.25em 0}.imageblock.right{margin:0.25em 0 1.25em 0.625em}.imageblock>.title{margin-bottom:0}.imageblock.thumb,.imageblock.th{border-width:6px}.imageblock.thumb>.title,.imageblock.th>.title{padding:0 0.125em}.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}.image.left{margin-right:0.625em}.image.right{margin-left:0.625em}a.image{text-decoration:none;display:inline-block}a.image object{pointer-events:none}sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}sup.footnote a,sup.footnoteref a{text-decoration:none}sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:0.625em}#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:0.2em}#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}#footnotes .footnote:last-of-type{margin-bottom:0}#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:0.75em 0}div.page-break{display:none}div.unbreakable{page-break-inside:avoid}.big{font-size:larger}.small{font-size:smaller}.underline{text-decoration:underline}.overline{text-decoration:overline}.line-through{text-decoration:line-through}.aqua{color:#00bfbf}.aqua-background{background:#00fafa}.black{color:#000}.black-background{background:#000}.blue{color:#0000bf}.blue-background{background:#0000fa}.fuchsia{color:#bf00bf}.fuchsia-background{background:#fa00fa}.gray{color:#606060}.gray-background{background:#7d7d7d}.green{color:#006000}.green-background{background:#007d00}.lime{color:#00bf00}.lime-background{background:#00fa00}.maroon{color:#600000}.maroon-background{background:#7d0000}.navy{color:#000060}.navy-background{background:#00007d}.olive{color:#606000}.olive-background{background:#7d7d00}.purple{color:#600060}.purple-background{background:#7d007d}.red{color:#bf0000}.red-background{background:#fa0000}.silver{color:#909090}.silver-background{background:#bcbcbc}.teal{color:#006060}.teal-background{background:#007d7d}.white{color:#bfbfbf}.white-background{background:#fafafa}.yellow{color:#bfbf00}.yellow-background{background:#fafa00}span.icon>.fa{cursor:default}a span.icon>.fa{cursor:inherit}.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,0.5);cursor:default}.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,0.8);color:#111}.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}.conum[data-value]{display:inline-block;color:#fff !important;background:rgba(0,0,0,0.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans", "DejaVu Sans", sans-serif;font-style:normal;font-weight:bold}.conum[data-value] *{color:#fff !important}.conum[data-value]+b{display:none}.conum[data-value]::after{content:attr(data-value)}pre .conum[data-value]{position:relative;top:-0.125em}b.conum *{color:inherit !important}.conum:not([data-value]):empty{display:none}dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}h1,h2,p,td.content,span.alt,summary{letter-spacing:-0.01em}p strong,td.content strong,div.footnote strong{letter-spacing:-0.005em}p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}.print-only{display:none !important}@page{margin:1.25cm 0.75cm}@media print{*{box-shadow:none !important;text-shadow:none !important}html{font-size:80%}a{color:inherit !important;text-decoration:underline !important}a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none !important}a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:0.25em}abbr[title]{border-bottom:1px dotted}abbr[title]::after{content:" (" attr(title) ")"}pre,blockquote,tr,img,object,svg{page-break-inside:avoid}thead{display:table-header-group}p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}body>div[id]{max-width:none}#toc,.sidebarblock,.exampleblock>.content{background:none !important}#toc{border-bottom:1px solid #dddddf !important;padding-bottom:0 !important}body.book #header{text-align:center}body.book #header>h1:first-child{border:0 !important;margin:2.5em 0 1em}body.book #header .details{border:0 !important;display:block;padding:0 !important}body.book #header .details span:first-child{margin-left:0 !important}body.book #header .details br{display:block}body.book #header .details br+span::before{content:none !important}body.book #toc{border:0 !important;text-align:left !important;padding:0 !important;margin:0 !important}body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}.listingblock code[data-lang]::before{display:block}div.page-break{display:block;page-break-after:always}#footer{padding:0 0.9375em}.hide-on-print{display:none !important}.print-only{display:block !important}.hide-for-print{display:none !important}.show-for-print{display:inherit !important}}@media amzn-kf8, print{#header>h1:first-child{margin-top:1.25rem}.sect1{padding:0 !important}.sect1+.sect1{border:0}#footer{background:none}#footer-text{color:rgba(0,0,0,0.6);font-size:0.9em}}@media amzn-kf8{body>div[id]{padding:0}}body{padding:0;margin:0;margin-top:70px !important}.container{position:relative;z-index:1;padding-top:50px;min-height:100%}.container p{font-family:sans-serif;font-size:1.2em}nav{position:fixed;z-index:9999;left:0;right:0;top:0;height:70px;padding:0 1.5em;background-color:#025d8c;font-family:sans-serif;line-height:70px}nav .logo{width:50px;vertical-align:middle}nav .nav-menu{position:absolute;right:0.3em;top:0;padding:0;margin:0;list-style:none}nav .nav-item{display:inline-block}nav .nav-item>a{display:inline-block;padding:0 2.5em;line-height:70px;color:#fff;text-decoration:none}nav .dropdown{position:relative}nav .dropdown a::after{content:"";display:inline-block;margin-left:0.5em;vertical-align:middle;border-top:0.3em solid #fff;border-right:0.3em solid transparent;border-left:0.3em solid transparent}nav .dropdown.show a::after{transform:rotate(180deg)}nav .dropdown-menu{display:none;position:absolute;left:0;right:0;top:100%;padding:0.5em 0;margin-top:-0.5em;border:1px solid rgba(0,0,0,0.3);border-radius:0.5em;background-color:#fff;width:max-content}nav .dropdown-menu-left{left:auto;right:0}nav .dropdown.show .dropdown-menu{display:block}nav .dropdown-div{display:block;padding:0.4em 0;line-height:4em}nav .dropdown-div a::after{content:none;margin-left:0;border-top:0;border-right:0;border-left:0}nav .dropdown-item{display:block;padding:0 1.5em;font-size:0.875em;color:#000;line-height:1.6em;text-decoration:none}nav .btn-hamburger{display:none;position:absolute;right:1.5em;top:50%;background-color:transparent;border:0;cursor:pointer;outline:none;transform:translateY(-50%)}nav .btn-hamburger span{display:block;width:30px;height:4px;background-color:#fff;margin:6px;border-radius:2px;transition:0.3s ease-in-out}nav .btn-hamburger span:nth-child(4),nav .btn-hamburger span:nth-child(5){position:absolute;top:10px;opacity:0.5}nav .btn-hamburger span:nth-child(4){transform:rotate(45deg) scale(0)}nav .btn-hamburger span:nth-child(5){transform:rotate(-45deg) scale(0)}nav.opened .btn-hamburger span:nth-child(4){opacity:1;transform:rotate(45deg) scale(1)}nav.opened .btn-hamburger span:nth-child(5){opacity:1;transform:rotate(-45deg) scale(1)}nav.opened .btn-hamburger span:nth-child(1),nav.opened .btn-hamburger span:nth-child(2),nav.opened .btn-hamburger span:nth-child(3){opacity:0}@media screen and (max-width: 768px){nav .nav-menu{position:fixed;left:0;right:0;top:70px;bottom:100%;display:flex;flex-direction:column;justify-content:start;background-color:#363d4e;transition:bottom 0.5s ease-in-out;overflow:hidden}nav.opened .nav-menu{bottom:0}nav .nav-item>a{display:block}nav .dropdown-menu{position:relative;top:0;margin:0 1.5em}nav .btn-hamburger{display:block}}/*!
* "Fork me on GitHub" CSS ribbon v0.2.3 | MIT License
* https://github.com/simonwhitaker/github-fork-ribbon-css

The MIT License (MIT)

Copyright (c) 2013 Simon Whitaker

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/.github-fork-ribbon,.release-ribbon,.issue-ribbon{width:12.1em;height:12.1em;position:absolute;overflow:hidden;top:70px;right:0;z-index:9998;pointer-events:none;font-size:13px;text-decoration:none;text-indent:-999999px}.github-fork-ribbon.fixed,.fixed.release-ribbon,.fixed.issue-ribbon{position:fixed}.github-fork-ribbon:hover,.release-ribbon:hover,.issue-ribbon:hover,.github-fork-ribbon:active,.release-ribbon:active,.issue-ribbon:active{background-color:transparent}.github-fork-ribbon:before,.release-ribbon:before,.issue-ribbon:before,.github-fork-ribbon:after,.release-ribbon:after,.issue-ribbon:after{position:absolute;display:block;width:15.38em;height:1.54em;top:3.23em;right:-3.23em;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.github-fork-ribbon:before,.release-ribbon:before,.issue-ribbon:before{content:"";padding:.38em 0;background-color:#a00;background-image:-webkit-gradient(linear, left top, left bottom, from(transparent), to(rgba(0,0,0,0.15)));background-image:-webkit-linear-gradient(top, transparent, rgba(0,0,0,0.15));background-image:-moz-linear-gradient(top, transparent, rgba(0,0,0,0.15));background-image:-ms-linear-gradient(top, transparent, rgba(0,0,0,0.15));background-image:-o-linear-gradient(top, transparent, rgba(0,0,0,0.15));background-image:linear-gradient(to bottom, transparent, rgba(0,0,0,0.15));-webkit-box-shadow:0 0.15em 0.23em 0 rgba(0,0,0,0.5);-moz-box-shadow:0 0.15em 0.23em 0 rgba(0,0,0,0.5);box-shadow:0 0.15em 0.23em 0 rgba(0,0,0,0.5);pointer-events:auto}.github-fork-ribbon:after,.release-ribbon:after,.issue-ribbon:after{content:attr(data-ribbon);color:#fff;font:700 1em "Helvetica Neue", Helvetica, Arial, sans-serif;line-height:1.54em;text-decoration:none;text-shadow:0 -0.08em rgba(0,0,0,0.5);text-align:center;text-indent:0;padding:.15em 0;margin:.15em 0;border-width:.08em 0;border-style:dotted;border-color:#fff;border-color:rgba(255,255,255,0.7)}.github-fork-ribbon.left-top,.left-top.release-ribbon,.left-top.issue-ribbon,.github-fork-ribbon.left-bottom,.left-bottom.release-ribbon,.left-bottom.issue-ribbon{right:auto;left:0}.github-fork-ribbon.left-bottom,.left-bottom.release-ribbon,.left-bottom.issue-ribbon,.github-fork-ribbon.right-bottom,.right-bottom.release-ribbon,.right-bottom.issue-ribbon{top:auto;bottom:0}.github-fork-ribbon.left-top:before,.left-top.release-ribbon:before,.left-top.issue-ribbon:before,.github-fork-ribbon.left-top:after,.left-top.release-ribbon:after,.left-top.issue-ribbon:after,.github-fork-ribbon.left-bottom:before,.left-bottom.release-ribbon:before,.left-bottom.issue-ribbon:before,.github-fork-ribbon.left-bottom:after,.left-bottom.release-ribbon:after,.left-bottom.issue-ribbon:after{right:auto;left:-3.23em}.github-fork-ribbon.left-bottom:before,.left-bottom.release-ribbon:before,.left-bottom.issue-ribbon:before,.github-fork-ribbon.left-bottom:after,.left-bottom.release-ribbon:after,.left-bottom.issue-ribbon:after,.github-fork-ribbon.right-bottom:before,.right-bottom.release-ribbon:before,.right-bottom.issue-ribbon:before,.github-fork-ribbon.right-bottom:after,.right-bottom.release-ribbon:after,.right-bottom.issue-ribbon:after{top:auto;bottom:3.23em}.github-fork-ribbon.left-top:before,.left-top.release-ribbon:before,.left-top.issue-ribbon:before,.github-fork-ribbon.left-top:after,.left-top.release-ribbon:after,.left-top.issue-ribbon:after,.github-fork-ribbon.right-bottom:before,.right-bottom.release-ribbon:before,.right-bottom.issue-ribbon:before,.github-fork-ribbon.right-bottom:after,.right-bottom.release-ribbon:after,.right-bottom.issue-ribbon:after{-webkit-transform:rotate(-45deg);-moz-transform:rotate(-45deg);-ms-transform:rotate(-45deg);-o-transform:rotate(-45deg);transform:rotate(-45deg)}.release-ribbon:before{background-color:#a00}.issue-ribbon:before{background-color:#025d8c}@media screen{div.narrow{max-width:1080px;margin:0 auto !important;margin-top:70px auto !important;float:none !important}#toc.toc2{margin-top:70px !important}}

</style>
<!-- docinfo -->
</head>
<body class="book toc2 toc-left">
    <div id="wrap">
      <script src="/js/versions.js"></script>
      <script src="/js/nav.js"></script>
      <script>
        document.open();
        document.write(buildNavigation());
        addNavbarListeners();
        document.close();
      </script>
    </div>
<div id="header">
<h1>Managing content</h1>
<div class="details">
<span id="revnumber">version 3.9 (unsupported),</span>
<span id="revdate">published Oct 10 2025</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#Introduction_to_Content_Management_content-management">1. Introduction to content management</a>
<ul class="sectlevel2">
<li><a href="#Content_Types_in_Foreman_content-management">1.1. Content types in Foreman</a></li>
</ul>
</li>
<li><a href="#Basic_Content_Management_Workflow_content-management">2. Basic content management workflow</a>
<ul class="sectlevel2">
<li><a href="#Creating_Repositories_to_Synchronize_content-management">2.1. Creating repositories to synchronize</a></li>
<li><a href="#Synchronizing_Content_from_an_Upstream_Repository_content-management">2.2. Synchronizing content from an upstream repository</a></li>
<li><a href="#Creating_an_Activation_Key_short_content-management">2.3. Creating an activation key</a></li>
<li><a href="#Registering_a_CentOS_Stream_Host_content-management">2.4. Registering a CentOS Stream host to Foreman</a></li>
<li><a href="#Using_Content_Views_content-management">2.5. Using content views</a></li>
<li><a href="#Creating_a_Content_View_short_content-management">2.6. Creating a content view</a></li>
<li><a href="#Adding_Repositories_content-management">2.7. Adding repositories</a></li>
<li><a href="#Publishing_the_Content_View_content-management">2.8. Publishing the content view</a></li>
<li><a href="#Creating_an_Activation_Key_to_Consume_the_Content_View_content-management">2.9. Creating an activation key to consume the content view</a></li>
<li><a href="#Registering_a_CentOS_Stream_host_to_consume_content_from_a_published_content_view_content-management">2.10. Registering a CentOS Stream host to consume content from a published content view</a></li>
<li><a href="#Managing_the_Lifecycle_of_the_Content_View_content-management">2.11. Managing the lifecycle of the content view</a></li>
<li><a href="#Promoting_your_Content_View_to_the_New_Lifecycle_Environment_content-management">2.12. Promoting your content view to the new lifecycle environment</a></li>
<li><a href="#Registering_a_CentOS_Stream_host_to_consume_content_from_a_promoted_Content_View_in_the_production_environment_content-management">2.13. Registering a CentOS Stream host to consume content from a promoted content view in the production environment</a></li>
</ul>
</li>
<li><a href="#Managing_Red_Hat_Subscriptions_content-management">3. Managing Red Hat subscriptions</a>
<ul class="sectlevel2">
<li><a href="#Importing_a_Red_Hat_Subscription_Manifest_into_Server_content-management">3.1. Importing a Red&#160;Hat subscription manifest into Foreman&#160;server</a></li>
<li><a href="#Locating_a_Red_Hat_Subscription_content-management">3.2. Locating a Red Hat subscription</a></li>
<li><a href="#Adding_Red_Hat_Subscriptions_to_Subscription_Allocations_content-management">3.3. Adding Red Hat subscriptions to subscription allocations</a></li>
<li><a href="#Removing_Red_Hat_Subscriptions_from_Subscription_Allocations_content-management">3.4. Removing Red Hat subscriptions from subscription allocations</a></li>
<li><a href="#Updating_and_Refreshing_Red_Hat_Subscription_Manifests_content-management">3.5. Updating and refreshing Red Hat subscription manifests</a></li>
<li><a href="#Attaching_Red_Hat_Subscriptions_to_Content_Hosts_content-management">3.6. Attaching Red Hat subscriptions to content hosts</a></li>
<li><a href="#Updating_Red_Hat_Subscriptions_on_Multiple_Hosts_content-management">3.7. Updating Red Hat subscriptions on multiple hosts</a></li>
<li><a href="#Content_Delivery_Network_Structure_content-management">3.8. Content Delivery Network structure</a></li>
</ul>
</li>
<li><a href="#Managing_Alternate_Content_Sources_content-management">4. Managing alternate content sources</a>
<ul class="sectlevel2">
<li><a href="#Configuring_Custom_Alternate_Content_Sources_content-management">4.1. Configuring custom alternate content sources</a></li>
<li><a href="#Configuring_Simplified_Alternate_Content_Sources_content-management">4.2. Configuring simplified alternate content sources</a></li>
<li><a href="#Configuring_RHUI_Alternate_Content_Sources_content-management">4.3. Configuring RHUI alternate content sources</a></li>
</ul>
</li>
<li><a href="#Importing_Content_content-management">5. Importing content</a>
<ul class="sectlevel2">
<li><a href="#Products_and_Repositories_content-management">5.1. Products and repositories in Foreman</a></li>
<li><a href="#best-practices-for-products-and-repositories_content-management">5.2. Best practices for products and repositories</a></li>
<li><a href="#Importing_Custom_SSL_Certificates_content-management">5.3. Importing SSL certificates</a></li>
<li><a href="#Creating_a_Custom_Product_content-management">5.4. Creating a product</a></li>
<li><a href="#Adding_Custom_RPM_Repositories_content-management">5.5. Adding RPM repositories</a></li>
<li><a href="#Adding_Custom_RPM_Repositories_for_AlmaLinux_9_content-management">5.6. Adding RPM repositories for AlmaLinux 9</a></li>
<li><a href="#Adding_Custom_RPM_Repositories_for_AlmaLinux_8_content-management">5.7. Adding RPM repositories for AlmaLinux 8</a></li>
<li><a href="#Adding_Custom_RPM_Repositories_for_CentOS_Stream_9_content-management">5.8. Adding RPM repositories for CentOS Stream 9</a></li>
<li><a href="#Adding_Custom_RPM_Repositories_for_Oracle_Linux_9_content-management">5.9. Adding RPM repositories for Oracle Linux 9</a></li>
<li><a href="#Adding_Custom_RPM_Repositories_for_Oracle_Linux_8_content-management">5.10. Adding RPM repositories for Oracle Linux 8</a></li>
<li><a href="#Adding_Custom_RPM_Repositories_for_Rocky_Linux_9_content-management">5.11. Adding RPM repositories for Rocky Linux 9</a></li>
<li><a href="#Adding_Custom_RPM_Repositories_for_Rocky_Linux_8_content-management">5.12. Adding RPM repositories for Rocky Linux 8</a></li>
<li><a href="#Extracting_GPG_Public_Key_Fingerprints_from_Release_Files_content-management">5.13. Extracting GPG public key fingerprints from Release files</a></li>
<li><a href="#Adding_Custom_Deb_Repositories_content-management">5.14. Adding Deb repositories</a></li>
<li><a href="#adding-upstream-repositories-for-Debian-12_content-management">5.15. Adding upstream repositories for Debian 12</a></li>
<li><a href="#adding-upstream-repositories-for-Debian-11_content-management">5.16. Adding upstream repositories for Debian 11</a></li>
<li><a href="#adding-upstream-repositories-for-Ubuntu-24-04_content-management">5.17. Adding upstream repositories for Ubuntu 24.04</a></li>
<li><a href="#adding-upstream-repositories-for-Ubuntu-22-04_content-management">5.18. Adding upstream repositories for Ubuntu 22.04</a></li>
<li><a href="#Synchronizing-Ubuntu-Expanded-Security-Maintenance-content_content-management">5.19. Synchronizing Ubuntu Expanded Security Maintenance content</a></li>
<li><a href="#Changing_the_Repository_Sets_Status_for-a-Host-in_foreman_content-management">5.20. Changing the repository sets status for a host in Foreman</a></li>
<li><a href="#Enabling_Red_Hat_Repositories_content-management">5.21. Enabling Red&#160;Hat repositories</a></li>
<li><a href="#Synchronizing_Repositories_content-management">5.22. Synchronizing repositories</a></li>
<li><a href="#Synchronizing_All_Repositories_in_an_Organization_content-management">5.23. Synchronizing all repositories in an organization</a></li>
<li><a href="#Download_Policies_Overview_content-management">5.24. Download policies overview</a></li>
<li><a href="#Changing_the_Default_Download_Policy">5.25. Changing the default download policy</a></li>
<li><a href="#changing_the_download_policy_for_a_repository_content-management">5.26. Changing the download policy for a repository</a></li>
<li><a href="#Mirroring_Policies_Overview_content-management">5.27. Mirroring policies overview</a></li>
<li><a href="#Changing_the_Mirroring_Policy_for_a_Repository_content-management">5.28. Changing the mirroring policy for a repository</a></li>
<li><a href="#Uploading_Content_to_custom_rpm_Repositories_content-management">5.29. Uploading content to RPM repositories</a></li>
<li><a href="#Refreshing_Content_Counts_on_Smart_Proxy_content-management">5.30. Refreshing content counts on Smart&#160;Proxy</a></li>
<li><a href="#configuring-selinux-to-permit-content-synchronization-on-custom-ports_content-management">5.31. Configuring SELinux to permit content synchronization on custom ports</a></li>
<li><a href="#Recovering_a_Corrupted_Repository_content-management">5.32. Recovering a corrupted repository</a></li>
<li><a href="#Republishing_Repository_Metadata_content-management">5.33. Republishing repository metadata</a></li>
<li><a href="#Republishing_Content_View_Metadata_content-management">5.34. Republishing content view metadata</a></li>
<li><a href="#Adding_an_HTTP_Proxy_content-management">5.35. Adding an HTTP proxy</a></li>
<li><a href="#Changing_the_HTTP_Proxy_Policy_for_a_Product_content-management">5.36. Changing the HTTP proxy policy for a product</a></li>
<li><a href="#Changing_the_HTTP_Proxy_Policy_for_a_Repository_content-management">5.37. Changing the HTTP proxy policy for a repository</a></li>
<li><a href="#Creating_a_Sync_Plan_content-management">5.38. Creating a sync plan</a></li>
<li><a href="#Assigning_a_Sync_Plan_to_a_Product_content-management">5.39. Assigning a sync plan to a product</a></li>
<li><a href="#Assigning_a_Sync_Plan_to_Multiple_Products_content-management">5.40. Assigning a sync plan to multiple products</a></li>
<li><a href="#best-practices-for-sync-plans_content-management">5.41. Best practices for sync plans</a></li>
<li><a href="#Limiting_Synchronization_Concurrency_content-management">5.42. Limiting synchronization concurrency</a></li>
<li><a href="#Importing_a_Custom_GPG_Key_content-management">5.43. Importing a GPG key</a></li>
<li><a href="#Restricting_a_Repository_to_a_Specific_OS_Version_or_Architecture_in_Project_content-management">5.44. Restricting a repository to a specific operating system or architecture in Foreman</a></li>
</ul>
</li>
<li><a href="#Restricting_Hosts_Access_to_Content_content-management">6. Restricting hosts' access to content</a></li>
<li><a href="#Managing_Application_Lifecycles_content-management">7. Managing application lifecycles</a>
<ul class="sectlevel2">
<li><a href="#introduction_to_application_lifecycle_content-management">7.1. Introduction to application lifecycle</a></li>
<li><a href="#Content_Promotion_across_the_Application_Lifecycle_content-management">7.2. Content promotion across the application lifecycle</a></li>
<li><a href="#best-practices-for-lifecycle-environments_content-management">7.3. Best practices for lifecycle environments</a></li>
<li><a href="#Creating_a_Lifecycle_Environment_Path_content-management">7.4. Creating a lifecycle environment path</a></li>
<li><a href="#Adding_Lifecycle_Environments_content-management">7.5. Adding lifecycle environments to Smart&#160;Proxy&#160;servers</a></li>
<li><a href="#Removing_Lifecycle_Environments_from_Server_content-management">7.6. Removing lifecycle environments from Foreman&#160;server</a></li>
<li><a href="#Removing_Lifecycle_Environments_from_Smart_Proxy_content-management">7.7. Removing lifecycle environments from Smart&#160;Proxy&#160;server</a></li>
</ul>
</li>
<li><a href="#Managing_Content_Views_content-management">8. Managing content views</a>
<ul class="sectlevel2">
<li><a href="#Content-Views-in-Foreman_content-management">8.1. Content views in Foreman</a></li>
<li><a href="#best-practices-for-content-views_content-management">8.2. Best practices for content views</a></li>
<li><a href="#best-practices-for-patching-content-hosts_content-management">8.3. Best practices for patching content hosts</a></li>
<li><a href="#Creating_a_Content_View_content-management">8.4. Creating a content view</a></li>
<li><a href="#Copying_a_Content_View_content-management">8.5. Copying a content view</a></li>
<li><a href="#Viewing_Module_Streams_content-management">8.6. Viewing module streams</a></li>
<li><a href="#Promoting_a_Content_View_content-management">8.7. Promoting a content view</a></li>
<li><a href="#Composite_Content_Views_Overview_content-management">8.8. Composite content views overview</a></li>
<li><a href="#Creating_a_Composite_Content_View_content-management">8.9. Creating a composite content view</a></li>
<li><a href="#Content_Filter_Overview_content-management">8.10. Content filter overview</a></li>
<li><a href="#Resolving_Package_Dependencies_content-management">8.11. Resolving package dependencies</a></li>
<li><a href="#enabling-dependency-solving-for-a-content-view_content-management">8.12. Enabling dependency solving for a content view</a></li>
<li><a href="#Content_Filter_Examples_content-management">8.13. Content filter examples</a></li>
<li><a href="#Creating_a_Content_Filter_for_Yum_Content_content-management">8.14. Creating a content filter for Yum content</a></li>
<li><a href="#Creating_a_Content_Filter_for_Deb_Content_content-management">8.15. Creating a content filter for Deb content</a></li>
<li><a href="#Deleting_Multiple_Content_View_Versions_content-management">8.16. Deleting multiple content view versions</a></li>
<li><a href="#Clearing_the_Search_Filter_content-management">8.17. Clearing the search filter</a></li>
<li><a href="#Standardizing_Content_View_Empty_States_content-management">8.18. Standardizing content view empty states</a></li>
<li><a href="#Comparing_Content_View_Versions_content-management">8.19. Comparing content view versions</a></li>
<li><a href="#Distributing_Archived_Content_View_Versions_content-management">8.20. Distributing archived content view versions</a></li>
</ul>
</li>
<li><a href="#Synchronizing_Content_Between_Servers_content-management">9. Synchronizing content between Foreman&#160;Servers</a>
<ul class="sectlevel2">
<li><a href="#content-synchronization-by-using-export-and-import_content-management">9.1. Content synchronization by using export and import</a></li>
<li><a href="#Synchronizing_a_Custom_Repository_content-management">9.2. Synchronizing a custom repository</a></li>
<li><a href="#Exporting_the_Library_Environment_content-management">9.3. Exporting the Library environment</a></li>
<li><a href="#Exporting_the_Library_Environment_in_a_Syncable_Format_content-management">9.4. Exporting the library environment in a syncable format</a></li>
<li><a href="#Importing_Syncable_Exports_content-management">9.5. Importing syncable exports</a></li>
<li><a href="#exporting-the-library-environment-incrementally_content-management">9.6. Exporting the Library environment incrementally</a></li>
<li><a href="#Exporting_a_Content_View_Version_content-management">9.7. Exporting a content view version</a></li>
<li><a href="#Exporting_a_Content_View_Version_in_a_Syncable_Format_content-management">9.8. Exporting a content view version in a syncable format</a></li>
<li><a href="#Exporting_a_Content_View_Version_Incrementally_content-management">9.9. Exporting a content view version incrementally</a></li>
<li><a href="#Exporting_a_Repository_content-management">9.10. Exporting a repository</a></li>
<li><a href="#Exporting_a_Repository_in_a_Syncable_Format_content-management">9.11. Exporting a repository in a syncable format</a></li>
<li><a href="#Exporting_Repository_Incrementally_content-management">9.12. Exporting a repository incrementally</a></li>
<li><a href="#Exporting_a_Repository_Incrementally_in_a_Syncable_Format_content-management">9.13. Exporting a repository incrementally in a syncable format</a></li>
<li><a href="#Keeping_Track_of_Your_Exports_content-management">9.14. Keeping track of your exports</a></li>
<li><a href="#Importing_into_the_Library_Environment_content-management">9.15. Importing into the Library environment</a></li>
<li><a href="#Importing_into_the_Library_Environment_from_a_web_server_content-management">9.16. Importing into the Library environment from a web server</a></li>
<li><a href="#Importing_a_Content_View_Version_content-management">9.17. Importing a content view version</a></li>
<li><a href="#Importing_a_Content_View_Version_from_a_web_servercontent-management">9.18. Importing a content view version from a web server</a></li>
<li><a href="#Importing_a_Repository_content-management">9.19. Importing a repository</a></li>
<li><a href="#Importing_a_Repository_from_a_web_server_content-management">9.20. Importing a repository from a web server</a></li>
<li><a href="#Exporting_and_Importing_Content_Using_Hammer_CLI_Cheat_Sheet_content-management">9.21. Exporting and importing content using Hammer CLI cheat sheet</a></li>
</ul>
</li>
<li><a href="#Managing_Activation_Keys_content-management">10. Managing activation keys</a>
<ul class="sectlevel2">
<li><a href="#best-practices-for-activation-keys_content-management">10.1. Best practices for activation keys</a></li>
<li><a href="#Creating_an_Activation_Key_content-management">10.2. Creating an activation key</a></li>
<li><a href="#Updating_Subscriptions_Associated_with_an_Activation_Key_content-management">10.3. Updating subscriptions associated with an activation key</a></li>
<li><a href="#Using_Activation_Keys_for_Host_Registration_content-management">10.4. Using activation keys for host registration</a></li>
<li><a href="#Enabling_Auto_Attach_content-management">10.5. Enabling auto-attach</a></li>
<li><a href="#Setting_the_Service_Level_content-management">10.6. Setting the service level</a></li>
<li><a href="#enabling-and-disabling-repositories-on-activation-key_content-management">10.7. Enabling and disabling repositories on activation key</a></li>
</ul>
</li>
<li><a href="#Managing_SUSE_Content_content-management">11. Managing SUSE content</a>
<ul class="sectlevel2">
<li><a href="#Preparing_SUSE_Installation_Media_content-management">11.1. Preparing SUSE installation media</a></li>
<li><a href="#Creating_a_SUSE_Operating_System_content-management">11.2. Creating a SUSE operating system</a></li>
<li><a href="#Installing_the_SCC_Manager_plugin_content-management">11.3. Installing the SCC Manager plugin</a></li>
<li><a href="#Adding_an_SCC_Account_to_Server_content-management">11.4. Adding an SCC account to Foreman</a></li>
<li><a href="#Switching_SCC_Accounts_content-management">11.5. Switching SCC accounts</a></li>
<li><a href="#Updating_an_SCC_Account_content-management">11.6. Updating an SCC account</a></li>
<li><a href="#Importing_SUSE_Products_content-management">11.7. Importing SUSE products</a></li>
<li><a href="#Synchronizing_SUSE_Content_content-management">11.8. Synchronizing SUSE content</a></li>
<li><a href="#Removing_an_SCC_Account_from_foreman_content-management">11.9. Removing an SCC account from Foreman</a></li>
</ul>
</li>
<li><a href="#Managing_Errata_content-management">12. Managing errata</a>
<ul class="sectlevel2">
<li><a href="#best-practices-for-errata_content-management">12.1. Best practices for errata</a></li>
<li><a href="#Inspecting_Available_Errata_content-management">12.2. Inspecting available errata</a></li>
<li><a href="#Parameters_Available_for_Errata_Search_content-management">12.3. Parameters available for errata search</a></li>
<li><a href="#Applying_installable_errata_content-management">12.4. Applying installable errata</a></li>
<li><a href="#Subscribing_to_Errata_Notifications_content-management">12.5. Subscribing to errata notifications</a></li>
<li><a href="#Limitations_to_Repository_Dependency_Resolution_content-management">12.6. Limitations to repository dependency resolution</a></li>
<li><a href="#Creating_a_Content_View_Filter_for_Errata_content-management">12.7. Creating a content view filter for errata</a></li>
<li><a href="#Adding_Errata_To_An_Incremental_Content_View_content-management">12.8. Adding errata to an incremental content view</a></li>
<li><a href="#Applying_Errata_to_Hosts_content-management">12.9. Applying errata to hosts</a></li>
<li><a href="#Applying_Errata_to_Multiple_Hosts_content-management">12.10. Applying errata to multiple hosts</a></li>
<li><a href="#Applying_Errata_to_a_Host_Collection_content-management">12.11. Applying errata to a host collection</a></li>
</ul>
</li>
<li><a href="#con_managing-ostree-content_content-management">13. Managing OSTree content</a>
<ul class="sectlevel2">
<li><a href="#importing-ostree-content_content-management">13.1. Importing OSTree content</a></li>
<li><a href="#uploading-ostree-content-with-hammer-cli_content-management">13.2. Uploading OSTree content with Hammer CLI</a></li>
<li><a href="#managing-ostree-content-with-content-views_content-management">13.3. Managing OSTree content with content views</a></li>
</ul>
</li>
<li><a href="#Managing_Container_Images_content-management">14. Managing container images</a>
<ul class="sectlevel2">
<li><a href="#Importing_Container_Images_content-management">14.1. Importing container images</a></li>
<li><a href="#Managing_Container_Name_Patterns_content-management">14.2. Managing container name patterns</a></li>
<li><a href="#Managing_Container_Registry_Authentication_content-management">14.3. Managing container registry authentication</a></li>
<li><a href="#Configuring_podman_to_trust_the_CA_content-management">14.4. Configuring Podman and Docker to trust the certificate authority</a></li>
<li><a href="#Using_Container_Registries_content-management">14.5. Using container registries</a></li>
</ul>
</li>
<li><a href="#Managing_ISO_Images_content-management">15. Managing ISO images</a>
<ul class="sectlevel2">
<li><a href="#Importing_ISO_Images_from_Red_Hat_content-management">15.1. Importing ISO images from Red Hat</a></li>
<li><a href="#Importing_Individual_ISO_Images_and_Files_content-management">15.2. Importing individual ISO images and files</a></li>
</ul>
</li>
<li><a href="#Managing_Ansible_Content_content-management">16. Managing Ansible content</a>
<ul class="sectlevel2">
<li><a href="#synchronizing-ansible-collections_content-management">16.1. Synchronizing Ansible Collections</a></li>
</ul>
</li>
<li><a href="#Managing_Custom_File_Type_Content_content-management">17. Managing file type content</a>
<ul class="sectlevel2">
<li><a href="#Creating_a_Local_Source_for_a_Custom_File_Type_Repository_content-management">17.1. Creating a local source for a file type repository</a></li>
<li><a href="#Creating_a_Remote_Source_for_a_Custom_File_Type_Repository_content-management">17.2. Creating a remote source for a file type repository</a></li>
<li><a href="#Creating_a_Custom_File_Type_Repository_content-management">17.3. Creating a file type repository</a></li>
<li><a href="#Uploading_Files_To_a_Custom_File_Type_Repository_content-management">17.4. Uploading files to a file type repository</a></li>
<li><a href="#Downloading_Files_to_a_Host_from_a_Custom_File_Type_Repository_content-management">17.5. Downloading files to a host from a file type repository</a></li>
</ul>
</li>
<li><a href="#Managing_Python_Type_Content_content-management">18. Managing Python type content</a>
<ul class="sectlevel2">
<li><a href="#Synchronizing_Python_Repositories_content-management">18.1. Synchronizing Python repositories</a></li>
<li><a href="#Uploading_Files_To_a_Python_Type_Repository_content-management">18.2. Uploading files to a Python type repository</a></li>
<li><a href="#Installing_Python_Packages_from_foreman_Server_content-management">18.3. Installing Python packages from Foreman&#160;Server</a></li>
<li><a href="#Downloading_Files_to_a_Host_from_a_Python_Type_Repository_content-management">18.4. Downloading files to a host from a Python type repository</a></li>
</ul>
</li>
<li><a href="#Using_an_NFS_Share_for_Content_Storage_content-management">Appendix A: Using an NFS share for content storage</a></li>
<li><a href="#Configuring-ISS_content-management">Appendix B: Configuring Inter-Server Synchronization (ISS)</a>
<ul class="sectlevel2">
<li><a href="#iss-scenarios_content-management">B.1. Inter-Server Synchronization scenarios</a></li>
<li><a href="#configuring-projectserver-to-synchronize-content-by-using-exports_content-management">B.2. Configuring Foreman&#160;server to synchronize content by using exports</a></li>
<li><a href="#configuring-server-to-synchronize-content-over-a-network_content-management">B.3. Configuring Foreman&#160;server to synchronize content over a network</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="Introduction_to_Content_Management_content-management"><a class="anchor" href="#Introduction_to_Content_Management_content-management"></a>1. Introduction to content management</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the context of Foreman, <em>content</em> is defined as the software installed on systems.
This includes, but is not limited to, the base operating system, middleware services, and end-user applications.
With Foreman, you can manage the various types of content at every stage of the software lifecycle.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
The Katello plugin provides content management features to Foreman.
You can only use this guide if you have the Katello plugin installed.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Foreman manages the following content:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Red Hat Subscription management</dt>
<dd>
<p>This provides organizations with a method to store Red Hat content and organize it in various ways.</p>
</dd>
<dt class="hdlist1">SUSE Subscription management</dt>
<dd>
<p>This provides organizations with a method to store SUSE content and organize it in various ways.
Note that this requires the Foreman SCC Manager plugin.
For more information, see <a href="#Managing_SUSE_Content_content-management">Managing SUSE content</a>.</p>
</dd>
<dt class="hdlist1">Content management</dt>
<dd>
<p>This provides organizations with a method to store Deb and Yum content and organize it in various ways.</p>
</dd>
</dl>
</div>
<div class="sect2">
<h3 id="Content_Types_in_Foreman_content-management"><a class="anchor" href="#Content_Types_in_Foreman_content-management"></a>1.1. Content types in Foreman</h3>
<div class="paragraph">
<p>With Foreman, you can import and manage many content types.</p>
</div>
<div class="paragraph">
<p>For example, Foreman supports the following content types:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">RPM packages</dt>
<dd>
<p>Import RPM packages from any repository, for example from Amazon, Oracle, Red&#160;Hat, SUSE, and custom repositories.
Foreman&#160;server downloads the RPM packages and stores them locally.
You can use these repositories and their RPM packages in content views.</p>
</dd>
<dt class="hdlist1">Deb packages</dt>
<dd>
<p>Import Deb packages from repositories, for example, for Debian or Ubuntu.
You can also import single Deb packages or synchronize custom repositories.
You can use these repositories and their Deb files in content views.</p>
</dd>
<dt class="hdlist1">Kickstart trees</dt>
<dd>
<p>Import the Kickstart trees to provision a host.
New systems access these Kickstart trees over a network to use as base content for their installation.
Foreman contains predefined Kickstart templates.
You can also create your own Kickstart templates.</p>
</dd>
<dt class="hdlist1">Provisioning templates</dt>
<dd>
<p>Templates to provision hosts running EL based on synchronized content and Debian, Ubuntu, or SUSE Linux Enterprise Server based on local installation media.
Foreman contains predefined AutoYaST, Kickstart, and Preseed templates as well as the ability to create your own, which are used to provision systems and customize the installation.</p>
</dd>
<dt class="hdlist1">ISO and KVM images</dt>
<dd>
<p>Download and manage media for installation and provisioning.
For example, Foreman downloads, stores, and manages ISO images and guest images for specific Red&#160;Hat Enterprise Linux and non-Red&#160;Hat operating systems.</p>
</dd>
<dt class="hdlist1">OSTree</dt>
<dd>
<p>Import OSTree branches and publish this content to an HTTP location for consumption by OSTree clients.</p>
</dd>
<dt class="hdlist1">Custom file type</dt>
<dd>
<p>Manage content for any type of file you require, such as SSL certificates, ISO images, and OVAL files.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Basic_Content_Management_Workflow_content-management"><a class="anchor" href="#Basic_Content_Management_Workflow_content-management"></a>2. Basic content management workflow</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is a quick overview of the tasks involved in the basic content management workflow in Foreman.
If you have installed Foreman with Katello and want to synchronize and manage Enterprise Linux content on your hosts, follow the steps in this chapter.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create repository to mirror content from CentOS Stream.</p>
</li>
<li>
<p>Synchronize the Content.</p>
</li>
<li>
<p>Create <code>Activation Keys</code>.</p>
</li>
<li>
<p>Register Hosts to consume this content.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="Creating_Repositories_to_Synchronize_content-management"><a class="anchor" href="#Creating_Repositories_to_Synchronize_content-management"></a>2.1. Creating repositories to synchronize</h3>
<div class="paragraph">
<p>Use this procedure to discover available repositories in the CentOS Stream, then select the repositories to mirror into a product.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Click <strong>Repo Discovery</strong>.</p>
</li>
<li>
<p>In the <strong>Repository Type</strong> field, select <strong>Yum Repositories</strong>.</p>
</li>
<li>
<p>In the <strong>URL to Discover</strong> field, enter the CentOS Stream URL <code><a href="http://mirror.centos.org/centos/8-stream" class="bare">http://mirror.centos.org/centos/8-stream</a></code>.</p>
</li>
<li>
<p>Click <strong>Discover</strong>.</p>
</li>
<li>
<p>Select <code>/AppStream/x86_64/os/</code> and <code>/BaseOS/x86_64/os/</code> repositories.</p>
</li>
<li>
<p>Click <strong>Create Selected</strong>.</p>
</li>
<li>
<p>In the <strong>Product</strong> field select <strong>New Product</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field enter <strong>CentOS Stream</strong> or desired product name.</p>
</li>
<li>
<p>Click <strong>Run Repository Creation</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To view your newly created product, navigate to <strong>Content</strong> &gt; <strong>Products</strong>, and select the name of the new product.</p>
</div>
</div>
<div class="sect2">
<h3 id="Synchronizing_Content_from_an_Upstream_Repository_content-management"><a class="anchor" href="#Synchronizing_Content_from_an_Upstream_Repository_content-management"></a>2.2. Synchronizing content from an upstream repository</h3>
<div class="paragraph">
<p>Use the following procedure to mirror the contents of the upstream CentOS repositories.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong></p>
</li>
<li>
<p>Select your new <strong>CentOS Stream</strong> product from the previous procedure.</p>
</li>
<li>
<p>Locate the <strong>AppStream x86_64 os</strong> and <strong>BaseOS x86_64 os</strong> repositories.</p>
</li>
<li>
<p>Select both repositories</p>
</li>
<li>
<p>Click <strong>Sync Now</strong></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Creating_an_Activation_Key_short_content-management"><a class="anchor" href="#Creating_an_Activation_Key_short_content-management"></a>2.3. Creating an activation key</h3>
<div class="paragraph">
<p>Use the following procedure to create an activation key that you can use to subscribe your hosts to content managed by Foreman.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle</strong> &gt; <strong>Activation Keys</strong>.</p>
</li>
<li>
<p>Click <strong>Create Activation Key</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter the name of the activation key.</p>
</li>
<li>
<p>In the <strong>Description</strong> field, enter a description for the activation key.</p>
</li>
<li>
<p>From the <strong>Environment</strong> list, select the <strong>Library</strong>.</p>
</li>
<li>
<p>From the <strong>Content View</strong> list, select <strong>Default Organization View</strong>.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
<li>
<p>Click on the <strong>Subscriptions</strong> tab on the Activation Key&#8217;s details page.</p>
</li>
<li>
<p>Click on the <strong>Add</strong> tab.</p>
</li>
<li>
<p>Select all the product subscriptions in the table.</p>
</li>
<li>
<p>Click <strong>Add Selected</strong> to save.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Registering_a_CentOS_Stream_Host_content-management"><a class="anchor" href="#Registering_a_CentOS_Stream_Host_content-management"></a>2.4. Registering a CentOS Stream host to Foreman</h3>
<div class="paragraph">
<p>Use the following procedure to register an existing CentOS Stream host to Foreman.</p>
</div>
<div class="paragraph">
<p>You can register hosts with Foreman using the host registration feature in the Foreman web UI, Hammer CLI, or the Foreman API.
For more information, see <a href="https://docs.theforeman.org/3.9/Managing_Hosts/index-katello.html#Registering_Hosts_managing-hosts">Registering Hosts</a> in <em>Managing hosts</em>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Hosts</strong> &gt; <strong>Register Host</strong>.</p>
</li>
<li>
<p>From the <strong>Activation Keys</strong> list, select the activation keys to assign to your host.</p>
</li>
<li>
<p>Click <strong>Generate</strong> to create the registration command.</p>
</li>
<li>
<p>Click on the <em>files</em> icon to copy the command to your clipboard.</p>
</li>
<li>
<p>Connect to your host using SSH and run the registration command.</p>
</li>
<li>
<p>Ensure that the appropriate repositories have been enabled:</p>
<div class="ulist">
<ul>
<li>
<p>On Enterprise Linux: Check the <code>/etc/yum.repos.d/redhat.repo</code> file and ensure that the appropriate repositories have been enabled.</p>
</li>
<li>
<p>On Debian: Check the <code>/etc/apt/sources.list</code> file and ensure that the appropriate repositories have been enabled.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Generate the host registration command using the Hammer CLI:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host-registration generate-command \
--activation-keys "<em>My_Activation_Key</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>If your hosts do not trust the SSL certificate of Foreman&#160;server, you can disable SSL validation by adding the <code>--insecure</code> flag to the registration command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host-registration generate-command \
--activation-keys "<em>My_Activation_Key</em>" \
--insecure true</pre>
</div>
</div>
</li>
<li>
<p>Connect to your host using SSH and run the registration command.</p>
</li>
<li>
<p>Ensure that the appropriate repositories have been enabled:</p>
<div class="ulist">
<ul>
<li>
<p>On Enterprise Linux: Check the <code>/etc/yum.repos.d/redhat.repo</code> file and ensure that the appropriate repositories have been enabled.</p>
</li>
<li>
<p>On Debian: Check the <code>/etc/apt/sources.list</code> file and ensure that the appropriate repositories have been enabled.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">API procedure</div>
<ol class="arabic">
<li>
<p>Generate the host registration command using the Foreman API:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl -X POST https://foreman.example.com/api/registration_commands \
--user "<em>My_User_Name</em>" \
-H 'Content-Type: application/json' \
-d '{ "registration_command": { "activation_keys": ["<em>My_Activation_Key_1</em>, <em>My_Activation_Key_2</em>"] }}'</pre>
</div>
</div>
<div class="paragraph">
<p>If your hosts do not trust the SSL certificate of Foreman&#160;server, you can disable SSL validation by adding the <code>--insecure</code> flag to the registration command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl -X POST https://foreman.example.com/api/registration_commands \
--user "<em>My_User_Name</em>" \
-H 'Content-Type: application/json' \
-d '{ "registration_command": { "activation_keys": ["<em>My_Activation_Key_1</em>, <em>My_Activation_Key_2</em>"], "insecure": true }}'</pre>
</div>
</div>
<div class="paragraph">
<p>Use an activation key to simplify specifying the environments.
For more information, see <a href="https://docs.theforeman.org/3.9/Managing_Content/index-katello.html#Managing_Activation_Keys_content-management">Managing Activation Keys</a> in <em>Managing content</em>.</p>
</div>
<div class="paragraph">
<p>To enter a password as a command line argument, use <code>username:password</code> syntax.
Keep in mind this can save the password in the shell history.
Alternatively, you can use a temporary personal access token instead of a password.
To generate a token in the Foreman web UI, navigate to <strong>My Account</strong> &gt; <strong>Personal Access Tokens</strong>.</p>
</div>
</li>
<li>
<p>Connect to your host using SSH and run the registration command.</p>
</li>
<li>
<p>Ensure that the appropriate repositories have been enabled:</p>
<div class="ulist">
<ul>
<li>
<p>On Enterprise Linux: Check the <code>/etc/yum.repos.d/redhat.repo</code> file and ensure that the appropriate repositories have been enabled.</p>
</li>
<li>
<p>On Debian: Check the <code>/etc/apt/sources.list</code> file and ensure that the appropriate repositories have been enabled.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Using_Content_Views_content-management"><a class="anchor" href="#Using_Content_Views_content-management"></a>2.5. Using content views</h3>
<div class="paragraph">
<p>Foreman uses the concept of content views to create snapshots of a set of repositories and make them available to hosts registered to it.
For example, if you want a group of hosts to have access to a specific version of a set of repositories, add those repositories to a content view, publish and promote to a lifecycle environment.
You can then register hosts to this content view.
These hosts have access only to repositories at the version specified in the content view.
This means that you can continue to update repositories on your server while your hosts still consume only the versions of the repositories that they are registered to.
If you do not use content views and lifecycle environments, all your hosts consume content from the Default content view and Library environment, which is a snapshot of the latest version of the content on your server.
For more information about content management using content views and application lifecycles, see:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#Managing_Content_Views_content-management">Managing content views</a></p>
</li>
<li>
<p><a href="#Managing_Application_Lifecycles_content-management">Managing application lifecycles</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Creating_a_Content_View_short_content-management"><a class="anchor" href="#Creating_a_Content_View_short_content-management"></a>2.6. Creating a content view</h3>
<div class="paragraph">
<p>Use the following procedure to create a content view.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle</strong> &gt; <strong>Content Views</strong>.</p>
</li>
<li>
<p>Click <strong>Create content view</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter <code>CentOS Content View</code>.</p>
</li>
<li>
<p>In the <strong>Description</strong> field, enter a description for the content view.</p>
</li>
<li>
<p>Select <strong>Content view</strong> or <strong>Composite content view</strong> as the <strong>Type</strong>.</p>
</li>
<li>
<p>Click <strong>Create content view</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Adding_Repositories_content-management"><a class="anchor" href="#Adding_Repositories_content-management"></a>2.7. Adding repositories</h3>
<div class="paragraph">
<p>Use the following procedure to add the upstream CentOS repositories to your Content view.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle</strong> &gt; <strong>Content Views</strong>.</p>
</li>
<li>
<p>Click <strong>CentOS Content View</strong>.</p>
</li>
<li>
<p>Click the <strong>Repositories</strong> tab.</p>
</li>
<li>
<p>Select repositories that you want to add.</p>
</li>
<li>
<p>Click <strong>Add Repositories</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Publishing_the_Content_View_content-management"><a class="anchor" href="#Publishing_the_Content_View_content-management"></a>2.8. Publishing the content view</h3>
<div class="paragraph">
<p>Use the following procedure to publish the content view.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle</strong> &gt; <strong>Content Views</strong>.</p>
</li>
<li>
<p>Select the content view.</p>
</li>
<li>
<p>Click <strong>Publish New Version</strong> on the top right of the page.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Creating_an_Activation_Key_to_Consume_the_Content_View_content-management"><a class="anchor" href="#Creating_an_Activation_Key_to_Consume_the_Content_View_content-management"></a>2.9. Creating an activation key to consume the content view</h3>
<div class="paragraph">
<p>Use the following procedure to create an activation key that you can use to subscribe your hosts to content managed by Foreman.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle</strong> &gt; <strong>Activation Keys</strong>.</p>
</li>
<li>
<p>Click <strong>Create Activation Key</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter <strong>CentOS</strong> or the name of your new activation key.</p>
</li>
<li>
<p>In the <strong>Description</strong> field, enter a description for the activation key.</p>
</li>
<li>
<p>From the <strong>Environment</strong> list, select the <strong>Library</strong>.</p>
</li>
<li>
<p>From the <strong>Content View</strong> list, select <strong>Centos Content View</strong>.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
<li>
<p>Click the <strong>Subscriptions</strong> tab on the Activation Key&#8217;s details page.</p>
</li>
<li>
<p>Click the <strong>Add</strong> tab.</p>
</li>
<li>
<p>Select your new <strong>CentOS Stream</strong> product in the table.</p>
</li>
<li>
<p>Click <strong>Add Selected</strong> to save.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Use your activation key to register a host to the content view.
For more information on registering a host, see <a href="https://docs.theforeman.org/3.9/Managing_Hosts/index-katello.html#Registering_Hosts_managing-hosts">Registering a Host</a> in <em>Managing hosts</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Registering_a_CentOS_Stream_host_to_consume_content_from_a_published_content_view_content-management"><a class="anchor" href="#Registering_a_CentOS_Stream_host_to_consume_content_from_a_published_content_view_content-management"></a>2.10. Registering a CentOS Stream host to consume content from a published content view</h3>
<div class="paragraph">
<p>You can also register the host to the published content view without an activation key using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># subscription-manager register \
--environment="Library/CentOS_Content_View"
--org="<em>My_Organization</em>" \</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Managing_the_Lifecycle_of_the_Content_View_content-management"><a class="anchor" href="#Managing_the_Lifecycle_of_the_Content_View_content-management"></a>2.11. Managing the lifecycle of the content view</h3>
<div class="paragraph">
<p>The default location of any new content view is in the Library environment.
Optionally, you can add a new environment and promote your content view to it.
Use the following procedure to create a lifecycle environment.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle</strong> &gt; <strong>Lifecycle Environments</strong>.</p>
</li>
<li>
<p>Click <strong>Create Environment Path</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter <strong>Production</strong> or the name of your new environment to add to the end of Library environment.</p>
</li>
<li>
<p>In the <strong>Description</strong> field, add an optional description for your new lifecycle environment.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Promoting_your_Content_View_to_the_New_Lifecycle_Environment_content-management"><a class="anchor" href="#Promoting_your_Content_View_to_the_New_Lifecycle_Environment_content-management"></a>2.12. Promoting your content view to the new lifecycle environment</h3>
<div class="paragraph">
<p>You can now promote your new content view to the <strong>Production</strong> environment using the following procedure.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle</strong> &gt; <strong>Content Views</strong>.</p>
</li>
<li>
<p>Select the content view.</p>
</li>
<li>
<p>On the <strong>Versions</strong> tab, click <strong>Promote</strong> for desired version under the Actions column.</p>
</li>
<li>
<p>Select <strong>Production</strong> lifecycle environment from the available promotion paths.</p>
</li>
<li>
<p>Add an optional <strong>Description</strong>.</p>
</li>
<li>
<p>Click <strong>Promote Version</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Registering_a_CentOS_Stream_host_to_consume_content_from_a_promoted_Content_View_in_the_production_environment_content-management"><a class="anchor" href="#Registering_a_CentOS_Stream_host_to_consume_content_from_a_promoted_Content_View_in_the_production_environment_content-management"></a>2.13. Registering a CentOS Stream host to consume content from a promoted content view in the production environment</h3>
<div class="paragraph">
<p>To register a host to consume content from the content view in the Production lifecycle environment, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># subscription-manager register \
--environment="Production/CentOS_Content_View" \
--org="<em>My_Organization</em>"</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Managing_Red_Hat_Subscriptions_content-management"><a class="anchor" href="#Managing_Red_Hat_Subscriptions_content-management"></a>3. Managing Red Hat subscriptions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Foreman can import content from the Red&#160;Hat Content Delivery Network (CDN).
Foreman requires a Red&#160;Hat subscription manifest to find, access, and download content from the corresponding repositories.
You must have a Red&#160;Hat subscription manifest containing a subscription allocation for each organization on Foreman&#160;server.
All subscription information is available in your Red Hat Customer Portal account.</p>
</div>
<div class="paragraph">
<p>Before you can complete the tasks in this chapter, you must create a Red&#160;Hat subscription manifest in the Customer Portal.</p>
</div>
<div class="paragraph">
<p>Use this chapter to import a Red&#160;Hat subscription manifest and manage the manifest within the Foreman web UI.</p>
</div>
<div class="paragraph">
<div class="title">Subscription allocations and organizations</div>
<p>You can manage more than one organization if you have more than one subscription allocation.
Foreman requires a single allocation for each organization configured in Foreman&#160;server.
The advantage of this is that each organization maintains separate subscriptions so that you can support multiple organizations, each with their own Red Hat accounts.</p>
</div>
<div class="paragraph">
<div class="title">Future-dated subscriptions</div>
<p>You can use future-dated subscriptions in a subscription allocation.
When you add future-dated subscriptions to content hosts before the expiry date of the existing subscriptions, you can have uninterrupted access to repositories.</p>
</div>
<div class="paragraph">
<p>Manually attach the future-dated subscriptions to your content hosts before the current subscriptions expire.
Do not rely on the auto-attach method because this method is designed for a different purpose and might not work.
For more information, see <a href="#Attaching_Red_Hat_Subscriptions_to_Content_Hosts_content-management">Attaching Red Hat subscriptions to content hosts</a>.</p>
</div>
<div class="paragraph">
<p>When a future-dated subscription becomes active, you must refresh the manifest to synchronize repository content.
For more information, see <a href="#Updating_and_Refreshing_Red_Hat_Subscription_Manifests_content-management">Updating and refreshing Red Hat subscription manifests</a>.</p>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://docs.theforeman.org/3.9/Installing_Server/index-katello.html#configuring-foreman-server-to-consume-content-from-a-custom-cdn_foreman">Configuring Foreman&#160;Server to Consume Content from a Custom CDN</a> in <em>Installing Foreman&#160;Server with Katello 4.11 plugin on CentOS/RHEL</em></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="Importing_a_Red_Hat_Subscription_Manifest_into_Server_content-management"><a class="anchor" href="#Importing_a_Red_Hat_Subscription_Manifest_into_Server_content-management"></a>3.1. Importing a Red&#160;Hat subscription manifest into Foreman&#160;server</h3>
<div class="paragraph">
<p>Use the following procedure to import a Red&#160;Hat subscription manifest into Foreman&#160;server.</p>
</div>
<div class="paragraph">
<p>This is for users of the Katello plugin and Red Hat operating systems only.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Simple Content Access (SCA) is set on the organization, not the manifest.
Importing a manifest does not change your organization&#8217;s Simple Content Access status.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure you have a Red&#160;Hat subscription manifest.</p>
<div class="ulist">
<ul>
<li>
<p>If your Foreman is connected, use the Red&#160;Hat Hybrid Cloud Console to create and export the manifest.
For more information, see <a href="https://docs.redhat.com/en/documentation/subscription_central/1-latest/html-single/creating_and_managing_manifests_for_a_connected_satellite_server/index">Creating and managing manifests for a connected Satellite Server</a> in <em>Subscription Central</em>.</p>
</li>
<li>
<p>If your Foreman is disconnected, use the Red Hat Customer Portal to create and export the manifest.
For more information, see <a href="https://docs.redhat.com/en/documentation/subscription_central/1-latest/html-single/creating_and_managing_manifests_for_a_disconnected_satellite_server/index">Creating and managing manifests for a disconnected Satellite Server</a> in <em>Subscription Central</em>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, ensure the context is set to the organization you want to use.</p>
</li>
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Subscriptions</strong> and click <strong>Manage Manifest</strong>.</p>
</li>
<li>
<p>In the <strong>Manage Manifest</strong> window, click <strong>Choose File</strong>.</p>
</li>
<li>
<p>Navigate to the location that contains the Red&#160;Hat subscription manifest file, then click <strong>Open</strong>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Copy the Red&#160;Hat subscription manifest file from your local machine to Foreman&#160;server:</p>
<div class="listingblock">
<div class="content">
<pre>$ scp ~/<em>manifest_file</em>.zip root@<em>foreman.example.com</em>:~/.</pre>
</div>
</div>
</li>
<li>
<p>Log in to Foreman&#160;server as the <code>root</code> user and import the Red&#160;Hat subscription manifest file:</p>
<div class="listingblock">
<div class="content">
<pre># hammer subscription upload \
--file ~/<em>manifest_file</em>.zip \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can now enable repositories and import Red Hat content.
For more information, see <a href="https://docs.theforeman.org/3.9/Managing_Content/index-katello.html#Importing_Content_content-management">Importing Content</a> in <em>Managing content</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Locating_a_Red_Hat_Subscription_content-management"><a class="anchor" href="#Locating_a_Red_Hat_Subscription_content-management"></a>3.2. Locating a Red Hat subscription</h3>
<div class="paragraph">
<p>When you import a Red&#160;Hat subscription manifest into Foreman&#160;server, the subscriptions from your manifest are listed in the Subscriptions window.
If you have a high volume of subscriptions, you can filter the results to find a specific subscription.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have a Red&#160;Hat subscription manifest file imported to Foreman&#160;server.
For more information, see <a href="#Importing_a_Red_Hat_Subscription_Manifest_into_Server_content-management">Importing a Red&#160;Hat subscription manifest into Foreman&#160;server</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, ensure the context is set to the organization you want to use.</p>
</li>
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Subscriptions</strong>.</p>
</li>
<li>
<p>In the Subscriptions window, click the <strong>Search</strong> field to view the list of search criteria for building your search query.</p>
</li>
<li>
<p>Select search criteria to display further options.</p>
</li>
<li>
<p>When you have built your search query, click the search icon.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For example, if you place your cursor in the <strong>Search</strong> field and select <strong>expires</strong>, then press the space bar, another list appears with the options of placing a <strong>&gt;</strong>, <strong>&lt;</strong>, or <strong>=</strong> character.
If you select <strong>&gt;</strong> and press the space bar, another list of automatic options appears.
You can also enter your own criteria.</p>
</div>
</div>
<div class="sect2">
<h3 id="Adding_Red_Hat_Subscriptions_to_Subscription_Allocations_content-management"><a class="anchor" href="#Adding_Red_Hat_Subscriptions_to_Subscription_Allocations_content-management"></a>3.3. Adding Red Hat subscriptions to subscription allocations</h3>
<div class="paragraph">
<p>Use the following procedure to add Red Hat subscriptions to a subscription allocation in the Foreman web UI.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have a Red&#160;Hat subscription manifest file imported to Foreman&#160;server.
For more information, see <a href="#Importing_a_Red_Hat_Subscription_Manifest_into_Server_content-management">Importing a Red&#160;Hat subscription manifest into Foreman&#160;server</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, ensure the context is set to the organization you want to use.</p>
</li>
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Subscriptions</strong>.</p>
</li>
<li>
<p>In the Subscriptions window, click <strong>Add Subscriptions</strong>.</p>
</li>
<li>
<p>On the row of each subscription you want to add, enter the quantity in the <strong>Quantity to Allocate</strong> column.</p>
</li>
<li>
<p>Click <strong>Submit</strong></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Removing_Red_Hat_Subscriptions_from_Subscription_Allocations_content-management"><a class="anchor" href="#Removing_Red_Hat_Subscriptions_from_Subscription_Allocations_content-management"></a>3.4. Removing Red Hat subscriptions from subscription allocations</h3>
<div class="paragraph">
<p>Use the following procedure to remove Red Hat subscriptions from a subscription allocation in the Foreman web UI.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Manifests must not be deleted.
If you delete the manifest from the Red Hat Customer Portal or in the Foreman web UI, all of the entitlements for all of your content hosts will be removed.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have a Red&#160;Hat subscription manifest file imported to Foreman&#160;server.
For more information, see <a href="#Importing_a_Red_Hat_Subscription_Manifest_into_Server_content-management">Importing a Red&#160;Hat subscription manifest into Foreman&#160;server</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, ensure the context is set to the organization you want to use.</p>
</li>
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Subscriptions</strong>.</p>
</li>
<li>
<p>On the row of each subscription you want to remove, select the corresponding checkbox.</p>
</li>
<li>
<p>Click <strong>Delete</strong>, and then confirm deletion.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Updating_and_Refreshing_Red_Hat_Subscription_Manifests_content-management"><a class="anchor" href="#Updating_and_Refreshing_Red_Hat_Subscription_Manifests_content-management"></a>3.5. Updating and refreshing Red Hat subscription manifests</h3>
<div class="paragraph">
<p>Every time that you change a subscription allocation, you must refresh the manifest to reflect these changes.
For example, you must refresh the manifest if you take any of the following actions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Renewing a subscription</p>
</li>
<li>
<p>Adjusting subscription quantities</p>
</li>
<li>
<p>Purchasing additional subscriptions</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can refresh the manifest directly in the Foreman web UI.
Alternatively, you can import an updated manifest that contains the changes.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, ensure the context is set to the organization you want to use.</p>
</li>
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Subscriptions</strong>.</p>
</li>
<li>
<p>In the Subscriptions window, click <strong>Manage Manifest</strong>.</p>
</li>
<li>
<p>In the Manage Manifest window, click <strong>Refresh</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The Foreman web UI provides a notification before the subscription manifest expires.</p>
</div>
</div>
<div class="sect2">
<h3 id="Attaching_Red_Hat_Subscriptions_to_Content_Hosts_content-management"><a class="anchor" href="#Attaching_Red_Hat_Subscriptions_to_Content_Hosts_content-management"></a>3.6. Attaching Red Hat subscriptions to content hosts</h3>
<div class="paragraph">
<p>Using activation keys is the main method to attach subscriptions to content hosts during the provisioning process.
However, an activation key cannot update an existing host.
If you need to attach new or additional subscriptions, such as future-dated subscriptions, to one host, use the following procedure.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>This procedure is only valid if you have Simple Content Access (SCA) disabled on your Foreman.
With SCA enabled, you do not need to have subscriptions attached to your hosts.
Note that SCA is enabled by default for newly created organizations.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For more information about updating multiple hosts, see <a href="#Updating_Red_Hat_Subscriptions_on_Multiple_Hosts_content-management">Updating Red Hat subscriptions on multiple hosts</a>.</p>
</div>
<div class="paragraph">
<p>For more information about activation keys, see <a href="#Managing_Activation_Keys_content-management">Managing activation keys</a>.</p>
</div>
<div class="paragraph">
<div class="title">Foreman subscriptions</div>
<p>In Foreman, you must maintain a Red&#160;Hat Enterprise Linux Satellite subscription, formerly known as Red&#160;Hat Enterprise Linux Smart Management, for every Red&#160;Hat Enterprise Linux host that you want to manage.</p>
</div>
<div class="paragraph">
<p>However, you are not required to attach Foreman subscriptions to each content host.
Foreman subscriptions cannot attach automatically to content hosts in Foreman because they are not associated with any product certificates.
Adding a Foreman subscription to a content host does not provide any content or repository access.
If you want, you can add a Foreman subscription to a manifest for your own recording or tracking purposes.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have a Red&#160;Hat subscription manifest file imported to Foreman&#160;server.
For more information, see <a href="#Importing_a_Red_Hat_Subscription_Manifest_into_Server_content-management">Importing a Red&#160;Hat subscription manifest into Foreman&#160;server</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, ensure the context is set to the organization you want to use.</p>
</li>
<li>
<p>In the Foreman web UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong>.</p>
</li>
<li>
<p>On the row of each content host whose subscription you want to change, select the corresponding checkbox.</p>
</li>
<li>
<p>From the <strong>Select Action</strong> list, select <strong>Manage Subscriptions</strong>.</p>
</li>
<li>
<p>Optionally, enter a key and value in the <strong>Search</strong> field to filter the subscriptions displayed.</p>
</li>
<li>
<p>Select the checkbox to the left of the subscriptions that you want to add or remove and click <strong>Add Selected</strong> or <strong>Remove Selected</strong> as required.</p>
</li>
<li>
<p>Click <strong>Done</strong> to save the changes.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>On your Foreman&#160;server, list all available subscriptions:</p>
<div class="listingblock">
<div class="content">
<pre># hammer subscription list \
--organization-id <em>My_Organization_ID</em></pre>
</div>
</div>
</li>
<li>
<p>Attach a subscription to your host:</p>
<div class="listingblock">
<div class="content">
<pre># hammer host subscription attach \
--host <em>My_Host_Name</em> \
--subscription-id <em>My_Subscription_ID</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Updating_Red_Hat_Subscriptions_on_Multiple_Hosts_content-management"><a class="anchor" href="#Updating_Red_Hat_Subscriptions_on_Multiple_Hosts_content-management"></a>3.7. Updating Red Hat subscriptions on multiple hosts</h3>
<div class="paragraph">
<p>Use this procedure for post-installation changes to multiple content hosts at the same time.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>This procedure is only valid if you have Simple Content Access (SCA) disabled on your Foreman.
With SCA enabled, you do not need to have subscriptions attached to your hosts.
Note that SCA is enabled by default for newly created organizations.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, ensure the context is set to the organization you want to use.</p>
</li>
<li>
<p>In the Foreman web UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong>.</p>
</li>
<li>
<p>On the row of each content host whose subscription you want to change, select the corresponding checkbox.</p>
</li>
<li>
<p>From the <strong>Select Action</strong> list, select <strong>Manage Subscriptions</strong>.</p>
</li>
<li>
<p>Optionally, enter a key and value in the <strong>Search</strong> field to filter the subscriptions displayed.</p>
</li>
<li>
<p>Select the checkbox to the left of the subscriptions to be added or removed and click <strong>Add Selected</strong> or <strong>Remove Selected</strong> as required.</p>
</li>
<li>
<p>Click <strong>Done</strong> to save the changes.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Content_Delivery_Network_Structure_content-management"><a class="anchor" href="#Content_Delivery_Network_Structure_content-management"></a>3.8. Content Delivery Network structure</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Information in this section applies only if you consume Red&#160;Hat content using a Red&#160;Hat manifest.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Red&#160;Hat Content Delivery Network (CDN), located at <code>cdn.redhat.com</code>, is a geographically distributed series of static webservers which include content and errata designed to be used by systems.
This content can be accessed directly through a system registered using Subscription Manager or through the Foreman web UI.
The accessible subset of the CDN is configured through subscriptions attached to a system using <a href="https://access.redhat.com/management/">Red&#160;Hat Subscription Management</a> or using Foreman&#160;server.</p>
</div>
<div class="paragraph">
<p>Red&#160;Hat Content Delivery network is protected by X.509 certificate authentication to ensure that only valid users can access it.</p>
</div>
<div class="listingblock">
<div class="title">Directory structure of the CDN</div>
<div class="content">
<pre>$ tree -d -L 11
└── content  // <b class="conum">(1)</b>
    ├── beta  // <b class="conum">(2)</b>
    │   └── rhel  // <b class="conum">(3)</b>
    │       └── server  // <b class="conum">(4)</b>
    │           └── 7 // <b class="conum">(5)</b>
    │               └── x86_64  // <b class="conum">(6)</b>
    │                   └── sat-tools  // <b class="conum">(7)</b>
    └── dist
        └── rhel
            └── server
                └── 7
                ├── 7.2
                │   └── x86_64
                │       └── kickstart
                └── 7Server
                    └── x86_64
                        └── os</pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The <code>content</code> directory.</p>
</li>
<li>
<p>Directory responsible for the lifecycle of the content.
Common directories include <code>beta</code> (for Beta code), <code>dist</code> (for Production) and <code>eus</code> (For Extended Update Support) directories.</p>
</li>
<li>
<p>Directory responsible for the Product name.
Usually <code>rhel</code> for Red&#160;Hat Enterprise Linux.</p>
</li>
<li>
<p>Directory responsible for the type of the Product.
For Red&#160;Hat Enterprise Linux this might include <code>server</code>, <code>workstation</code>, and <code>computenode</code> directories.</p>
</li>
<li>
<p>Directory responsible for the release version, such as <code>7</code>, <code>7.2</code> or <code>7Server</code>.</p>
</li>
<li>
<p>Directory responsible for the base architecture, such as <code>i386</code> or <code>x86_64</code>.</p>
</li>
<li>
<p>Directory responsible for the repository name, such as <code>sat-tools</code>, <code>kickstart</code>, <code>rhscl</code>.
Some components have additional subdirectories which might vary.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This directory structure is also used in the Red&#160;Hat Subscription Manifest.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Managing_Alternate_Content_Sources_content-management"><a class="anchor" href="#Managing_Alternate_Content_Sources_content-management"></a>4. Managing alternate content sources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Alternate content sources define alternate paths to download content during synchronization.
The content itself is downloaded from the alternate content source, while the metadata is downloaded from the Foreman&#160;server or the upstream URL, depending on the configuration.
You can use alternate content source to speed up synchronization if the content is located on the local filesystem or on a nearby network.
You can set up alternate content sources for Foreman&#160;server and Smart&#160;Proxy.
You must refresh the alternate content source after creation or after making any changes.
A weekly cron job refreshes all alternate content sources.
You can also refresh the alternate content sources manually using the Foreman web UI or the Hammer CLI.
Alternate content sources associated with your Foreman&#160;server, or Smart&#160;Proxy&#160;servers attached to multiple organizations, affect all organizations.</p>
</div>
<div class="paragraph">
<p>There are three types of alternate content sources:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Custom</dt>
<dd>
<p>Custom alternate content sources download the content from any upstream repository on the network or filesystem.</p>
</dd>
<dt class="hdlist1">Simplified</dt>
<dd>
<p>Simplified alternate content sources copy the upstream repository information from your Foreman&#160;server for the selected products.
Simplified alternate content sources are ideal for situations where the connection from your Smart&#160;Proxy to the upstream repo is faster than from your Foreman&#160;server.</p>
</dd>
<dt class="hdlist1">RHUI</dt>
<dd>
<p>RHUI alternate content sources download content from a Red Hat Update Infrastructure server.
Foreman web UI provides examples to help you find the network paths and to import authentication credentials.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<div class="title">Permission requirements for alternate content sources</div>
<p>Non-administrator users must have the below permissions to manage alternate content sources:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>view_smart_proxies</code></p>
</li>
<li>
<p><code>view_content_credentials</code></p>
</li>
<li>
<p><code>view_organizations</code></p>
</li>
<li>
<p><code>view_products</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In addition to the above permissions, assign permissions specific to alternate content sources, depending on the actions the users can perform:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>view_alternate_content_sources</code></p>
</li>
<li>
<p><code>create_alternate_content_sources</code></p>
</li>
<li>
<p><code>edit_alternate_content_sources</code></p>
</li>
<li>
<p><code>destroy_alternate_content_sources</code></p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="Configuring_Custom_Alternate_Content_Sources_content-management"><a class="anchor" href="#Configuring_Custom_Alternate_Content_Sources_content-management"></a>4.1. Configuring custom alternate content sources</h3>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>If the repository requires SSL authentication, import the SSL certificate and key to the Foreman.
For more information, see <a href="https://docs.theforeman.org/3.9/Managing_Content/index-katello.html#Importing_Custom_SSL_Certificates_content-management">Importing Custom SSL Certificates</a> in <em>Managing content</em>.</p>
</li>
<li>
<p>Note that the alternate content source paths consist of a base URL appended with the subpaths that you provide.
For example, if your base URL is <code><a href="https://server.example.com" class="bare">https://server.example.com</a></code> and your subpaths are <code>rhel7/</code> and <code>rhel8/</code>, then both <code><a href="https://server.example.com/rhel7/" class="bare">https://server.example.com/rhel7/</a></code> and <code><a href="https://server.example.com/rhel8/" class="bare">https://server.example.com/rhel8/</a></code> will be searched.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Alternate Content Sources</strong>.</p>
</li>
<li>
<p>Click <strong>Add Source</strong> and set the <strong>Source type</strong> as <strong>Custom</strong>.</p>
</li>
<li>
<p>Select the <strong>Content type</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for the alternate content source.</p>
</li>
<li>
<p>Optional: In the the <strong>Description</strong> field, provide a description for the ACS.</p>
</li>
<li>
<p>Select Smart&#160;Proxies to which the alternate content source is to be synced.</p>
</li>
<li>
<p>Enter the Base URL of the alternate content source.</p>
</li>
<li>
<p>Enter a comma-separated list of Subpaths.</p>
</li>
<li>
<p>Provide the <strong>Manual Authentication</strong> or <strong>Content Authentication</strong> credentials, if these are needed.</p>
</li>
<li>
<p>If SSL verification is required, enable <strong>Verify SSL</strong> and select the SSL CA certificate.</p>
</li>
<li>
<p>Review details and click <strong>Add</strong>.</p>
</li>
<li>
<p>Navigate to <strong>Content</strong> &gt; <strong>Alternate Content Sources</strong> &gt; click the vertical ellipsis next to the newly created alternate content source &gt; Select <strong>Refresh</strong>.</p>
</li>
</ol>
</div>
<div id="cli-configuring-custom-alternate-content-sources_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>On Foreman&#160;server, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer alternate-content-source create \
--alternate-content-source-type custom \
--base-url "<em>https://local-repo.example.com:port</em>" \
--name "<em>My_ACS_Name</em>" \
--smart-proxy-ids <em>My_Smart_Proxy_ID</em></pre>
</div>
</div>
</li>
<li>
<p>Check if the newly created alternate content source is listed:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer alternate-content-source list</pre>
</div>
</div>
</li>
<li>
<p>Refresh the alternate content source:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer alternate-content-source refresh --id <em>My_Alternate_Content_Source_ID</em></pre>
</div>
</div>
</li>
<li>
<p>Add the Smart&#160;Proxies to which the alternate content source is to be synced:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer alternate-content-source update \
--id <em>My_Alternate_Content_Source_ID</em> \
--smart-proxy-ids <em>My_Smart_Proxy_ID</em></pre>
</div>
</div>
</li>
<li>
<p>Refresh the alternate content sources:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer alternate-content-source refresh --id <em>My_Alternate_Content_Source_ID</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Configuring_Simplified_Alternate_Content_Sources_content-management"><a class="anchor" href="#Configuring_Simplified_Alternate_Content_Sources_content-management"></a>4.2. Configuring simplified alternate content sources</h3>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Alternate Content Sources</strong>.</p>
</li>
<li>
<p>Click <strong>Add Source</strong> and set the <strong>Source type</strong> as <strong>Simplified</strong>.</p>
</li>
<li>
<p>Select the <strong>Content type</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for the alternate content source.</p>
</li>
<li>
<p>Optional: In the <strong>Description</strong> field, provide a description for the ACS.</p>
</li>
<li>
<p>Select Smart&#160;Proxies to which the alternate content source is to be synced.</p>
</li>
<li>
<p>Optional: Select <strong>Use HTTP proxies</strong> if you want the ACS to use the Smart&#160;Proxy&#160;server&#8217;s HTTP proxy.</p>
</li>
<li>
<p>Select the products that should use the alternate content source.</p>
</li>
<li>
<p>Review details and click <strong>Add</strong>.</p>
</li>
<li>
<p>Navigate to <strong>Content</strong> &gt; <strong>Alternate Content Sources</strong>, click the vertical ellipsis next to the newly created alternate content source, and select <strong>Refresh</strong>.</p>
</li>
</ol>
</div>
<div id="cli-configuring-simplified-alternate-content-sources_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Create a simplified ACS:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer alternate-content-source create \
--alternate-content-source-type simplified \
--name <em>My_ACS_Name</em> \
--product-ids <em>My_Product_ID</em> \
--smart-proxy-ids <em>My_Smart_Proxy_ID</em></pre>
</div>
</div>
</li>
<li>
<p>Check if the newly created ACS is listed:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer alternate-content-source list</pre>
</div>
</div>
</li>
<li>
<p>Refresh the ACS:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer alternate-content-source refresh --id <em>My_ACS_ID</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Configuring_RHUI_Alternate_Content_Sources_content-management"><a class="anchor" href="#Configuring_RHUI_Alternate_Content_Sources_content-management"></a>4.3. Configuring RHUI alternate content sources</h3>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Generate the client entitlement certificates for the required repos on the RHUA node as described in <a href="https://access.redhat.com/documentation/en-us/red_hat_update_infrastructure/4/html/configuring_and_managing_red_hat_update_infrastructure/assembly_cmg-creating-client-ent-cert-config-rpm_configuring-and-managing-red-hat-update-infrastructure#proc_cmg-creating-client-entitlement-certificate_assembly_cmg-creating-client-ent-cert-config-rpm">Creating a client entitlement certificate with the Red Hat Update Infrastructure Management Tool</a> in <em>Configuring and Managing Red Hat Update Infrastructure</em>.</p>
</li>
<li>
<p>Import the client entitlement certificates into Foreman.
For more information, see <a href="https://docs.theforeman.org/3.9/Managing_Content/index-katello.html#Importing_Custom_SSL_Certificates_content-management">Importing Custom SSL Certificates</a> in <em>Managing content</em>.</p>
</li>
<li>
<p>Obtain a list of the subpaths for the required repositories.
Execute the following command on your RHUA server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># rhui-manager repo info --repo_id <em>My_Repo_ID</em></pre>
</div>
</div>
</li>
<li>
<p>Note that the alternate content source paths consist of a base URL appended with the subpaths that you provide.
For example, if your base URL is <code><a href="https://server.example.com" class="bare">https://server.example.com</a></code> and your subpaths are <code>rhel7/</code> and <code>rhel8/</code>, then both <code><a href="https://server.example.com/rhel7/" class="bare">https://server.example.com/rhel7/</a></code> and <code><a href="https://server.example.com/rhel8/" class="bare">https://server.example.com/rhel8/</a></code> will be searched.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Alternate Content Sources</strong>.</p>
</li>
<li>
<p>Click <strong>Add Source</strong> and set the <strong>Source type</strong> as <strong>RHUI</strong>.</p>
</li>
<li>
<p>Generate RHUI certificates using the command provided in the Foreman web UI.
Ensure that you pass the repo labels of the desired repositories.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for the alternate content source.</p>
</li>
<li>
<p>Optional: In the <strong>Description</strong> field, provide a description for the ACS.</p>
</li>
<li>
<p>Select Smart&#160;Proxies to which the alternate content source is to be synced.</p>
</li>
<li>
<p>Optional: Select <strong>Use HTTP proxies</strong> if you want the ACS to use the Smart&#160;Proxy&#8217;s HTTP proxy.</p>
</li>
<li>
<p>Enter the Base URL of the Red Hat Update Infrastructure CDS node.</p>
</li>
<li>
<p>Enter a comma-separated list of Subpaths.</p>
</li>
<li>
<p>Provide the <strong>Content Credentials</strong>, if these are needed.</p>
</li>
<li>
<p>If SSL verification is required, enable <strong>Verify SSL</strong> and select the SSL CA certificate.</p>
</li>
<li>
<p>Review details and click <strong>Add</strong>.</p>
</li>
<li>
<p>Navigate to <strong>Content</strong> &gt; <strong>Alternate Content Sources</strong>, click the vertical ellipsis next to the newly created alternate content source, and select <strong>Refresh</strong>.</p>
</li>
</ol>
</div>
<div id="cli-configuring-rhui-alternate-content-sources_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>On Foreman&#160;server, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer alternate-content-source create \
--alternate-content-source-type rhui \
--base-url "<em>https://rhui-cds-node/pulp/content</em>" \
--name "<em>My_ACS_Name</em>" \
--smart-proxy-ids <em>My_Smart_Proxy_ID</em> \
--ssl-client-cert-id <em>My_SSL_Client_Certificate_ID</em> \
--ssl-client-key-id <em>My_SSL_Client_Key_ID</em> \
--subpaths <em>path/to/repo/1/,path/to/repo/2/</em> \
--verify-ssl 1</pre>
</div>
</div>
</li>
<li>
<p>Check if the newly created alternate content source is listed:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer alternate-content-source list</pre>
</div>
</div>
</li>
<li>
<p>Refresh the alternate content source:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer alternate-content-source refresh --id <em>My_Alternate_Content_Source_ID</em></pre>
</div>
</div>
</li>
<li>
<p>Add the Smart&#160;Proxies to which the alternate content source is to be synced:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer alternate-content-source update \
--id <em>My_Alternate_Content_Source_ID</em> \
--smart-proxy-ids <em>My_Smart_Proxy_ID</em></pre>
</div>
</div>
</li>
<li>
<p>Refresh the alternate content sources:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer alternate-content-source refresh --id <em>My_Alternate_Content_Source_ID</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Importing_Content_content-management"><a class="anchor" href="#Importing_Content_content-management"></a>5. Importing content</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter outlines how you can import different types of content to Foreman.
For example, you can use the following chapters for information on specific types of content but the underlying procedures are the same:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#Managing_ISO_Images_content-management">Managing ISO images</a></p>
</li>
<li>
<p><a href="#Managing_Custom_File_Type_Content_content-management">Managing file type content</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="Products_and_Repositories_content-management"><a class="anchor" href="#Products_and_Repositories_content-management"></a>5.1. Products and repositories in Foreman</h3>
<div class="paragraph">
<p>Content from upstream as well as from Canonical, Oracle, Red Hat, SUSE, and custom content in Foreman have similarities:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The relationship between a Product and its repositories is the same and the repositories still require synchronization.</p>
</li>
<li>
<p>Products require a subscription for hosts to access, similar to subscriptions to Red Hat products.
Foreman creates a subscription for each product you create.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Red Hat content is already organized into Products.
For example, Red&#160;Hat Enterprise Linux Server is a <em>Product</em> in Foreman.
The repositories for that Product consist of different versions, architectures, and add-ons.
For Red&#160;Hat repositories, Products are created automatically after enabling the repository.
For more information, see <a href="#Enabling_Red_Hat_Repositories_content-management">Enabling Red&#160;Hat repositories</a>.</p>
</div>
<div class="paragraph">
<p>Other content can be organized into products however you want.
For example, you might create an EPEL (Extra Packages for Enterprise Linux) Product and add an "EPEL 7 x86_64" repository to it.</p>
</div>
</div>
<div class="sect2">
<h3 id="best-practices-for-products-and-repositories_content-management"><a class="anchor" href="#best-practices-for-products-and-repositories_content-management"></a>5.2. Best practices for products and repositories</h3>
<div class="ulist">
<ul>
<li>
<p>Use one content type per product and content view, for example, yum content only.</p>
</li>
<li>
<p>Make file repositories available over HTTP.
If you set <strong>Protected</strong> to true, you can only download content using a global debugging certificate.</p>
</li>
<li>
<p>Automate the creation of multiple products and repositories by using a Hammer script or an <a href="https://theforeman.github.io/foreman-ansible-modules/develop/index.html">Ansible playbook</a>.</p>
</li>
<li>
<p>For Red Hat content, import your Red Hat manifest into Foreman.
For more information, see <a href="#Managing_Red_Hat_Subscriptions_content-management">Managing Red Hat subscriptions</a>.</p>
</li>
<li>
<p>For SUSE content, use the SCC Manager plugin.
For more information, see <a href="#Managing_SUSE_Content_content-management">Managing SUSE content</a>.</p>
</li>
<li>
<p>Avoid uploading content to repositories with an <strong>Upstream URL</strong>.
Instead, create a repository to synchronize content and upload content to without setting an <strong>Upstream URL</strong>.</p>
<div class="paragraph">
<p>If you upload content to a repository that already synchronizes another repository, the content might be overwritten, depending on the mirroring policy and content type.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Importing_Custom_SSL_Certificates_content-management"><a class="anchor" href="#Importing_Custom_SSL_Certificates_content-management"></a>5.3. Importing SSL certificates</h3>
<div class="paragraph">
<p>Before you synchronize content from an external source, you might need to import SSL certificates into your product.
This might include client certs and keys or CA certificates for the upstream repositories you want to synchronize.</p>
</div>
<div class="paragraph">
<p>If you require SSL certificates and keys to download packages, you can add them to Foreman.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Foreman web UI, see the <a href="#cli-importing-custom-ssl-certificates_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Content Credentials</strong>.
In the Content Credentials window, click <strong>Create Content Credential</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for your SSL certificate.</p>
</li>
<li>
<p>From the <strong>Type</strong> list, select <strong>SSL Certificate</strong>.</p>
</li>
<li>
<p>In the <strong>Content Credentials Content</strong> field, paste your SSL certificate, or click <strong>Browse</strong> to upload your SSL certificate.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
<div id="cli-importing-custom-ssl-certificates_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Copy the SSL certificate to your Foreman&#160;server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ scp <em>My_SSL_Certificate</em> root@foreman.example.com:~/.</pre>
</div>
</div>
<div class="paragraph">
<p>Or download the SSL certificate to your Foreman&#160;server from an online source:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ wget -P ~ http://<em>upstream-foreman.example.com</em>/pub/katello-server-ca.crt</pre>
</div>
</div>
</li>
<li>
<p>Upload the SSL Certificate to Foreman:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-credential create \
--content-type cert \
--name "<em>My_SSL_Certificate</em>" \
--organization "<em>My_Organization</em>" \
--path ~/<em>My_SSL_Certificate</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Creating_a_Custom_Product_content-management"><a class="anchor" href="#Creating_a_Custom_Product_content-management"></a>5.4. Creating a product</h3>
<div class="paragraph">
<p>Create a product so that you can add repositories to the product.
To use the CLI instead of the Foreman web UI, see the <a href="#cli-creating-a-custom-product">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>, click <strong>Create Product</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for the product.
Foreman automatically completes the <strong>Label</strong> field based on what you have entered for <strong>Name</strong>.</p>
</li>
<li>
<p>Optional: From the <strong>GPG Key</strong> list, select the GPG key for the product.</p>
</li>
<li>
<p>Optional: From the <strong>SSL CA Cert</strong> list, select the SSL CA certificate for the product.</p>
</li>
<li>
<p>Optional: From the <strong>SSL Client Cert</strong> list, select the SSL client certificate for the product.</p>
</li>
<li>
<p>Optional: From the <strong>SSL Client Key</strong> list, select the SSL client key for the product.</p>
</li>
<li>
<p>Optional: From the <strong>Sync Plan</strong> list, select an existing sync plan or click <strong>Create Sync Plan</strong> and create a sync plan for your product requirements.</p>
</li>
<li>
<p>In the <strong>Description</strong> field, enter a description of the product.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
<div id="cli-creating-a-custom-product" class="paragraph">
<div class="title">CLI procedure</div>
<p>To create the product, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer product create \
--name "<em>My_Product</em>" \
--sync-plan "<em>Example Plan</em>" \
--description "<em>Content from My Repositories</em>" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Adding_Custom_RPM_Repositories_content-management"><a class="anchor" href="#Adding_Custom_RPM_Repositories_content-management"></a>5.5. Adding RPM repositories</h3>
<div class="paragraph">
<p>Use this procedure to add RPM repositories in Foreman.
To use the CLI instead of the Foreman web UI, see the <a href="#cli-adding-custom-rpm-repositories">CLI procedure</a>.</p>
</div>
<div class="paragraph">
<p>The Products window in the Foreman web UI also provides a <strong>Repo Discovery</strong> function that finds all repositories from a URL and you can select which ones to add to your product.
For example, you can use the <strong>Repo Discovery</strong> to search <code><a href="https://download.postgresql.org/pub/repos/yum/16/redhat/" class="bare">https://download.postgresql.org/pub/repos/yum/16/redhat/</a></code> and list all repositories for different Enterprise Linux versions and architectures.
This helps users save time importing multiple repositories from a single source.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong> and select the product that you want to use, and then click <strong>New Repository</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for the repository.
Foreman automatically completes the <strong>Label</strong> field based on what you have entered for <strong>Name</strong>.</p>
</li>
<li>
<p>Optional: In the <strong>Description</strong> field, enter a description for the repository.</p>
</li>
<li>
<p>From the <strong>Type</strong> list, select <code>yum</code> as type of repository.</p>
</li>
<li>
<p>Optional: From the <strong>Restrict to Architecture</strong> list, select an architecture.
If you want to make the repository available to all hosts regardless of the architecture, ensure to select <strong>No restriction</strong>.</p>
</li>
<li>
<p>Optional: From the <strong>Restrict to OS Version</strong> list, select the OS version.
If you want to make the repository available to all hosts regardless of the OS version, ensure to select <strong>No restriction</strong>.</p>
</li>
<li>
<p>Optional: In the <strong>Upstream URL</strong> field, enter the URL of the external repository to use as a source.
Foreman supports three protocols: <code>http://</code>, <code>https://</code>, and <code>file://</code>.
If you are using a <code>file://</code> repository, you have to place it under <code>/var/lib/pulp/sync_imports/</code> directory.</p>
<div class="paragraph">
<p>If you do not enter an upstream URL, you can manually upload packages.</p>
</div>
</li>
<li>
<p>Optional: Check the <strong>Ignore SRPMs</strong> checkbox to exclude source RPM packages from being synchronized to Foreman.</p>
</li>
<li>
<p>Optional: Check the <strong>Ignore treeinfo</strong> checkbox if you receive the error <code>Treeinfo file should have INI format</code>.
All files related to Kickstart will be missing from the repository if <code>treeinfo</code> files are skipped.</p>
</li>
<li>
<p>Select the <strong>Verify SSL</strong> checkbox if you want to verify that the upstream repository&#8217;s SSL certificates are signed by a trusted CA.</p>
</li>
<li>
<p>Optional: In the <strong>Upstream Username</strong> field, enter the user name for the upstream repository if required for authentication.
Clear this field if the repository does not require authentication.</p>
</li>
<li>
<p>Optional: In the <strong>Upstream Password</strong> field, enter the corresponding password for the upstream repository.
Clear this field if the repository does not require authentication.</p>
</li>
<li>
<p>Optional: In the <strong>Upstream Authentication Token</strong> field, provide the token of the upstream repository user for authentication.
Leave this field empty if the repository does not require authentication.</p>
</li>
<li>
<p>From the <strong>Download Policy</strong> list, select the type of synchronization Foreman&#160;server performs.
For more information, see <a href="#Download_Policies_Overview_content-management">Download policies overview</a>.</p>
</li>
<li>
<p>From the <strong>Mirroring Policy</strong> list, select the type of content synchronization Foreman&#160;server performs.
For more information, see <a href="#Mirroring_Policies_Overview_content-management">Mirroring policies overview</a>.</p>
</li>
<li>
<p>Optional: In the <strong>Retain package versions</strong> field, enter the number of versions you want to retain per package.</p>
</li>
<li>
<p>Optional: In the <strong>HTTP Proxy Policy</strong> field, select an HTTP proxy.</p>
</li>
<li>
<p>From the <strong>Checksum</strong> list, select the checksum type for the repository.</p>
</li>
<li>
<p>Optional: You can clear the <strong>Unprotected</strong> checkbox to require a subscription entitlement certificate for accessing this repository.
By default, the repository is published through HTTP.</p>
</li>
<li>
<p>Optional: From the <strong>GPG Key</strong> list, select the GPG key for the product.</p>
</li>
<li>
<p>Optional: In the <strong>SSL CA Cert</strong> field, select the SSL CA Certificate for the repository.</p>
</li>
<li>
<p>Optional: In the <strong>SSL Client cert</strong> field, select the SSL Client Certificate for the repository.</p>
</li>
<li>
<p>Optional: In the <strong>SSL Client Key</strong> field, select the SSL Client Key for the repository.</p>
</li>
<li>
<p>Click <strong>Save</strong> to create the repository.</p>
</li>
</ol>
</div>
<div id="cli-adding-custom-rpm-repositories" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Enter the following command to create the repository:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository create \
--arch "<em>My_Architecture</em>" \
--content-type "yum" \
--gpg-key-id <em>My_GPG_Key_ID</em> \
--name "<em>My_Repository</em>" \
--organization "<em>My_Organization</em>" \
--os-version "<em>My_OS_Version</em>" \
--product "<em>My_Product</em>" \
--publish-via-http true \
--url <em>My_Upstream_URL</em></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Continue to <a href="#Synchronizing_Repositories_content-management">synchronize the repository</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Adding_Custom_RPM_Repositories_for_AlmaLinux_9_content-management"><a class="anchor" href="#Adding_Custom_RPM_Repositories_for_AlmaLinux_9_content-management"></a>5.6. Adding RPM repositories for AlmaLinux 9</h3>
<div class="paragraph">
<p>This example creates a product and repositories for AlmaLinux 9.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Download and import the <a href="http://repo.almalinux.org/almalinux/RPM-GPG-KEY-AlmaLinux-9">GPG public key</a> for yum repositories for AlmaLinux 9 into Foreman.
For more information, see <a href="#Importing_a_Custom_GPG_Key_content-management">Importing a GPG key</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content &gt; Products</strong>.</p>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>AlmaLinux 9</code>.
For more information, see <a href="#Creating_a_Custom_Product_content-management">Creating a product</a>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create three repositories of type <code>yum</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>AlmaLinux 9 BaseOS</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://repo.almalinux.org/almalinux/9/extras/x86_64/os/" class="bare">http://repo.almalinux.org/almalinux/9/extras/x86_64/os/</a></code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>AlmaLinux 9 AppStream</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://repo.almalinux.org/almalinux/9/AppStream/x86_64/os/" class="bare">http://repo.almalinux.org/almalinux/9/AppStream/x86_64/os/</a></code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>AlmaLinux 9 extras</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://repo.almalinux.org/almalinux/9/extras/x86_64/os/" class="bare">http://repo.almalinux.org/almalinux/9/extras/x86_64/os/</a></code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information, see <a href="#Adding_Custom_RPM_Repositories_content-management">Adding RPM repositories</a>.</p>
</div>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>AlmaLinux 9 client</code>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create a repository of type <code>yum</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Foreman EL9 Client</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="https://yum.theforeman.org/client/3.9">Foreman Client</a>el9/</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Adding_Custom_RPM_Repositories_for_AlmaLinux_8_content-management"><a class="anchor" href="#Adding_Custom_RPM_Repositories_for_AlmaLinux_8_content-management"></a>5.7. Adding RPM repositories for AlmaLinux 8</h3>
<div class="paragraph">
<p>This example creates a product and repositories for AlmaLinux 8.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Download and import the <a href="http://repo.almalinux.org/almalinux/RPM-GPG-KEY-AlmaLinux-8">GPG public key</a> for yum repositories for AlmaLinux 8 into Foreman.
For more information, see <a href="#Importing_a_Custom_GPG_Key_content-management">Importing a GPG key</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content &gt; Products</strong>.</p>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>AlmaLinux 8</code>.
For more information, see <a href="#Creating_a_Custom_Product_content-management">Creating a product</a>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create three repositories of type <code>yum</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>AlmaLinux 8 BaseOS</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://repo.almalinux.org/almalinux/8/extras/x86_64/os/" class="bare">http://repo.almalinux.org/almalinux/8/extras/x86_64/os/</a></code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>AlmaLinux 8 AppStream</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://repo.almalinux.org/almalinux/8/AppStream/x86_64/os/" class="bare">http://repo.almalinux.org/almalinux/8/AppStream/x86_64/os/</a></code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>AlmaLinux 8 extras</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://repo.almalinux.org/almalinux/8/extras/x86_64/os/" class="bare">http://repo.almalinux.org/almalinux/8/extras/x86_64/os/</a></code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information, see <a href="#Adding_Custom_RPM_Repositories_content-management">Adding RPM repositories</a>.</p>
</div>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>AlmaLinux 8 client</code>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create a repository of type <code>yum</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Foreman EL8 Client</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="https://yum.theforeman.org/client/3.9">Foreman Client</a>el8/</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Adding_Custom_RPM_Repositories_for_CentOS_Stream_9_content-management"><a class="anchor" href="#Adding_Custom_RPM_Repositories_for_CentOS_Stream_9_content-management"></a>5.8. Adding RPM repositories for CentOS Stream 9</h3>
<div class="paragraph">
<p>This example creates a product and repositories for CentOS Stream 9.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Download and import the <a href="https://www.centos.org/keys/RPM-GPG-KEY-CentOS-Official">GPG public key</a> for yum repositories for CentOS Stream 9 into Foreman.
For more information, see <a href="#Importing_a_Custom_GPG_Key_content-management">Importing a GPG key</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content &gt; Products</strong>.</p>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>CentOS Stream 9</code>.
For more information, see <a href="#Creating_a_Custom_Product_content-management">Creating a product</a>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create three repositories of type <code>yum</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>CentOS Stream 9 BaseOS</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="https://mirror.stream.centos.org/9-stream/AppStream/x86_64/os/" class="bare">https://mirror.stream.centos.org/9-stream/AppStream/x86_64/os/</a></code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>CentOS Stream 9 AppStream</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="https://mirror.stream.centos.org/9-stream/BaseOS/x86_64/os/" class="bare">https://mirror.stream.centos.org/9-stream/BaseOS/x86_64/os/</a></code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>CentOS Stream 9 extras</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="https://mirror.stream.centos.org/SIGs/9-stream/extras/x86_64/extras-common/" class="bare">https://mirror.stream.centos.org/SIGs/9-stream/extras/x86_64/extras-common/</a></code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information, see <a href="#Adding_Custom_RPM_Repositories_content-management">Adding RPM repositories</a>.</p>
</div>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>CentOS Stream 9 client</code>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create a repository of type <code>yum</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Foreman EL9 Client</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="https://yum.theforeman.org/client/3.9">Foreman Client</a>el9/</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Adding_Custom_RPM_Repositories_for_Oracle_Linux_9_content-management"><a class="anchor" href="#Adding_Custom_RPM_Repositories_for_Oracle_Linux_9_content-management"></a>5.9. Adding RPM repositories for Oracle Linux 9</h3>
<div class="paragraph">
<p>This example creates a product and repositories for Oracle Linux 9.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Download and import the <a href="https://yum.oracle.com/RPM-GPG-KEY-oracle-ol9">GPG public key</a> for yum repositories for Oracle Linux 9 into Foreman.
For more information, see <a href="#Importing_a_Custom_GPG_Key_content-management">Importing a GPG key</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content &gt; Products</strong>.</p>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>Oracle Linux 9</code>.
For more information, see <a href="#Creating_a_Custom_Product_content-management">Creating a product</a>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create three repositories of type <code>yum</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Oracle Linux 9 BaseOS</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://yum.oracle.com/repo/OracleLinux/OL9/baseos/latest/x86_64/" class="bare">http://yum.oracle.com/repo/OracleLinux/OL9/baseos/latest/x86_64/</a></code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Oracle Linux 9 AppStream</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://yum.oracle.com/repo/OracleLinux/OL9/appstream/x86_64/" class="bare">http://yum.oracle.com/repo/OracleLinux/OL9/appstream/x86_64/</a></code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Oracle Linux 9 Addons</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://yum.oracle.com/repo/OracleLinux/OL9/addons/x86_64/" class="bare">http://yum.oracle.com/repo/OracleLinux/OL9/addons/x86_64/</a></code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information, see <a href="#Adding_Custom_RPM_Repositories_content-management">Adding RPM repositories</a>.</p>
</div>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>Oracle Linux 9 client</code>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create a repository of type <code>yum</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Foreman EL9 Client</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="https://yum.theforeman.org/client/3.9">Foreman Client</a>el9/</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Adding_Custom_RPM_Repositories_for_Oracle_Linux_8_content-management"><a class="anchor" href="#Adding_Custom_RPM_Repositories_for_Oracle_Linux_8_content-management"></a>5.10. Adding RPM repositories for Oracle Linux 8</h3>
<div class="paragraph">
<p>This example creates a product and repositories for Oracle Linux 8.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Download and import the <a href="https://yum.oracle.com/RPM-GPG-KEY-oracle-ol8">GPG public key</a> for yum repositories for Oracle Linux 8 into Foreman.
For more information, see <a href="#Importing_a_Custom_GPG_Key_content-management">Importing a GPG key</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content &gt; Products</strong>.</p>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>Oracle Linux 8</code>.
For more information, see <a href="#Creating_a_Custom_Product_content-management">Creating a product</a>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create three repositories of type <code>yum</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Oracle Linux 8 BaseOS</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://yum.oracle.com/repo/OracleLinux/OL8/baseos/latest/x86_64/" class="bare">http://yum.oracle.com/repo/OracleLinux/OL8/baseos/latest/x86_64/</a></code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Oracle Linux 8 AppStream</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://yum.oracle.com/repo/OracleLinux/OL8/appstream/x86_64/" class="bare">http://yum.oracle.com/repo/OracleLinux/OL8/appstream/x86_64/</a></code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Oracle Linux 8 Addons</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://yum.oracle.com/repo/OracleLinux/OL8/addons/x86_64/" class="bare">http://yum.oracle.com/repo/OracleLinux/OL8/addons/x86_64/</a></code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information, see <a href="#Adding_Custom_RPM_Repositories_content-management">Adding RPM repositories</a>.</p>
</div>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>Oracle Linux 8 client</code>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create a repository of type <code>yum</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Foreman EL8 Client</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="https://yum.theforeman.org/client/3.9">Foreman Client</a>el8/</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Adding_Custom_RPM_Repositories_for_Rocky_Linux_9_content-management"><a class="anchor" href="#Adding_Custom_RPM_Repositories_for_Rocky_Linux_9_content-management"></a>5.11. Adding RPM repositories for Rocky Linux 9</h3>
<div class="paragraph">
<p>This example creates a product and repositories for Rocky Linux 9.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Download and import the <a href="https://dl.rockylinux.org/pub/rocky/RPM-GPG-KEY-rockyofficial">GPG public key</a> for yum repositories for Rocky Linux 9 into Foreman.
For more information, see <a href="#Importing_a_Custom_GPG_Key_content-management">Importing a GPG key</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content &gt; Products</strong>.</p>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>Rocky Linux 9</code>.
For more information, see <a href="#Creating_a_Custom_Product_content-management">Creating a product</a>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create three repositories of type <code>yum</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Rocky Linux 9 BaseOS</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://dl.rockylinux.org/pub/rocky/9/BaseOS/x86_64/os/" class="bare">http://dl.rockylinux.org/pub/rocky/9/BaseOS/x86_64/os/</a></code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Rocky Linux 9 AppStream</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://dl.rockylinux.org/pub/rocky/9/AppStream/x86_64/os/" class="bare">http://dl.rockylinux.org/pub/rocky/9/AppStream/x86_64/os/</a></code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Rocky Linux 9 extras</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://dl.rockylinux.org/pub/rocky/9/extras/x86_64/os/" class="bare">http://dl.rockylinux.org/pub/rocky/9/extras/x86_64/os/</a></code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information, see <a href="#Adding_Custom_RPM_Repositories_content-management">Adding RPM repositories</a>.</p>
</div>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>Rocky Linux 9 client</code>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create a repository of type <code>yum</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Foreman EL9 Client</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="https://yum.theforeman.org/client/3.9">Foreman Client</a>el9/</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Adding_Custom_RPM_Repositories_for_Rocky_Linux_8_content-management"><a class="anchor" href="#Adding_Custom_RPM_Repositories_for_Rocky_Linux_8_content-management"></a>5.12. Adding RPM repositories for Rocky Linux 8</h3>
<div class="paragraph">
<p>This example creates a product and repositories for Rocky Linux 8.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Download and import the <a href="https://dl.rockylinux.org/pub/rocky/RPM-GPG-KEY-rockyofficial">GPG public key</a> for yum repositories for Rocky Linux 8 into Foreman.
For more information, see <a href="#Importing_a_Custom_GPG_Key_content-management">Importing a GPG key</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content &gt; Products</strong>.</p>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>Rocky Linux 8</code>.
For more information, see <a href="#Creating_a_Custom_Product_content-management">Creating a product</a>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create three repositories of type <code>yum</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Rocky Linux 8 BaseOS</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://dl.rockylinux.org/pub/rocky/8/BaseOS/x86_64/os/" class="bare">http://dl.rockylinux.org/pub/rocky/8/BaseOS/x86_64/os/</a></code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Rocky Linux 8 AppStream</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://dl.rockylinux.org/pub/rocky/8/AppStream/x86_64/os/" class="bare">http://dl.rockylinux.org/pub/rocky/8/AppStream/x86_64/os/</a></code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Rocky Linux 8 extras</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://dl.rockylinux.org/pub/rocky/8/extras/x86_64/os/" class="bare">http://dl.rockylinux.org/pub/rocky/8/extras/x86_64/os/</a></code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information, see <a href="#Adding_Custom_RPM_Repositories_content-management">Adding RPM repositories</a>.</p>
</div>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>Rocky Linux 8 client</code>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create a repository of type <code>yum</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Foreman EL8 Client</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="https://yum.theforeman.org/client/3.9">Foreman Client</a>el8/</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Extracting_GPG_Public_Key_Fingerprints_from_Release_Files_content-management"><a class="anchor" href="#Extracting_GPG_Public_Key_Fingerprints_from_Release_Files_content-management"></a>5.13. Extracting GPG public key fingerprints from Release files</h3>
<div class="paragraph">
<p>You can use GPG public keys to verify the authenticity of Deb repositories by verifying the signature of the <code>Release</code> file.
This example verifies the signature for the <code>Release</code> file from Debian 11.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Download the <code>Release</code> and <code>Release.gpg</code> files:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ wget https://deb.debian.org/debian/dists/bullseye/Release
$ wget https://deb.debian.org/debian/dists/bullseye/Release.gpg</pre>
</div>
</div>
</li>
<li>
<p>Verify the signature:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ gpg --verify Release.gpg Release</pre>
</div>
</div>
<div class="paragraph">
<p>Note the GPG key fingerprint for any missing public GPG keys above the <code>Can&#8217;t check signature: No public key</code> message.
These fingerprints will be used in the next step.</p>
</div>
</li>
<li>
<p>If you cannot verify the signature, import the missing GPG public keys based on their fingerprint:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ gpg --keyserver hkps://keyserver.ubuntu.com --recv-keys A7236886F3CCCAAD148A27F80E98404D386FA1D9
$ gpg --keyserver hkps://keyserver.ubuntu.com --recv-keys 4CB50190207B4758A3F73A796ED0E7B82643E131
$ gpg --keyserver hkps://keyserver.ubuntu.com --recv-keys A4285295FC7B1A81600062A9605C66F00D6C9793</pre>
</div>
</div>
</li>
<li>
<p>Optional: Verify the signature again:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ gpg --verify Release.gpg Release</pre>
</div>
</div>
</li>
<li>
<p>Export the <em>ASCII-armored</em> GPG public keys to a file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ gpg --armor --export A7236886F3CCCAAD148A27F80E98404D386FA1D9 4CB50190207B4758A3F73A796ED0E7B82643E131 A4285295FC7B1A81600062A9605C66F00D6C9793 &gt; debian_11.txt</pre>
</div>
</div>
<div class="paragraph">
<p>Ensure that <code>gpg</code> returns a <code>Good signature</code> message for each signature.</p>
</div>
<div class="paragraph">
<p>Upload the .txt file to Foreman.
For more information, see <a href="#Importing_a_Custom_GPG_Key_content-management">Importing a GPG key</a> into Foreman.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Adding_Custom_Deb_Repositories_content-management"><a class="anchor" href="#Adding_Custom_Deb_Repositories_content-management"></a>5.14. Adding Deb repositories</h3>
<div class="paragraph">
<p>Use this procedure to add Deb repositories in Foreman.
To use the CLI instead of the Foreman web UI, see the <a href="#cli-adding-custom-deb-repositories">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong> and select the product that you want to use, and then click <strong>New Repository</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for the repository.
Foreman automatically completes the <strong>Label</strong> field based on what you have entered for <strong>Name</strong>.</p>
</li>
<li>
<p>Optional: In the <strong>Description</strong> field, enter a description for the repository.</p>
</li>
<li>
<p>From the <strong>Type</strong> list, select <code>deb</code> as type of repository.</p>
</li>
<li>
<p>Optional: In the <strong>Upstream URL</strong> field, enter the URL of the external repository to use as a source.
You can find the upstream URLs on Debian-based systems in <code>/etc/apt/sources.list</code>.</p>
<div class="paragraph">
<p>If you do not enter an upstream URL, you can manually upload packages.</p>
</div>
</li>
<li>
<p>In the <strong>Releases/Distributions</strong> field, set one or multiple releases separated by whitespace.
The distributions specify the path from the repository root to the <code>Release</code> file.
Repositories that omit the <code>dists</code> directory are using the deprecated <em>flat repository structure</em>.
To synchronize a flat repository, you must specify exactly one distribution that ends with a <code>/</code>.</p>
<div class="paragraph">
<p>For official Debian repositories, set a <em>codename</em> in the <strong>Releases/Distributions</strong> field, for example <code>bullseye</code> for Debian 11 or <code>bookworm</code> for Debian 12.
Avoid using <code>stable</code> or <code>testing</code> because the codename they reference changes over time.
This helps to avoid drastic changes once a new Debian version is released and the reference is changed.
To keep things easy to manage and to avoid potential performance and network issues during synchronization, create one repository per release in Foreman.
For official Ubuntu repositories, use the Ubuntu suite, for example <code>noble</code> or <code>noble-updates</code>.</p>
</div>
</li>
<li>
<p>Optional: In the <strong>Components</strong> field, enter a component.
This indicates the licensing terms of the software packages.</p>
<div class="paragraph">
<p>In Debian, it is divided into <code>main</code>, <code>contrib</code>, and <code>non-free</code>.
For official Debian or Ubuntu repositories, Foreman community recommends leaving this field empty to synchronize all available components.
Note that some third party Debian repositories use the components in ways that may require setting an explicit selection.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">
<div class="paragraph">
<p>Ensure that you enter both <strong>Releases</strong> and <strong>Components</strong> exactly as they are in an <code>/etc/apt/sources.list</code> file.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Optional: In the <strong>Architectures</strong> field, enter one or multiple architectures.
If you want to make the repository available to all hosts regardless of the architecture, ensure to select <strong>No restriction</strong>.</p>
</li>
<li>
<p>Optional: Select the <strong>Verify SSL</strong> checkbox if you want to verify that the upstream repository&#8217;s SSL certificates are signed by a trusted CA.</p>
</li>
<li>
<p>Optional: In the <strong>Upstream Username</strong> field, enter the user name for the upstream repository if required for authentication.
Clear this field if the repository does not require authentication.</p>
</li>
<li>
<p>Optional: In the <strong>Upstream Password</strong> field, enter the corresponding password for the upstream repository.
Clear this field if the repository does not require authentication.</p>
</li>
<li>
<p>Optional: In the <strong>Upstream Authentication Token</strong> field, provide the token of the upstream repository user for authentication.
Leave this field empty if the repository does not require authentication.</p>
</li>
<li>
<p>From the <strong>Download Policy</strong> list, select the type of synchronization Foreman&#160;server performs.
For more information, see <a href="#Download_Policies_Overview_content-management">Download policies overview</a>.</p>
</li>
<li>
<p>From the <strong>Mirroring Policy</strong> list, select the type of content synchronization Foreman&#160;server performs.
For more information, see <a href="#Mirroring_Policies_Overview_content-management">Mirroring policies overview</a>.</p>
</li>
<li>
<p>Optional: In the <strong>HTTP Proxy Policy</strong> field, select an HTTP proxy.</p>
</li>
<li>
<p>Optional: You can clear the <strong>Unprotected</strong> checkbox to require a subscription entitlement certificate for accessing this repository.
By default, the repository is published through HTTP.</p>
</li>
<li>
<p>Optional: From the <strong>GPG Key</strong> list, select the GPG key if you want to verify the signatures of the <code>Release</code> files associated with the Debian repository.</p>
</li>
<li>
<p>Optional: In the <strong>SSL CA Cert</strong> field, select the SSL CA Certificate for the repository.</p>
</li>
<li>
<p>Optional: In the <strong>SSL Client cert</strong> field, select the SSL Client Certificate for the repository.</p>
</li>
<li>
<p>Optional: In the <strong>SSL Client Key</strong> field, select the SSL Client Key for the repository.</p>
</li>
<li>
<p>Click <strong>Save</strong> to create the repository.</p>
</li>
</ol>
</div>
<div id="cli-adding-custom-deb-repositories" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Enter the following command to create the repository:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository create \
--content-type "deb" \
--deb-architectures "<em>My_Deb_Architectures" \
--deb-components "_My_Deb_Components</em>" \
--deb-releases "<em>My_Deb_Releases</em>" \
--gpg-key-id "<em>My_GPG_Key_ID" \
--name "_My_Repository</em>" \
--organization "<em>My_Organization</em>" \
--product "<em>My_Product</em>" \
--publish-via-http true \
--url <em>My_Upstream_URL</em></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Continue to <a href="#Synchronizing_Repositories_content-management">synchronize the repository</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="adding-upstream-repositories-for-Debian-12_content-management"><a class="anchor" href="#adding-upstream-repositories-for-Debian-12_content-management"></a>5.15. Adding upstream repositories for Debian 12</h3>
<div class="paragraph">
<p>This example creates a product and repositories for Debian 12.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p><a href="#Extracting_GPG_Public_Key_Fingerprints_from_Release_Files_content-management">Extract the GPG public keys</a> from the <code>Release</code> file.</p>
</li>
<li>
<p><a href="#Importing_a_Custom_GPG_Key_content-management">Import the content credentials</a> into Foreman.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>Debian 12</code>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create three <code>deb</code> repositories with the following parameter values:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Debian 12 main</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://deb.debian.org/debian/" class="bare">http://deb.debian.org/debian/</a></code></p>
</li>
<li>
<p><strong>Releases/Distributions</strong>: <code>bookworm</code></p>
</li>
<li>
<p><strong>Component</strong>: <code>main</code></p>
</li>
<li>
<p><strong>Architecture</strong>: <code>amd64</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Debian 12 updates</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://deb.debian.org/debian/" class="bare">http://deb.debian.org/debian/</a></code></p>
</li>
<li>
<p><strong>Releases/Distributions</strong>: <code>bookworm-updates</code></p>
</li>
<li>
<p><strong>Component</strong>: <code>main</code></p>
</li>
<li>
<p><strong>Architecture</strong>: <code>amd64</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Debian 12 security</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://deb.debian.org/debian-security/" class="bare">http://deb.debian.org/debian-security/</a></code></p>
</li>
<li>
<p><strong>Releases/Distributions</strong>: <code>bookworm-security</code></p>
</li>
<li>
<p><strong>Component</strong>: <code>main</code></p>
</li>
<li>
<p><strong>Architecture</strong>: <code>amd64</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>Debian 12 client</code>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create a <code>deb</code> repository with the following parameter values:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Debian 12 client</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="https://oss.atix.de/Debian12/" class="bare">https://oss.atix.de/Debian12/</a></code></p>
</li>
<li>
<p><strong>Releases/Distributions</strong>: <code>stable</code></p>
</li>
<li>
<p><strong>Component</strong>: <code>main</code></p>
</li>
<li>
<p><strong>Architecture</strong>: <code>amd64</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>To create a product, see <a href="#Creating_a_Custom_Product_content-management">Creating a product</a>.</p>
</li>
<li>
<p>To create a repository, see <a href="#Adding_Custom_Deb_Repositories_content-management">Adding Deb repositories</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="adding-upstream-repositories-for-Debian-11_content-management"><a class="anchor" href="#adding-upstream-repositories-for-Debian-11_content-management"></a>5.16. Adding upstream repositories for Debian 11</h3>
<div class="paragraph">
<p>This example creates a product and repositories for Debian 11.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p><a href="#Extracting_GPG_Public_Key_Fingerprints_from_Release_Files_content-management">Extract the GPG public keys</a> from the <code>Release</code> file.</p>
</li>
<li>
<p><a href="#Importing_a_Custom_GPG_Key_content-management">Import the content credentials</a> into Foreman.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>Debian 11</code>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create three <code>deb</code> repositories with the following parameter values:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Debian 11 main</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://deb.debian.org/debian/" class="bare">http://deb.debian.org/debian/</a></code></p>
</li>
<li>
<p><strong>Releases/Distributions</strong>: <code>bullseye</code></p>
</li>
<li>
<p><strong>Component</strong>: <code>main</code></p>
</li>
<li>
<p><strong>Architecture</strong>: <code>amd64</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Debian 11 updates</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://deb.debian.org/debian/" class="bare">http://deb.debian.org/debian/</a></code></p>
</li>
<li>
<p><strong>Releases/Distributions</strong>: <code>bullseye-updates</code></p>
</li>
<li>
<p><strong>Component</strong>: <code>main</code></p>
</li>
<li>
<p><strong>Architecture</strong>: <code>amd64</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Debian 11 security</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://deb.debian.org/debian-security/" class="bare">http://deb.debian.org/debian-security/</a></code></p>
</li>
<li>
<p><strong>Releases/Distributions</strong>: <code>bullseye-security</code></p>
</li>
<li>
<p><strong>Component</strong>: <code>main</code></p>
</li>
<li>
<p><strong>Architecture</strong>: <code>amd64</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>Debian 11 client</code>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create a <code>deb</code> repository with the following parameter values:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Debian 11 client</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="https://oss.atix.de/Debian11/" class="bare">https://oss.atix.de/Debian11/</a></code></p>
</li>
<li>
<p><strong>Releases/Distributions</strong>: <code>stable</code></p>
</li>
<li>
<p><strong>Component</strong>: <code>main</code></p>
</li>
<li>
<p><strong>Architecture</strong>: <code>amd64</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>To create a product, see <a href="#Creating_a_Custom_Product_content-management">Creating a product</a>.</p>
</li>
<li>
<p>To create a repository, see <a href="#Adding_Custom_Deb_Repositories_content-management">Adding Deb repositories</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="adding-upstream-repositories-for-Ubuntu-24-04_content-management"><a class="anchor" href="#adding-upstream-repositories-for-Ubuntu-24-04_content-management"></a>5.17. Adding upstream repositories for Ubuntu 24.04</h3>
<div class="paragraph">
<p>This example creates a product and repositories for Ubuntu 24.04.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p><a href="#Extracting_GPG_Public_Key_Fingerprints_from_Release_Files_content-management">Extract the GPG public keys</a> from the <code>Release</code> file.</p>
</li>
<li>
<p><a href="#Importing_a_Custom_GPG_Key_content-management">Import the content credentials</a> into Foreman.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>Ubuntu 24.04</code>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create three <code>deb</code> repositories with the following parameter values:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Ubuntu 24.04 main</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://archive.ubuntu.com/ubuntu/" class="bare">http://archive.ubuntu.com/ubuntu/</a></code></p>
</li>
<li>
<p><strong>Releases/Distributions</strong>: <code>noble</code></p>
</li>
<li>
<p><strong>Component</strong>: <code>main</code></p>
</li>
<li>
<p><strong>Architecture</strong>: <code>amd64</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Ubuntu 24.04 updates</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://archive.ubuntu.com/ubuntu/" class="bare">http://archive.ubuntu.com/ubuntu/</a></code></p>
</li>
<li>
<p><strong>Releases/Distributions</strong>: <code>noble-updates</code></p>
</li>
<li>
<p><strong>Component</strong>: <code>main</code></p>
</li>
<li>
<p><strong>Architecture</strong>: <code>amd64</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Ubuntu 24.04 security</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://security.ubuntu.com/ubuntu/" class="bare">http://security.ubuntu.com/ubuntu/</a></code></p>
</li>
<li>
<p><strong>Releases/Distributions</strong>: <code>noble-security</code></p>
</li>
<li>
<p><strong>Component</strong>: <code>main</code></p>
</li>
<li>
<p><strong>Architecture</strong>: <code>amd64</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>Ubuntu 24.04 client</code>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create a <code>deb</code> repository with the following parameter values:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Ubuntu 24.04 client</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="https://oss.atix.de/Ubuntu24LTS/" class="bare">https://oss.atix.de/Ubuntu24LTS/</a></code></p>
</li>
<li>
<p><strong>Releases/Distributions</strong>: <code>stable</code></p>
</li>
<li>
<p><strong>Component</strong>: <code>main</code></p>
</li>
<li>
<p><strong>Architecture</strong>: <code>amd64</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>To create a product, see <a href="#Creating_a_Custom_Product_content-management">Creating a product</a>.</p>
</li>
<li>
<p>To create a repository, see <a href="#Adding_Custom_Deb_Repositories_content-management">Adding Deb repositories</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="adding-upstream-repositories-for-Ubuntu-22-04_content-management"><a class="anchor" href="#adding-upstream-repositories-for-Ubuntu-22-04_content-management"></a>5.18. Adding upstream repositories for Ubuntu 22.04</h3>
<div class="paragraph">
<p>This example creates a product and repositories for Ubuntu 22.04.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p><a href="#Extracting_GPG_Public_Key_Fingerprints_from_Release_Files_content-management">Extract the GPG public keys</a> from the <code>Release</code> file.</p>
</li>
<li>
<p><a href="#Importing_a_Custom_GPG_Key_content-management">Import the content credentials</a> into Foreman.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>Ubuntu 22.04</code>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create three <code>deb</code> repositories with the following parameter values:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Ubuntu 22.04 main</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://archive.ubuntu.com/ubuntu/" class="bare">http://archive.ubuntu.com/ubuntu/</a></code></p>
</li>
<li>
<p><strong>Releases/Distributions</strong>: <code>jammy</code></p>
</li>
<li>
<p><strong>Component</strong>: <code>main</code></p>
</li>
<li>
<p><strong>Architecture</strong>: <code>amd64</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Ubuntu 22.04 updates</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://archive.ubuntu.com/ubuntu/" class="bare">http://archive.ubuntu.com/ubuntu/</a></code></p>
</li>
<li>
<p><strong>Releases/Distributions</strong>: <code>jammy-updates</code></p>
</li>
<li>
<p><strong>Component</strong>: <code>main</code></p>
</li>
<li>
<p><strong>Architecture</strong>: <code>amd64</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Ubuntu 22.04 security</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="http://security.ubuntu.com/ubuntu/" class="bare">http://security.ubuntu.com/ubuntu/</a></code></p>
</li>
<li>
<p><strong>Releases/Distributions</strong>: <code>jammy-security</code></p>
</li>
<li>
<p><strong>Component</strong>: <code>main</code></p>
</li>
<li>
<p><strong>Architecture</strong>: <code>amd64</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Create Product</strong> to create a product named <code>Ubuntu 22.04 client</code>.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong> to create a <code>deb</code> repository with the following parameter values:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Ubuntu 22.04 client</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: <code><a href="https://oss.atix.de/Ubuntu22LTS/" class="bare">https://oss.atix.de/Ubuntu22LTS/</a></code></p>
</li>
<li>
<p><strong>Releases/Distributions</strong>: <code>stable</code></p>
</li>
<li>
<p><strong>Component</strong>: <code>main</code></p>
</li>
<li>
<p><strong>Architecture</strong>: <code>amd64</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>To create a product, see <a href="#Creating_a_Custom_Product_content-management">Creating a product</a>.</p>
</li>
<li>
<p>To create a repository, see <a href="#Adding_Custom_Deb_Repositories_content-management">Adding Deb repositories</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Synchronizing-Ubuntu-Expanded-Security-Maintenance-content_content-management"><a class="anchor" href="#Synchronizing-Ubuntu-Expanded-Security-Maintenance-content_content-management"></a>5.19. Synchronizing Ubuntu Expanded Security Maintenance content</h3>
<div class="paragraph">
<p>Canonical provides Ubuntu <a href="https://ubuntu.com/security/esm">Expanded Security Maintenance</a> (ESM) repositories to their paying customers.
In Foreman, synchronize ESM repositories from Canonical to distribute content to your hosts running Ubuntu 14.04 and Ubuntu 16.04.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>Providing <a href="https://ubuntu.com/security/esm">Ubuntu ESM</a> repositories to hosts running Ubuntu 14.04 or 16.04 requires a subscription from Canonical.
Ensure to provide valid licenses for all used Canonical products.
Using insufficient, invalid, or otherwise inadequate licenses might violate your terms with Canonical.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>On a host running Ubuntu 14.04 or 16.04, attach your subscription and extract repository information:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Install <code>ubuntu-advantage-tools</code> on a host running Ubuntu 14.04 or 16.04:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># apt-get install ubuntu-advantage-tools</pre>
</div>
</div>
</li>
<li>
<p>Register your host with Canonical:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ua attach <em>ABCDEF0123456789</em></pre>
</div>
</div>
<div class="paragraph">
<p>Use your subscription token from <a href="https://canonical.com/">canonical.com</a>.</p>
</div>
</li>
<li>
<p>Extract the <code>Upstream URL</code>, <code>Releases</code>, <code>Components</code>, and <code>Architectures</code> from the ESM repository:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># cat /etc/apt/sources.list.d/ubuntu-esm-infra.list</pre>
</div>
</div>
</li>
<li>
<p>Extract user name and password:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># cat /etc/apt/auth.conf.d/90ubuntu-advantage</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Add GPG public key to Foreman:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Content Credentials</strong>.</p>
</li>
<li>
<p>Click <strong>Create Content Credential</strong>.</p>
</li>
<li>
<p>Enter a name and the GPG public key for Ubuntu.</p>
<div class="paragraph">
<p>Ensure to use ASCII-armored GPG keys.
Convert the key if necessary:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># gpg --import ubuntu-advantage-esm-infra-trusty.gpg
# gpg --export --armor 4067E40313CB4B13</pre>
</div>
</div>
</li>
<li>
<p>Click <strong>Save</strong> to save your content credential to Foreman.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Create a product and repository:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Click <strong>Create Product</strong>.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Enter a <strong>Name</strong>, select the previously imported GPG public key, and, optionally, add a sync plan and description.</p>
</li>
<li>
<p>Click <strong>Save</strong> to save the product to Foreman.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Select the previously created product.</p>
</li>
<li>
<p>Click <strong>New Repository</strong>.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Enter a <strong>Name</strong> and select type <code>deb</code>.</p>
</li>
<li>
<p>Enter the <strong>Upstream URL</strong>, <strong>Releases</strong>, <strong>Components</strong>, and <strong>Architectures</strong> as extracted from your host from <code>/etc/apt/sources.list.d/ubuntu-esm-infra.list</code>.</p>
</li>
<li>
<p>Enter the <strong>Upstream Username</strong> and <strong>Upstream Password</strong> as extracted from your host from <code>/etc/apt/auth.conf.d/90ubuntu-advantage</code>.</p>
</li>
<li>
<p>Click <strong>Save</strong> to save your repository to Foreman.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Synchronize your product.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Select the previously created product.</p>
</li>
<li>
<p>In the <strong>Actions</strong> menu, select <strong>Sync Now</strong>.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Next steps</div>
<ul>
<li>
<p>Distribute and manage your content as you manage other Deb content.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Changing_the_Repository_Sets_Status_for-a-Host-in_foreman_content-management"><a class="anchor" href="#Changing_the_Repository_Sets_Status_for-a-Host-in_foreman_content-management"></a>5.20. Changing the repository sets status for a host in Foreman</h3>
<div class="paragraph">
<p>Repository sets show repositories available to each host.
A host will be able to access content from a given repository if that repository is enabled.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong> and select a host.</p>
</li>
<li>
<p>Select the <strong>Content</strong> tab, then select the <strong>Repository sets</strong> subtab.
On the tab, there is a set of repositories available to each host with a status of <strong>Enabled</strong> or <strong>Disabled</strong>.</p>
</li>
<li>
<p>You can override the default status by using the action menus on each table row by changing the status to <strong>Override to disabled</strong>, <strong>Override to enabled</strong>, or <strong>Reset to default</strong>.</p>
</li>
<li>
<p>You can also bulk select the checkboxes on each table row, and use the vertical ellipsis icon at the top.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>For hosts not in the default content view and lifecycle environment, the <strong>Repository sets</strong> tab shows a toggle group with two options, <strong>Limit to environment</strong> and <strong>Show all</strong>.
The <strong>Limit to environment</strong> option shows only repositories that are relevant to the host.
The <strong>Show all</strong> option shows all available repositories including those that may not be in the host&#8217;s content view and lifecycle environment.
On the <strong>Overview</strong> tab, click <strong>Content view details</strong> to view the environment for the host.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Enabling_Red_Hat_Repositories_content-management"><a class="anchor" href="#Enabling_Red_Hat_Repositories_content-management"></a>5.21. Enabling Red&#160;Hat repositories</h3>
<div class="paragraph">
<p>If outside network access requires usage of an HTTP proxy, configure a default HTTP proxy for your server.
For more information, see <a href="https://docs.theforeman.org/3.9/Installing_Server/index-katello.html#adding-a-default-http-proxy_katello">Adding a Default HTTP Proxy to Foreman</a>.</p>
</div>
<div class="paragraph">
<p>To select the repositories to synchronize, you must first identify the Product that contains the repository, and then enable that repository based on the relevant release version and base architecture.</p>
</div>
<div class="paragraph">
<div class="title">For Red&#160;Hat Enterprise Linux 8 hosts</div>
<p>To provision Red&#160;Hat Enterprise Linux 8 hosts, you require the <strong>Red&#160;Hat Enterprise Linux 8 for x86_64 - AppStream (RPMs)</strong> and <strong>Red&#160;Hat Enterprise Linux 8 for x86_64 - BaseOS (RPMs)</strong> repositories.</p>
</div>
<div class="paragraph">
<div class="title">For Red&#160;Hat Enterprise Linux 7 hosts</div>
<p>To provision Red&#160;Hat Enterprise Linux 7 hosts, you require the <strong>Red&#160;Hat Enterprise Linux 7 Server (RPMs)</strong> repository.</p>
</div>
<div class="paragraph">
<p>The difference between associating Red&#160;Hat Enterprise Linux operating system release version with either <strong>7Server</strong> repositories or <strong>7.<em>X</em></strong> repositories is that <strong>7Server</strong> repositories contain all the latest updates while <strong>Red&#160;Hat Enterprise Linux 7.<em>X</em></strong> repositories stop getting updates after the next minor version release.
Note that Kickstart repositories only have minor versions.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Red&#160;Hat Repositories</strong>.</p>
</li>
<li>
<p>To find repositories, either enter the repository name, or toggle the <strong>Recommended Repositories</strong> button to the on position to view a list of repositories that you require.</p>
</li>
<li>
<p>In the Available Repositories pane, click a repository to expand the repository set.</p>
</li>
<li>
<p>Click the <strong>Enable</strong> icon next to the base architecture and release version that you want.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>To search for your Product, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer product list --organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>List the repository set for the Product:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository-set list \
--product "Red Hat Enterprise Linux Server" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Enable the repository using either the name or ID number.
Include the release version, such as <code>7Server</code>, and base architecture, such as <code>x86_64</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository-set enable \
--name "Red Hat Enterprise Linux 7 Server (RPMs)" \
--releasever "7Server" \
--basearch "x86_64" \
--product "Red Hat Enterprise Linux Server" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Synchronizing_Repositories_content-management"><a class="anchor" href="#Synchronizing_Repositories_content-management"></a>5.22. Synchronizing repositories</h3>
<div class="paragraph">
<p>You must synchronize repositories to download content into Foreman.
You can use this procedure for an initial synchronization of repositories or to synchronize repositories manually as you need.</p>
</div>
<div class="paragraph">
<p>You can also sync all repositories in an organization.
For more information, see <a href="#Synchronizing_All_Repositories_in_an_Organization_content-management">Synchronizing all repositories in an organization</a>.</p>
</div>
<div class="paragraph">
<p>Create a sync plan to ensure updates on a regular basis.
For more information, see <a href="#Creating_a_Sync_Plan_content-management">Creating a sync plan</a>.</p>
</div>
<div class="paragraph">
<p>The synchronization duration depends on the size of each repository and the speed of your network connection.
The following table provides estimates of how long it would take to synchronize content, depending on the available Internet bandwidth:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">Single Package (10Mb)</th>
<th class="tableblock halign-left valign-top">Minor Release (750Mb)</th>
<th class="tableblock halign-left valign-top">Major Release (6Gb)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">256 Kbps</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5 Mins 27 Secs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6 Hrs 49 Mins 36 Secs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 Days 7 Hrs 55 Mins</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">512 Kbps</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 Mins 43.84 Secs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3 Hrs 24 Mins 48 Secs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 Day 3 Hrs 57 Mins</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">T1 (1.5 Mbps)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">54.33 Secs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 Hr 7 Mins 54.78 Secs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">9 Hrs 16 Mins 20.57 Secs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 Mbps</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8.39 Secs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 Mins 29.15 Secs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 Hr 25 Mins 53.96 Secs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">100 Mbps</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.84 Secs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 Min 2.91 Secs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8 Mins 35.4 Secs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1000 Mbps</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.08 Secs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6.29 Secs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">51.54 Secs</p></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong> and select the Product that contains the repositories that you want to synchronize.</p>
</li>
<li>
<p>Select the repositories that you want to synchronize and click <strong>Sync Now</strong>.</p>
</li>
<li>
<p>Optional: To view the progress of the synchronization in the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Sync Status</strong> and expand the corresponding Product or repository tree.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Synchronize an entire Product:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer product synchronize \
--name "<em>My_Product</em>" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Synchronize an individual repository:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository synchronize \
--name "<em>My_Repository</em>" \
--organization "<em>My_Organization</em>" \
--product "<em>My Product</em>"</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Synchronizing_All_Repositories_in_an_Organization_content-management"><a class="anchor" href="#Synchronizing_All_Repositories_in_an_Organization_content-management"></a>5.23. Synchronizing all repositories in an organization</h3>
<div class="paragraph">
<p>Use this procedure to synchronize all repositories within an organization.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in to your Foreman&#160;server using SSH.</p>
</li>
<li>
<p>Run the following Bash script:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-terminal" data-lang="terminal">ORG="<em>My_Organization</em>"

for i in $(hammer --no-headers --csv repository list --organization $ORG --fields Id)
do
  hammer repository synchronize --id ${i} --organization $ORG --async
done</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Download_Policies_Overview_content-management"><a class="anchor" href="#Download_Policies_Overview_content-management"></a>5.24. Download policies overview</h3>
<div class="paragraph">
<p>Foreman provides multiple download policies for synchronizing Deb and Yum content and container images.
For example, you might want to download only the content metadata while deferring the actual content download for later.</p>
</div>
<div class="paragraph">
<p>Foreman&#160;server has the following policies:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Immediate</dt>
<dd>
<p>Foreman&#160;server downloads all metadata and packages during synchronization.</p>
</dd>
<dt class="hdlist1">On Demand</dt>
<dd>
<p>Foreman&#160;server downloads only the metadata during synchronization.
Foreman&#160;server only fetches and stores packages on the file system when Smart&#160;Proxies or directly connected clients request them.
This setting has no effect if you set a corresponding repository on a Smart&#160;Proxy to <strong>Immediate</strong> because Foreman&#160;server is forced to download all the packages.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The <strong>On Demand</strong> policy acts as a <em>Lazy Synchronization</em> feature because they save time synchronizing content.
The lazy synchronization feature must be used only for Deb and Yum repositories.
You can add the packages to content views and promote to lifecycle environments as normal.</p>
</div>
<div class="paragraph">
<p>Smart&#160;Proxy&#160;server has the following policies:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Immediate</dt>
<dd>
<p>Smart&#160;Proxy&#160;server downloads all metadata and packages during synchronization.
Do not use this setting if the corresponding repository on Foreman&#160;server is set to <strong>On Demand</strong> as Foreman&#160;server is forced to download all the packages.</p>
</dd>
<dt class="hdlist1">On Demand</dt>
<dd>
<p>Smart&#160;Proxy&#160;server only downloads the metadata during synchronization.
Smart&#160;Proxy&#160;server fetches and stores packages only on the file system when directly connected clients request them.
When you use an <strong>On Demand</strong> download policy, content is downloaded from Foreman&#160;server if it is not available on Smart&#160;Proxy&#160;server.</p>
</dd>
<dt class="hdlist1">Inherit</dt>
<dd>
<p>Smart&#160;Proxy&#160;server inherits the download policy for the repository from the corresponding repository on Foreman&#160;server.</p>
</dd>
<dt class="hdlist1">Streamed Download Policy</dt>
<dd>
<p>Streamed Download Policy for Smart&#160;Proxies permits Smart&#160;Proxies to avoid caching any content.
When content is requested from the Smart&#160;Proxy, it functions as a proxy and requests the content directly from the Foreman.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="Changing_the_Default_Download_Policy"><a class="anchor" href="#Changing_the_Default_Download_Policy"></a>5.25. Changing the default download policy</h3>
<div class="paragraph">
<p>You can set the default download policy that Foreman applies to repositories that you create in all organizations.</p>
</div>
<div class="paragraph">
<p>Depending on whether it is a Red Hat, SUSE, or repository, Foreman uses separate settings.
Changing the default value does not change existing settings.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Settings</strong>.</p>
</li>
<li>
<p>Click the <strong>Content</strong> tab.</p>
</li>
<li>
<p>Change the default download policy depending on your requirements:</p>
<div class="ulist">
<ul>
<li>
<p>To change the default download policy for a Red Hat repository, change the value of the <strong>Default Red Hat Repository download policy</strong> setting.</p>
</li>
<li>
<p>To change the default download policy for a non-Red Hat repository, change the value of the <strong>Default Custom Repository download policy</strong> setting.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>To change the default download policy for Red Hat repositories to one of <code>immediate</code> or <code>on_demand</code>, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre># hammer settings set \
--name default_redhat_download_policy \
--value <em>immediate</em></pre>
</div>
</div>
</li>
<li>
<p>To change the default download policy for a repository to one of <code>immediate</code> or <code>on_demand</code>, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre># hammer settings set \
--name default_download_policy \
--value <em>immediate</em></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="changing_the_download_policy_for_a_repository_content-management"><a class="anchor" href="#changing_the_download_policy_for_a_repository_content-management"></a>5.26. Changing the download policy for a repository</h3>
<div class="paragraph">
<p>You can set the download policy for a repository.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Select the required product name.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click the required repository name, locate the <strong>Download Policy</strong> field, and click the edit icon.</p>
</li>
<li>
<p>From the list, select the required download policy and then click <strong>Save</strong>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List the repositories for an organization:</p>
<div class="listingblock">
<div class="content">
<pre># hammer repository list \
--organization-label <em>My_Organization_Label</em></pre>
</div>
</div>
</li>
<li>
<p>Change the download policy for a repository to <code>immediate</code> or <code>on_demand</code>:</p>
<div class="listingblock">
<div class="content">
<pre># hammer repository update \
--download-policy immediate \
--name "<em>My_Repository</em>" \
--organization-label <em>My_Organization_Label</em> \
--product "<em>My_Product</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Mirroring_Policies_Overview_content-management"><a class="anchor" href="#Mirroring_Policies_Overview_content-management"></a>5.27. Mirroring policies overview</h3>
<div class="paragraph">
<p>Mirroring keeps the local repository exactly in synchronization with the upstream repository.
If any content is removed from the upstream repository since the last synchronization, with the next synchronization, it will be removed from the local repository as well.</p>
</div>
<div class="paragraph">
<p>You can use mirroring policies for finer control over mirroring of repodata and content when synchronizing a repository.
For example, if it is not possible to mirror the repodata for a repository, you can set the mirroring policy to mirror only content for this repository.</p>
</div>
<div class="paragraph">
<p>Foreman&#160;server has the following mirroring policies:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Additive</dt>
<dd>
<p>Neither the content nor the repodata is mirrored.
Thus, only new content added since the last synchronization is added to the local repository and nothing is removed.</p>
</dd>
<dt class="hdlist1">Content Only</dt>
<dd>
<p>Mirrors only content and not the repodata.
Some repositories do not support metadata mirroring, in such cases you can set the mirroring policy to content only to only mirror the content.</p>
</dd>
<dt class="hdlist1">Complete Mirroring</dt>
<dd>
<p>Mirrors content as well as repodata.
This is the fastest method.
This mirroring policy is only available for Yum content.</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>Avoid republishing metadata for repositories with Complete Mirror mirroring policy.
This also applies to content views containing repositories with the Complete Mirror mirroring policy.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="Changing_the_Mirroring_Policy_for_a_Repository_content-management"><a class="anchor" href="#Changing_the_Mirroring_Policy_for_a_Repository_content-management"></a>5.28. Changing the mirroring policy for a repository</h3>
<div class="paragraph">
<p>You can set the mirroring policy for a repository.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Foreman web UI, see the <a href="#cli-Changing_the_Mirroring_Policy_for_a_Repository_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Select the product name.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click the repository name, locate the <strong>Mirroring Policy</strong> field, and click the edit icon.</p>
</li>
<li>
<p>From the list, select a mirroring policy and click <strong>Save</strong>.</p>
</li>
</ol>
</div>
<div id="cli-Changing_the_Mirroring_Policy_for_a_Repository_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List the repositories for an organization:</p>
<div class="listingblock">
<div class="content">
<pre># hammer repository list \
--organization-label <em>My_Organization_Label</em></pre>
</div>
</div>
</li>
<li>
<p>Change the mirroring policy for a repository to <code>additive</code>, <code>mirror_complete</code>, or <code>mirror_content_only</code>:</p>
<div class="listingblock">
<div class="content">
<pre># hammer repository update \
--id 1 \
--mirroring-policy mirror_complete</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Uploading_Content_to_custom_rpm_Repositories_content-management"><a class="anchor" href="#Uploading_Content_to_custom_rpm_Repositories_content-management"></a>5.29. Uploading content to RPM repositories</h3>
<div class="paragraph">
<p>You can upload individual RPMs and source RPMs to RPM repositories.
You can upload RPMs using the Foreman web UI or the Hammer CLI.
You must use the Hammer CLI to upload source RPMs.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Click the name of the product.</p>
</li>
<li>
<p>In the <strong>Repositories</strong> tab, click the name of the RPM repository.</p>
</li>
<li>
<p>Under <strong>Upload Package</strong>, click <strong>Browse&#8230;&#8203;</strong> and select the RPM you want to upload.</p>
</li>
<li>
<p>Click <strong>Upload</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To view all RPMs in this repository, click the number next to <strong>Packages</strong> under <strong>Content Counts</strong>.</p>
</div>
<div class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Enter the following command to upload an RPM:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository upload-content \
--id <em>My_Repository_ID</em> \
--path <em>/path/to/example-package.rpm</em></pre>
</div>
</div>
</li>
<li>
<p>Enter the following command to upload a source RPM:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository upload-content \
--content-type srpm \
--id <em>My_Repository_ID</em> \
--path <em>/path/to/example-package.src.rpm</em></pre>
</div>
</div>
<div class="paragraph">
<p>When the upload is complete, you can view information about a source RPM by using the commands <code>hammer srpm list</code> and <code>hammer srpm info --id <em>srpm_ID</em></code>.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Refreshing_Content_Counts_on_Smart_Proxy_content-management"><a class="anchor" href="#Refreshing_Content_Counts_on_Smart_Proxy_content-management"></a>5.30. Refreshing content counts on Smart&#160;Proxy</h3>
<div class="paragraph">
<p>If your Smart&#160;Proxies have synchronized content enabled, you can refresh the number of content counts available to the environments associated with the Smart&#160;Proxy.
This displays the content views inside those environments available to the Smart&#160;Proxy.
You can then expand the content view to view the repositories associated with that content view version.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Smart&#160;Proxies</strong>, and select the Smart&#160;Proxy where you want to see the synchronized content.</p>
</li>
<li>
<p>Select the <strong>Overview</strong> tab.</p>
</li>
<li>
<p>Under <strong>Content Sync</strong>, toggle the <strong>Synchronize</strong> button to do an <strong>Optimized Sync</strong> or a <strong>Complete Sync</strong> to synchronize the Smart&#160;Proxy which refreshes the content counts.</p>
</li>
<li>
<p>Select the <strong>Content</strong> tab.</p>
</li>
<li>
<p>Choose an <strong>Environment</strong> to view content views available to those Smart&#160;Proxies by clicking <strong>&gt;</strong>.</p>
</li>
<li>
<p>Expand the content view by clicking <strong>&gt;</strong> to view repositories available to the content view and the specific version for the environment.</p>
</li>
<li>
<p>View the number of content counts under <strong>Packages</strong> specific to yum repositories.</p>
</li>
<li>
<p>View the number of errata, package groups, files, container tags, container manifests, and Ansible collections under <strong>Additional content</strong>.</p>
</li>
<li>
<p>Click the vertical ellipsis in the column to the right next to the environment and click <strong>Refresh counts</strong> to refresh the content counts synchronized on the Smart&#160;Proxy under <strong>Packages</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="configuring-selinux-to-permit-content-synchronization-on-custom-ports_content-management"><a class="anchor" href="#configuring-selinux-to-permit-content-synchronization-on-custom-ports_content-management"></a>5.31. Configuring SELinux to permit content synchronization on custom ports</h3>
<div class="paragraph">
<p>SELinux permits access of Foreman for content synchronization only on specific ports.
By default, connecting to web servers running on the following ports is permitted: 80, 81, 443, 488, 8008, 8009, 8443, and 9000.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>On Foreman, to verify the ports that are permitted by SELinux for content synchronization, enter a command as follows:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># semanage port -l | grep ^http_port_t
http_port_t     tcp      80, 81, 443, 488, 8008, 8009, 8443, 9000</pre>
</div>
</div>
</li>
<li>
<p>To configure SELinux to permit a port for content synchronization, for example 10011, enter a command as follows:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># semanage port -a -t http_port_t -p tcp 10011</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Recovering_a_Corrupted_Repository_content-management"><a class="anchor" href="#Recovering_a_Corrupted_Repository_content-management"></a>5.32. Recovering a corrupted repository</h3>
<div class="paragraph">
<p>In case of repository corruption, you can recover it by using an advanced synchronization, which has three options:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Optimized Sync</dt>
<dd>
<p>Synchronizes the repository bypassing packages that have no detected differences from the upstream packages.</p>
</dd>
<dt class="hdlist1">Complete Sync</dt>
<dd>
<p>Synchronizes all packages regardless of detected changes.
Use this option if specific packages could not be downloaded to the local repository even though they exist in the upstream repository.</p>
</dd>
<dt class="hdlist1">Verify Content Checksum</dt>
<dd>
<p>Synchronizes all packages and then verifies the checksum of all packages locally.
If the checksum of an RPM differs from the upstream, it re-downloads the RPM.
This option is relevant only for Yum content.
Use this option if you have one of the following errors:</p>
<div class="ulist">
<ul>
<li>
<p>Specific packages cause a <code>404</code> error while synchronizing with <code>yum</code>.</p>
</li>
<li>
<p><code>Package does not match intended download</code> error, which means that specific packages are corrupted.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Select the product containing the corrupted repository.</p>
</li>
<li>
<p>Select the name of a repository you want to synchronize.</p>
</li>
<li>
<p>To perform optimized sync or complete sync, select <strong>Advanced Sync</strong> from the <strong>Select Action</strong> menu.</p>
</li>
<li>
<p>Select the required option and click <strong>Sync</strong>.</p>
</li>
<li>
<p>Optional: To verify the checksum, click <strong>Verify Content Checksum</strong> from the <strong>Select Action</strong> menu.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Obtain a list of repository IDs:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository list \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Synchronize a corrupted repository using the necessary option:</p>
<div class="ulist">
<ul>
<li>
<p>For the optimized synchronization:</p>
<div class="listingblock">
<div class="content">
<pre># hammer repository synchronize \
--id <em>My_ID</em></pre>
</div>
</div>
</li>
<li>
<p>For the complete synchronization:</p>
<div class="listingblock">
<div class="content">
<pre># hammer repository synchronize \
--id <em>My_ID</em> \
--skip-metadata-check true</pre>
</div>
</div>
</li>
<li>
<p>For the validate content synchronization:</p>
<div class="listingblock">
<div class="content">
<pre># hammer repository synchronize \
--id <em>My_ID</em> \
--validate-contents true</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Republishing_Repository_Metadata_content-management"><a class="anchor" href="#Republishing_Repository_Metadata_content-management"></a>5.33. Republishing repository metadata</h3>
<div class="paragraph">
<p>You can republish repository metadata when a repository distribution does not have the content that should be distributed based on the contents of the repository.</p>
</div>
<div class="paragraph">
<p>Use this procedure with caution.
Foreman community recommends a complete repository sync or publishing a new content view version to repair broken metadata.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Select the product that includes the repository for which you want to republish metadata.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, select a repository.</p>
</li>
<li>
<p>To republish metadata for the repository, click <strong>Republish Repository Metadata</strong> from the <strong>Select Action</strong> menu.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>This action is not available for repositories that use the <strong>Complete Mirroring</strong> policy because the metadata is copied verbatim from the upstream source of the repository.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Republishing_Content_View_Metadata_content-management"><a class="anchor" href="#Republishing_Content_View_Metadata_content-management"></a>5.34. Republishing content view metadata</h3>
<div class="paragraph">
<p>Use this procedure to republish content view metadata.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle</strong> &gt; <strong>Content Views</strong>.</p>
</li>
<li>
<p>Select a content view.</p>
</li>
<li>
<p>On the <strong>Versions</strong> tab, select a content view version.</p>
</li>
<li>
<p>To republish metadata for the content view version, click <strong>Republish repository metadata</strong> from the vertical ellipsis icon.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Republishing repository metadata will regenerate metadata for all repositories in the content view version that do not adhere to the <strong>Complete Mirroring</strong> policy.</p>
</div>
</div>
<div class="sect2">
<h3 id="Adding_an_HTTP_Proxy_content-management"><a class="anchor" href="#Adding_an_HTTP_Proxy_content-management"></a>5.35. Adding an HTTP proxy</h3>
<div class="paragraph">
<p>Use this procedure to add HTTP proxies to Foreman.
You can then specify which HTTP proxy to use for Products, repositories, and supported compute resources.</p>
</div>
<div class="paragraph">
<div class="title">Prerequisites</div>
<p>Your HTTP proxy must allow access to the following hosts:</p>
</div>
<table id="host-names-for-http-proxy_content-management" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Host name</th>
<th class="tableblock halign-left valign-top">Port</th>
<th class="tableblock halign-left valign-top">Protocol</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subscription.rhsm.redhat.com</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cdn.redhat.com</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>If Foreman&#160;server uses a proxy to communicate with subscription.rhsm.redhat.com and cdn.redhat.com then the proxy must not perform SSL inspection on these communications.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Foreman web UI, see the <a href="#cli-adding-an-http-proxy">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>HTTP Proxies</strong> and select <strong>New HTTP Proxy</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for the HTTP proxy.</p>
</li>
<li>
<p>In the <strong>URL</strong> field, enter the URL for the HTTP proxy, including the port number.</p>
</li>
<li>
<p>If your HTTP proxy requires authentication, enter a <strong>Username</strong> and <strong>Password</strong>.</p>
</li>
<li>
<p>Optional: In the <strong>Test URL</strong> field, enter the HTTP proxy URL, then click <strong>Test Connection</strong> to ensure that you can connect to the HTTP proxy from Foreman.</p>
</li>
<li>
<p>Click the <strong>Locations</strong> tab and add a location.</p>
</li>
<li>
<p>Click the <strong>Organization</strong> tab and add an organization.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
<div id="cli-adding-an-http-proxy" class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>On Foreman&#160;server, enter the following command to add an HTTP proxy:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer http-proxy create \
--name <em>proxy-name</em> \
--url <em>proxy-URL:port-number</em></pre>
</div>
</div>
<div class="paragraph">
<p>If your HTTP proxy requires authentication, add the <code>--username <em>name</em></code> and <code>--password <em>password</em></code> options.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For further information, see the Knowledgebase article <a href="https://access.redhat.com/solutions/65300">How to access Red Hat Subscription Manager (RHSM) through a firewall or proxy</a> on the Red&#160;Hat Customer Portal.</p>
</div>
</div>
<div class="sect2">
<h3 id="Changing_the_HTTP_Proxy_Policy_for_a_Product_content-management"><a class="anchor" href="#Changing_the_HTTP_Proxy_Policy_for_a_Product_content-management"></a>5.36. Changing the HTTP proxy policy for a product</h3>
<div class="paragraph">
<p>For granular control over network traffic, you can set an HTTP proxy policy for each Product.
A Product&#8217;s HTTP proxy policy applies to all repositories in the Product, unless you set a different policy for individual repositories.</p>
</div>
<div class="paragraph">
<p>To set an HTTP proxy policy for individual repositories, see <a href="#Changing_the_HTTP_Proxy_Policy_for_a_Repository_content-management">Changing the HTTP proxy policy for a repository</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong> and select the checkbox next to each of the Products that you want to change.</p>
</li>
<li>
<p>From the <strong>Select Action</strong> list, select <strong>Manage HTTP Proxy</strong>.</p>
</li>
<li>
<p>Select an <strong>HTTP Proxy Policy</strong> from the list:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Global Default</strong>: Use the global default proxy setting.</p>
</li>
<li>
<p><strong>No HTTP Proxy</strong>: Do not use an HTTP proxy, even if a global default proxy is configured.</p>
</li>
<li>
<p><strong>Use specific HTTP Proxy</strong>: Select an <strong>HTTP Proxy</strong> from the list.
You must add HTTP proxies to Foreman before you can select a proxy from this list.
For more information, see <a href="#Adding_an_HTTP_Proxy_content-management">Adding an HTTP proxy</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Update</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Changing_the_HTTP_Proxy_Policy_for_a_Repository_content-management"><a class="anchor" href="#Changing_the_HTTP_Proxy_Policy_for_a_Repository_content-management"></a>5.37. Changing the HTTP proxy policy for a repository</h3>
<div class="paragraph">
<p>For granular control over network traffic, you can set an HTTP proxy policy for each repository.
To use the CLI instead of the Foreman web UI, see the <a href="#cli-Changing_the_HTTP_Proxy_Policy_for_a_Repository_content-management">CLI procedure</a>.</p>
</div>
<div class="paragraph">
<p>To set the same HTTP proxy policy for all repositories in a Product, see <a href="#Changing_the_HTTP_Proxy_Policy_for_a_Product_content-management">Changing the HTTP proxy policy for a product</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong> and click the name of the Product that contains the repository.</p>
</li>
<li>
<p>In the <strong>Repositories</strong> tab, click the name of the repository.</p>
</li>
<li>
<p>Locate the <strong>HTTP Proxy</strong> field and click the edit icon.</p>
</li>
<li>
<p>Select an <strong>HTTP Proxy Policy</strong> from the list:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Global Default</strong>: Use the global default proxy setting.</p>
</li>
<li>
<p><strong>No HTTP Proxy</strong>: Do not use an HTTP proxy, even if a global default proxy is configured.</p>
</li>
<li>
<p><strong>Use specific HTTP Proxy</strong>: Select an <strong>HTTP Proxy</strong> from the list.
You must add HTTP proxies to Foreman before you can select a proxy from this list.
For more information, see <a href="#Adding_an_HTTP_Proxy_content-management">Adding an HTTP proxy</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
<div id="cli-Changing_the_HTTP_Proxy_Policy_for_a_Repository_content-management" class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>On Foreman&#160;server, enter the following command, specifying the HTTP proxy policy you want to use:</p>
<div class="listingblock">
<div class="content">
<pre># hammer repository update \
--http-proxy-policy <em>HTTP_Proxy_Policy</em> \
--id <em>Repository_ID</em></pre>
</div>
</div>
<div class="paragraph">
<p>Specify one of the following options for <code>--http-proxy-policy</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>none</code>: Do not use an HTTP proxy, even if a global default proxy is configured.</p>
</li>
<li>
<p><code>global_default_http_proxy</code>: Use the global default proxy setting.</p>
</li>
<li>
<p><code>use_selected_http_proxy</code>: Specify an HTTP proxy using either <code>--http-proxy <em>My_HTTP_Proxy_Name</em></code> or <code>--http-proxy-id <em>My_HTTP_Proxy_ID</em></code>.
To add a new HTTP proxy to Foreman, see <a href="#Adding_an_HTTP_Proxy_content-management">Adding an HTTP proxy</a>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Creating_a_Sync_Plan_content-management"><a class="anchor" href="#Creating_a_Sync_Plan_content-management"></a>5.38. Creating a sync plan</h3>
<div class="paragraph">
<p>A sync plan checks and updates the content at a scheduled date and time.
In Foreman, you can create a sync plan and assign products to the plan.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Foreman web UI, see the <a href="#cli-creating-a-sync-plan">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Sync Plans</strong> and click <strong>New Sync Plan</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for the plan.</p>
</li>
<li>
<p>Optional: In the <strong>Description</strong> field, enter a description of the plan.</p>
</li>
<li>
<p>From the <strong>Interval</strong> list, select the interval at which you want the plan to run.</p>
</li>
<li>
<p>From the <strong>Start Date</strong> and <strong>Start Time</strong> lists, select when to start running the synchronization plan.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
<div id="cli-creating-a-sync-plan" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>To create the synchronization plan, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer sync-plan create \
--description "<em>My_Description</em>" \
--enabled true \
--interval daily \
--name "<em>My_Products</em>" \
--organization "<em>My_Organization</em>" \
--sync-date "2023-01-01 01:00:00"</pre>
</div>
</div>
</li>
<li>
<p>View the available sync plans for an organization to verify that the sync plan has been created:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer sync-plan list --organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Assigning_a_Sync_Plan_to_a_Product_content-management"><a class="anchor" href="#Assigning_a_Sync_Plan_to_a_Product_content-management"></a>5.39. Assigning a sync plan to a product</h3>
<div class="paragraph">
<p>A sync plan checks and updates the content at a scheduled date and time.
In Foreman, you can assign a sync plan to products to update content regularly.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Foreman web UI, see the <a href="#cli-assigning-a-sync-plan-to-a-product">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content &gt; Products</strong>.</p>
</li>
<li>
<p>Select a product.</p>
</li>
<li>
<p>On the <strong>Details</strong> tab, select a <strong>Sync Plan</strong> from the drop down menu.</p>
</li>
</ol>
</div>
<div id="cli-assigning-a-sync-plan-to-a-product" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Assign a sync plan to a product:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer product set-sync-plan \
--name "<em>My_Product_Name</em>" \
--organization "<em>My_Organization</em>" \
--sync-plan "<em>My_Sync_Plan_Name</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Assigning_a_Sync_Plan_to_Multiple_Products_content-management"><a class="anchor" href="#Assigning_a_Sync_Plan_to_Multiple_Products_content-management"></a>5.40. Assigning a sync plan to multiple products</h3>
<div class="paragraph">
<p>Use this procedure to assign a sync plan to the products in an organization that have been synchronized at least once and contain at least one repository.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Run the following Bash script:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-terminal" data-lang="terminal">ORG="<em>My_Organization</em>"
SYNC_PLAN="daily_sync_at_3_a.m"

hammer sync-plan create --name $SYNC_PLAN --interval daily --sync-date "2023-04-5 03:00:00" --enabled true --organization $ORG
for i in $(hammer --no-headers --csv --csv-separator="|" product list --organization $ORG --per-page 999 | grep -vi not_synced | awk -F'|' '$5 != "0" { print $1}')
do
  hammer product set-sync-plan --sync-plan $SYNC_PLAN --organization $ORG --id $i
done</code></pre>
</div>
</div>
</li>
<li>
<p>After executing the script, view the products assigned to the sync plan:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer product list --organization $ORG --sync-plan $SYNC_PLAN</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="best-practices-for-sync-plans_content-management"><a class="anchor" href="#best-practices-for-sync-plans_content-management"></a>5.41. Best practices for sync plans</h3>
<div class="ulist">
<ul>
<li>
<p>Add sync plans to products and regularly synchronize content to keep the load on Foreman low during synchronization.
Synchronize content rather more often than less often.
For example, setup a sync plan to synchronize content every day rather than only once a month.</p>
</li>
<li>
<p>Automate the creation and update of sync plans by using a Hammer script or an <a href="https://theforeman.github.io/foreman-ansible-modules/develop/index.html">Ansible playbook</a>.</p>
</li>
<li>
<p>Distribute synchronization tasks over several hours to reduce the task load by creating multiple sync plans with the <strong>Custom Cron</strong> tool.</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Cron expression examples</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Cron expression</th>
<th class="tableblock halign-left valign-top">Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0 22 * * 1-5</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">every day at 22:00 from Monday to Friday</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>30 3 * * 6,0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">at 03:30 every Saturday and Sunday</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>30 2 8-14 * *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">at 02:30 every day between the 8th and the 14th days of the month</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="Limiting_Synchronization_Concurrency_content-management"><a class="anchor" href="#Limiting_Synchronization_Concurrency_content-management"></a>5.42. Limiting synchronization concurrency</h3>
<div class="paragraph">
<p>By default, each Repository Synchronization job can fetch up to ten files at a time.
This can be adjusted on a per repository basis.</p>
</div>
<div class="paragraph">
<p>Increasing the limit may improve performance, but can cause the upstream server to be overloaded or start rejecting requests.
If you are seeing Repository syncs fail due to the upstream servers rejecting requests, you may want to try lowering the limit.</p>
</div>
<div class="listingblock">
<div class="title">CLI procedure</div>
<div class="content">
<pre class="nowrap"># hammer repository update \
--download-concurrency 5 \
--id <em>Repository_ID</em> \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Importing_a_Custom_GPG_Key_content-management"><a class="anchor" href="#Importing_a_Custom_GPG_Key_content-management"></a>5.43. Importing a GPG key</h3>
<div class="paragraph">
<p>When clients are consuming signed content, ensure that the clients are configured to validate the installation of packages with the appropriate GPG Key.
This helps to ensure that only packages from authorized sources can be installed.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Foreman web UI, see the <a href="#cli-importing-a-gpg-key">CLI procedure</a>.</p>
</div>
<div class="paragraph">
<div class="title">Prerequisites</div>
<p>Ensure that you have a copy of the GPG key used to sign the RPM content that you want to use and manage in Foreman.
Most RPM distribution providers provide their GPG Key on their website.
You can also extract this manually from an RPM:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download a copy of the version specific repository package to your local machine:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ wget <em>http://www.example.com/9.5/example-9.5-2.noarch.rpm</em></pre>
</div>
</div>
</li>
<li>
<p>Extract the RPM file without installing it:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ rpm2cpio <em>example-9.5-2.noarch.rpm</em> | cpio -idmv</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>The GPG key is located relative to the extraction at <code>etc/pki/rpm-gpg/RPM-GPG-KEY-<em>EXAMPLE-95</em></code>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Content Credentials</strong> and in the upper-right of the window, click <strong>Create Content Credential</strong>.</p>
</li>
<li>
<p>Enter the name of your repository and select <strong>GPG Key</strong> from the <strong>Type</strong> list.</p>
</li>
<li>
<p>Either paste the GPG key into the <strong>Content Credential Contents</strong> field, or click <strong>Browse</strong> and select the GPG key file that you want to import.</p>
<div class="paragraph">
<p>If your repository contains content signed by multiple GPG keys, you must enter all required GPG keys in the <strong>Content Credential Contents</strong> field with new lines between each key, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>-----BEGIN PGP PUBLIC KEY BLOCK-----

mQINBFy/HE4BEADttv2TCPzVrre+aJ9f5QsR6oWZMm7N5Lwxjm5x5zA9BLiPPGFN
4aTUR/g+K1S0aqCU+ZS3Rnxb+6fnBxD+COH9kMqXHi3M5UNzbp5WhCdUpISXjjpU
XIFFWBPuBfyr/FKRknFH15P+9kLZLxCpVZZLsweLWCuw+JKCMmnA
=F6VG
-----END PGP PUBLIC KEY BLOCK-----

-----BEGIN PGP PUBLIC KEY BLOCK-----

mQINBFw467UBEACmREzDeK/kuScCmfJfHJa0Wgh/2fbJLLt3KSvsgDhORIptf+PP
OTFDlKuLkJx99ZYG5xMnBG47C7ByoMec1j94YeXczuBbynOyyPlvduma/zf8oB9e
Wl5GnzcLGAnUSRamfqGUWcyMMinHHIKIc1X1P4I=
=WPpI
-----END PGP PUBLIC KEY BLOCK-----</pre>
</div>
</div>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
<div id="cli-importing-a-gpg-key" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Copy the GPG key to your Foreman&#160;server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ scp ~/etc/pki/rpm-gpg/RPM-GPG-KEY-<em>EXAMPLE-95</em> root@foreman.example.com:~/.</pre>
</div>
</div>
</li>
<li>
<p>Upload the GPG key to Foreman:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-credentials create \
--content-type gpg_key \
--name "<em>My_GPG_Key</em>" \
--organization "<em>My_Organization</em>" \
--path ~/RPM-GPG-KEY-<em>EXAMPLE-95</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Restricting_a_Repository_to_a_Specific_OS_Version_or_Architecture_in_Project_content-management"><a class="anchor" href="#Restricting_a_Repository_to_a_Specific_OS_Version_or_Architecture_in_Project_content-management"></a>5.44. Restricting a repository to a specific operating system or architecture in Foreman</h3>
<div class="paragraph">
<p>You can configure Foreman to make a repository available only on hosts with a specific operating system version or architecture.
For example, you can restrict a repository only to Red&#160;Hat Enterprise Linux&#160;9 hosts.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Click the product that contains the repository sets you want to restrict.</p>
</li>
<li>
<p>In the <strong>Repositories</strong> tab, click the repository you want to restrict.</p>
</li>
<li>
<p>In the <strong>Publishing Settings</strong> section, set the following options:</p>
<div class="ulist">
<ul>
<li>
<p>Set <strong>Restrict to OS version</strong> to restrict the operating system version.</p>
</li>
<li>
<p>Set <strong>Restrict to architecture</strong> to restrict the architecture.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Restricting_Hosts_Access_to_Content_content-management"><a class="anchor" href="#Restricting_Hosts_Access_to_Content_content-management"></a>6. Restricting hosts' access to content</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Foreman offers multiple options for restricting host access to content.
To give hosts access to a specific subset of the content managed by Foreman, you can use the following strategies.
Foreman community recommends to consider implementing the strategies in the order listed here:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Content views and lifecycle environments</dt>
<dd>
<p>Use content views and lifecycle environments, incorporating content view filters as needed.</p>
<div class="paragraph">
<p>For more information about content views, see <a href="#Managing_Content_Views_content-management">Managing content views</a>.</p>
</div>
<div class="paragraph">
<p>For more information about lifecycle environments, see <a href="#Managing_Application_Lifecycles_content-management">Managing application lifecycles</a>.</p>
</div>
</dd>
<dt class="hdlist1">Content overrides</dt>
<dd>
<p>By default, content hosted by Foreman can be either enabled or disabled.
In custom products, repositories are always disabled by default, while Red&#160;Hat products can be either enabled or disabled by default depending on the specific repository.
Enabling a repository gives the host access to the repository packages or other content, allowing hosts to download and install the available content.</p>
<div class="paragraph">
<p>If a repository is disabled, the host is not able to access the repository content.
A content override provides you with the option to override the default enablement value of either <strong>Enabled</strong> or <strong>Disabled</strong> for any repository.
You can add content overrides to hosts or activation keys.</p>
</div>
<div class="paragraph">
<p>For more information about adding content overrides to hosts, see <a href="https://docs.theforeman.org/3.9/Managing_Hosts/index-katello.html#Enabling_and_Disabling_Repositories_on_Hosts_managing-hosts">Enabling and Disabling Repositories on Hosts</a> in <em>Managing hosts</em>.</p>
</div>
<div class="paragraph">
<p>For more information about adding content overrides to activation keys, see <a href="#enabling-and-disabling-repositories-on-activation-key_content-management">Enabling and disabling repositories on activation key</a>.</p>
</div>
</dd>
<dt class="hdlist1">Composite content views</dt>
<dd>
<p>You can use composite content views to combine and give hosts access to the content from multiple content views.
For more information about composite content views, see <a href="#Creating_a_Composite_Content_View_content-management">Creating a composite content view</a>.</p>
</dd>
<dt class="hdlist1">Architecture and OS version restrictions</dt>
<dd>
<p>In custom products, you can set restrictions on the architecture and OS versions for <code>yum</code> repositories on which the product will be available.
For example, if you restrict a custom repository to <strong>Enterprise Linux 8</strong>, it is only available on hosts running Enterprise Linux 8.
Architecture and OS version restrictions hold the highest priority among all other strategies.
They cannot be overridden or invalidated by content overrides, changes to content views, or changes to lifecycle environments.
For this reason, it is recommended to consider the other strategies mentioned before using architecture or OS version restrictions.
Red&#160;Hat repositories set architecture and OS version restrictions automatically.</p>
</dd>
<dt class="hdlist1">Release version</dt>
<dd>
<p>Certain Red&#160;Hat repositories, such as the Red&#160;Hat Enterprise Linux dot release repositories, include a <strong>Release version</strong> in their repository metadata.
The release version is then compared with the release version specified in the <strong>System purpose</strong> properties of the host.
Access to content may be limited or restricted based on this comparison.
For more information about setting system purpose attributes, see <a href="https://docs.theforeman.org/3.9/Managing_Hosts/index-katello.html#Creating_a_Host_managing-hosts">Creating a Host in Foreman</a> in <em>Managing hosts</em>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<div class="title">Incorporating all strategies</div>
<p>A particular package or repository is available to a host only if all of the following are true:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The repository is included in the host&#8217;s content view and lifecycle environment.</p>
</li>
<li>
<p>The host&#8217;s content view has been published after the repository was added to it.</p>
</li>
<li>
<p>The repository has not been filtered out by a content view filter.</p>
</li>
<li>
<p>The repository is enabled by default or overridden to <strong>Enabled</strong> using a content override.</p>
</li>
<li>
<p>The repository has no architecture or OS version restrictions or it has architecture or OS version restrictions that match the host.</p>
</li>
<li>
<p>For certain Red&#160;Hat repositories either no release version is set or the release version matches that of the host.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Using activation keys</div>
<p>Using activation keys can simplify the workflow for some of these strategies.
You can use activation keys to perform the following actions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Assign hosts to content views and lifecycle environments.</p>
</li>
<li>
<p>Add content overrides to hosts.</p>
</li>
<li>
<p>Set system purpose attributes on hosts, including release version.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Activation keys only affect hosts during registration.
If a host is already registered, the above attributes can be changed individually for each host or through content host bulk actions.
For more information, see <a href="https://docs.theforeman.org/3.9/Managing_Content/index-katello.html#Managing_Activation_Keys_content-management">Managing Activation Keys</a> in <em>Managing content</em>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Managing_Application_Lifecycles_content-management"><a class="anchor" href="#Managing_Application_Lifecycles_content-management"></a>7. Managing application lifecycles</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter outlines the application lifecycle in Foreman and how to create and remove application lifecycles for Foreman and Smart&#160;Proxy.</p>
</div>
<div class="sect2">
<h3 id="introduction_to_application_lifecycle_content-management"><a class="anchor" href="#introduction_to_application_lifecycle_content-management"></a>7.1. Introduction to application lifecycle</h3>
<div class="paragraph">
<p>The <em>application lifecycle</em> is a concept central to Foreman&#8217;s content management functions.
The application lifecycle defines how a particular system and its software look at a particular stage.
For example, an application lifecycle might be simple; you might only have a development stage and production stage.
In this case the application lifecycle might look like this:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Development</p>
</li>
<li>
<p>Production</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>However, a more complex application lifecycle might have further stages, such as a phase for testing or a beta release.
This adds extra stages to the application lifecycle:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Development</p>
</li>
<li>
<p>Testing</p>
</li>
<li>
<p>Beta Release</p>
</li>
<li>
<p>Production</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Foreman provides methods to customize each application lifecycle stage so that it suits your specifications.</p>
</div>
<div class="paragraph">
<p>Each stage in the application lifecycle is called an <em>environment</em> in Foreman.
Each environment uses a specific collection of content.
Foreman defines these content collections as a content view.
Each content view acts as a filter where you can define what repositories, and packages to include in a particular environment.
This provides a method for you to define specific sets of content to designate to each environment.</p>
</div>
<div class="paragraph">
<p>For example, an email server might only require a simple application lifecycle where you have a production-level server for real-world use and a test server for trying out the latest mail server packages.
When the test server passes the initial phase, you can set the production-level server to use the new packages.</p>
</div>
<div class="paragraph">
<p>Another example is a development lifecycle for a software product.
To develop a new piece of software in a development environment, test it in a quality assurance environment, pre-release as a beta, then release the software as a production-level application.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/application-lifecycle.png" alt="Foreman application lifecycle">
</div>
<div class="title">Figure 1. Foreman application lifecycle</div>
</div>
</div>
<div class="sect2">
<h3 id="Content_Promotion_across_the_Application_Lifecycle_content-management"><a class="anchor" href="#Content_Promotion_across_the_Application_Lifecycle_content-management"></a>7.2. Content promotion across the application lifecycle</h3>
<div class="paragraph">
<p>In the application lifecycle chain, when content moves from one environment to the next, this is called <em>promotion</em>.</p>
</div>
<div class="paragraph">
<div class="title">Example: Content promotion across Foreman lifecycle environments</div>
<p>Each environment contains a set of systems registered to Foreman.
These systems only have access to repositories relevant to their environment.
When you promote packages from one environment to the next, the target environment&#8217;s repositories receive new package versions.
As a result, each system in the target environment can update to the new package versions.</p>
</div>
<div class="paragraph">
<p>This example uses a <code>.rpm</code> package, but you can promote any type of content across the application lifecycle.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Development</th>
<th class="tableblock halign-left valign-top">Testing</th>
<th class="tableblock halign-left valign-top">Production</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example_software</em>-1.1-0.noarch.rpm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example_software</em>-1.0-0.noarch.rpm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example_software</em>-1.0-0.noarch.rpm</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>After completing development on the patch, you promote the package to the Testing environment so the Quality Engineering team can review the patch.
The application lifecycle then contains the following package versions in each environment:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Development</th>
<th class="tableblock halign-left valign-top">Testing</th>
<th class="tableblock halign-left valign-top">Production</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example_software</em>-1.1-0.noarch.rpm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>example_software</em>-1.1-0.noarch.rpm</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example_software</em>-1.0-0.noarch.rpm</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>While the Quality Engineering team reviews the patch, the Development team starts work on <em>example_software</em> 2.0.
This results in the following application lifecycle:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Development</th>
<th class="tableblock halign-left valign-top">Testing</th>
<th class="tableblock halign-left valign-top">Production</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>example_software</em>-2.0-0.noarch.rpm</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example_software</em>-1.1-0.noarch.rpm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example_software</em>-1.0-0.noarch.rpm</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The Quality Engineering team completes their review of the patch.
Now <em>example_software</em> 1.1 is ready to release.
You promote 1.1 to the <em>Production</em> environment:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Development</th>
<th class="tableblock halign-left valign-top">Testing</th>
<th class="tableblock halign-left valign-top">Production</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example_software</em>-2.0-0.noarch.rpm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example_software</em>-1.1-0.noarch.rpm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>example_software</em>-1.1-0.noarch.rpm</strong></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The Development team completes their work on <em>example_software</em> 2.0 and promotes it to the Testing environment:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Development</th>
<th class="tableblock halign-left valign-top">Testing</th>
<th class="tableblock halign-left valign-top">Production</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example_software</em>-2.0-0.noarch.rpm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>example_software</em>-2.0-0.noarch.rpm</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example_software</em>-1.1-0.noarch.rpm</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Finally, the Quality Engineering team reviews the package.
After a successful review, promote the package to the <em>Production</em> environment:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Development</th>
<th class="tableblock halign-left valign-top">Testing</th>
<th class="tableblock halign-left valign-top">Production</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example_software</em>-2.0-0.noarch.rpm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example_software</em>-2.0-0.noarch.rpm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>example_software</em>-2.0-0.noarch.rpm</strong></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For more information, see <a href="#Promoting_a_Content_View_content-management">Promoting a content view</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="best-practices-for-lifecycle-environments_content-management"><a class="anchor" href="#best-practices-for-lifecycle-environments_content-management"></a>7.3. Best practices for lifecycle environments</h3>
<div class="ulist">
<ul>
<li>
<p>Use multiple lifecycle environment paths to implement multiple sequential stages of content consumption.
Each stage contains a defined set of content, for example in the <em>Production</em> lifecycle environment.</p>
</li>
<li>
<p>Automate the creation of lifecycle environments by using a Hammer script or an <a href="https://theforeman.github.io/foreman-ansible-modules/develop/index.html">Ansible playbook</a>.</p>
</li>
<li>
<p>Default use case: Fixed stages in each lifecycle environment paths, for example <em>Development</em>, <em>Test</em>, and <em>Production</em>.</p>
<div class="ulist">
<ul>
<li>
<p>Promote content views to lifecycle environments, for example, from <em>Test</em> to <em>Production</em>.
All content hosts consuming this content view or composite content view are able to install packages from the <em>Production</em> lifecycle environment.
Note that these packages are not installed or updated automatically.</p>
</li>
<li>
<p>If you encounter errors during patching content hosts, attach the host to a previous version of the content view.
This only affects the availability of packages but does not downgrade installed packages.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Alternative use case: Using stages in lifecycle environments for fixed content, for example, quarterly updates, and only publishing new minor versions with incremental updates from errata.</p>
<div class="ulist">
<ul>
<li>
<p>When patching content hosts, change the lifecycle environment from <code>2023-Q4</code> to <code>2024-Q1</code> using the Foreman web UI, Foreman API, Hammer CLI, or an activation key.</p>
</li>
<li>
<p>Advantage: You can directly see which software packages a hosts receives by looking at its lifecycle environment.</p>
</li>
<li>
<p>Disadvantage: Promoting content is less dynamic without clearly defined stages such as <em>Development</em>, <em>Test</em>, and <em>Production</em>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Use multiple lifecycle environment paths to define multiple stages for different environments, for example to decouple web server and database hosts.</p>
</li>
<li>
<p>Smart&#160;Proxy&#160;servers use lifecycle environments to synchronize content.
They synchronize content more efficiently if you split content into multiple lifecycle environment paths.
If a specific Smart&#160;Proxy&#160;server only serves content for one operating system in a single lifecycle environment path, it only synchronizes required content.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Creating_a_Lifecycle_Environment_Path_content-management"><a class="anchor" href="#Creating_a_Lifecycle_Environment_Path_content-management"></a>7.4. Creating a lifecycle environment path</h3>
<div class="paragraph">
<p>To create an application lifecycle for developing and releasing software, use the <em>Library</em> environment as the initial environment to create environment paths.
Then optionally add additional environments to the environment paths.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle</strong> &gt; <strong>Lifecycle Environments</strong>.</p>
</li>
<li>
<p>Click <strong>New Environment Path</strong> to start a new application lifecycle.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for your environment.</p>
</li>
<li>
<p>In the <strong>Description</strong> field, enter a description for your environment.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
<li>
<p>Optional: To add an environment to the environment path, click <strong>Add New Environment</strong>, complete the <strong>Name</strong> and <strong>Description</strong> fields, and select the prior environment from the <strong>Prior Environment</strong> list.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>To create an environment path, enter the <code>hammer lifecycle-environment create</code> command and specify the Library environment with the <code>--prior</code> option:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer lifecycle-environment create \
--name "<em>Environment Path Name</em>" \
--description "<em>Environment Path Description</em>" \
--prior "Library" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Optional: To add an environment to the environment path, enter the <code>hammer lifecycle-environment create</code> command and specify the parent environment with the <code>--prior</code> option:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer lifecycle-environment create \
--name "<em>Environment Name</em>" \
--description "<em>Environment Description</em>" \
--prior "<em>Prior Environment Name</em>" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>To view the chain of the lifecycle environment, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer lifecycle-environment paths --organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Adding_Lifecycle_Environments_content-management"><a class="anchor" href="#Adding_Lifecycle_Environments_content-management"></a>7.5. Adding lifecycle environments to Smart&#160;Proxy&#160;servers</h3>
<div class="paragraph">
<p>If your Smart&#160;Proxy&#160;server has the content functionality enabled, you must add an environment so that Smart&#160;Proxy can synchronize content from Foreman&#160;server and provide content to host systems.</p>
</div>
<div class="paragraph">
<p>Do not assign the <em>Library</em> lifecycle environment to your Smart&#160;Proxy&#160;server because it triggers an automated Smart&#160;Proxy sync every time the CDN updates a repository.
This might consume multiple system resources on Smart&#160;Proxies, network bandwidth between Foreman and Smart&#160;Proxies, and available disk space on Smart&#160;Proxies.</p>
</div>
<div class="paragraph">
<p>You can use Hammer CLI on Foreman&#160;server or the Foreman web UI.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Smart&#160;Proxies</strong>, and select the Smart&#160;Proxy that you want to add a lifecycle to.</p>
</li>
<li>
<p>Click <strong>Edit</strong> and click the <strong>Lifecycle Environments</strong> tab.</p>
</li>
<li>
<p>From the left menu, select the lifecycle environments that you want to add to Smart&#160;Proxy and click <strong>Submit</strong>.</p>
</li>
<li>
<p>To synchronize the content on the Smart&#160;Proxy, click the <strong>Overview</strong> tab and click <strong>Synchronize</strong>.</p>
</li>
<li>
<p>Select either <strong>Optimized Sync</strong> or <strong>Complete Sync</strong>.</p>
<div class="paragraph">
<p>For definitions of each synchronization type, see <a href="https://docs.theforeman.org/3.9/Managing_Content/index-katello.html#Recovering_a_Corrupted_Repository_content-management">Recovering a Repository</a>.</p>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>To display a list of all Smart&#160;Proxy&#160;servers, on Foreman&#160;server, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer proxy list</pre>
</div>
</div>
<div class="paragraph">
<p>Note the Smart&#160;Proxy ID of the Smart&#160;Proxy to which you want to add a lifecycle.</p>
</div>
</li>
<li>
<p>Using the ID, verify the details of your Smart&#160;Proxy:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer proxy info \
--id <em>My</em>smart-proxy_ID_</pre>
</div>
</div>
</li>
<li>
<p>To view the lifecycle environments available for your Smart&#160;Proxy&#160;server, enter the following command and note the ID and the organization name:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer proxy content available-lifecycle-environments \
--id <em>My</em>smart-proxy_ID_</pre>
</div>
</div>
</li>
<li>
<p>Add the lifecycle environment to your Smart&#160;Proxy&#160;server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer proxy content add-lifecycle-environment \
--id <em>My</em>smart-proxy_ID_ \
--lifecycle-environment-id <em>My_Lifecycle_Environment_ID</em>
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>Repeat for each lifecycle environment you want to add to Smart&#160;Proxy&#160;server.</p>
</div>
</li>
<li>
<p>Synchronize the content from Foreman to Smart&#160;Proxy.</p>
<div class="ulist">
<ul>
<li>
<p>To synchronize all content from your Foreman&#160;server environment to Smart&#160;Proxy&#160;server, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer proxy content synchronize \
--id <em>My</em>smart-proxy_ID_</pre>
</div>
</div>
</li>
<li>
<p>To synchronize a specific lifecycle environment from your Foreman&#160;server to Smart&#160;Proxy&#160;server, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer proxy content synchronize \
--id <em>My</em>smart-proxy_ID_
--lifecycle-environment-id <em>My_Lifecycle_Environment_ID</em></pre>
</div>
</div>
</li>
<li>
<p>To synchronize all content from your Foreman&#160;server to your Smart&#160;Proxy&#160;server without checking metadata:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer proxy content synchronize \
--id <em>My</em>smart-proxy_ID_ \
--skip-metadata-check true</pre>
</div>
</div>
<div class="paragraph">
<p>This equals selecting <strong>Complete Sync</strong> in the Foreman web UI.</p>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Removing_Lifecycle_Environments_from_Server_content-management"><a class="anchor" href="#Removing_Lifecycle_Environments_from_Server_content-management"></a>7.6. Removing lifecycle environments from Foreman&#160;server</h3>
<div class="paragraph">
<p>Use this procedure to remove a lifecycle environment.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle Environments</strong>.</p>
</li>
<li>
<p>Click the name of the lifecycle environment that you want to remove, and then click <strong>Remove Environment</strong>.</p>
</li>
<li>
<p>Click <strong>Remove</strong> to remove the environment.</p>
</li>
</ol>
</div>
<div id="cli-Removing_Lifecycle_Environments_from_Server_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List the lifecycle environments for your organization and note the name of the lifecycle environment you want to remove:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer lifecycle-environment list \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Use the <code>hammer lifecycle-environment delete</code> command to remove an environment:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer lifecycle-environment delete \
--name "<em>My_Environment</em>" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Removing_Lifecycle_Environments_from_Smart_Proxy_content-management"><a class="anchor" href="#Removing_Lifecycle_Environments_from_Smart_Proxy_content-management"></a>7.7. Removing lifecycle environments from Smart&#160;Proxy&#160;server</h3>
<div class="paragraph">
<p>When lifecycle environments are no longer relevant to the host system or environments are added incorrectly to Smart&#160;Proxy&#160;server, you can remove the lifecycle environments from Smart&#160;Proxy&#160;server.</p>
</div>
<div class="paragraph">
<p>You can use both the Foreman web UI and the Hammer CLI to remove lifecycle environments from Smart&#160;Proxy.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Smart&#160;Proxies</strong>, and select the Smart&#160;Proxy that you want to remove a lifecycle from.</p>
</li>
<li>
<p>Click <strong>Edit</strong> and click the <strong>Lifecycle Environments</strong> tab.</p>
</li>
<li>
<p>From the right menu, select the lifecycle environments that you want to remove from Smart&#160;Proxy, and then click <strong>Submit</strong>.</p>
</li>
<li>
<p>To synchronize Smart&#160;Proxy&#8217;s content, click the <strong>Overview</strong> tab, and then click <strong>Synchronize</strong>.</p>
</li>
<li>
<p>Select either <strong>Optimized Sync</strong> or <strong>Complete Sync</strong>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Select Smart&#160;Proxy&#160;server that you want from the list and take note of its <strong>id</strong>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer proxy list</pre>
</div>
</div>
</li>
<li>
<p>To verify Smart&#160;Proxy&#160;server&#8217;s details, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer proxy info \
--id <em>My_Smart_Proxy_ID</em></pre>
</div>
</div>
</li>
<li>
<p>Verify the list of lifecycle environments currently attached to Smart&#160;Proxy&#160;server and take note of the <strong>Environment ID</strong>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer proxy content lifecycle-environments \
--id <em>My_Smart_Proxy_ID</em></pre>
</div>
</div>
</li>
<li>
<p>Remove the lifecycle environment from Smart&#160;Proxy&#160;server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer proxy content remove-lifecycle-environment \
--id <em>My_Smart_Proxy_ID</em> \
--lifecycle-environment-id <em>My_Lifecycle_Environment_ID</em></pre>
</div>
</div>
<div class="paragraph">
<p>Repeat this step for every lifecycle environment that you want to remove from Smart&#160;Proxy&#160;server.</p>
</div>
</li>
<li>
<p>Synchronize the content from Foreman&#160;server&#8217;s environment to Smart&#160;Proxy&#160;server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer proxy content synchronize \
--id <em>My_Smart_Proxy_ID</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Managing_Content_Views_content-management"><a class="anchor" href="#Managing_Content_Views_content-management"></a>8. Managing content views</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Foreman uses content views to allow your hosts access to a deliberately curated subset of content.
To do this, you must define which repositories to use and then apply certain filters to the content.</p>
</div>
<div class="paragraph">
<p>The general workflow for creating content views for filtering and creating snapshots is as follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a content view.</p>
</li>
<li>
<p>Add one or more repositories that you want to the content view.</p>
</li>
<li>
<p>Optional: Create one or more filters to refine the content of the content view.
For more information, see <a href="#Content_Filter_Examples_content-management">Content filter examples</a>.</p>
</li>
<li>
<p>Optional: Resolve any package dependencies for a content view.
For more information, see <a href="#Resolving_Package_Dependencies_content-management">Resolving package dependencies</a>.</p>
</li>
<li>
<p>Publish the content view.</p>
</li>
<li>
<p>Optional: Promote the content view to another environment.
For more information, see <a href="#Promoting_a_Content_View_content-management">Promoting a content view</a>.</p>
</li>
<li>
<p>Attach the content host to the content view.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If a repository is not associated with the content view, the file <code>/etc/yum.repos.d/redhat.repo</code> remains empty and systems registered to it cannot receive updates.
If a repository is not associated with the content view, the file <code>/etc/apt/sources.list.d/rhsm.sources</code> remains empty and systems registered to it cannot receive updates.</p>
</div>
<div class="paragraph">
<p>Hosts can only be associated with a single content view.
To associate a host with multiple content views, create a composite content view.
For more information, see <a href="#Creating_a_Composite_Content_View_content-management">Creating a composite content view</a>.</p>
</div>
<div class="sect2">
<h3 id="Content-Views-in-Foreman_content-management"><a class="anchor" href="#Content-Views-in-Foreman_content-management"></a>8.1. Content views in Foreman</h3>
<div class="paragraph">
<p>A content view is a deliberately curated subset of content that your hosts can access.
By creating a content view, you can define the software versions used by a particular environment or Smart&#160;Proxy&#160;server.</p>
</div>
<div class="paragraph">
<p>Each content view creates a set of repositories across each environment.
Your Foreman&#160;server stores and manages these repositories.
For example, you can create content views in the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A content view with older package versions for a production environment and another content view with newer package versions for a <em>Development</em> environment.</p>
</li>
<li>
<p>A content view with a package repository required by an operating system and another content view with a package repository required by an application.</p>
</li>
<li>
<p>A composite content view for a modular approach to managing content views.
For example, you can use one content view for content for managing an operating system and another content view for content for managing an application.
By creating a composite content view that combines both content views, you create a new repository that merges the repositories from each of the content views.
However, the repositories for the content views still exist and you can keep managing them separately as well.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Default Organization View</div>
<p>A <em>Default Organization View</em> is an application-controlled content view for all content that is synchronized to Foreman.
You can register a host to the <em>Library</em> environment on Foreman to consume the <em>Default Organization View</em> without configuring content views and lifecycle environments.</p>
</div>
<div class="paragraph">
<p>You can access unprotected repositories in the <em>Default Organization View</em> content view.
The URL consists of your Smart&#160;Proxy FQDN, <code>/pulp/content/</code>, your organization label, <code>/Library/custom/</code>, your product label, <code>/</code>, your repository label, and a trailing <code>/</code>, for example, <code><a href="https://foreman.example.com/pulp/content/Example/Library/custom/AlmaLinux_9/BaseOS/" class="bare">https://foreman.example.com/pulp/content/Example/Library/custom/AlmaLinux_9/BaseOS/</a></code>.
For more information, see
<a href="#Adding_Custom_Deb_Repositories_content-management">Adding Deb repositories</a> or <a href="#Adding_Custom_RPM_Repositories_content-management">Adding RPM repositories</a>.</p>
</div>
<div class="paragraph">
<div class="title">Promoting a content view across environments</div>
<p>When you promote a content view from one environment to the next environment in the application lifecycle, Foreman updates the repository and publishes the packages.</p>
</div>
<div class="exampleblock">
<div class="title">Example 1. Promoting a package from <em>Development</em> to <em>Testing</em></div>
<div class="content">
<div class="paragraph">
<p>The repositories for <em>Testing</em> and <em>Production</em> contain the <code><em>my-software</em>-1.0-0.noarch.rpm</code> package:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">Development</th>
<th class="tableblock halign-left valign-top">Testing</th>
<th class="tableblock halign-left valign-top">Production</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of the content view</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version 2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version 1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contents of the content view</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>my-software</em>-1.1-0.noarch.rpm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>my-software</em>-1.0-0.noarch.rpm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>my-software</em>-1.0-0.noarch.rpm</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>If you promote Version 2 of the content view from <em>Development</em> to <em>Testing</em>, the repository for <em>Testing</em> updates to contain the <code><em>my-software</em>-1.1-0.noarch.rpm</code> package:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">Development</th>
<th class="tableblock halign-left valign-top">Testing</th>
<th class="tableblock halign-left valign-top">Production</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of the content view</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version 2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Version 2</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version 1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contents of the content view</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>my-software</em>-1.1-0.noarch.rpm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>my-software</em>-1.1-0.noarch.rpm</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>my-software</em>-1.0-0.noarch.rpm</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This ensures hosts are designated to a specific environment but receive updates when that environment uses a new version of the content view.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>With <code>Distribute archived content view versions</code> enabled, you can access unprotected repositories in published content view versions.
The URL consists of your Smart&#160;Proxy FQDN, <code>/pulp/content/</code>, your organization label, <code>/content_views/</code>, your content view, your content view version, <code>/custom/</code>, your product label, <code>/</code>, your repository label, and a trailing <code>/</code>, for example, <code><a href="https://foreman.example.com/pulp/content/Example/content_views/AlmaLinux_9/2.1/custom/AlmaLinux_9/BaseOS/" class="bare">https://foreman.example.com/pulp/content/Example/content_views/AlmaLinux_9/2.1/custom/AlmaLinux_9/BaseOS/</a></code>.</p>
</div>
<div class="paragraph">
<p>If you want to access the latest published content view, the URL consists of your Smart&#160;Proxy FQDN, <code>/pulp/content/</code>, your organization label, your lifecycle, your content view, <code>/custom/</code>, your product label, <code>/</code>, your repository label, and a trailing <code>/</code>, for example, <code><a href="https://foreman.example.com/pulp/content/Example/Production/AlmaLinux_9/custom/AlmaLinux_9/AlmaLinux_9/" class="bare">https://foreman.example.com/pulp/content/Example/Production/AlmaLinux_9/custom/AlmaLinux_9/AlmaLinux_9/</a></code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="best-practices-for-content-views_content-management"><a class="anchor" href="#best-practices-for-content-views_content-management"></a>8.2. Best practices for content views</h3>
<div class="ulist">
<ul>
<li>
<p>Content views that bundle content, such as Enterprise Linux and additional software like <code>Apache-2.4</code> or <code>PostgreSQL-16.2</code>, are easier to maintain.
Content views that are too small require more maintenance.</p>
</li>
<li>
<p>If you require daily updated content, use the content view <code>Default Organization View</code>, which contains the latest synchronized content from all repositories and is available in the Library lifecycle environment.</p>
</li>
<li>
<p>Restrict composite content views to situations that require greater flexibility, for example, if you update one content view on a weekly basis and another content view on a monthly basis.</p>
</li>
<li>
<p>If you use composite content views, first publish the content views and then publish the composite content views.
The more content views you bundle into composite content views, the more effort is needed to change or update content.</p>
</li>
<li>
<p>Setting a lifecycle environment for content views is unnecessary if they are solely bundled to a composite content view.</p>
</li>
<li>
<p>Automate creating and publishing composite content views and lifecycle environments by using a Hammer script or an <a href="https://theforeman.github.io/foreman-ansible-modules/develop/index.html">Ansible playbook</a>.
Use cron jobs, systemd timers, or recurring logics for more visibility.</p>
</li>
<li>
<p>Add the changes and date to the description of each published content view or composite content view version.
The most recent activity, such as moving content to a new lifecycle environment, is displayed by date in the Foreman web UI, regardless of the latest changes to the content itself.</p>
</li>
<li>
<p>Publishing a new content view or composite content view creates a new major version.
Incremental errata updates increment the minor version.
Note that you cannot change or reset this counter.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="best-practices-for-patching-content-hosts_content-management"><a class="anchor" href="#best-practices-for-patching-content-hosts_content-management"></a>8.3. Best practices for patching content hosts</h3>
<div class="ulist">
<ul>
<li>
<p>Registering hosts to Foreman requires <a href="https://yum.theforeman.org/client/3.9">Foreman Client</a>, which contains the <code>subscription-manager</code> package, <code>katello-host-tools</code> package, and their dependencies.
For more information, see <a href="https://docs.theforeman.org/3.9/Managing_Hosts/index-katello.html#Registering_Hosts_managing-hosts">Registering hosts</a> in <em>Managing hosts</em>.</p>
</li>
<li>
<p>Use the Foreman web UI to install, upgrade, and remove packages from hosts.
You can update content hosts with job templates using SSH and Ansible.</p>
</li>
<li>
<p>Apply errata on content hosts using the Foreman web UI.
When patching packages on hosts using the default package manager, Foreman receives a list of packages and repositories to recalculate applicable errata and available updates.</p>
</li>
<li>
<p>Modify or replace job templates to add custom steps.
This allows you to run commands or execute scripts on hosts.</p>
</li>
<li>
<p>When running bulk actions on hosts, bundle them by major operating system version, especially when upgrading packages.</p>
</li>
<li>
<p>Select <strong>via remote execution &#8211; customize first</strong> to define the time when patches are applied to hosts when performing bulk actions.</p>
</li>
<li>
<p>You cannot apply errata to packages that are not part of the repositories on Foreman and the attached content view.</p>
</li>
<li>
<p>Modifications to installed packages using <code>rpm</code> or <code>dpkg</code> are sent to Foreman with the next run of <code>apt</code>, <code>yum</code>, or <code>zypper</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Creating_a_Content_View_content-management"><a class="anchor" href="#Creating_a_Content_View_content-management"></a>8.4. Creating a content view</h3>
<div class="paragraph">
<p>Use this procedure to create a simple content view.
To use the CLI instead of the Foreman web UI, see the <a href="#cli-creating-a-content-view_content-management">CLI procedure</a>.</p>
</div>
<div class="paragraph">
<div class="title">Prerequisites</div>
<p>While you can stipulate whether you want to resolve any package dependencies on a content view by content view basis, you might want to change the default Foreman settings to enable or disable package resolution for all content views.
For more information, see <a href="#Resolving_Package_Dependencies_content-management">Resolving package dependencies</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle</strong> &gt; <strong>Content Views</strong>.</p>
</li>
<li>
<p>Click <strong>Create content view</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for the view.
Foreman automatically completes the <strong>Label</strong> field from the name you enter.</p>
</li>
<li>
<p>In the <strong>Description</strong> field, enter a description of the view.</p>
</li>
<li>
<p>In the <strong>Type</strong> field, select a <strong>Content view</strong> or a <strong>Composite content view</strong>.</p>
</li>
<li>
<p>Optional: If you want to solve dependencies automatically every time you publish this content view, select the <strong>Solve dependencies</strong> checkbox.
Dependency solving slows the publishing time and might ignore any content view filters you use.
This can also cause errors when resolving dependencies for errata.</p>
</li>
<li>
<p>Click <strong>Create content view</strong>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Content view steps</div>
<ol class="arabic">
<li>
<p>Click <strong>Create content view</strong> to create the content view.</p>
</li>
<li>
<p>In the <strong>Repositories</strong> tab, select the repository from the <strong>Type</strong> list that you want to add to your content view, select the checkbox next to the available repositories you want to add, then click <strong>Add repositories</strong>.</p>
</li>
<li>
<p>Click <strong>Publish new version</strong> and in the <strong>Description</strong> field, enter information about the version to log changes.</p>
</li>
<li>
<p>Optional: You can enable a promotion path by clicking <strong>Promote</strong> to <strong>Select a lifecycle environment from the available promotion paths to promote new version</strong>.</p>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Review</strong> page, you can review the environments you are trying to publish.</p>
</li>
<li>
<p>Click <strong>Finish</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can view the content view on the <strong>Content Views</strong> page.
To view more information about the content view, click the content view name.
To register a host to your content view, see <a href="https://docs.theforeman.org/3.9/Managing_Hosts/index-katello.html#Registering_Hosts_managing-hosts">Registering Hosts</a> in <em>Managing hosts</em>.</p>
</div>
<div id="cli-creating-a-content-view_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Obtain a list of repository IDs:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository list --organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Create the content view and add repositories:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view create \
--description "<em>My_Content_View</em>" \
--name "<em>My_Content_View</em>" \
--organization "<em>My_Organization</em>" \
--repository-ids 1,2</pre>
</div>
</div>
<div class="paragraph">
<p>For the <code>--repository-ids</code> option, you can find the IDs in the output of the <code>hammer repository list</code> command.</p>
</div>
</li>
<li>
<p>Publish the view:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view publish \
--description "<em>My_Content_View</em>" \
--name "<em>My_Content_View</em>" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Optional: To add a repository to an existing content view, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view add-repository \
--name "<em>My_Content_View</em>" \
--organization "<em>My_Organization</em>" \
--repository-id <em>repository_ID</em></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Foreman&#160;server creates the new version of the view and publishes it to the Library environment.</p>
</div>
</div>
<div class="sect2">
<h3 id="Copying_a_Content_View_content-management"><a class="anchor" href="#Copying_a_Content_View_content-management"></a>8.5. Copying a content view</h3>
<div class="paragraph">
<p>You can copy a content view in the Foreman web UI or you can use the Hammer CLI to copy an existing content view into a new content view.
To use the CLI instead of the Foreman web UI, see the <a href="#cli-copying-a-content-view_content-management">CLI procedure</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>A copied content view does not have the same history as the original content view.
Version 1 of the copied content view begins at the last version of the original content view.
As a result, you cannot promote an older version of a content view from the copied content view.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle</strong> &gt; <strong>Content Views</strong>.</p>
</li>
<li>
<p>Select the content view you want to copy.</p>
</li>
<li>
<p>Click the vertical ellipsis icon and click <strong>Copy</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for the new content view and click <strong>Copy content view</strong>.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>The copied content view appears on the <strong>Content views</strong> page.</p>
</li>
</ul>
</div>
<div id="cli-copying-a-content-view_content-management" class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Copy the content view by using Hammer:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view copy --name <em>My_original_CV_name</em> \
--new-name <em>My_new_CV_name</em></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>The Hammer command reports:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre># hammer content-view copy --id=5 --new-name="mixed_copy"
Content view copied.</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Viewing_Module_Streams_content-management"><a class="anchor" href="#Viewing_Module_Streams_content-management"></a>8.6. Viewing module streams</h3>
<div class="paragraph">
<p>In Foreman, you can view the module streams of the repositories in your content views.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Foreman web UI, see the <a href="#cli-Viewing_Module_Streams_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to a published version of a <strong>Content View</strong> &gt; <strong>Module Streams</strong> to view the module streams that are available for the Content Types.</p>
</li>
<li>
<p>Use the <strong>Search</strong> field to search for specific modules.</p>
</li>
<li>
<p>To view the information about the module, click the module and its corresponding tabs to include <strong>Details</strong>, <strong>Repositories</strong>, <strong>Profiles</strong>, and <strong>Artifacts</strong>.</p>
</li>
</ol>
</div>
<div id="cli-Viewing_Module_Streams_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all organizations:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer organization list</pre>
</div>
</div>
</li>
<li>
<p>View all module streams for your organization:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer module-stream list \
--organization-id <em>My_Organization_ID</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Promoting_a_Content_View_content-management"><a class="anchor" href="#Promoting_a_Content_View_content-management"></a>8.7. Promoting a content view</h3>
<div class="paragraph">
<p>Use this procedure to promote content views across different lifecycle environments.
To use the CLI instead of the Foreman web UI, see the <a href="#cli-promoting-a-content-view_content-management">CLI procedure</a>.</p>
</div>
<div class="paragraph">
<div class="title">Permission requirements for content view promotion</div>
<p>Non-administrator users require two permissions to promote a content view to an environment:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>promote_or_remove_content_views</code></p>
</li>
<li>
<p><code>promote_or_remove_content_views_to_environment</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The <code>promote_or_remove_content_views</code> permission restricts which content views a user can promote.</p>
</div>
<div class="paragraph">
<p>The <code>promote_or_remove_content_views_to_environment</code> permission restricts the environments to which a user can promote content views.</p>
</div>
<div class="paragraph">
<p>With these permissions you can assign users permissions to promote certain content views to certain environments, but not to other environments.
For example, you can limit a user so that they are permitted to promote to test environments, but not to production environments.</p>
</div>
<div class="paragraph">
<p>You must assign both permissions to a user to allow them to promote content views.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle</strong> &gt; <strong>Content Views</strong>.</p>
</li>
<li>
<p>Select the content view that you want to promote.</p>
</li>
<li>
<p>Select the version that you want to promote, click the vertical ellipsis icon, and click <strong>Promote</strong>.</p>
</li>
<li>
<p>Select the environment where you want to promote the content view and click <strong>Promote</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now the repository for the content view appears in all environments.</p>
</div>
<div id="cli-promoting-a-content-view_content-management" class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Promote the content view using Hammer for each lifecycle environment:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view version promote \
--content-view "Database" \
--version 1 \
--to-lifecycle-environment "Development" \
--organization "<em>My_Organization</em>"
# hammer content-view version promote \
--content-view "Database" \
--version 1 \
--to-lifecycle-environment "Testing" \
--organization "<em>My_Organization</em>"
# hammer content-view version promote \
--content-view "Database" \
--version 1 \
--to-lifecycle-environment "Production" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>Now the database content is available in all environments.</p>
</div>
</li>
<li>
<p>Alternatively, you can promote content views across all lifecycle environments within an organization using the following Bash script:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-terminal" data-lang="terminal">ORG="<em>My_Organization</em>"
CVV_ID=<em>My_Content_View_Version_ID</em>

for i in $(hammer --no-headers --csv lifecycle-environment list --organization $ORG | awk -F, {'print $1'} | sort -n)
do
   hammer content-view version promote --organization $ORG --to-lifecycle-environment-id $i --id $CVV_ID
done</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>Display information about your content view version to verify that it is promoted to the required lifecycle environments:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view version info --id <em>My_Content_View_Version_ID</em></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Next steps</div>
<ul>
<li>
<p>To register a host to your content view, see <a href="https://docs.theforeman.org/3.9/Managing_Hosts/index-katello.html#Registering_Hosts_managing-hosts">Registering Hosts</a> in <em>Managing hosts</em>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Composite_Content_Views_Overview_content-management"><a class="anchor" href="#Composite_Content_Views_Overview_content-management"></a>8.8. Composite content views overview</h3>
<div class="paragraph">
<p>A composite content view combines the content from several content views.
For example, you might have separate content views to manage an operating system and an application individually.
You can use a composite content view to merge the contents of both content views into a new repository.
The repositories for the original content views still exist but a new repository also exists for the combined content.</p>
</div>
<div class="paragraph">
<p>If you want to develop an application that supports different database servers.
The <em>example_application</em> appears as:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><em>example_software</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Database</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operating System</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Example of four separate content views:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Red&#160;Hat Enterprise Linux (Operating System)</p>
</li>
<li>
<p>PostgreSQL (Database)</p>
</li>
<li>
<p>MariaDB (Database)</p>
</li>
<li>
<p><em>example_software</em> (Application)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>From the previous content views, you can create two composite content views.</p>
</div>
<div class="paragraph">
<p>Example composite content view for a PostgreSQL database:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Composite content view 1 &#8211; <em>example_software</em> on PostgreSQL</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example_software</em> (Application)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PostgreSQL (Database)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Red&#160;Hat Enterprise Linux (Operating System)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Example composite content view for a MariaDB:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Composite content view 2 &#8211; <em>example_software</em> on MariaDB</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>example_software</em> (Application)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MariaDB (Database)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Red&#160;Hat Enterprise Linux (Operating System)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Each content view is then managed and published separately.
When you create a version of the application, you publish a new version of the composite content views.
You can also select the <strong>Auto Publish</strong> option when creating a composite content view, and then the composite content view is automatically republished when a content view it includes is republished.</p>
</div>
<div class="paragraph">
<div class="title">Repository restrictions</div>
<p>Docker repositories cannot be included more than once in a composite content view.
For example, if you attempt to include two content views using the same docker repository in a composite content view, Foreman&#160;server reports an error.</p>
</div>
</div>
<div class="sect2">
<h3 id="Creating_a_Composite_Content_View_content-management"><a class="anchor" href="#Creating_a_Composite_Content_View_content-management"></a>8.9. Creating a composite content view</h3>
<div class="paragraph">
<p>Use this procedure to create a composite content view.
To use the CLI instead of the Foreman web UI, see the <a href="#cli-creating-a-composite-content-view_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle</strong> &gt; <strong>Content Views</strong>.</p>
</li>
<li>
<p>Click <strong>Create content view</strong>.</p>
</li>
<li>
<p>In the <strong>Create content view</strong> window, enter a name for the view in the <strong>Name</strong> field.
Foreman automatically completes the <strong>Label</strong> field from the name you enter.</p>
</li>
<li>
<p>Optional: In the <strong>Description</strong> field, enter a description of the view.</p>
</li>
<li>
<p>On the <strong>Type</strong> tab, select <strong>Composite content view</strong>.</p>
</li>
<li>
<p>Optional: If you want to automatically publish a new version of the composite content view when a content view is republished, select the <strong>Auto publish</strong> checkbox.</p>
</li>
<li>
<p>Click <strong>Create content view</strong>.</p>
</li>
<li>
<p>On the <strong>Content views</strong> tab, select the content views that you want to add to the composite content view, and then click <strong>Add content views</strong>.</p>
</li>
<li>
<p>In the <strong>Add content views</strong> window, select the version of each content view.</p>
</li>
<li>
<p>Optional: If you want to automatically update the content view to the latest version, select the <strong>Always update to latest version</strong> checkbox.</p>
</li>
<li>
<p>Click <strong>Add</strong>, then click <strong>Publish new version</strong>.</p>
</li>
<li>
<p>Optional: In the <strong>Description</strong> field, enter a description of the content view.</p>
</li>
<li>
<p>In the <strong>Publish</strong> window, set the <strong>Promote</strong> switch, then select the lifecycle environment.</p>
</li>
<li>
<p>Click <strong>Next</strong>, then click <strong>Finish</strong>.</p>
</li>
</ol>
</div>
<div id="cli-creating-a-composite-content-view_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Before you create the composite content views, list the version IDs for your existing content views:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view version list \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Create a new composite content view.
When the <code>--auto-publish</code> option is set to <code>yes</code>, the composite content view is automatically republished when a content view it includes is republished:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view create \
--composite \
--auto-publish yes \
--name "<em>Example_Composite_Content_View</em>" \
--description "Example composite content view" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Add a content view to the composite content view.
You can identify content view, content view version, and Organization in the commands by either their ID or their name.
To add multiple content views to the composite content view, repeat this step for every content view you want to include.</p>
<div class="ulist">
<ul>
<li>
<p>If you have the <strong>Always update to latest version</strong> option enabled for the content view:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view component add \
--component-content-view-id <em>Content_View_ID</em> \
--composite-content-view "<em>Example_Composite_Content_View</em>" \
--latest \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>If you have the <strong>Always update to latest version</strong> option disabled for the content view:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view component add \
--component-content-view-id <em>Content_View_ID</em> \
--composite-content-view "<em>Example_Composite_Content_View</em>" \
--component-content-view-version-id <em>Content_View_Version_ID</em> \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Publish the composite content view:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view publish \
--name "<em>Example_Composite_Content_View</em>" \
--description "Initial version of composite content view" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Promote the composite content view across all environments:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view version promote \
--content-view "<em>Example_Composite_Content_View</em>" \
--version 1 \
--to-lifecycle-environment "Development" \
--organization "<em>My_Organization</em>"
# hammer content-view version promote \
--content-view "<em>Example_Composite_Content_View</em>" \
--version 1 \
--to-lifecycle-environment "Testing" \
--organization "<em>My_Organization</em>"
# hammer content-view version promote \
--content-view "<em>Example_Composite_Content_View</em>" \
--version 1 \
--to-lifecycle-environment "Production" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Content_Filter_Overview_content-management"><a class="anchor" href="#Content_Filter_Overview_content-management"></a>8.10. Content filter overview</h3>
<div class="paragraph">
<p>Content views also use filters to include or restrict certain Deb and Yum content.
Without these filters, a content view includes everything from the selected repositories.</p>
</div>
<div class="paragraph">
<p>There are two types of content filters:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Filter types</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Filter Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Include</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">You start with no content, then select which content to add from the selected repositories.
Use this filter to combine multiple content items.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Exclude</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">You start with all content from selected repositories, then select which content to remove.
Use this filter when you want to use most of a particular content repository while excluding certain packages.
The filter uses all content in the repository except for the content you select.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Include and Exclude filter combinations</div>
<p>If using a combination of Include and Exclude filters, publishing a content view triggers the include filters first, then the exclude filters.
In this situation, select which content to include, then which content to exclude from the inclusive subset.</p>
</div>
<div class="paragraph">
<div class="title">Content types</div>
<p>You can filter content based on the following content types:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Content types</caption>
<colgroup>
<col style="width: 40%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Content Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>RPM</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filter packages based on their name and version number.
The <strong>RPM</strong> option filters non-modular RPM packages and errata.
Source RPMs are not affected by this filter and will still be available in the content view.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Deb</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filter packages based on their name.
The <strong>Deb</strong> option filters Deb packages.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Package Group</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filter packages based on package groups.
The list of package groups is based on the repositories added to the content view.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Erratum (by ID)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Select which specific errata to add to the filter.
The list of Errata is based on the repositories added to the content view.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Erratum (by Date and Type)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Select a issued or updated date range and errata type (Bugfix, Enhancement, or Security) to add to the filter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Module Streams</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Select whether to include or exclude specific module streams.
The <strong>Module Streams</strong> option filters modular RPMs and errata, but does not filter non-modular content that is associated with the selected module stream.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Container Image Tag</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Select whether to include or exclude specific container image tags.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="Resolving_Package_Dependencies_content-management"><a class="anchor" href="#Resolving_Package_Dependencies_content-management"></a>8.11. Resolving package dependencies</h3>
<div class="paragraph">
<p>Foreman can add dependencies of packages in a content view to the dependent repository when publishing the content view.
To configure this, you can enable <em>dependency solving</em>.</p>
</div>
<div class="paragraph">
<p>For example, dependency solving is useful when you incrementally add a single package to a content view version.
You might need to enable dependency solving to install that package.</p>
</div>
<div class="paragraph">
<p>However, dependency solving is unnecessary in most situations.
For example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When incrementally adding a security errata to a content view, dependency solving can cause significant delays to content view publication without major benefits.</p>
</li>
<li>
<p>Packages from a newer erratum might have dependencies that are incompatible with packages from an older content view version.
Incrementally adding the erratum using dependency solving might include unwanted packages.
As an alternative, consider updating the content view.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Dependency solving only considers packages within the repositories of the content view.
It does not consider packages installed on clients.
For example, if a content view includes only AppStream, dependency solving does not include dependent BaseOS content at publish time.</p>
</div>
<div class="paragraph">
<p>For more information, see <a href="https://docs.theforeman.org/3.9/Managing_Content/index-katello.html#Limitations_to_Repository_Dependency_Resolution_content-management">Limitations to Repository Dependency Resolution</a> in <em>Managing content</em>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Dependency solving can lead to the following problems:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Significant delay in content view publication</dt>
<dd>
<p>Foreman examines every repository in a content view for dependencies.
Therefore, publish time increases with more repositories.</p>
<div class="paragraph">
<p>To mitigate this problem, use multiple content views with fewer repositories and combine them into composite content views.</p>
</div>
</dd>
<dt class="hdlist1">Ignored content view filters on dependent packages</dt>
<dd>
<p>Foreman prioritizes resolving package dependencies over the rules in your filter.</p>
<div class="paragraph">
<p>For example, if you create a filter for security purposes but enable dependency solving, Foreman can add packages that you might consider insecure.</p>
</div>
<div class="paragraph">
<p>To mitigate this problem, carefully test filtering rules to determine the required dependencies.
If dependency solving includes unwanted packages, manually identify the core basic dependencies that the extra packages and errata need.</p>
</div>
</dd>
</dl>
</div>
<div id="Combining_exclusion_filters_with_dependency_solving_content-management" class="exampleblock">
<div class="title">Example 2. Combining exclusion filters with dependency solving</div>
<div class="content">
<div class="paragraph">
<p>You want to recreate Red&#160;Hat Enterprise Linux&#160;8.3 using content view filters and include selected errata from a later Red&#160;Hat Enterprise Linux&#160;8 minor release.
To achieve this, you create filters to exclude most of the errata after the Red&#160;Hat Enterprise Linux&#160;8.3 release date, except a few that you need.
Then, you enable dependency solving.</p>
</div>
<div class="paragraph">
<p>In this situation, dependency solving might include more packages than expected.
As a result, the host diverges from being a Red&#160;Hat Enterprise Linux&#160;8.3 machine.</p>
</div>
<div class="paragraph">
<p>If you do not need the extra errata and packages, do not configure content view filtering.
Instead, enable and use the Red&#160;Hat Enterprise Linux&#160;8.3 repository on the <strong>Content</strong> &gt; <strong>Red Hat Repositories</strong> page in the Foreman web UI.</p>
</div>
</div>
</div>
<div id="Excluding_packages_and_dependency_solving_with_DNF_content-management" class="exampleblock">
<div class="title">Example 3. Excluding packages sometimes makes dependency solving impossible for DNF</div>
<div class="content">
<div class="paragraph">
<p>If you make a Red&#160;Hat Enterprise Linux&#160;8.3 repository with a few excluded packages, <code>dnf upgrade</code> can sometimes fail.</p>
</div>
<div class="paragraph">
<p>Do not enable dependency solving to resolve the problem.
Instead, investigate the error from <code>dnf</code> and adjust the filters to stop excluding the missing dependency.</p>
</div>
<div class="paragraph">
<p>Else, dependency solving might cause the repository to diverge from Red&#160;Hat Enterprise Linux&#160;8.3.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="enabling-dependency-solving-for-a-content-view_content-management"><a class="anchor" href="#enabling-dependency-solving-for-a-content-view_content-management"></a>8.12. Enabling dependency solving for a content view</h3>
<div class="paragraph">
<p>Use this procedure to enable dependency solving for a content view.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Dependency solving is useful only in limited contexts.
Before enabling it, ensure you read and understand <a href="#Resolving_Package_Dependencies_content-management">Resolving package dependencies</a></p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle</strong> &gt; <strong>Content Views</strong>.</p>
</li>
<li>
<p>From the list of content views, select the required content view.</p>
</li>
<li>
<p>On the <strong>Details</strong> tab, toggle <strong>Solve dependencies</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Content_Filter_Examples_content-management"><a class="anchor" href="#Content_Filter_Examples_content-management"></a>8.13. Content filter examples</h3>
<div class="paragraph">
<p>Use any of the following examples with the procedure that follows to build custom content filters.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Filters can significantly increase the time to publish a content view.
For example, if a content view publish task completes in a few minutes without filters, it can take 30 minutes after adding an exclude or include errata filter.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Example 1</div>
<p>Create a repository with the base Red&#160;Hat Enterprise Linux packages.
This filter requires a Red&#160;Hat Enterprise Linux repository added to the content view.</p>
</div>
<div class="paragraph">
<p><strong>Filter:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Inclusion Type:</strong> Include</p>
</li>
<li>
<p><strong>Content Type:</strong> Package Group</p>
</li>
<li>
<p><strong>Filter:</strong> Select only the <strong>Base</strong> package group</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Example 2</div>
<p>Create a repository that excludes all errata, except for security updates, after a certain date.
This is useful if you want to perform system updates on a regular basis with the exception of critical security updates, which must be applied immediately.
This filter requires a Red&#160;Hat Enterprise Linux repository added to the content view.</p>
</div>
<div class="paragraph">
<p><strong>Filter:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Inclusion Type:</strong> Exclude</p>
</li>
<li>
<p><strong>Content Type:</strong> Erratum (by Date and Type)</p>
</li>
<li>
<p><strong>Filter:</strong> Select only the <strong>Bugfix</strong> and <strong>Enhancement</strong> errata types, and clear the <strong>Security</strong> errata type.
Set the <strong>Date Type</strong> to <strong>Updated On</strong>.
Set the <strong>Start Date</strong> to the date you want to restrict errata.
Leave the <strong>End Date</strong> blank to ensure any new non-security errata is filtered.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Example 3</div>
<p>A combination of Example 1 and Example 2 where you only require the operating system packages and want to exclude recent bug fix and enhancement errata.
This requires two filters attached to the same content view.
The content view processes the Include filter first, then the Exclude filter.</p>
</div>
<div class="paragraph">
<p><strong>Filter 1:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Inclusion Type:</strong> Include</p>
</li>
<li>
<p><strong>Content Type:</strong> Package Group</p>
</li>
<li>
<p><strong>Filter:</strong> Select only the <strong>Base</strong> package group</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Filter 2:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Inclusion Type:</strong> Exclude</p>
</li>
<li>
<p><strong>Content Type:</strong> Erratum (by Date and Type)</p>
</li>
<li>
<p><strong>Filter:</strong> Select only the <strong>Bugfix</strong> and <strong>Enhancement</strong> errata types, and clear the <strong>Security</strong> errata type.
Set the <strong>Date Type</strong> to <strong>Updated On</strong>.
Set the <strong>Start Date</strong> to the date you want to restrict errata.
Leave the <strong>End Date</strong> blank to ensure any new non-security errata is filtered.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Example 4</div>
<p>Filter a specific module stream in a content view.</p>
</div>
<div class="paragraph">
<p><strong>Filter 1:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Inclusion Type:</strong> Include</p>
</li>
<li>
<p><strong>Content Type:</strong> Module Stream</p>
</li>
<li>
<p><strong>Filter:</strong> Select only the specific module stream that you want for the content view, for example <strong>ant</strong>, and click <strong>Add Module Stream</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Filter 2:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Inclusion Type:</strong> Exclude</p>
</li>
<li>
<p><strong>Content Type:</strong> Package</p>
</li>
<li>
<p><strong>Filter:</strong> Add a rule to filter any non-modular packages that you want to exclude from the content view.
If you do not filter the packages, the content view filter includes all non-modular packages associated with the module stream <strong>ant</strong>.
Add a rule to exclude all <code>*</code> packages, or specify the package names that you want to exclude.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For another example of how content filters work, see the following article: <a href="https://access.redhat.com/solutions/1564953">"How do content filters work in Satellite 6"</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Creating_a_Content_Filter_for_Yum_Content_content-management"><a class="anchor" href="#Creating_a_Content_Filter_for_Yum_Content_content-management"></a>8.14. Creating a content filter for Yum content</h3>
<div class="paragraph">
<p>You can filter content views containing Yum content to include or exclude specific packages, package groups, errata, or module streams.
Filters are based on a combination of the <em>name</em>, <em>version</em>, and <em>architecture</em>.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Foreman web UI, see the <a href="#cli-creating-a-content-filter-yum_content-management">CLI procedure</a>.</p>
</div>
<div class="paragraph">
<p>For examples of how to build a filter, see <a href="#Content_Filter_Examples_content-management">Content filter examples</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle</strong> &gt; <strong>Content Views</strong>.</p>
</li>
<li>
<p>Select a content view.</p>
</li>
<li>
<p>On the <strong>Filters</strong> tab, click <strong>Create filter</strong>.</p>
</li>
<li>
<p>Enter a name.</p>
</li>
<li>
<p>From the <strong>Content type</strong> list, select a content type.</p>
</li>
<li>
<p>From the <strong>Inclusion Type</strong> list, select either <strong>Include filter</strong> or <strong>Exclude filter</strong>.</p>
</li>
<li>
<p>Optional: In the <strong>Description</strong> field, enter a description for the filter.</p>
</li>
<li>
<p>Click <strong>Create filter</strong> to create your content filter.</p>
</li>
<li>
<p>Depending on what you enter for <strong>Content Type</strong>, add rules to create the filter that you want.</p>
</li>
<li>
<p>Select if you want the filter to <strong>Apply to subset of repositories</strong> or <strong>Apply to all repositories</strong>.</p>
</li>
<li>
<p>Click <strong>Publish New Version</strong> to publish the filtered repository.</p>
</li>
<li>
<p>Optional: In the <strong>Description</strong> field, enter a description of the changes.</p>
</li>
<li>
<p>Click <strong>Create filter</strong> to publish a new version of the content view.</p>
<div class="paragraph">
<p>You can promote this content view across all environments.</p>
</div>
</li>
</ol>
</div>
<div id="cli-creating-a-content-filter-yum_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Add a filter to the content view.
Use the <code>--inclusion false</code> option to set the filter to an Exclude filter:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view filter create \
--name "<em>Errata Filter</em>" \
--type erratum --content-view "<em>Example_Content_View</em>" \
--description "<em>My latest filter</em>" \
--inclusion false \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Add a rule to the filter:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view filter rule create \
--content-view "<em>Example_Content_View</em>" \
--content-view-filter "<em>Errata Filter</em>" \
--start-date "<em>YYYY-MM-DD</em>" \
--types enhancement,bugfix \
--date-type updated \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Publish the content view:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view publish \
--name "<em>Example_Content_View</em>" \
--description "Adding errata filter" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Promote the view across all environments:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view version promote \
--content-view "<em>Example_Content_View</em>" \
--version 1 \
--to-lifecycle-environment "Development" \
--organization "<em>My_Organization</em>"
# hammer content-view version promote \
--content-view "<em>Example_Content_View</em>" \
--version 1 \
--to-lifecycle-environment "Testing" \
--organization "<em>My_Organization</em>"
# hammer content-view version promote \
--content-view "<em>Example_Content_View</em>" \
--version 1 \
--to-lifecycle-environment "Production" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Creating_a_Content_Filter_for_Deb_Content_content-management"><a class="anchor" href="#Creating_a_Content_Filter_for_Deb_Content_content-management"></a>8.15. Creating a content filter for Deb content</h3>
<div class="paragraph">
<p>You can filter content views containing Deb content to include or exclude specific packages or package groups.
Filters are based on a combination of the <em>name</em> and the <em>architecture</em>.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Foreman web UI, see the <a href="#cli-creating-a-content-filter-deb_content-management">CLI procedure</a>.</p>
</div>
<div class="paragraph">
<p>For examples of how to build a filter, see <a href="#Content_Filter_Examples_content-management">Content filter examples</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle</strong> &gt; <strong>Content Views</strong>.</p>
</li>
<li>
<p>Select a content view.</p>
</li>
<li>
<p>On the <strong>Filters</strong> tab, click <strong>Create filter</strong>.</p>
</li>
<li>
<p>Enter a name.</p>
</li>
<li>
<p>From the <strong>Content type</strong> list, select a content type.</p>
</li>
<li>
<p>From the <strong>Inclusion Type</strong> list, select either <strong>Include filter</strong> or <strong>Exclude filter</strong>.</p>
</li>
<li>
<p>Optional: In the <strong>Description</strong> field, enter a description for the filter.</p>
</li>
<li>
<p>Click <strong>Create filter</strong> to create your content filter.</p>
</li>
<li>
<p>Depending on what you enter for <strong>Content Type</strong>, add rules to create the filter that you want.</p>
</li>
<li>
<p>Select if you want the filter to <strong>Apply to subset of repositories</strong> or <strong>Apply to all repositories</strong>.</p>
</li>
<li>
<p>Click <strong>Publish New Version</strong> to publish the filtered repository.</p>
</li>
<li>
<p>Optional: In the <strong>Description</strong> field, enter a description of the changes.</p>
</li>
<li>
<p>Click <strong>Save</strong> to publish a new version of the content view.</p>
<div class="paragraph">
<p>You can promote this content view across all environments.</p>
</div>
</li>
</ol>
</div>
<div id="cli-creating-a-content-filter-deb_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Add a filter to the content view.
Use the <code>--inclusion false</code> option to set the filter to an Exclude filter:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view filter create \
--content-view "<em>Example_Content_View</em>" \
--description "<em>My_Content_View_Filter_Description</em>" \
--inclusion false \
--name "<em>Errata Filter</em>" \
--organization "<em>My_Organization</em>" \
--type erratum</pre>
</div>
</div>
</li>
<li>
<p>Add a rule to the filter:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view filter rule create \
--content-view "<em>My_Content_View</em>" \
--content-view-filter "<em>My_Errata_Filter</em>" \
--date-type updated \
--organization "<em>My_Organization</em>" \
--start-date "<em>YYYY-MM-DD</em>" \
--types enhancement,bugfix</pre>
</div>
</div>
</li>
<li>
<p>Publish the content view:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view publish \
--description "Adding errata filter" \
--name "<em>My_Content_View</em>" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Promote the view across all environments:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view version promote \
--content-view "<em>Example_Content_View</em>" \
--organization "<em>My_Organization</em>" \
--to-lifecycle-environment "Development" \
--version 1
# hammer content-view version promote \
--content-view "<em>Example_Content_View</em>" \
--organization "<em>My_Organization</em>" \
--to-lifecycle-environment "Testing" \
--version 1
# hammer content-view version promote \
--content-view "<em>Example_Content_View</em>" \
--organization "<em>My_Organization</em>" \
--to-lifecycle-environment "Production" \
--version 1</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Deleting_Multiple_Content_View_Versions_content-management"><a class="anchor" href="#Deleting_Multiple_Content_View_Versions_content-management"></a>8.16. Deleting multiple content view versions</h3>
<div class="paragraph">
<p>You can delete multiple content view versions simultaneously.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle</strong> &gt; <strong>Content Views</strong>.</p>
</li>
<li>
<p>Select the content view you want to delete versions of.</p>
</li>
<li>
<p>On the <strong>Versions</strong> tab, select the checkbox of the version or versions you want to delete.</p>
</li>
<li>
<p>Click the vertical ellipsis icon at the top of the list of content views.</p>
</li>
<li>
<p>Click <strong>Delete</strong> to open the deletion wizard that shows any affected environments.</p>
</li>
<li>
<p>If there are no affected environments, review the details and click <strong>Delete</strong>.</p>
</li>
<li>
<p>If there are any affected environments, reassign any hosts or activation keys before deletion.</p>
</li>
<li>
<p>Review the details of the actions.</p>
</li>
<li>
<p>Click <strong>Delete</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Clearing_the_Search_Filter_content-management"><a class="anchor" href="#Clearing_the_Search_Filter_content-management"></a>8.17. Clearing the search filter</h3>
<div class="paragraph">
<p>If you search for specific content types using keywords in the <strong>Search</strong> text box and the search returns no results, click <strong>Clear search</strong> to clear all the search queries and reset the <strong>Search</strong> text box.</p>
</div>
<div class="paragraph">
<p>If you use a filter to search for specific repositories in the <strong>Type</strong> text box and the search returns no results, click <strong>Clear filters</strong> to clear all active filters and reset the <strong>Type</strong> text box.</p>
</div>
</div>
<div class="sect2">
<h3 id="Standardizing_Content_View_Empty_States_content-management"><a class="anchor" href="#Standardizing_Content_View_Empty_States_content-management"></a>8.18. Standardizing content view empty states</h3>
<div class="paragraph">
<p>If there are no filters listed for a content view, click <strong>Create filter</strong>.
A modal opens to show you the next steps to create a filter.
Follow these steps to add a new filter to create new content types.</p>
</div>
</div>
<div class="sect2">
<h3 id="Comparing_Content_View_Versions_content-management"><a class="anchor" href="#Comparing_Content_View_Versions_content-management"></a>8.19. Comparing content view versions</h3>
<div class="paragraph">
<p>Use this procedure to compare content view version functionality for Foreman.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle</strong> &gt; <strong>Content Views</strong>.</p>
</li>
<li>
<p>Select a content view whose versions you want to compare.</p>
</li>
<li>
<p>On the <strong>Versions</strong> tab, select the checkbox next to any two versions you want to compare.</p>
</li>
<li>
<p>Click <strong>Compare</strong>.</p>
<div class="paragraph">
<p>The <strong>Compare</strong> screen has the pre-selected versions in the version dropdown menus and tabs for all content types found in either version.
You can filter the results to show only the same, different, or all content types.
You can compare different content view versions by selecting them from the dropdown menus.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Distributing_Archived_Content_View_Versions_content-management"><a class="anchor" href="#Distributing_Archived_Content_View_Versions_content-management"></a>8.20. Distributing archived content view versions</h3>
<div class="paragraph">
<p>The setting <strong>Distribute archived content view versions</strong> enables hosting of non-promoted content view version repositories in the Foreman content web application along with other repositories.
This is useful while debugging to see what content is present in your content view versions.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Settings</strong>.</p>
</li>
<li>
<p>Click the <strong>Content</strong> tab.</p>
</li>
<li>
<p>Set the <strong>Distribute archived content view versions</strong> parameter to <strong>Yes</strong>.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
<div class="paragraph">
<p>This enables the repositories of content view versions without lifecycle environments to be distributed at <code>foreman.example.com/pulp/content/<em>My_Organization</em>/content_views/<em>My_Content_View</em>/<em>My_Content_View_Version</em>/</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Older non-promoted content view versions are not distributed once the setting is enabled.
Only new content view versions become distributed.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Synchronizing_Content_Between_Servers_content-management"><a class="anchor" href="#Synchronizing_Content_Between_Servers_content-management"></a>9. Synchronizing content between Foreman&#160;Servers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In a Foreman setup with multiple Foreman&#160;servers, you can use Inter-Server Synchronization (ISS) to synchronize content from one upstream server to one or more downstream servers.</p>
</div>
<div class="paragraph">
<p>There are two possible ISS configurations of Foreman, depending on how you deployed your infrastructure:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ISS Network Sync</dt>
<dd>
<p>If your upstream server can communicate with the downstream server over a network, you can synchronize content over HTTPS.</p>
<div class="paragraph">
<p>Configure your Foreman to synchronize content over a network.
For more information, see <a href="#configuring-server-to-synchronize-content-over-a-network_content-management">Configuring Foreman&#160;server to synchronize content over a network</a>.</p>
</div>
</dd>
<dt class="hdlist1">ISS Export Sync</dt>
<dd>
<p>If your upstream and downstream servers are air-gapped, you can synchronize content using export and import.</p>
<div class="paragraph">
<p>Configure your Foreman to synchronize content using export and import.
For more information, see <a href="#configuring-projectserver-to-synchronize-content-by-using-exports_content-management">Configuring Foreman&#160;server to synchronize content by using exports</a>.</p>
</div>
</dd>
</dl>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>For more information on ISS use cases and scenarios, see <a href="#iss-scenarios_content-management">Inter-Server Synchronization scenarios</a>.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="content-synchronization-by-using-export-and-import_content-management"><a class="anchor" href="#content-synchronization-by-using-export-and-import_content-management"></a>9.1. Content synchronization by using export and import</h3>
<div class="paragraph">
<p>There are multiple approaches for synchronizing content by using the export and import workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You employ the upstream Foreman&#160;server as a content store, which means that you sync the whole Library rather than content view versions.
This approach offers the simplest export/import workflow.
In such case, you can manage the content view versions downstream.
For more information, see <a href="#Using_Upstream_Server_as_a_Content_Store_content-management">Using an upstream Foreman&#160;server as a content store</a>.</p>
</li>
<li>
<p>You use the upstream Foreman&#160;server to sync content view versions.
This approach offers more control over what content is synced between Foreman&#160;servers.
For more information, see <a href="#Using_Upstream_Server_to_Synchronize_Content_View_Versions_content-management">Using an upstream Foreman&#160;server to synchronize content view versions</a>.</p>
</li>
<li>
<p>You sync a single repository.
This can be useful if you use the content-view syncing approach, but you want to sync an additional repository without adding it to an existing content view.
For more information, see <a href="#synchronizing-a-single-repository_content-management">Synchronizing a single repository</a>.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Synchronizing content by using export and import requires the same major version of Foreman on both the downstream and upstream Foreman&#160;servers.</p>
</div>
<div class="paragraph">
<p>When you are unable to match upstream and downstream Foreman versions, you can use:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Syncable exports and imports.</p>
</li>
<li>
<p>Inter-Server Synchronization (ISS) with your upstream Foreman connected to the Internet and your downstream Foreman connected to the upstream Foreman.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="Using_Upstream_Server_as_a_Content_Store_content-management"><a class="anchor" href="#Using_Upstream_Server_as_a_Content_Store_content-management"></a>9.1.1. Using an upstream Foreman&#160;server as a content store</h4>
<div class="paragraph">
<p>In this scenario, you use the upstream Foreman&#160;server as a content store for updates rather than to manage content.
You use the downstream Foreman&#160;server to manage content for all infrastructure behind the isolated network.
You export the Library content from the upstream Foreman&#160;server and import it into the downstream Foreman&#160;server.</p>
</div>
<div class="olist arabic">
<div class="title">On the upstream Foreman&#160;server</div>
<ol class="arabic">
<li>
<p>Ensure that repositories are using the <strong>Immediate</strong> download policy in one of the following ways:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>For existing repositories using <strong>On Demand</strong>, change their download policy on the repository details page to <strong>Immediate</strong>.</p>
</li>
<li>
<p>For new repositories, ensure that the <strong>Default Red Hat Repository download policy</strong> setting is set to <strong>Immediate</strong> before enabling Red Hat repositories, and that the <strong>Default download policy</strong> is set to <strong>Immediate</strong> for custom repositories.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For more information, see <a href="#Download_Policies_Overview_content-management">Download policies overview</a>.</p>
</div>
</li>
<li>
<p>Enable the content that you want to synchronize.
For more information, see <a href="#Enabling_Red_Hat_Repositories_content-management">Enabling Red&#160;Hat repositories</a>.</p>
<div class="paragraph">
<p>If you want to sync custom content, first <a href="#Creating_a_Custom_Product_content-management">create a custom Product</a> and <a href="#Synchronizing_Repositories_content-management">synchronize Product repositories</a>.</p>
</div>
</li>
<li>
<p>Synchronize the enabled content:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>On the first export, perform a <code>complete</code> Library export so that all the synchronized content is exported.
This generates content archives that you can later import into one or more downstream Foreman&#160;servers.
For more information on performing a complete Library export, see <a href="#Exporting_the_Library_Environment_content-management">Exporting the Library environment</a>.</p>
</li>
<li>
<p>Export all future updates on the upstream Foreman&#160;server incrementally.
This generates leaner content archives that contain only a recent set of updates.
For example, if you enable and synchronize a new repository, the next exported content archive contains content only from the newly enabled repository.
For more information on performing an incremental Library export, see <a href="#exporting-the-library-environment-incrementally_content-management">Exporting the Library environment incrementally</a>.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">On the downstream Foreman&#160;server</div>
<ol class="arabic">
<li>
<p>Bring the content exported from the upstream Foreman&#160;server over to the hard disk.</p>
</li>
<li>
<p>Place it inside a directory under <code>/var/lib/pulp/imports</code>.</p>
</li>
<li>
<p>Import the content to an organization using the procedure outlined in <a href="#Importing_into_the_Library_Environment_content-management">Importing into the Library environment</a>.</p>
<div class="paragraph">
<p>You can then manage content using content views or lifecycle environments as you require.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Using_Upstream_Server_to_Synchronize_Content_View_Versions_content-management"><a class="anchor" href="#Using_Upstream_Server_to_Synchronize_Content_View_Versions_content-management"></a>9.1.2. Using an upstream Foreman&#160;server to synchronize content view versions</h4>
<div class="paragraph">
<p>In this scenario, you use the upstream Foreman&#160;server not only as a content store, but also to synchronize content for all infrastructure behind the isolated network.
You curate updates coming from the CDN into content views and lifecycle environments.
Once you promote content to a designated lifecycle environment, you can export the content from the upstream Foreman&#160;server and import it into the downstream Foreman&#160;server.</p>
</div>
<div class="olist arabic">
<div class="title">On the upstream Foreman&#160;server</div>
<ol class="arabic">
<li>
<p>Ensure that repositories are using the <strong>Immediate</strong> download policy in one of the following ways:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>For existing repositories using <strong>On Demand</strong>, change their download policy on the repository details page to <strong>Immediate</strong>.</p>
</li>
<li>
<p>For new repositories, ensure that the <strong>Default Red Hat Repository download policy</strong> setting is set to <strong>Immediate</strong> before enabling Red Hat repositories, and that the <strong>Default download policy</strong> is set to <strong>Immediate</strong> for custom repositories.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For more information, see <a href="#Download_Policies_Overview_content-management">Download policies overview</a>.</p>
</div>
</li>
<li>
<p>Enable the content that you want to synchronize.
For more information, see <a href="#Enabling_Red_Hat_Repositories_content-management">Enabling Red&#160;Hat repositories</a>.</p>
<div class="paragraph">
<p>If you want to sync custom content, first <a href="#Creating_a_Custom_Product_content-management">create a custom Product</a> and <a href="#Synchronizing_Repositories_content-management">synchronize Product repositories</a>.</p>
</div>
</li>
<li>
<p>Synchronize the enabled content:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>For the first export, perform a <code>complete</code> version export on the content view version that you want to export.
For more information see, <a href="#Exporting_a_Content_View_Version_content-management">Exporting a content view version</a>.
This generates content archives that you can import into one or more downstream Foreman&#160;servers.</p>
</li>
<li>
<p>Export all future updates in the connected Foreman&#160;servers incrementally.
This generates leaner content archives that contain changes only from the recent set of updates.
For example, if your content view has a new repository, this exported content archive contains only the latest changes.
For more information, see <a href="#Exporting_a_Content_View_Version_Incrementally_content-management">Exporting a content view version incrementally</a>.</p>
</li>
<li>
<p>When you have new content, republish the content views that include this content before exporting the increment.
For more information, see <a href="#Managing_Content_Views_content-management">Managing content views</a>.
This creates a new content view version with the appropriate content to export.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">On the downstream Foreman&#160;server</div>
<ol class="arabic">
<li>
<p>Bring the content exported from the upstream Foreman&#160;server over to the hard disk.</p>
</li>
<li>
<p>Place it inside a directory under <code>/var/lib/pulp/imports</code>.</p>
</li>
<li>
<p>Import the content to the organization that you want.
For more information, see <a href="#Importing_a_Content_View_Version_content-management">Importing a content view version</a>.
This will create a content view version from the exported content archives and then import content appropriately.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="synchronizing-a-single-repository_content-management"><a class="anchor" href="#synchronizing-a-single-repository_content-management"></a>9.1.3. Synchronizing a single repository</h4>
<div class="paragraph">
<p>In this scenario, you export and import a single repository.</p>
</div>
<div class="olist arabic">
<div class="title">On the upstream Foreman&#160;server</div>
<ol class="arabic">
<li>
<p>Ensure that the repository is using the <strong>Immediate</strong> download policy in one of the following ways:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>For existing repositories using <strong>On Demand</strong>, change their download policy on the repository details page to <strong>Immediate</strong>.</p>
</li>
<li>
<p>For new repositories, ensure that the <strong>Default Red Hat Repository download policy</strong> setting is set to <strong>Immediate</strong> before enabling Red Hat repositories, and that the <strong>Default download policy</strong> is set to <strong>Immediate</strong> for custom repositories.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For more information, see <a href="#Download_Policies_Overview_content-management">Download policies overview</a>.</p>
</div>
</li>
<li>
<p>Enable the content that you want to synchronize.
For more information, see <a href="#Enabling_Red_Hat_Repositories_content-management">Enabling Red&#160;Hat repositories</a>.</p>
<div class="paragraph">
<p>If you want to sync custom content, first <a href="#Creating_a_Custom_Product_content-management">create a custom Product</a> and <a href="#Synchronizing_Repositories_content-management">synchronize Product repositories</a>.</p>
</div>
</li>
<li>
<p>Synchronize the enabled content:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>On the first export, perform a <code>complete</code> repository export so that all the synchronized content is exported.
This generates content archives that you can later import into one or more downstream Foreman&#160;servers.
For more information on performing a complete repository export, see <a href="#Exporting_a_Repository_content-management">Exporting a repository</a>.</p>
</li>
<li>
<p>Export all future updates on the upstream Foreman&#160;server incrementally.
This generates leaner content archives that contain only a recent set of updates.
For more information on performing an incremental repository export, see <a href="#Exporting_Repository_Incrementally_content-management">Exporting a repository incrementally</a>.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">On the downstream Foreman&#160;server</div>
<ol class="arabic">
<li>
<p>Bring the content exported from the upstream Foreman&#160;server over to the hard disk.</p>
</li>
<li>
<p>Place it inside a directory under <code>/var/lib/pulp/imports</code>.</p>
</li>
<li>
<p>Import the content to an organization. See <a href="#Importing_a_Repository_content-management">Importing a repository</a>.</p>
<div class="paragraph">
<p>You can then manage content using content views or lifecycle environments as you require.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Synchronizing_a_Custom_Repository_content-management"><a class="anchor" href="#Synchronizing_a_Custom_Repository_content-management"></a>9.2. Synchronizing a custom repository</h3>
<div class="paragraph">
<p>When using Inter-Server Synchronization Network Sync, Red Hat repositories are configured automatically, but custom repositories are not.
Use this procedure to synchronize content from a custom repository on a connected Foreman&#160;server to a disconnected Foreman&#160;server through Inter-Server Synchronization (ISS) Network Sync.</p>
</div>
<div class="paragraph">
<p>Follow the procedure for the connected Foreman&#160;server before completing the procedure for the disconnected Foreman&#160;server.</p>
</div>
<div class="olist arabic">
<div class="title">Connected Foreman&#160;server</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Click on the custom product.</p>
</li>
<li>
<p>Click on the custom repository.</p>
</li>
<li>
<p>Copy the <strong>Published At:</strong> URL.</p>
</li>
<li>
<p>Continue with the procedure on disconnected Foreman&#160;server.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Disconnected Foreman&#160;server</div>
<ol class="arabic">
<li>
<p>Download the <code>katello-server-ca.crt</code> file from the connected Foreman&#160;server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl http://foreman.example.com/pub/katello-server-ca.crt</pre>
</div>
</div>
</li>
<li>
<p>Create an SSL Content Credential with the contents of <code>katello-server-ca.crt</code>.
For more information on creating an SSL Content Credential, see <a href="#Importing_Custom_SSL_Certificates_content-management">Importing SSL certificates</a>.</p>
</li>
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Create your custom product with the following:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Upstream URL</strong>: Paste the link that you copied earlier.</p>
</li>
<li>
<p><strong>SSL CA Cert</strong>: Select the SSL certificate that was transferred from your connected Foreman&#160;server.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information on creating a custom product, see <a href="#Creating_a_Custom_Product_content-management">Creating a product</a>.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>After completing these steps, the custom repository is properly configured on the disconnected Foreman&#160;server.</p>
</div>
</div>
<div class="sect2">
<h3 id="Exporting_the_Library_Environment_content-management"><a class="anchor" href="#Exporting_the_Library_Environment_content-management"></a>9.3. Exporting the Library environment</h3>
<div class="paragraph">
<p>You can export contents of all Yum repositories in the Library environment of an organization to an archive file from Foreman&#160;server and use this archive file to create the same repositories in another Foreman&#160;server or in another Foreman&#160;server organization.
The exported archive file contains the following data:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A JSON file containing content view version metadata.</p>
</li>
<li>
<p>An archive file containing all the repositories from the Library environment of the organization.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Foreman&#160;server exports only RPM, kickstart files, and Docker Content included in the Library environment.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure that the export directory has free storage space to accommodate the export.</p>
</li>
<li>
<p>Ensure that the <code>/var/lib/pulp/exports</code> directory has free storage space equivalent to the size of the repositories being exported for temporary files created during the export process.</p>
</li>
<li>
<p>Ensure that you set download policy to <strong>Immediate</strong> for all repositories within the Library lifecycle environment you export.
For more information, see <a href="#Download_Policies_Overview_content-management">Download policies overview</a>.</p>
</li>
<li>
<p>Ensure that you synchronize Products that you export to the required date.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Use the organization name or ID to export.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-export complete library --organization="<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Verify that the archive containing the exported version of a content view is located in the export directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ls -lh /var/lib/pulp/exports/<em>My_Organization</em>/Export-Library/1.0/2021-03-02T03-35-24-00-00
total 68M
-rw-r--r--. 1 pulp pulp 68M Mar  2 03:35 export-1e25417c-6d09-49d4-b9a5-23df4db3d52a-20210302_0335.tar.gz
-rw-r--r--. 1 pulp pulp 333 Mar  2 03:35 export-1e25417c-6d09-49d4-b9a5-23df4db3d52a-20210302_0335-toc.json
-rw-r--r--. 1 pulp pulp 443 Mar  2 03:35 metadata.json</pre>
</div>
</div>
<div class="paragraph">
<p>You need all three files, the <code>tar.gz</code>, the <code>toc.json</code>, and the <code>metadata.json</code> file to be able to import.</p>
</div>
</li>
<li>
<p>A new content view <strong>Export-Library</strong> is created in the organization.
This content view contains all the repositories belonging to this organization.
A new version of this content view is published and exported automatically.</p>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Export with chunking</div>
<p>In many cases the exported archive content may be several gigabytes in size.
If you want to split it into smaller sizes or chunks.
You can use the <code>--chunk-size-gb</code> flag directly in the export command to handle this.
In the following example, you can see how to specify <code>--chunk-size-gb=2</code> to split the archives in <code>2 GB</code> chunks.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-export complete library \
--chunk-size-gb=2 \
--organization="<em>My_Organization</em>"

Generated /var/lib/pulp/exports/<em>My_Organization</em>/Export-Library/2.0/2021-03-02T04-01-25-00-00/metadata.json

# ls -lh /var/lib/pulp/exports/<em>My_Organization</em>/Export-Library/2.0/2021-03-02T04-01-25-00-00/</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Exporting_the_Library_Environment_in_a_Syncable_Format_content-management"><a class="anchor" href="#Exporting_the_Library_Environment_in_a_Syncable_Format_content-management"></a>9.4. Exporting the library environment in a syncable format</h3>
<div class="paragraph">
<p>You can export contents of all yum repositories, Kickstart repositories and file repositories in the Library environment of an organization to a syncable format that you can use to create your custom CDN and synchronize the content from the custom CDN over HTTP/HTTPS.</p>
</div>
<div class="paragraph">
<p>You can use the generated content to create the same repository in another Foreman&#160;server or in another Foreman&#160;server organization by using content import.
On import of the exported archive, a regular content view is created or updated on your importing Foreman&#160;server.
For more information, see <a href="#Importing_a_Content_View_Version_content-management">Importing a content view version</a>.</p>
</div>
<div class="paragraph">
<p>You can export the following content in the syncable format from Foreman&#160;server:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Yum repositories</p>
</li>
<li>
<p>Kickstart repositories</p>
</li>
<li>
<p>File repositories</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You cannot export Ansible, Deb, or Docker content.</p>
</div>
<div class="paragraph">
<p>The export contains directories with the packages, <strong>listing</strong> files, and metadata of the repository in Yum format that can be used to synchronize in the importing Foreman&#160;server.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure that you set the download policy to <strong>Immediate</strong> for all repositories within the Library lifecycle environment you export.
For more information, see <a href="#Download_Policies_Overview_content-management">Download policies overview</a>.</p>
</li>
<li>
<p>Ensure that you synchronize products you export to the required date.</p>
</li>
<li>
<p>Ensure that the user exporting the content has the <code>Content Exporter</code> role.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Use the organization name or ID to export:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-export complete library \
--organization="<em>My_Organization</em>" \
--format=syncable</pre>
</div>
</div>
</li>
<li>
<p>Optional: Verify that the exported content is located in the export directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># du -sh /var/lib/pulp/exports/<em>My_Organization</em>/Export-<em>My_Repository</em>/1.0/2021-03-02T03-35-24-00-00</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Importing_Syncable_Exports_content-management"><a class="anchor" href="#Importing_Syncable_Exports_content-management"></a>9.5. Importing syncable exports</h3>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Use the organization name or ID to import syncable exports:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-import library
--organization="<em>My_Organization</em>"
--path="<em>My_Path_To_Syncable_Export</em>"</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Syncable exports must be located in one of your <code>ALLOWED_IMPORT_PATHS</code> as specified in <code>/etc/pulp/settings.py</code>.
By default, this includes <code>/var/lib/pulp/imports</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="exporting-the-library-environment-incrementally_content-management"><a class="anchor" href="#exporting-the-library-environment-incrementally_content-management"></a>9.6. Exporting the Library environment incrementally</h3>
<div class="paragraph">
<p>Exporting Library content can be a very expensive operation in terms of system resources.
Organizations that have multiple Red&#160;Hat Enterprise Linux trees can occupy several gigabytes of space on Foreman&#160;server.</p>
</div>
<div class="paragraph">
<p>In such cases, you can create an incremental export which contains only pieces of content that have changed since the last export.
Incremental exports typically result in smaller archive files than the full exports.</p>
</div>
<div class="paragraph">
<p>The example below shows incremental export of all repositories in the organization&#8217;s Library.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create an incremental export:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-export incremental library \
--organization="<em>My_Organization</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>If you want to create a syncable export, add <code>--format=syncable</code>.
By default, Foreman creates an importable export.</p>
</div>
<div class="paragraph">
<p>You can only export in syncable format for Yum and file-type content.</p>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Next steps</div>
<ul>
<li>
<p>Optional: View the exported data:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># find /var/lib/pulp/exports/<em>My_Organization</em>/Export-Library/</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Exporting_a_Content_View_Version_content-management"><a class="anchor" href="#Exporting_a_Content_View_Version_content-management"></a>9.7. Exporting a content view version</h3>
<div class="paragraph">
<p>You can export a version of a content view to an archive file from Foreman&#160;server and use this archive file to create the same content view version on another Foreman&#160;server or on another Foreman&#160;server organization.
Foreman exports composite content views as normal content views.
The composite nature is not retained.
On importing the exported archive, a regular content view is created or updated on your downstream Foreman&#160;server.
The exported archive file contains the following data:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A JSON file containing content view version metadata</p>
</li>
<li>
<p>An archive file containing all the repositories included into the content view version</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can only export Yum repositories, Kickstart files, and Docker content added to a version of a content view.
Foreman does not export the following content:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Content view definitions and metadata, such as package filters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Prerequisites</div>
<p>To export a content view, ensure that Foreman&#160;server where you want to export meets the following conditions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ensure that the export directory has free storage space to accommodate the export.</p>
</li>
<li>
<p>Ensure that the <code>/var/lib/pulp/exports</code> directory has free storage space equivalent to the size of the repositories being exported for temporary files created during the export process.</p>
</li>
<li>
<p>Ensure that you set download policy to <strong>Immediate</strong> for all repositories within the content view you export.
For more information, see <a href="#Download_Policies_Overview_content-management">Download policies overview</a>.</p>
</li>
<li>
<p>Ensure that you synchronize Products that you export to the required date.</p>
</li>
<li>
<p>Ensure that the user exporting the content has the <code>Content Exporter</code> role.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">To export a content view version</div>
<ol class="arabic">
<li>
<p>List versions of the content view that are available for export:</p>
<div class="listingblock">
<div class="content">
<pre># hammer content-view version list \
--content-view="<em>My_Content_View</em>" \
--organization="<em>My_Organization</em>"

---|----------|---------|-------------|-----------------------
ID | NAME     | VERSION | DESCRIPTION | LIFECYCLE ENVIRONMENTS
---|----------|---------|-------------|-----------------------
5  | view 3.0 | 3.0     |             | Library
4  | view 2.0 | 2.0     |             |
3  | view 1.0 | 1.0     |             |
---|----------|---------|-------------|----------------------</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Export a content view version</div>
<ol class="arabic">
<li>
<p>Get the version number of desired version.
The following example targets version <code>1.0</code> for export.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-export complete version \
--content-view="<em>Content_View_Name</em>" \
--version=1.0 \
--organization="<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Verify that the archive containing the exported version of a content view is located in the export directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ls -lh /var/lib/pulp/exports/<em>My_Organization</em>/<em>Content_View_Name</em>/1.0/2021-02-25T18-59-26-00-00/</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>You require all three files, for example, the <code>tar.gz</code> archive file, the <code>toc.json</code> and <code>metadata.json</code> to import the content successfully.</p>
</div>
<div class="paragraph">
<div class="title">Export with chunking</div>
<p>In many cases, the exported archive content can be several gigabytes in size.
You might want to split it smaller sizes or chunks.
You can use the <code>--chunk-size-gb</code> option with in the <code>hammer content-export</code> command to handle this.
The following example uses the <code>--chunk-size-gb=2</code> to split the archives into <code>2 GB</code> chunks.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-export complete version \
--chunk-size-gb=2 \
--content-view="<em>Content_View_Name</em>" \
--organization="<em>My_Organization</em>" \
--version=1.0
# ls -lh /var/lib/pulp/exports/<em>My_Organization</em>/view/1.0/2021-02-25T21-15-22-00-00/</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Exporting_a_Content_View_Version_in_a_Syncable_Format_content-management"><a class="anchor" href="#Exporting_a_Content_View_Version_in_a_Syncable_Format_content-management"></a>9.8. Exporting a content view version in a syncable format</h3>
<div class="paragraph">
<p>You can export a version of a content view to a syncable format that you can use to create your custom CDN.
After you have exported the content view, you can do either of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Synchronize the content from your custom CDN over HTTP/HTTPS.</p>
</li>
<li>
<p>Import the content using <code>hammer content-import</code>.
Note that this requires both the Export and Import servers to run Foreman 3.9.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can use the generated content to create the same repository in another Foreman&#160;server or in another Foreman&#160;server organization using content import.
On importing the exported archive, a regular content view is created or updated on your downstream Foreman&#160;server.
For more information, see <a href="#Importing_a_Content_View_Version_content-management">Importing a content view version</a>.</p>
</div>
<div class="paragraph">
<p>You can export the following content in a syncable format from Foreman&#160;server:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Yum repositories</p>
</li>
<li>
<p>Kickstart repositories</p>
</li>
<li>
<p>File repositories</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You cannot export Ansible, Deb, or Docker content.</p>
</div>
<div class="paragraph">
<p>The export contains directories with the packages, <strong>listing</strong> files, and metadata of the repository in Yum format that can be used to synchronize in the importing Foreman&#160;server.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure that you set the download policy to <strong>Immediate</strong> for all repositories within the content view you export.
For more information, see <a href="#Download_Policies_Overview_content-management">Download policies overview</a>.</p>
</li>
<li>
<p>Ensure that you synchronize products you export to the required date.</p>
</li>
<li>
<p>Ensure that the user exporting the content has the <code>Content Exporter</code> role.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">To export a content view version</div>
<ul>
<li>
<p>List versions of the content view that are available for export:</p>
<div class="listingblock">
<div class="content">
<pre># hammer content-view version list \
--content-view="<em>My_Content_View</em>" \
--organization="<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Get the version number of desired version.
The following example targets version <code>1.0</code> for export:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-export complete version \
--content-view="<em>Content_View_Name</em>" \
--version=1.0 \
--organization="<em>My_Organization</em>" \
--format=syncable</pre>
</div>
</div>
</li>
<li>
<p>Optional: Verify that the exported content is located in the export directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ls -lh /var/lib/pulp/exports/<em>My_Organization</em>/<em>My_Content_View_Name</em>/1.0/2021-02-25T18-59-26-00-00/</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Exporting_a_Content_View_Version_Incrementally_content-management"><a class="anchor" href="#Exporting_a_Content_View_Version_Incrementally_content-management"></a>9.9. Exporting a content view version incrementally</h3>
<div class="paragraph">
<p>Exporting complete content view versions can be a very expensive operation in terms of system resources.
Content view versions that have multiple Red&#160;Hat Enterprise Linux trees can occupy several gigabytes of space on Foreman&#160;server.</p>
</div>
<div class="paragraph">
<p>In such cases, you can create an incremental export which contains only pieces of content that have changed since the last export.
Incremental exports typically result in smaller archive files than the full exports.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create an incremental export:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-export incremental version \
--content-view="<em>My_Content_View</em>" \
--organization="<em>My_Organization</em>" \
--version="<em>My_Content_View_Version</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>If you want to create a syncable export, add <code>--format=syncable</code>.
By default, Foreman creates an importable export.</p>
</div>
<div class="paragraph">
<p>You can only export in syncable format for Yum and file-type content.</p>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Next steps</div>
<ul>
<li>
<p>Optional: View the exported content view:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># find /var/lib/pulp/exports/<em>My_Organization</em>/<em>My_Exported_Content_View</em>/<em>My_Content_View_Version</em>/</pre>
</div>
</div>
</li>
<li>
<p>You can import your exported content view version into Foreman&#160;server.
For more information, see <a href="#Importing_a_Content_View_Version_content-management">Importing a content view version</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Exporting_a_Repository_content-management"><a class="anchor" href="#Exporting_a_Repository_content-management"></a>9.10. Exporting a repository</h3>
<div class="paragraph">
<p>You can export the content of a repository in the Library environment of an organization from Foreman&#160;server.
You can use this archive file to create the same repository in another Foreman&#160;server or in another Foreman&#160;server organization.</p>
</div>
<div class="paragraph">
<p>You can export the following content from Foreman&#160;server:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ansible repositories</p>
</li>
<li>
<p>Kickstart repositories</p>
</li>
<li>
<p>Yum repositories</p>
</li>
<li>
<p>File repositories</p>
</li>
<li>
<p>Docker content</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You cannot export Deb repositories from Foreman&#160;server.</p>
</div>
<div class="paragraph">
<p>The export contains the following data:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Two JSON files containing repository metadata.</p>
</li>
<li>
<p>One or more archive files containing the contents of the repository from the Library environment of the organization.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You need all the files, <code>tar.gz</code>, <code>toc.json</code> and <code>metadata.json</code>, to be able to import.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure that the export directory has enough free storage space to accommodate the export.</p>
</li>
<li>
<p>Ensure that the <code>/var/lib/pulp/exports</code> directory has enough free storage space equivalent to the size of all repositories that you want to export.</p>
</li>
<li>
<p>Ensure that you set download policy to <strong>Immediate</strong> for the repository within the Library lifecycle environment you export.
For more information, see <a href="#Download_Policies_Overview_content-management">Download policies overview</a>.</p>
</li>
<li>
<p>Ensure that you synchronize products that you export to the required date.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Export a repository:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-export complete repository \
--name="<em>My_Repository</em>" \
--product="<em>My_Product</em>" \
--organization="<em>My_Organization</em>"</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The size of the exported archive depends on the number and size of the packages within the repository.
If you want to split the exported archive into chunks, export your repository using the <code>--chunk-size-gb</code> argument to limit the size by an integer value in gigabytes, for example <code>---chunk-size-gb=<em>2</em></code>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Optional: Verify that the exported archive is located in the export directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ls -lh /var/lib/pulp/exports/<em>My_Organization</em>/Export-<em>My_Repository</em>/1.0/2022-09-02T03-35-24-00-00/</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Exporting_a_Repository_in_a_Syncable_Format_content-management"><a class="anchor" href="#Exporting_a_Repository_in_a_Syncable_Format_content-management"></a>9.11. Exporting a repository in a syncable format</h3>
<div class="paragraph">
<p>You can export the content of a repository in the Library environment of an organization to a syncable format that you can use to create your custom CDN and synchronize the content from the custom CDN over HTTP/HTTPS.</p>
</div>
<div class="paragraph">
<p>You can use the generated content to create the same repository in another Foreman&#160;server or in another Foreman&#160;server organization using content import.
On importing the exported archive, a regular content view is created or updated on your downstream Foreman&#160;server.
For more information, see <a href="#Importing_a_Content_View_Version_content-management">Importing a content view version</a>.</p>
</div>
<div class="paragraph">
<p>You can export the following content in a syncable format from Foreman&#160;server:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Yum repositories</p>
</li>
<li>
<p>Kickstart repositories</p>
</li>
<li>
<p>File repositories</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You cannot export Ansible, Deb, or Docker content.</p>
</div>
<div class="paragraph">
<p>The export contains directories with the packages, <strong>listing</strong> files, and metadata of the repository in Yum format that can be used to synchronize in the importing Foreman&#160;server.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure that you set the download policy to <strong>Immediate</strong> for the repository within the Library lifecycle environment you export.
For more information, see <a href="#Download_Policies_Overview_content-management">Download policies overview</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Export a repository using the repository name or ID:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-export complete repository \
--organization="<em>My_Organization</em>" \
--product="<em>My_Product</em>" \
--name="<em>My_Repository</em>" \
--format=syncable</pre>
</div>
</div>
</li>
<li>
<p>Optional: Verify that the exported content is located in the export directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># du -sh /var/lib/pulp/exports/<em>My_Organization</em>/Export-<em>My_Repository</em>/1.0/2021-03-02T03-35-24-00-00</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Exporting_Repository_Incrementally_content-management"><a class="anchor" href="#Exporting_Repository_Incrementally_content-management"></a>9.12. Exporting a repository incrementally</h3>
<div class="paragraph">
<p>Exporting a repository can be a very expensive operation in terms of system resources.
A typical Red&#160;Hat Enterprise Linux tree may occupy several gigabytes of space on Foreman&#160;server.</p>
</div>
<div class="paragraph">
<p>In such cases, you can use <strong>Incremental Export</strong> to export only pieces of content that changed since the previous export.
Incremental exports typically result in smaller archive files than the full exports.</p>
</div>
<div class="paragraph">
<p>The example below shows incremental export of a repository in the Library lifecycle environment.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create an incremental export:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-export incremental repository \
--name="<em>My_Repository</em>" \
--organization="<em>My_Organization</em>" \
--product="<em>My_Product</em>"</pre>
</div>
</div>
</li>
<li>
<p>Optional: View the exported data:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ls -lh /var/lib/pulp/exports/<em>My_Organization</em>/Export-<em>My_Repository</em>/3.0/2021-03-02T03-35-24-00-00/
total 172K
-rw-r--r--. 1 pulp pulp  20M Mar  2 04:22 export-436882d8-de5a-48e9-a30a-17169318f908-20210302_0422.tar.gz
-rw-r--r--. 1 pulp pulp  333 Mar  2 04:22 export-436882d8-de5a-48e9-a30a-17169318f908-20210302_0422-toc.json
-rw-r--r--. 1 root root  492 Mar  2 04:22 metadata.json</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Exporting_a_Repository_Incrementally_in_a_Syncable_Format_content-management"><a class="anchor" href="#Exporting_a_Repository_Incrementally_in_a_Syncable_Format_content-management"></a>9.13. Exporting a repository incrementally in a syncable format</h3>
<div class="paragraph">
<p>Exporting a repository can be a very expensive operation in terms of system resources.
A typical Red&#160;Hat Enterprise Linux tree may occupy several gigabytes of space on Foreman&#160;server.</p>
</div>
<div class="paragraph">
<p>In such cases, you can use <strong>Incremental Export</strong> to export only pieces of content that changed since the previous export.
Incremental exports typically result in smaller archive files than full exports.</p>
</div>
<div class="paragraph">
<p>The procedure below shows an incremental export of a repository in the Library lifecycle environment.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create an incremental export:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-export incremental repository \
--format=syncable \
--name="<em>My_Repository</em>" \
--organization="<em>My_Organization</em>" \
--product="<em>My_Product</em>"</pre>
</div>
</div>
</li>
<li>
<p>Optional: View the exported data:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># find /var/lib/pulp/exports/Default_Organization/<em>My_Product</em>/2.0/2023-03-09T10-55-48-05-00/ -name "*.rpm"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Keeping_Track_of_Your_Exports_content-management"><a class="anchor" href="#Keeping_Track_of_Your_Exports_content-management"></a>9.14. Keeping track of your exports</h3>
<div class="paragraph">
<p>Foreman keeps records of all exports.
Each time you export content on the upstream Foreman&#160;server, the export is recorded and maintained for future querying.
You can use the records to organize and manage your exports, which is useful especially when exporting incrementally.</p>
</div>
<div class="paragraph">
<p>When exporting content from the upstream Foreman&#160;server for several downstream Foreman&#160;servers, you can also keep track of content exported for specific servers.
This helps you track which content was exported and to where.</p>
</div>
<div class="paragraph">
<p>Use the <code>--destination-server</code> argument during export to indicate the target server.
This option is available for all <code>content-export</code> operations.</p>
</div>
<div class="ulist">
<div class="title">Tracking destinations of Library exports</div>
<ul>
<li>
<p>Specify the destination server when exporting the Library:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-export complete library \
--destination-server=<em>My_Downstream_Server_1</em> \
--organization="<em>My_Organization</em>" \
--version=1.0</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Tracking destinations of content view exports</div>
<ul>
<li>
<p>Specify the destination server when exporting a content view version:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-export complete version \
--content-view="<em>Content_View_Name</em>" \
--destination-server=<em>My_Downstream_Server_1</em> \
--organization="<em>My_Organization</em>" \
--version=1.0</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Querying export records</div>
<ul>
<li>
<p>List content exports using the following command:</p>
<div class="listingblock">
<div class="content">
<pre># hammer content-export list --organization="<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Importing_into_the_Library_Environment_content-management"><a class="anchor" href="#Importing_into_the_Library_Environment_content-management"></a>9.15. Importing into the Library environment</h3>
<div class="paragraph">
<p>You can import exported Library content into the Library lifecycle environment of an organization on another Foreman&#160;server.
For more information about exporting contents from the Library environment, see <a href="#Exporting_the_Library_Environment_content-management">Exporting the Library environment</a>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The exported files must be in a directory under <code>/var/lib/pulp/imports</code>.</p>
</li>
<li>
<p>If there are any Red Hat repositories in the exported content, the importing organization&#8217;s manifest must contain subscriptions for the products contained within the export.</p>
</li>
<li>
<p>The user importing the content must have the <em>Content Importer</em> Role.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Copy the exported files to a subdirectory of <code>/var/lib/pulp/imports</code> on Foreman&#160;server where you want to import.</p>
</li>
<li>
<p>Set the ownership of the import directory and its contents to <code>pulp:pulp</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># chown -R pulp:pulp /var/lib/pulp/imports/2021-03-02T03-35-24-00-00</pre>
</div>
</div>
</li>
<li>
<p>Verify that the ownership is set correctly:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ls -lh /var/lib/pulp/imports/2021-03-02T03-35-24-00-00
total 68M
-rw-r--r--. 1 pulp pulp 68M Mar  2 04:29 export-1e25417c-6d09-49d4-b9a5-23df4db3d52a-20210302_0335.tar.gz
-rw-r--r--. 1 pulp pulp 333 Mar  2 04:29 export-1e25417c-6d09-49d4-b9a5-23df4db3d52a-20210302_0335-toc.json
-rw-r--r--. 1 pulp pulp 443 Mar  2 04:29 metadata.json</pre>
</div>
</div>
</li>
<li>
<p>Identify the Organization that you wish to import into.</p>
</li>
<li>
<p>To import the Library content to Foreman&#160;server, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre># hammer content-import library \
--organization="<em>My_Organization</em>" \
--path=/var/lib/pulp/imports/2021-03-02T03-35-24-00-00</pre>
</div>
</div>
<div class="paragraph">
<p>Note you must enter the full path <code>/var/lib/pulp/imports/<em>My_Exported_Library_Dir</em></code>.
Relative paths do not work.</p>
</div>
</li>
<li>
<p>To verify that you imported the Library content, check the contents of the Product and Repositories.
A new content view called <code>Import-Library</code> is created in the target organization.
This content view is used to facilitate the Library content import.</p>
<div class="paragraph">
<p>By default, this content view is not shown in the Foreman web UI.
<code>Import-Library</code> is not meant to be assigned directly to hosts.
Instead, assign your hosts to <code>Default Organization View</code> or another content view as you would normally.</p>
</div>
</li>
<li>
<p>The importing Foreman&#160;server extracts the <code>/var/lib/pulp/imports</code> directory to <code>/var/lib/pulp/</code>.
You can empty the <code>/var/lib/pulp/imports</code> directory after a successful import.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Importing_into_the_Library_Environment_from_a_web_server_content-management"><a class="anchor" href="#Importing_into_the_Library_Environment_from_a_web_server_content-management"></a>9.16. Importing into the Library environment from a web server</h3>
<div class="paragraph">
<p>You can import exported Library content directly from a web server into the Library lifecycle environment of an organization on another Foreman&#160;server.
For more information about exporting contents from the Library environment, see <a href="#Exporting_the_Library_Environment_content-management">Exporting the Library environment</a>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The exported files must be in a syncable format.</p>
</li>
<li>
<p>The exported files must be accessible through HTTP/HTTPS.</p>
</li>
<li>
<p>If there are any Red Hat repositories in the exported content, the importing organization&#8217;s manifest must contain subscriptions for the products contained within the export.</p>
</li>
<li>
<p>The user importing the content view version must have the <em>Content Importer</em> role.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Identify the Organization that you wish to import into.</p>
</li>
<li>
<p>To import the Library content to Foreman&#160;server, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-import library \
--organization="<em>My_Organization</em>" \
--path=http://<em>server.example.com</em>/pub/exports/2021-02-25T21-15-22-00-00/</pre>
</div>
</div>
<div class="paragraph">
<p>A new content view called <code>Import-Library</code> is created in the target organization.
This content view is used to facilitate the Library content import.</p>
</div>
<div class="paragraph">
<p>By default, this content view is not shown in the Foreman web UI.
<code>Import-Library</code> is not meant to be assigned directly to hosts.
Instead, assign your hosts to <code>Default Organization View</code> or another content view.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Importing_a_Content_View_Version_content-management"><a class="anchor" href="#Importing_a_Content_View_Version_content-management"></a>9.17. Importing a content view version</h3>
<div class="paragraph">
<p>You can import an exported content view version to create a version with the same content in an organization on another Foreman&#160;server.
For more information about exporting a content view version, see <a href="#Exporting_a_Content_View_Version_content-management">Exporting a content view version</a>.</p>
</div>
<div class="paragraph">
<p>When you import a content view version, it has the same major and minor version numbers and contains the same repositories with the same packages and errata.
Custom repositories, products and content views are automatically created if they do not exist in the importing organization.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The exported files must be in a directory under <code>/var/lib/pulp/imports</code>.</p>
</li>
<li>
<p>If there are any Red Hat repositories in the exported content, the importing organization&#8217;s manifest must contain subscriptions for the products contained within the export.</p>
</li>
<li>
<p>The user importing the content view version must have the <em>Content Importer</em> Role.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Copy the exported files to a subdirectory of <code>/var/lib/pulp/imports</code> on Foreman&#160;server where you want to import.</p>
</li>
<li>
<p>Set the ownership of the import directory and its contents to <code>pulp:pulp</code>.</p>
<div class="listingblock">
<div class="content">
<pre># chown -R pulp:pulp /var/lib/pulp/imports/2021-02-25T21-15-22-00-00/</pre>
</div>
</div>
</li>
<li>
<p>Verify that the ownership is set correctly:</p>
<div class="listingblock">
<div class="content">
<pre># ls -lh /var/lib/pulp/imports/2021-02-25T21-15-22-00-00/</pre>
</div>
</div>
</li>
<li>
<p>To import the content view version to Foreman&#160;server, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-import version \
--organization=<em>My_Organization</em> \
--path=/var/lib/pulp/imports/2021-02-25T21-15-22-00-00/</pre>
</div>
</div>
<div class="paragraph">
<p>Note that you must enter the full path <code>/var/lib/pulp/imports/<em>My_Exported_Version_Dir</em></code>.
Relative paths do not work.</p>
</div>
</li>
<li>
<p>To verify that you imported the content view version successfully, list content view versions for your organization:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view version list \
--organization-id=<em>My_Organization_ID</em></pre>
</div>
</div>
</li>
<li>
<p>The importing Foreman&#160;server extracts the <code>/var/lib/pulp/imports</code> directory to <code>/var/lib/pulp/</code>.
You can empty the <code>/var/lib/pulp/imports</code> directory after a successful import.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Importing_a_Content_View_Version_from_a_web_servercontent-management"><a class="anchor" href="#Importing_a_Content_View_Version_from_a_web_servercontent-management"></a>9.18. Importing a content view version from a web server</h3>
<div class="paragraph">
<p>You can import an exported content view version directly from a web server to create a version with the same content in an organization on another Foreman&#160;server.
For more information about exporting a content view version, see <a href="#Exporting_a_Content_View_Version_content-management">Exporting a content view version</a>.</p>
</div>
<div class="paragraph">
<p>When you import a content view version, it has the same major and minor version numbers and contains the same repositories with the same packages and errata.
Custom repositories, products, and content views are automatically created if they do not exist in the importing organization.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The exported files must be in a syncable format.</p>
</li>
<li>
<p>The exported files must be accessible through HTTP/HTTPS.</p>
</li>
<li>
<p>If there are any Red Hat repositories in the exported content, the importing organization&#8217;s manifest must contain subscriptions for the products contained within the export.</p>
</li>
<li>
<p>The user importing the content view version must have the <em>Content Importer</em> role.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Import the content view version into Foreman&#160;server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-import version \
--organization=<em>My_Organization</em> \
--path=http://<em>server.example.com</em>/pub/exports/2021-02-25T21-15-22-00-00/</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Importing_a_Repository_content-management"><a class="anchor" href="#Importing_a_Repository_content-management"></a>9.19. Importing a repository</h3>
<div class="paragraph">
<p>You can import an exported repository into an organization on another Foreman&#160;server.
For more information about exporting content of a repository, see <a href="#Exporting_a_Repository_content-management">Exporting a repository</a>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The export files must be in a directory under <code>/var/lib/pulp/imports</code>.</p>
</li>
<li>
<p>If the export contains any Red Hat repositories, the manifest of the importing organization must contain subscriptions for the products contained within the export.</p>
</li>
<li>
<p>The user importing the content must have the <em>Content Importer</em> Role.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Copy the exported files to a subdirectory of <code>/var/lib/pulp/imports</code> on Foreman&#160;server where you want to import.</p>
</li>
<li>
<p>Set the ownership of the import directory and its contents to <code>pulp:pulp</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># chown -R pulp:pulp /var/lib/pulp/imports/2021-03-02T03-35-24-00-00</pre>
</div>
</div>
</li>
<li>
<p>Verify that the ownership is set correctly:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ls -lh /var/lib/pulp/imports/2021-03-02T03-35-24-00-00
total 68M
-rw-r--r--. 1 pulp pulp 68M Mar  2 04:29 export-1e25417c-6d09-49d4-b9a5-23df4db3d52a-20210302_0335.tar.gz
-rw-r--r--. 1 pulp pulp 333 Mar  2 04:29 export-1e25417c-6d09-49d4-b9a5-23df4db3d52a-20210302_0335-toc.json
-rw-r--r--. 1 pulp pulp 443 Mar  2 04:29 metadata.json</pre>
</div>
</div>
</li>
<li>
<p>Identify the Organization that you wish to import into.</p>
</li>
<li>
<p>To import the repository content to Foreman&#160;server, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre># hammer content-import repository \
--organization="<em>My_Organization</em>" \
--path=/var/lib/pulp/imports/<em>2021-03-02T03-35-24-00-00</em></pre>
</div>
</div>
<div class="paragraph">
<p>Note that you must enter the full path <code>/var/lib/pulp/imports/<em>My_Exported_Repo_Dir</em></code>.
Relative paths do not work.</p>
</div>
</li>
<li>
<p>To verify that you imported the repository, check the contents of the product and repository.</p>
</li>
<li>
<p>The importing Foreman&#160;server extracts the <code>/var/lib/pulp/imports</code> directory to <code>/var/lib/pulp/</code>.
You can empty the <code>/var/lib/pulp/imports</code> directory after a successful import.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Importing_a_Repository_from_a_web_server_content-management"><a class="anchor" href="#Importing_a_Repository_from_a_web_server_content-management"></a>9.20. Importing a repository from a web server</h3>
<div class="paragraph">
<p>You can import an exported repository directly from a web server into an organization on another Foreman&#160;server.
For more information about exporting the content of a repository, see <a href="#Exporting_a_Repository_content-management">Exporting a repository</a>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The exported files must be in a syncable format.</p>
</li>
<li>
<p>The exported files must be accessible through HTTP/HTTPS.</p>
</li>
<li>
<p>If the export contains any Red Hat repositories, the manifest of the importing organization must contain subscriptions for the products contained within the export.</p>
</li>
<li>
<p>The user importing the content view version must have the <em>Content Importer</em> Role.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Select the organization into which you want to import.</p>
</li>
<li>
<p>To import the repository to Foreman&#160;server, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-import repository \
--organization="<em>My_Organization</em>" \
--path=http://<em>server.example.com</em>/pub/exports/2021-02-25T21-15-22-00-00/</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Exporting_and_Importing_Content_Using_Hammer_CLI_Cheat_Sheet_content-management"><a class="anchor" href="#Exporting_and_Importing_Content_Using_Hammer_CLI_Cheat_Sheet_content-management"></a>9.21. Exporting and importing content using Hammer CLI cheat sheet</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Export</caption>
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Intent</th>
<th class="tableblock halign-left valign-top">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fully export an Organization&#8217;s Library</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hammer content-export complete library --organization="<em>My_Organization</em>"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Incrementally export an Organization&#8217;s Library (assuming you have exported something previously)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hammer content-export incremental library --organization="<em>My_Organization</em>"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fully export a content view version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hammer content-export complete version --content-view="<em>My_Content_View</em>" --version=1.0 --organization="<em>My_Organization</em>"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Export a content view version promoted to the Dev Environment</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hammer content-export complete version --content-view="<em>My_Content_View</em>" --organization="<em>My_Organization</em>" --lifecycle-environment="Dev"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Export a content view in smaller chunks (2-GB slabs)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hammer content-export complete version --content-view="<em>My_Content_View</em>" --version=1.0 --organization="<em>My_Organization</em>" --chunk-size-gb=2</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Incrementally export a content view version (assuming you have exported something previously)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hammer content-export incremental version --content-view="<em>My_Content_View</em>" --version=2.0 --organization="<em>My_Organization</em>"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fully export a Repository</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hammer content-export complete repository --product="<em>My_Product</em>" --name="<em>My_Repository</em>" --organization="<em>My_Organization</em>"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Incrementally export a Repository (assuming you have exported something previously)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hammer content-export incremental repository --product="<em>My_Product</em>" --name="<em>My_Repository</em>" --organization="<em>My_Organization</em>"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">List exports</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hammer content-export list --content-view="<em>My_Content_View</em>" --organization="<em>My_Organization</em>"</code></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Import</caption>
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Intent</th>
<th class="tableblock halign-left valign-top">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Import into an Organization&#8217;s Library</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hammer content-import library --organization="<em>My_Organization</em>" --path="/var/lib/pulp/imports/<em>My_Exported_Library_Dir</em>"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Import to a content view version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hammer content-import version --organization="<em>My_Organization</em>" --path="/var/lib/pulp/imports/<em>My_Exported_Version_Dir</em>"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Import a Repository</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hammer content-import repository --organization="<em>My_Organization</em>" --path="/var/lib/pulp/imports/<em>My_Exported_Repo_Dir</em>"</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Managing_Activation_Keys_content-management"><a class="anchor" href="#Managing_Activation_Keys_content-management"></a>10. Managing activation keys</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Activation keys provide a method to automate system registration and subscription attachment.
You can create multiple keys and associate them with different environments and content views.
For example, you might create a basic activation key with a subscription for Red&#160;Hat Enterprise Linux workstations and associate it with content views from a particular environment.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you have Simple Content Access (SCA) enabled on Foreman, you cannot attach subscriptions to your activation key.
With SCA enabled, you do not need to have subscriptions attached to your hosts.
Note that SCA is enabled by default for newly created organizations.
To learn more about SCA, see <a href="https://access.redhat.com/articles/simple-content-access">Simple Content Access</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can use activation keys during content host registration to improve the speed, simplicity and consistency of the process.
Note that activation keys are used only when hosts are registered.
If changes are made to an activation key, it is applicable only to hosts that are registered with the amended activation key in the future.
The changes are not made to existing hosts.</p>
</div>
<div class="paragraph">
<p>Activation keys can define the following properties for content hosts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Associated subscriptions and subscription attachment behavior</p>
</li>
<li>
<p>Available products and repositories</p>
</li>
<li>
<p>A lifecycle environment and a content view</p>
</li>
<li>
<p>Host collection membership</p>
</li>
<li>
<p>System purpose</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Content view conflicts between host creation and registration</div>
<p>When you provision a host, Foreman uses provisioning templates and other content from the content view that you set in the host group or host settings.
When the host is registered, the content view from the activation key overwrites the original content view from the host group or host settings.
Then Foreman uses the content view from the activation key for every future task, for example, rebuilding a host.</p>
</div>
<div class="paragraph">
<p>When you rebuild a host, ensure that you set the content view that you want to use in the activation key and not in the host group or host settings.</p>
</div>
<div class="paragraph">
<div class="title">Using the same activation key with multiple content hosts</div>
<p>You can apply the same activation key to multiple content hosts if it contains enough subscriptions.
However, activation keys set only the initial configuration for a content host.
When the content host is registered to an organization, the organization&#8217;s content can be attached to the content host manually.</p>
</div>
<div class="paragraph">
<div class="title">Using multiple activation keys with a content host</div>
<p>A content host can be associated with multiple activation keys that are combined to define the host settings.
In case of conflicting settings, the last specified activation key takes precedence.
You can specify the order of precedence by setting a host group parameter as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ hammer hostgroup set-parameter \
--hostgroup "<em>My_Host_Group</em>" \
--name "<em>My_Activation_Key</em>" \
--value "<em>name_of_first_key</em>", "<em>name_of_second_key</em>", ...</pre>
</div>
</div>
<div class="sect2">
<h3 id="best-practices-for-activation-keys_content-management"><a class="anchor" href="#best-practices-for-activation-keys_content-management"></a>10.1. Best practices for activation keys</h3>
<div class="ulist">
<ul>
<li>
<p>Create an activation key for each use case.
This structures, modularizes, and simplifies content management on hosts.</p>
</li>
<li>
<p>Use a naming convention for activation keys to indicate the content and lifecycle environment, for example, <code>enterprise-linux-webserver</code>.</p>
</li>
<li>
<p>Automate activation key management by using a Hammer script or an <a href="https://theforeman.github.io/foreman-ansible-modules/develop/index.html">Ansible playbook</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Creating_an_Activation_Key_content-management"><a class="anchor" href="#Creating_an_Activation_Key_content-management"></a>10.2. Creating an activation key</h3>
<div class="paragraph">
<p>You can use activation keys to define a specific set of subscriptions to attach to hosts during registration.
The subscriptions that you add to an activation key must be available within the associated content view.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you have Simple Content Access (SCA) enabled on Foreman, you cannot attach subscriptions to your activation key.
With SCA enabled, you do not need to have subscriptions attached to your hosts.
Note that SCA is enabled by default for newly created organizations.
To learn more about SCA, see <a href="https://access.redhat.com/articles/simple-content-access">Simple Content Access</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Subscription Manager attaches subscriptions differently depending on the following factors:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Are there any subscriptions associated with the activation key?</p>
</li>
<li>
<p>Is the auto-attach option enabled?</p>
</li>
<li>
<p>For Red&#160;Hat Enterprise Linux 8 hosts: Is there system purpose set on the activation key?</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that Foreman automatically attaches subscriptions only for the products installed on a host.
For subscriptions that do not list products installed on Red&#160;Hat Enterprise Linux by default, such as the Extended Update Support (EUS) subscription, use an activation key specifying the required subscriptions and with the auto-attach disabled.</p>
</div>
<div class="paragraph">
<p>Based on the previous factors, there are three possible scenarios for subscribing with activation keys:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Activation key that attaches subscriptions automatically.</p>
<div class="paragraph">
<p>With no subscriptions specified and auto-attach enabled, hosts using the activation key search for the best fitting subscription from the ones provided by the content view associated with the activation key.
This is similar to entering the <code>subscription-manager --auto-attach</code> command.
For Red&#160;Hat Enterprise Linux 8 hosts, you can configure the activation key to set system purpose on hosts during registration to enhance the automatic subscriptions attachment.</p>
</div>
</li>
<li>
<p>Activation key providing a custom set of subscription for auto-attach.</p>
<div class="paragraph">
<p>If there are subscriptions specified and auto-attach is enabled, hosts using the activation key select the best fitting subscription from the list specified in the activation key.
Setting system purpose on the activation key does not affect this scenario.</p>
</div>
</li>
<li>
<p>Activation key with the exact set of subscriptions.</p>
<div class="paragraph">
<p>If there are subscriptions specified and auto-attach is disabled, hosts using the activation key are associated with all subscriptions specified in the activation key.
Setting system purpose on the activation key does not affect this scenario.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Products</div>
<p>If a product, typically containing content not provided by Red Hat, is assigned to an activation key, this product is always enabled for the registered content host regardless of the auto-attach setting.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Foreman web UI, see the <a href="#cli-creating-an-activation-key_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle</strong> &gt; <strong>Activation Keys</strong> and click <strong>Create Activation Key</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter the name of the activation key.</p>
</li>
<li>
<p>If you want to set a limit, clear the <strong>Unlimited hosts</strong> checkbox, and in the <strong>Limit</strong> field, enter the maximum number of systems you can register with the activation key.
If you want unlimited hosts to register with the activation key, ensure the <strong>Unlimited Hosts</strong> checkbox is selected.</p>
</li>
<li>
<p>Optional: In the <strong>Description</strong> field, enter a description for the activation key.</p>
</li>
<li>
<p>From the <strong>Environment</strong> list, select the environment to use.</p>
</li>
<li>
<p>From the <strong>Content View</strong> list, select a content view to use.</p>
</li>
<li>
<p>If Simple Content Access (SCA) is enabled:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the <strong>Repository Sets</strong> tab, ensure only your named repository is enabled.</p>
</li>
</ol>
</div>
</li>
<li>
<p>If SCA is not enabled:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Click the <strong>Subscriptions</strong> tab, then click the <strong>Add</strong> submenu.</p>
</li>
<li>
<p>Click the checkbox under the subscription you created before.</p>
</li>
<li>
<p>Click <strong>Add Selected</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
<li>
<p>Optional: For Red&#160;Hat Enterprise Linux 8 hosts, in the <strong>System Purpose</strong> section, you can configure the activation key with system purpose to set on hosts during registration to enhance subscriptions auto attachment.</p>
</li>
</ol>
</div>
<div id="cli-creating-an-activation-key_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Create the activation key:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer activation-key create \
--name "<em>My_Activation_Key</em>" \
--unlimited-hosts \
--description "<em>Example Stack in the Development Environment</em>" \
--lifecycle-environment "<em>Development</em>" \
--content-view "<em>Stack</em>" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Optional: For Red&#160;Hat Enterprise Linux 8 hosts, enter the following command to configure the activation key with system purpose to set on hosts during registration to enhance subscriptions auto attachment.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer activation-key update \
--organization "<em>My_Organization</em>" \
--name "<em>My_Activation_Key</em>" \
--service-level "<em>Standard</em>" \
--purpose-usage "<em>Development/Test</em>" \
--purpose-role "<em>Red&#160;Hat Enterprise Linux Server</em>" \
--purpose-addons "<em>addons</em>"</pre>
</div>
</div>
</li>
<li>
<p>Obtain a list of your subscription IDs:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer subscription list --organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Attach the Red&#160;Hat Enterprise Linux subscription UUID to the activation key:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer activation-key add-subscription \
--name "<em>My_Activation_Key</em>" \
--subscription-id <em>My_Subscription_ID</em> \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>List the product content associated with the activation key:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>If Simple Content Access (SCA) is enabled:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer activation-key product-content \
--content-access-mode-all true \
--name "<em>My_Activation_Key</em>" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>If SCA is not enabled:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer activation-key product-content \
--name "<em>My_Activation_Key</em>" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Override the default auto-enable status for the <a href="https://yum.theforeman.org/client/3.9">Foreman Client</a> repository.
The default status is set to disabled.
To enable, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer activation-key content-override \
--name "<em>My_Activation_Key</em>" \
--content-label https://yum.theforeman.org/client/3.9/el7/x86_64/foreman-client-release.rpm \
--value 1 \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Updating_Subscriptions_Associated_with_an_Activation_Key_content-management"><a class="anchor" href="#Updating_Subscriptions_Associated_with_an_Activation_Key_content-management"></a>10.3. Updating subscriptions associated with an activation key</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>This procedure is only valid if you have Simple Content Access (SCA) disabled on your Foreman.
With SCA enabled, you do not need to have subscriptions attached to your hosts.
Note that SCA is enabled by default for newly created organizations.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Use this procedure to change the subscriptions associated with an activation key.
To use the CLI instead of the Foreman web UI, see the <a href="#cli-updating-subscriptions-associated-with-an-activation-key_content-management">CLI procedure</a>.</p>
</div>
<div class="paragraph">
<p>Note that changes to an activation key apply only to machines provisioned after the change.
To update subscriptions on existing content hosts, see <a href="#Updating_Red_Hat_Subscriptions_on_Multiple_Hosts_content-management">Updating Red Hat subscriptions on multiple hosts</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle</strong> &gt; <strong>Activation Keys</strong> and click the name of the activation key.</p>
</li>
<li>
<p>Click the <strong>Subscriptions</strong> tab.</p>
</li>
<li>
<p>To remove subscriptions, select <strong>List/Remove</strong>, and then select the checkboxes to the left of the subscriptions to be removed and then click <strong>Remove Selected</strong>.</p>
</li>
<li>
<p>To add subscriptions, select <strong>Add</strong>, and then select the checkboxes to the left of the subscriptions to be added and then click <strong>Add Selected</strong>.</p>
</li>
<li>
<p>Click the <strong>Repository Sets</strong> tab and review the repositories' status settings.</p>
</li>
<li>
<p>To enable or disable a repository, select the checkbox for a repository and then change the status using the <strong>Select Action</strong> list.</p>
</li>
<li>
<p>Click the <strong>Details</strong> tab, select a content view for this activation key, and then click <strong>Save</strong>.</p>
</li>
</ol>
</div>
<div id="cli-updating-subscriptions-associated-with-an-activation-key_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List the subscriptions that the activation key currently contains:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer activation-key subscriptions \
--name <em>My_Activation_Key</em> \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Remove the required subscription from the activation key:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer activation-key remove-subscription \
--name "<em>My_Activation_Key</em>" \
--subscription-id <em>ff808181533518d50152354246e901aa</em> \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>For the <code>--subscription-id</code> option, you can use either the UUID or the ID of the subscription.</p>
</div>
</li>
<li>
<p>Attach new subscription to the activation key:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer activation-key add-subscription \
--name "<em>My_Activation_Key</em>" \
--subscription-id <em>ff808181533518d50152354246e901aa</em> \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>For the <code>--subscription-id</code> option, you can use either the UUID or the ID of the subscription.</p>
</div>
</li>
<li>
<p>List the product content associated with the activation key:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer activation-key product-content \
--name "<em>My_Activation_Key</em>" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Override the default auto-enable status for the required repository:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer activation-key content-override \
--name "<em>My_Activation_Key</em>" \
--content-label <em>content_label</em> \
--value 1 \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>For the <code>--value</code> option, enter <code>1</code> for enable, <code>0</code> for disable.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Using_Activation_Keys_for_Host_Registration_content-management"><a class="anchor" href="#Using_Activation_Keys_for_Host_Registration_content-management"></a>10.4. Using activation keys for host registration</h3>
<div class="paragraph">
<p>You can use activation keys to complete the following tasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Registering new hosts during provisioning through Foreman.
The kickstart provisioning templates in Foreman contain commands to register the host using an activation key that is defined when creating a host.</p>
</li>
<li>
<p>Registering existing Red&#160;Hat Enterprise Linux hosts.
Configure Subscription Manager to use Foreman&#160;server for registration and specify the activation key when running the <code>subscription-manager register</code> command.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can register hosts with Foreman using the host registration feature in the Foreman web UI, Hammer CLI, or the Foreman API.
For more information, see <a href="https://docs.theforeman.org/3.9/Managing_Hosts/index-katello.html#Registering_Hosts_managing-hosts">Registering Hosts</a> in <em>Managing hosts</em>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Hosts</strong> &gt; <strong>Register Host</strong>.</p>
</li>
<li>
<p>From the <strong>Activation Keys</strong> list, select the activation keys to assign to your host.</p>
</li>
<li>
<p>Click <strong>Generate</strong> to create the registration command.</p>
</li>
<li>
<p>Click on the <em>files</em> icon to copy the command to your clipboard.</p>
</li>
<li>
<p>Connect to your host using SSH and run the registration command.</p>
</li>
<li>
<p>Ensure that the appropriate repositories have been enabled:</p>
<div class="ulist">
<ul>
<li>
<p>On Enterprise Linux: Check the <code>/etc/yum.repos.d/redhat.repo</code> file and ensure that the appropriate repositories have been enabled.</p>
</li>
<li>
<p>On Debian: Check the <code>/etc/apt/sources.list</code> file and ensure that the appropriate repositories have been enabled.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Generate the host registration command using the Hammer CLI:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host-registration generate-command \
--activation-keys "<em>My_Activation_Key</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>If your hosts do not trust the SSL certificate of Foreman&#160;server, you can disable SSL validation by adding the <code>--insecure</code> flag to the registration command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host-registration generate-command \
--activation-keys "<em>My_Activation_Key</em>" \
--insecure true</pre>
</div>
</div>
</li>
<li>
<p>Connect to your host using SSH and run the registration command.</p>
</li>
<li>
<p>Ensure that the appropriate repositories have been enabled:</p>
<div class="ulist">
<ul>
<li>
<p>On Enterprise Linux: Check the <code>/etc/yum.repos.d/redhat.repo</code> file and ensure that the appropriate repositories have been enabled.</p>
</li>
<li>
<p>On Debian: Check the <code>/etc/apt/sources.list</code> file and ensure that the appropriate repositories have been enabled.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">API procedure</div>
<ol class="arabic">
<li>
<p>Generate the host registration command using the Foreman API:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl -X POST https://foreman.example.com/api/registration_commands \
--user "<em>My_User_Name</em>" \
-H 'Content-Type: application/json' \
-d '{ "registration_command": { "activation_keys": ["<em>My_Activation_Key_1</em>, <em>My_Activation_Key_2</em>"] }}'</pre>
</div>
</div>
<div class="paragraph">
<p>If your hosts do not trust the SSL certificate of Foreman&#160;server, you can disable SSL validation by adding the <code>--insecure</code> flag to the registration command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl -X POST https://foreman.example.com/api/registration_commands \
--user "<em>My_User_Name</em>" \
-H 'Content-Type: application/json' \
-d '{ "registration_command": { "activation_keys": ["<em>My_Activation_Key_1</em>, <em>My_Activation_Key_2</em>"], "insecure": true }}'</pre>
</div>
</div>
<div class="paragraph">
<p>Use an activation key to simplify specifying the environments.
For more information, see <a href="https://docs.theforeman.org/3.9/Managing_Content/index-katello.html#Managing_Activation_Keys_content-management">Managing Activation Keys</a> in <em>Managing content</em>.</p>
</div>
<div class="paragraph">
<p>To enter a password as a command line argument, use <code>username:password</code> syntax.
Keep in mind this can save the password in the shell history.
Alternatively, you can use a temporary personal access token instead of a password.
To generate a token in the Foreman web UI, navigate to <strong>My Account</strong> &gt; <strong>Personal Access Tokens</strong>.</p>
</div>
</li>
<li>
<p>Connect to your host using SSH and run the registration command.</p>
</li>
<li>
<p>Ensure that the appropriate repositories have been enabled:</p>
<div class="ulist">
<ul>
<li>
<p>On Enterprise Linux: Check the <code>/etc/yum.repos.d/redhat.repo</code> file and ensure that the appropriate repositories have been enabled.</p>
</li>
<li>
<p>On Debian: Check the <code>/etc/apt/sources.list</code> file and ensure that the appropriate repositories have been enabled.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Multiple activation keys</div>
<p>You can use multiple activation keys when registering a content host.
You can then create activation keys for specific subscription sets and combine them according to content host requirements.
For example, the following command registers a content host to your organization with both VDC and OpenShift subscriptions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># subscription-manager register \
--activationkey="ak-VDC,ak-OpenShift" \
--org="<em>My_Organization</em>"</pre>
</div>
</div>
<div class="paragraph">
<div class="title">Settings conflicts</div>
<p>If there are conflicting settings in activation keys, the rightmost key takes precedence.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Settings that conflict: <strong>Service Level</strong>, <strong>Release Version</strong>, <strong>Environment</strong>, <strong>Content View</strong>, and <strong>Product Content</strong>.</p>
</li>
<li>
<p>Settings that do not conflict and the host gets the union of them: <strong>Subscriptions</strong> and <strong>Host Collections</strong>.</p>
</li>
<li>
<p>Settings that influence the behavior of the key itself and not the host configuration: <strong>Content Host Limit</strong> and <strong>Auto-Attach</strong>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Enabling_Auto_Attach_content-management"><a class="anchor" href="#Enabling_Auto_Attach_content-management"></a>10.5. Enabling auto-attach</h3>
<div class="paragraph">
<p>When auto-attach is enabled on an activation key and there are subscriptions associated with the key, the subscription management service selects and attaches the best-matched associated subscriptions based on a set of criteria like currently installed products, architecture, and preferences like service level.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>This procedure is only valid if you have Simple Content Access (SCA) disabled on your Foreman.
With SCA enabled, you do not need to have subscriptions attached to your hosts.
Note that SCA is enabled by default for newly created organizations.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can enable auto-attach and have no subscriptions associated with the key.
This type of key is commonly used to register virtual machines when you do not want the virtual machine to consume a physical subscription, but to inherit a host-based subscription from the hypervisor.</p>
</div>
<div class="paragraph">
<p>Auto-attach is enabled by default.
Disable the option if you want to force attach all subscriptions associated with the activation key.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle</strong> &gt; <strong>Activation Keys</strong>.</p>
</li>
<li>
<p>Click the activation key name that you want to edit.</p>
</li>
<li>
<p>Click the <strong>Subscriptions</strong> tab.</p>
</li>
<li>
<p>Click the edit icon next to <strong>Auto-Attach</strong>.</p>
</li>
<li>
<p>Select or clear the checkbox to enable or disable auto-attach.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Enter the following command to enable auto-attach on the activation key:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer activation-key update --name "<em>My_Activation_Key</em>" \
--organization "<em>My_Organization</em>" --auto-attach true</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Setting_the_Service_Level_content-management"><a class="anchor" href="#Setting_the_Service_Level_content-management"></a>10.6. Setting the service level</h3>
<div class="paragraph">
<p>You can configure an activation key to define a default service level for the new host created with the activation key.
Setting a default service level selects only the matching subscriptions to be attached to the host.
For example, if the default service level on an activation key is set to Premium, only subscriptions with premium service levels are attached to the host upon registration.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle</strong> &gt; <strong>Activation Keys</strong>.</p>
</li>
<li>
<p>Click the activation key name you want to edit.</p>
</li>
<li>
<p>Click the edit icon next to <strong>Service Level</strong>.</p>
</li>
<li>
<p>Select the required service level from the list.
The list only contains service levels available to the activation key.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Set the service level to Premium on your activation key:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer activation-key update \
--name "<em>My_Activation_Key</em>" \
--organization "<em>My_Organization</em>" \
--service-level premium</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="enabling-and-disabling-repositories-on-activation-key_content-management"><a class="anchor" href="#enabling-and-disabling-repositories-on-activation-key_content-management"></a>10.7. Enabling and disabling repositories on activation key</h3>
<div class="paragraph">
<p>As a Simple Content Access (SCA) user, you can enable or disable repositories on an activation key in the Foreman web UI.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle</strong> &gt; <strong>Activation Keys</strong>.</p>
</li>
<li>
<p>Select an activation key.</p>
</li>
<li>
<p>Select the <strong>Repository Sets</strong> tab.</p>
</li>
<li>
<p>From the dropdown, you can filter the <strong>Repository type</strong> column to <strong>Custom</strong> or <strong>Red Hat</strong>, if desired.</p>
</li>
<li>
<p>Select the desired repositories or click the <strong>Select All</strong> checkbox to select all repositories.</p>
</li>
<li>
<p>From the <strong>Select Action</strong> list, select <strong>Override to Enabled</strong>, <strong>Override to Disabled</strong>, or <strong>Reset to Default</strong>.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Managing_SUSE_Content_content-management"><a class="anchor" href="#Managing_SUSE_Content_content-management"></a>11. Managing SUSE content</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use the SCC Manager plugin to manage content from SUSE on your Foreman.</p>
</div>
<div class="sect2">
<h3 id="Preparing_SUSE_Installation_Media_content-management"><a class="anchor" href="#Preparing_SUSE_Installation_Media_content-management"></a>11.1. Preparing SUSE installation media</h3>
<div class="paragraph">
<p>Use this procedure to extract the SUSE installation medium on your Foreman&#160;server to provision hosts in a disconnected environment.
This example prepares the installation medium for SUSE Linux Enterprise Server 15 SP3.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Download the <code>SLES 15 SP3</code> installation medium from <a href="https://www.suse.com/download/sles/">suse.com/download/sles</a>.</p>
</li>
<li>
<p>Download the signature and checksum from <a href="https://www.suse.com/support/security/download-verification/">suse.com</a>.</p>
</li>
<li>
<p>Transfer the <code>.iso</code> image, the signature, and the checksum from your local machine to Foreman&#160;server using <code>scp</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># scp SLE-15-SP3-Full-x86_64-GM-Media1.iso root@foreman.example.com:/tmp/
# scp SLE-15-SP3-Full-x86_64-GM-Media1.iso.sha256 root@foreman.example.com:/tmp/
# scp sles_15_sp3.signature root@foreman.example.com:/tmp/</pre>
</div>
</div>
</li>
<li>
<p>On your Foreman&#160;server, verify the integrity and authenticity of the <code>.iso</code> image using GPG public keys:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># cd /tmp
# gpg --verify sles_15_sp3.signature SLE-15-SP3-Full-x86_64-GM-Media1.iso.sha256
# echo '2a6259fc849fef6ce6701b8505f64f89de0d2882857def1c9e4379d26e74fa56 SLE-15-SP3-Full-x86_64-GM-Media1.iso' | sha256sum --check</pre>
</div>
</div>
</li>
<li>
<p>Mount the <code>.iso</code> image:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mount SLE-15-SP3-Full-x86_64-GM-Media1.iso /mnt</pre>
</div>
</div>
</li>
<li>
<p>Copy the content of the mounted installation medium to the <code>pub</code> directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir -p /var/www/html/pub/installation_media/sles/15sp3
# cp -a /mnt/* /var/www/html/pub/installation_media/sles/15sp3/</pre>
</div>
</div>
</li>
<li>
<p>Unmount and delete the <code>.iso</code> image:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># cd
# umount /mnt
# rm -f /tmp/SLE-15-SP3-Full-x86_64-GM-Media1.iso
# rm -f /tmp/SLE-15-SP3-Full-x86_64-GM-Media1.iso.sha256
# rm -f /tmp/sles_15_sp3.signature</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can use the path to the local installation media files when creating an installation medium, for example <code>http://foreman.example.com/pub/installation_media/sles/15sp3/</code>.
For more information, see <a href="https://docs.theforeman.org/3.9/Provisioning_Hosts/index-katello.html#adding-installation-media_provisioning">Adding Installation Media to Foreman</a> in <em>Provisioning hosts</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Creating_a_SUSE_Operating_System_content-management"><a class="anchor" href="#Creating_a_SUSE_Operating_System_content-management"></a>11.2. Creating a SUSE operating system</h3>
<div class="paragraph">
<p>Use this procedure to create an installation medium and operating system entry for SLES 15 SP3.
For more information, see:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.theforeman.org/3.9/Provisioning_Hosts/index-katello.html#adding-installation-media_provisioning">Adding Installation Media to Foreman</a> in <em>Provisioning hosts</em></p>
</li>
<li>
<p><a href="https://docs.theforeman.org/3.9/Provisioning_Hosts/index-katello.html#creating-operating-systems_provisioning">Creating Operating Systems</a> in <em>Provisioning hosts</em></p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>An extracted <code>.iso</code> image on Foreman or an HTTP server that can be reached from hosts during their provisioning process.
For more information, see <a href="#Preparing_SUSE_Installation_Media_content-management">Preparing SUSE installation media</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Hosts</strong> &gt; <strong>Provisioning Setup</strong> &gt; <strong>Installation Media</strong>.</p>
</li>
<li>
<p>Click <strong>Create Medium</strong>.</p>
</li>
<li>
<p>Set a <strong>Name</strong> for the installation medium for SLES 15 SP3.
Add <code>local</code> to the name because the path of the extracted <code>.iso</code> image points to your Foreman.</p>
</li>
<li>
<p>Set the <strong>Path</strong> of the extracted <code>.iso</code> image.
The content of <code>/var/www/html/pub/</code> is publicly available on <code>http://foreman.example.com/pub/</code>.
If you extract the <code>.iso</code> image to <code>/var/www/html/pub/installation_media/sles/15sp3/</code>, the path is <code>http://foreman.example.com/pub/installation_media/sles/15sp3/</code>.</p>
</li>
<li>
<p>Set the <strong>Operating System Family</strong> to <code>SUSE</code> for all SLES systems.</p>
</li>
<li>
<p>Set a location and organization context for the installation media.</p>
</li>
<li>
<p>On the <strong>Parameters</strong> tab, add the <code>sle-module-basesystem-url</code> parameter, select the <strong>string</strong> type, and enter the value <code>http://foreman.example.com/pub/installation_media/sles/15sp3/</code>.
Note that the value depends on the path of the extracted <code>.iso</code> image.</p>
<div class="paragraph">
<p>(SLES 12 only) Add the parameter <code>additional_media</code>, select the <strong>string</strong> type, and enter the value <code>""</code>.</p>
</div>
</li>
<li>
<p>Click <strong>Submit</strong> to save the installation media entry for SLES 15 SP3.</p>
</li>
<li>
<p>In the Foreman web UI, navigate to <strong>Hosts</strong> &gt; <strong>Provisioning Setup</strong> &gt; <strong>Operating Systems</strong>.</p>
</li>
<li>
<p>Click <strong>Create Operating System</strong>.</p>
</li>
<li>
<p>Set the <strong>Name</strong> of the operating system.
Choose a name as reported by Ansible, Puppet, or Salt as fact.</p>
</li>
<li>
<p>Set the <strong>Major Version</strong> of SLES, for example <code>15</code>.</p>
</li>
<li>
<p>Set the <strong>Minor Version</strong> of SLES, for example <code>3</code> for SLES 15 SP3.</p>
</li>
<li>
<p>Optional: Add an arbitrary <strong>Description</strong>.</p>
</li>
<li>
<p>Set the <strong>Family</strong> to <code>SUSE</code> for all SLES systems.</p>
</li>
<li>
<p>Set the <strong>Root Password Hash</strong> to <code>SHA256</code> for SLES 15 SP3.</p>
</li>
<li>
<p>Assign the <strong>Architectures</strong> to SLES 15 SP3.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to save the operating system entry.</p>
</li>
<li>
<p>In the Foreman web UI, navigate to <strong>Hosts</strong> &gt; <strong>Templates</strong> &gt; <strong>Partition Tables</strong> and click <strong>Create Partition Table</strong>.
The partition tables are stored in the <code>/usr/share/foreman/app/views/unattended/partition_tables_templates/</code> directory on your Foreman&#160;server.</p>
<div class="paragraph">
<p>For more information, see <a href="https://docs.theforeman.org/3.9/Provisioning_Hosts/index-katello.html#creating-partition-tables_provisioning">Partition Tables</a> in <em>Provisioning hosts</em>.</p>
</div>
</li>
<li>
<p>In the Foreman web UI, navigate to <strong>Hosts</strong> &gt; <strong>Templates</strong> &gt; <strong>Provisioning Templates</strong> and click <strong>Create Template</strong>.
The provisioning templates are stored in the <code>/usr/share/foreman/app/views/unattended/provisioning_templates/</code> directory on your Foreman&#160;server.</p>
<div class="paragraph">
<p>For more information, see <a href="https://docs.theforeman.org/3.9/Provisioning_Hosts/index-katello.html#provisioning-templates_provisioning">Provisioning Templates</a> in <em>Provisioning hosts</em>.</p>
</div>
</li>
<li>
<p>In the Foreman web UI, navigate to <strong>Hosts</strong> &gt; <strong>Provisioning Setup</strong> &gt; <strong>Operating Systems</strong>.</p>
</li>
<li>
<p>Select the previously created operating system.</p>
</li>
<li>
<p>On the <strong>Partition Table</strong> tab, select the previously created partition table.</p>
</li>
<li>
<p>On the <strong>Templates</strong> tab, select the previously created provisioning template.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to save the operating system entry.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Installing_the_SCC_Manager_plugin_content-management"><a class="anchor" href="#Installing_the_SCC_Manager_plugin_content-management"></a>11.3. Installing the SCC Manager plugin</h3>
<div class="paragraph">
<p>Use this procedure to install the SCC Manager plugin on your Foreman.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Install the SCC Manager plugin on your Foreman&#160;server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --enable-foreman-plugin-scc-manager</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Adding_an_SCC_Account_to_Server_content-management"><a class="anchor" href="#Adding_an_SCC_Account_to_Server_content-management"></a>11.4. Adding an SCC account to Foreman</h3>
<div class="paragraph">
<p>Use the following procedure to add your SCC account to Foreman.
To use the CLI instead of the Foreman web UI, see the <a href="#cli-Adding_an_SCC_Account_to_Server_content-management">CLI procedure</a>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have installed the SCC Manager plugin on your Foreman.
For more information, see <a href="#Installing_the_SCC_Manager_plugin_content-management">Installing the SCC Manager plugin</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Optional: In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Content Credentials</strong> and click <strong>Create Content Credential</strong>.</p>
<div class="paragraph">
<p>Add the GPG public key for SLES 15 SP3 from <a href="https://www.suse.com/support/security/keys/">suse.com</a>.</p>
</div>
</li>
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>SUSE Subscriptions</strong>.</p>
</li>
<li>
<p>Click <strong>Add SCC Account</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for your SCC account in Foreman.</p>
</li>
<li>
<p>In the <strong>Login</strong> and <strong>Password</strong> fields, enter your SUSE credentials.</p>
</li>
<li>
<p>In the <strong>Base URL</strong> field, you can enter the base URL for the Suse Customer Center.
By default, it is set to <code>https://scc.suse.com</code>.</p>
</li>
<li>
<p>Optional: Set a <strong>Sync interval</strong> to periodically update the SCC authentication tokens.
Note that this does not refer to synchronizing content to Foreman.</p>
</li>
<li>
<p>Optional: In the <strong>Use GPG key for SUSE products</strong> field, you can select the previously created content credential to automatically add a GPG public key to your SUSE products.
<code>zypper</code> automatically verifies the signatures of each software package to ensure their authenticity.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>You can also set the GPG public key for repositories from SUSE at a later stage.
However, changing it does not affect already synchronized products.
If you already have synchronized products in Foreman, navigate to <strong>Content &gt; Products</strong> and replace the GPG key in each respective product.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Optional: From the <strong>Download Policy</strong> list, select a download policy for your SUSE products.
For more information, see <a href="#Download_Policies_Overview_content-management">Download policies overview</a>.</p>
</li>
<li>
<p>Optional: From the <strong>Mirroring Policy</strong> list, select a mirroring policy for your SUSE products.
For more information, see <a href="#Mirroring_Policies_Overview_content-management">Mirroring policies overview</a>.</p>
</li>
<li>
<p>Click <strong>Test connection</strong> to verify your account information.
Note that you have to re-enter your password if you have already saved your SCC account to Foreman.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to save your SCC account to Foreman.</p>
</li>
<li>
<p>In the Foreman web UI, navigate to <strong>Content &gt; SUSE Subscriptions</strong>, select your SCC account, and click <strong>Sync</strong> to fetch a list of products associated to your SCC account.</p>
</li>
</ol>
</div>
<div id="cli-Adding_an_SCC_Account_to_Server_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Optional: Import the public GPG key from SUSE into Foreman.</p>
<div class="paragraph">
<p>For more information, see <a href="https://docs.theforeman.org/3.9/Managing_Content/index-katello.html#cli-importing-a-gpg-key">Importing a GPG Key</a> in <em>Managing content</em>.</p>
</div>
</li>
<li>
<p>Add your SCC account to Foreman:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer scc_manager scc_accounts create \
--base-url "https://scc.suse.com/" \
--interval <em>My_Interval</em> \
--katello-gpg-key-id <em>My_GPG_Key_ID</em> \
--location-id <em>My_Location_ID</em> \
--login "<em>My_SCC_Account_Name</em>" \
--name "<em>My_Account_Name</em>" \
--organization-id <em>My_Organization_ID</em> \
--password "<em>My_SCC_Account_Password" \
--sync-date _My_Sync_Date</em></pre>
</div>
</div>
</li>
<li>
<p>Test your SCC account credentials:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer scc_manager scc_accounts test_connection \
--id <em>My_SCC_Account_ID</em></pre>
</div>
</div>
<div class="paragraph">
<p>Ensure the command returns <code>Testing connection for SCC account succeeded</code>.</p>
</div>
</li>
<li>
<p>Synchronize the list of available SUSE products to Foreman:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer scc_manager scc_accounts sync \
--id <em>My_SCC_Account_ID</em></pre>
</div>
</div>
</li>
<li>
<p>Check the status of the task:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer task info \
--id <em>My_Task_ID</em></pre>
</div>
</div>
<div class="paragraph">
<p>The synchronization is complete once the command returns <code>State: stopped</code> and <code>Result: success</code>.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Switching_SCC_Accounts_content-management"><a class="anchor" href="#Switching_SCC_Accounts_content-management"></a>11.5. Switching SCC accounts</h3>
<div class="paragraph">
<p>You can switch your SCC account by changing the SCC credentials saved on Foreman.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>The SCC Manager plugin does not support multiple SCC accounts.</p>
</div>
<div class="paragraph">
<p>If you want to switch your SCC account and retain the synchronized content, do not immediately delete your old SCC account, even if it is expired.
If you delete your old SCC account, you cannot reuse existing repositories, products, content views, and composite content views.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have added your SCC account to Foreman.
For more information, see <a href="#Adding_an_SCC_Account_to_Server_content-management">Adding an SCC account to Foreman</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content &gt; SUSE Subscriptions</strong>.</p>
</li>
<li>
<p>Select your SCC account.</p>
</li>
<li>
<p>Enter a new <strong>Login</strong> and <strong>Password</strong>.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to change your SCC account.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Your new SCC account reuses existing products and repositories from SUSE.
Content that is no longer available for your new SCC account cannot be synchronized anymore.</p>
</div>
</div>
<div class="sect2">
<h3 id="Updating_an_SCC_Account_content-management"><a class="anchor" href="#Updating_an_SCC_Account_content-management"></a>11.6. Updating an SCC account</h3>
<div class="paragraph">
<p>Use the following procedure to update your SCC account in Foreman.
To use the CLI instead of the Foreman web UI, see the <a href="#cli-Updating_an_SCC_Account_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>SUSE Subscriptions</strong>.</p>
</li>
<li>
<p>Select your SCC account and update it as required.</p>
<div class="paragraph">
<p>For more information, see <a href="#Adding_an_SCC_Account_to_Server_content-management">Adding an SCC account to Foreman</a>.</p>
</div>
</li>
<li>
<p>Click <strong>Submit</strong> to update your SCC account.</p>
</li>
</ol>
</div>
<div id="cli-Updating_an_SCC_Account_content-management" class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Update your SCC account in Foreman:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer scc_manager scc_accounts update \
--id <em>My_SCC_Account_ID</em> \
--password "<em>My_SCC_Account_Password" \
_My_Options</em></pre>
</div>
</div>
<div class="paragraph">
<p>For a list of options, run <code>hammer scc_manager scc_accounts update --help</code>.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Importing_SUSE_Products_content-management"><a class="anchor" href="#Importing_SUSE_Products_content-management"></a>11.7. Importing SUSE products</h3>
<div class="paragraph">
<p>Use this procedure to import products from SUSE into Foreman.
To use the CLI instead of the Foreman web UI, see the <a href="#cli-Importing_SUSE_Products_content-management">CLI procedure</a>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have added your SCC account to Foreman.
For more information, see <a href="#Adding_an_SCC_Account_to_Server_content-management">Adding an SCC account to Foreman</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content &gt; SUSE Subscriptions</strong>.</p>
</li>
<li>
<p>Click <strong>Select products</strong> on your previously synchronized SCC account.</p>
</li>
<li>
<p>Use the <strong>Select Product</strong>, <strong>Select Version</strong>, and <strong>Select Architecture</strong> lists to filter all available SUSE products.</p>
<div class="paragraph">
<p>Note that each filter depends on the previous selection.</p>
</div>
</li>
<li>
<p>Click <strong>Search</strong> to apply the filter.</p>
</li>
<li>
<p>Select all SUSE products you want to synchronize to Foreman.</p>
<div class="paragraph">
<p>You can select individual repositories from the <strong>Filter repositories</strong> list.
By default, <em>debug</em> and <em>source</em> repositories are excluded.</p>
</div>
</li>
<li>
<p>Click <strong>Add product(s)</strong> to create the selected SUSE products in Foreman.</p>
<div class="paragraph">
<p>Note that the SCC Manager plugin can only add, but not remove products from Foreman.</p>
</div>
</li>
<li>
<p>Optional: Click on the task ID to follow the creation of the selected products in Foreman.</p>
</li>
</ol>
</div>
<div id="cli-Importing_SUSE_Products_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all available SUSE products:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer scc_manager scc_accounts scc_products list \
--scc-account-id <em>My_SCC_Account_ID</em></pre>
</div>
</div>
</li>
<li>
<p>View information about a SUSE product:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer scc_manager scc_accounts scc_products info \
--id <em>My_SUSE_Product_ID</em> \
--scc-account-id <em>My_SCC_Account_ID</em></pre>
</div>
</div>
</li>
<li>
<p>Subscribe to a SUSE product:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer scc_manager scc_accounts scc_products subscribe \
--id <em>My_SUSE_Product_ID</em> \
--scc-account-id <em>My_SCC_Account_ID</em></pre>
</div>
</div>
</li>
<li>
<p>Optional: Subscribe to multiple SUSE products:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer scc_manager scc_accounts bulk_subscribe \
--id <em>My_SUSE_Account_ID</em> \
--scc-subscribe-product-ids <em>My_SUSE_Product_ID_1</em>,<em>My_SUSE_Product_ID_2</em>,<em>My_SUSE_Product_ID_3</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Synchronizing_SUSE_Content_content-management"><a class="anchor" href="#Synchronizing_SUSE_Content_content-management"></a>11.8. Synchronizing SUSE content</h3>
<div class="paragraph">
<p>Use this procedure to synchronize SUSE content to your Foreman to deploy, register, and serve content to hosts.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have imported SUSE products into Foreman.
For more information, see <a href="#Importing_SUSE_Products_content-management">Importing SUSE products</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content &gt; Products</strong>.</p>
</li>
<li>
<p>Select the <code>SUSE Linux Enterprise Server 15 SP3 x86_64</code> product and click <strong>Sync Now</strong> to synchronize the SUSE repositories for SLES 15 SP3 to Foreman.</p>
</li>
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle</strong> &gt; <strong>Content Views</strong>.</p>
</li>
<li>
<p>Create a content view called <code>SLES 15 SP3</code> comprising the SLES repositories created in the <code>SLES 15 SP3</code> product and a content view called <code>SLES 15 SP3 Foreman client</code> comprising the Foreman client repository created in the <code>SLES 15 SP3 Foreman client</code> product.</p>
<div class="paragraph">
<p>For more information, see <a href="#Creating_a_Content_View_content-management">Creating a content view</a>.</p>
</div>
</li>
<li>
<p>Publish a new version of both content views.</p>
<div class="paragraph">
<p>For more information, see <a href="#Promoting_a_Content_View_content-management">Promoting a content view</a>.</p>
</div>
</li>
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle</strong> &gt; <strong>Content Views</strong>.</p>
</li>
<li>
<p>Click <strong>Create Content View</strong> to create a composite content view called <code>Composite SLES 15 SP3</code> comprising the previously published <code>SLES 15 SP3</code> content view, the <code>SLES 15 SP3 Foreman client</code> content view, and optionally further content views of your choice, for example a content view containing Puppet.
For more information, see <a href="#Creating_a_Composite_Content_View_content-management">Creating a composite content view</a>.</p>
</li>
<li>
<p>Publish a new version and promote this version to the lifecycle environment of your choice.</p>
</li>
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle</strong> &gt; <strong>Activation Keys</strong>.</p>
</li>
<li>
<p>Click <strong>Create Activation Key</strong> to create an Activation Key called <code>sles-15-sp3</code>.</p>
<div class="paragraph">
<p>For more information, see <a href="#Creating_an_Activation_Key_content-management">Creating an activation key</a>.</p>
</div>
</li>
<li>
<p>On the <strong>Details</strong> tab, select a lifecycle environment and composite content view.</p>
</li>
<li>
<p>On the <strong>Subscriptions</strong> tab, select the necessary subscriptions, for example <code>SLES 15 SP3</code>, <code>SLES 15 SP3 Foreman client</code>, and <code>Puppet</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Removing_an_SCC_Account_from_foreman_content-management"><a class="anchor" href="#Removing_an_SCC_Account_from_foreman_content-management"></a>11.9. Removing an SCC account from Foreman</h3>
<div class="paragraph">
<p>Use the following procedure to remove your SCC account from Foreman.
To use the CLI instead of the Foreman web UI, see the <a href="#cli-Removing_an_SCC_Account_from_foreman_content-management">CLI procedure</a>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you want to switch SCC accounts and retain your synchronized content, do not delete your old SCC account, even if it is expired.
Instead, change the login and password of your SCC account.
If you delete your old SCC account, you cannot reuse existing repositories, products, content views, and composite content views.
For more information, see <a href="#Switching_SCC_Accounts_content-management">Switching SCC accounts</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>SUSE Subscriptions</strong>.</p>
</li>
<li>
<p>For your SCC account, click <strong>Delete</strong> in the <strong>Actions</strong> menu.</p>
</li>
<li>
<p>Click <strong>Confirm</strong> to remove your SCC account from Foreman.</p>
</li>
</ol>
</div>
<div id="cli-Removing_an_SCC_Account_from_foreman_content-management" class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>Remove your SCC account from Foreman:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer scc_manager scc_accounts delete \
--id <em>My_SCC_Account_ID</em></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Managing_Errata_content-management"><a class="anchor" href="#Managing_Errata_content-management"></a>12. Managing errata</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Red&#160;Hat Enterprise Linux users receive errata for each release of official Red Hat RPMs.
SUSE Linux Enterprise Server users receive errata for each release of official SUSE RPMs.
There are three types of advisories (in order of importance):</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Security Advisory</dt>
<dd>
<p>Describes fixed security issues found in the package.
The security impact of the issue can be Low, Moderate, Important, or Critical.</p>
</dd>
<dt class="hdlist1">Bug Fix Advisory</dt>
<dd>
<p>Describes bug fixes for the package.</p>
</dd>
<dt class="hdlist1">Product Enhancement Advisory</dt>
<dd>
<p>Describes enhancements and new features added to the package.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For Red&#160;Hat Enterprise Linux, Foreman imports errata information when synchronizing repositories with Red Hat&#8217;s Content Delivery Network (CDN).
For SUSE Linux Enterprise Server, Foreman imports errata information when synchronizing repositories with SUSE Customer Center.
For AlmaLinux and Rocky Linux, Foreman imports errata information when synchronizing repositories with upstream repositories.
Foreman also provides tools to inspect and filter errata, allowing for precise update management.
This way, you can select relevant updates and propagate them through content views to selected content hosts.</p>
</div>
<div class="paragraph">
<p>Errata are labeled according to the most important advisory type they contain.
Therefore, errata labeled as <strong>Product Enhancement Advisory</strong> can contain only enhancement updates, while <strong>Bug Fix Advisory</strong> errata can contain both bug fixes and enhancements, and <strong>Security Advisory</strong> can contain all three types.</p>
</div>
<div class="paragraph">
<p>In Foreman, there are two keywords that describe an erratum&#8217;s relationship to the available content hosts:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Applicable</dt>
<dd>
<p>An erratum that applies to one or more content hosts, which means it updates packages present on the content host.
Although these errata apply to content hosts, until their state changes to <strong>Installable</strong>, the errata are not ready to be installed.
Installable errata are automatically applicable.</p>
</dd>
<dt class="hdlist1">Installable</dt>
<dd>
<p>An erratum that applies to one or more content hosts and is available to install on the content host.
Installable errata are available to a content host from lifecycle environment and the associated content view, but are not yet installed.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This chapter shows how to manage errata and apply them to either a single host or multiple hosts.</p>
</div>
<div class="sect2">
<h3 id="best-practices-for-errata_content-management"><a class="anchor" href="#best-practices-for-errata_content-management"></a>12.1. Best practices for errata</h3>
<div class="ulist">
<ul>
<li>
<p>Use errata to add patches for security issues to a frozen set of content without unnecessarily updating other unaffected packages.</p>
</li>
<li>
<p>Automate errata management by using a Hammer script or an <a href="https://theforeman.github.io/foreman-ansible-modules/develop/index.html">Ansible playbook</a>.</p>
</li>
<li>
<p>View errata on the content hosts page and compare the errata of the current content view and lifecycle environment to the Library lifecycle environment, which contains the latest synchronized packages.</p>
<div class="paragraph">
<p>You can only apply errata included in the content view version of the lifecycle of your host.
You can view applicable errata as a recommendation to create an incremental content view to provide errata to hosts.
For more information, see <a href="#Adding_Errata_To_An_Incremental_Content_View_content-management">Adding errata to an incremental content view</a>.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Inspecting_Available_Errata_content-management"><a class="anchor" href="#Inspecting_Available_Errata_content-management"></a>12.2. Inspecting available errata</h3>
<div class="paragraph">
<p>The following procedure describes how to view and filter the available errata and how to display metadata of the selected advisory.
To use the CLI instead of the Foreman web UI, see the <a href="#cli-inspecting-available-errata">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Content Types</strong> &gt; <strong>Errata</strong> to view the list of available errata.</p>
</li>
<li>
<p>Use the filtering tools at the top of the page to limit the number of displayed errata:</p>
<div class="ulist">
<ul>
<li>
<p>Select the repository to be inspected from the list.
<strong>All Repositories</strong> is selected by default.</p>
</li>
<li>
<p>The <strong>Applicable</strong> checkbox is selected by default to view only applicable errata in the selected repository.
Select the <strong>Installable</strong> checkbox to view only errata marked as installable.</p>
</li>
<li>
<p>To search the table of errata, type the query in the <strong>Search</strong> field in the form of:</p>
<div class="listingblock">
<div class="content">
<pre><em>parameter operator value</em></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="#Parameters_Available_for_Errata_Search_content-management">Parameters available for errata search</a> for the list of parameters available for search.
Find the list of applicable operators in <a href="https://docs.theforeman.org/3.9/Administering_Project/index-katello.html#Supported_Operators_for_Granular_Search_admin">Supported Operators for Granular Search</a> in <em>Administering Foreman</em>.
Automatic suggestion works as you type.
You can also combine queries with the use of <strong>and</strong> and <strong>or</strong> operators.
For example, to display only security advisories related to the <strong>kernel</strong> package, type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>type = security and package_name = kernel</pre>
</div>
</div>
<div class="paragraph">
<p>Press <strong>Enter</strong> to start the search.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Click the <strong>Errata ID</strong> of the erratum you want to inspect:</p>
<div class="ulist">
<ul>
<li>
<p>The <strong>Details</strong> tab contains the description of the updated package as well as documentation of important fixes and enhancements provided by the update.</p>
</li>
<li>
<p>On the <strong>Content Hosts</strong> tab, you can apply the erratum to selected content hosts as described in <a href="#Applying_Errata_to_Multiple_Hosts_content-management">Applying errata to multiple hosts</a>.</p>
</li>
<li>
<p>The <strong>Repositories</strong> tab lists repositories that already contain the erratum.
You can filter repositories by the environment and content view, and search for them by the repository name.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can also use the new Host page to view to inspect available errata and select errata to install.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Hosts &gt; All Hosts</strong> and select the host you require.</p>
</li>
<li>
<p>If there are errata associated with the host, an Installable Errata card on the new Host page displays an interactive pie chart showing a breakdown of the security advisories, bugfixes, and enhancements.</p>
</li>
<li>
<p>On the new Host page, select the <strong>Content</strong> tab.</p>
</li>
<li>
<p>On the Content page select the <strong>Errata</strong> tab.</p>
</li>
<li>
<p>The page displays installable errata for the chosen host.</p>
</li>
<li>
<p>Click the checkbox for any errata you wish to install.</p>
</li>
<li>
<p>Select <strong>Apply via Remote Execution</strong> to use Remote Execution, or <strong>Apply via customized remote execution</strong> if you want to customize the remote execution.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
<div id="cli-inspecting-available-errata" class="ulist">
<div class="title">CLI procedure</div>
<ul>
<li>
<p>To view errata that are available for all organizations, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer erratum list</pre>
</div>
</div>
</li>
<li>
<p>To view details of a specific erratum, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer erratum info --id <em>erratum_ID</em></pre>
</div>
</div>
</li>
<li>
<p>You can search errata by entering the query with the <code>--search</code> option.
For example, to view applicable errata for the selected product that contains the specified bugs ordered so that the security errata are displayed on top, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer erratum list \
--product-id 7 \
--search "bug = 1213000 or bug = 1207972" \
--errata-restrict-applicable 1 \
--order "type desc"</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Parameters_Available_for_Errata_Search_content-management"><a class="anchor" href="#Parameters_Available_for_Errata_Search_content-management"></a>12.3. Parameters available for errata search</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">bug</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search by the Bugzilla number.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>bug = 1172165</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cve</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search by the CVE number.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cve = CVE-2015-0235</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search by the errata ID.
The auto-suggest system displays a list of available IDs as you type.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>id = RHBA-2014:2004</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">issued</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search by the issue date.
You can specify the exact date, like "Feb16,2015", or use keywords, for example "Yesterday", or "1 hour ago".
The time range can be specified with the use of the "&lt;" and "&gt;" operators.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>issued &lt; "Jan 12,2015"</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">package</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search by the full package build name.
The auto-suggest system displays a list of available packages as you type.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>package = glib2-2.22.5-6.el6.i686</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">package_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search by the package name.
The auto-suggest system displays a list of available packages as you type.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>package_name = glib2</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">severity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search by the severity of the issue fixed by the security update.
Specify <em>Critical</em>, <em>Important</em>, or <em>Moderate</em>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>severity = Critical</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">title</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search by the advisory title.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>title ~ openssl</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search by the advisory type.
Specify <em>security</em>, <em>bugfix</em>, or <em>enhancement</em>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>type = bugfix</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">updated</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search by the date of the last update.
You can use the same formats as with the <code>issued</code> parameter.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>updated = "6 days ago"</em></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="Applying_installable_errata_content-management"><a class="anchor" href="#Applying_installable_errata_content-management"></a>12.4. Applying installable errata</h3>
<div class="paragraph">
<p>Use the following procedure to view a list of installable errata and select errata to install.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Hosts &gt; All Hosts</strong> and select the host you require.</p>
</li>
<li>
<p>If there are errata associated with the host, they are displayed in an Installable Errata card on the new Host page.</p>
</li>
<li>
<p>On the <strong>Content</strong> tab, <strong>Errata</strong> displays installable errata for the chosen host.</p>
</li>
<li>
<p>Click the checkbox for any errata you wish to install.</p>
</li>
<li>
<p>Using the vertical ellipsis icon next to the errata you want to add to the host, select <strong>Apply via Remote Execution</strong> to use Remote Execution.
Select <strong>Apply via customized remote execution</strong> if you want to customize the remote execution.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Subscribing_to_Errata_Notifications_content-management"><a class="anchor" href="#Subscribing_to_Errata_Notifications_content-management"></a>12.5. Subscribing to errata notifications</h3>
<div class="paragraph">
<p>You can configure email notifications for Foreman users.
Users receive a summary of applicable and installable errata, notifications on content view promotion or after synchronizing a repository.
For more information, see <a href="https://docs.theforeman.org/3.9/Administering_Project/index-katello.html#Configuring_Email_Notification_Preferences_admin">Configuring Email Notification Preferences</a> in <em>Administering Foreman</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Limitations_to_Repository_Dependency_Resolution_content-management"><a class="anchor" href="#Limitations_to_Repository_Dependency_Resolution_content-management"></a>12.6. Limitations to repository dependency resolution</h3>
<div class="paragraph">
<p>With Foreman, using incremental updates to your content views solves some repository dependency problems.
However, dependency resolution at a repository level still remains problematic on occasion.</p>
</div>
<div class="paragraph">
<p>When a repository update becomes available with a new dependency, Foreman retrieves the newest version of the package to solve the dependency, even if there are older versions available in the existing repository package.
This can create further dependency resolution problems when installing packages.</p>
</div>
<div class="paragraph">
<div class="title">Example scenario</div>
<p>A repository on your client has the package <code>example_repository-1.0</code> with the dependency <code>example_repository-libs-1.0</code>.
The repository also has another package <code>example_tools-1.0</code>.</p>
</div>
<div class="paragraph">
<p>A security erratum becomes available with the package <code>example_tools-1.1</code>.
The <code>example_tools-1.1</code> package requires the <code>example_repository-libs-1.1</code> package as a dependency.</p>
</div>
<div class="paragraph">
<p>After an incremental content view update, the <code>example_tools-1.1</code>, <code>example_tools-1.0</code>, and <code>example_repository-libs-1.1</code> are now in the repository.
The repository also has the packages <code>example_repository-1.0</code> and <code>example_repository-libs-1.0</code>.
Note that the incremental update to the content view did not add the package <code>example_repository-1.1</code>.
Because you can install all these packages using <code>dnf</code>, no potential problem is detected.
However, when the client installs the <code>example_tools-1.1</code> package, a dependency resolution problem occurs because both <code>example_repository-libs-1.0</code> and <code>example_repository-libs-1.1</code> cannot be installed.</p>
</div>
<div class="paragraph">
<p>There is currently no workaround for this problem.
The larger the time frame, and minor <em>Y</em> releases between the base set of packages and the errata being applied, the higher the chance of a problem with dependency resolution.</p>
</div>
</div>
<div class="sect2">
<h3 id="Creating_a_Content_View_Filter_for_Errata_content-management"><a class="anchor" href="#Creating_a_Content_View_Filter_for_Errata_content-management"></a>12.7. Creating a content view filter for errata</h3>
<div class="paragraph">
<p>You can use content filters to limit errata.
Such filters include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>ID</strong> &#8211; Select specific erratum to allow into your resulting repositories.</p>
</li>
<li>
<p><strong>Date Range</strong> &#8211; Define a date range and include a set of errata released during that date range.</p>
</li>
<li>
<p><strong>Type</strong> &#8211; Select the type of errata to include such as bug fixes, enhancements, and security updates.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Create a content filter to exclude errata after a certain date.
This ensures your production systems in the application lifecycle are kept up to date to a certain point.
Then you can modify the filter&#8217;s start date to introduce new errata into your testing environment to test the compatibility of new packages into your application lifecycle.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Foreman web UI, see the <a href="#cli-creating-a-content-view-filter-for-errata">CLI procedure</a>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>A content view with the repositories that contain required errata is created.
For more information, see <a href="#Creating_a_Content_View_content-management">Creating a content view</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle</strong> &gt; <strong>Content Views</strong>.</p>
</li>
<li>
<p>Select a content view that you want to use for applying errata.</p>
</li>
<li>
<p>Select <strong>Yum Content</strong> &gt; <strong>Filters</strong> and click <strong>New Filter</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter <code>Errata Filter</code>.</p>
</li>
<li>
<p>From the <strong>Content Type</strong> list, select <strong>Erratum &#8211; Date and Type</strong>.</p>
</li>
<li>
<p>From the <strong>Inclusion Type</strong> list, select <strong>Exclude</strong>.</p>
</li>
<li>
<p>In the <strong>Description</strong> field, enter <code>Exclude errata items from YYYY-MM-DD</code>.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
<li>
<p>For <strong>Errata Type</strong>, select the checkboxes of errata types you want to exclude.
For example, select the <strong>Enhancement</strong> and <strong>Bugfix</strong> checkboxes and clear the <strong>Security</strong> checkbox to exclude enhancement and bugfix errata after certain date, but include all the security errata.</p>
</li>
<li>
<p>For <strong>Date Type</strong>, select one of two checkboxes:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Issued On</strong> for the issued date of the erratum.</p>
</li>
<li>
<p><strong>Updated On</strong> for the date of the erratum’s last update.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Select the <strong>Start Date</strong> to exclude all errata on or after the selected date.</p>
</li>
<li>
<p>Leave the <strong>End Date</strong> field blank.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
<li>
<p>Click <strong>Publish New Version</strong> to publish the resulting repository.</p>
</li>
<li>
<p>Enter <code>Adding errata filter</code> in the <strong>Description</strong> field.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
<div class="paragraph">
<p>When the content view completes publication, notice the <strong>Content</strong> column reports a reduced number of packages and errata from the initial repository.
This means the filter successfully excluded the all non-security errata from the last year.</p>
</div>
</li>
<li>
<p>Click the <strong>Versions</strong> tab.</p>
</li>
<li>
<p>Click <strong>Promote</strong> to the right of the published version.</p>
</li>
<li>
<p>Select the environments you want to promote the content view version to.</p>
</li>
<li>
<p>In the <strong>Description</strong> field, enter the description for promoting.</p>
</li>
<li>
<p>Click <strong>Promote Version</strong> to promote this content view version across the required environments.</p>
</li>
</ol>
</div>
<div id="cli-creating-a-content-view-filter-for-errata" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Create a filter for the errata:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view filter create \
--content-view "<em>My_Content_View</em>" \
--description "Exclude errata items from the <em>YYYY-MM-DD</em>" \
--name "<em>My_Filter_Name</em>" \
--organization "<em>My_Organization</em>" \
--type "erratum"</pre>
</div>
</div>
</li>
<li>
<p>Create a filter rule to exclude all errata on or after the <em>Start Date</em> that you want to set:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view filter rule create \
--content-view "<em>My_Content_View</em>" \
--content-view-filter="<em>My_Content_View_Filter</em>" \
--organization "<em>My_Organization</em>" \
--start-date "<em>YYYY-MM-DD</em>" \
--types=security,enhancement,bugfix</pre>
</div>
</div>
</li>
<li>
<p>Publish the content view:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view publish \
--name "<em>My_Content_View</em>" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Promote the content view to the lifecycle environment so that the included errata are available to that lifecycle environment:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view version promote \
--content-view "<em>My_Content_View</em>" \
--organization "<em>My_Organization</em>" \
--to-lifecycle-environment "<em>My_Lifecycle_Environment</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Adding_Errata_To_An_Incremental_Content_View_content-management"><a class="anchor" href="#Adding_Errata_To_An_Incremental_Content_View_content-management"></a>12.8. Adding errata to an incremental content view</h3>
<div class="paragraph">
<p>If errata are available but not installable, you can create an incremental content view version to add the errata to your content hosts.
For example, if the content view is version 1.0, it becomes content view version 1.1, and when you publish, it becomes content view version 2.0.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
If your content view version is old, you might encounter incompatibilities when incrementally adding enhancement errata.
This is because enhancements are typically designed for the most current software in a repository.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Foreman web UI, see the <a href="#cli-adding-errata-to-an-incremental-content-view">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Content Types</strong> &gt; <strong>Errata</strong>.</p>
</li>
<li>
<p>From the <strong>Errata</strong> list, click the name of the errata that you want to apply.</p>
</li>
<li>
<p>Select the content hosts that you want to apply the errata to, and click <strong>Apply to Hosts</strong>.
This creates the incremental update to the content view.</p>
</li>
<li>
<p>If you want to apply the errata to the content host, select the <strong>Apply Errata to Content Hosts immediately after publishing</strong> checkbox.</p>
</li>
<li>
<p>Click <strong>Confirm</strong> to apply the errata.</p>
</li>
</ol>
</div>
<div id="cli-adding-errata-to-an-incremental-content-view" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List the errata and its corresponding IDs:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer erratum list</pre>
</div>
</div>
</li>
<li>
<p>List the different content-view versions and the corresponding IDs:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view version list</pre>
</div>
</div>
</li>
<li>
<p>Apply a single erratum to content-view version.
You can add more IDs in a comma-separated list.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view version incremental-update \
--content-view-version-id 319 --errata-ids 34068b</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Applying_Errata_to_Hosts_content-management"><a class="anchor" href="#Applying_Errata_to_Hosts_content-management"></a>12.9. Applying errata to hosts</h3>
<div class="paragraph">
<p>Use these procedures to review and apply errata to hosts.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Register the host to an environment and content view on Foreman&#160;server.
For more information, see <a href="https://docs.theforeman.org/3.9/Managing_Hosts/index-katello.html#Registering_Hosts_managing-hosts">Registering Hosts</a> in <em>Managing hosts</em>.</p>
</li>
<li>
<p>Configure the host for remote execution.
For more information about running remote execution jobs, see <a href="https://docs.theforeman.org/3.9/Managing_Hosts/index-katello.html#Configuring_and_Setting_Up_Remote_Jobs_managing-hosts">Configuring and Setting Up Remote Jobs</a> in <em>Managing hosts</em>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The procedure to apply an erratum to a host depends on its operating system.</p>
</div>
<div class="sect3">
<h4 id="Applying_Errata_to_Hosts_Running_AlmaLinux_9_content-management"><a class="anchor" href="#Applying_Errata_to_Hosts_Running_AlmaLinux_9_content-management"></a>12.9.1. Applying errata to hosts running AlmaLinux 9</h4>
<div class="paragraph">
<p>Use this procedure to review and apply errata to a host running AlmaLinux 9.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Foreman web UI, see the <a href="#cli-Applying_Errata_to_Hosts_Running_AlmaLinux_9_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong> and select the host you want to apply errata to.</p>
</li>
<li>
<p>Navigate to the <strong>Errata</strong> tab to see the list of errata.</p>
</li>
<li>
<p>Select the errata to apply and click <strong>Apply Selected</strong>.
In the confirmation window, click <strong>Apply</strong>.</p>
</li>
<li>
<p>After the task to update all packages associated with the selected errata completes, click the <strong>Details</strong> tab to view the updated packages.</p>
</li>
</ol>
</div>
<div id="cli-Applying_Errata_to_Hosts_Running_AlmaLinux_9_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all errata for the host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host errata list \
--host <em>client.example.com</em></pre>
</div>
</div>
</li>
<li>
<p>Find the module stream an erratum belongs to:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer erratum info --id <em>ERRATUM_ID</em></pre>
</div>
</div>
</li>
<li>
<p>On the host, update the module stream:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf upgrade <em>Module_Stream_Name</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Applying_Errata_to_Hosts_Running_AlmaLinux_8_content-management"><a class="anchor" href="#Applying_Errata_to_Hosts_Running_AlmaLinux_8_content-management"></a>12.9.2. Applying errata to hosts running AlmaLinux 8</h4>
<div class="paragraph">
<p>Use this procedure to review and apply errata to a host running AlmaLinux 8.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Foreman web UI, see the <a href="#cli-Applying_Errata_to_Hosts_Running_AlmaLinux_8_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong> and select the host you want to apply errata to.</p>
</li>
<li>
<p>Navigate to the <strong>Errata</strong> tab to see the list of errata.</p>
</li>
<li>
<p>Select the errata to apply and click <strong>Apply Selected</strong>.
In the confirmation window, click <strong>Apply</strong>.</p>
</li>
<li>
<p>After the task to update all packages associated with the selected errata completes, click the <strong>Details</strong> tab to view the updated packages.</p>
</li>
</ol>
</div>
<div id="cli-Applying_Errata_to_Hosts_Running_AlmaLinux_8_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all errata for the host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host errata list \
--host <em>client.example.com</em></pre>
</div>
</div>
</li>
<li>
<p>Find the module stream an erratum belongs to:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer erratum info --id <em>ERRATUM_ID</em></pre>
</div>
</div>
</li>
<li>
<p>On the host, update the module stream:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf upgrade <em>Module_Stream_Name</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Applying_Errata_to_Hosts_Running_CentOS_7_content-management"><a class="anchor" href="#Applying_Errata_to_Hosts_Running_CentOS_7_content-management"></a>12.9.3. Applying errata to hosts running CentOS 7</h4>
<div class="paragraph">
<p>Use this procedure to review and apply errata to a host running CentOS 7.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Foreman web UI, see the <a href="#cli-Applying_Errata_to_Hosts_Running_CentOS_7_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong> and select the host you want to apply errata to.</p>
</li>
<li>
<p>Navigate to the <strong>Errata</strong> tab to see the list of errata.</p>
</li>
<li>
<p>Select the errata to apply and click <strong>Apply Selected</strong>.
In the confirmation window, click <strong>Apply</strong>.</p>
</li>
<li>
<p>After the task to update all packages associated with the selected errata completes, click the <strong>Details</strong> tab to view the updated packages.</p>
</li>
</ol>
</div>
<div id="cli-Applying_Errata_to_Hosts_Running_CentOS_7_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all errata for the host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host errata list \
--host <em>client.example.com</em></pre>
</div>
</div>
</li>
<li>
<p>Apply the most recent erratum to the host.
Identify the erratum to apply using the erratum ID:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer job-invocation create \
--feature katello_errata_install \
--inputs errata=<em>ERRATUM_ID1</em>,<em>ERRATUM_ID2</em> \
--search-query "name = client.example.com"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Applying_Errata_to_Hosts_Running_Oracle_Linux_9_content-management"><a class="anchor" href="#Applying_Errata_to_Hosts_Running_Oracle_Linux_9_content-management"></a>12.9.4. Applying errata to hosts running Oracle Linux 9</h4>
<div class="paragraph">
<p>Use this procedure to review and apply errata to a host running Oracle Linux 9.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Foreman web UI, see the <a href="#cli-Applying_Errata_to_Hosts_Running_Oracle_Linux_9_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong> and select the host you want to apply errata to.</p>
</li>
<li>
<p>Navigate to the <strong>Errata</strong> tab to see the list of errata.</p>
</li>
<li>
<p>Select the errata to apply and click <strong>Apply Selected</strong>.
In the confirmation window, click <strong>Apply</strong>.</p>
</li>
<li>
<p>After the task to update all packages associated with the selected errata completes, click the <strong>Details</strong> tab to view the updated packages.</p>
</li>
</ol>
</div>
<div id="cli-Applying_Errata_to_Hosts_Running_Oracle_Linux_9_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all errata for the host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host errata list \
--host <em>client.example.com</em></pre>
</div>
</div>
</li>
<li>
<p>Find the module stream an erratum belongs to:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer erratum info --id <em>ERRATUM_ID</em></pre>
</div>
</div>
</li>
<li>
<p>On the host, update the module stream:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf upgrade <em>Module_Stream_Name</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Applying_Errata_to_Hosts_Running_Oracle_Linux_8_content-management"><a class="anchor" href="#Applying_Errata_to_Hosts_Running_Oracle_Linux_8_content-management"></a>12.9.5. Applying errata to hosts running Oracle Linux 8</h4>
<div class="paragraph">
<p>Use this procedure to review and apply errata to a host running Oracle Linux 8.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Foreman web UI, see the <a href="#cli-Applying_Errata_to_Hosts_Running_Oracle_Linux_8_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong> and select the host you want to apply errata to.</p>
</li>
<li>
<p>Navigate to the <strong>Errata</strong> tab to see the list of errata.</p>
</li>
<li>
<p>Select the errata to apply and click <strong>Apply Selected</strong>.
In the confirmation window, click <strong>Apply</strong>.</p>
</li>
<li>
<p>After the task to update all packages associated with the selected errata completes, click the <strong>Details</strong> tab to view the updated packages.</p>
</li>
</ol>
</div>
<div id="cli-Applying_Errata_to_Hosts_Running_Oracle_Linux_8_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all errata for the host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host errata list \
--host <em>client.example.com</em></pre>
</div>
</div>
</li>
<li>
<p>Find the module stream an erratum belongs to:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer erratum info --id <em>ERRATUM_ID</em></pre>
</div>
</div>
</li>
<li>
<p>On the host, update the module stream:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf upgrade <em>Module_Stream_Name</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Applying_Errata_to_Hosts_Running_Red_Hat_Enterprise_Linux_9_content-management"><a class="anchor" href="#Applying_Errata_to_Hosts_Running_Red_Hat_Enterprise_Linux_9_content-management"></a>12.9.6. Applying errata to hosts running Red&#160;Hat Enterprise Linux 9</h4>
<div class="paragraph">
<p>Use this procedure to review and apply errata to a host running Red&#160;Hat Enterprise Linux 9.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Foreman web UI, see the <a href="#cli-Applying_Errata_to_Hosts_Running_Red_Hat_Enterprise_Linux_9_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong> and select the host you want to apply errata to.</p>
</li>
<li>
<p>Navigate to the <strong>Errata</strong> tab to see the list of errata.</p>
</li>
<li>
<p>Select the errata to apply and click <strong>Apply Selected</strong>.
In the confirmation window, click <strong>Apply</strong>.</p>
</li>
<li>
<p>After the task to update all packages associated with the selected errata completes, click the <strong>Details</strong> tab to view the updated packages.</p>
</li>
</ol>
</div>
<div id="cli-Applying_Errata_to_Hosts_Running_Red_Hat_Enterprise_Linux_9_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all errata for the host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host errata list \
--host <em>client.example.com</em></pre>
</div>
</div>
</li>
<li>
<p>Find the module stream an erratum belongs to:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer erratum info --id <em>ERRATUM_ID</em></pre>
</div>
</div>
</li>
<li>
<p>On the host, update the module stream:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf upgrade <em>Module_Stream_Name</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Applying_Errata_to_Hosts_Running_Red_Hat_Enterprise_Linux_8_content-management"><a class="anchor" href="#Applying_Errata_to_Hosts_Running_Red_Hat_Enterprise_Linux_8_content-management"></a>12.9.7. Applying errata to hosts running Red&#160;Hat Enterprise Linux 8</h4>
<div class="paragraph">
<p>Use this procedure to review and apply errata to a host running Red&#160;Hat Enterprise Linux 8.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Foreman web UI, see the <a href="#cli-Applying_Errata_to_Hosts_Running_Red_Hat_Enterprise_Linux_8_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong> and select the host you want to apply errata to.</p>
</li>
<li>
<p>Navigate to the <strong>Errata</strong> tab to see the list of errata.</p>
</li>
<li>
<p>Select the errata to apply and click <strong>Apply Selected</strong>.
In the confirmation window, click <strong>Apply</strong>.</p>
</li>
<li>
<p>After the task to update all packages associated with the selected errata completes, click the <strong>Details</strong> tab to view the updated packages.</p>
</li>
</ol>
</div>
<div id="cli-Applying_Errata_to_Hosts_Running_Red_Hat_Enterprise_Linux_8_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all errata for the host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host errata list \
--host <em>client.example.com</em></pre>
</div>
</div>
</li>
<li>
<p>Find the module stream an erratum belongs to:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer erratum info --id <em>ERRATUM_ID</em></pre>
</div>
</div>
</li>
<li>
<p>On the host, update the module stream:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf upgrade <em>Module_Stream_Name</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Applying_Errata_to_Hosts_Running_Red_Hat_Enterprise_Linux_7_content-management"><a class="anchor" href="#Applying_Errata_to_Hosts_Running_Red_Hat_Enterprise_Linux_7_content-management"></a>12.9.8. Applying errata to hosts running Red&#160;Hat Enterprise Linux 7</h4>
<div class="paragraph">
<p>Use this procedure to review and apply errata to a host running Red&#160;Hat Enterprise Linux 7.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Foreman web UI, see the <a href="#cli-Applying_Errata_to_Hosts_Running_Red_Hat_Enterprise_Linux_7_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong> and select the host you want to apply errata to.</p>
</li>
<li>
<p>Navigate to the <strong>Errata</strong> tab to see the list of errata.</p>
</li>
<li>
<p>Select the errata to apply and click <strong>Apply Selected</strong>.
In the confirmation window, click <strong>Apply</strong>.</p>
</li>
<li>
<p>After the task to update all packages associated with the selected errata completes, click the <strong>Details</strong> tab to view the updated packages.</p>
</li>
</ol>
</div>
<div id="cli-Applying_Errata_to_Hosts_Running_Red_Hat_Enterprise_Linux_7_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all errata for the host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host errata list \
--host <em>client.example.com</em></pre>
</div>
</div>
</li>
<li>
<p>Apply the most recent erratum to the host.
Identify the erratum to apply using the erratum ID.</p>
<div class="paragraph">
<p>Using <code>Remote Execution</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer job-invocation create \
--feature katello_errata_install \
--inputs errata=<em>ERRATUM_ID1</em>,<em>ERRATUM_ID2</em> \
--search-query "name = client.example.com"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Applying_Errata_to_Hosts_Running_Rocky_Linux_9_content-management"><a class="anchor" href="#Applying_Errata_to_Hosts_Running_Rocky_Linux_9_content-management"></a>12.9.9. Applying errata to hosts running Rocky Linux 9</h4>
<div class="paragraph">
<p>Use this procedure to review and apply errata to a host running Rocky Linux 9.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Foreman web UI, see the <a href="#cli-Applying_Errata_to_Hosts_Running_Rocky_Linux_9_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong> and select the host you want to apply errata to.</p>
</li>
<li>
<p>Navigate to the <strong>Errata</strong> tab to see the list of errata.</p>
</li>
<li>
<p>Select the errata to apply and click <strong>Apply Selected</strong>.
In the confirmation window, click <strong>Apply</strong>.</p>
</li>
<li>
<p>After the task to update all packages associated with the selected errata completes, click the <strong>Details</strong> tab to view the updated packages.</p>
</li>
</ol>
</div>
<div id="cli-Applying_Errata_to_Hosts_Running_Rocky_Linux_9_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all errata for the host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host errata list \
--host <em>client.example.com</em></pre>
</div>
</div>
</li>
<li>
<p>Find the module stream an erratum belongs to:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer erratum info --id <em>ERRATUM_ID</em></pre>
</div>
</div>
</li>
<li>
<p>On the host, update the module stream:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf upgrade <em>Module_Stream_Name</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Applying_Errata_to_Hosts_Running_Rocky_Linux_8_content-management"><a class="anchor" href="#Applying_Errata_to_Hosts_Running_Rocky_Linux_8_content-management"></a>12.9.10. Applying errata to hosts running Rocky Linux 8</h4>
<div class="paragraph">
<p>Use this procedure to review and apply errata to a host running Rocky Linux 8.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Foreman web UI, see the <a href="#cli-Applying_Errata_to_Hosts_Running_Rocky_Linux_8_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong> and select the host you want to apply errata to.</p>
</li>
<li>
<p>Navigate to the <strong>Errata</strong> tab to see the list of errata.</p>
</li>
<li>
<p>Select the errata to apply and click <strong>Apply Selected</strong>.
In the confirmation window, click <strong>Apply</strong>.</p>
</li>
<li>
<p>After the task to update all packages associated with the selected errata completes, click the <strong>Details</strong> tab to view the updated packages.</p>
</li>
</ol>
</div>
<div id="cli-Applying_Errata_to_Hosts_Running_Rocky_Linux_8_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all errata for the host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host errata list \
--host <em>client.example.com</em></pre>
</div>
</div>
</li>
<li>
<p>Find the module stream an erratum belongs to:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer erratum info --id <em>ERRATUM_ID</em></pre>
</div>
</div>
</li>
<li>
<p>On the host, update the module stream:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf upgrade <em>Module_Stream_Name</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="Applying_Errata_to_Hosts_Running_SUSE_Linux_Enterprise_Server_15_content-management"><a class="anchor" href="#Applying_Errata_to_Hosts_Running_SUSE_Linux_Enterprise_Server_15_content-management"></a>12.9.11. Applying errata to hosts running SUSE Linux Enterprise Server 15</h4>
<div class="paragraph">
<p>Use this procedure to review and apply errata to a host running SUSE Linux Enterprise Server 15.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Foreman web UI, see the <a href="#cli-Applying_Errata_to_Hosts_Running_SUSE_Linux_Enterprise_Server_15_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Hosts</strong> &gt; <strong>Content Hosts</strong> and select the host you want to apply errata to.</p>
</li>
<li>
<p>Navigate to the <strong>Errata</strong> tab to see the list of errata.</p>
</li>
<li>
<p>Select the errata to apply and click <strong>Apply Selected</strong>.
In the confirmation window, click <strong>Apply</strong>.</p>
</li>
<li>
<p>After the task to update all packages associated with the selected errata completes, click the <strong>Details</strong> tab to view the updated packages.</p>
</li>
</ol>
</div>
<div id="cli-Applying_Errata_to_Hosts_Running_SUSE_Linux_Enterprise_Server_15_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all errata for the host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer host errata list \
--host <em>client.example.com</em></pre>
</div>
</div>
</li>
<li>
<p>Apply the most recent erratum to the host.
Identify the erratum to apply using the erratum ID:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer job-invocation create \
--feature katello_errata_install \
--inputs errata=<em>ERRATUM_ID1</em>,<em>ERRATUM_ID2</em> \
--search-query "name = client.example.com"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Applying_Errata_to_Multiple_Hosts_content-management"><a class="anchor" href="#Applying_Errata_to_Multiple_Hosts_content-management"></a>12.10. Applying errata to multiple hosts</h3>
<div class="paragraph">
<p>Use these procedures to review and apply errata to multiple RHEL hosts.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Synchronize Foreman repositories with the latest errata available from Red&#160;Hat.
For more information, see <a href="#Synchronizing_Repositories_content-management">Synchronizing repositories</a>.</p>
</li>
<li>
<p>Register the hosts to an environment and content view on Foreman&#160;server.
For more information, see <a href="https://docs.theforeman.org/3.9/Managing_Hosts/index-katello.html#Registering_Hosts_managing-hosts">Registering Hosts</a> in <em>Managing hosts</em>.</p>
</li>
<li>
<p>Configure the host for remote execution.
For more information about running remote execution jobs, see <a href="https://docs.theforeman.org/3.9/Managing_Hosts/index-katello.html#Configuring_and_Setting_Up_Remote_Jobs_managing-hosts">Configuring and Setting Up Remote Jobs</a> in <em>Managing hosts</em>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Content Types</strong> &gt; <strong>Errata</strong>.</p>
</li>
<li>
<p>Click the name of an erratum you want to apply.</p>
</li>
<li>
<p>Click to <strong>Content Hosts</strong> tab.</p>
</li>
<li>
<p>Select the hosts you want to apply errata to and click <strong>Apply to Hosts</strong>.</p>
</li>
<li>
<p>Click <strong>Confirm</strong>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all installable errata:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer erratum list \
--errata-restrict-installable true \
--organization "<em>Default Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Apply one of the errata to multiple hosts:</p>
<div class="paragraph">
<p>Using <code>Remote Execution</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer job-invocation create \
--feature katello_errata_install \
--inputs errata=<em>ERRATUM_ID</em> \
--search-query "applicable_errata = <em>ERRATUM_ID</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>The following Bash script applies an erratum to each host for which this erratum is available:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-terminal" data-lang="terminal">for HOST in <code>hammer --csv --csv-separator "|" host list --search "applicable_errata = ERRATUM_ID" --organization "Default Organization" | tail -n+2 | awk -F "|" '{ print $2 }'</code> ;
do
  echo "== Applying to $HOST ==" ; hammer host errata apply --host $HOST --errata-ids ERRATUM_ID1,ERRATUM_ID2 ;
done</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command identifies all hosts with <em>erratum_IDs</em> as an applicable erratum and then applies the erratum to each host.</p>
</div>
</li>
<li>
<p>To see if an erratum is applied successfully, find the corresponding task in the output of the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer task list</pre>
</div>
</div>
</li>
<li>
<p>View the state of a selected task:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer task progress --id <em>task_ID</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Applying_Errata_to_a_Host_Collection_content-management"><a class="anchor" href="#Applying_Errata_to_a_Host_Collection_content-management"></a>12.11. Applying errata to a host collection</h3>
<div class="listingblock">
<div class="title">Using <code>Remote Execution</code></div>
<div class="content">
<pre class="nowrap"># hammer job-invocation create \
--feature katello_errata_install \
--inputs errata=<em>ERRATUM_ID1</em>,<em>ERRATUM_ID2</em>,... \
--search-query "host_collection = <em>HOST_COLLECTION_NAME</em>"</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="con_managing-ostree-content_content-management"><a class="anchor" href="#con_managing-ostree-content_content-management"></a>13. Managing OSTree content</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use OSTree to manage bootable, immutable, versioned file system trees.</p>
</div>
<div class="paragraph">
<p>OSTree makes it easy to install and update Linux-based operating systems on hosts and to switch between versions of operating systems on hosts.
If a host update fails, you can easily revert the operating system on the host to the previous working version.</p>
</div>
<div class="paragraph">
<p>You can create an OSTree image using an image builder and expose it in an OSTree repository on an HTTP server.
Then you can use your Foreman to synchronize and manage OSTree branches from the exposed OSTree repository.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>OSTree content is supported only when running Foreman on Enterprise Linux 8.</p>
</li>
<li>
<p>In Foreman&#160;server, OSTree management tools are not enabled by default.
To enable OSTree, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --foreman-proxy-content-enable-ostree=true</pre>
</div>
</div>
</li>
<li>
<p>If you want to use Hammer CLI, you must enable the <code>hammer-cli-katello</code> plugin on Foreman&#160;server.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="importing-ostree-content_content-management"><a class="anchor" href="#importing-ostree-content_content-management"></a>13.1. Importing OSTree content</h3>
<div class="paragraph">
<p>You can import and synchronize OSTree content from custom online sources over HTTPS.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>A published HTTP location, known as an <em>upstream URL</em>, for the OSTree to import.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong> and click <strong>Create Product</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for your OSTree content.
This automatically populates the <strong>Label</strong> field.</p>
</li>
<li>
<p>Optional: From the <strong>GPG Key</strong> list, select the GPG key for the product.</p>
</li>
<li>
<p>Optional: From the <strong>SSL CA Cert</strong> list, select the SSL CA certificate for the product.</p>
</li>
<li>
<p>Optional: From the <strong>SSL Client Cert</strong> list, select the SSL client certificate for the product.</p>
</li>
<li>
<p>Optional: From the <strong>SSL Client Key</strong> list, select the SSL client key for the product.</p>
</li>
<li>
<p>Optional: From the <strong>Sync Plan</strong> list, select an existing sync plan or click <strong>Create Sync Plan</strong> and create a sync plan for your product requirements.</p>
</li>
<li>
<p>Optional: In the <strong>Description</strong> field, enter a description of the product.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
<li>
<p>When the product creation completes, click <strong>New Repository</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for the repository.
This automatically populates the <strong>Label</strong> field.</p>
</li>
<li>
<p>From the <strong>Type</strong> list, select <code>ostree</code>.</p>
</li>
<li>
<p>In the <strong>Upstream URL</strong> field, enter the URL of the external repository to use as a source.
For example <code>http://www.example.com/rpm-ostree/</code>.</p>
</li>
<li>
<p>Optional: Select the <strong>Verify SSL</strong> checkbox if you want to verify that the upstream repository&#8217;s SSL certificates are signed by a trusted CA.</p>
</li>
<li>
<p>In the <strong>Upstream Username</strong> field, enter the user name for the upstream repository if required for authentication.
Clear this field if the repository does not require authentication.</p>
</li>
<li>
<p>In the <strong>Upstream Password</strong> field, enter the corresponding password for the upstream repository.</p>
</li>
<li>
<p>In the <strong>Upstream Authentication Token</strong> field, enter the corresponding token for the upstream repository.</p>
</li>
<li>
<p>From the <strong>Mirroring Policy</strong> menu, select one of the following policies to mirror OSTree content for this repository:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Additive</strong> &#8211; new content available during sync will be added to the repository, and no content will be removed.</p>
</li>
<li>
<p><strong>Mirror Content Only</strong> &#8211; any new content available during sync will be added to the repository and any content removed from the upstream repository will be removed from the local repository.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Optional: In the <strong>HTTP Proxy Policy</strong> field, select an HTTP proxy.</p>
</li>
<li>
<p>Optional: Disable the <strong>Unprotected</strong> checkbox to require a subscription entitlement certificate for accessing the published repository.</p>
</li>
<li>
<p>Optional: In the <strong>SSL CA Cert</strong> field, select the SSL CA Certificate for the repository.</p>
</li>
<li>
<p>Optional: In the <strong>SSL Client cert</strong> field, select the SSL Client Certificate for the repository.</p>
</li>
<li>
<p>Optional: In the <strong>SSL Client Key</strong> field, select the SSL Client Key for the repository.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
<li>
<p>When the repository creation completes, select the new repository and click <strong>Sync Now</strong> to start the synchronization process.</p>
</li>
<li>
<p>To view the synchronization status, navigate to <strong>Content</strong> &gt; <strong>Sync Status</strong> and expand the entry that you want to view.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Create a product for your OSTree content:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer product create \
--name "<em>OSTree</em>" \
--sync-plan "<em>Example_Plan</em>" \
--description "OSTree Content" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Create the repository for the OSTree:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository create \
--name "<em>OSTree</em>" \
--content-type "ostree" \
--url "<em>http://www.example.com/rpm-ostree/</em>" \
--product "<em>OSTree Content</em>" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Synchronize the repository:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository synchronize \
--name "<em>OSTree</em>" \
--product "OSTree Content" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="uploading-ostree-content-with-hammer-cli_content-management"><a class="anchor" href="#uploading-ostree-content-with-hammer-cli_content-management"></a>13.2. Uploading OSTree content with Hammer CLI</h3>
<div class="paragraph">
<p>In deployments in which the Foreman&#160;server does not have internet access, you can upload OSTree image archives using Hammer CLI.</p>
</div>
<div class="paragraph">
<p>You can create images using the Image Builder or OSBuild tool.</p>
</div>
<div class="paragraph">
<p>You can also create an OSTree image archive by downloading a repository from an upstream URL, such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># wget --no-parent -r <em>https://repos.example.com/ostree/repo_name/</em>
# tar --exclude="index.html" -cvf "<em>example_archive_repo</em>.tar" -C <em>repos.example.com/ostree</em> "<em>repo_name</em>"</pre>
</div>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have an OSTree image archive ready and present on your file system.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Connect to your Foreman&#160;server using SSH.</p>
</li>
<li>
<p>Upload your OSTree archive with the <code>hammer</code> command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository upload-content --id <em>repository_id</em> \
--content-type ostree_ref \
--path <em>/path/to/image/file.tar</em> \
--ostree-repository-name <em>example_repo_name</em></pre>
</div>
</div>
<div class="paragraph">
<p>The value of <code>--ostree-repository-name</code> must match the name of the OSTree repository in the archive.</p>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/composing_installing_and_managing_rhel_for_edge_images/index">Composing, installing, and managing RHEL for Edge images using Image Builder</a></p>
</li>
<li>
<p><a href="https://osbuild.org/docs/on-premises/commandline/building-ostree-images">Building OSTree images using the OSBuild tool</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="managing-ostree-content-with-content-views_content-management"><a class="anchor" href="#managing-ostree-content-with-content-views_content-management"></a>13.3. Managing OSTree content with content views</h3>
<div class="paragraph">
<p>Use content views to manage OSTree branches across the application lifecycle.
This process uses the same publication and promotion method as RPMs or Puppet modules.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have created a Product and added an OSTree repository to it.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle</strong> &gt; <strong>Content Views</strong>.</p>
</li>
<li>
<p>Click <strong>Create content view</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a plain text name for the view.
This automatically populates the <strong>Label</strong> field.</p>
</li>
<li>
<p>In the <strong>Description</strong> field, enter a description of the OSTree content view.</p>
</li>
<li>
<p>If you want to use a composite content view, select the <strong>Composite View</strong> checkbox.</p>
</li>
<li>
<p>Optional: If you want to solve dependencies automatically every time you publish this content view, select the <strong>Solve Dependencies</strong> checkbox. Dependency solving slows the publishing time and might ignore any content view filters you use.</p>
</li>
<li>
<p>Click <strong>Save</strong> to complete.</p>
</li>
<li>
<p>Navigate to the <strong>Repositories</strong> tab.</p>
</li>
<li>
<p>Select the OSTree repository that you want to use.
Click <strong>Add Repository</strong> to add the OSTree content from this repository to the content view.</p>
</li>
<li>
<p>Click <strong>Publish new version</strong>.</p>
</li>
<li>
<p>Optional: In the <strong>Description</strong> field, enter a description for the version.</p>
</li>
<li>
<p>Optional: Enable the <strong>Promote</strong> switch to promote this content view across environments in the application lifecycle.</p>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>Review details and click <strong>Finish</strong>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Obtain a list of repository IDs:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository list --organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Create the content view and add the repository:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view create \
--name "<em>OSTree</em>" \
--description "<em>Example content view for the OSTree</em>" \
--repository-ids <em>My_Repository_IDs</em> \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Publish the content view:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-view publish \
--name "<em>OSTree</em>" \
--description "<em>Example content view for the OSTree</em>" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Managing_Container_Images_content-management"><a class="anchor" href="#Managing_Container_Images_content-management"></a>14. Managing container images</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With Foreman, you can import container images from various sources and distribute them to external containers using content views.</p>
</div>
<div class="paragraph">
<p>For information about containers for Red&#160;Hat Enterprise Linux Atomic Host 7, see <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html/getting_started_with_containers/index">Getting Started with Containers</a> in <em>Red&#160;Hat Enterprise Linux Atomic Host 7</em>.</p>
</div>
<div class="paragraph">
<p>For information about containers for Red&#160;Hat Enterprise Linux 8, see <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/building_running_and_managing_containers/index">Building, running, and managing containers</a> in <em>Red&#160;Hat Enterprise Linux 8</em>.</p>
</div>
<div class="paragraph">
<p>For information about containers for Red&#160;Hat Enterprise Linux 9, see <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/building_running_and_managing_containers/index">Building, running, and managing containers</a> in <em>Red&#160;Hat Enterprise Linux 9</em>.</p>
</div>
<div class="sect2">
<h3 id="Importing_Container_Images_content-management"><a class="anchor" href="#Importing_Container_Images_content-management"></a>14.1. Importing container images</h3>
<div class="paragraph">
<p>You can import container image repositories from Red Hat Registry or from other image registries.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Foreman web UI, see the <a href="#cli-importing-container-images">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure with repository discovery</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong> and click <strong>Repo Discovery</strong>.</p>
</li>
<li>
<p>From the <strong>Repository Type</strong> list, select <strong>Container Images</strong>.</p>
</li>
<li>
<p>In the <strong>Registry to Discover</strong> field, enter the URL of the registry to import images from.</p>
</li>
<li>
<p>In the <strong>Registry Username</strong> field, enter the name that corresponds with your user name for the container image registry.</p>
</li>
<li>
<p>In the <strong>Registry Password</strong> field, enter the password that corresponds with the user name that you enter.</p>
</li>
<li>
<p>In the <strong>Registry Search Parameter</strong> field, enter any search criteria that you want to use to filter your search, and then click <strong>Discover</strong>.</p>
</li>
<li>
<p>Optional: To further refine the <strong>Discovered Repository</strong> list, in the <strong>Filter</strong> field, enter any additional search criteria that you want to use.</p>
</li>
<li>
<p>From the <strong>Discovered Repository</strong> list, select any repositories that you want to import, and then click <strong>Create Selected</strong>.</p>
</li>
<li>
<p>Optional: To change the download policy for this container repository to <em>on demand</em>, see <a href="#changing_the_download_policy_for_a_repository_content-management">Changing the download policy for a repository</a>.</p>
</li>
<li>
<p>Optional: If you want to create a product, from the <strong>Product</strong> list, select <strong>New Product</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a product name.</p>
</li>
<li>
<p>Optional: In the <strong>Repository Name</strong> and <strong>Repository Label</strong> columns, you can edit the repository names and labels.</p>
</li>
<li>
<p>Click <strong>Run Repository Creation</strong>.</p>
</li>
<li>
<p>When repository creation is complete, you can click each new repository to view more information.</p>
</li>
<li>
<p>Optional: To filter the content you import to a repository, click a repository, and then navigate to <strong>Limit Sync Tags</strong>.
Click to edit, and add any tags that you want to limit the content that synchronizes to Foreman.</p>
</li>
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong> and select the name of your product.</p>
</li>
<li>
<p>Select the new repositories and then click <strong>Sync Now</strong> to start the synchronization process.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Procedure with creating a repository manually</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>.
Click the name of the required product.</p>
</li>
<li>
<p>Click <strong>New repository</strong>.</p>
</li>
<li>
<p>From the <strong>Type</strong> list, select <strong>docker</strong>.
Enter the details for the repository, and click <strong>Save</strong>.</p>
</li>
<li>
<p>Select the new repository, and click <strong>Sync Now</strong>.</p>
</li>
</ol>
</div>
<div class="ulist _additional-resources">
<div class="title">Next steps</div>
<ul>
<li>
<p>To view the progress of the synchronization, navigate to <strong>Content</strong> &gt; <strong>Sync Status</strong> and expand the repository tree.</p>
</li>
<li>
<p>When the synchronization completes, you can click <strong>Container Image Manifests</strong> to list the available manifests.
From the list, you can also remove any manifests that you do not require.</p>
</li>
</ul>
</div>
<div id="cli-importing-container-images" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Create the custom <code>Red Hat Container Catalog</code> product:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer product create \
--description "<em>My_Description</em>" \
--name "Red Hat Container Catalog" \
--organization "<em>My_Organization</em>" \
--sync-plan "<em>My_Sync_Plan</em>"</pre>
</div>
</div>
</li>
<li>
<p>Create the repository for the container images:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository create \
--content-type "docker" \
--docker-upstream-name "rhel7" \
--name "RHEL7" \
--organization "<em>My_Organization</em>" \
--product "Red Hat Container Catalog" \
--url "http://registry.access.redhat.com/"</pre>
</div>
</div>
</li>
<li>
<p>Synchronize the repository:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository synchronize \
--name "RHEL7" \
--organization "<em>My_Organization</em>" \
--product "Red Hat Container Catalog"</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p>For more information about creating a product and repository manually, see <a href="#Importing_Content_content-management">Importing content</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Managing_Container_Name_Patterns_content-management"><a class="anchor" href="#Managing_Container_Name_Patterns_content-management"></a>14.2. Managing container name patterns</h3>
<div class="paragraph">
<p>When you use Foreman to create and manage your containers, as the container moves through content view versions and different stages of the Foreman lifecycle environment, the container name changes at each stage.
For example, if you synchronize a container image with the name <code>ssh</code> from an upstream repository, when you add it to a Foreman product and organization and then publish as part of a content view, the container image can have the following name: <code>my_organization_production-custom_spin-my_product-custom_ssh</code>.
This can create problems when you want to pull a container image because container registries can contain only one instance of a container name.
To avoid problems with Foreman naming conventions, you can set a registry name pattern to override the default name to ensure that your container name is clear for future use.</p>
</div>
<div class="paragraph">
<div class="title">Limitations</div>
<p>If you use a registry name pattern to manage container naming conventions, because registry naming patterns must generate globally unique names, you might experience naming conflict problems.
For example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If you set the <code>repository.docker_upstream_name</code> registry name pattern, you cannot publish or promote content views with container content with identical repository names to the <code>Production</code> lifecycle.</p>
</li>
<li>
<p>If you set the <code>lifecycle_environment.name</code> registry name pattern, this can prevent the creation of a second container repository with the identical name.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You must proceed with caution when defining registry naming patterns for your containers.</p>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>To manage container naming with a registry name pattern, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle</strong> &gt; <strong>Lifecycle Environments</strong>.</p>
</li>
<li>
<p>Create a lifecycle environment or select an existing lifecycle environment to edit.</p>
</li>
<li>
<p>In the <strong>Container Image Registry</strong> area, click the edit icon to the right of <strong>Registry Name Pattern</strong> area.</p>
</li>
<li>
<p>Use the list of variables and examples to determine which registry name pattern you require.</p>
</li>
<li>
<p>In the <strong>Registry Name Pattern</strong> field, enter the registry name pattern that you want to use.
For example, to use the <code>repository.docker_upstream_name</code>:</p>
<div class="listingblock">
<div class="content">
<pre>&lt;%= repository.docker_upstream_name %&gt;</pre>
</div>
</div>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Managing_Container_Registry_Authentication_content-management"><a class="anchor" href="#Managing_Container_Registry_Authentication_content-management"></a>14.3. Managing container registry authentication</h3>
<div class="paragraph">
<p>You can manage the authentication settings for accessing containers images from Foreman.
By default, users must authenticate to access containers images in Foreman.</p>
</div>
<div class="paragraph">
<p>You can specify whether you want users to authenticate to access container images in Foreman in a lifecycle environment.
For example, you might want to permit users to access container images from the <code>Production</code> lifecycle without any authentication requirement and restrict access the <code>Development</code> and <code>QA</code> environments to authenticated users.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Lifecycle</strong> &gt; <strong>Lifecycle Environments</strong>.</p>
</li>
<li>
<p>Select the lifecycle environment that you want to manage authentication for.</p>
</li>
<li>
<p>To permit unauthenticated access to the containers in this lifecycle environment, select the <strong>Unauthenticated Pull</strong> checkbox.
To restrict unauthenticated access, clear the <strong>Unauthenticated Pull</strong> checkbox.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Configuring_podman_to_trust_the_CA_content-management"><a class="anchor" href="#Configuring_podman_to_trust_the_CA_content-management"></a>14.4. Configuring Podman and Docker to trust the certificate authority</h3>
<div class="paragraph">
<p>Podman uses two paths to locate the CA file, namely, <code>/etc/containers/certs.d/</code> and <code>/etc/docker/certs.d/</code>.</p>
</div>
<div class="paragraph">
<p>Copy the root CA file to one of these locations, with the exact path determined by the server hostname, and naming the file <code>ca.crt</code></p>
</div>
<div class="paragraph">
<p>In the following examples, replace <code>hostname.example.com</code> with <code>foreman.example.com</code> or <code>smartproxy.example.com</code>, depending on your use case.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You might first need to create the relevant location using:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir -p /etc/containers/certs.d/hostname.example.com</pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir -p /etc/docker/certs.d/hostname.example.com</pre>
</div>
</div>
</li>
<li>
<p>For podman, use:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># cp rootCA.pem /etc/containers/certs.d/hostname.example.com/ca.crt</pre>
</div>
</div>
</li>
<li>
<p>Alternatively, if you are using Docker, copy the root CA file to the equivalent Docker directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># cp rootCA.pem /etc/docker/certs.d/hostname.example.com/ca.crt</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>You no longer need to use the <code>--tls-verify=false</code> option when logging in to the registry:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ podman login hostname.example.com

Username: admin
Password:
Login Succeeded!</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Using_Container_Registries_content-management"><a class="anchor" href="#Using_Container_Registries_content-management"></a>14.5. Using container registries</h3>
<div class="paragraph">
<p>Podman and Docker can be used to fetch content from container registries.</p>
</div>
<div class="paragraph">
<div class="title">Container registries on Smart&#160;Proxies</div>
<p>On Smart&#160;Proxies with content, the <a href="https://github.com/Katello/smart_proxy_container_gateway">Container Gateway</a> Smart&#160;Proxy plugin acts as the container registry.
It caches authentication information from Katello and proxies incoming requests to Pulp.
The Container Gateway is available by default on Smart&#160;Proxies with content.</p>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>Logging in to the container registry:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># podman login foreman.example.com</pre>
</div>
</div>
<div class="paragraph">
<p>Listing container images:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># podman search foreman.example.com/</pre>
</div>
</div>
<div class="paragraph">
<p>Pulling container images:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># podman pull foreman.example.com/my-image:&lt;optional_tag&gt;</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Managing_ISO_Images_content-management"><a class="anchor" href="#Managing_ISO_Images_content-management"></a>15. Managing ISO images</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use Foreman to store ISO images, either from Red&#160;Hat&#8217;s Content Delivery Network or other sources.
You can also upload other files, such as virtual machine images, and publish them in repositories.</p>
</div>
<div class="sect2">
<h3 id="Importing_ISO_Images_from_Red_Hat_content-management"><a class="anchor" href="#Importing_ISO_Images_from_Red_Hat_content-management"></a>15.1. Importing ISO images from Red Hat</h3>
<div class="paragraph">
<p>The Red&#160;Hat Content Delivery Network provides ISO images for certain products.
The procedure for importing this content is similar to the procedure for enabling repositories for RPM content.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Foreman web UI, see the <a href="#cli-importing-iso-images-from-red-hat">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Red&#160;Hat Repositories</strong>.</p>
</li>
<li>
<p>In the <strong>Search</strong> field, enter an image name, for example, <code>Red&#160;Hat Enterprise Linux 7 Server (ISOs)</code>.</p>
</li>
<li>
<p>In the Available Repositories window, expand <strong>Red&#160;Hat Enterprise Linux 7 Server (ISOs)</strong>.</p>
</li>
<li>
<p>For the <strong>x86_64 7.2</strong> entry, click the <strong>Enable</strong> icon to enable the repositories for the image.</p>
</li>
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong> and click <strong>Red&#160;Hat Enterprise Linux Server</strong>.</p>
</li>
<li>
<p>Click the <strong>Repositories</strong> tab of the Red&#160;Hat Enterprise Linux Server window, and click <strong>Red&#160;Hat Enterprise Linux 7 Server ISOs x86_64 7.2</strong>.</p>
</li>
<li>
<p>In the upper right of the Red&#160;Hat Enterprise Linux 7 Server ISOs x86_64 7.2 window, click <strong>Select Action</strong> and select <strong>Sync Now</strong>.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">To view the synchronization status</div>
<ul>
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Sync Status</strong> and expand <strong>Red&#160;Hat Enterprise Linux Server</strong>.</p>
</li>
</ul>
</div>
<div id="cli-importing-iso-images-from-red-hat" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Locate the Red&#160;Hat Enterprise Linux Server product for <code>file</code> repositories:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository-set list \
--product "Red Hat Enterprise Linux Server" \
--organization "<em>My_Organization</em>" | grep "file"</pre>
</div>
</div>
</li>
<li>
<p>Enable the <code>file</code> repository for Red&#160;Hat Enterprise Linux 7.2 Server ISO:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository-set enable \
--product "Red Hat Enterprise Linux Server" \
--name "Red Hat Enterprise Linux 7 Server (ISOs)" \
--releasever 7.2 \
--basearch x86_64 \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Locate the repository in the product:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository list \
--product "Red Hat Enterprise Linux Server" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Synchronize the repository in the product:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository synchronize \
--name "Red Hat Enterprise Linux 7 Server ISOs x86_64 7.2" \
--product "Red Hat Enterprise Linux Server" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Importing_Individual_ISO_Images_and_Files_content-management"><a class="anchor" href="#Importing_Individual_ISO_Images_and_Files_content-management"></a>15.2. Importing individual ISO images and files</h3>
<div class="paragraph">
<p>Use this procedure to manually import ISO content and other files to Foreman&#160;server.
To import files, you can complete the following steps in the Foreman web UI or using the Hammer CLI.
However, if the size of the file that you want to upload is larger than 15 MB, you must use the Hammer CLI to upload it to a repository.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Foreman web UI, see the <a href="#cli-importing-individual-iso-images-and-files">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>, and in the Products window, click <strong>Create Product</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name to identify the product.
This name populates the <strong>Label</strong> field.</p>
</li>
<li>
<p>Optional: In the <strong>GPG Key</strong> field, enter a GPG Key for the product.</p>
</li>
<li>
<p>Optional: From the <strong>Sync Plan</strong> list, select a synchronization plan for the product.</p>
</li>
<li>
<p>Optional: In the <strong>Description</strong> field, enter a description of the product.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
<li>
<p>In the Products window, click the new product and then click <strong>Create Repository</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for the repository.
This automatically populates the <strong>Label</strong> field.</p>
</li>
<li>
<p>From the <strong>Type</strong> list, select <strong>file</strong>.</p>
</li>
<li>
<p>In the <strong>Upstream URL</strong> field, enter the URL of the registry to use as a source.
Add a corresponding user name and password in the <strong>Upstream Username</strong> and <strong>Upstream Password</strong> fields.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
<li>
<p>Select the new repository.</p>
</li>
<li>
<p>Navigate to <strong>Upload File</strong> and click <strong>Browse</strong>.</p>
</li>
<li>
<p>Select the <code>.iso</code> file and click <strong>Upload</strong>.</p>
</li>
</ol>
</div>
<div id="cli-importing-individual-iso-images-and-files" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Create the product:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer product create \
--name "<em>My_ISOs</em>" \
--sync-plan "Example Plan" \
--description "<em>My_Product</em>" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Create the repository:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository create \
--name "<em>My_ISOs</em>" \
--content-type "file" \
--product "<em>My_Product</em>" \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
<li>
<p>Upload the ISO file to the repository:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository upload-content \
--path ~/bootdisk.iso \
--id <em>repo_ID</em> \
--organization "<em>My_Organization</em>"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Managing_Ansible_Content_content-management"><a class="anchor" href="#Managing_Ansible_Content_content-management"></a>16. Managing Ansible content</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can import Ansible collections from several sources to Foreman&#160;server.</p>
</div>
<div class="paragraph">
<p>For more information about Ansible integration in Foreman, see <a href="https://docs.theforeman.org/3.9/Managing_Configurations_Ansible/index-katello.html#"><em>Configuring hosts using Ansible</em></a>.</p>
</div>
<div class="sect2">
<h3 id="synchronizing-ansible-collections_content-management"><a class="anchor" href="#synchronizing-ansible-collections_content-management"></a>16.1. Synchronizing Ansible Collections</h3>
<div class="paragraph">
<p>On Foreman, you can synchronize your Ansible Collections from any Ansible Galaxy and other Foreman instances.
Ansible Collections will appear on Foreman as a new repository type in the Foreman web UI menu under <strong>Content</strong> after the sync.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Select the required product name.</p>
</li>
<li>
<p>In the <strong>Products</strong> window, select the name of a product that you want to create a repository for.</p>
</li>
<li>
<p>Click the <strong>Repositories</strong> tab, and then click <strong>New Repository</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for the repository.</p>
<div class="paragraph">
<p>The <strong>Label</strong> field is populated automatically based on the name.</p>
</div>
</li>
<li>
<p>From the <strong>Type</strong> list, select <strong>ansible collection</strong>.</p>
</li>
<li>
<p>In the <strong>Upstream URL</strong> field, enter the URL for the upstream collections repository.</p>
<div class="paragraph">
<p>The URL can be any Ansible Galaxy endpoint.
For example, <code>https://galaxy.ansible.com</code>.</p>
</div>
</li>
<li>
<p>Optional: In the <strong>Requirements.yml</strong> field, you can specify the list of collections you want to sync from the endpoint, as well as their versions.</p>
<div class="paragraph">
<p>If you do not specify the list of collections, everything from the endpoint will be synced.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-Yaml" data-lang="Yaml">---
collections:
- name: my_namespace.my_collection
  version: 1.2.3</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more information, see <a href="https://docs.ansible.com/ansible/latest/galaxy/user_guide.html#installing-roles-and-collections-from-the-same-requirements-yml-file">Installing roles and collections from the same requirements.yml file</a> in the <em>Galaxy User Guide</em>.</p>
</div>
</li>
<li>
<p>Authenticate.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>To sync Foreman from <strong>Private Automation Hub</strong>, enter your token in the <strong>Auth Token</strong> field.</p>
</li>
<li>
<p>To sync Foreman from <code>console.redhat.com</code>, enter your token in the <strong>Auth Token</strong> field and enter your SSO URL in the the <strong>Auth URL</strong> field.</p>
</li>
<li>
<p>To sync Foreman from Foreman, leave both authentication fields blank.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
<li>
<p>Navigate to the Ansible Collections repository.</p>
</li>
<li>
<p>From the <strong>Select Action</strong> menu, select <strong>Sync Now</strong>.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Managing_Custom_File_Type_Content_content-management"><a class="anchor" href="#Managing_Custom_File_Type_Content_content-management"></a>17. Managing file type content</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In Foreman, you might require methods of managing and distributing SSH keys and source code files or larger files such as virtual machine images and ISO files.
To achieve this, products in Foreman include repositories for file types.
This provides a generic method to incorporate arbitrary files in a product.</p>
</div>
<div class="paragraph">
<p>You can upload files to the repository and synchronize files from an upstream Foreman&#160;server.
When you add files to a file type repository, you can use the normal Foreman management functions such as adding a specific version to a content view to provide version control and making the repository of files available on various Smart&#160;Proxy&#160;servers.
You must download the files on clients over HTTP or HTTPS using <code>curl -O</code>.</p>
</div>
<div class="paragraph">
<p>You can create a file type repository in Foreman&#160;server only in a product, but there is flexibility in how you create the repository source.
You can create an independent repository source in a directory on Foreman&#160;server, or on a remote HTTP server, and then synchronize the contents of that directory into Foreman.
This method is useful when you have multiple files to add to a Foreman repository.</p>
</div>
<div class="sect2">
<h3 id="Creating_a_Local_Source_for_a_Custom_File_Type_Repository_content-management"><a class="anchor" href="#Creating_a_Local_Source_for_a_Custom_File_Type_Repository_content-management"></a>17.1. Creating a local source for a file type repository</h3>
<div class="paragraph">
<p>You can create a file type repository source, from a directory of files, on the base system where Foreman is installed using <strong>Pulp Manifest</strong>.
You can then synchronize the files into a repository and manage the file type content like any other content type.</p>
</div>
<div class="paragraph">
<p>Use this procedure to configure a repository in a directory on the base system where Foreman is installed.
To create a file type repository in a directory on a remote server, see <a href="#Creating_a_Remote_Source_for_a_Custom_File_Type_Repository_content-management">Creating a remote source for a file type repository</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Install the Pulp Manifest package:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf install python3.11-pulp_manifest</pre>
</div>
</div>
</li>
<li>
<p>Create a directory that you want to use as the file type repository, such as:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir -p /var/lib/pulp/<em>local_repos</em>/<em>my_file_repo</em></pre>
</div>
</div>
</li>
<li>
<p>Add the parent folder into allowed import paths:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer --foreman-proxy-content-pulpcore-additional-import-paths /var/lib/pulp/<em>local_repos</em></pre>
</div>
</div>
</li>
<li>
<p>Add files to the directory or create a test file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># touch /var/lib/pulp/<em>local_repos</em>/<em>my_file_repo</em>/<em>test.txt</em></pre>
</div>
</div>
</li>
<li>
<p>Run the Pulp Manifest command to create the manifest:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># pulp-manifest /var/lib/pulp/<em>local_repos</em>/<em>my_file_repo</em></pre>
</div>
</div>
</li>
<li>
<p>Verify the manifest was created:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ls /var/lib/pulp/<em>local_repos</em>/<em>my_file_repo</em>
PULP_MANIFEST test.txt</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now, you can import your local source as a file type repository.
Use the <code>file://</code> URL scheme and the name of the directory to specify an <strong>Upstream URL</strong>, such as <code>file:///var/lib/pulp/<em>local_repos</em>/<em>my_file_repo</em></code>.
For more information, see <a href="#Creating_a_Custom_File_Type_Repository_content-management">Creating a file type repository</a>.</p>
</div>
<div class="paragraph">
<p>If you update the contents of your directory, re-run Pulp Manifest and sync the repository in Foreman.
For more information, see <a href="#Synchronizing_Repositories_content-management">Synchronizing repositories</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Creating_a_Remote_Source_for_a_Custom_File_Type_Repository_content-management"><a class="anchor" href="#Creating_a_Remote_Source_for_a_Custom_File_Type_Repository_content-management"></a>17.2. Creating a remote source for a file type repository</h3>
<div class="paragraph">
<p>You can create a file type repository source from a directory of files that is external to Foreman&#160;server using <strong>Pulp Manifest</strong>.
You can then synchronize the files into a repository on Foreman&#160;server over HTTP or HTTPS and manage the file type content like any other content type.</p>
</div>
<div class="paragraph">
<p>Use this procedure to configure a repository in a directory on a remote server.
To create a file type repository in a directory on the base system where Foreman&#160;server is installed, see <a href="#Creating_a_Local_Source_for_a_Custom_File_Type_Repository_content-management">Creating a local source for a file type repository</a>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have a server running Enterprise Linux 8 registered to your Foreman.</p>
</li>
<li>
<p>You have installed an HTTP server.
For more information about configuring a web server, see <a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/8/html/deploying_different_types_of_servers/setting-apache-http-server_deploying-different-types-of-servers">Setting up the Apache HTTP web server</a> in Red&#160;Hat Enterprise Linux&#160;8 <em>Deploying different types of servers</em>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Install the Pulp Manifest package:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf install python3.11-pulp_manifest</pre>
</div>
</div>
</li>
<li>
<p>Create a directory that you want to use as the file type repository in the HTTP server&#8217;s public folder:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir /var/www/html/pub/<em>my_file_repo</em></pre>
</div>
</div>
</li>
<li>
<p>Add files to the directory or create a test file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># touch /var/www/html/pub/<em>my_file_repo</em>/<em>test.txt</em></pre>
</div>
</div>
</li>
<li>
<p>Run the Pulp Manifest command to create the manifest:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># pulp-manifest /var/www/html/pub/<em>my_file_repo</em></pre>
</div>
</div>
</li>
<li>
<p>Verify the manifest was created:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ls /var/www/html/pub/<em>my_file_repo</em>
PULP_MANIFEST test.txt</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now, you can import your remote source as a file type repository.
Use the path to the directory to specify an <strong>Upstream URL</strong>, such as <code>http://server.example.com/<em>my_file_repo</em></code>.
For more information, see <a href="#Creating_a_Custom_File_Type_Repository_content-management">Creating a file type repository</a>.</p>
</div>
<div class="paragraph">
<p>If you update the contents of your directory, re-run Pulp Manifest and sync the repository in Foreman.
For more information, see <a href="#Synchronizing_Repositories_content-management">Synchronizing repositories</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Creating_a_Custom_File_Type_Repository_content-management"><a class="anchor" href="#Creating_a_Custom_File_Type_Repository_content-management"></a>17.3. Creating a file type repository</h3>
<div class="paragraph">
<p>The procedure for creating a file type repository is the same as the procedure for creating any content, except that when you create the repository, you select the <strong>file</strong> type.
You must create a product and then add a repository.</p>
</div>
<div class="paragraph">
<p>To use the CLI instead of the Foreman web UI, see the <a href="#cli-creating-a-custom-file-type-repository_content-management">CLI procedure</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content &gt; Products</strong>.</p>
</li>
<li>
<p>Select a product that you want to create a repository for.</p>
</li>
<li>
<p>On the <strong>Repositories</strong> tab, click <strong>New Repository</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for the repository.
Foreman automatically completes the <strong>Label</strong> field based on the name.</p>
</li>
<li>
<p>Optional: In the <strong>Description</strong> field, enter a description for the repository.</p>
</li>
<li>
<p>From the <strong>Type</strong> list, select <code>file</code> as type of repository.</p>
</li>
<li>
<p>Optional: In the <strong>Upstream URL</strong> field, enter the URL of the upstream repository to use as a source.
If you do not enter an upstream URL, you can manually upload packages.
For more information, see <a href="#Uploading_Files_To_a_Custom_File_Type_Repository_content-management">Uploading files to a file type repository</a>.</p>
</li>
<li>
<p>Select <strong>Verify SSL</strong> to verify that the SSL certificates of the repository are signed by a trusted CA.</p>
</li>
<li>
<p>Optional: In the <strong>Upstream Username</strong> field, enter the user name for the upstream repository if required for authentication.
Clear this field if the repository does not require authentication.</p>
</li>
<li>
<p>Optional: In the <strong>Upstream Password</strong> field, enter the corresponding password for the upstream repository.
Clear this field if the repository does not require authentication.</p>
</li>
<li>
<p>Optional: In the <strong>Upstream Authentication Token</strong> field, provide the token of the upstream repository user for authentication.
Leave this field empty if the repository does not require authentication.</p>
</li>
<li>
<p>From the <strong>Mirroring Policy</strong> list, select the type of content synchronization Foreman&#160;server performs.
For more information, see <a href="#Mirroring_Policies_Overview_content-management">Mirroring policies overview</a>.</p>
</li>
<li>
<p>Optional: In the <strong>HTTP Proxy Policy</strong> field, select an HTTP proxy.
By default, it uses the <code>Global Default</code> HTTP proxy.</p>
</li>
<li>
<p>Optional: You can clear the <strong>Unprotected</strong> checkbox to require a subscription entitlement certificate for accessing this repository.
By default, the repository is published through HTTP.</p>
</li>
<li>
<p>Optional: In the <strong>SSL CA Cert</strong> field, select the SSL CA Certificate for the repository.</p>
</li>
<li>
<p>Optional: In the <strong>SSL Client Cert</strong> field, select the SSL Client Certificate for the repository.</p>
</li>
<li>
<p>Optional: In the <strong>SSL Client Key</strong> field, select the SSL Client Key for the repository.</p>
</li>
<li>
<p>Click <strong>Save</strong> to create the repository.</p>
</li>
</ol>
</div>
<div id="cli-creating-a-custom-file-type-repository_content-management" class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Create a product:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer product create \
--description "<em>My_Files</em>" \
--name "<em>My_File_Product</em>" \
--organization "<em>My_Organization</em>" \
--sync-plan "<em>My_Sync_Plan</em>"</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Optional parameters for the <code>hammer product create</code> command</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Option</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--gpg-key-id</code> <em>gpg_key_id</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GPG key numeric identifier</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--sync-plan-id</code> <em>sync_plan_id</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sync plan numeric identifier</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--sync-plan</code> <em>sync_plan_name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sync plan name to search by</p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Create a <code>file</code> type repository:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository create \
--content-type "file" \
--name "<em>My_Files</em>" \
--organization "<em>My_Organization</em>" \
--product "<em>My_File_Product</em>"</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Optional parameters for the <code>hammer repository create</code> command</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Option</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--checksum-type</code> <em>sha_version</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Repository checksum (either <code>sha1</code> or <code>sha256</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--download-policy</code> <em>policy_name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Download policy for repositories (either <code>immediate</code> or <code>on_demand</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--gpg-key-id</code> <em>gpg_key_id</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GPG key numeric identifier</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--gpg-key</code> <em>gpg_key_name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key name to search by</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--mirror-on-sync</code> <em>boolean</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Must this repo be mirrored from the source, and stale packages removed, when synced? Set to <code>true</code> or <code>false</code>, <code>yes</code> or <code>no</code>, <code>1</code> or <code>0</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--publish-via-http</code> <em>boolean</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Must this also be published using HTTP? Set to <code>true</code> or <code>false</code>, <code>yes</code> or <code>no</code>, <code>1</code> or <code>0</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--upstream-password</code> <em>repository_password</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password for the upstream repository user</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--upstream-username</code> <em>repository_username</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Upstream repository user, if required for authentication</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--url</code> <em>My_Repository_URL</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the remote repository</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--verify-ssl-on-sync</code> <em>boolean</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verify that the upstream SSL certificates of the remote repository are signed by a trusted CA? Set to <code>true</code> or <code>false</code>, <code>yes</code> or <code>no</code>, <code>1</code> or <code>0</code>.</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Uploading_Files_To_a_Custom_File_Type_Repository_content-management"><a class="anchor" href="#Uploading_Files_To_a_Custom_File_Type_Repository_content-management"></a>17.4. Uploading files to a file type repository</h3>
<div class="paragraph">
<p>Use this procedure to upload files to a file type repository.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Select a product by name.</p>
</li>
<li>
<p>Select a file type repository by name.</p>
</li>
<li>
<p>Click <strong>Browse</strong> to search and select the file you want to upload.</p>
</li>
<li>
<p>Click <strong>Upload</strong> to upload the selected file to Foreman&#160;server.</p>
</li>
<li>
<p>Visit the URL where the repository is published to see the file.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">CLI procedure</div>
<div class="content">
<pre class="nowrap"># hammer repository upload-content \
--id <em>repo_ID</em> \
--organization "<em>My_Organization</em>" \
--path <em>example_file</em></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>--path</code> option can indicate a file, a directory of files, or a glob expression of files.
Globs must be escaped by single or double quotes.</p>
</div>
</div>
<div class="sect2">
<h3 id="Downloading_Files_to_a_Host_from_a_Custom_File_Type_Repository_content-management"><a class="anchor" href="#Downloading_Files_to_a_Host_from_a_Custom_File_Type_Repository_content-management"></a>17.5. Downloading files to a host from a file type repository</h3>
<div class="paragraph">
<p>You can download files to a client over HTTPS using <code>curl -O</code>, and optionally over HTTP if the <strong>Unprotected</strong> option for repositories is selected.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have a file type repository.
For more information, see <a href="#Creating_a_Custom_File_Type_Repository_content-management">Creating a file type repository</a>.</p>
</li>
<li>
<p>You know the name of the file you want to download to clients from the file type repository.</p>
</li>
<li>
<p>To use HTTPS you require the following certificates on the client:</p>
<div class="ulist">
<ul>
<li>
<p>The <code>katello-server-ca.crt</code>.
For more information, see <a href="https://docs.theforeman.org/3.9/Administering_Project/index-katello.html#Importing_the_Katello_Root_CA_Certificate_admin">Importing the Katello Root CA Certificate</a> in <em>Administering Foreman</em>.</p>
</li>
<li>
<p>An Organization Debug Certificate.
For more information, see <a href="https://docs.theforeman.org/3.9/Managing_Organizations_and_Locations/index-katello.html#Creating_an_Organization_Debug_Certificate_managing-organizations-locations">Creating an Organization Debug Certificate</a> in <em>Managing organizations and locations in Foreman</em>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Select a product by name.</p>
</li>
<li>
<p>Select a file type repository by name.</p>
</li>
<li>
<p>Ensure to select the <strong>Unprotected</strong> checkbox to access the repository published through HTTP.</p>
</li>
<li>
<p>Copy the <strong>Published At</strong> URL.</p>
</li>
<li>
<p>On your client, download the file from Foreman&#160;server:</p>
<div class="ulist">
<ul>
<li>
<p>For HTTPS:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl \
--cacert <em>./_katello-server-ca.crt</em> \
--cert <em>./_My_Organization_key-cert.pem</em> \
--remote-name \
https://<em>foreman.example.com</em>/pulp/content/<em>My_Organization_Label</em>/Library/custom/<em>My_Product_Label</em>/<em>My_Repository_Label</em>/<em>My_File</em></pre>
</div>
</div>
</li>
<li>
<p>For HTTP:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl \
--remote-name \
http://<em>foreman.example.com</em>/pulp/content/<em>My_Organization_Label</em>/Library/custom/<em>My_Product_Label</em>/<em>My_Repository_Label</em>/<em>My_File</em></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List the file type repositories.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository list --content-type file
---|------------|-------------------|--------------|----
ID | NAME       | PRODUCT           | CONTENT TYPE | URL
---|------------|-------------------|--------------|----
7  | <em>My_Files</em>   | <em>My_File_Product</em>   | file         |
---|------------|-------------------|--------------|----</pre>
</div>
</div>
</li>
<li>
<p>Display the repository information.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository info \
--name "<em>My_Files</em>" \
--organization-id <em>My_Organization_ID</em> \
--product "<em>My_File_Product</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>If <strong>Unprotected</strong> is enabled, the output is similar to this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"><strong>Publish Via HTTP:   yes</strong>
Published At:       https://<em>foreman.example.com</em>/pulp/content/<em>My_Organization_Label</em>/Library/custom/<em>My_File_Product_Label</em>/<em>My_Files_Label</em>/</pre>
</div>
</div>
<div class="paragraph">
<p>If <strong>Unprotected</strong> is not enabled, the output is similar to this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"><strong>Publish Via HTTP:   no</strong>
Published At:       https://<em>foreman.example.com</em>/pulp/content/<em>My_Organization_Label</em>/Library/custom/<em>My_File_Product_Label</em>/<em>My_Files_Label</em>/</pre>
</div>
</div>
</li>
<li>
<p>On your client, download the file from Foreman&#160;server:</p>
<div class="ulist">
<ul>
<li>
<p>For HTTPS:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl \
--cacert <em>./_katello-server-ca.crt</em> \
--cert <em>./_My_Organization_key-cert.pem</em> \
--remote-name \
https://<em>foreman.example.com</em>/pulp/content/<em>My_Organization_Label</em>/Library/custom/<em>My_Product_Label</em>/<em>My_Repository_Label</em>/<em>My_File</em></pre>
</div>
</div>
</li>
<li>
<p>For HTTP:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl \
--remote-name \
http://<em>foreman.example.com</em>/pulp/content/<em>My_Organization_Label</em>/Library/custom/<em>My_Product_Label</em>/<em>My_Repository_Label</em>/<em>My_File</em></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Managing_Python_Type_Content_content-management"><a class="anchor" href="#Managing_Python_Type_Content_content-management"></a>18. Managing Python type content</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use Foreman to manage Python type repositories.
To achieve this, products in Foreman include repositories for Python type content.
This provides a generic method to incorporate Python packages in a product.</p>
</div>
<div class="paragraph">
<p>You can upload Python packages to Python type repositories and synchronize files from an upstream Foreman&#160;server.
When you add Python packages to a Python type repository, you can use the normal Foreman management functions such as adding a specific version to a content view to provide version control and making the repository available on various Smart&#160;Proxy&#160;servers.
You must download the files on clients over HTTP or HTTPS using <code>curl -O</code>.</p>
</div>
<div class="paragraph">
<p>You can create an independent repository source in a directory on Foreman&#160;server, or on a remote HTTP server, and then synchronize the contents of that directory into Foreman.
This method is useful when you have multiple Python packages to add to a repository.</p>
</div>
<div class="sect2">
<h3 id="Synchronizing_Python_Repositories_content-management"><a class="anchor" href="#Synchronizing_Python_Repositories_content-management"></a>18.1. Synchronizing Python repositories</h3>
<div class="paragraph">
<p>On Foreman, you can synchronize your Python repositories from any mirror and other Foreman instances.
You can view the Python packages in the Foreman web UI at <strong>Content</strong> &gt; <strong>Content Types</strong> &gt; <strong>Other Content Types</strong>.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Select a product by name.</p>
</li>
<li>
<p>In the <strong>Products</strong> window, select the name of a product that you want to create a repository for.</p>
</li>
<li>
<p>Click the <strong>Repositories</strong> tab, and then click <strong>New Repository</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter a name for the repository.</p>
<div class="paragraph">
<p>The <strong>Label</strong> field is populated automatically based on the name.</p>
</div>
</li>
<li>
<p>From the <strong>Type</strong> list, select <strong>python</strong>.</p>
</li>
<li>
<p>In the <strong>Upstream URL</strong> field, enter the URL for the upstream content source, for example <code>https://pypi.org</code>.</p>
</li>
<li>
<p>Optional: In the <strong>Upstream Username</strong> field, enter the user name for the upstream repository if required for authentication.
Clear this field if the repository does not require authentication.</p>
</li>
<li>
<p>Optional: In the <strong>Upstream Password</strong> field, enter the corresponding password for the upstream repository.
Clear this field if the repository does not require authentication.</p>
</li>
<li>
<p>Optional: In the <strong>Upstream Authentication Token</strong> field, provide the token of the upstream repository user for authentication.
Leave this field empty if the repository does not require authentication.</p>
</li>
<li>
<p>Optional: In the <strong>Excludes</strong> field, enter a list of Python packages separated by newlines to exclude from synchronizing to Foreman.</p>
</li>
<li>
<p>Optional: In the <strong>Includes</strong> field, enter a list of Python packages separated by newlines to limit the synchronization only to the included packages.</p>
</li>
<li>
<p>Optional: In the <strong>Package Types</strong> field, enter a list of package types separated by comma.
You can use this field to only synchronize the source distribution if you enter <code>.tar.gz</code> or the built distribution if you enter <code>.whl</code>.</p>
</li>
<li>
<p>From the <strong>Mirroring Policy</strong> list, select the type of content synchronization Foreman&#160;server performs.
For more information, see <a href="#Mirroring_Policies_Overview_content-management">Mirroring policies overview</a>.</p>
</li>
<li>
<p>Optional: In the <strong>HTTP Proxy Policy</strong> field, select an HTTP proxy.</p>
</li>
<li>
<p>Optional: You can clear the <strong>Unprotected</strong> checkbox to require a subscription entitlement certificate for accessing this repository.
By default, the repository is published through HTTP.</p>
</li>
<li>
<p>Optional: In the <strong>SSL CA Cert</strong> field, select the SSL CA Certificate for the repository.</p>
</li>
<li>
<p>Optional: In the <strong>SSL Client cert</strong> field, select the SSL Client Certificate for the repository.</p>
</li>
<li>
<p>Optional: In the <strong>SSL Client Key</strong> field, select the SSL Client Key for the repository.</p>
</li>
<li>
<p>Click <strong>Save</strong> to create the repository.</p>
</li>
<li>
<p>Select your repository.</p>
</li>
<li>
<p>From the <strong>Select Action</strong> menu, select <strong>Sync Now</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Uploading_Files_To_a_Python_Type_Repository_content-management"><a class="anchor" href="#Uploading_Files_To_a_Python_Type_Repository_content-management"></a>18.2. Uploading files to a Python type repository</h3>
<div class="paragraph">
<p>You can upload files from your local machine to a Python type repository.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Select a product by name.</p>
</li>
<li>
<p>Select a Python type repository by name.</p>
</li>
<li>
<p>Click <strong>Browse</strong> to search and select the file you want to upload.</p>
<div class="paragraph">
<p>You can upload <code>.whl</code> packages and <code>.tar.gz</code> archives that contain Python packages.</p>
</div>
</li>
<li>
<p>Click <strong>Upload</strong> to upload the selected file to Foreman&#160;server.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">CLI procedure</div>
<div class="content">
<pre class="nowrap"># hammer repository upload-content \
--id <em>My_Repository_ID</em> \
--organization-id <em>My_Organization_ID</em> \
--path <em>Path_To_My_File</em></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>--path</code> option can indicate a file, a directory of files, or a glob expression of files.
Globs must be escaped by single or double quotes.</p>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>Visit the <strong>Published At</strong> URL to see the file.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Installing_Python_Packages_from_foreman_Server_content-management"><a class="anchor" href="#Installing_Python_Packages_from_foreman_Server_content-management"></a>18.3. Installing Python packages from Foreman&#160;Server</h3>
<div class="paragraph">
<p>You can install Python packages from Foreman on hosts using <code>pip</code>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have uploaded or synchronized a Python package to Foreman.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>On your hosts, set the URL to Foreman&#160;server to install a Python package:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ pip install \
--index-url https://foreman.example.com/pulp/content/<em>My_Organization_Label</em>/Library/custom/<em>My</em>product/<em>My_Python_Repository</em>/simple/ \
<em>My_Python_Package</em></pre>
</div>
</div>
<div class="paragraph">
<p>If your host does not trust the certificate of your Foreman&#160;server, add the <code>--trusted-host foreman.example.com</code> option.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Downloading_Files_to_a_Host_from_a_Python_Type_Repository_content-management"><a class="anchor" href="#Downloading_Files_to_a_Host_from_a_Python_Type_Repository_content-management"></a>18.4. Downloading files to a host from a Python type repository</h3>
<div class="paragraph">
<p>You can download files to a client over HTTPS using <code>curl -O</code>, and optionally over HTTP if the <strong>Unprotected</strong> option for repositories is selected.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have a Python type repository.</p>
</li>
<li>
<p>You know the name of the Python package you want to download to clients from the Python type repository.</p>
</li>
<li>
<p>To download the Python packages over HTTPS to your hosts, you require:</p>
<div class="ulist">
<ul>
<li>
<p>The <code>katello-server-ca.crt</code>.
For more information, see <a href="https://docs.theforeman.org/3.9/Administering_Project/index-katello.html#Importing_the_Katello_Root_CA_Certificate_admin">Importing the Katello Root CA Certificate</a> in <em>Administering Foreman</em>.</p>
</li>
<li>
<p>An Organization Debug Certificate.
For more information, see <a href="https://docs.theforeman.org/3.9/Managing_Organizations_and_Locations/index-katello.html#Creating_an_Organization_Debug_Certificate_managing-organizations-locations">Creating an Organization Debug Certificate</a> in <em>Managing organizations and locations in Foreman</em>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Select a product by name.</p>
</li>
<li>
<p>Select a Python type repository by name.</p>
</li>
<li>
<p>Optional: Select the <strong>Unprotected</strong> checkbox to access the repository published through HTTP.</p>
</li>
<li>
<p>Copy the <strong>Published At</strong> URL.</p>
</li>
<li>
<p>On your client, download the file from Foreman&#160;server:</p>
<div class="ulist">
<ul>
<li>
<p>For HTTPS:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl \
--cacert <em>./_katello-server-ca.crt</em> \
--cert <em>./_My_Organization_key-cert.pem</em> \
--remote-name \
https://<em>foreman.example.com</em>/pulp/content/<em>My_Organization_Label</em>/Library/custom/<em>My_Product_Label</em>/<em>My_Repository_Label</em>/<em>My_File</em></pre>
</div>
</div>
</li>
<li>
<p>For HTTP:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl \
--remote-name \
http://<em>foreman.example.com</em>/pulp/content/<em>My_Organization_Label</em>/Library/custom/<em>My_Product_Label</em>/<em>My_Repository_Label</em>/<em>My_File</em></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>List all <code>file</code> type repositories:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository list --content-type python</pre>
</div>
</div>
</li>
<li>
<p>View the repository information:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer repository info \
--name "<em>My_Python_Repository</em>" \
--organization-id <em>My_Organization_ID</em> \
--product "<em>My</em>{customproductid}_"</pre>
</div>
</div>
</li>
<li>
<p>On your client, download the file from Foreman&#160;server:</p>
<div class="ulist">
<ul>
<li>
<p>For HTTPS:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl \
--cacert <em>./_katello-server-ca.crt</em> \
--cert <em>./_My_Organization_key-cert.pem</em> \
--remote-name \
https://<em>foreman.example.com</em>/pulp/content/<em>My_Organization_Label</em>/Library/custom/<em>My_Product_Label</em>/<em>My_Repository_Label</em>/<em>My_File</em></pre>
</div>
</div>
</li>
<li>
<p>For HTTP:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># curl \
--remote-name \
http://<em>foreman.example.com</em>/pulp/content/<em>My_Organization_Label</em>/Library/custom/<em>My_Product_Label</em>/<em>My_Repository_Label</em>/<em>My_File</em></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Using_an_NFS_Share_for_Content_Storage_content-management"><a class="anchor" href="#Using_an_NFS_Share_for_Content_Storage_content-management"></a>Appendix A: Using an NFS share for content storage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Your environment requires adequate hard disk space to fulfill content storage.
In some situations, it is useful to use an NFS share to store this content.
This appendix shows how to mount the NFS share on your Foreman&#160;server&#8217;s content management component.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
Use high-bandwidth, low-latency storage for the <code>/var/lib/pulp</code> file system.
Foreman has many I/O-intensive operations; therefore, high-latency, low-bandwidth storage might have issues with performance degradation.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create the NFS share.
This example uses a share at <code>nfs.example.com:/Foreman/pulp</code>.
Ensure this share provides the appropriate permissions to Foreman&#160;server and its <code>apache</code> user.</p>
</li>
<li>
<p>Stop Foreman services on your Foreman&#160;server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain service stop</pre>
</div>
</div>
</li>
<li>
<p>Ensure Foreman&#160;server has the <code>nfs-utils</code> package installed:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf install nfs-utils</pre>
</div>
</div>
</li>
<li>
<p>You need to copy the existing contents of <code>/var/lib/pulp</code> to the NFS share.
First, mount the NFS share to a temporary location:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir /mnt/temp
# mount -o rw nfs.example.com:/Foreman/pulp /mnt/temp</pre>
</div>
</div>
<div class="paragraph">
<p>Copy the existing contents of <code>/var/lib/pulp</code> to the temporary location:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># cp -r /var/lib/pulp/* /mnt/temp/.</pre>
</div>
</div>
</li>
<li>
<p>Set the permissions for all files on the share to use the <code>pulp</code> user.</p>
</li>
<li>
<p>Unmount the temporary storage location:</p>
<div class="listingblock">
<div class="content">
<pre># umount /mnt/temp</pre>
</div>
</div>
</li>
<li>
<p>Remove the existing contents of <code>/var/lib/pulp</code>:</p>
<div class="listingblock">
<div class="content">
<pre># rm -rf /var/lib/pulp/*</pre>
</div>
</div>
</li>
<li>
<p>Edit the <code>/etc/fstab</code> file and add the following line:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">nfs.example.com:/Foreman/pulp    /var/lib/pulp   nfs    rw,hard,intr,context="system_u:object_r:pulpcore_var_lib_t:s0"</pre>
</div>
</div>
<div class="paragraph">
<p>This makes the mount persistent across system reboots.
Ensure to include the SELinux context.</p>
</div>
</li>
<li>
<p>Enable the mount:</p>
<div class="listingblock">
<div class="content">
<pre># mount -a</pre>
</div>
</div>
</li>
<li>
<p>Confirm the NFS share mounts to <code>var/lib/pulp</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># df
Filesystem                         1K-blocks     Used Available Use% Mounted on
...
nfs.example.com:/Foreman/pulp 309506048 58632800 235128224  20% /var/lib/pulp
...</pre>
</div>
</div>
<div class="paragraph">
<p>Also confirm that the existing content exists at the mount on <code>var/lib/pulp</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># ls /var/lib/pulp</pre>
</div>
</div>
</li>
<li>
<p>Start Foreman services on your Foreman&#160;server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain service start</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Foreman&#160;server now uses the NFS share to store content.
Run a content synchronization to ensure the NFS share works as expected.
For more information, see <a href="#Synchronizing_Repositories_content-management">Synchronizing repositories</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Configuring-ISS_content-management"><a class="anchor" href="#Configuring-ISS_content-management"></a>Appendix B: Configuring Inter-Server Synchronization (ISS)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="iss-scenarios_content-management"><a class="anchor" href="#iss-scenarios_content-management"></a>B.1. Inter-Server Synchronization scenarios</h3>
<div class="paragraph">
<p>Foreman uses Inter-Server Synchronization (ISS) to synchronize content between two Foreman&#160;servers including those that are air gapped.</p>
</div>
<div class="paragraph">
<p>You can use ISS in cases such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If you want to copy some but not all content from your Foreman&#160;server to other Foreman&#160;servers.
For example, you have content views that your IT department consumes from Foreman&#160;server, and you want to copy content from those content views to other Foreman&#160;servers.</p>
</li>
<li>
<p>If you want to copy all Library content from your Foreman&#160;server to other Foreman&#160;servers.
For example, you have Products and repositories that your IT department consumes from Foreman&#160;server in the Library, and you want to copy all Products and repositories in that organization to other Foreman&#160;servers.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>You cannot use ISS to synchronize content from Foreman&#160;server to Smart&#160;Proxy&#160;server.
Smart&#160;Proxy&#160;server supports synchronization natively.
For more information, see <a href="https://docs.theforeman.org/3.9/Planning_for_Project/index-katello.html#chap-Documentation-Architecture_Guide-Capsule_Server_Overview">Smart&#160;Proxy&#160;server Overview</a> in <em>Planning for Foreman</em>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There are different ways of using ISS.
The way you can use depends on your multi-server setup that can fall to one of the following scenarios.</p>
</div>
<div class="sect3">
<h4 id="_iss_network_sync_in_a_disconnected_scenario"><a class="anchor" href="#_iss_network_sync_in_a_disconnected_scenario"></a>B.1.1. ISS network sync in a disconnected scenario</h4>
<div class="paragraph">
<p>In a disconnected scenario, there is the following setup:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The upstream Foreman&#160;server is connected to the Internet.
This server consumes content from the Red Hat Content Delivery Network (CDN) or custom sources.</p>
</li>
<li>
<p>The downstream Foreman&#160;server is completely isolated from all external networks.</p>
</li>
<li>
<p>The downstream Foreman&#160;server can communicate with a connected upstream Foreman&#160;server over an internal network.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/common/iss-disconnected.png" alt="Foreman ISS disconnected scenario">
</div>
<div class="title">Figure 2. Foreman ISS disconnected scenario</div>
</div>
<div class="paragraph">
<p>You can configure your downstream Foreman&#160;server to synchronize content from the upstream Foreman&#160;server over the network.</p>
</div>
</div>
<div class="sect3">
<h4 id="_iss_export_sync_in_an_air_gapped_scenario"><a class="anchor" href="#_iss_export_sync_in_an_air_gapped_scenario"></a>B.1.2. ISS export sync in an air-gapped scenario</h4>
<div class="paragraph">
<p>In an air-gapped scenario, there is the following setup:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The upstream Foreman&#160;server is connected to the Internet.
This server consumes content from the Red Hat CDN or custom sources.</p>
</li>
<li>
<p>The downstream Foreman&#160;server is completely isolated from all external networks.</p>
</li>
<li>
<p>The downstream Foreman&#160;server does not have a network connection to a connected upstream Foreman&#160;server.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/common/iss-airgapped.png" alt="The Foreman ISS air-gapped scenario">
</div>
<div class="title">Figure 3. Foreman ISS air-gapped scenario</div>
</div>
<div class="paragraph">
<p>The only way for an air-gapped downstream Foreman&#160;server to receive content updates is by exporting payload from the upstream Foreman&#160;server, bringing it physically to the downstream Foreman&#160;server, and importing the payload.
For more information, see <a href="https://docs.theforeman.org/3.9/Managing_Content/index-katello.html#Synchronizing_Content_Between_Servers_content-management">Synchronizing Content Between Foreman&#160;servers</a> in <em>Managing content</em>.</p>
</div>
<div class="paragraph">
<p>You can configure your downstream Foreman&#160;server to synchronize content by using exports.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuring-projectserver-to-synchronize-content-by-using-exports_content-management"><a class="anchor" href="#configuring-projectserver-to-synchronize-content-by-using-exports_content-management"></a>B.2. Configuring Foreman&#160;server to synchronize content by using exports</h3>
<div class="paragraph">
<p>If you deployed your downstream Foreman&#160;server as air gapped, configure your Foreman&#160;server as such to avoid attempts to consume content from a network.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Subscriptions</strong>.</p>
</li>
<li>
<p>Click <strong>Manage Manifest</strong>.</p>
</li>
<li>
<p>Switch to the <strong>CDN Configuration</strong> tab.</p>
</li>
<li>
<p>Select the <strong>Export Sync</strong> tab.</p>
</li>
<li>
<p>Click <strong>Update</strong>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Log in to your Foreman&#160;server by using SSH.</p>
</li>
<li>
<p>Set CDN configuration to sync by using exports:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer organization configure-cdn --name="<em>My_Organization</em>" --type=export_sync</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="configuring-server-to-synchronize-content-over-a-network_content-management"><a class="anchor" href="#configuring-server-to-synchronize-content-over-a-network_content-management"></a>B.3. Configuring Foreman&#160;server to synchronize content over a network</h3>
<div class="paragraph">
<p>Configure a downstream Foreman&#160;server to synchronize repositories from a connected upstream Foreman&#160;server over HTTPS.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>A network connection exists between the upstream Foreman&#160;server and the downstream Foreman&#160;server.</p>
</li>
<li>
<p>You imported the same subscription manifest on both the upstream and downstream Foreman&#160;server.
For more information, see <a href="#Importing_a_Red_Hat_Subscription_Manifest_into_Server_content-management">Importing a Red&#160;Hat subscription manifest into Foreman&#160;server</a>.</p>
</li>
<li>
<p>On the upstream Foreman&#160;server, you enabled the required repositories for the organization.
For more information, see <a href="https://docs.theforeman.org/3.9/Managing_Content/index-katello.html#Enabling_Red_Hat_Repositories_content-management">Enabling Red Hat Repositories</a> in <em>Managing content</em>.</p>
</li>
<li>
<p>The upstream user is an admin or has the following permissions:</p>
<div class="ulist">
<ul>
<li>
<p><code>view_organizations</code></p>
</li>
<li>
<p><code>view_products</code></p>
</li>
<li>
<p><code>export_content</code></p>
</li>
<li>
<p><code>view_lifecycle_environments</code></p>
</li>
<li>
<p><code>view_content_views</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>On the downstream Foreman&#160;server, you have imported the SSL certificate of the upstream Foreman&#160;server using the contents of <code>http://<em>upstream-foreman.example.com</em>/pub/katello-server-ca.crt</code>.
For more information, see <a href="https://docs.theforeman.org/3.9/Managing_Content/index-katello.html#Importing_Custom_SSL_Certificates_content-management">Importing SSL Certificates</a> in <em>Managing content</em>.</p>
</li>
<li>
<p>The downstream user is an admin or has the permissions to create product repositories and organizations.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Navigate to <strong>Content</strong> &gt; <strong>Subscriptions</strong>.</p>
</li>
<li>
<p>Click <strong>Manage Manifest</strong>.</p>
</li>
<li>
<p>Navigate to the <strong>CDN Configuration</strong> tab.</p>
</li>
<li>
<p>Select the <strong>Network Sync</strong> tab.</p>
</li>
<li>
<p>In the <strong>URL</strong> field, enter the address of the upstream Foreman&#160;server.</p>
</li>
<li>
<p>In the <strong>Username</strong>, enter your username for upstream login.</p>
</li>
<li>
<p>In the <strong>Password</strong>, enter your password or personal access token for upstream login.</p>
</li>
<li>
<p>In the <strong>Organization label</strong> field, enter the label of the upstream organization.</p>
</li>
<li>
<p>Optional: In the <strong>Lifecycle Environment Label</strong> field, enter the label of the upstream lifecycle environment.
Default is <code>Library</code>.</p>
</li>
<li>
<p>Optional: In the <strong>Content view label</strong> field, enter the label of the upstream content view.
Default is <code>Default_Organization_View</code>.</p>
</li>
<li>
<p>From the <strong>SSL CA Content Credential</strong> menu, select a CA certificate used by the upstream Foreman&#160;server.</p>
</li>
<li>
<p>Click <strong>Update</strong>.</p>
</li>
<li>
<p>In the Foreman web UI, navigate to <strong>Content</strong> &gt; <strong>Products</strong>.</p>
</li>
<li>
<p>Select the product that contains the repositories that you want to synchronize.</p>
</li>
<li>
<p>From the <strong>Select Action</strong> menu, select <strong>Sync Now</strong> to synchronize all repositories within the product.</p>
<div class="paragraph">
<p>You can also create a synchronization plan to ensure updates on a regular basis.
For more information, see <a href="https://docs.theforeman.org/3.9/Managing_Content/index-katello.html#Creating_a_Sync_Plan_content-management">Creating a Synchronization Plan</a> in <em>Managing content</em>.</p>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">CLI procedure</div>
<ol class="arabic">
<li>
<p>Connect to your downstream Foreman&#160;server using SSH.</p>
</li>
<li>
<p>View information about the upstream CA certificate:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer content-credential show \
--name="<em>My_Upstream_CA_Cert</em>" \
--organization="<em>My_Downstream_Organization</em>"</pre>
</div>
</div>
<div class="paragraph">
<p>Note the ID of the CA certificate for the next step.</p>
</div>
</li>
<li>
<p>Set CDN configuration to an upstream Foreman&#160;server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># hammer organization configure-cdn --name="<em>My_Downstream_Organization</em>" \
--type=network_sync \
--url https://<em>upstream-foreman.example.com</em> \
--username <em>upstream_username</em> --password <em>upstream_password</em> \
--ssl-ca-credential-id "<em>My_Upstream_CA_Cert_ID" \
--upstream-organization-label="_My_Upstream_Organization</em>" \
[--upstream-lifecycle-environment-label="<em>My_Lifecycle_Environment</em>"] \
[--upstream-content-view-label="<em>My_Content_View</em>"]</pre>
</div>
</div>
<div class="paragraph">
<p>The default lifecycle environment label is <code>Library</code>.
The default content view label is <code>Default_Organization_View</code>.</p>
</div>
</li>
</ol>
</div>
<!-- "Fork me on GitHub" CSS ribbon v0.2.3 | MIT License -->
<!-- https://github.com/simonwhitaker/github-fork-ribbon-css -->
<a class="release-ribbon right-top fixed" href="https://docs.theforeman.org" data-ribbon="Unsupported version" title="Unsupported version">
Unsupported version
</a>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 3.9 (unsupported)<br>
Last updated Oct 2025
</div>
</div>
</body>
</html>