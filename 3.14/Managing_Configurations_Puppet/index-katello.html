<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.25">
<title>Configuring hosts by using Puppet</title>
<style>
﻿*,::before,::after{box-sizing:border-box}html{font-size:100%;-webkit-text-size-adjust:100%}body{background:#fff;color:rgba(0,0,0,0.8);padding:0;margin:0;font-family:"Noto Serif", "DejaVu Serif", serif;font-size:inherit;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,p,blockquote,th,td{margin:0;padding:0}a{background:none;color:#2156a5;text-decoration:underline;line-height:inherit}a:active,a:hover{cursor:pointer;outline:0}a:focus{outline:thin dotted}a:hover,a:focus{color:#1d4b8f}abbr{font-size:0.9em}abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}b,strong{font-weight:bold;line-height:inherit}strong strong{font-weight:400}code,kbd,pre{font-family:"Droid Sans Mono", "DejaVu Sans Mono", monospace;font-size:1em}code{font-weight:400;color:rgba(0,0,0,0.9)}pre{color:rgba(0,0,0,0.9);line-height:1.45;text-rendering:optimizeSpeed;white-space:pre-wrap}dfn{font-style:italic}em,i{font-style:italic;line-height:inherit}em em{font-style:normal}hr{border:solid #dddddf;border-width:1px 0 0;clear:both;height:0;margin:1.25em 0 1.1875em}mark{background:#ff0;color:#000}p{line-height:1.6;margin-bottom:1.25rem;text-rendering:optimizeLegibility}q{quotes:"“" "”" "‘" "’"}small{font-size:60%;line-height:inherit}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-0.5em}sub{bottom:-0.25em}img,object[type^="image/"],svg{display:inline-block;height:auto;max-width:100%;vertical-align:middle}img{border:0;-ms-interpolation-mode:bicubic}object{max-width:100%}svg:not(:root){overflow:hidden}figure{margin:0}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}.left{float:left !important}.right{float:right !important}.text-left{text-align:left !important}.text-right{text-align:right !important}.text-center{text-align:center !important}.text-justify{text-align:justify !important}.hide{display:none}.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:0.25em}p aside{font-size:.875em;line-height:1.35;font-style:italic}h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans", "DejaVu Sans", sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.2;word-spacing:-0.05em}h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{color:#e99b8f;line-height:0}h1{font-size:2.125em}h2{font-size:1.6875em}h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}h4,h5{font-size:1.125em}h6{font-size:1em}ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}ul,ol{margin-left:1.5em}ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}ul.square{list-style-type:square}ul.circle{list-style-type:circle}ul.disc{list-style-type:disc}ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}dl dt{margin-bottom:.3125em;font-weight:bold}dl dd{margin-bottom:1.25em;margin-left:1.125em}blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,0.85)}@media screen and (min-width: 768px){h1{font-size:2.75em}h2{font-size:2.3125em}h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}h4{font-size:1.4375em}}table{background:#fff;border:1px solid #dedede;border-collapse:collapse;border-spacing:0;margin-bottom:1.25em;word-wrap:normal}table thead,table tfoot{background:#f7f8f7}table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,0.8);text-align:left}table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,0.8)}table tr.even,table tr.alt{background:#f8f8f7}table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}.center{margin-left:auto;margin-right:auto}.stretch{width:100%}.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:"";display:table}.clearfix::after,.float-group::after{clear:both}:not(pre).nobreak{word-wrap:normal}:not(pre).nowrap{white-space:nowrap}:not(pre).pre-wrap{white-space:pre-wrap}:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal !important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}pre>code{display:block}pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}.keyseq{color:rgba(51,51,51,0.8)}kbd{display:inline-block;color:rgba(0,0,0,0.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,0.2),inset 0 0 0 0.1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}.keyseq kbd:first-child{margin-left:0}.keyseq kbd:last-child{margin-right:0}.menuseq,.menuref{color:#000}.menuseq b:not(.caret),.menuref{font-weight:inherit}.menuseq{word-spacing:-0.02em}.menuseq b.caret{font-size:1.25em;line-height:0.8}.menuseq i.caret{font-weight:bold;text-align:center;width:0.45em}b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}b.button::before{content:"[";padding:0 3px 0 2px}b.button::after{content:"]";padding:0 2px 0 3px}p a>code:hover{color:rgba(0,0,0,0.9)}body>div[id]{margin:0 auto;max-width:62.5em;position:relative;padding-left:.9375em;padding-right:0.9375em}body>div[id]::before,body>div[id]::after,#content #footnotes::before{content:"";display:table;clear:both}#content{margin-top:1.25em;margin-bottom:0.625em}#content::before{content:none}#header>h1:first-child{color:rgba(0,0,0,0.85);margin-top:2.25rem;margin-bottom:0}#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,0.6);display:flex;flex-flow:row wrap}#header .details span:first-child{margin-left:-0.125em}#header .details span.email a{color:rgba(0,0,0,0.85)}#header .details br{display:none}#header .details br+span::before{content:" – "}#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,0.85)}#header .details br+span#revremark::before{content:" | "}#header #revnumber{text-transform:capitalize}#header #revnumber::after{content:" "}#content>h1:first-child:not([class]){color:rgba(0,0,0,0.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}#toc{border-bottom:1px solid #e7e7e9;padding-bottom:0.5em}#toc>ul{margin-left:0.125em}#toc ul.sectlevel0>li>a{font-style:italic}#toc ul.sectlevel0 ul.sectlevel1{margin:0.5em 0}#toc ul{font-family:"Open Sans", "DejaVu Sans", sans-serif;list-style-type:none}#toc li{line-height:1.3334;margin-top:0.3334em}#toc a{text-decoration:none}#toc a:active{text-decoration:underline}#toctitle{color:#7a2518;font-size:1.2em}@media screen and (min-width: 768px){#toctitle{font-size:1.375em}body.toc2{padding-left:15em;padding-right:0}#toc.toc2{margin-top:0 !important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0 !important;border-bottom-width:0 !important;z-index:1000;padding:1.25em 1em;height:calc(100% - (70px + 2.5em));overflow:auto}#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}#toc.toc2>ul{font-size:.9em;margin-bottom:0}#toc.toc2 ul ul{margin-left:0;padding-left:1em}#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:0.5em}body.toc2.toc-right{padding-left:0;padding-right:15em}body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}@media screen and (min-width: 1280px){body.toc2{padding-left:20em;padding-right:0}#toc.toc2{width:20em}#toc.toc2 #toctitle{font-size:1.375em}#toc.toc2>ul{font-size:0.95em}#toc.toc2 ul ul{padding-left:1.25em}body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}#content #toc>:first-child{margin-top:0}#content #toc>:last-child{margin-bottom:0}#footer{max-width:none;background:#025d8c;padding:1.25em;margin-left:2em}#footer-text{color:rgba(255,255,255,0.8);line-height:1.44}h1:before,h2:before,h3:before,h4:before,h5:before,h6:before,div.title:before{display:block;content:" ";height:90px;margin-top:-90px;visibility:hidden}.sect1{padding-bottom:0.625em}@media screen and (min-width: 768px){#content{margin-bottom:1.25em}.sect1{padding-bottom:1.25em}}.sect1:last-child{padding-bottom:0}.sect1+.sect1{border-top:1px solid #e7e7e9}#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none !important;visibility:hidden;text-align:center;font-weight:400}#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:0.1em}#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}details{margin-left:1.25rem}details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}details>summary::-webkit-details-marker{display:none}details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif", "DejaVu Serif", serif;font-size:1rem;font-style:italic}table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,0.85)}.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}.admonitionblock>table td.icon{text-align:center;width:80px}.admonitionblock>table td.icon img{max-width:none}.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans", "DejaVu Sans", sans-serif;text-transform:uppercase}.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,0.6);word-wrap:anywhere}.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}.exampleblock>.content{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#fffef7;border-radius:4px;box-shadow:0 1px 4px #e0e0dc}.exampleblock>.content>:first-child{margin-top:0}.exampleblock>.content>:last-child{margin-bottom:0}.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}.sidebarblock>:first-child{margin-top:0}.sidebarblock>:last-child{margin-bottom:0}.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:0.8125em}@media screen and (min-width: 768px){.literalblock pre,.listingblock>.content>pre{font-size:0.90625em}}@media screen and (min-width: 1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,0.9)}.listingblock>.content{position:relative}.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:0.5}.listingblock:hover code[data-lang]::before{display:block}.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:0.5}.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}.listingblock pre.highlightjs{padding:0}.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}.listingblock pre.prettyprint{border-width:0}.prettyprint{background:#f7f7f8}pre.prettyprint .linenums{line-height:1.45;margin-left:2em}pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}pre.prettyprint li code[data-lang]::before{opacity:1}pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}table.linenotable td.code{padding-left:0.75em}table.linenotable td.linenos{width:0.01%}table.linenotable td.linenos,pre.pygments .linenos,pre.rouge .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}pre.pygments span.linenos,pre.rouge span.linenos{display:inline-block;margin-right:0.75em}.quoteblock{margin:0 1em 1.25em 1.5em;display:table}.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:0.75em}.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,0.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}.quoteblock blockquote{margin:0;padding:0;border:0}.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,0.1)}.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}.verseblock{margin:0 1em 1.25em}.verseblock pre{font-family:"Open Sans", "DejaVu Sans", sans-serif;font-size:1.15rem;color:rgba(0,0,0,0.85);font-weight:300;text-rendering:optimizeLegibility}.verseblock pre strong{font-weight:400}.verseblock .attribution{margin-top:1.25rem;margin-left:0.5ex}.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}.quoteblock .attribution br,.verseblock .attribution br{display:none}.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,0.6)}.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}.quoteblock.abstract{margin:0 1em 1.25em;display:block}.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:0.25em solid #dddddf}.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}p.tableblock:last-child{margin-bottom:0}td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}td.tableblock>.content>:last-child{margin-bottom:-1.25em}table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}table.grid-all>*>tr>*{border-width:1px}table.grid-cols>*>tr>*{border-width:0 1px}table.grid-rows>*>tr>*{border-width:1px 0}table.frame-all{border-width:1px}table.frame-ends{border-width:1px 0}table.frame-sides{border-width:0 1px}table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}th.halign-left,td.halign-left{text-align:left}th.halign-right,td.halign-right{text-align:right}th.halign-center,td.halign-center{text-align:center}th.valign-top,td.valign-top{vertical-align:top}th.valign-bottom,td.valign-bottom{vertical-align:bottom}th.valign-middle,td.valign-middle{vertical-align:middle}table thead th,table tfoot th{font-weight:bold}tbody tr th{background:#f7f8f7}tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,0.8);font-weight:bold}p.tableblock>code:only-child{background:none;padding:0}p.tableblock{font-size:1em}ol{margin-left:1.75em}ul li ol{margin-left:1.5em}dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:0.625em}ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:0.625em}ul.unstyled,ol.unstyled{margin-left:0}li>p:empty:only-child::before{content:"";display:inline-block}ul.checklist>li>p:first-child{margin-left:-1em}ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:0.125em}ul.checklist>li>p:first-child>input[type=checkbox]:first-child{font:inherit;margin:0 .25em 0 0;padding:0}ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 0.625em -1.25em}ul.inline>li{margin-left:1.25em}.unstyled dl dt{font-weight:400;font-style:normal}ol.arabic{list-style-type:decimal}ol.decimal{list-style-type:decimal-leading-zero}ol.loweralpha{list-style-type:lower-alpha}ol.upperalpha{list-style-type:upper-alpha}ol.lowerroman{list-style-type:lower-roman}ol.upperroman{list-style-type:upper-roman}ol.lowergreek{list-style-type:lower-greek}.hdlist>table,.colist>table{border:0;background:none}.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}td.hdlist1,td.hdlist2{vertical-align:top;padding:0 0.625em}td.hdlist1{font-weight:bold;padding-bottom:1.25em}td.hdlist2{word-wrap:anywhere}.literalblock+.colist,.listingblock+.colist{margin-top:-0.5em}.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}.colist td:not([class]):first-child img{max-width:none}.colist td:not([class]):last-child{padding:0.25em 0}.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}.imageblock.left{margin:0.25em 0.625em 1.25em 0}.imageblock.right{margin:0.25em 0 1.25em 0.625em}.imageblock>.title{margin-bottom:0}.imageblock.thumb,.imageblock.th{border-width:6px}.imageblock.thumb>.title,.imageblock.th>.title{padding:0 0.125em}.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}.image.left{margin-right:0.625em}.image.right{margin-left:0.625em}a.image{text-decoration:none;display:inline-block}a.image object{pointer-events:none}sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}sup.footnote a,sup.footnoteref a{text-decoration:none}sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:0.625em}#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:0.2em}#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}#footnotes .footnote:last-of-type{margin-bottom:0}#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:0.75em 0}div.page-break{display:none}div.unbreakable{page-break-inside:avoid}.big{font-size:larger}.small{font-size:smaller}.underline{text-decoration:underline}.overline{text-decoration:overline}.line-through{text-decoration:line-through}.aqua{color:#00bfbf}.aqua-background{background:#00fafa}.black{color:#000}.black-background{background:#000}.blue{color:#0000bf}.blue-background{background:#0000fa}.fuchsia{color:#bf00bf}.fuchsia-background{background:#fa00fa}.gray{color:#606060}.gray-background{background:#7d7d7d}.green{color:#006000}.green-background{background:#007d00}.lime{color:#00bf00}.lime-background{background:#00fa00}.maroon{color:#600000}.maroon-background{background:#7d0000}.navy{color:#000060}.navy-background{background:#00007d}.olive{color:#606000}.olive-background{background:#7d7d00}.purple{color:#600060}.purple-background{background:#7d007d}.red{color:#bf0000}.red-background{background:#fa0000}.silver{color:#909090}.silver-background{background:#bcbcbc}.teal{color:#006060}.teal-background{background:#007d7d}.white{color:#bfbfbf}.white-background{background:#fafafa}.yellow{color:#bfbf00}.yellow-background{background:#fafa00}span.icon>.fa{cursor:default}a span.icon>.fa{cursor:inherit}.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,0.5);cursor:default}.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,0.8);color:#111}.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}.conum[data-value]{display:inline-block;color:#fff !important;background:rgba(0,0,0,0.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans", "DejaVu Sans", sans-serif;font-style:normal;font-weight:bold}.conum[data-value] *{color:#fff !important}.conum[data-value]+b{display:none}.conum[data-value]::after{content:attr(data-value)}pre .conum[data-value]{position:relative;top:-0.125em}b.conum *{color:inherit !important}.conum:not([data-value]):empty{display:none}dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}h1,h2,p,td.content,span.alt,summary{letter-spacing:-0.01em}p strong,td.content strong,div.footnote strong{letter-spacing:-0.005em}p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}.print-only{display:none !important}@page{margin:1.25cm 0.75cm}@media print{*{box-shadow:none !important;text-shadow:none !important}html{font-size:80%}a{color:inherit !important;text-decoration:underline !important}a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none !important}a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:0.25em}abbr[title]{border-bottom:1px dotted}abbr[title]::after{content:" (" attr(title) ")"}pre,blockquote,tr,img,object,svg{page-break-inside:avoid}thead{display:table-header-group}p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}body>div[id]{max-width:none}#toc,.sidebarblock,.exampleblock>.content{background:none !important}#toc{border-bottom:1px solid #dddddf !important;padding-bottom:0 !important}body.book #header{text-align:center}body.book #header>h1:first-child{border:0 !important;margin:2.5em 0 1em}body.book #header .details{border:0 !important;display:block;padding:0 !important}body.book #header .details span:first-child{margin-left:0 !important}body.book #header .details br{display:block}body.book #header .details br+span::before{content:none !important}body.book #toc{border:0 !important;text-align:left !important;padding:0 !important;margin:0 !important}body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}.listingblock code[data-lang]::before{display:block}div.page-break{display:block;page-break-after:always}#footer{padding:0 0.9375em}.hide-on-print{display:none !important}.print-only{display:block !important}.hide-for-print{display:none !important}.show-for-print{display:inherit !important}}@media amzn-kf8, print{#header>h1:first-child{margin-top:1.25rem}.sect1{padding:0 !important}.sect1+.sect1{border:0}#footer{background:none}#footer-text{color:rgba(0,0,0,0.6);font-size:0.9em}}@media amzn-kf8{body>div[id]{padding:0}}body{padding:0;margin:0;margin-top:70px !important}.container{position:relative;z-index:1;padding-top:50px;min-height:100%}.container p{font-family:sans-serif;font-size:1.2em}nav{position:fixed;z-index:9999;left:0;right:0;top:0;height:70px;padding:0 1.5em;background-color:#025d8c;font-family:sans-serif;line-height:70px}nav .logo{width:50px;vertical-align:middle}nav .nav-menu{position:absolute;right:0.3em;top:0;padding:0;margin:0;list-style:none}nav .nav-item{display:inline-block}nav .nav-item>a{display:inline-block;padding:0 2.5em;line-height:70px;color:#fff;text-decoration:none}nav .dropdown{position:relative}nav .dropdown a::after{content:"";display:inline-block;margin-left:0.5em;vertical-align:middle;border-top:0.3em solid #fff;border-right:0.3em solid transparent;border-left:0.3em solid transparent}nav .dropdown.show a::after{transform:rotate(180deg)}nav .dropdown-menu{display:none;position:absolute;left:0;right:0;top:100%;padding:0.5em 0;margin-top:-0.5em;border:1px solid rgba(0,0,0,0.3);border-radius:0.5em;background-color:#fff;width:max-content;max-height:80vh;overflow:scroll}nav .dropdown-menu-left{left:auto;right:0}nav .dropdown.show .dropdown-menu{display:block}nav .dropdown-div{display:block;padding:0.4em 0;line-height:4em}nav .dropdown-div a::after{content:none;margin-left:0;border-top:0;border-right:0;border-left:0}nav .dropdown-item{display:block;padding:0 1.5em;font-size:0.875em;color:#000;line-height:1.6em;text-decoration:none}nav .btn-hamburger{display:none;position:absolute;right:1.5em;top:50%;background-color:transparent;border:0;cursor:pointer;outline:none;transform:translateY(-50%)}nav .btn-hamburger span{display:block;width:30px;height:4px;background-color:#fff;margin:6px;border-radius:2px;transition:0.3s ease-in-out}nav .btn-hamburger span:nth-child(4),nav .btn-hamburger span:nth-child(5){position:absolute;top:10px;opacity:0.5}nav .btn-hamburger span:nth-child(4){transform:rotate(45deg) scale(0)}nav .btn-hamburger span:nth-child(5){transform:rotate(-45deg) scale(0)}nav.opened .btn-hamburger span:nth-child(4){opacity:1;transform:rotate(45deg) scale(1)}nav.opened .btn-hamburger span:nth-child(5){opacity:1;transform:rotate(-45deg) scale(1)}nav.opened .btn-hamburger span:nth-child(1),nav.opened .btn-hamburger span:nth-child(2),nav.opened .btn-hamburger span:nth-child(3){opacity:0}@media screen and (max-width: 768px){nav .nav-menu{position:fixed;left:0;right:0;top:70px;bottom:100%;display:flex;flex-direction:column;justify-content:start;background-color:#363d4e;transition:bottom 0.5s ease-in-out;overflow:hidden}nav.opened .nav-menu{bottom:0}nav .nav-item>a{display:block}nav .dropdown-menu{position:relative;top:0;margin:0 1.5em}nav .btn-hamburger{display:block}}/*!
* "Fork me on GitHub" CSS ribbon v0.2.3 | MIT License
* https://github.com/simonwhitaker/github-fork-ribbon-css

The MIT License (MIT)

Copyright (c) 2013 Simon Whitaker

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/.github-fork-ribbon,.release-ribbon,.issue-ribbon{width:12.1em;height:12.1em;position:absolute;overflow:hidden;top:70px;right:0;z-index:9998;pointer-events:none;font-size:13px;text-decoration:none;text-indent:-999999px}.github-fork-ribbon.fixed,.fixed.release-ribbon,.fixed.issue-ribbon{position:fixed}.github-fork-ribbon:hover,.release-ribbon:hover,.issue-ribbon:hover,.github-fork-ribbon:active,.release-ribbon:active,.issue-ribbon:active{background-color:transparent}.github-fork-ribbon:before,.release-ribbon:before,.issue-ribbon:before,.github-fork-ribbon:after,.release-ribbon:after,.issue-ribbon:after{position:absolute;display:block;width:15.38em;height:1.54em;top:3.23em;right:-3.23em;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.github-fork-ribbon:before,.release-ribbon:before,.issue-ribbon:before{content:"";padding:.38em 0;background-color:#a00;background-image:-webkit-gradient(linear, left top, left bottom, from(transparent), to(rgba(0,0,0,0.15)));background-image:-webkit-linear-gradient(top, transparent, rgba(0,0,0,0.15));background-image:-moz-linear-gradient(top, transparent, rgba(0,0,0,0.15));background-image:-ms-linear-gradient(top, transparent, rgba(0,0,0,0.15));background-image:-o-linear-gradient(top, transparent, rgba(0,0,0,0.15));background-image:linear-gradient(to bottom, transparent, rgba(0,0,0,0.15));-webkit-box-shadow:0 0.15em 0.23em 0 rgba(0,0,0,0.5);-moz-box-shadow:0 0.15em 0.23em 0 rgba(0,0,0,0.5);box-shadow:0 0.15em 0.23em 0 rgba(0,0,0,0.5);pointer-events:auto}.github-fork-ribbon:after,.release-ribbon:after,.issue-ribbon:after{content:attr(data-ribbon);color:#fff;font:700 1em "Helvetica Neue", Helvetica, Arial, sans-serif;line-height:1.54em;text-decoration:none;text-shadow:0 -0.08em rgba(0,0,0,0.5);text-align:center;text-indent:0;padding:.15em 0;margin:.15em 0;border-width:.08em 0;border-style:dotted;border-color:#fff;border-color:rgba(255,255,255,0.7)}.github-fork-ribbon.left-top,.left-top.release-ribbon,.left-top.issue-ribbon,.github-fork-ribbon.left-bottom,.left-bottom.release-ribbon,.left-bottom.issue-ribbon{right:auto;left:0}.github-fork-ribbon.left-bottom,.left-bottom.release-ribbon,.left-bottom.issue-ribbon,.github-fork-ribbon.right-bottom,.right-bottom.release-ribbon,.right-bottom.issue-ribbon{top:auto;bottom:0}.github-fork-ribbon.left-top:before,.left-top.release-ribbon:before,.left-top.issue-ribbon:before,.github-fork-ribbon.left-top:after,.left-top.release-ribbon:after,.left-top.issue-ribbon:after,.github-fork-ribbon.left-bottom:before,.left-bottom.release-ribbon:before,.left-bottom.issue-ribbon:before,.github-fork-ribbon.left-bottom:after,.left-bottom.release-ribbon:after,.left-bottom.issue-ribbon:after{right:auto;left:-3.23em}.github-fork-ribbon.left-bottom:before,.left-bottom.release-ribbon:before,.left-bottom.issue-ribbon:before,.github-fork-ribbon.left-bottom:after,.left-bottom.release-ribbon:after,.left-bottom.issue-ribbon:after,.github-fork-ribbon.right-bottom:before,.right-bottom.release-ribbon:before,.right-bottom.issue-ribbon:before,.github-fork-ribbon.right-bottom:after,.right-bottom.release-ribbon:after,.right-bottom.issue-ribbon:after{top:auto;bottom:3.23em}.github-fork-ribbon.left-top:before,.left-top.release-ribbon:before,.left-top.issue-ribbon:before,.github-fork-ribbon.left-top:after,.left-top.release-ribbon:after,.left-top.issue-ribbon:after,.github-fork-ribbon.right-bottom:before,.right-bottom.release-ribbon:before,.right-bottom.issue-ribbon:before,.github-fork-ribbon.right-bottom:after,.right-bottom.release-ribbon:after,.right-bottom.issue-ribbon:after{-webkit-transform:rotate(-45deg);-moz-transform:rotate(-45deg);-ms-transform:rotate(-45deg);-o-transform:rotate(-45deg);transform:rotate(-45deg)}.release-ribbon:before{background-color:#a00}.issue-ribbon:before{background-color:#025d8c}@media screen{div.narrow{max-width:1080px;margin:0 auto !important;margin-top:70px auto !important;float:none !important}#toc.toc2{margin-top:70px !important}}

</style>
<!-- Generate a nice TOC -->
<script src="/js/jquery-1.11.3.min.js"></script>
<script src="/js/jquery-ui.min.js"></script>
<script src="/js/jquery.tocify.min.js"></script>
<!-- We do not need the tocify CSS because the asciidoc CSS already provides most of what we neeed -->

<style>
.tocify-header {
    /* font-style: italic; */
}

.tocify-subheader {
    font-style: normal;
    font-size: 95%;
}

.tocify ul {
    margin: 0;
 }

.tocify-focus {
    /* background-color: rgba(0, 0, 0, 0.05);*/
}

.tocify-focus > a {
    color: #ba3925;
}
</style>

<script type="text/javascript">
    $(function () {
        // Add a new container for the tocify toc into the existing toc so we can re-use its
        // styling
        $("#toc").append("<div id='generated-toc'></div>");
        $("#generated-toc").tocify({
            extendPage: true,
            context: "#content",
            highlightOnScroll: true,
            hideEffect: "slideUp",
            // Use the IDs that asciidoc already provides so that TOC links and intra-document
            // links are the same. Anything else might confuse users when they create bookmarks.
            hashGenerator: function(text, element) {
                return $(element).attr("id");
            },
            // Smooth scrolling doesn't work properly if we use the asciidoc IDs
            smoothScroll: false,
            // Set to 'none' to use the tocify classes
            theme: "none",
            // Handle book (may contain h1) and article (only h2 deeper)
            selectors: $( "#content" ).has( "h1" ).size() > 0 ? "h1,h2,h3,h4,h5" : "h2,h3,h4,h5",
            ignoreSelector: ".discrete"
        });

        // Switch between static asciidoc toc and dynamic tocify toc based on browser size
        // This is set to match the media selectors in the asciidoc CSS
        // Without this, we keep the dynamic toc even if it is moved from the side to preamble
        // position which will cause odd scrolling behavior
        var handleTocOnResize = function() {
            if ($(document).width() < 768) {
                $("#generated-toc").hide();
                $(".sectlevel0").show();
                $(".sectlevel1").show();
            }
            else {
                $("#generated-toc").show();
                $(".sectlevel0").hide();
                $(".sectlevel1").hide();
            }
        }

        $(window).resize(handleTocOnResize);
        handleTocOnResize();
    });
</script>
<style>
/*! Asciidoctor Tabs | Copyright (c) 2018-present Dan Allen | MIT License */
.tabs {
  margin-bottom: 1.25em;
}

.tablist > ul {
  display: flex;
  flex-wrap: wrap;
  list-style: none;
  margin: 0;
  padding: 0;
}

.tablist > ul li {
  align-items: center;
  background-color: #fff;
  cursor: pointer;
  display: flex;
  font-weight: bold;
  line-height: 1.5;
  padding: 0.25em 1em;
  position: relative;
}

.tablist > ul li:focus-visible {
  outline: none;
}

.tablist.ulist,
.tablist.ulist > ul li {
  margin: 0;
}

.tablist.ulist > ul li + li {
  margin-left: 0.25em;
}

.tabs .tablist li::after {
  content: "";
  display: block;
  height: 1px;
  position: absolute;
  bottom: -1px;
  left: 0;
  right: 0;
}

.tabs.is-loading .tablist li:not(:first-child),
.tabs:not(.is-loading) .tablist li:not(.is-selected) {
  background-color: #f5f5f5;
}

.tabs.is-loading .tablist li:first-child::after,
.tabs:not(.is-loading) .tablist li.is-selected::after {
  background-color: #fff;
}

/*
.tabs:not(.is-loading) .tablist li,
.tabs:not(.is-loading) .tablist li::after {
  transition: background-color 200ms ease-in-out;
}
*/

.tablist > ul p {
  line-height: inherit;
  margin: 0;
}

.tabpanel {
  background-color: #fff;
  padding: 1.25em;
}

.tablist > ul li,
.tabpanel {
  border: 1px solid #dcdcdc;
}

.tablist > ul li {
  border-bottom: 0;
}

.tabs.is-loading .tabpanel + .tabpanel,
.tabs:not(.is-loading) .tabpanel.is-hidden {
  display: none;
}

.tabpanel > :first-child {
  margin-top: 0;
}

/* #content is a signature of the Asciidoctor standalone HTML output */
#content .tabpanel > :last-child,
#content .tabpanel > :last-child > :last-child,
#content .tabpanel > :last-child > :last-child > li:last-child > :last-child {
  margin-bottom: 0;
}

.tablecontainer {
  overflow-x: auto;
}

#content .tablecontainer {
  margin-bottom: 1.25em;
}

#content .tablecontainer > table.tableblock {
  margin-bottom: 0;
}
</style>
</head>
<body class="book toc2 toc-left">
    <div id="wrap">
      <script src="/js/versions.js"></script>
      <script src="/js/nav.js"></script>
      <script>
        document.open();
        document.write(buildNavigation());
        addNavbarListeners();
        document.close();
      </script>
    </div>
<div id="header">
<h1>Configuring hosts by using Puppet</h1>
<div class="details">
<span id="revnumber">version 3.14 (unsupported),</span>
<span id="revdate">published Oct 17 2025</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#introducing-configuration-management-by-using-puppet">1. Introducing configuration management by using Puppet</a>
<ul class="sectlevel2">
<li><a href="#How_Puppet_Integrates_With_Project_managing-configurations-puppet">1.1. How Puppet integrates with Foreman</a></li>
<li><a href="#supported-puppet-versions-and-system-requirements_managing-configurations-puppet">1.2. Supported Puppet versions and system requirements</a></li>
<li><a href="#Enabling_Puppet_Integration_managing-configurations-puppet">1.3. Enabling Puppet integration with Foreman</a></li>
<li><a href="#Installing_and_Configuring_Puppet_Agent_during_Host_Provisioning_managing-configurations-puppet">1.4. Installing and configuring Puppet agent during host provisioning</a></li>
<li><a href="#installing-and-configuring-puppet-agent-during-host-registration_managing-configurations-puppet">1.5. Installing and configuring Puppet agent during host registration</a></li>
<li><a href="#Installing_and_Configuring_Puppet_Agent_Manually_managing-configurations-puppet">1.6. Installing and configuring Puppet agent manually</a></li>
<li><a href="#performing-configuration-management_managing-configurations-puppet">1.7. Performing configuration management</a></li>
<li><a href="#Disabling_Puppet_Integration_managing-configurations-puppet">1.8. Disabling Puppet integration with Foreman</a></li>
</ul>
</li>
<li><a href="#managing-puppet-modules_managing-configurations-puppet">2. Managing Puppet modules</a>
<ul class="sectlevel2">
<li><a href="#installing_a_puppet_module_managing-configurations-puppet">2.1. Installing a Puppet module on Foreman server</a></li>
<li><a href="#updating-a-puppet-module">2.2. Updating a Puppet module</a></li>
<li><a href="#puppet_guide_managing_puppet_modules_with_r10k_managing-configurations-puppet">2.3. Managing Puppet modules with r10k</a></li>
</ul>
</li>
<li><a href="#Importing_Puppet_Classes_and_Environments_managing-configurations-puppet">3. Importing Puppet classes and environments into Foreman</a></li>
<li><a href="#Creating_a_Custom_Puppet_Environment_managing-configurations-puppet">4. Creating a custom Puppet environment</a></li>
<li><a href="#creating-a-puppet-config-group_managing-configurations-puppet">5. Creating a Puppet config group</a></li>
<li><a href="#Configuring_Puppet_Smart_Class_Parameters_managing-configurations-puppet">6. Configuring Puppet smart class parameters</a>
<ul class="sectlevel2">
<li><a href="#Puppet_Parameter_Hierarchy_managing-configurations-puppet">6.1. Puppet parameter hierarchy</a></li>
<li><a href="#Overriding_Smart_Class_Parameter_Globally_managing-configurations-puppet">6.2. Overriding a smart class parameter globally</a></li>
<li><a href="#Overriding_Smart_Class_Parameter_for_Organization_managing-configurations-puppet">6.3. Overriding a smart class parameter for an organization</a></li>
<li><a href="#Overriding_Smart_Class_Parameter_for_Location_managing-configurations-puppet">6.4. Overriding a smart class parameter for a location</a></li>
<li><a href="#Overriding_Smart_Class_Parameter_Individual_Host_managing-configurations-puppet">6.5. Overriding a smart class parameter on an individual host</a></li>
</ul>
</li>
<li><a href="#assigning-a-puppet-class-to-a-host-group_managing-configurations-puppet">7. Assigning a Puppet class to a host group</a></li>
<li><a href="#assigning-a-puppet-class-to-an-individual-host_managing-configurations-puppet">8. Assigning a Puppet class to an individual host</a></li>
<li><a href="#enforcing-puppet-configuration-on-hosts_managing-configurations-puppet">9. Enforcing Puppet configuration on hosts</a>
<ul class="sectlevel2">
<li><a href="#running-puppet-once-using-ssh_managing-configurations-puppet">9.1. Running Puppet once using SSH</a></li>
<li><a href="#understanding-intervals-of-automatic-enforcement_managing-configurations-puppet">9.2. Understanding intervals of automatic enforcement</a></li>
<li><a href="#setting-the-puppet-agent-run-interval_managing-configurations-puppet">9.3. Setting the Puppet agent run interval on a host</a></li>
<li><a href="#setting-the-global-out-of-sync-interval_managing-configurations-puppet">9.4. Setting the global out-of-sync interval</a></li>
<li><a href="#setting-the-puppet-out-of-sync-interval_managing-configurations-puppet">9.5. Setting the Puppet out-of-sync interval</a></li>
<li><a href="#overriding-out-of-sync-interval-for-a-host-group_managing-configurations-puppet">9.6. Overriding out-of-sync interval for a host group</a></li>
<li><a href="#overriding-out-of-sync-interval-for-an-individual-host_managing-configurations-puppet">9.7. Overriding out-of-sync interval for an individual host</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="introducing-configuration-management-by-using-puppet"><a class="anchor" href="#introducing-configuration-management-by-using-puppet"></a>1. Introducing configuration management by using Puppet</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use Puppet to manage and automate configurations of hosts.
Puppet uses a declarative language to describe the <em>desired state</em> of hosts.</p>
</div>
<div class="paragraph">
<p>Puppet increases your productivity as you can administer multiple hosts simultaneously.
At the same time, it decreases your configuration effort as Puppet makes it easy to verify and possibly correct the state of the hosts.</p>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://puppet.com/docs/puppet/">Open Source Puppet documentation</a></p>
</li>
<li>
<p><a href="https://forge.puppet.com/">Puppet Forge</a>&#8201;&#8212;&#8201;a repository of pre-built Puppet modules</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="How_Puppet_Integrates_With_Project_managing-configurations-puppet"><a class="anchor" href="#How_Puppet_Integrates_With_Project_managing-configurations-puppet"></a>1.1. How Puppet integrates with Foreman</h3>
<div class="paragraph">
<p>Puppet uses a server-agent architecture.
The Puppet server is the central component that stores configuration definitions.
Foreman&#160;server or Smart&#160;Proxy&#160;servers are typically deployed with the Puppet server and Foreman acts as an <a href="https://puppet.com/docs/puppet/8/nodes_external.html">External Node Classifier (ENC)</a> for such Puppet server.
Hosts run the Puppet agent that communicates with the Puppet server.</p>
</div>
<div class="paragraph">
<p>The Puppet agent collects <em>facts</em> about a host and reports them to the Puppet server on each run.
You can display the Puppet <em>facts</em> in JSON format by running <code>puppet facts</code> on a host.</p>
</div>
<div class="paragraph">
<p>The Puppet server forwards <em>facts</em> to Foreman and Foreman stores them for later use.
Based on the <em>facts</em> and other definitions, Foreman constructs the ENC answer to the Puppet server.
The Puppet server compiles a <em>catalog</em> based on the ENC answer and sends the <em>catalog</em> to the Puppet agent.</p>
</div>
<div class="paragraph">
<p>The Puppet agent evaluates the system state on the host.
If the Puppet agent finds differences, known as <em>drifts</em>, between the <em>desired state</em> defined in the <em>catalog</em> and the actual state, it enforces correction of the state of the host.
The Puppet agent then reports correction results back to the Puppet server, which reports them to Foreman.</p>
</div>
<div class="paragraph">
<div class="title">Puppet modules</div>
<p>The <em>desired state</em> of a host is defined in a <em>catalog</em>.
The <em>catalog</em> is compiled from Puppet manifests of one or more Puppet modules assigned to the host.
A Puppet module is a collection of classes, manifests, resources, files, and templates.
The Puppet modules work as components of host configuration definitions.</p>
</div>
<div class="paragraph">
<div class="title">Smart Class parameters</div>
<p>You can override parameters of a Puppet module by using Smart Class parameters if the module supports the use of parameters.
You can define the parameters in your Foreman as <em>key-value</em> pairs, which behave similar to host parameters or Ansible variables.</p>
</div>
<div class="paragraph">
<div class="title">Puppet environments</div>
<p>You can also create multiple Puppet environments to control versions of configuration definitions or to manage variants of the definitions, and to test the definitions before you deploy them on production.</p>
</div>
<div class="paragraph">
<div class="title">High-level integration steps</div>
<p>Puppet integration with Foreman involves the following high-level steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#Enabling_Puppet_Integration_managing-configurations-puppet">Enable Puppet integration</a>.</p>
</li>
<li>
<p>Import Puppet agent packages into Foreman.
Puppet agent packages can be managed like any other content with Foreman
by syncing repositories in custom products
and by using <a href="https://docs.theforeman.org/3.14/Managing_Content/index-katello.html#Managing_Activation_Keys_content-management">activation keys</a> and <a href="https://docs.theforeman.org/3.14/Managing_Content/index-katello.html#Managing_Content_Views_content-management">content views</a>.</p>
</li>
<li>
<p>Install Puppet agent on hosts during <a href="#Installing_and_Configuring_Puppet_Agent_during_Host_Provisioning_managing-configurations-puppet">provisioning</a>, <a href="#installing-and-configuring-puppet-agent-during-host-registration_managing-configurations-puppet">registration</a>, <a href="#Installing_and_Configuring_Puppet_Agent_Manually_managing-configurations-puppet">manually</a>, or by remote job execution.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://docs.theforeman.org/3.14/Managing_Content/index-katello.html#">Managing content</a></p>
</li>
<li>
<p><a href="https://docs.theforeman.org/3.14/Managing_Hosts/index-katello.html#registering-hosts-and-setting-up-host-integration_managing-hosts">Registering hosts and setting up host integration</a> in <em>Managing hosts</em></p>
</li>
<li>
<p><a href="https://docs.theforeman.org/3.14/Managing_Hosts/index-katello.html#Configuring_and_Setting_Up_Remote_Jobs_managing-hosts">Configuring and setting up remote jobs</a> in <em>Managing hosts</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following procedures outline how to use a Puppet module to install, configure, and manage the <em>ntp</em> service to provide examples.</p>
</div>
</div>
<div class="sect2">
<h3 id="supported-puppet-versions-and-system-requirements_managing-configurations-puppet"><a class="anchor" href="#supported-puppet-versions-and-system-requirements_managing-configurations-puppet"></a>1.2. Supported Puppet versions and system requirements</h3>
<div class="paragraph">
<p>Before you begin with the Puppet integration, review the supported Puppet versions and system requirements.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported Puppet Versions</dt>
<dd>
<p>Foreman supports Puppet server 8 and 7.
Ensure that the Puppet modules used to configure your hosts are compatible with your Puppet version.</p>
<div class="paragraph">
<p>On hosts, you can use either Puppet agent 8 or Puppet agent 7.</p>
</div>
</dd>
<dt class="hdlist1">System Requirements</dt>
<dd>
<p>Before you begin integrating Puppet with your Foreman, ensure that you meet the system requirements.
For more information, see <a href="https://puppet.com/docs/puppet/8/system_requirements.html">System Requirements for Puppet 8</a> or <a href="https://puppet.com/docs/puppet/7/system_requirements.html">System Requirements for Puppet 7</a> in the <em>Open Source Puppet</em> documentation.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="Enabling_Puppet_Integration_managing-configurations-puppet"><a class="anchor" href="#Enabling_Puppet_Integration_managing-configurations-puppet"></a>1.3. Enabling Puppet integration with Foreman</h3>
<div class="paragraph">
<p>By default, Foreman does not have any Puppet integration configured.
You need to enable the integration as is appropriate for your situation.
This means that you can configure Foreman to manage and deploy Puppet server on Foreman&#160;server or Smart&#160;Proxy&#160;servers.
Additionally, you can deploy Puppet server to Foreman externally and integrate it with Foreman for reporting, facts, and external node classification (ENC).</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Enable Puppet integration and install Puppet server on Foreman&#160;server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer \
--enable-foreman-cli-puppet \
--enable-foreman-plugin-puppet \
--enable-puppet \
--foreman-proxy-puppet true \
--foreman-proxy-puppetca true \
--puppet-server true</pre>
</div>
</div>
</li>
<li>
<p>If you want to use Puppet integration on Smart&#160;Proxy&#160;servers, enable Puppet integration and install Puppet server on Smart&#160;Proxy&#160;servers:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-installer \
--enable-puppet \
--foreman-proxy-puppet true \
--foreman-proxy-puppetca true \
--puppet-server true</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Installing_and_Configuring_Puppet_Agent_during_Host_Provisioning_managing-configurations-puppet"><a class="anchor" href="#Installing_and_Configuring_Puppet_Agent_during_Host_Provisioning_managing-configurations-puppet"></a>1.4. Installing and configuring Puppet agent during host provisioning</h3>
<div class="paragraph">
<p>You can install and configure the Puppet agent on a host during the provisioning process.
A configured Puppet agent is required on the host for Puppet integration with your Foreman.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You created a product and repository for the upstream Puppet agent, such as <code>https://yum.puppet.com</code> or <code>https://apt.puppet.com</code>, and synchronized the repository to Foreman.
For more information, see <a href="https://docs.theforeman.org/3.14/Managing_Content/index-katello.html#Importing_Content_content-management">Importing Content</a> in <em>Managing content</em>.</p>
</li>
<li>
<p>You created an activation key that enables the Puppet agent repository for hosts.
For more information, see <a href="https://docs.theforeman.org/3.14/Managing_Content/index-katello.html#Managing_Activation_Keys_content-management">Managing Activation Keys</a> in <em>Managing content</em>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Navigate to <strong>Hosts</strong> &gt; <strong>Templates</strong> &gt; <strong>Provisioning Templates</strong>.</p>
</li>
<li>
<p>Select a provisioning template depending on your host provisioning method.
For more information, see <a href="https://docs.theforeman.org/3.14/Provisioning_Hosts/index-katello.html#kinds-of-provisioning-templates">Kinds of Provisioning Templates</a> in <em>Provisioning hosts</em>.</p>
</li>
<li>
<p>Ensure the <code>puppet_setup</code> snippet is included as follows:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">&lt;%= snippet 'puppet_setup' %&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Note that this snippet is already included in the templates shipped with Foreman, such as <code>Kickstart default</code> or <code>Preseed default</code>.</p>
</div>
</li>
<li>
<p>Enable the Puppet agent using a host parameter in global parameters, a host group, or for a single host.
To use Puppet 8, add a host parameter named <code>enable-puppet8</code>, select the <strong>boolean</strong> type, and set the value to <code>true</code>.
To use Puppet 7, add a host parameter named <code>enable-puppet7</code>, select the <strong>boolean</strong> type, and set the value to <code>true</code>.</p>
</li>
<li>
<p>Set configuration for the Puppet agent.</p>
<div class="ulist">
<ul>
<li>
<p>If you use an integrated Puppet server, ensure that you select a Puppet Smart&#160;Proxy, Puppet CA Smart&#160;Proxy, and Puppet environment when you create a host.</p>
</li>
<li>
<p>If you use a non-integrated Puppet server, either set the following host parameters in global parameters, or a host group, or when you create a host:</p>
<div class="ulist">
<ul>
<li>
<p>Add a host parameter named <code>puppet_server</code>, select the <strong>string</strong> type, and set the value to the hostname of your Puppet server, such as <code>puppet.example.com</code>.</p>
</li>
<li>
<p>Optional: Add a host parameter named <code>puppet_ca_server</code>, select the <strong>string</strong> type, and set the value to the hostname of your Puppet CA server, such as <code>puppet-ca.example.com</code>.
If <code>puppet_ca_server</code> is not set, the Puppet agent will use the same server as <code>puppet_server</code>.</p>
</li>
<li>
<p>Optional: Add a host parameter named <code>puppet_environment</code>, select the <strong>string</strong> type, and set the value to the Puppet environment you want the host to use.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Ensure your host has access to the Puppet agent packages from Foreman&#160;server by using an appropriate activation key.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="installing-and-configuring-puppet-agent-during-host-registration_managing-configurations-puppet"><a class="anchor" href="#installing-and-configuring-puppet-agent-during-host-registration_managing-configurations-puppet"></a>1.5. Installing and configuring Puppet agent during host registration</h3>
<div class="paragraph">
<p>You can install and configure the Puppet agent on the host during registration.
A configured Puppet agent is required on the host for Puppet integration with your Foreman.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You created a product and repository for the upstream Puppet agent, such as <code>https://yum.puppet.com</code> or <code>https://apt.puppet.com</code>, and synchronized the repository to Foreman.
For more information, see <a href="https://docs.theforeman.org/3.14/Managing_Content/index-katello.html#Importing_Content_content-management">Importing Content</a> in <em>Managing content</em>.</p>
</li>
<li>
<p>You created an activation key that enables the Puppet agent repository for hosts.
For more information, see <a href="https://docs.theforeman.org/3.14/Managing_Content/index-katello.html#Managing_Activation_Keys_content-management">Managing Activation Keys</a> in <em>Managing content</em>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Configure</strong> &gt; <strong>Global Parameters</strong> to add host parameters globally.
Alternatively, you can navigate to <strong>Configure</strong> &gt; <strong>Host Groups</strong> and edit or create a host group to add host parameters only to a host group.</p>
</li>
<li>
<p>Enable the Puppet agent using a host parameter in global parameters or a host group.</p>
<div class="ulist">
<ul>
<li>
<p>To use Puppet 8, add a host parameter named <code>enable-puppet8</code>, select the <strong>boolean</strong> type, and set the value to <code>true</code>.</p>
</li>
<li>
<p>To use Puppet 7, add a host parameter named <code>enable-puppet7</code>, select the <strong>boolean</strong> type, and set the value to <code>true</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Specify configuration for the Puppet agent using the following host parameters in global parameters or a host group:</p>
<div class="ulist">
<ul>
<li>
<p>Add a host parameter named <code>puppet_server</code>, select the <strong>string</strong> type, and set the value to the hostname of your Puppet server, such as <code>puppet.example.com</code>.</p>
</li>
<li>
<p>Optional: Add a host parameter named <code>puppet_ca_server</code>, select the <strong>string</strong> type, and set the value to the hostname of your Puppet CA server, such as <code>puppet-ca.example.com</code>.
If <code>puppet_ca_server</code> is not set, the Puppet agent will use the same server as <code>puppet_server</code>.</p>
</li>
<li>
<p>Optional: Add a host parameter named <code>puppet_environment</code>, select the <strong>string</strong> type, and set the value to the Puppet environment you want the host to use.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Until the <a href="https://bugzilla.redhat.com/show_bug.cgi?id=2177730">BZ2177730</a> is resolved, you must use host parameters to specify the Puppet agent configuration even in integrated setups where the Puppet server is a Smart&#160;Proxy&#160;server.</p>
</div>
</li>
<li>
<p>Navigate to <strong>Hosts</strong> &gt; <strong>Register Host</strong> and register your host using an appropriate activation key.
For more information, see <a href="https://docs.theforeman.org/3.14/Managing_Hosts/index-katello.html#Registering_Hosts_by_Using_Global_Registration_managing-hosts">Registering hosts by using global registration</a> in <em>Managing hosts</em>.</p>
</li>
<li>
<p>Navigate to <strong>Infrastructure</strong> &gt; <strong>Smart&#160;Proxies</strong>.</p>
</li>
<li>
<p>From the list in the <strong>Actions</strong> column for the required Smart&#160;Proxy&#160;server, select <strong>Certificates</strong>.</p>
</li>
<li>
<p>Click <strong>Sign</strong> to the right of the required host to sign the SSL certificate for the Puppet agent.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Installing_and_Configuring_Puppet_Agent_Manually_managing-configurations-puppet"><a class="anchor" href="#Installing_and_Configuring_Puppet_Agent_Manually_managing-configurations-puppet"></a>1.6. Installing and configuring Puppet agent manually</h3>
<div class="paragraph">
<p>You can install and configure the Puppet agent on a host manually.
A configured Puppet agent is required on the host for Puppet integration with your Foreman.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The host must have a Puppet environment assigned to it.</p>
</li>
<li>
<p>Ensure a repository containing the Puppet agent is enabled on the host, for example <a href="https://apt.puppet.com/">apt.puppet.com</a> or <a href="https://yum.puppet.com/">yum.puppet.com</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in to the host as the <code>root</code> user.</p>
</li>
<li>
<p>Install the Puppet agent package.</p>
<div class="ulist">
<ul>
<li>
<p>On hosts running Enterprise Linux 8 and above:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># dnf install puppet-agent</pre>
</div>
</div>
</li>
<li>
<p>On hosts running Debian:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># apt install puppet-agent</pre>
</div>
</div>
</li>
<li>
<p>On hosts running SUSE Linux Enterprise Server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># zypper install puppet-agent</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Add the Puppet agent to <code>PATH</code> in your current shell using the following script:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">. /etc/profile.d/puppet-agent.sh</pre>
</div>
</div>
</li>
<li>
<p>Configure the Puppet agent.
Set the <code>environment</code> parameter to the name of the Puppet environment to which the host belongs:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># puppet config set server <em>foreman.example.com</em> --section agent
# puppet config set environment <em>My_Puppet_Environment</em> --section agent</pre>
</div>
</div>
</li>
<li>
<p>Start the Puppet agent service:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># puppet resource service puppet ensure=running enable=true</pre>
</div>
</div>
</li>
<li>
<p>Create a certificate for the host:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># puppet ssl bootstrap</pre>
</div>
</div>
</li>
<li>
<p>In the Foreman web UI, navigate to <strong>Infrastructure</strong> &gt; <strong>Smart&#160;Proxies</strong>.</p>
</li>
<li>
<p>From the list in the <strong>Actions</strong> column for the required Smart&#160;Proxy&#160;server, select <strong>Certificates</strong>.</p>
</li>
<li>
<p>Click <strong>Sign</strong> to the right of the required host to sign the SSL certificate for the Puppet agent.</p>
</li>
<li>
<p>On the host, run the Puppet agent again:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># puppet ssl bootstrap</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="performing-configuration-management_managing-configurations-puppet"><a class="anchor" href="#performing-configuration-management_managing-configurations-puppet"></a>1.7. Performing configuration management</h3>
<div class="paragraph">
<p>After you deploy Puppet agent on a host, you can start performing configuration management with Puppet.
This involves the following high-level steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Managing Puppet modules on the Puppet server, that is installing and updating them.</p>
</li>
<li>
<p>Importing Puppet classes and environments from Puppet modules into Foreman.</p>
</li>
<li>
<p>Optional: Creating config groups from Puppet classes.</p>
</li>
<li>
<p>Configuring overrides of Smart Class parameters on various levels.</p>
</li>
<li>
<p>Assigning Puppet classes or config groups to host groups or individual hosts.</p>
</li>
<li>
<p>Configuring intervals for runs of the Puppet agent on hosts and for configuration enforcement runs of the Puppet server.</p>
</li>
<li>
<p>Monitoring configuration management using reports in the Foreman web UI.
For more information, see <a href="https://docs.theforeman.org/3.14/Administering_Project/index-katello.html#Monitoring_Resources_admin">Monitoring Resources</a> in <em>Administering Foreman</em>.</p>
</li>
<li>
<p>Configuring email notifications.
For more information, see <a href="https://docs.theforeman.org/3.14/Administering_Project/index-katello.html#Configuring_Email_Notification_Preferences_admin">Configuring Email Notification Preferences</a> in <em>Administering Foreman</em>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>After assigning Puppet classes or config groups, Foreman runs configuration management automatically in the configured intervals to enforce Puppet configuration on your hosts, or you can initiate it manually on demand with the <strong>Run Puppet Once</strong> feature.
For more information, see <a href="#running-puppet-once-using-ssh_managing-configurations-puppet">Running Puppet once using SSH</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Disabling_Puppet_Integration_managing-configurations-puppet"><a class="anchor" href="#Disabling_Puppet_Integration_managing-configurations-puppet"></a>1.8. Disabling Puppet integration with Foreman</h3>
<div class="paragraph">
<p>To discontinue using Puppet in your Foreman, follow this procedure.</p>
</div>
<div class="paragraph">
<p>Note that the command without the <code>--remove-all-data</code> argument removes all Puppet-related data in Foreman database.
With the <code>--remove-all-data</code> argument, the command additionally removes Puppet server data files, including Puppet environments.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you disable Puppet with the <code>--remove-all-data</code> argument, you will not be able to re-enable Puppet afterwards.
This is a known issue, see the <a href="https://bugzilla.redhat.com/show_bug.cgi?id=2087067">Bug 2087067</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Puppet is enabled on Foreman.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>If you have used Puppet server on any Smart&#160;Proxies, disable Puppet server on all Smart&#160;Proxies:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain plugin purge-puppet --remove-all-data</pre>
</div>
</div>
</li>
<li>
<p>Disable Puppet server on Foreman&#160;server:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># foreman-maintain plugin purge-puppet --remove-all-data</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="managing-puppet-modules_managing-configurations-puppet"><a class="anchor" href="#managing-puppet-modules_managing-configurations-puppet"></a>2. Managing Puppet modules</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="installing_a_puppet_module_managing-configurations-puppet"><a class="anchor" href="#installing_a_puppet_module_managing-configurations-puppet"></a>2.1. Installing a Puppet module on Foreman server</h3>
<div class="paragraph">
<p>You can install a pre-built Puppet module from the Puppet Forge.
The Puppet Forge is a repository that provides Puppet modules contributed by the community.
Puppet modules flagged as <em>supported</em> are officially supported and tested by Puppet Inc.</p>
</div>
<div class="paragraph">
<p>This example shows how to add the <em>ntp module</em> to hosts.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Navigate to <a href="https://forge.puppet.com/">forge.puppet.com</a> and search for <code>ntp</code>.
One of the first modules is <em>puppetlabs/ntp</em>.</p>
</li>
<li>
<p>Connect to your Foreman&#160;server using SSH and install the Puppet module:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># puppet module install puppetlabs-ntp -i /etc/puppetlabs/code/environments/production/modules</pre>
</div>
</div>
<div class="paragraph">
<p>Use the <code>-i</code> parameter to specify the path and Puppet environment, for example <code>production</code>.</p>
</div>
<div class="paragraph">
<p>Once the installation is completed, the output looks as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">Notice: Preparing to install into /etc/puppetlabs/code/environments/production/modules ...
Notice: Created target directory /etc/puppetlabs/code/environments/production/modules
Notice: Downloading from https://forgeapi.puppet.com ...
Notice: Installing -- do not interrupt ...
/etc/puppetlabs/code/environments/production/modules
|-| puppetlabs-ntp (v8.3.0)
  |-- puppetlabs-stdlib (v4.25.1) [/etc/puppetlabs/code/environments/production/modules]</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>An alternative way to install a Puppet module is to copy a folder containing the Puppet module to the module path as mentioned above.
Ensure to resolve its dependencies manually.</p>
</div>
</div>
<div class="sect2">
<h3 id="updating-a-puppet-module"><a class="anchor" href="#updating-a-puppet-module"></a>2.2. Updating a Puppet module</h3>
<div class="paragraph">
<p>You can update an existing Puppet module using the <code>puppet</code> command.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Connect to your Puppet server using SSH and find out where the Puppet modules are located:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># puppet config print modulepath</pre>
</div>
</div>
<div class="paragraph">
<p>This returns output as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">/etc/puppetlabs/code/environments/production/modules:/etc/puppetlabs/code/environments/common:/etc/puppetlabs/code/modules:/opt/puppetlabs/puppet/modules:/usr/share/puppet/modules</pre>
</div>
</div>
</li>
<li>
<p>If the module is located in the path as displayed above, the following command updates a module:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># puppet module upgrade <em>module name</em></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="puppet_guide_managing_puppet_modules_with_r10k_managing-configurations-puppet"><a class="anchor" href="#puppet_guide_managing_puppet_modules_with_r10k_managing-configurations-puppet"></a>2.3. Managing Puppet modules with r10k</h3>
<div class="paragraph">
<p>You can manage Puppet modules and environments using <a href="https://github.com/puppetlabs/r10k">r10k</a>.
r10k uses a list of Puppet roles from a <code>Puppetfile</code> to download Puppet modules from the Puppet Forge or git repositories.
It does not handle dependencies between Puppet modules.</p>
</div>
<div class="paragraph">
<p>A <em>Puppetfile</em> looks as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">forge "https://forge.puppet.com"

mod "puppet-nginx",
  :git =&gt; "https://github.com/voxpupuli/puppet-nginx.git",
  :ref =&gt; "master"

mod "puppetlabs/apache"
mod "puppetlabs/ntp", "8.3.0"</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Importing_Puppet_Classes_and_Environments_managing-configurations-puppet"><a class="anchor" href="#Importing_Puppet_Classes_and_Environments_managing-configurations-puppet"></a>3. Importing Puppet classes and environments into Foreman</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Import Puppet classes and environments from the installed Puppet modules to Foreman&#160;server or any attached Smart&#160;Proxy&#160;server before you assign any of the classes to hosts.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Ensure to select <strong>Any Organization</strong> and <strong>Any Location</strong> as context, otherwise the import might fail.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Configure</strong> &gt; <strong>Puppet ENC</strong> &gt; <strong>Classes</strong> or <strong>Configure</strong> &gt; <strong>Puppet ENC</strong> &gt; <strong>Environments</strong>.</p>
</li>
<li>
<p>Click <strong>Import</strong> in the upper right corner and select which Smart&#160;Proxy you want to import modules from.
You may typically choose between your Foreman&#160;server or any attached Smart&#160;Proxy&#160;server.</p>
</li>
<li>
<p>Select the Puppet environments to import using checkboxes on the left.</p>
</li>
<li>
<p>Click <strong>Update</strong> to import the Puppet environments and classes to Foreman.</p>
</li>
<li>
<p>The import should result in a notification as follows:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">Successfully updated environments and Puppet classes from the on-disk Puppet installation</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Creating_a_Custom_Puppet_Environment_managing-configurations-puppet"><a class="anchor" href="#Creating_a_Custom_Puppet_Environment_managing-configurations-puppet"></a>4. Creating a custom Puppet environment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can create a Puppet environment within your Foreman.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Configure &gt; Puppet Environments</strong>.</p>
</li>
<li>
<p>Click <strong>Create Puppet Environment</strong> to create a Puppet environment.</p>
</li>
<li>
<p>Enter a <strong>Name</strong>, alphanumeric characters and underscores are allowed, such as <code>example_environment</code>.</p>
</li>
<li>
<p>Optional: Set a location context.</p>
</li>
<li>
<p>Optional: Set an organization context.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to create the Puppet environment.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Note that before you run an import of Puppet modules into Foreman, the environment must already exist as the folder <code>/etc/puppetlabs/code/environments/<em>example_environment</em></code> on the Puppet server and contain installed Puppet modules.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-a-puppet-config-group_managing-configurations-puppet"><a class="anchor" href="#creating-a-puppet-config-group_managing-configurations-puppet"></a>5. Creating a Puppet config group</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A Puppet config group is a named list of Puppet classes that allows you to combine their capabilities and assign them to hosts at a click.
This is equivalent to the concept of profiles in pure Puppet.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Configure</strong> &gt; <strong>Puppet ENC</strong> &gt; <strong>Config Groups</strong>.</p>
</li>
<li>
<p>Click <strong>Create Config Group</strong>.</p>
</li>
<li>
<p>Select the classes you want to add to the config group.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Choose a meaningful <strong>Name</strong> for the Puppet config group.</p>
</li>
<li>
<p>Add selected Puppet classes to the <strong>Included Classes</strong> field.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Click <strong>Submit</strong> to save the changes.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Configuring_Puppet_Smart_Class_Parameters_managing-configurations-puppet"><a class="anchor" href="#Configuring_Puppet_Smart_Class_Parameters_managing-configurations-puppet"></a>6. Configuring Puppet smart class parameters</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="Puppet_Parameter_Hierarchy_managing-configurations-puppet"><a class="anchor" href="#Puppet_Parameter_Hierarchy_managing-configurations-puppet"></a>6.1. Puppet parameter hierarchy</h3>
<div class="paragraph">
<p>Puppet parameters are structured hierarchically.
Parameters at a lower level override parameters of the higher levels:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Global parameters</p>
</li>
<li>
<p>Organization parameters</p>
</li>
<li>
<p>Location parameters</p>
</li>
<li>
<p>Host group parameters</p>
</li>
<li>
<p>Host parameters</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For example, host specific parameters override the parameter at any higher level, and location parameters only override parameters at the organization or global level.
This feature is especially useful when you use locations or organizations to group hosts.</p>
</div>
</div>
<div class="sect2">
<h3 id="Overriding_Smart_Class_Parameter_Globally_managing-configurations-puppet"><a class="anchor" href="#Overriding_Smart_Class_Parameter_Globally_managing-configurations-puppet"></a>6.2. Overriding a smart class parameter globally</h3>
<div class="paragraph">
<p>You can configure a Puppet class after you have imported it to Foreman&#160;server.
This example overrides the default list of ntp servers.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Configure</strong> &gt; <strong>Puppet ENC</strong> &gt; <strong>Classes</strong>.</p>
</li>
<li>
<p>Select the <strong>ntp</strong> Puppet class to change its configuration.</p>
</li>
<li>
<p>Select the <strong>Smart Class Parameter</strong> tab and search for <strong>servers</strong>.</p>
</li>
<li>
<p>Ensure the <strong>Override</strong> checkbox is selected.</p>
</li>
<li>
<p>Set the <strong>Parameter Type</strong> drop down menu to <em>array</em>.</p>
</li>
<li>
<p>Insert a list of ntp servers as <strong>Default Value</strong>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">["0.de.pool.ntp.org","1.de.pool.ntp.org","2.de.pool.ntp.org","3.de.pool.ntp.org"]</pre>
</div>
</div>
<div class="paragraph">
<p>An alternative way to describe the array is the <code>yaml</code> syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">- 0.de.pool.ntp.org
- 1.de.pool.ntp.org
- 2.de.pool.ntp.org
- 3.de.pool.ntp.org</code></pre>
</div>
</div>
</li>
<li>
<p>Click <strong>Submit</strong> to change the default configuration of the Puppet module <code>ntp</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Overriding_Smart_Class_Parameter_for_Organization_managing-configurations-puppet"><a class="anchor" href="#Overriding_Smart_Class_Parameter_for_Organization_managing-configurations-puppet"></a>6.3. Overriding a smart class parameter for an organization</h3>
<div class="paragraph">
<p>You can use groups of hosts to override Puppet parameters for multiple hosts at once.
The following example chooses the <em>organization</em> context to illustrate setting context based parameters.</p>
</div>
<div class="paragraph">
<p>Note that <em>organization</em>-level Puppet parameters are overridden by <em>location</em>-level Puppet parameters.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Configure</strong> &gt; <strong>Puppet ENC</strong> &gt; <strong>Classes</strong>.</p>
</li>
<li>
<p>Click a class name to select a class.</p>
</li>
<li>
<p>On the <strong>Smart Class Parameter</strong> tab, select a parameter.</p>
</li>
<li>
<p>Use the <strong>Order</strong> list to define the hierarchy of the Puppet parameters.
The individual host (<code>fqdn</code>) marks the most and the organization context (<code>organization</code>) the least relevant.</p>
</li>
<li>
<p>Check <strong>Merge Overrides</strong> if you want to add all further matched parameters after finding the first match.</p>
</li>
<li>
<p>Check <strong>Merge Default</strong> if you want to also include the default value even if there are more specific values defined.</p>
</li>
<li>
<p>Check <strong>Avoid Duplicates</strong> if you want to create a list of unique values for the selected parameter.</p>
</li>
<li>
<p>The <strong>matcher</strong> field requires an <em>attribute type</em> from the <em>order</em> list.</p>
</li>
<li>
<p>Optional: Click <strong>Add Matcher</strong> to add more matchers.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to save the changes.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Overriding_Smart_Class_Parameter_for_Location_managing-configurations-puppet"><a class="anchor" href="#Overriding_Smart_Class_Parameter_for_Location_managing-configurations-puppet"></a>6.4. Overriding a smart class parameter for a location</h3>
<div class="paragraph">
<p>You can use groups of hosts to override Puppet parameters for multiple hosts at once.
The following examples chooses the <em>location</em> context to illustrate setting context based parameters.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Configure</strong> &gt; <strong>Puppet ENC</strong> &gt; <strong>Classes</strong>.</p>
</li>
<li>
<p>Click a class name to select a class.</p>
</li>
<li>
<p>On the <strong>Smart Class Parameter</strong> tab, select a parameter.</p>
</li>
<li>
<p>Use the <strong>Order</strong> list to define the hierarchy of the Puppet parameters.
The individual host (<code>fqdn</code>) marks the most and the location context (<code>location</code>) the least relevant.</p>
</li>
<li>
<p>Check <strong>Merge Overrides</strong> if you want to add all further matched parameters after finding the first match.</p>
</li>
<li>
<p>Check <strong>Merge Default</strong> if you want to also include the default value even if there are more specific values defined.</p>
</li>
<li>
<p>Check <strong>Avoid Duplicates</strong> if you want to create a list of unique values for the selected parameter.</p>
</li>
<li>
<p>The <strong>matcher</strong> field requires an <em>attribute type</em> from the <em>order</em> list.
For example, you can choose <code>Paris</code> as <em>location</em> context and set the value to French ntp servers.</p>
</li>
<li>
<p>Optional: Click <strong>Add Matcher</strong> to add more matchers.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to save the changes.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Overriding_Smart_Class_Parameter_Individual_Host_managing-configurations-puppet"><a class="anchor" href="#Overriding_Smart_Class_Parameter_Individual_Host_managing-configurations-puppet"></a>6.5. Overriding a smart class parameter on an individual host</h3>
<div class="paragraph">
<p>You can override parameters on individual hosts.
This is recommended if you have multiple hosts and only want to make changes to a single one.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Hosts &gt; All Hosts</strong>.</p>
</li>
<li>
<p>Click a host name to select a host.</p>
</li>
<li>
<p>Click <strong>Edit</strong>.</p>
</li>
<li>
<p>On the <strong>Host</strong> tab, select a Puppet <strong>Environment</strong>.</p>
</li>
<li>
<p>Select the <strong>Puppet ENC</strong> tab.</p>
</li>
<li>
<p>Click <strong>Override</strong> to edit the Puppet parameter.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to save the changes.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assigning-a-puppet-class-to-a-host-group_managing-configurations-puppet"><a class="anchor" href="#assigning-a-puppet-class-to-a-host-group_managing-configurations-puppet"></a>7. Assigning a Puppet class to a host group</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use a host group to assign the <em>ntp</em> Puppet class to multiple hosts at once.
Every host you deploy based on this host group has this Puppet class installed.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Configure &gt; Host Groups</strong> to create a host group or edit an existing one.</p>
</li>
<li>
<p>On the <strong>Host Group</strong> tab, set the following parameters:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>The <strong>Lifecycle Environment</strong> describes the stage in which certain versions of content are available to hosts.</p>
</li>
<li>
<p>The <strong>Content View</strong> is comprised of products and allows for version control of content repositories.</p>
</li>
<li>
<p>The <strong>Environment</strong> allows you to supply a group of hosts with their own dedicated configuration.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Navigate to the <strong>Puppet ENC</strong> tab.</p>
</li>
<li>
<p>Add the Puppet class to the <em>Included Classes</em> or to the <em>Included Config Groups</em> if a Puppet config group is configured.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to save the changes.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assigning-a-puppet-class-to-an-individual-host_managing-configurations-puppet"><a class="anchor" href="#assigning-a-puppet-class-to-an-individual-host_managing-configurations-puppet"></a>8. Assigning a Puppet class to an individual host</h2>
<div class="sectionbody">
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong>.</p>
</li>
<li>
<p>Locate the host you want to add the <code>ntp</code> Puppet class to and click <strong>Edit</strong>.</p>
</li>
<li>
<p>Select the <strong>Puppet ENC</strong> tab and look for the ntp class.</p>
</li>
<li>
<p>Click the <strong>+</strong> symbol next to <code>ntp</code> to add the <em>ntp submodule</em> to the list of <em>included classes</em>.</p>
</li>
<li>
<p>Click <strong>Submit</strong> to save your changes.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>If the <em>Puppet classes</em> tab of an individual host is empty, check if it is assigned to the proper Puppet environment.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Verify the Puppet configuration.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Navigate to <strong>Hosts</strong> &gt; <strong>All Hosts</strong> and select the host.</p>
</li>
<li>
<p>From the top overflow menu, select <strong>Legacy UI</strong>.</p>
</li>
<li>
<p>Under <strong>Details</strong>, click <strong>Puppet YAML</strong>.
This produces output similar as follows:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">---
parameters:
  // shortened YAML output
classes:
  ntp:
    servers: '["0.de.pool.ntp.org","1.de.pool.ntp.org","2.de.pool.ntp.org","3.de.pool.ntp.org"]'
environment: production
...</code></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Verify the ntp configuration.</p>
<div class="paragraph">
<p>Connect to your host using SSH and check the content of <code>/etc/ntp.conf</code>.</p>
</div>
<div class="paragraph">
<p>This example assumes your host is running <em>CentOS 7</em>.
Other operating systems may store the ntp config file in a different path.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>You may need to run the Puppet agent on your host by executing the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># puppet agent -t</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Running the following command on the host checks which ntp servers are used for clock synchronization:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># cat /etc/ntp.conf</pre>
</div>
</div>
<div class="paragraph">
<p>This returns output similar as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-none" data-lang="none"># ntp.conf: Managed by puppet.
server 0.de.pool.ntp.org
server 1.de.pool.ntp.org
server 2.de.pool.ntp.org
server 3.de.pool.ntp.org</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>You now have a working ntp module which you can add to a host or group of hosts to roll out your ntp configuration automatically.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="enforcing-puppet-configuration-on-hosts_managing-configurations-puppet"><a class="anchor" href="#enforcing-puppet-configuration-on-hosts_managing-configurations-puppet"></a>9. Enforcing Puppet configuration on hosts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can enforce configuration from Foreman either manually on demand (run once) or automatically in configurable intervals.</p>
</div>
<div class="sect2">
<h3 id="running-puppet-once-using-ssh_managing-configurations-puppet"><a class="anchor" href="#running-puppet-once-using-ssh_managing-configurations-puppet"></a>9.1. Running Puppet once using SSH</h3>
<div class="paragraph">
<p>Assign the proper job template to the <em>Run Puppet Once</em> feature to run Puppet on hosts.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer</strong> &gt; <strong>Remote Execution Features</strong>.</p>
</li>
<li>
<p>Select the <code>puppet_run_host</code> remote execution feature.</p>
</li>
<li>
<p>Assign the <code>Run Puppet Once &#8211; SSH Default</code> job template.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Run Puppet on hosts by running a job and selecting category <code>Puppet</code> and template <code>Run Puppet Once - SSH Default</code>.
Alternatively, click <strong>Run Puppet Once</strong> in the <strong>Schedule Remote Job</strong> drop down menu on the host details page.</p>
</div>
</div>
<div class="sect2">
<h3 id="understanding-intervals-of-automatic-enforcement_managing-configurations-puppet"><a class="anchor" href="#understanding-intervals-of-automatic-enforcement_managing-configurations-puppet"></a>9.2. Understanding intervals of automatic enforcement</h3>
<div class="paragraph">
<p>Foreman considers hosts to be out of sync if the last Puppet report is older than the combined values of <code>outofsync_interval</code> and <code>puppet_interval</code> set in minutes.
By default, the Puppet agent on your hosts runs every 30 minutes,
the <code>puppet_interval</code> is set to 35 minutes and the global <code>outofsync_interval</code> is set to 30 minutes.</p>
</div>
<div class="paragraph">
<p>The effective time after which hosts are considered out of sync is the sum of <code>outofsync_interval</code> and <code>puppet_interval</code>.
For example, setting the global <code>outofsync_interval</code> to 30 and the <code>puppet_interval</code> to 60 results in a total of 90 minutes after which the host status changes to <code>out of sync</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="setting-the-puppet-agent-run-interval_managing-configurations-puppet"><a class="anchor" href="#setting-the-puppet-agent-run-interval_managing-configurations-puppet"></a>9.3. Setting the Puppet agent run interval on a host</h3>
<div class="paragraph">
<p>Set the interval when the Puppet agent runs and sends reports to Foreman.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Connect to your host using SSH.</p>
</li>
<li>
<p>Add the Puppet agent run interval to <code>/etc/puppetlabs/puppet/puppet.conf</code>, for example <code>runinterval = 1h</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="setting-the-global-out-of-sync-interval_managing-configurations-puppet"><a class="anchor" href="#setting-the-global-out-of-sync-interval_managing-configurations-puppet"></a>9.4. Setting the global out-of-sync interval</h3>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer &gt; Settings</strong>.</p>
</li>
<li>
<p>On the <strong>General</strong> tab, edit <strong>Out of sync interval</strong>.
Set a duration, in minutes, after which hosts are considered to be out of sync.</p>
<div class="paragraph">
<p>You can also override this interval on <a href="#overriding-out-of-sync-interval-for-a-host-group_managing-configurations-puppet">host groups</a> or <a href="#overriding-out-of-sync-interval-for-an-individual-host_managing-configurations-puppet">individual hosts</a> by adding the <code>outofsync_interval</code> parameter.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="setting-the-puppet-out-of-sync-interval_managing-configurations-puppet"><a class="anchor" href="#setting-the-puppet-out-of-sync-interval_managing-configurations-puppet"></a>9.5. Setting the Puppet out-of-sync interval</h3>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Administer &gt; Settings</strong>, and click the <strong>Config Management</strong> tab.</p>
</li>
<li>
<p>In the <strong>Puppet interval</strong> field, set the value to the duration, in minutes, after which hosts reporting using Puppet are considered to be out of sync.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="overriding-out-of-sync-interval-for-a-host-group_managing-configurations-puppet"><a class="anchor" href="#overriding-out-of-sync-interval-for-a-host-group_managing-configurations-puppet"></a>9.6. Overriding out-of-sync interval for a host group</h3>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Configure &gt; Host Groups</strong>.</p>
</li>
<li>
<p>Select a host group.</p>
</li>
<li>
<p>On the <strong>Parameters</strong> tab, click <strong>Add Parameter</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter <code>outofsync_interval</code>.</p>
</li>
<li>
<p>From the <strong>Type</strong> dropdown menu, select <code>integer</code>.</p>
</li>
<li>
<p>In the <strong>Value</strong> field, enter the new interval in minutes.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="overriding-out-of-sync-interval-for-an-individual-host_managing-configurations-puppet"><a class="anchor" href="#overriding-out-of-sync-interval-for-an-individual-host_managing-configurations-puppet"></a>9.7. Overriding out-of-sync interval for an individual host</h3>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Foreman web UI, navigate to <strong>Hosts &gt; All Hosts</strong>.</p>
</li>
<li>
<p>Click <strong>Edit</strong> for a selected host.</p>
</li>
<li>
<p>On the <strong>Parameters</strong> tab, click <strong>Add Parameter</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter <code>outofsync_interval</code>.</p>
</li>
<li>
<p>From the <strong>Type</strong> dropdown menu, select <code>integer</code>.</p>
</li>
<li>
<p>In the <strong>Value</strong> field, enter the new interval in minutes.</p>
</li>
<li>
<p>Click <strong>Submit</strong>.</p>
</li>
</ol>
</div>
<!-- "Fork me on GitHub" CSS ribbon v0.2.3 | MIT License -->
<!-- https://github.com/simonwhitaker/github-fork-ribbon-css -->
<a class="release-ribbon right-top fixed" href="https://docs.theforeman.org" data-ribbon="Unsupported version" title="Unsupported version">
Unsupported version
</a>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 3.14 (unsupported)<br>
Last updated Oct 2025
</div>
</div>
<script>
;(function () { /*! Asciidoctor Tabs | Copyright (c) 2018-present Dan Allen | MIT License */
  'use strict'

  var config = (document.currentScript || {}).dataset || {}
  var forEach = Array.prototype.forEach

  init(document.querySelectorAll('.tabs'))

  function init (tabsBlocks) {
    if (!tabsBlocks.length) return
    forEach.call(tabsBlocks, function (tabs) {
      var syncIds = tabs.classList.contains('is-sync') ? {} : undefined
      var tablist = tabs.querySelector('.tablist ul')
      tablist.setAttribute('role', 'tablist')
      var start
      forEach.call(tablist.querySelectorAll('li'), function (tab, idx) {
        tab.tabIndex = -1
        tab.setAttribute('role', tab.classList.add('tab') || 'tab')
        var id, anchor, syncId
        if (!(id = tab.id) && (anchor = tab.querySelector('a[id]'))) {
          id = tab.id = anchor.parentNode.removeChild(anchor).id
        }
        var panel = id && tabs.querySelector('.tabpanel[aria-labelledby~="' + id + '"]')
        if (!panel) return idx ? undefined : toggleSelected(tab, true) // invalid state
        syncIds && (((syncId = tab.textContent.trim()) in syncIds) ? (syncId = undefined) : true) &&
          (syncIds[(tab.dataset.syncId = syncId)] = tab)
        idx || (syncIds && (start = { tab: tab, panel: panel })) ? toggleHidden(panel, true) : toggleSelected(tab, true)
        tab.setAttribute('aria-controls', panel.id)
        panel.setAttribute('role', 'tabpanel')
        var onClick = syncId === undefined ? activateTab : activateTabSync
        tab.addEventListener('click', onClick.bind({ tabs: tabs, tab: tab, panel: panel }))
      })
      if (!tabs.closest('.tabpanel')) {
        forEach.call(tabs.querySelectorAll('.tabpanel table.tableblock'), function (table) {
          var container = Object.assign(document.createElement('div'), { className: 'tablecontainer' })
          table.parentNode.insertBefore(container, table).appendChild(table)
        })
      }
      if (start) {
        var syncGroupId
        for (var i = 0, lst = tabs.classList, len = lst.length, className; i !== len; i++) {
          if (!(className = lst.item(i)).startsWith('data-sync-group-id=')) continue
          tabs.dataset.syncGroupId = syncGroupId = lst.remove(className) || className.slice(19).replace(/\u00a0/g, ' ')
          break
        }
        if (syncGroupId === undefined) tabs.dataset.syncGroupId = syncGroupId = Object.keys(syncIds).sort().join('|')
        var preferredSyncId = 'syncStorageKey' in config &&
          window[(config.syncStorageScope || 'local') + 'Storage'].getItem(config.syncStorageKey + '-' + syncGroupId)
        var tab = preferredSyncId && syncIds[preferredSyncId]
        tab && Object.assign(start, { tab: tab, panel: document.getElementById(tab.getAttribute('aria-controls')) })
        toggleSelected(start.tab, true) || toggleHidden(start.panel, false)
      }
    })
    onHashChange()
    toggleClassOnEach(tabsBlocks, 'is-loading', 'remove')
    window.setTimeout(toggleClassOnEach.bind(null, tabsBlocks, 'is-loaded', 'add'), 0)
    window.addEventListener('hashchange', onHashChange)
  }

  function activateTab (e) {
    var tab = this.tab
    var tabs = this.tabs || (this.tabs = tab.closest('.tabs'))
    var panel = this.panel || (this.panel = document.getElementById(tab.getAttribute('aria-controls')))
    querySelectorWithSiblings(tabs, '.tablist .tab', 'tab').forEach(function (el) {
      toggleSelected(el, el === tab)
    })
    querySelectorWithSiblings(tabs, '.tabpanel', 'tabpanel').forEach(function (el) {
      toggleHidden(el, el !== panel)
    })
    if (!this.isSync && 'syncStorageKey' in config && 'syncGroupId' in tabs.dataset) {
      var storageKey = config.syncStorageKey + '-' + tabs.dataset.syncGroupId
      window[(config.syncStorageScope || 'local') + 'Storage'].setItem(storageKey, tab.dataset.syncId)
    }
    if (!e) return
    var loc = window.location
    var hashIdx = loc.hash ? loc.href.indexOf('#') : -1
    if (~hashIdx) window.history.replaceState(null, '', loc.href.slice(0, hashIdx))
    e.preventDefault()
  }

  function activateTabSync (e) {
    activateTab.call(this, e)
    var thisTabs = this.tabs
    var thisTab = this.tab
    var initialY = thisTabs.getBoundingClientRect().y
    forEach.call(document.querySelectorAll('.tabs'), function (tabs) {
      if (tabs === thisTabs || tabs.dataset.syncGroupId !== thisTabs.dataset.syncGroupId) return
      querySelectorWithSiblings(tabs, '.tablist .tab', 'tab').forEach(function (tab) {
        if (tab.dataset.syncId === thisTab.dataset.syncId) activateTab.call({ tabs: tabs, tab: tab, isSync: true })
      })
    })
    var shiftedBy = thisTabs.getBoundingClientRect().y - initialY
    if (shiftedBy && (shiftedBy = Math.round(shiftedBy))) window.scrollBy({ top: shiftedBy, behavior: 'instant' })
  }

  function querySelectorWithSiblings (scope, selector, siblingClass) {
    var el = scope.querySelector(selector)
    if (!el) return []
    var result = [el]
    while ((el = el.nextElementSibling) && el.classList.contains(siblingClass)) result.push(el)
    return result
  }

  function toggleClassOnEach (elements, className, method) {
    forEach.call(elements, function (el) {
      el.classList[method](className)
    })
  }

  function toggleHidden (el, state) {
    el.classList[(el.hidden = state) ? 'add' : 'remove']('is-hidden')
  }

  function toggleSelected (el, state) {
    el.setAttribute('aria-selected', '' + state)
    el.classList[state ? 'add' : 'remove']('is-selected')
    el.tabIndex = state ? 0 : -1
  }

  function onHashChange () {
    var id = window.location.hash.slice(1)
    if (!id) return
    var tab = document.getElementById(~id.indexOf('%') ? decodeURIComponent(id) : id)
    if (!(tab && tab.classList.contains('tab'))) return
    'syncId' in tab.dataset ? activateTabSync.call({ tab: tab }) : activateTab.call({ tab: tab })
  }
})()
</script>
</body>
</html>